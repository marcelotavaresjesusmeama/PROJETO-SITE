(function EKIIFE(){try{var $M=Object.create;var{getPrototypeOf:RM,defineProperty:Zq,getOwnPropertyNames:LM}=Object;var MM=Object.prototype.hasOwnProperty;var Hq=(A,Q,B)=>{B=A!=null?$M(RM(A)):{};let C=Q||!A||!A.__esModule?Zq(B,"default",{value:A,enumerable:!0}):B;for(let J of LM(A))if(!MM.call(C,J))Zq(C,J,{get:()=>A[J],enumerable:!0});return C};var WW=(A,Q)=>()=>(Q||A((Q={exports:{}}).exports,Q),Q.exports);var FW=(A,Q)=>{for(var B in Q)Zq(A,B,{get:Q[B],enumerable:!0,configurable:!0,set:(C)=>Q[B]=()=>C})};var f=function(A,Q,B,C){var J=arguments.length,I=J<3?Q:C===null?C=Object.getOwnPropertyDescriptor(Q,B):C,q;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")I=Reflect.decorate(A,Q,B,C);else for(var K=A.length-1;K>=0;K--)if(q=A[K])I=(J<3?q(I):J>3?q(Q,B,I):q(Q,B))||I;return J>3&&I&&Object.defineProperty(Q,B,I),I};var BY=WW((vU,hC)=>{/*! showdown v 2.1.0 - 21-04-2022 */(function(){function A(X){var V={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic \'section-\' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:'Remove only spaces, \' and " from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids',type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `\xAB\xAB\xAB` and `\xBB\xBB\xBB` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(X===!1)return JSON.parse(JSON.stringify(V));var D={};for(var N in V)if(V.hasOwnProperty(N))D[N]=V[N].defaultValue;return D}function Q(){var X=A(!0),V={};for(var D in X)if(X.hasOwnProperty(D))V[D]=!0;return V}var B={},C={},J={},I=A(!0),q="vanilla",K={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:A(!0),allOn:Q()};B.helper={},B.extensions={},B.setOption=function(X,V){return I[X]=V,this},B.getOption=function(X){return I[X]},B.getOptions=function(){return I},B.resetOptions=function(){I=A(!0)},B.setFlavor=function(X){if(!K.hasOwnProperty(X))throw Error(X+" flavor was not found");B.resetOptions();var V=K[X];q=X;for(var D in V)if(V.hasOwnProperty(D))I[D]=V[D]},B.getFlavor=function(){return q},B.getFlavorOptions=function(X){if(K.hasOwnProperty(X))return K[X]},B.getDefaultOptions=function(X){return A(X)},B.subParser=function(X,V){if(B.helper.isString(X))if(typeof V!=="undefined")C[X]=V;else if(C.hasOwnProperty(X))return C[X];else throw Error("SubParser named "+X+" not registered!")},B.extension=function(X,V){if(!B.helper.isString(X))throw Error("Extension \'name\' must be a string");if(X=B.helper.stdExtName(X),B.helper.isUndefined(V)){if(!J.hasOwnProperty(X))throw Error("Extension named "+X+" is not registered!");return J[X]}else{if(typeof V==="function")V=V();if(!B.helper.isArray(V))V=[V];var D=Y(V,X);if(D.valid)J[X]=V;else throw Error(D.error)}},B.getAllExtensions=function(){return J},B.removeExtension=function(X){delete J[X]},B.resetExtensions=function(){J={}};function Y(X,V){var D=V?"Error in "+V+" extension->":"Error in unnamed extension",N={valid:!0,error:""};if(!B.helper.isArray(X))X=[X];for(var R=0;R<X.length;++R){var k=D+" sub-extension "+R+": ",P=X[R];if(typeof P!=="object")return N.valid=!1,N.error=k+"must be an object, but "+typeof P+" given",N;if(!B.helper.isString(P.type))return N.valid=!1,N.error=k+'property "type" must be a string, but '+typeof P.type+" given",N;var $=P.type=P.type.toLowerCase();if($==="language")$=P.type="lang";if($==="html")$=P.type="output";if($!=="lang"&&$!=="output"&&$!=="listener")return N.valid=!1,N.error=k+"type "+$+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',N;if($==="listener"){if(B.helper.isUndefined(P.listeners))return N.valid=!1,N.error=k+'. Extensions of type "listener" must have a property called "listeners"',N}else if(B.helper.isUndefined(P.filter)&&B.helper.isUndefined(P.regex))return N.valid=!1,N.error=k+$+' extensions must define either a "regex" property or a "filter" method',N;if(P.listeners){if(typeof P.listeners!=="object")return N.valid=!1,N.error=k+'"listeners" property must be an object but '+typeof P.listeners+" given",N;for(var _ in P.listeners)if(P.listeners.hasOwnProperty(_)){if(typeof P.listeners[_]!=="function")return N.valid=!1,N.error=k+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+_+" must be a function but "+typeof P.listeners[_]+" given",N}}if(P.filter){if(typeof P.filter!=="function")return N.valid=!1,N.error=k+'"filter" must be a function, but '+typeof P.filter+" given",N}else if(P.regex){if(B.helper.isString(P.regex))P.regex=new RegExp(P.regex,"g");if(!(P.regex instanceof RegExp))return N.valid=!1,N.error=k+'"regex" property must either be a string or a RegExp object, but '+typeof P.regex+" given",N;if(B.helper.isUndefined(P.replace))return N.valid=!1,N.error=k+'"regex" extensions must implement a replace string or function',N}}return N}if(B.validateExtension=function(X){var V=Y(X,null);if(!V.valid)return console.warn(V.error),!1;return!0},!B.hasOwnProperty("helper"))B.helper={};B.helper.isString=function(X){return typeof X==="string"||X instanceof String},B.helper.isFunction=function(X){var V={};return X&&V.toString.call(X)==="[object Function]"},B.helper.isArray=function(X){return Array.isArray(X)},B.helper.isUndefined=function(X){return typeof X==="undefined"},B.helper.forEach=function(X,V){if(B.helper.isUndefined(X))throw new Error("obj param is required");if(B.helper.isUndefined(V))throw new Error("callback param is required");if(!B.helper.isFunction(V))throw new Error("callback param must be a function/closure");if(typeof X.forEach==="function")X.forEach(V);else if(B.helper.isArray(X))for(var D=0;D<X.length;D++)V(X[D],D,X);else if(typeof X==="object"){for(var N in X)if(X.hasOwnProperty(N))V(X[N],N,X)}else throw new Error("obj does not seem to be an array or an iterable object")},B.helper.stdExtName=function(X){return X.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()};function Z(X,V){var D=V.charCodeAt(0);return"\xA8E"+D+"E"}B.helper.escapeCharactersCallback=Z,B.helper.escapeCharacters=function(X,V,D){var N="(["+V.replace(/([\[\]\\])/g,"\\$1")+"])";if(D)N="\\\\"+N;var R=new RegExp(N,"g");return X=X.replace(R,Z),X},B.helper.unescapeHTMLEntities=function(X){return X.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var H=function(X,V,D,N){var R=N||"",k=R.indexOf("g")>-1,P=new RegExp(V+"|"+D,"g"+R.replace(/g/g,"")),$=new RegExp(V,R.replace(/g/g,"")),_=[],h,S,O,M,y;do{h=0;while(O=P.exec(X))if($.test(O[0])){if(!h++)S=P.lastIndex,M=S-O[0].length}else if(h){if(!--h){y=O.index+O[0].length;var u={left:{start:M,end:S},match:{start:S,end:O.index},right:{start:O.index,end:y},wholeMatch:{start:M,end:y}};if(_.push(u),!k)return _}}}while(h&&(P.lastIndex=S));return _};if(B.helper.matchRecursiveRegExp=function(X,V,D,N){var R=H(X,V,D,N),k=[];for(var P=0;P<R.length;++P)k.push([X.slice(R[P].wholeMatch.start,R[P].wholeMatch.end),X.slice(R[P].match.start,R[P].match.end),X.slice(R[P].left.start,R[P].left.end),X.slice(R[P].right.start,R[P].right.end)]);return k},B.helper.replaceRecursiveRegExp=function(X,V,D,N,R){if(!B.helper.isFunction(V)){var k=V;V=function(){return k}}var P=H(X,D,N,R),$=X,_=P.length;if(_>0){var h=[];if(P[0].wholeMatch.start!==0)h.push(X.slice(0,P[0].wholeMatch.start));for(var S=0;S<_;++S)if(h.push(V(X.slice(P[S].wholeMatch.start,P[S].wholeMatch.end),X.slice(P[S].match.start,P[S].match.end),X.slice(P[S].left.start,P[S].left.end),X.slice(P[S].right.start,P[S].right.end))),S<_-1)h.push(X.slice(P[S].wholeMatch.end,P[S+1].wholeMatch.start));if(P[_-1].wholeMatch.end<X.length)h.push(X.slice(P[_-1].wholeMatch.end));$=h.join("")}return $},B.helper.regexIndexOf=function(X,V,D){if(!B.helper.isString(X))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(V instanceof RegExp===!1)throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var N=X.substring(D||0).search(V);return N>=0?N+(D||0):N},B.helper.splitAtIndex=function(X,V){if(!B.helper.isString(X))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[X.substring(0,V),X.substring(V)]},B.helper.encodeEmailAddress=function(X){var V=[function(D){return"&#"+D.charCodeAt(0)+";"},function(D){return"&#x"+D.charCodeAt(0).toString(16)+";"},function(D){return D}];return X=X.replace(/./g,function(D){if(D==="@")D=V[Math.floor(Math.random()*2)](D);else{var N=Math.random();D=N>0.9?V[2](D):N>0.45?V[1](D):V[0](D)}return D}),X},B.helper.padEnd=function X(V,D,N){if(D=D>>0,N=String(N||" "),V.length>D)return String(V);else{if(D=D-V.length,D>N.length)N+=N.repeat(D/N.length);return String(V)+N.slice(0,D)}},typeof console==="undefined")console={warn:function(X){alert(X)},log:function(X){alert(X)},error:function(X){throw X}};B.helper.regexes={asteriskDashAndColon:/([*_:~])/g},B.helper.emojis={"+1":"\uD83D\uDC4D","-1":"\uD83D\uDC4E","100":"\uD83D\uDCAF","1234":"\uD83D\uDD22","1st_place_medal":"\uD83E\uDD47","2nd_place_medal":"\uD83E\uDD48","3rd_place_medal":"\uD83E\uDD49","8ball":"\uD83C\uDFB1",a:"\uD83C\uDD70\uFE0F",ab:"\uD83C\uDD8E",abc:"\uD83D\uDD24",abcd:"\uD83D\uDD21",accept:"\uD83C\uDE51",aerial_tramway:"\uD83D\uDEA1",airplane:"\u2708\uFE0F",alarm_clock:"\u23F0",alembic:"\u2697\uFE0F",alien:"\uD83D\uDC7D",ambulance:"\uD83D\uDE91",amphora:"\uD83C\uDFFA",anchor:"\u2693\uFE0F",angel:"\uD83D\uDC7C",anger:"\uD83D\uDCA2",angry:"\uD83D\uDE20",anguished:"\uD83D\uDE27",ant:"\uD83D\uDC1C",apple:"\uD83C\uDF4E",aquarius:"\u2652\uFE0F",aries:"\u2648\uFE0F",arrow_backward:"\u25C0\uFE0F",arrow_double_down:"\u23EC",arrow_double_up:"\u23EB",arrow_down:"\u2B07\uFE0F",arrow_down_small:"\uD83D\uDD3D",arrow_forward:"\u25B6\uFE0F",arrow_heading_down:"\u2935\uFE0F",arrow_heading_up:"\u2934\uFE0F",arrow_left:"\u2B05\uFE0F",arrow_lower_left:"\u2199\uFE0F",arrow_lower_right:"\u2198\uFE0F",arrow_right:"\u27A1\uFE0F",arrow_right_hook:"\u21AA\uFE0F",arrow_up:"\u2B06\uFE0F",arrow_up_down:"\u2195\uFE0F",arrow_up_small:"\uD83D\uDD3C",arrow_upper_left:"\u2196\uFE0F",arrow_upper_right:"\u2197\uFE0F",arrows_clockwise:"\uD83D\uDD03",arrows_counterclockwise:"\uD83D\uDD04",art:"\uD83C\uDFA8",articulated_lorry:"\uD83D\uDE9B",artificial_satellite:"\uD83D\uDEF0",astonished:"\uD83D\uDE32",athletic_shoe:"\uD83D\uDC5F",atm:"\uD83C\uDFE7",atom_symbol:"\u269B\uFE0F",avocado:"\uD83E\uDD51",b:"\uD83C\uDD71\uFE0F",baby:"\uD83D\uDC76",baby_bottle:"\uD83C\uDF7C",baby_chick:"\uD83D\uDC24",baby_symbol:"\uD83D\uDEBC",back:"\uD83D\uDD19",bacon:"\uD83E\uDD53",badminton:"\uD83C\uDFF8",baggage_claim:"\uD83D\uDEC4",baguette_bread:"\uD83E\uDD56",balance_scale:"\u2696\uFE0F",balloon:"\uD83C\uDF88",ballot_box:"\uD83D\uDDF3",ballot_box_with_check:"\u2611\uFE0F",bamboo:"\uD83C\uDF8D",banana:"\uD83C\uDF4C",bangbang:"\u203C\uFE0F",bank:"\uD83C\uDFE6",bar_chart:"\uD83D\uDCCA",barber:"\uD83D\uDC88",baseball:"\u26BE\uFE0F",basketball:"\uD83C\uDFC0",basketball_man:"\u26F9\uFE0F",basketball_woman:"\u26F9\uFE0F&zwj;\u2640\uFE0F",bat:"\uD83E\uDD87",bath:"\uD83D\uDEC0",bathtub:"\uD83D\uDEC1",battery:"\uD83D\uDD0B",beach_umbrella:"\uD83C\uDFD6",bear:"\uD83D\uDC3B",bed:"\uD83D\uDECF",bee:"\uD83D\uDC1D",beer:"\uD83C\uDF7A",beers:"\uD83C\uDF7B",beetle:"\uD83D\uDC1E",beginner:"\uD83D\uDD30",bell:"\uD83D\uDD14",bellhop_bell:"\uD83D\uDECE",bento:"\uD83C\uDF71",biking_man:"\uD83D\uDEB4",bike:"\uD83D\uDEB2",biking_woman:"\uD83D\uDEB4&zwj;\u2640\uFE0F",bikini:"\uD83D\uDC59",biohazard:"\u2623\uFE0F",bird:"\uD83D\uDC26",birthday:"\uD83C\uDF82",black_circle:"\u26AB\uFE0F",black_flag:"\uD83C\uDFF4",black_heart:"\uD83D\uDDA4",black_joker:"\uD83C\uDCCF",black_large_square:"\u2B1B\uFE0F",black_medium_small_square:"\u25FE\uFE0F",black_medium_square:"\u25FC\uFE0F",black_nib:"\u2712\uFE0F",black_small_square:"\u25AA\uFE0F",black_square_button:"\uD83D\uDD32",blonde_man:"\uD83D\uDC71",blonde_woman:"\uD83D\uDC71&zwj;\u2640\uFE0F",blossom:"\uD83C\uDF3C",blowfish:"\uD83D\uDC21",blue_book:"\uD83D\uDCD8",blue_car:"\uD83D\uDE99",blue_heart:"\uD83D\uDC99",blush:"\uD83D\uDE0A",boar:"\uD83D\uDC17",boat:"\u26F5\uFE0F",bomb:"\uD83D\uDCA3",book:"\uD83D\uDCD6",bookmark:"\uD83D\uDD16",bookmark_tabs:"\uD83D\uDCD1",books:"\uD83D\uDCDA",boom:"\uD83D\uDCA5",boot:"\uD83D\uDC62",bouquet:"\uD83D\uDC90",bowing_man:"\uD83D\uDE47",bow_and_arrow:"\uD83C\uDFF9",bowing_woman:"\uD83D\uDE47&zwj;\u2640\uFE0F",bowling:"\uD83C\uDFB3",boxing_glove:"\uD83E\uDD4A",boy:"\uD83D\uDC66",bread:"\uD83C\uDF5E",bride_with_veil:"\uD83D\uDC70",bridge_at_night:"\uD83C\uDF09",briefcase:"\uD83D\uDCBC",broken_heart:"\uD83D\uDC94",bug:"\uD83D\uDC1B",building_construction:"\uD83C\uDFD7",bulb:"\uD83D\uDCA1",bullettrain_front:"\uD83D\uDE85",bullettrain_side:"\uD83D\uDE84",burrito:"\uD83C\uDF2F",bus:"\uD83D\uDE8C",business_suit_levitating:"\uD83D\uDD74",busstop:"\uD83D\uDE8F",bust_in_silhouette:"\uD83D\uDC64",busts_in_silhouette:"\uD83D\uDC65",butterfly:"\uD83E\uDD8B",cactus:"\uD83C\uDF35",cake:"\uD83C\uDF70",calendar:"\uD83D\uDCC6",call_me_hand:"\uD83E\uDD19",calling:"\uD83D\uDCF2",camel:"\uD83D\uDC2B",camera:"\uD83D\uDCF7",camera_flash:"\uD83D\uDCF8",camping:"\uD83C\uDFD5",cancer:"\u264B\uFE0F",candle:"\uD83D\uDD6F",candy:"\uD83C\uDF6C",canoe:"\uD83D\uDEF6",capital_abcd:"\uD83D\uDD20",capricorn:"\u2651\uFE0F",car:"\uD83D\uDE97",card_file_box:"\uD83D\uDDC3",card_index:"\uD83D\uDCC7",card_index_dividers:"\uD83D\uDDC2",carousel_horse:"\uD83C\uDFA0",carrot:"\uD83E\uDD55",cat:"\uD83D\uDC31",cat2:"\uD83D\uDC08",cd:"\uD83D\uDCBF",chains:"\u26D3",champagne:"\uD83C\uDF7E",chart:"\uD83D\uDCB9",chart_with_downwards_trend:"\uD83D\uDCC9",chart_with_upwards_trend:"\uD83D\uDCC8",checkered_flag:"\uD83C\uDFC1",cheese:"\uD83E\uDDC0",cherries:"\uD83C\uDF52",cherry_blossom:"\uD83C\uDF38",chestnut:"\uD83C\uDF30",chicken:"\uD83D\uDC14",children_crossing:"\uD83D\uDEB8",chipmunk:"\uD83D\uDC3F",chocolate_bar:"\uD83C\uDF6B",christmas_tree:"\uD83C\uDF84",church:"\u26EA\uFE0F",cinema:"\uD83C\uDFA6",circus_tent:"\uD83C\uDFAA",city_sunrise:"\uD83C\uDF07",city_sunset:"\uD83C\uDF06",cityscape:"\uD83C\uDFD9",cl:"\uD83C\uDD91",clamp:"\uD83D\uDDDC",clap:"\uD83D\uDC4F",clapper:"\uD83C\uDFAC",classical_building:"\uD83C\uDFDB",clinking_glasses:"\uD83E\uDD42",clipboard:"\uD83D\uDCCB",clock1:"\uD83D\uDD50",clock10:"\uD83D\uDD59",clock1030:"\uD83D\uDD65",clock11:"\uD83D\uDD5A",clock1130:"\uD83D\uDD66",clock12:"\uD83D\uDD5B",clock1230:"\uD83D\uDD67",clock130:"\uD83D\uDD5C",clock2:"\uD83D\uDD51",clock230:"\uD83D\uDD5D",clock3:"\uD83D\uDD52",clock330:"\uD83D\uDD5E",clock4:"\uD83D\uDD53",clock430:"\uD83D\uDD5F",clock5:"\uD83D\uDD54",clock530:"\uD83D\uDD60",clock6:"\uD83D\uDD55",clock630:"\uD83D\uDD61",clock7:"\uD83D\uDD56",clock730:"\uD83D\uDD62",clock8:"\uD83D\uDD57",clock830:"\uD83D\uDD63",clock9:"\uD83D\uDD58",clock930:"\uD83D\uDD64",closed_book:"\uD83D\uDCD5",closed_lock_with_key:"\uD83D\uDD10",closed_umbrella:"\uD83C\uDF02",cloud:"\u2601\uFE0F",cloud_with_lightning:"\uD83C\uDF29",cloud_with_lightning_and_rain:"\u26C8",cloud_with_rain:"\uD83C\uDF27",cloud_with_snow:"\uD83C\uDF28",clown_face:"\uD83E\uDD21",clubs:"\u2663\uFE0F",cocktail:"\uD83C\uDF78",coffee:"\u2615\uFE0F",coffin:"\u26B0\uFE0F",cold_sweat:"\uD83D\uDE30",comet:"\u2604\uFE0F",computer:"\uD83D\uDCBB",computer_mouse:"\uD83D\uDDB1",confetti_ball:"\uD83C\uDF8A",confounded:"\uD83D\uDE16",confused:"\uD83D\uDE15",congratulations:"\u3297\uFE0F",construction:"\uD83D\uDEA7",construction_worker_man:"\uD83D\uDC77",construction_worker_woman:"\uD83D\uDC77&zwj;\u2640\uFE0F",control_knobs:"\uD83C\uDF9B",convenience_store:"\uD83C\uDFEA",cookie:"\uD83C\uDF6A",cool:"\uD83C\uDD92",policeman:"\uD83D\uDC6E",copyright:"\xA9\uFE0F",corn:"\uD83C\uDF3D",couch_and_lamp:"\uD83D\uDECB",couple:"\uD83D\uDC6B",couple_with_heart_woman_man:"\uD83D\uDC91",couple_with_heart_man_man:"\uD83D\uDC68&zwj;\u2764\uFE0F&zwj;\uD83D\uDC68",couple_with_heart_woman_woman:"\uD83D\uDC69&zwj;\u2764\uFE0F&zwj;\uD83D\uDC69",couplekiss_man_man:"\uD83D\uDC68&zwj;\u2764\uFE0F&zwj;\uD83D\uDC8B&zwj;\uD83D\uDC68",couplekiss_man_woman:"\uD83D\uDC8F",couplekiss_woman_woman:"\uD83D\uDC69&zwj;\u2764\uFE0F&zwj;\uD83D\uDC8B&zwj;\uD83D\uDC69",cow:"\uD83D\uDC2E",cow2:"\uD83D\uDC04",cowboy_hat_face:"\uD83E\uDD20",crab:"\uD83E\uDD80",crayon:"\uD83D\uDD8D",credit_card:"\uD83D\uDCB3",crescent_moon:"\uD83C\uDF19",cricket:"\uD83C\uDFCF",crocodile:"\uD83D\uDC0A",croissant:"\uD83E\uDD50",crossed_fingers:"\uD83E\uDD1E",crossed_flags:"\uD83C\uDF8C",crossed_swords:"\u2694\uFE0F",crown:"\uD83D\uDC51",cry:"\uD83D\uDE22",crying_cat_face:"\uD83D\uDE3F",crystal_ball:"\uD83D\uDD2E",cucumber:"\uD83E\uDD52",cupid:"\uD83D\uDC98",curly_loop:"\u27B0",currency_exchange:"\uD83D\uDCB1",curry:"\uD83C\uDF5B",custard:"\uD83C\uDF6E",customs:"\uD83D\uDEC3",cyclone:"\uD83C\uDF00",dagger:"\uD83D\uDDE1",dancer:"\uD83D\uDC83",dancing_women:"\uD83D\uDC6F",dancing_men:"\uD83D\uDC6F&zwj;\u2642\uFE0F",dango:"\uD83C\uDF61",dark_sunglasses:"\uD83D\uDD76",dart:"\uD83C\uDFAF",dash:"\uD83D\uDCA8",date:"\uD83D\uDCC5",deciduous_tree:"\uD83C\uDF33",deer:"\uD83E\uDD8C",department_store:"\uD83C\uDFEC",derelict_house:"\uD83C\uDFDA",desert:"\uD83C\uDFDC",desert_island:"\uD83C\uDFDD",desktop_computer:"\uD83D\uDDA5",male_detective:"\uD83D\uDD75\uFE0F",diamond_shape_with_a_dot_inside:"\uD83D\uDCA0",diamonds:"\u2666\uFE0F",disappointed:"\uD83D\uDE1E",disappointed_relieved:"\uD83D\uDE25",dizzy:"\uD83D\uDCAB",dizzy_face:"\uD83D\uDE35",do_not_litter:"\uD83D\uDEAF",dog:"\uD83D\uDC36",dog2:"\uD83D\uDC15",dollar:"\uD83D\uDCB5",dolls:"\uD83C\uDF8E",dolphin:"\uD83D\uDC2C",door:"\uD83D\uDEAA",doughnut:"\uD83C\uDF69",dove:"\uD83D\uDD4A",dragon:"\uD83D\uDC09",dragon_face:"\uD83D\uDC32",dress:"\uD83D\uDC57",dromedary_camel:"\uD83D\uDC2A",drooling_face:"\uD83E\uDD24",droplet:"\uD83D\uDCA7",drum:"\uD83E\uDD41",duck:"\uD83E\uDD86",dvd:"\uD83D\uDCC0","e-mail":"\uD83D\uDCE7",eagle:"\uD83E\uDD85",ear:"\uD83D\uDC42",ear_of_rice:"\uD83C\uDF3E",earth_africa:"\uD83C\uDF0D",earth_americas:"\uD83C\uDF0E",earth_asia:"\uD83C\uDF0F",egg:"\uD83E\uDD5A",eggplant:"\uD83C\uDF46",eight_pointed_black_star:"\u2734\uFE0F",eight_spoked_asterisk:"\u2733\uFE0F",electric_plug:"\uD83D\uDD0C",elephant:"\uD83D\uDC18",email:"\u2709\uFE0F",end:"\uD83D\uDD1A",envelope_with_arrow:"\uD83D\uDCE9",euro:"\uD83D\uDCB6",european_castle:"\uD83C\uDFF0",european_post_office:"\uD83C\uDFE4",evergreen_tree:"\uD83C\uDF32",exclamation:"\u2757\uFE0F",expressionless:"\uD83D\uDE11",eye:"\uD83D\uDC41",eye_speech_bubble:"\uD83D\uDC41&zwj;\uD83D\uDDE8",eyeglasses:"\uD83D\uDC53",eyes:"\uD83D\uDC40",face_with_head_bandage:"\uD83E\uDD15",face_with_thermometer:"\uD83E\uDD12",fist_oncoming:"\uD83D\uDC4A",factory:"\uD83C\uDFED",fallen_leaf:"\uD83C\uDF42",family_man_woman_boy:"\uD83D\uDC6A",family_man_boy:"\uD83D\uDC68&zwj;\uD83D\uDC66",family_man_boy_boy:"\uD83D\uDC68&zwj;\uD83D\uDC66&zwj;\uD83D\uDC66",family_man_girl:"\uD83D\uDC68&zwj;\uD83D\uDC67",family_man_girl_boy:"\uD83D\uDC68&zwj;\uD83D\uDC67&zwj;\uD83D\uDC66",family_man_girl_girl:"\uD83D\uDC68&zwj;\uD83D\uDC67&zwj;\uD83D\uDC67",family_man_man_boy:"\uD83D\uDC68&zwj;\uD83D\uDC68&zwj;\uD83D\uDC66",family_man_man_boy_boy:"\uD83D\uDC68&zwj;\uD83D\uDC68&zwj;\uD83D\uDC66&zwj;\uD83D\uDC66",family_man_man_girl:"\uD83D\uDC68&zwj;\uD83D\uDC68&zwj;\uD83D\uDC67",family_man_man_girl_boy:"\uD83D\uDC68&zwj;\uD83D\uDC68&zwj;\uD83D\uDC67&zwj;\uD83D\uDC66",family_man_man_girl_girl:"\uD83D\uDC68&zwj;\uD83D\uDC68&zwj;\uD83D\uDC67&zwj;\uD83D\uDC67",family_man_woman_boy_boy:"\uD83D\uDC68&zwj;\uD83D\uDC69&zwj;\uD83D\uDC66&zwj;\uD83D\uDC66",family_man_woman_girl:"\uD83D\uDC68&zwj;\uD83D\uDC69&zwj;\uD83D\uDC67",family_man_woman_girl_boy:"\uD83D\uDC68&zwj;\uD83D\uDC69&zwj;\uD83D\uDC67&zwj;\uD83D\uDC66",family_man_woman_girl_girl:"\uD83D\uDC68&zwj;\uD83D\uDC69&zwj;\uD83D\uDC67&zwj;\uD83D\uDC67",family_woman_boy:"\uD83D\uDC69&zwj;\uD83D\uDC66",family_woman_boy_boy:"\uD83D\uDC69&zwj;\uD83D\uDC66&zwj;\uD83D\uDC66",family_woman_girl:"\uD83D\uDC69&zwj;\uD83D\uDC67",family_woman_girl_boy:"\uD83D\uDC69&zwj;\uD83D\uDC67&zwj;\uD83D\uDC66",family_woman_girl_girl:"\uD83D\uDC69&zwj;\uD83D\uDC67&zwj;\uD83D\uDC67",family_woman_woman_boy:"\uD83D\uDC69&zwj;\uD83D\uDC69&zwj;\uD83D\uDC66",family_woman_woman_boy_boy:"\uD83D\uDC69&zwj;\uD83D\uDC69&zwj;\uD83D\uDC66&zwj;\uD83D\uDC66",family_woman_woman_girl:"\uD83D\uDC69&zwj;\uD83D\uDC69&zwj;\uD83D\uDC67",family_woman_woman_girl_boy:"\uD83D\uDC69&zwj;\uD83D\uDC69&zwj;\uD83D\uDC67&zwj;\uD83D\uDC66",family_woman_woman_girl_girl:"\uD83D\uDC69&zwj;\uD83D\uDC69&zwj;\uD83D\uDC67&zwj;\uD83D\uDC67",fast_forward:"\u23E9",fax:"\uD83D\uDCE0",fearful:"\uD83D\uDE28",feet:"\uD83D\uDC3E",female_detective:"\uD83D\uDD75\uFE0F&zwj;\u2640\uFE0F",ferris_wheel:"\uD83C\uDFA1",ferry:"\u26F4",field_hockey:"\uD83C\uDFD1",file_cabinet:"\uD83D\uDDC4",file_folder:"\uD83D\uDCC1",film_projector:"\uD83D\uDCFD",film_strip:"\uD83C\uDF9E",fire:"\uD83D\uDD25",fire_engine:"\uD83D\uDE92",fireworks:"\uD83C\uDF86",first_quarter_moon:"\uD83C\uDF13",first_quarter_moon_with_face:"\uD83C\uDF1B",fish:"\uD83D\uDC1F",fish_cake:"\uD83C\uDF65",fishing_pole_and_fish:"\uD83C\uDFA3",fist_raised:"\u270A",fist_left:"\uD83E\uDD1B",fist_right:"\uD83E\uDD1C",flags:"\uD83C\uDF8F",flashlight:"\uD83D\uDD26",fleur_de_lis:"\u269C\uFE0F",flight_arrival:"\uD83D\uDEEC",flight_departure:"\uD83D\uDEEB",floppy_disk:"\uD83D\uDCBE",flower_playing_cards:"\uD83C\uDFB4",flushed:"\uD83D\uDE33",fog:"\uD83C\uDF2B",foggy:"\uD83C\uDF01",football:"\uD83C\uDFC8",footprints:"\uD83D\uDC63",fork_and_knife:"\uD83C\uDF74",fountain:"\u26F2\uFE0F",fountain_pen:"\uD83D\uDD8B",four_leaf_clover:"\uD83C\uDF40",fox_face:"\uD83E\uDD8A",framed_picture:"\uD83D\uDDBC",free:"\uD83C\uDD93",fried_egg:"\uD83C\uDF73",fried_shrimp:"\uD83C\uDF64",fries:"\uD83C\uDF5F",frog:"\uD83D\uDC38",frowning:"\uD83D\uDE26",frowning_face:"\u2639\uFE0F",frowning_man:"\uD83D\uDE4D&zwj;\u2642\uFE0F",frowning_woman:"\uD83D\uDE4D",middle_finger:"\uD83D\uDD95",fuelpump:"\u26FD\uFE0F",full_moon:"\uD83C\uDF15",full_moon_with_face:"\uD83C\uDF1D",funeral_urn:"\u26B1\uFE0F",game_die:"\uD83C\uDFB2",gear:"\u2699\uFE0F",gem:"\uD83D\uDC8E",gemini:"\u264A\uFE0F",ghost:"\uD83D\uDC7B",gift:"\uD83C\uDF81",gift_heart:"\uD83D\uDC9D",girl:"\uD83D\uDC67",globe_with_meridians:"\uD83C\uDF10",goal_net:"\uD83E\uDD45",goat:"\uD83D\uDC10",golf:"\u26F3\uFE0F",golfing_man:"\uD83C\uDFCC\uFE0F",golfing_woman:"\uD83C\uDFCC\uFE0F&zwj;\u2640\uFE0F",gorilla:"\uD83E\uDD8D",grapes:"\uD83C\uDF47",green_apple:"\uD83C\uDF4F",green_book:"\uD83D\uDCD7",green_heart:"\uD83D\uDC9A",green_salad:"\uD83E\uDD57",grey_exclamation:"\u2755",grey_question:"\u2754",grimacing:"\uD83D\uDE2C",grin:"\uD83D\uDE01",grinning:"\uD83D\uDE00",guardsman:"\uD83D\uDC82",guardswoman:"\uD83D\uDC82&zwj;\u2640\uFE0F",guitar:"\uD83C\uDFB8",gun:"\uD83D\uDD2B",haircut_woman:"\uD83D\uDC87",haircut_man:"\uD83D\uDC87&zwj;\u2642\uFE0F",hamburger:"\uD83C\uDF54",hammer:"\uD83D\uDD28",hammer_and_pick:"\u2692",hammer_and_wrench:"\uD83D\uDEE0",hamster:"\uD83D\uDC39",hand:"\u270B",handbag:"\uD83D\uDC5C",handshake:"\uD83E\uDD1D",hankey:"\uD83D\uDCA9",hatched_chick:"\uD83D\uDC25",hatching_chick:"\uD83D\uDC23",headphones:"\uD83C\uDFA7",hear_no_evil:"\uD83D\uDE49",heart:"\u2764\uFE0F",heart_decoration:"\uD83D\uDC9F",heart_eyes:"\uD83D\uDE0D",heart_eyes_cat:"\uD83D\uDE3B",heartbeat:"\uD83D\uDC93",heartpulse:"\uD83D\uDC97",hearts:"\u2665\uFE0F",heavy_check_mark:"\u2714\uFE0F",heavy_division_sign:"\u2797",heavy_dollar_sign:"\uD83D\uDCB2",heavy_heart_exclamation:"\u2763\uFE0F",heavy_minus_sign:"\u2796",heavy_multiplication_x:"\u2716\uFE0F",heavy_plus_sign:"\u2795",helicopter:"\uD83D\uDE81",herb:"\uD83C\uDF3F",hibiscus:"\uD83C\uDF3A",high_brightness:"\uD83D\uDD06",high_heel:"\uD83D\uDC60",hocho:"\uD83D\uDD2A",hole:"\uD83D\uDD73",honey_pot:"\uD83C\uDF6F",horse:"\uD83D\uDC34",horse_racing:"\uD83C\uDFC7",hospital:"\uD83C\uDFE5",hot_pepper:"\uD83C\uDF36",hotdog:"\uD83C\uDF2D",hotel:"\uD83C\uDFE8",hotsprings:"\u2668\uFE0F",hourglass:"\u231B\uFE0F",hourglass_flowing_sand:"\u23F3",house:"\uD83C\uDFE0",house_with_garden:"\uD83C\uDFE1",houses:"\uD83C\uDFD8",hugs:"\uD83E\uDD17",hushed:"\uD83D\uDE2F",ice_cream:"\uD83C\uDF68",ice_hockey:"\uD83C\uDFD2",ice_skate:"\u26F8",icecream:"\uD83C\uDF66",id:"\uD83C\uDD94",ideograph_advantage:"\uD83C\uDE50",imp:"\uD83D\uDC7F",inbox_tray:"\uD83D\uDCE5",incoming_envelope:"\uD83D\uDCE8",tipping_hand_woman:"\uD83D\uDC81",information_source:"\u2139\uFE0F",innocent:"\uD83D\uDE07",interrobang:"\u2049\uFE0F",iphone:"\uD83D\uDCF1",izakaya_lantern:"\uD83C\uDFEE",jack_o_lantern:"\uD83C\uDF83",japan:"\uD83D\uDDFE",japanese_castle:"\uD83C\uDFEF",japanese_goblin:"\uD83D\uDC7A",japanese_ogre:"\uD83D\uDC79",jeans:"\uD83D\uDC56",joy:"\uD83D\uDE02",joy_cat:"\uD83D\uDE39",joystick:"\uD83D\uDD79",kaaba:"\uD83D\uDD4B",key:"\uD83D\uDD11",keyboard:"\u2328\uFE0F",keycap_ten:"\uD83D\uDD1F",kick_scooter:"\uD83D\uDEF4",kimono:"\uD83D\uDC58",kiss:"\uD83D\uDC8B",kissing:"\uD83D\uDE17",kissing_cat:"\uD83D\uDE3D",kissing_closed_eyes:"\uD83D\uDE1A",kissing_heart:"\uD83D\uDE18",kissing_smiling_eyes:"\uD83D\uDE19",kiwi_fruit:"\uD83E\uDD5D",koala:"\uD83D\uDC28",koko:"\uD83C\uDE01",label:"\uD83C\uDFF7",large_blue_circle:"\uD83D\uDD35",large_blue_diamond:"\uD83D\uDD37",large_orange_diamond:"\uD83D\uDD36",last_quarter_moon:"\uD83C\uDF17",last_quarter_moon_with_face:"\uD83C\uDF1C",latin_cross:"\u271D\uFE0F",laughing:"\uD83D\uDE06",leaves:"\uD83C\uDF43",ledger:"\uD83D\uDCD2",left_luggage:"\uD83D\uDEC5",left_right_arrow:"\u2194\uFE0F",leftwards_arrow_with_hook:"\u21A9\uFE0F",lemon:"\uD83C\uDF4B",leo:"\u264C\uFE0F",leopard:"\uD83D\uDC06",level_slider:"\uD83C\uDF9A",libra:"\u264E\uFE0F",light_rail:"\uD83D\uDE88",link:"\uD83D\uDD17",lion:"\uD83E\uDD81",lips:"\uD83D\uDC44",lipstick:"\uD83D\uDC84",lizard:"\uD83E\uDD8E",lock:"\uD83D\uDD12",lock_with_ink_pen:"\uD83D\uDD0F",lollipop:"\uD83C\uDF6D",loop:"\u27BF",loud_sound:"\uD83D\uDD0A",loudspeaker:"\uD83D\uDCE2",love_hotel:"\uD83C\uDFE9",love_letter:"\uD83D\uDC8C",low_brightness:"\uD83D\uDD05",lying_face:"\uD83E\uDD25",m:"\u24C2\uFE0F",mag:"\uD83D\uDD0D",mag_right:"\uD83D\uDD0E",mahjong:"\uD83C\uDC04\uFE0F",mailbox:"\uD83D\uDCEB",mailbox_closed:"\uD83D\uDCEA",mailbox_with_mail:"\uD83D\uDCEC",mailbox_with_no_mail:"\uD83D\uDCED",man:"\uD83D\uDC68",man_artist:"\uD83D\uDC68&zwj;\uD83C\uDFA8",man_astronaut:"\uD83D\uDC68&zwj;\uD83D\uDE80",man_cartwheeling:"\uD83E\uDD38&zwj;\u2642\uFE0F",man_cook:"\uD83D\uDC68&zwj;\uD83C\uDF73",man_dancing:"\uD83D\uDD7A",man_facepalming:"\uD83E\uDD26&zwj;\u2642\uFE0F",man_factory_worker:"\uD83D\uDC68&zwj;\uD83C\uDFED",man_farmer:"\uD83D\uDC68&zwj;\uD83C\uDF3E",man_firefighter:"\uD83D\uDC68&zwj;\uD83D\uDE92",man_health_worker:"\uD83D\uDC68&zwj;\u2695\uFE0F",man_in_tuxedo:"\uD83E\uDD35",man_judge:"\uD83D\uDC68&zwj;\u2696\uFE0F",man_juggling:"\uD83E\uDD39&zwj;\u2642\uFE0F",man_mechanic:"\uD83D\uDC68&zwj;\uD83D\uDD27",man_office_worker:"\uD83D\uDC68&zwj;\uD83D\uDCBC",man_pilot:"\uD83D\uDC68&zwj;\u2708\uFE0F",man_playing_handball:"\uD83E\uDD3E&zwj;\u2642\uFE0F",man_playing_water_polo:"\uD83E\uDD3D&zwj;\u2642\uFE0F",man_scientist:"\uD83D\uDC68&zwj;\uD83D\uDD2C",man_shrugging:"\uD83E\uDD37&zwj;\u2642\uFE0F",man_singer:"\uD83D\uDC68&zwj;\uD83C\uDFA4",man_student:"\uD83D\uDC68&zwj;\uD83C\uDF93",man_teacher:"\uD83D\uDC68&zwj;\uD83C\uDFEB",man_technologist:"\uD83D\uDC68&zwj;\uD83D\uDCBB",man_with_gua_pi_mao:"\uD83D\uDC72",man_with_turban:"\uD83D\uDC73",tangerine:"\uD83C\uDF4A",mans_shoe:"\uD83D\uDC5E",mantelpiece_clock:"\uD83D\uDD70",maple_leaf:"\uD83C\uDF41",martial_arts_uniform:"\uD83E\uDD4B",mask:"\uD83D\uDE37",massage_woman:"\uD83D\uDC86",massage_man:"\uD83D\uDC86&zwj;\u2642\uFE0F",meat_on_bone:"\uD83C\uDF56",medal_military:"\uD83C\uDF96",medal_sports:"\uD83C\uDFC5",mega:"\uD83D\uDCE3",melon:"\uD83C\uDF48",memo:"\uD83D\uDCDD",men_wrestling:"\uD83E\uDD3C&zwj;\u2642\uFE0F",menorah:"\uD83D\uDD4E",mens:"\uD83D\uDEB9",metal:"\uD83E\uDD18",metro:"\uD83D\uDE87",microphone:"\uD83C\uDFA4",microscope:"\uD83D\uDD2C",milk_glass:"\uD83E\uDD5B",milky_way:"\uD83C\uDF0C",minibus:"\uD83D\uDE90",minidisc:"\uD83D\uDCBD",mobile_phone_off:"\uD83D\uDCF4",money_mouth_face:"\uD83E\uDD11",money_with_wings:"\uD83D\uDCB8",moneybag:"\uD83D\uDCB0",monkey:"\uD83D\uDC12",monkey_face:"\uD83D\uDC35",monorail:"\uD83D\uDE9D",moon:"\uD83C\uDF14",mortar_board:"\uD83C\uDF93",mosque:"\uD83D\uDD4C",motor_boat:"\uD83D\uDEE5",motor_scooter:"\uD83D\uDEF5",motorcycle:"\uD83C\uDFCD",motorway:"\uD83D\uDEE3",mount_fuji:"\uD83D\uDDFB",mountain:"\u26F0",mountain_biking_man:"\uD83D\uDEB5",mountain_biking_woman:"\uD83D\uDEB5&zwj;\u2640\uFE0F",mountain_cableway:"\uD83D\uDEA0",mountain_railway:"\uD83D\uDE9E",mountain_snow:"\uD83C\uDFD4",mouse:"\uD83D\uDC2D",mouse2:"\uD83D\uDC01",movie_camera:"\uD83C\uDFA5",moyai:"\uD83D\uDDFF",mrs_claus:"\uD83E\uDD36",muscle:"\uD83D\uDCAA",mushroom:"\uD83C\uDF44",musical_keyboard:"\uD83C\uDFB9",musical_note:"\uD83C\uDFB5",musical_score:"\uD83C\uDFBC",mute:"\uD83D\uDD07",nail_care:"\uD83D\uDC85",name_badge:"\uD83D\uDCDB",national_park:"\uD83C\uDFDE",nauseated_face:"\uD83E\uDD22",necktie:"\uD83D\uDC54",negative_squared_cross_mark:"\u274E",nerd_face:"\uD83E\uDD13",neutral_face:"\uD83D\uDE10",new:"\uD83C\uDD95",new_moon:"\uD83C\uDF11",new_moon_with_face:"\uD83C\uDF1A",newspaper:"\uD83D\uDCF0",newspaper_roll:"\uD83D\uDDDE",next_track_button:"\u23ED",ng:"\uD83C\uDD96",no_good_man:"\uD83D\uDE45&zwj;\u2642\uFE0F",no_good_woman:"\uD83D\uDE45",night_with_stars:"\uD83C\uDF03",no_bell:"\uD83D\uDD15",no_bicycles:"\uD83D\uDEB3",no_entry:"\u26D4\uFE0F",no_entry_sign:"\uD83D\uDEAB",no_mobile_phones:"\uD83D\uDCF5",no_mouth:"\uD83D\uDE36",no_pedestrians:"\uD83D\uDEB7",no_smoking:"\uD83D\uDEAD","non-potable_water":"\uD83D\uDEB1",nose:"\uD83D\uDC43",notebook:"\uD83D\uDCD3",notebook_with_decorative_cover:"\uD83D\uDCD4",notes:"\uD83C\uDFB6",nut_and_bolt:"\uD83D\uDD29",o:"\u2B55\uFE0F",o2:"\uD83C\uDD7E\uFE0F",ocean:"\uD83C\uDF0A",octopus:"\uD83D\uDC19",oden:"\uD83C\uDF62",office:"\uD83C\uDFE2",oil_drum:"\uD83D\uDEE2",ok:"\uD83C\uDD97",ok_hand:"\uD83D\uDC4C",ok_man:"\uD83D\uDE46&zwj;\u2642\uFE0F",ok_woman:"\uD83D\uDE46",old_key:"\uD83D\uDDDD",older_man:"\uD83D\uDC74",older_woman:"\uD83D\uDC75",om:"\uD83D\uDD49",on:"\uD83D\uDD1B",oncoming_automobile:"\uD83D\uDE98",oncoming_bus:"\uD83D\uDE8D",oncoming_police_car:"\uD83D\uDE94",oncoming_taxi:"\uD83D\uDE96",open_file_folder:"\uD83D\uDCC2",open_hands:"\uD83D\uDC50",open_mouth:"\uD83D\uDE2E",open_umbrella:"\u2602\uFE0F",ophiuchus:"\u26CE",orange_book:"\uD83D\uDCD9",orthodox_cross:"\u2626\uFE0F",outbox_tray:"\uD83D\uDCE4",owl:"\uD83E\uDD89",ox:"\uD83D\uDC02",package:"\uD83D\uDCE6",page_facing_up:"\uD83D\uDCC4",page_with_curl:"\uD83D\uDCC3",pager:"\uD83D\uDCDF",paintbrush:"\uD83D\uDD8C",palm_tree:"\uD83C\uDF34",pancakes:"\uD83E\uDD5E",panda_face:"\uD83D\uDC3C",paperclip:"\uD83D\uDCCE",paperclips:"\uD83D\uDD87",parasol_on_ground:"\u26F1",parking:"\uD83C\uDD7F\uFE0F",part_alternation_mark:"\u303D\uFE0F",partly_sunny:"\u26C5\uFE0F",passenger_ship:"\uD83D\uDEF3",passport_control:"\uD83D\uDEC2",pause_button:"\u23F8",peace_symbol:"\u262E\uFE0F",peach:"\uD83C\uDF51",peanuts:"\uD83E\uDD5C",pear:"\uD83C\uDF50",pen:"\uD83D\uDD8A",pencil2:"\u270F\uFE0F",penguin:"\uD83D\uDC27",pensive:"\uD83D\uDE14",performing_arts:"\uD83C\uDFAD",persevere:"\uD83D\uDE23",person_fencing:"\uD83E\uDD3A",pouting_woman:"\uD83D\uDE4E",phone:"\u260E\uFE0F",pick:"\u26CF",pig:"\uD83D\uDC37",pig2:"\uD83D\uDC16",pig_nose:"\uD83D\uDC3D",pill:"\uD83D\uDC8A",pineapple:"\uD83C\uDF4D",ping_pong:"\uD83C\uDFD3",pisces:"\u2653\uFE0F",pizza:"\uD83C\uDF55",place_of_worship:"\uD83D\uDED0",plate_with_cutlery:"\uD83C\uDF7D",play_or_pause_button:"\u23EF",point_down:"\uD83D\uDC47",point_left:"\uD83D\uDC48",point_right:"\uD83D\uDC49",point_up:"\u261D\uFE0F",point_up_2:"\uD83D\uDC46",police_car:"\uD83D\uDE93",policewoman:"\uD83D\uDC6E&zwj;\u2640\uFE0F",poodle:"\uD83D\uDC29",popcorn:"\uD83C\uDF7F",post_office:"\uD83C\uDFE3",postal_horn:"\uD83D\uDCEF",postbox:"\uD83D\uDCEE",potable_water:"\uD83D\uDEB0",potato:"\uD83E\uDD54",pouch:"\uD83D\uDC5D",poultry_leg:"\uD83C\uDF57",pound:"\uD83D\uDCB7",rage:"\uD83D\uDE21",pouting_cat:"\uD83D\uDE3E",pouting_man:"\uD83D\uDE4E&zwj;\u2642\uFE0F",pray:"\uD83D\uDE4F",prayer_beads:"\uD83D\uDCFF",pregnant_woman:"\uD83E\uDD30",previous_track_button:"\u23EE",prince:"\uD83E\uDD34",princess:"\uD83D\uDC78",printer:"\uD83D\uDDA8",purple_heart:"\uD83D\uDC9C",purse:"\uD83D\uDC5B",pushpin:"\uD83D\uDCCC",put_litter_in_its_place:"\uD83D\uDEAE",question:"\u2753",rabbit:"\uD83D\uDC30",rabbit2:"\uD83D\uDC07",racehorse:"\uD83D\uDC0E",racing_car:"\uD83C\uDFCE",radio:"\uD83D\uDCFB",radio_button:"\uD83D\uDD18",radioactive:"\u2622\uFE0F",railway_car:"\uD83D\uDE83",railway_track:"\uD83D\uDEE4",rainbow:"\uD83C\uDF08",rainbow_flag:"\uD83C\uDFF3\uFE0F&zwj;\uD83C\uDF08",raised_back_of_hand:"\uD83E\uDD1A",raised_hand_with_fingers_splayed:"\uD83D\uDD90",raised_hands:"\uD83D\uDE4C",raising_hand_woman:"\uD83D\uDE4B",raising_hand_man:"\uD83D\uDE4B&zwj;\u2642\uFE0F",ram:"\uD83D\uDC0F",ramen:"\uD83C\uDF5C",rat:"\uD83D\uDC00",record_button:"\u23FA",recycle:"\u267B\uFE0F",red_circle:"\uD83D\uDD34",registered:"\xAE\uFE0F",relaxed:"\u263A\uFE0F",relieved:"\uD83D\uDE0C",reminder_ribbon:"\uD83C\uDF97",repeat:"\uD83D\uDD01",repeat_one:"\uD83D\uDD02",rescue_worker_helmet:"\u26D1",restroom:"\uD83D\uDEBB",revolving_hearts:"\uD83D\uDC9E",rewind:"\u23EA",rhinoceros:"\uD83E\uDD8F",ribbon:"\uD83C\uDF80",rice:"\uD83C\uDF5A",rice_ball:"\uD83C\uDF59",rice_cracker:"\uD83C\uDF58",rice_scene:"\uD83C\uDF91",right_anger_bubble:"\uD83D\uDDEF",ring:"\uD83D\uDC8D",robot:"\uD83E\uDD16",rocket:"\uD83D\uDE80",rofl:"\uD83E\uDD23",roll_eyes:"\uD83D\uDE44",roller_coaster:"\uD83C\uDFA2",rooster:"\uD83D\uDC13",rose:"\uD83C\uDF39",rosette:"\uD83C\uDFF5",rotating_light:"\uD83D\uDEA8",round_pushpin:"\uD83D\uDCCD",rowing_man:"\uD83D\uDEA3",rowing_woman:"\uD83D\uDEA3&zwj;\u2640\uFE0F",rugby_football:"\uD83C\uDFC9",running_man:"\uD83C\uDFC3",running_shirt_with_sash:"\uD83C\uDFBD",running_woman:"\uD83C\uDFC3&zwj;\u2640\uFE0F",sa:"\uD83C\uDE02\uFE0F",sagittarius:"\u2650\uFE0F",sake:"\uD83C\uDF76",sandal:"\uD83D\uDC61",santa:"\uD83C\uDF85",satellite:"\uD83D\uDCE1",saxophone:"\uD83C\uDFB7",school:"\uD83C\uDFEB",school_satchel:"\uD83C\uDF92",scissors:"\u2702\uFE0F",scorpion:"\uD83E\uDD82",scorpius:"\u264F\uFE0F",scream:"\uD83D\uDE31",scream_cat:"\uD83D\uDE40",scroll:"\uD83D\uDCDC",seat:"\uD83D\uDCBA",secret:"\u3299\uFE0F",see_no_evil:"\uD83D\uDE48",seedling:"\uD83C\uDF31",selfie:"\uD83E\uDD33",shallow_pan_of_food:"\uD83E\uDD58",shamrock:"\u2618\uFE0F",shark:"\uD83E\uDD88",shaved_ice:"\uD83C\uDF67",sheep:"\uD83D\uDC11",shell:"\uD83D\uDC1A",shield:"\uD83D\uDEE1",shinto_shrine:"\u26E9",ship:"\uD83D\uDEA2",shirt:"\uD83D\uDC55",shopping:"\uD83D\uDECD",shopping_cart:"\uD83D\uDED2",shower:"\uD83D\uDEBF",shrimp:"\uD83E\uDD90",signal_strength:"\uD83D\uDCF6",six_pointed_star:"\uD83D\uDD2F",ski:"\uD83C\uDFBF",skier:"\u26F7",skull:"\uD83D\uDC80",skull_and_crossbones:"\u2620\uFE0F",sleeping:"\uD83D\uDE34",sleeping_bed:"\uD83D\uDECC",sleepy:"\uD83D\uDE2A",slightly_frowning_face:"\uD83D\uDE41",slightly_smiling_face:"\uD83D\uDE42",slot_machine:"\uD83C\uDFB0",small_airplane:"\uD83D\uDEE9",small_blue_diamond:"\uD83D\uDD39",small_orange_diamond:"\uD83D\uDD38",small_red_triangle:"\uD83D\uDD3A",small_red_triangle_down:"\uD83D\uDD3B",smile:"\uD83D\uDE04",smile_cat:"\uD83D\uDE38",smiley:"\uD83D\uDE03",smiley_cat:"\uD83D\uDE3A",smiling_imp:"\uD83D\uDE08",smirk:"\uD83D\uDE0F",smirk_cat:"\uD83D\uDE3C",smoking:"\uD83D\uDEAC",snail:"\uD83D\uDC0C",snake:"\uD83D\uDC0D",sneezing_face:"\uD83E\uDD27",snowboarder:"\uD83C\uDFC2",snowflake:"\u2744\uFE0F",snowman:"\u26C4\uFE0F",snowman_with_snow:"\u2603\uFE0F",sob:"\uD83D\uDE2D",soccer:"\u26BD\uFE0F",soon:"\uD83D\uDD1C",sos:"\uD83C\uDD98",sound:"\uD83D\uDD09",space_invader:"\uD83D\uDC7E",spades:"\u2660\uFE0F",spaghetti:"\uD83C\uDF5D",sparkle:"\u2747\uFE0F",sparkler:"\uD83C\uDF87",sparkles:"\u2728",sparkling_heart:"\uD83D\uDC96",speak_no_evil:"\uD83D\uDE4A",speaker:"\uD83D\uDD08",speaking_head:"\uD83D\uDDE3",speech_balloon:"\uD83D\uDCAC",speedboat:"\uD83D\uDEA4",spider:"\uD83D\uDD77",spider_web:"\uD83D\uDD78",spiral_calendar:"\uD83D\uDDD3",spiral_notepad:"\uD83D\uDDD2",spoon:"\uD83E\uDD44",squid:"\uD83E\uDD91",stadium:"\uD83C\uDFDF",star:"\u2B50\uFE0F",star2:"\uD83C\uDF1F",star_and_crescent:"\u262A\uFE0F",star_of_david:"\u2721\uFE0F",stars:"\uD83C\uDF20",station:"\uD83D\uDE89",statue_of_liberty:"\uD83D\uDDFD",steam_locomotive:"\uD83D\uDE82",stew:"\uD83C\uDF72",stop_button:"\u23F9",stop_sign:"\uD83D\uDED1",stopwatch:"\u23F1",straight_ruler:"\uD83D\uDCCF",strawberry:"\uD83C\uDF53",stuck_out_tongue:"\uD83D\uDE1B",stuck_out_tongue_closed_eyes:"\uD83D\uDE1D",stuck_out_tongue_winking_eye:"\uD83D\uDE1C",studio_microphone:"\uD83C\uDF99",stuffed_flatbread:"\uD83E\uDD59",sun_behind_large_cloud:"\uD83C\uDF25",sun_behind_rain_cloud:"\uD83C\uDF26",sun_behind_small_cloud:"\uD83C\uDF24",sun_with_face:"\uD83C\uDF1E",sunflower:"\uD83C\uDF3B",sunglasses:"\uD83D\uDE0E",sunny:"\u2600\uFE0F",sunrise:"\uD83C\uDF05",sunrise_over_mountains:"\uD83C\uDF04",surfing_man:"\uD83C\uDFC4",surfing_woman:"\uD83C\uDFC4&zwj;\u2640\uFE0F",sushi:"\uD83C\uDF63",suspension_railway:"\uD83D\uDE9F",sweat:"\uD83D\uDE13",sweat_drops:"\uD83D\uDCA6",sweat_smile:"\uD83D\uDE05",sweet_potato:"\uD83C\uDF60",swimming_man:"\uD83C\uDFCA",swimming_woman:"\uD83C\uDFCA&zwj;\u2640\uFE0F",symbols:"\uD83D\uDD23",synagogue:"\uD83D\uDD4D",syringe:"\uD83D\uDC89",taco:"\uD83C\uDF2E",tada:"\uD83C\uDF89",tanabata_tree:"\uD83C\uDF8B",taurus:"\u2649\uFE0F",taxi:"\uD83D\uDE95",tea:"\uD83C\uDF75",telephone_receiver:"\uD83D\uDCDE",telescope:"\uD83D\uDD2D",tennis:"\uD83C\uDFBE",tent:"\u26FA\uFE0F",thermometer:"\uD83C\uDF21",thinking:"\uD83E\uDD14",thought_balloon:"\uD83D\uDCAD",ticket:"\uD83C\uDFAB",tickets:"\uD83C\uDF9F",tiger:"\uD83D\uDC2F",tiger2:"\uD83D\uDC05",timer_clock:"\u23F2",tipping_hand_man:"\uD83D\uDC81&zwj;\u2642\uFE0F",tired_face:"\uD83D\uDE2B",tm:"\u2122\uFE0F",toilet:"\uD83D\uDEBD",tokyo_tower:"\uD83D\uDDFC",tomato:"\uD83C\uDF45",tongue:"\uD83D\uDC45",top:"\uD83D\uDD1D",tophat:"\uD83C\uDFA9",tornado:"\uD83C\uDF2A",trackball:"\uD83D\uDDB2",tractor:"\uD83D\uDE9C",traffic_light:"\uD83D\uDEA5",train:"\uD83D\uDE8B",train2:"\uD83D\uDE86",tram:"\uD83D\uDE8A",triangular_flag_on_post:"\uD83D\uDEA9",triangular_ruler:"\uD83D\uDCD0",trident:"\uD83D\uDD31",triumph:"\uD83D\uDE24",trolleybus:"\uD83D\uDE8E",trophy:"\uD83C\uDFC6",tropical_drink:"\uD83C\uDF79",tropical_fish:"\uD83D\uDC20",truck:"\uD83D\uDE9A",trumpet:"\uD83C\uDFBA",tulip:"\uD83C\uDF37",tumbler_glass:"\uD83E\uDD43",turkey:"\uD83E\uDD83",turtle:"\uD83D\uDC22",tv:"\uD83D\uDCFA",twisted_rightwards_arrows:"\uD83D\uDD00",two_hearts:"\uD83D\uDC95",two_men_holding_hands:"\uD83D\uDC6C",two_women_holding_hands:"\uD83D\uDC6D",u5272:"\uD83C\uDE39",u5408:"\uD83C\uDE34",u55b6:"\uD83C\uDE3A",u6307:"\uD83C\uDE2F\uFE0F",u6708:"\uD83C\uDE37\uFE0F",u6709:"\uD83C\uDE36",u6e80:"\uD83C\uDE35",u7121:"\uD83C\uDE1A\uFE0F",u7533:"\uD83C\uDE38",u7981:"\uD83C\uDE32",u7a7a:"\uD83C\uDE33",umbrella:"\u2614\uFE0F",unamused:"\uD83D\uDE12",underage:"\uD83D\uDD1E",unicorn:"\uD83E\uDD84",unlock:"\uD83D\uDD13",up:"\uD83C\uDD99",upside_down_face:"\uD83D\uDE43",v:"\u270C\uFE0F",vertical_traffic_light:"\uD83D\uDEA6",vhs:"\uD83D\uDCFC",vibration_mode:"\uD83D\uDCF3",video_camera:"\uD83D\uDCF9",video_game:"\uD83C\uDFAE",violin:"\uD83C\uDFBB",virgo:"\u264D\uFE0F",volcano:"\uD83C\uDF0B",volleyball:"\uD83C\uDFD0",vs:"\uD83C\uDD9A",vulcan_salute:"\uD83D\uDD96",walking_man:"\uD83D\uDEB6",walking_woman:"\uD83D\uDEB6&zwj;\u2640\uFE0F",waning_crescent_moon:"\uD83C\uDF18",waning_gibbous_moon:"\uD83C\uDF16",warning:"\u26A0\uFE0F",wastebasket:"\uD83D\uDDD1",watch:"\u231A\uFE0F",water_buffalo:"\uD83D\uDC03",watermelon:"\uD83C\uDF49",wave:"\uD83D\uDC4B",wavy_dash:"\u3030\uFE0F",waxing_crescent_moon:"\uD83C\uDF12",wc:"\uD83D\uDEBE",weary:"\uD83D\uDE29",wedding:"\uD83D\uDC92",weight_lifting_man:"\uD83C\uDFCB\uFE0F",weight_lifting_woman:"\uD83C\uDFCB\uFE0F&zwj;\u2640\uFE0F",whale:"\uD83D\uDC33",whale2:"\uD83D\uDC0B",wheel_of_dharma:"\u2638\uFE0F",wheelchair:"\u267F\uFE0F",white_check_mark:"\u2705",white_circle:"\u26AA\uFE0F",white_flag:"\uD83C\uDFF3\uFE0F",white_flower:"\uD83D\uDCAE",white_large_square:"\u2B1C\uFE0F",white_medium_small_square:"\u25FD\uFE0F",white_medium_square:"\u25FB\uFE0F",white_small_square:"\u25AB\uFE0F",white_square_button:"\uD83D\uDD33",wilted_flower:"\uD83E\uDD40",wind_chime:"\uD83C\uDF90",wind_face:"\uD83C\uDF2C",wine_glass:"\uD83C\uDF77",wink:"\uD83D\uDE09",wolf:"\uD83D\uDC3A",woman:"\uD83D\uDC69",woman_artist:"\uD83D\uDC69&zwj;\uD83C\uDFA8",woman_astronaut:"\uD83D\uDC69&zwj;\uD83D\uDE80",woman_cartwheeling:"\uD83E\uDD38&zwj;\u2640\uFE0F",woman_cook:"\uD83D\uDC69&zwj;\uD83C\uDF73",woman_facepalming:"\uD83E\uDD26&zwj;\u2640\uFE0F",woman_factory_worker:"\uD83D\uDC69&zwj;\uD83C\uDFED",woman_farmer:"\uD83D\uDC69&zwj;\uD83C\uDF3E",woman_firefighter:"\uD83D\uDC69&zwj;\uD83D\uDE92",woman_health_worker:"\uD83D\uDC69&zwj;\u2695\uFE0F",woman_judge:"\uD83D\uDC69&zwj;\u2696\uFE0F",woman_juggling:"\uD83E\uDD39&zwj;\u2640\uFE0F",woman_mechanic:"\uD83D\uDC69&zwj;\uD83D\uDD27",woman_office_worker:"\uD83D\uDC69&zwj;\uD83D\uDCBC",woman_pilot:"\uD83D\uDC69&zwj;\u2708\uFE0F",woman_playing_handball:"\uD83E\uDD3E&zwj;\u2640\uFE0F",woman_playing_water_polo:"\uD83E\uDD3D&zwj;\u2640\uFE0F",woman_scientist:"\uD83D\uDC69&zwj;\uD83D\uDD2C",woman_shrugging:"\uD83E\uDD37&zwj;\u2640\uFE0F",woman_singer:"\uD83D\uDC69&zwj;\uD83C\uDFA4",woman_student:"\uD83D\uDC69&zwj;\uD83C\uDF93",woman_teacher:"\uD83D\uDC69&zwj;\uD83C\uDFEB",woman_technologist:"\uD83D\uDC69&zwj;\uD83D\uDCBB",woman_with_turban:"\uD83D\uDC73&zwj;\u2640\uFE0F",womans_clothes:"\uD83D\uDC5A",womans_hat:"\uD83D\uDC52",women_wrestling:"\uD83E\uDD3C&zwj;\u2640\uFE0F",womens:"\uD83D\uDEBA",world_map:"\uD83D\uDDFA",worried:"\uD83D\uDE1F",wrench:"\uD83D\uDD27",writing_hand:"\u270D\uFE0F",x:"\u274C",yellow_heart:"\uD83D\uDC9B",yen:"\uD83D\uDCB4",yin_yang:"\u262F\uFE0F",yum:"\uD83D\uDE0B",zap:"\u26A1\uFE0F",zipper_mouth_face:"\uD83E\uDD10",zzz:"\uD83D\uDCA4",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:'<span style="font-family: \'Anonymous Pro\', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;">S</span>'},B.Converter=function(X){var V={},D=[],N=[],R={},k=q,P={parsed:{},raw:"",format:""};$();function $(){X=X||{};for(var M in I)if(I.hasOwnProperty(M))V[M]=I[M];if(typeof X==="object"){for(var y in X)if(X.hasOwnProperty(y))V[y]=X[y]}else throw Error("Converter expects the passed parameter to be an object, but "+typeof X+" was passed instead.");if(V.extensions)B.helper.forEach(V.extensions,_)}function _(M,y){if(y=y||null,B.helper.isString(M))if(M=B.helper.stdExtName(M),y=M,B.extensions[M]){console.warn("DEPRECATION WARNING: "+M+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),h(B.extensions[M],M);return}else if(!B.helper.isUndefined(J[M]))M=J[M];else throw Error('Extension "'+M+'" could not be loaded. It was either not found or is not a valid extension.');if(typeof M==="function")M=M();if(!B.helper.isArray(M))M=[M];var u=Y(M,y);if(!u.valid)throw Error(u.error);for(var T=0;T<M.length;++T){switch(M[T].type){case"lang":D.push(M[T]);break;case"output":N.push(M[T]);break}if(M[T].hasOwnProperty("listeners")){for(var d in M[T].listeners)if(M[T].listeners.hasOwnProperty(d))S(d,M[T].listeners[d])}}}function h(M,y){if(typeof M==="function")M=M(new B.Converter);if(!B.helper.isArray(M))M=[M];var u=Y(M,y);if(!u.valid)throw Error(u.error);for(var T=0;T<M.length;++T)switch(M[T].type){case"lang":D.push(M[T]);break;case"output":N.push(M[T]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function S(M,y){if(!B.helper.isString(M))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof M+" given");if(typeof y!=="function")throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof y+" given");if(!R.hasOwnProperty(M))R[M]=[];R[M].push(y)}function O(M){var y=M.match(/^\s*/)[0].length,u=new RegExp("^\\s{0,"+y+"}","gm");return M.replace(u,"")}this._dispatch=function M(y,u,T,d){if(R.hasOwnProperty(y))for(var g=0;g<R[y].length;++g){var l=R[y][g](y,u,this,T,d);if(l&&typeof l!=="undefined")u=l}return u},this.listen=function(M,y){return S(M,y),this},this.makeHtml=function(M){if(!M)return M;var y={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:D,outputModifiers:N,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};if(M=M.replace(/Â¨/g,"\xA8T"),M=M.replace(/\$/g,"\xA8D"),M=M.replace(/\r\n/g,"\n"),M=M.replace(/\r/g,"\n"),M=M.replace(/\u00A0/g,"&nbsp;"),V.smartIndentationFix)M=O(M);return M="\n\n"+M+"\n\n",M=B.subParser("detab")(M,V,y),M=M.replace(/^[ \t]+$/mg,""),B.helper.forEach(D,function(u){M=B.subParser("runExtension")(u,M,V,y)}),M=B.subParser("metadata")(M,V,y),M=B.subParser("hashPreCodeTags")(M,V,y),M=B.subParser("githubCodeBlocks")(M,V,y),M=B.subParser("hashHTMLBlocks")(M,V,y),M=B.subParser("hashCodeTags")(M,V,y),M=B.subParser("stripLinkDefinitions")(M,V,y),M=B.subParser("blockGamut")(M,V,y),M=B.subParser("unhashHTMLSpans")(M,V,y),M=B.subParser("unescapeSpecialChars")(M,V,y),M=M.replace(/Â¨D/g,"$$"),M=M.replace(/Â¨T/g,"\xA8"),M=B.subParser("completeHTMLDocument")(M,V,y),B.helper.forEach(N,function(u){M=B.subParser("runExtension")(u,M,V,y)}),P=y.metadata,M},this.makeMarkdown=this.makeMd=function(M,y){if(M=M.replace(/\r\n/g,"\n"),M=M.replace(/\r/g,"\n"),M=M.replace(/>[ \t]+</,">\xA8NBSP;<"),!y)if(window&&window.document)y=window.document;else throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");var u=y.createElement("div");u.innerHTML=M;var T={preList:i(u)};t(u);var d=u.childNodes,g="";for(var l=0;l<d.length;l++)g+=B.subParser("makeMarkdown.node")(d[l],T);function t(n){for(var J0=0;J0<n.childNodes.length;++J0){var e=n.childNodes[J0];if(e.nodeType===3)if(!/\S/.test(e.nodeValue)&&!/^[ ]+$/.test(e.nodeValue))n.removeChild(e),--J0;else e.nodeValue=e.nodeValue.split("\n").join(" "),e.nodeValue=e.nodeValue.replace(/(\s)+/g,"$1");else if(e.nodeType===1)t(e)}}function i(n){var J0=n.querySelectorAll("pre"),e=[];for(var H0=0;H0<J0.length;++H0)if(J0[H0].childElementCount===1&&J0[H0].firstChild.tagName.toLowerCase()==="code"){var X0=J0[H0].firstChild.innerHTML.trim(),L0=J0[H0].firstChild.getAttribute("data-language")||"";if(L0===""){var T0=J0[H0].firstChild.className.split(" ");for(var s=0;s<T0.length;++s){var P1=T0[s].match(/^language-(.+)$/);if(P1!==null){L0=P1[1];break}}}X0=B.helper.unescapeHTMLEntities(X0),e.push(X0),J0[H0].outerHTML='<precode language="'+L0+'" precodenum="'+H0.toString()+'"></precode>'}else e.push(J0[H0].innerHTML),J0[H0].innerHTML="",J0[H0].setAttribute("prenum",H0.toString());return e}return g},this.setOption=function(M,y){V[M]=y},this.getOption=function(M){return V[M]},this.getOptions=function(){return V},this.addExtension=function(M,y){y=y||null,_(M,y)},this.useExtension=function(M){_(M)},this.setFlavor=function(M){if(!K.hasOwnProperty(M))throw Error(M+" flavor was not found");var y=K[M];k=M;for(var u in y)if(y.hasOwnProperty(u))V[u]=y[u]},this.getFlavor=function(){return k},this.removeExtension=function(M){if(!B.helper.isArray(M))M=[M];for(var y=0;y<M.length;++y){var u=M[y];for(var T=0;T<D.length;++T)if(D[T]===u)D.splice(T,1);for(var d=0;d<N.length;++d)if(N[d]===u)N.splice(d,1)}},this.getAllExtensions=function(){return{language:D,output:N}},this.getMetadata=function(M){if(M)return P.raw;else return P.parsed},this.getMetadataFormat=function(){return P.format},this._setMetadataPair=function(M,y){P.parsed[M]=y},this._setMetadataFormat=function(M){P.format=M},this._setMetadataRaw=function(M){P.raw=M}},B.subParser("anchors",function(X,V,D){X=D.converter._dispatch("anchors.before",X,V,D);var N=function(R,k,P,$,_,h,S){if(B.helper.isUndefined(S))S="";if(P=P.toLowerCase(),R.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)$="";else if(!$){if(!P)P=k.toLowerCase().replace(/ ?\n/g," ");if($="#"+P,!B.helper.isUndefined(D.gUrls[P])){if($=D.gUrls[P],!B.helper.isUndefined(D.gTitles[P]))S=D.gTitles[P]}else return R}$=$.replace(B.helper.regexes.asteriskDashAndColon,B.helper.escapeCharactersCallback);var O='<a href="'+$+'"';if(S!==""&&S!==null)S=S.replace(/"/g,"&quot;"),S=S.replace(B.helper.regexes.asteriskDashAndColon,B.helper.escapeCharactersCallback),O+=' title="'+S+'"';if(V.openLinksInNewWindow&&!/^#/.test($))O+=' rel="noopener noreferrer" target="\xA8E95Eblank"';return O+=">"+k+"</a>",O};if(X=X.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,N),X=X.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,N),X=X.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,N),X=X.replace(/\[([^\[\]]+)]()()()()()/g,N),V.ghMentions)X=X.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gmi,function(R,k,P,$,_){if(P==="\\")return k+$;if(!B.helper.isString(V.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var h=V.ghMentionsLink.replace(/\{u}/g,_),S="";if(V.openLinksInNewWindow)S=' rel="noopener noreferrer" target="\xA8E95Eblank"';return k+'<a href="'+h+'"'+S+">"+$+"</a>"});return X=D.converter._dispatch("anchors.after",X,V,D),X});var G=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,W=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,F=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,z=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi,U=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,E=function(X){return function(V,D,N,R,k,P,$){N=N.replace(B.helper.regexes.asteriskDashAndColon,B.helper.escapeCharactersCallback);var _=N,h="",S="",O=D||"",M=$||"";if(/^www\./i.test(N))N=N.replace(/^www\./i,"http://www.");if(X.excludeTrailingPunctuationFromURLs&&P)h=P;if(X.openLinksInNewWindow)S=' rel="noopener noreferrer" target="\xA8E95Eblank"';return O+'<a href="'+N+'"'+S+">"+_+"</a>"+h+M}},w=function(X,V){return function(D,N,R){var k="mailto:";if(N=N||"",R=B.subParser("unescapeSpecialChars")(R,X,V),X.encodeEmails)k=B.helper.encodeEmailAddress(k+R),R=B.helper.encodeEmailAddress(R);else k=k+R;return N+'<a href="'+k+'">'+R+"</a>"}};B.subParser("autoLinks",function(X,V,D){return X=D.converter._dispatch("autoLinks.before",X,V,D),X=X.replace(F,E(V)),X=X.replace(U,w(V,D)),X=D.converter._dispatch("autoLinks.after",X,V,D),X}),B.subParser("simplifiedAutoLinks",function(X,V,D){if(!V.simplifiedAutoLink)return X;if(X=D.converter._dispatch("simplifiedAutoLinks.before",X,V,D),V.excludeTrailingPunctuationFromURLs)X=X.replace(W,E(V));else X=X.replace(G,E(V));return X=X.replace(z,w(V,D)),X=D.converter._dispatch("simplifiedAutoLinks.after",X,V,D),X}),B.subParser("blockGamut",function(X,V,D){return X=D.converter._dispatch("blockGamut.before",X,V,D),X=B.subParser("blockQuotes")(X,V,D),X=B.subParser("headers")(X,V,D),X=B.subParser("horizontalRule")(X,V,D),X=B.subParser("lists")(X,V,D),X=B.subParser("codeBlocks")(X,V,D),X=B.subParser("tables")(X,V,D),X=B.subParser("hashHTMLBlocks")(X,V,D),X=B.subParser("paragraphs")(X,V,D),X=D.converter._dispatch("blockGamut.after",X,V,D),X}),B.subParser("blockQuotes",function(X,V,D){X=D.converter._dispatch("blockQuotes.before",X,V,D),X=X+"\n\n";var N=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;if(V.splitAdjacentBlockquotes)N=/^ {0,3}>[\s\S]*?(?:\n\n)/gm;return X=X.replace(N,function(R){return R=R.replace(/^[ \t]*>[ \t]?/gm,""),R=R.replace(/Â¨0/g,""),R=R.replace(/^[ \t]+$/gm,""),R=B.subParser("githubCodeBlocks")(R,V,D),R=B.subParser("blockGamut")(R,V,D),R=R.replace(/(^|\n)/g,"$1  "),R=R.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(k,P){var $=P;return $=$.replace(/^  /mg,"\xA80"),$=$.replace(/Â¨0/g,""),$}),B.subParser("hashBlock")("<blockquote>\n"+R+"\n</blockquote>",V,D)}),X=D.converter._dispatch("blockQuotes.after",X,V,D),X}),B.subParser("codeBlocks",function(X,V,D){X=D.converter._dispatch("codeBlocks.before",X,V,D),X+="\xA80";var N=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=Â¨0))/g;return X=X.replace(N,function(R,k,P){var $=k,_=P,h="\n";if($=B.subParser("outdent")($,V,D),$=B.subParser("encodeCode")($,V,D),$=B.subParser("detab")($,V,D),$=$.replace(/^\n+/g,""),$=$.replace(/\n+$/g,""),V.omitExtraWLInCodeBlocks)h="";return $="<pre><code>"+$+h+"</code></pre>",B.subParser("hashBlock")($,V,D)+_}),X=X.replace(/Â¨0/,""),X=D.converter._dispatch("codeBlocks.after",X,V,D),X}),B.subParser("codeSpans",function(X,V,D){if(X=D.converter._dispatch("codeSpans.before",X,V,D),typeof X==="undefined")X="";return X=X.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(N,R,k,P){var $=P;return $=$.replace(/^([ \t]*)/g,""),$=$.replace(/[ \t]*$/g,""),$=B.subParser("encodeCode")($,V,D),$=R+"<code>"+$+"</code>",$=B.subParser("hashHTMLSpans")($,V,D),$}),X=D.converter._dispatch("codeSpans.after",X,V,D),X}),B.subParser("completeHTMLDocument",function(X,V,D){if(!V.completeHTMLDocument)return X;X=D.converter._dispatch("completeHTMLDocument.before",X,V,D);var N="html",R="<!DOCTYPE HTML>\n",k="",P='<meta charset="utf-8">\n',$="",_="";if(typeof D.metadata.parsed.doctype!=="undefined"){if(R="<!DOCTYPE "+D.metadata.parsed.doctype+">\n",N=D.metadata.parsed.doctype.toString().toLowerCase(),N==="html"||N==="html5")P='<meta charset="utf-8">'}for(var h in D.metadata.parsed)if(D.metadata.parsed.hasOwnProperty(h))switch(h.toLowerCase()){case"doctype":break;case"title":k="<title>"+D.metadata.parsed.title+"</title>\n";break;case"charset":if(N==="html"||N==="html5")P='<meta charset="'+D.metadata.parsed.charset+'">\n';else P='<meta name="charset" content="'+D.metadata.parsed.charset+'">\n';break;case"language":case"lang":$=' lang="'+D.metadata.parsed[h]+'"',_+='<meta name="'+h+'" content="'+D.metadata.parsed[h]+'">\n';break;default:_+='<meta name="'+h+'" content="'+D.metadata.parsed[h]+'">\n'}return X=R+"<html"+$+">\n<head>\n"+k+P+_+"</head>\n<body>\n"+X.trim()+"\n</body>\n</html>",X=D.converter._dispatch("completeHTMLDocument.after",X,V,D),X}),B.subParser("detab",function(X,V,D){return X=D.converter._dispatch("detab.before",X,V,D),X=X.replace(/\t(?=\t)/g,"    "),X=X.replace(/\t/g,"\xA8A\xA8B"),X=X.replace(/Â¨B(.+?)Â¨A/g,function(N,R){var k=R,P=4-k.length%4;for(var $=0;$<P;$++)k+=" ";return k}),X=X.replace(/Â¨A/g,"    "),X=X.replace(/Â¨B/g,""),X=D.converter._dispatch("detab.after",X,V,D),X}),B.subParser("ellipsis",function(X,V,D){if(!V.ellipsis)return X;return X=D.converter._dispatch("ellipsis.before",X,V,D),X=X.replace(/\.\.\./g,"\u2026"),X=D.converter._dispatch("ellipsis.after",X,V,D),X}),B.subParser("emoji",function(X,V,D){if(!V.emoji)return X;X=D.converter._dispatch("emoji.before",X,V,D);var N=/:([\S]+?):/g;return X=X.replace(N,function(R,k){if(B.helper.emojis.hasOwnProperty(k))return B.helper.emojis[k];return R}),X=D.converter._dispatch("emoji.after",X,V,D),X}),B.subParser("encodeAmpsAndAngles",function(X,V,D){return X=D.converter._dispatch("encodeAmpsAndAngles.before",X,V,D),X=X.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),X=X.replace(/<(?![a-z\/?$!])/gi,"&lt;"),X=X.replace(/</g,"&lt;"),X=X.replace(/>/g,"&gt;"),X=D.converter._dispatch("encodeAmpsAndAngles.after",X,V,D),X}),B.subParser("encodeBackslashEscapes",function(X,V,D){return X=D.converter._dispatch("encodeBackslashEscapes.before",X,V,D),X=X.replace(/\\(\\)/g,B.helper.escapeCharactersCallback),X=X.replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,B.helper.escapeCharactersCallback),X=D.converter._dispatch("encodeBackslashEscapes.after",X,V,D),X}),B.subParser("encodeCode",function(X,V,D){return X=D.converter._dispatch("encodeCode.before",X,V,D),X=X.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,B.helper.escapeCharactersCallback),X=D.converter._dispatch("encodeCode.after",X,V,D),X}),B.subParser("escapeSpecialCharsWithinTagAttributes",function(X,V,D){X=D.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",X,V,D);var N=/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,R=/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;return X=X.replace(N,function(k){return k.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,B.helper.escapeCharactersCallback)}),X=X.replace(R,function(k){return k.replace(/([\\`*_~=|])/g,B.helper.escapeCharactersCallback)}),X=D.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",X,V,D),X}),B.subParser("githubCodeBlocks",function(X,V,D){if(!V.ghCodeBlocks)return X;return X=D.converter._dispatch("githubCodeBlocks.before",X,V,D),X+="\xA80",X=X.replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,function(N,R,k,P){var $=V.omitExtraWLInCodeBlocks?"":"\n";return P=B.subParser("encodeCode")(P,V,D),P=B.subParser("detab")(P,V,D),P=P.replace(/^\n+/g,""),P=P.replace(/\n+$/g,""),P="<pre><code"+(k?' class="'+k+" language-"+k+'"':"")+">"+P+$+"</code></pre>",P=B.subParser("hashBlock")(P,V,D),`

\xA8G`+(D.ghCodeBlocks.push({text:N,codeblock:P})-1)+"G\n\n"}),X=X.replace(/Â¨0/,""),D.converter._dispatch("githubCodeBlocks.after",X,V,D)}),B.subParser("hashBlock",function(X,V,D){return X=D.converter._dispatch("hashBlock.before",X,V,D),X=X.replace(/(^\n+|\n+$)/g,""),X=`

\xA8K`+(D.gHtmlBlocks.push(X)-1)+"K\n\n",X=D.converter._dispatch("hashBlock.after",X,V,D),X}),B.subParser("hashCodeTags",function(X,V,D){X=D.converter._dispatch("hashCodeTags.before",X,V,D);var N=function(R,k,P,$){var _=P+B.subParser("encodeCode")(k,V,D)+$;return"\xA8C"+(D.gHtmlSpans.push(_)-1)+"C"};return X=B.helper.replaceRecursiveRegExp(X,N,"<code\\b[^>]*>","</code>","gim"),X=D.converter._dispatch("hashCodeTags.after",X,V,D),X}),B.subParser("hashElement",function(X,V,D){return function(N,R){var k=R;return k=k.replace(/\n\n/g,"\n"),k=k.replace(/^\n/,""),k=k.replace(/\n+$/g,""),k=`

\xA8K`+(D.gHtmlBlocks.push(k)-1)+"K\n\n",k}}),B.subParser("hashHTMLBlocks",function(X,V,D){X=D.converter._dispatch("hashHTMLBlocks.before",X,V,D);var N=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],R=function(M,y,u,T){var d=M;if(u.search(/\bmarkdown\b/)!==-1)d=u+D.converter.makeHtml(y)+T;return`

\xA8K`+(D.gHtmlBlocks.push(d)-1)+"K\n\n"};if(V.backslashEscapesHTMLTags)X=X.replace(/\\<(\/?[^>]+?)>/g,function(M,y){return"&lt;"+y+"&gt;"});for(var k=0;k<N.length;++k){var P,$=new RegExp("^ {0,3}(<"+N[k]+"\\b[^>]*>)","im"),_="<"+N[k]+"\\b[^>]*>",h="</"+N[k]+">";while((P=B.helper.regexIndexOf(X,$))!==-1){var S=B.helper.splitAtIndex(X,P),O=B.helper.replaceRecursiveRegExp(S[1],R,_,h,"im");if(O===S[1])break;X=S[0].concat(O)}}return X=X.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,B.subParser("hashElement")(X,V,D)),X=B.helper.replaceRecursiveRegExp(X,function(M){return`

\xA8K`+(D.gHtmlBlocks.push(M)-1)+"K\n\n"},"^ {0,3}<!--","-->","gm"),X=X.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,B.subParser("hashElement")(X,V,D)),X=D.converter._dispatch("hashHTMLBlocks.after",X,V,D),X}),B.subParser("hashHTMLSpans",function(X,V,D){X=D.converter._dispatch("hashHTMLSpans.before",X,V,D);function N(R){return"\xA8C"+(D.gHtmlSpans.push(R)-1)+"C"}return X=X.replace(/<[^>]+?\/>/gi,function(R){return N(R)}),X=X.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(R){return N(R)}),X=X.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(R){return N(R)}),X=X.replace(/<[^>]+?>/gi,function(R){return N(R)}),X=D.converter._dispatch("hashHTMLSpans.after",X,V,D),X}),B.subParser("unhashHTMLSpans",function(X,V,D){X=D.converter._dispatch("unhashHTMLSpans.before",X,V,D);for(var N=0;N<D.gHtmlSpans.length;++N){var R=D.gHtmlSpans[N],k=0;while(/Â¨C(\d+)C/.test(R)){var P=RegExp.$1;if(R=R.replace("\xA8C"+P+"C",D.gHtmlSpans[P]),k===10){console.error("maximum nesting of 10 spans reached!!!");break}++k}X=X.replace("\xA8C"+N+"C",R)}return X=D.converter._dispatch("unhashHTMLSpans.after",X,V,D),X}),B.subParser("hashPreCodeTags",function(X,V,D){X=D.converter._dispatch("hashPreCodeTags.before",X,V,D);var N=function(R,k,P,$){var _=P+B.subParser("encodeCode")(k,V,D)+$;return`

\xA8G`+(D.ghCodeBlocks.push({text:R,codeblock:_})-1)+"G\n\n"};return X=B.helper.replaceRecursiveRegExp(X,N,"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),X=D.converter._dispatch("hashPreCodeTags.after",X,V,D),X}),B.subParser("headers",function(X,V,D){X=D.converter._dispatch("headers.before",X,V,D);var N=isNaN(parseInt(V.headerLevelStart))?1:parseInt(V.headerLevelStart),R=V.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,k=V.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;X=X.replace(R,function(_,h){var S=B.subParser("spanGamut")(h,V,D),O=V.noHeaderId?"":' id="'+$(h)+'"',M=N,y="<h"+M+O+">"+S+"</h"+M+">";return B.subParser("hashBlock")(y,V,D)}),X=X.replace(k,function(_,h){var S=B.subParser("spanGamut")(h,V,D),O=V.noHeaderId?"":' id="'+$(h)+'"',M=N+1,y="<h"+M+O+">"+S+"</h"+M+">";return B.subParser("hashBlock")(y,V,D)});var P=V.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;X=X.replace(P,function(_,h,S){var O=S;if(V.customizedHeaderId)O=S.replace(/\s?\{([^{]+?)}\s*$/,"");var M=B.subParser("spanGamut")(O,V,D),y=V.noHeaderId?"":' id="'+$(S)+'"',u=N-1+h.length,T="<h"+u+y+">"+M+"</h"+u+">";return B.subParser("hashBlock")(T,V,D)});function $(_){var h,S;if(V.customizedHeaderId){var O=_.match(/\{([^{]+?)}\s*$/);if(O&&O[1])_=O[1]}if(h=_,B.helper.isString(V.prefixHeaderId))S=V.prefixHeaderId;else if(V.prefixHeaderId===!0)S="section-";else S="";if(!V.rawPrefixHeaderId)h=S+h;if(V.ghCompatibleHeaderId)h=h.replace(/ /g,"-").replace(/&amp;/g,"").replace(/Â¨T/g,"").replace(/Â¨D/g,"").replace(/[&+$,\/:;=?@"#{}|^Â¨~\[\]`\\*)(%.!'<>]/g,"").toLowerCase();else if(V.rawHeaderId)h=h.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/Â¨T/g,"\xA8").replace(/Â¨D/g,"$").replace(/["']/g,"-").toLowerCase();else h=h.replace(/[^\w]/g,"").toLowerCase();if(V.rawPrefixHeaderId)h=S+h;if(D.hashLinkCounts[h])h=h+"-"+D.hashLinkCounts[h]++;else D.hashLinkCounts[h]=1;return h}return X=D.converter._dispatch("headers.after",X,V,D),X}),B.subParser("horizontalRule",function(X,V,D){X=D.converter._dispatch("horizontalRule.before",X,V,D);var N=B.subParser("hashBlock")("<hr />",V,D);return X=X.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,N),X=X.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,N),X=X.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,N),X=D.converter._dispatch("horizontalRule.after",X,V,D),X}),B.subParser("images",function(X,V,D){X=D.converter._dispatch("images.before",X,V,D);var N=/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,R=/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,k=/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,P=/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,$=/!\[([^\[\]]+)]()()()()()/g;function _(S,O,M,y,u,T,d,g){return y=y.replace(/\s/g,""),h(S,O,M,y,u,T,d,g)}function h(S,O,M,y,u,T,d,g){var{gUrls:l,gTitles:t,gDimensions:i}=D;if(M=M.toLowerCase(),!g)g="";if(S.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)y="";else if(y===""||y===null){if(M===""||M===null)M=O.toLowerCase().replace(/ ?\n/g," ");if(y="#"+M,!B.helper.isUndefined(l[M])){if(y=l[M],!B.helper.isUndefined(t[M]))g=t[M];if(!B.helper.isUndefined(i[M]))u=i[M].width,T=i[M].height}else return S}O=O.replace(/"/g,"&quot;").replace(B.helper.regexes.asteriskDashAndColon,B.helper.escapeCharactersCallback),y=y.replace(B.helper.regexes.asteriskDashAndColon,B.helper.escapeCharactersCallback);var n='<img src="'+y+'" alt="'+O+'"';if(g&&B.helper.isString(g))g=g.replace(/"/g,"&quot;").replace(B.helper.regexes.asteriskDashAndColon,B.helper.escapeCharactersCallback),n+=' title="'+g+'"';if(u&&T)u=u==="*"?"auto":u,T=T==="*"?"auto":T,n+=' width="'+u+'"',n+=' height="'+T+'"';return n+=" />",n}return X=X.replace(P,h),X=X.replace(k,_),X=X.replace(R,h),X=X.replace(N,h),X=X.replace($,h),X=D.converter._dispatch("images.after",X,V,D),X}),B.subParser("italicsAndBold",function(X,V,D){X=D.converter._dispatch("italicsAndBold.before",X,V,D);function N(R,k,P){return k+R+P}if(V.literalMidWordUnderscores)X=X.replace(/\b___(\S[\s\S]*?)___\b/g,function(R,k){return N(k,"<strong><em>","</em></strong>")}),X=X.replace(/\b__(\S[\s\S]*?)__\b/g,function(R,k){return N(k,"<strong>","</strong>")}),X=X.replace(/\b_(\S[\s\S]*?)_\b/g,function(R,k){return N(k,"<em>","</em>")});else X=X.replace(/___(\S[\s\S]*?)___/g,function(R,k){return/\S$/.test(k)?N(k,"<strong><em>","</em></strong>"):R}),X=X.replace(/__(\S[\s\S]*?)__/g,function(R,k){return/\S$/.test(k)?N(k,"<strong>","</strong>"):R}),X=X.replace(/_([^\s_][\s\S]*?)_/g,function(R,k){return/\S$/.test(k)?N(k,"<em>","</em>"):R});if(V.literalMidWordAsterisks)X=X.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,function(R,k,P){return N(P,k+"<strong><em>","</em></strong>")}),X=X.replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,function(R,k,P){return N(P,k+"<strong>","</strong>")}),X=X.replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,function(R,k,P){return N(P,k+"<em>","</em>")});else X=X.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(R,k){return/\S$/.test(k)?N(k,"<strong><em>","</em></strong>"):R}),X=X.replace(/\*\*(\S[\s\S]*?)\*\*/g,function(R,k){return/\S$/.test(k)?N(k,"<strong>","</strong>"):R}),X=X.replace(/\*([^\s*][\s\S]*?)\*/g,function(R,k){return/\S$/.test(k)?N(k,"<em>","</em>"):R});return X=D.converter._dispatch("italicsAndBold.after",X,V,D),X}),B.subParser("lists",function(X,V,D){function N(P,$){D.gListLevel++,P=P.replace(/\n{2,}$/,"\n"),P+="\xA80";var _=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(Â¨0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,h=/\n[ \t]*\n(?!Â¨0)/.test(P);if(V.disableForced4SpacesIndentedSublists)_=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(Â¨0|\2([*+-]|\d+[.])[ \t]+))/gm;if(P=P.replace(_,function(S,O,M,y,u,T,d){d=d&&d.trim()!=="";var g=B.subParser("outdent")(u,V,D),l="";if(T&&V.tasklists)l=' class="task-list-item" style="list-style-type: none;"',g=g.replace(/^[ \t]*\[(x|X| )?]/m,function(){var t='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';if(d)t+=" checked";return t+=">",t});if(g=g.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(t){return"\xA8A"+t}),O||g.search(/\n{2,}/)>-1)g=B.subParser("githubCodeBlocks")(g,V,D),g=B.subParser("blockGamut")(g,V,D);else if(g=B.subParser("lists")(g,V,D),g=g.replace(/\n$/,""),g=B.subParser("hashHTMLBlocks")(g,V,D),g=g.replace(/\n\n+/g,"\n\n"),h)g=B.subParser("paragraphs")(g,V,D);else g=B.subParser("spanGamut")(g,V,D);return g=g.replace("\xA8A",""),g="<li"+l+">"+g+"</li>\n",g}),P=P.replace(/Â¨0/g,""),D.gListLevel--,$)P=P.replace(/\s+$/,"");return P}function R(P,$){if($==="ol"){var _=P.match(/^ *(\d+)\./);if(_&&_[1]!=="1")return' start="'+_[1]+'"'}return""}function k(P,$,_){var h=V.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,S=V.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,O=$==="ul"?h:S,M="";if(P.search(O)!==-1)(function u(T){var d=T.search(O),g=R(P,$);if(d!==-1)M+="\n\n<"+$+g+">\n"+N(T.slice(0,d),!!_)+"</"+$+">\n",$=$==="ul"?"ol":"ul",O=$==="ul"?h:S,u(T.slice(d));else M+="\n\n<"+$+g+">\n"+N(T,!!_)+"</"+$+">\n"})(P);else{var y=R(P,$);M="\n\n<"+$+y+">\n"+N(P,!!_)+"</"+$+">\n"}return M}if(X=D.converter._dispatch("lists.before",X,V,D),X+="\xA80",D.gListLevel)X=X.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(Â¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(P,$,_){var h=_.search(/[*+-]/g)>-1?"ul":"ol";return k($,h,!0)});else X=X.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(Â¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(P,$,_,h){var S=h.search(/[*+-]/g)>-1?"ul":"ol";return k(_,S,!1)});return X=X.replace(/Â¨0/,""),X=D.converter._dispatch("lists.after",X,V,D),X}),B.subParser("metadata",function(X,V,D){if(!V.metadata)return X;X=D.converter._dispatch("metadata.before",X,V,D);function N(R){D.metadata.raw=R,R=R.replace(/&/g,"&amp;").replace(/"/g,"&quot;"),R=R.replace(/\n {4}/g," "),R.replace(/^([\S ]+): +([\s\S]+?)$/gm,function(k,P,$){return D.metadata.parsed[P]=$,""})}return X=X.replace(/^\s*Â«Â«Â«+(\S*?)\n([\s\S]+?)\nÂ»Â»Â»+\n/,function(R,k,P){return N(P),"\xA8M"}),X=X.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function(R,k,P){if(k)D.metadata.format=k;return N(P),"\xA8M"}),X=X.replace(/Â¨M/g,""),X=D.converter._dispatch("metadata.after",X,V,D),X}),B.subParser("outdent",function(X,V,D){return X=D.converter._dispatch("outdent.before",X,V,D),X=X.replace(/^(\t|[ ]{1,4})/gm,"\xA80"),X=X.replace(/Â¨0/g,""),X=D.converter._dispatch("outdent.after",X,V,D),X}),B.subParser("paragraphs",function(X,V,D){X=D.converter._dispatch("paragraphs.before",X,V,D),X=X.replace(/^\n+/g,""),X=X.replace(/\n+$/g,"");var N=X.split(/\n{2,}/g),R=[],k=N.length;for(var P=0;P<k;P++){var $=N[P];if($.search(/Â¨(K|G)(\d+)\1/g)>=0)R.push($);else if($.search(/\S/)>=0)$=B.subParser("spanGamut")($,V,D),$=$.replace(/^([ \t]*)/g,"<p>"),$+="</p>",R.push($)}k=R.length;for(P=0;P<k;P++){var _="",h=R[P],S=!1;while(/Â¨(K|G)(\d+)\1/.test(h)){var{$1:O,$2:M}=RegExp;if(O==="K")_=D.gHtmlBlocks[M];else if(S)_=B.subParser("encodeCode")(D.ghCodeBlocks[M].text,V,D);else _=D.ghCodeBlocks[M].codeblock;if(_=_.replace(/\$/g,"$$$$"),h=h.replace(/(\n\n)?Â¨(K|G)\d+\2(\n\n)?/,_),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(h))S=!0}R[P]=h}return X=R.join("\n"),X=X.replace(/^\n+/g,""),X=X.replace(/\n+$/g,""),D.converter._dispatch("paragraphs.after",X,V,D)}),B.subParser("runExtension",function(X,V,D,N){if(X.filter)V=X.filter(V,N.converter,D);else if(X.regex){var R=X.regex;if(!(R instanceof RegExp))R=new RegExp(R,"g");V=V.replace(R,X.replace)}return V}),B.subParser("spanGamut",function(X,V,D){if(X=D.converter._dispatch("spanGamut.before",X,V,D),X=B.subParser("codeSpans")(X,V,D),X=B.subParser("escapeSpecialCharsWithinTagAttributes")(X,V,D),X=B.subParser("encodeBackslashEscapes")(X,V,D),X=B.subParser("images")(X,V,D),X=B.subParser("anchors")(X,V,D),X=B.subParser("autoLinks")(X,V,D),X=B.subParser("simplifiedAutoLinks")(X,V,D),X=B.subParser("emoji")(X,V,D),X=B.subParser("underline")(X,V,D),X=B.subParser("italicsAndBold")(X,V,D),X=B.subParser("strikethrough")(X,V,D),X=B.subParser("ellipsis")(X,V,D),X=B.subParser("hashHTMLSpans")(X,V,D),X=B.subParser("encodeAmpsAndAngles")(X,V,D),V.simpleLineBreaks){if(!/\n\nÂ¨K/.test(X))X=X.replace(/\n+/g,"<br />\n")}else X=X.replace(/  +\n/g,"<br />\n");return X=D.converter._dispatch("spanGamut.after",X,V,D),X}),B.subParser("strikethrough",function(X,V,D){function N(R){if(V.simplifiedAutoLink)R=B.subParser("simplifiedAutoLinks")(R,V,D);return"<del>"+R+"</del>"}if(V.strikethrough)X=D.converter._dispatch("strikethrough.before",X,V,D),X=X.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(R,k){return N(k)}),X=D.converter._dispatch("strikethrough.after",X,V,D);return X}),B.subParser("stripLinkDefinitions",function(X,V,D){var N=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=Â¨0))/gm,R=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=Â¨0)|(?=\n\[))/gm;X+="\xA80";var k=function(P,$,_,h,S,O,M){if($=$.toLowerCase(),X.toLowerCase().split($).length-1<2)return P;if(_.match(/^data:.+?\/.+?;base64,/))D.gUrls[$]=_.replace(/\s/g,"");else D.gUrls[$]=B.subParser("encodeAmpsAndAngles")(_,V,D);if(O)return O+M;else{if(M)D.gTitles[$]=M.replace(/"|'/g,"&quot;");if(V.parseImgDimensions&&h&&S)D.gDimensions[$]={width:h,height:S}}return""};return X=X.replace(R,k),X=X.replace(N,k),X=X.replace(/Â¨0/,""),X}),B.subParser("tables",function(X,V,D){if(!V.tables)return X;var N=/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|Â¨0)/gm,R=/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|Â¨0)/gm;function k(S){if(/^:[ \t]*--*$/.test(S))return' style="text-align:left;"';else if(/^--*[ \t]*:[ \t]*$/.test(S))return' style="text-align:right;"';else if(/^:[ \t]*--*[ \t]*:$/.test(S))return' style="text-align:center;"';else return""}function P(S,O){var M="";if(S=S.trim(),V.tablesHeaderId||V.tableHeaderId)M=' id="'+S.replace(/ /g,"_").toLowerCase()+'"';return S=B.subParser("spanGamut")(S,V,D),"<th"+M+O+">"+S+"</th>\n"}function $(S,O){var M=B.subParser("spanGamut")(S,V,D);return"<td"+O+">"+M+"</td>\n"}function _(S,O){var M="<table>\n<thead>\n<tr>\n",y=S.length;for(var u=0;u<y;++u)M+=S[u];M+="</tr>\n</thead>\n<tbody>\n";for(u=0;u<O.length;++u){M+="<tr>\n";for(var T=0;T<y;++T)M+=O[u][T];M+="</tr>\n"}return M+="</tbody>\n</table>\n",M}function h(S){var O,M=S.split("\n");for(O=0;O<M.length;++O){if(/^ {0,3}\|/.test(M[O]))M[O]=M[O].replace(/^ {0,3}\|/,"");if(/\|[ \t]*$/.test(M[O]))M[O]=M[O].replace(/\|[ \t]*$/,"");M[O]=B.subParser("codeSpans")(M[O],V,D)}var y=M[0].split("|").map(function(n){return n.trim()}),u=M[1].split("|").map(function(n){return n.trim()}),T=[],d=[],g=[],l=[];M.shift(),M.shift();for(O=0;O<M.length;++O){if(M[O].trim()==="")continue;T.push(M[O].split("|").map(function(n){return n.trim()}))}if(y.length<u.length)return S;for(O=0;O<u.length;++O)g.push(k(u[O]));for(O=0;O<y.length;++O){if(B.helper.isUndefined(g[O]))g[O]="";d.push(P(y[O],g[O]))}for(O=0;O<T.length;++O){var t=[];for(var i=0;i<d.length;++i){if(B.helper.isUndefined(T[O][i]));t.push($(T[O][i],g[i]))}l.push(t)}return _(d,l)}return X=D.converter._dispatch("tables.before",X,V,D),X=X.replace(/\\(\|)/g,B.helper.escapeCharactersCallback),X=X.replace(N,h),X=X.replace(R,h),X=D.converter._dispatch("tables.after",X,V,D),X}),B.subParser("underline",function(X,V,D){if(!V.underline)return X;if(X=D.converter._dispatch("underline.before",X,V,D),V.literalMidWordUnderscores)X=X.replace(/\b___(\S[\s\S]*?)___\b/g,function(N,R){return"<u>"+R+"</u>"}),X=X.replace(/\b__(\S[\s\S]*?)__\b/g,function(N,R){return"<u>"+R+"</u>"});else X=X.replace(/___(\S[\s\S]*?)___/g,function(N,R){return/\S$/.test(R)?"<u>"+R+"</u>":N}),X=X.replace(/__(\S[\s\S]*?)__/g,function(N,R){return/\S$/.test(R)?"<u>"+R+"</u>":N});return X=X.replace(/(_)/g,B.helper.escapeCharactersCallback),X=D.converter._dispatch("underline.after",X,V,D),X}),B.subParser("unescapeSpecialChars",function(X,V,D){return X=D.converter._dispatch("unescapeSpecialChars.before",X,V,D),X=X.replace(/Â¨E(\d+)E/g,function(N,R){var k=parseInt(R);return String.fromCharCode(k)}),X=D.converter._dispatch("unescapeSpecialChars.after",X,V,D),X}),B.subParser("makeMarkdown.blockquote",function(X,V){var D="";if(X.hasChildNodes()){var N=X.childNodes,R=N.length;for(var k=0;k<R;++k){var P=B.subParser("makeMarkdown.node")(N[k],V);if(P==="")continue;D+=P}}return D=D.trim(),D="> "+D.split("\n").join("\n> "),D}),B.subParser("makeMarkdown.codeBlock",function(X,V){var D=X.getAttribute("language"),N=X.getAttribute("precodenum");return"```"+D+"\n"+V.preList[N]+"\n```"}),B.subParser("makeMarkdown.codeSpan",function(X){return"`"+X.innerHTML+"`"}),B.subParser("makeMarkdown.emphasis",function(X,V){var D="";if(X.hasChildNodes()){D+="*";var N=X.childNodes,R=N.length;for(var k=0;k<R;++k)D+=B.subParser("makeMarkdown.node")(N[k],V);D+="*"}return D}),B.subParser("makeMarkdown.header",function(X,V,D){var N=new Array(D+1).join("#"),R="";if(X.hasChildNodes()){R=N+" ";var k=X.childNodes,P=k.length;for(var $=0;$<P;++$)R+=B.subParser("makeMarkdown.node")(k[$],V)}return R}),B.subParser("makeMarkdown.hr",function(){return"---"}),B.subParser("makeMarkdown.image",function(X){var V="";if(X.hasAttribute("src")){if(V+="!["+X.getAttribute("alt")+"](",V+="<"+X.getAttribute("src")+">",X.hasAttribute("width")&&X.hasAttribute("height"))V+=" ="+X.getAttribute("width")+"x"+X.getAttribute("height");if(X.hasAttribute("title"))V+=' "'+X.getAttribute("title")+'"';V+=")"}return V}),B.subParser("makeMarkdown.links",function(X,V){var D="";if(X.hasChildNodes()&&X.hasAttribute("href")){var N=X.childNodes,R=N.length;D="[";for(var k=0;k<R;++k)D+=B.subParser("makeMarkdown.node")(N[k],V);if(D+="](",D+="<"+X.getAttribute("href")+">",X.hasAttribute("title"))D+=' "'+X.getAttribute("title")+'"';D+=")"}return D}),B.subParser("makeMarkdown.list",function(X,V,D){var N="";if(!X.hasChildNodes())return"";var R=X.childNodes,k=R.length,P=X.getAttribute("start")||1;for(var $=0;$<k;++$){if(typeof R[$].tagName==="undefined"||R[$].tagName.toLowerCase()!=="li")continue;var _="";if(D==="ol")_=P.toString()+". ";else _="- ";N+=_+B.subParser("makeMarkdown.listItem")(R[$],V),++P}return N+="\n<!-- -->\n",N.trim()}),B.subParser("makeMarkdown.listItem",function(X,V){var D="",N=X.childNodes,R=N.length;for(var k=0;k<R;++k)D+=B.subParser("makeMarkdown.node")(N[k],V);if(!/\n$/.test(D))D+="\n";else D=D.split("\n").join("\n    ").replace(/^ {4}$/gm,"").replace(/\n\n+/g,"\n\n");return D}),B.subParser("makeMarkdown.node",function(X,V,D){D=D||!1;var N="";if(X.nodeType===3)return B.subParser("makeMarkdown.txt")(X,V);if(X.nodeType===8)return"<!--"+X.data+"-->\n\n";if(X.nodeType!==1)return"";var R=X.tagName.toLowerCase();switch(R){case"h1":if(!D)N=B.subParser("makeMarkdown.header")(X,V,1)+"\n\n";break;case"h2":if(!D)N=B.subParser("makeMarkdown.header")(X,V,2)+"\n\n";break;case"h3":if(!D)N=B.subParser("makeMarkdown.header")(X,V,3)+"\n\n";break;case"h4":if(!D)N=B.subParser("makeMarkdown.header")(X,V,4)+"\n\n";break;case"h5":if(!D)N=B.subParser("makeMarkdown.header")(X,V,5)+"\n\n";break;case"h6":if(!D)N=B.subParser("makeMarkdown.header")(X,V,6)+"\n\n";break;case"p":if(!D)N=B.subParser("makeMarkdown.paragraph")(X,V)+"\n\n";break;case"blockquote":if(!D)N=B.subParser("makeMarkdown.blockquote")(X,V)+"\n\n";break;case"hr":if(!D)N=B.subParser("makeMarkdown.hr")(X,V)+"\n\n";break;case"ol":if(!D)N=B.subParser("makeMarkdown.list")(X,V,"ol")+"\n\n";break;case"ul":if(!D)N=B.subParser("makeMarkdown.list")(X,V,"ul")+"\n\n";break;case"precode":if(!D)N=B.subParser("makeMarkdown.codeBlock")(X,V)+"\n\n";break;case"pre":if(!D)N=B.subParser("makeMarkdown.pre")(X,V)+"\n\n";break;case"table":if(!D)N=B.subParser("makeMarkdown.table")(X,V)+"\n\n";break;case"code":N=B.subParser("makeMarkdown.codeSpan")(X,V);break;case"em":case"i":N=B.subParser("makeMarkdown.emphasis")(X,V);break;case"strong":case"b":N=B.subParser("makeMarkdown.strong")(X,V);break;case"del":N=B.subParser("makeMarkdown.strikethrough")(X,V);break;case"a":N=B.subParser("makeMarkdown.links")(X,V);break;case"img":N=B.subParser("makeMarkdown.image")(X,V);break;default:N=X.outerHTML+"\n\n"}return N}),B.subParser("makeMarkdown.paragraph",function(X,V){var D="";if(X.hasChildNodes()){var N=X.childNodes,R=N.length;for(var k=0;k<R;++k)D+=B.subParser("makeMarkdown.node")(N[k],V)}return D=D.trim(),D}),B.subParser("makeMarkdown.pre",function(X,V){var D=X.getAttribute("prenum");return"<pre>"+V.preList[D]+"</pre>"}),B.subParser("makeMarkdown.strikethrough",function(X,V){var D="";if(X.hasChildNodes()){D+="~~";var N=X.childNodes,R=N.length;for(var k=0;k<R;++k)D+=B.subParser("makeMarkdown.node")(N[k],V);D+="~~"}return D}),B.subParser("makeMarkdown.strong",function(X,V){var D="";if(X.hasChildNodes()){D+="**";var N=X.childNodes,R=N.length;for(var k=0;k<R;++k)D+=B.subParser("makeMarkdown.node")(N[k],V);D+="**"}return D}),B.subParser("makeMarkdown.table",function(X,V){var D="",N=[[],[]],R=X.querySelectorAll("thead>tr>th"),k=X.querySelectorAll("tbody>tr"),P,$;for(P=0;P<R.length;++P){var _=B.subParser("makeMarkdown.tableCell")(R[P],V),h="---";if(R[P].hasAttribute("style")){var S=R[P].getAttribute("style").toLowerCase().replace(/\s/g,"");switch(S){case"text-align:left;":h=":---";break;case"text-align:right;":h="---:";break;case"text-align:center;":h=":---:";break}}N[0][P]=_.trim(),N[1][P]=h}for(P=0;P<k.length;++P){var O=N.push([])-1,M=k[P].getElementsByTagName("td");for($=0;$<R.length;++$){var y=" ";if(typeof M[$]!=="undefined")y=B.subParser("makeMarkdown.tableCell")(M[$],V);N[O].push(y)}}var u=3;for(P=0;P<N.length;++P)for($=0;$<N[P].length;++$){var T=N[P][$].length;if(T>u)u=T}for(P=0;P<N.length;++P){for($=0;$<N[P].length;++$)if(P===1)if(N[P][$].slice(-1)===":")N[P][$]=B.helper.padEnd(N[P][$].slice(-1),u-1,"-")+":";else N[P][$]=B.helper.padEnd(N[P][$],u,"-");else N[P][$]=B.helper.padEnd(N[P][$],u);D+="| "+N[P].join(" | ")+" |\n"}return D.trim()}),B.subParser("makeMarkdown.tableCell",function(X,V){var D="";if(!X.hasChildNodes())return"";var N=X.childNodes,R=N.length;for(var k=0;k<R;++k)D+=B.subParser("makeMarkdown.node")(N[k],V,!0);return D.trim()}),B.subParser("makeMarkdown.txt",function(X){var V=X.nodeValue;return V=V.replace(/ +/g," "),V=V.replace(/Â¨NBSP;/g," "),V=B.helper.unescapeHTMLEntities(V),V=V.replace(/([*_~|`])/g,"\\$1"),V=V.replace(/^(\s*)>/g,"\\$1>"),V=V.replace(/^#/gm,"\\#"),V=V.replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3"),V=V.replace(/^( {0,3}\d+)\./gm,"$1\\."),V=V.replace(/^( {0,3})([+-])/gm,"$1\\$2"),V=V.replace(/]([\s]*)\(/g,"\\]$1\\("),V=V.replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:"),V});var L=this;if(typeof define==="function"&&define.amd)define(function(){return B});else if(typeof hC!=="undefined"&&hC.exports)hC.exports=B;else L.showdown=B}).call(vU)});var Tz=WW((j9,jY)=>{(function(A,Q){typeof j9=="object"&&typeof jY=="object"?jY.exports=Q():typeof define=="function"&&define.amd?define("Typewriter",[],Q):typeof j9=="object"?j9.Typewriter=Q():A.Typewriter=Q()})(typeof self!="undefined"?self:j9,()=>(()=>{var A={75:function(J){(function(){var I,q,K,Y,Z,H;typeof performance!="undefined"&&performance!==null&&performance.now?J.exports=function(){return performance.now()}:typeof process!="undefined"&&process!==null&&process.hrtime?(J.exports=function(){return(I()-Z)/1e6},q=process.hrtime,Y=(I=function(){var G;return 1e9*(G=q())[0]+G[1]})(),H=1e9*process.uptime(),Z=Y-H):Date.now?(J.exports=function(){return Date.now()-K},K=Date.now()):(J.exports=function(){return new Date().getTime()-K},K=new Date().getTime())}).call(this)},4087:(J,I,q)=>{for(var K=q(75),Y=typeof window=="undefined"?q.g:window,Z=["moz","webkit"],H="AnimationFrame",G=Y["request"+H],W=Y["cancel"+H]||Y["cancelRequest"+H],F=0;!G&&F<Z.length;F++)G=Y[Z[F]+"Request"+H],W=Y[Z[F]+"Cancel"+H]||Y[Z[F]+"CancelRequest"+H];if(!G||!W){var z=0,U=0,E=[];G=function(w){if(E.length===0){var L=K(),X=Math.max(0,16.666666666666668-(L-z));z=X+L,setTimeout(function(){var V=E.slice(0);E.length=0;for(var D=0;D<V.length;D++)if(!V[D].cancelled)try{V[D].callback(z)}catch(N){setTimeout(function(){throw N},0)}},Math.round(X))}return E.push({handle:++U,callback:w,cancelled:!1}),U},W=function(w){for(var L=0;L<E.length;L++)E[L].handle===w&&(E[L].cancelled=!0)}}J.exports=function(w){return G.call(Y,w)},J.exports.cancel=function(){W.apply(Y,arguments)},J.exports.polyfill=function(w){w||(w=Y),w.requestAnimationFrame=G,w.cancelAnimationFrame=W}}},Q={};function B(J){var I=Q[J];if(I!==void 0)return I.exports;var q=Q[J]={exports:{}};return A[J].call(q.exports,q,q.exports,B),q.exports}B.n=(J)=>{var I=J&&J.__esModule?()=>J.default:()=>J;return B.d(I,{a:I}),I},B.d=(J,I)=>{for(var q in I)B.o(I,q)&&!B.o(J,q)&&Object.defineProperty(J,q,{enumerable:!0,get:I[q]})},B.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(J){if(typeof window=="object")return window}}(),B.o=(J,I)=>Object.prototype.hasOwnProperty.call(J,I);var C={};return(()=>{B.d(C,{default:()=>h});var J=B(4087),I=B.n(J);let q=function(S){return new RegExp(/<[a-z][\s\S]*>/i).test(S)},K=function(S,O){return Math.floor(Math.random()*(O-S+1))+S};var Y="TYPE_CHARACTER",Z="REMOVE_CHARACTER",H="REMOVE_ALL",G="REMOVE_LAST_VISIBLE_NODE",W="PAUSE_FOR",F="CALL_FUNCTION",z="ADD_HTML_TAG_ELEMENT",U="CHANGE_DELETE_SPEED",E="CHANGE_DELAY",w="CHANGE_CURSOR",L="PASTE_STRING",X="HTML_TAG";function V(S){return V=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},V(S)}function D(S,O){var M=Object.keys(S);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(S);O&&(y=y.filter(function(u){return Object.getOwnPropertyDescriptor(S,u).enumerable})),M.push.apply(M,y)}return M}function N(S){for(var O=1;O<arguments.length;O++){var M=arguments[O]!=null?arguments[O]:{};O%2?D(Object(M),!0).forEach(function(y){$(S,y,M[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(M)):D(Object(M)).forEach(function(y){Object.defineProperty(S,y,Object.getOwnPropertyDescriptor(M,y))})}return S}function R(S){return function(O){if(Array.isArray(O))return k(O)}(S)||function(O){if(typeof Symbol!="undefined"&&O[Symbol.iterator]!=null||O["@@iterator"]!=null)return Array.from(O)}(S)||function(O,M){if(O){if(typeof O=="string")return k(O,M);var y=Object.prototype.toString.call(O).slice(8,-1);return y==="Object"&&O.constructor&&(y=O.constructor.name),y==="Map"||y==="Set"?Array.from(O):y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?k(O,M):void 0}}(S)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(S,O){(O==null||O>S.length)&&(O=S.length);for(var M=0,y=new Array(O);M<O;M++)y[M]=S[M];return y}function P(S,O){for(var M=0;M<O.length;M++){var y=O[M];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(S,_(y.key),y)}}function $(S,O,M){return(O=_(O))in S?Object.defineProperty(S,O,{value:M,enumerable:!0,configurable:!0,writable:!0}):S[O]=M,S}function _(S){var O=function(M,y){if(V(M)!=="object"||M===null)return M;var u=M[Symbol.toPrimitive];if(u!==void 0){var T=u.call(M,"string");if(V(T)!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(M)}(S);return V(O)==="symbol"?O:String(O)}let h=function(){function S(y,u){var T=this;if(function(g,l){if(!(g instanceof l))throw new TypeError("Cannot call a class as a function")}(this,S),$(this,"state",{cursorAnimation:null,lastFrameTime:null,pauseUntil:null,eventQueue:[],eventLoop:null,eventLoopPaused:!1,reverseCalledEvents:[],calledEvents:[],visibleNodes:[],initialOptions:null,elements:{container:null,wrapper:document.createElement("span"),cursor:document.createElement("span")}}),$(this,"options",{strings:null,cursor:"|",delay:"natural",pauseFor:1500,deleteSpeed:"natural",loop:!1,autoStart:!1,devMode:!1,skipAddStyles:!1,wrapperClassName:"Typewriter__wrapper",cursorClassName:"Typewriter__cursor",stringSplitter:null,onCreateTextNode:null,onRemoveNode:null}),$(this,"setupWrapperElement",function(){T.state.elements.container&&(T.state.elements.wrapper.className=T.options.wrapperClassName,T.state.elements.cursor.className=T.options.cursorClassName,T.state.elements.cursor.innerHTML=T.options.cursor,T.state.elements.container.innerHTML="",T.state.elements.container.appendChild(T.state.elements.wrapper),T.state.elements.container.appendChild(T.state.elements.cursor))}),$(this,"start",function(){return T.state.eventLoopPaused=!1,T.runEventLoop(),T}),$(this,"pause",function(){return T.state.eventLoopPaused=!0,T}),$(this,"stop",function(){return T.state.eventLoop&&(J.cancel(T.state.eventLoop),T.state.eventLoop=null),T}),$(this,"pauseFor",function(g){return T.addEventToQueue(W,{ms:g}),T}),$(this,"typeOutAllStrings",function(){return typeof T.options.strings=="string"?(T.typeString(T.options.strings).pauseFor(T.options.pauseFor),T):(T.options.strings.forEach(function(g){T.typeString(g).pauseFor(T.options.pauseFor).deleteAll(T.options.deleteSpeed)}),T)}),$(this,"typeString",function(g){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(q(g))return T.typeOutHTMLString(g,l);if(g){var t=(T.options||{}).stringSplitter,i=typeof t=="function"?t(g):g.split("");T.typeCharacters(i,l)}return T}),$(this,"pasteString",function(g){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return q(g)?T.typeOutHTMLString(g,l,!0):(g&&T.addEventToQueue(L,{character:g,node:l}),T)}),$(this,"typeOutHTMLString",function(g){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=arguments.length>2?arguments[2]:void 0,i=function(H0){var X0=document.createElement("div");return X0.innerHTML=H0,X0.childNodes}(g);if(i.length>0)for(var n=0;n<i.length;n++){var J0=i[n],e=J0.innerHTML;J0&&J0.nodeType!==3?(J0.innerHTML="",T.addEventToQueue(z,{node:J0,parentNode:l}),t?T.pasteString(e,J0):T.typeString(e,J0)):J0.textContent&&(t?T.pasteString(J0.textContent,l):T.typeString(J0.textContent,l))}return T}),$(this,"deleteAll",function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"natural";return T.addEventToQueue(H,{speed:g}),T}),$(this,"changeDeleteSpeed",function(g){if(!g)throw new Error("Must provide new delete speed");return T.addEventToQueue(U,{speed:g}),T}),$(this,"changeDelay",function(g){if(!g)throw new Error("Must provide new delay");return T.addEventToQueue(E,{delay:g}),T}),$(this,"changeCursor",function(g){if(!g)throw new Error("Must provide new cursor");return T.addEventToQueue(w,{cursor:g}),T}),$(this,"deleteChars",function(g){if(!g)throw new Error("Must provide amount of characters to delete");for(var l=0;l<g;l++)T.addEventToQueue(Z);return T}),$(this,"callFunction",function(g,l){if(!g||typeof g!="function")throw new Error("Callback must be a function");return T.addEventToQueue(F,{cb:g,thisArg:l}),T}),$(this,"typeCharacters",function(g){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!g||!Array.isArray(g))throw new Error("Characters must be an array");return g.forEach(function(t){T.addEventToQueue(Y,{character:t,node:l})}),T}),$(this,"removeCharacters",function(g){if(!g||!Array.isArray(g))throw new Error("Characters must be an array");return g.forEach(function(){T.addEventToQueue(Z)}),T}),$(this,"addEventToQueue",function(g,l){var t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return T.addEventToStateProperty(g,l,t,"eventQueue")}),$(this,"addReverseCalledEvent",function(g,l){var t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return T.options.loop?T.addEventToStateProperty(g,l,t,"reverseCalledEvents"):T}),$(this,"addEventToStateProperty",function(g,l){var t=arguments.length>2&&arguments[2]!==void 0&&arguments[2],i=arguments.length>3?arguments[3]:void 0,n={eventName:g,eventArgs:l||{}};return T.state[i]=t?[n].concat(R(T.state[i])):[].concat(R(T.state[i]),[n]),T}),$(this,"runEventLoop",function(){T.state.lastFrameTime||(T.state.lastFrameTime=Date.now());var g=Date.now(),l=g-T.state.lastFrameTime;if(!T.state.eventQueue.length){if(!T.options.loop)return;T.state.eventQueue=R(T.state.calledEvents),T.state.calledEvents=[],T.options=N({},T.state.initialOptions)}if(T.state.eventLoop=I()(T.runEventLoop),!T.state.eventLoopPaused){if(T.state.pauseUntil){if(g<T.state.pauseUntil)return;T.state.pauseUntil=null}var t,i=R(T.state.eventQueue),n=i.shift();if(!(l<=(t=n.eventName===G||n.eventName===Z?T.options.deleteSpeed==="natural"?K(40,80):T.options.deleteSpeed:T.options.delay==="natural"?K(120,160):T.options.delay))){var{eventName:J0,eventArgs:e}=n;switch(T.logInDevMode({currentEvent:n,state:T.state,delay:t}),J0){case L:case Y:var{character:H0,node:X0}=e,L0=document.createTextNode(H0),T0=L0;T.options.onCreateTextNode&&typeof T.options.onCreateTextNode=="function"&&(T0=T.options.onCreateTextNode(H0,L0)),T0&&(X0?X0.appendChild(T0):T.state.elements.wrapper.appendChild(T0)),T.state.visibleNodes=[].concat(R(T.state.visibleNodes),[{type:"TEXT_NODE",character:H0,node:T0}]);break;case Z:i.unshift({eventName:G,eventArgs:{removingCharacterNode:!0}});break;case W:var s=n.eventArgs.ms;T.state.pauseUntil=Date.now()+parseInt(s);break;case F:var P1=n.eventArgs,Z0=P1.cb,G0=P1.thisArg;Z0.call(G0,{elements:T.state.elements});break;case z:var x0=n.eventArgs,J1=x0.node,S0=x0.parentNode;S0?S0.appendChild(J1):T.state.elements.wrapper.appendChild(J1),T.state.visibleNodes=[].concat(R(T.state.visibleNodes),[{type:X,node:J1,parentNode:S0||T.state.elements.wrapper}]);break;case H:var t0=T.state.visibleNodes,h1=e.speed,$1=[];h1&&$1.push({eventName:U,eventArgs:{speed:h1,temp:!0}});for(var m=0,j=t0.length;m<j;m++)$1.push({eventName:G,eventArgs:{removingCharacterNode:!1}});h1&&$1.push({eventName:U,eventArgs:{speed:T.options.deleteSpeed,temp:!0}}),i.unshift.apply(i,$1);break;case G:var C0=n.eventArgs.removingCharacterNode;if(T.state.visibleNodes.length){var I0=T.state.visibleNodes.pop(),F0=I0.type,Y0=I0.node,i0=I0.character;T.options.onRemoveNode&&typeof T.options.onRemoveNode=="function"&&T.options.onRemoveNode({node:Y0,character:i0}),Y0&&Y0.parentNode.removeChild(Y0),F0===X&&C0&&i.unshift({eventName:G,eventArgs:{}})}break;case U:T.options.deleteSpeed=n.eventArgs.speed;break;case E:T.options.delay=n.eventArgs.delay;break;case w:T.options.cursor=n.eventArgs.cursor,T.state.elements.cursor.innerHTML=n.eventArgs.cursor}T.options.loop&&(n.eventName===G||n.eventArgs&&n.eventArgs.temp||(T.state.calledEvents=[].concat(R(T.state.calledEvents),[n]))),T.state.eventQueue=i,T.state.lastFrameTime=g}}}),y)if(typeof y=="string"){var d=document.querySelector(y);if(!d)throw new Error("Could not find container element");this.state.elements.container=d}else this.state.elements.container=y;u&&(this.options=N(N({},this.options),u)),this.state.initialOptions=N({},this.options),this.init()}var O,M;return O=S,(M=[{key:"init",value:function(){var y,u;this.setupWrapperElement(),this.addEventToQueue(w,{cursor:this.options.cursor},!0),this.addEventToQueue(H,null,!0),!window||window.___TYPEWRITER_JS_STYLES_ADDED___||this.options.skipAddStyles||(y=".Typewriter__cursor{-webkit-animation:Typewriter-cursor 1s infinite;animation:Typewriter-cursor 1s infinite;margin-left:1px}@-webkit-keyframes Typewriter-cursor{0%{opacity:0}50%{opacity:1}100%{opacity:0}}@keyframes Typewriter-cursor{0%{opacity:0}50%{opacity:1}100%{opacity:0}}",(u=document.createElement("style")).appendChild(document.createTextNode(y)),document.head.appendChild(u),window.___TYPEWRITER_JS_STYLES_ADDED___=!0),this.options.autoStart===!0&&this.options.strings&&this.typeOutAllStrings().start()}},{key:"logInDevMode",value:function(y){this.options.devMode&&console.log(y)}}])&&P(O.prototype,M),Object.defineProperty(O,"prototype",{writable:!1}),S}()})(),C.default})())});var Xq={syndication:{log:"https://events-endpoint-dev.pointandplace.com/syndication/events"},syndicationCoverage:{log:"https://events-endpoint-dev.pointandplace.com/syndication/coverage"}},M8={local:Xq,dev:Xq,stage:Xq,prod:{syndication:{log:"https://events-endpoint.pointandplace.com/syndication/events"},syndicationCoverage:{log:"https://events-endpoint.pointandplace.com/syndication/coverage"}}};class Gq{_environment;_queue=[];_batchTime;_initialBatchTime;_endpoint=null;_timerId;_firstEvent=!0;constructor(A,Q=2000,B=500){if(this._environment=A,this._batchTime=Q,this._initialBatchTime=B,this._environment==="local")this._endpoint=M8.local.syndication.log;else if(this._environment==="dev")this._endpoint=M8.dev.syndication.log;else if(this._environment==="stage")this._endpoint=M8.stage.syndication.log;else if(this._environment==="prod")this._endpoint=M8.prod.syndication.log;window.addEventListener("beforeunload",()=>this._flushEvents(!0))}sendEvent(A){this._queue.push(A),this._startBatchTimer()}_startBatchTimer(){let A=this._firstEvent?this._initialBatchTime:this._batchTime;if(!this._timerId)this._timerId=setTimeout(()=>this._flushEvents(),A);if(this._firstEvent)this._firstEvent=!1}_flushEvents(A=!1){if(this._queue.length>0&&this._endpoint!==null){let Q=JSON.stringify(this._queue);if(navigator.sendBeacon||A)navigator.sendBeacon(this._endpoint,Q);else fetch(this._endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:Q,keepalive:!0});if(this._queue=[],this._timerId)clearTimeout(this._timerId),this._timerId=void 0}}}var OM=(A,Q,B)=>{let C=new RegExp(Q,B),J=A.match(C);if(J&&J[1])return J[1];return null},zB=(A,Q)=>{let B=Q.string,C="";if(Q.flags)C=Q.flags;return OM(A,B,C)},DB=(A)=>{let Q=new URL(A);return["utm_source","utm_medium","utm_campaign","utm_term","utm_content","gclid","fbclid","_ga","_gl","_gac","dclid","msclkid"].forEach((C)=>{Q.searchParams.delete(C)}),Q.toString()};var k5=(A)=>{let Q=new URL(A);if(Q.hostname==="localhost"||Q.hostname==="127.0.0.1")Q.hostname="eyekandynexuslocal.com";else Q.hostname=Q.hostname.replace(/^www\./,"");return DB(Q.toString())};var VW=()=>{let A="Unknown",Q=navigator.userAgent||"";if(Q.includes("Firefox"))A="Mozilla Firefox";else if(Q.includes("SamsungBrowser"))A="Samsung Internet";else if(Q.includes("Opera")||Q.includes("OPR"))A="Opera";else if(Q.includes("Trident"))A="Microsoft Internet Explorer";else if(Q.includes("Edge"))A="Microsoft Edge";else if(Q.includes("Chrome"))A="Google Chrome";else if(Q.includes("Safari"))A="Apple Safari";return A};var UW=()=>{if(typeof window==="undefined"||typeof navigator==="undefined")return"server";let A="desktop",Q=navigator.userAgent||navigator.vendor||window.opera;if(/android/i.test(Q))A="mobile";else if(/iPad|iPhone|iPod/.test(Q)&&!window.MSStream)A="mobile";else if(/Windows Phone/.test(Q))A="mobile";if(window.innerWidth<=768)A="mobile";else A="desktop";return A};var zW=()=>{let A="Unknown",Q=navigator.userAgent||"";if(Q.includes("Windows NT 10.0"))A="Windows 10";else if(Q.includes("Windows NT 6.2")||Q.includes("Windows NT 6.3"))A="Windows 8";else if(Q.includes("Windows NT 6.1"))A="Windows 7";else if(Q.includes("Windows NT 6.0"))A="Windows Vista";else if(Q.includes("Windows NT 5.1"))A="Windows XP";else if(Q.includes("Mac OS X"))A="Mac OS X";else if(Q.includes("Linux"))A="Linux";else if(Q.includes("Android"))A="Android";else if(Q.includes("iPhone"))A="iOS";return A};class Wq{trackingUrl;deploymentID;language;queue;queueProcessInterval;userIdentifierFunction;sessionIdentifierFunction;locationFunction;identifierFunction;enabled=!1;maxEventQueueSize=20;environment=UW();browser=VW();os=zW();constructor(A,Q,B,C,J,I,q=!0,K=5000,Y=20,Z=!1){if(this.trackingUrl="https://observe-nexus.pointandplace.com",this.maxEventQueueSize=Y,this.deploymentID=A,this.language=Q,this.enabled=Z,this.queue=[],q===!0)setTimeout(()=>{this.processQueue()},1000),setTimeout(()=>{this.processQueue()},2500);if(typeof window!=="undefined")this.queueProcessInterval=window.setInterval(()=>this.processQueue(),K);else this.queueProcessInterval=setInterval(()=>this.processQueue(),K);if(this.userIdentifierFunction=B,this.sessionIdentifierFunction=C,this.identifierFunction=I,this.locationFunction=J,typeof window!=="undefined")window.addEventListener("beforeunload",()=>this.processQueue())}enable(){this.enabled=!0}disable(){this.enabled=!1}triggerEventJSDeployed(){this.triggerEventGeneral({type:"page-js-deployed"}),this.processQueue()}triggerEventPageView(A,Q={}){this.triggerEventGeneral({type:"pageview",params:A},Q)}triggerUIEvent(A,Q={}){this.triggerEventGeneral({type:"ui-event",params:A},Q)}triggerAddToCart(A,Q={}){this.triggerEventGeneral({type:"add-to-cart",params:A},Q,!0)}triggerEventGeneral(A,Q={},B=!1){if(!this.enable)return;let C={identifier:this._getIdentifier()??"",location:this._getLocation()??"",agentID:this.userIdentifierFunction()??"",sessionID:this.sessionIdentifierFunction()??"",deploymentID:this.deploymentID,language:this.language,environment:this.environment,browser:this.browser,os:this.os,variant:"core",...Q,...A};if(this.queue.push(C),this.queue.length>=this.maxEventQueueSize)this.processQueue();if(B===!0)this.processQueue()}processQueue(){if(this.queue.length>0)this.executeBatchNetworkRequest()}async executeBatchNetworkRequest(){let A=JSON.stringify(this.queue);if(this.queue=[],this.enabled===!1)return;try{if(navigator&&navigator.sendBeacon)navigator.sendBeacon(this.trackingUrl,A);else await fetch(this.trackingUrl,{headers:{"content-type":"application/json"},method:"POST",body:A})}catch(Q){console.error("Error logging batch",Q)}}_getIdentifier(){if(this.identifierFunction)return this.identifierFunction();if(document)return document.title;return""}_getLocation(){if(this.locationFunction)return this.locationFunction();if(typeof window!=="undefined")return k5(window.location.href);return""}dispose(){clearInterval(this.queueProcessInterval)}}var EB,kM=new Uint8Array(16);function Fq(){if(!EB){if(EB=typeof crypto!=="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!EB)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")}return EB(kM)}var j2=[];for(let A=0;A<256;++A)j2.push((A+256).toString(16).slice(1));function DW(A,Q=0){return j2[A[Q+0]]+j2[A[Q+1]]+j2[A[Q+2]]+j2[A[Q+3]]+"-"+j2[A[Q+4]]+j2[A[Q+5]]+"-"+j2[A[Q+6]]+j2[A[Q+7]]+"-"+j2[A[Q+8]]+j2[A[Q+9]]+"-"+j2[A[Q+10]]+j2[A[Q+11]]+j2[A[Q+12]]+j2[A[Q+13]]+j2[A[Q+14]]+j2[A[Q+15]]}var PM=typeof crypto!=="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Vq={randomUUID:PM};function _M(A,Q,B){if(Vq.randomUUID&&!Q&&!A)return Vq.randomUUID();A=A||{};let C=A.random||(A.rng||Fq)();if(C[6]=C[6]&15|64,C[8]=C[8]&63|128,Q){B=B||0;for(let J=0;J<16;++J)Q[B+J]=C[J];return Q}return DW(C)}var n4=_M;var EW=()=>{let A="Unknown",Q=navigator.userAgent||"";if(Q.includes("Firefox"))A="Mozilla Firefox";else if(Q.includes("SamsungBrowser"))A="Samsung Internet";else if(Q.includes("Opera")||Q.includes("OPR"))A="Opera";else if(Q.includes("Trident"))A="Microsoft Internet Explorer";else if(Q.includes("Edge"))A="Microsoft Edge";else if(Q.includes("Chrome"))A="Google Chrome";else if(Q.includes("Safari"))A="Apple Safari";return A};var wW=()=>{if(typeof window==="undefined"||typeof navigator==="undefined")return"server";let A="desktop",Q=navigator.userAgent||navigator.vendor||window.opera;if(/android/i.test(Q))A="mobile";else if(/iPad|iPhone|iPod/.test(Q)&&!window.MSStream)A="mobile";else if(/Windows Phone/.test(Q))A="mobile";if(window.innerWidth<=768)A="mobile";else A="desktop";return A};var NW=()=>{let A="Unknown",Q=navigator.userAgent||"";if(Q.includes("Windows NT 10.0"))A="Windows 10";else if(Q.includes("Windows NT 6.2")||Q.includes("Windows NT 6.3"))A="Windows 8";else if(Q.includes("Windows NT 6.1"))A="Windows 7";else if(Q.includes("Windows NT 6.0"))A="Windows Vista";else if(Q.includes("Windows NT 5.1"))A="Windows XP";else if(Q.includes("Mac OS X"))A="Mac OS X";else if(Q.includes("Linux"))A="Linux";else if(Q.includes("Android"))A="Android";else if(Q.includes("iPhone"))A="iOS";return A};class Uq{trackingUrl;deploymentID;language;queue;queueProcessInterval;userIdentifierFunction;sessionIdentifierFunction;locationFunction;identifierFunction;enabled=!1;maxEventQueueSize=20;environment=wW();browser=EW();os=NW();pageID=n4();constructor(A,Q,B,C,J,I,q=!0,K=5000,Y=20,Z=!1){if(this.trackingUrl="https://data.pointandplace.com/events",this.maxEventQueueSize=Y,this.deploymentID=A,this.language=Q,this.enabled=Z,this.queue=[],q===!0)setTimeout(()=>{this.processQueue()},1000),setTimeout(()=>{this.processQueue()},2500);if(typeof window!=="undefined")this.queueProcessInterval=window.setInterval(()=>this.processQueue(),K);else this.queueProcessInterval=setInterval(()=>this.processQueue(),K);if(this.userIdentifierFunction=B,this.sessionIdentifierFunction=C,this.identifierFunction=I,this.locationFunction=J,typeof window!=="undefined")window.addEventListener("beforeunload",()=>this.processQueue())}enable(){this.enabled=!0}disable(){this.enabled=!1}triggerEventJSDeployed(){this.triggerEventGeneral({type:"page-js-deployed"}),this.processQueue()}triggerEventDelivery(A,Q={}){this.triggerEventGeneral({type:"delivery",params:A},Q)}triggerEventPageView(A,Q={}){this.triggerEventGeneral({type:"pageview",params:A},Q)}triggerUIEvent(A,Q={}){this.triggerEventGeneral({type:"ui-event",params:A},Q)}triggerAddToCart(A,Q={}){this.triggerEventGeneral({type:"add-to-cart",params:A},Q,!0)}triggerEventGeneral(A,Q={},B=!1){let C={identifier:this._getIdentifier()??"",location:this._getLocation()??"",agentID:this.userIdentifierFunction()??"",sessionID:this.sessionIdentifierFunction()??"",pageID:this.pageID,deploymentID:this.deploymentID,language:this.language,environment:this.environment,referrer:document.referrer??"",browser:this.browser,os:this.os,variant:"core",event:A.params&&A.params.action?A.params.action:A.type,service:A.params&&A.params.component?A.params.component:"",productID:A.params&&A.params.productID?A.params.productID:"",parent:A.params&&A.params.parent?A.params.parent:"",match:A.params&&A.params.match?A.params.match.toString():"",detail:A.params&&A.params.detail?A.params.detail:"",...Q,...A};if(this.queue.push(C),this.queue.length>=this.maxEventQueueSize)this.processQueue();if(B===!0)this.processQueue()}processQueue(){if(this.queue.length>0)this.executeBatchNetworkRequest()}async executeBatchNetworkRequest(){let A=JSON.stringify(this.queue);if(this.queue=[],this.enabled===!1)return;try{if(navigator&&navigator.sendBeacon)navigator.sendBeacon(this.trackingUrl,A);else await fetch(this.trackingUrl,{headers:{"content-type":"application/json"},method:"POST",body:A})}catch(Q){console.error("Error logging batch",Q)}}_getIdentifier(){if(this.identifierFunction)return this.identifierFunction();if(document)return document.title;return""}_getLocation(){if(this.locationFunction)return this.locationFunction();if(typeof window!=="undefined")return k5(window.location.href);return""}dispose(){clearInterval(this.queueProcessInterval)}}var $W=Object.prototype.toString;function O8(A){switch($W.call(A)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return N4(A,Error)}}function P5(A,Q){return $W.call(A)===`[object ${Q}]`}function _5(A){return P5(A,"ErrorEvent")}function wB(A){return P5(A,"DOMError")}function zq(A){return P5(A,"DOMException")}function qA(A){return P5(A,"String")}function T5(A){return typeof A==="object"&&A!==null&&"__sentry_template_string__"in A&&"__sentry_template_values__"in A}function N6(A){return A===null||T5(A)||typeof A!=="object"&&typeof A!=="function"}function lA(A){return P5(A,"Object")}function $6(A){return typeof Event!=="undefined"&&N4(A,Event)}function Dq(A){return typeof Element!=="undefined"&&N4(A,Element)}function Eq(A){return P5(A,"RegExp")}function w4(A){return Boolean(A&&A.then&&typeof A.then==="function")}function wq(A){return lA(A)&&"nativeEvent"in A&&"preventDefault"in A&&"stopPropagation"in A}function Nq(A){return typeof A==="number"&&A!==A}function N4(A,Q){try{return A instanceof Q}catch(B){return!1}}function k8(A){return!!(typeof A==="object"&&A!==null&&(A.__isVue||A._isVue))}function $4(A,Q=0){if(typeof A!=="string"||Q===0)return A;return A.length<=Q?A:`${A.slice(0,Q)}...`}function NB(A,Q){if(!Array.isArray(A))return"";let B=[];for(let C=0;C<A.length;C++){let J=A[C];try{if(k8(J))B.push("[VueViewModel]");else B.push(String(J))}catch(I){B.push("[value cannot be serialized]")}}return B.join(Q)}function RW(A,Q,B=!1){if(!qA(A))return!1;if(Eq(Q))return Q.test(A);if(qA(Q))return B?A===Q:A.includes(Q);return!1}function j5(A,Q=[],B=!1){return Q.some((C)=>RW(A,C,B))}function P8(A,Q,B=250,C,J,I,q){if(!I.exception||!I.exception.values||!q||!N4(q.originalException,Error))return;let K=I.exception.values.length>0?I.exception.values[I.exception.values.length-1]:void 0;if(K)I.exception.values=TM($q(A,Q,J,q.originalException,C,I.exception.values,K,0),B)}function $q(A,Q,B,C,J,I,q,K){if(I.length>=B+1)return I;let Y=[...I];if(N4(C[J],Error)){LW(q,K);let Z=A(Q,C[J]),H=Y.length;MW(Z,J,H,K),Y=$q(A,Q,B,C[J],J,[Z,...Y],Z,H)}if(Array.isArray(C.errors))C.errors.forEach((Z,H)=>{if(N4(Z,Error)){LW(q,K);let G=A(Q,Z),W=Y.length;MW(G,`errors[${H}]`,W,K),Y=$q(A,Q,B,Z,J,[G,...Y],G,W)}});return Y}function LW(A,Q){A.mechanism=A.mechanism||{type:"generic",handled:!0},A.mechanism={...A.mechanism,...A.type==="AggregateError"&&{is_exception_group:!0},exception_id:Q}}function MW(A,Q,B,C){A.mechanism=A.mechanism||{type:"generic",handled:!0},A.mechanism={...A.mechanism,type:"chained",source:Q,exception_id:B,parent_id:C}}function TM(A,Q){return A.map((B)=>{if(B.value)B.value=$4(B.value,Q);return B})}function $B(A){return A&&A.Math==Math?A:void 0}var a0=typeof globalThis=="object"&&$B(globalThis)||typeof window=="object"&&$B(window)||typeof self=="object"&&$B(self)||typeof global=="object"&&$B(global)||function(){return this}()||{};function R6(){return a0}function _8(A,Q,B){let C=B||a0,J=C.__SENTRY__=C.__SENTRY__||{};return J[A]||(J[A]=Q())}var Rq=R6(),jM=80;function T8(A,Q={}){if(!A)return"<unknown>";try{let B=A,C=5,J=[],I=0,q=0,K=" > ",Y=K.length,Z,H=Array.isArray(Q)?Q:Q.keyAttrs,G=!Array.isArray(Q)&&Q.maxStringLength||jM;while(B&&I++<C){if(Z=SM(B,H),Z==="html"||I>1&&q+J.length*Y+Z.length>=G)break;J.push(Z),q+=Z.length,B=B.parentNode}return J.reverse().join(K)}catch(B){return"<unknown>"}}function SM(A,Q){let B=A,C=[],J,I,q,K,Y;if(!B||!B.tagName)return"";if(Rq.HTMLElement){if(B instanceof HTMLElement&&B.dataset&&B.dataset.sentryComponent)return B.dataset.sentryComponent}C.push(B.tagName.toLowerCase());let Z=Q&&Q.length?Q.filter((G)=>B.getAttribute(G)).map((G)=>[G,B.getAttribute(G)]):null;if(Z&&Z.length)Z.forEach((G)=>{C.push(`[${G[0]}="${G[1]}"]`)});else{if(B.id)C.push(`#${B.id}`);if(J=B.className,J&&qA(J)){I=J.split(/\s+/);for(Y=0;Y<I.length;Y++)C.push(`.${I[Y]}`)}}let H=["aria-label","type","name","title","alt"];for(Y=0;Y<H.length;Y++)if(q=H[Y],K=B.getAttribute(q),K)C.push(`[${q}="${K}"]`);return C.join("")}function Lq(){try{return Rq.document.location.href}catch(A){return""}}function Mq(A){if(!Rq.HTMLElement)return null;let Q=A,B=5;for(let C=0;C<B;C++){if(!Q)return null;if(Q instanceof HTMLElement&&Q.dataset.sentryComponent)return Q.dataset.sentryComponent;Q=Q.parentNode}return null}var R4=typeof __SENTRY_DEBUG__==="undefined"||__SENTRY_DEBUG__;var yM="Sentry Logger ",j8=["debug","info","warn","error","log","assert","trace"],S5={};function h3(A){if(!("console"in a0))return A();let Q=a0.console,B={},C=Object.keys(S5);C.forEach((J)=>{let I=S5[J];B[J]=Q[J],Q[J]=I});try{return A()}finally{C.forEach((J)=>{Q[J]=B[J]})}}function fM(){let A=!1,Q={enable:()=>{A=!0},disable:()=>{A=!1},isEnabled:()=>A};if(R4)j8.forEach((B)=>{Q[B]=(...C)=>{if(A)h3(()=>{a0.console[B](`${yM}[${B}]:`,...C)})}});else j8.forEach((B)=>{Q[B]=()=>{return}});return Q}var k0=fM();var hM=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function xM(A){return A==="http"||A==="https"}function kA(A,Q=!1){let{host:B,path:C,pass:J,port:I,projectId:q,protocol:K,publicKey:Y}=A;return`${K}://${Y}${Q&&J?`:${J}`:""}@${B}${I?`:${I}`:""}/${C?`${C}/`:C}${q}`}function OW(A){let Q=hM.exec(A);if(!Q){h3(()=>{console.error(`Invalid Sentry Dsn: ${A}`)});return}let[B,C,J="",I,q="",K]=Q.slice(1),Y="",Z=K,H=Z.split("/");if(H.length>1)Y=H.slice(0,-1).join("/"),Z=H.pop();if(Z){let G=Z.match(/^\d+/);if(G)Z=G[0]}return kW({host:I,pass:J,path:Y,projectId:Z,port:q,protocol:B,publicKey:C})}function kW(A){return{protocol:A.protocol,publicKey:A.publicKey||"",pass:A.pass||"",host:A.host,port:A.port||"",path:A.path||"",projectId:A.projectId}}function gM(A){if(!R4)return!0;let{port:Q,projectId:B,protocol:C}=A;if(["protocol","publicKey","host","projectId"].find((q)=>{if(!A[q])return k0.error(`Invalid Sentry Dsn: ${q} missing`),!0;return!1}))return!1;if(!B.match(/^\d+$/))return k0.error(`Invalid Sentry Dsn: Invalid projectId ${B}`),!1;if(!xM(C))return k0.error(`Invalid Sentry Dsn: Invalid protocol ${C}`),!1;if(Q&&isNaN(parseInt(Q,10)))return k0.error(`Invalid Sentry Dsn: Invalid port ${Q}`),!1;return!0}function RB(A){let Q=typeof A==="string"?OW(A):kW(A);if(!Q||!gM(Q))return;return Q}class n2 extends Error{constructor(A,Q="warn"){super(A);this.message=A,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=Q}}function d1(A,Q,B){if(!(Q in A))return;let C=A[Q],J=B(C);if(typeof J==="function")LB(J,C);A[Q]=J}function o4(A,Q,B){try{Object.defineProperty(A,Q,{value:B,writable:!0,configurable:!0})}catch(C){R4&&k0.log(`Failed to add non-enumerable property "${Q}" to object`,A)}}function LB(A,Q){try{let B=Q.prototype||{};A.prototype=Q.prototype=B,o4(A,"__sentry_original__",Q)}catch(B){}}function L6(A){return A.__sentry_original__}function kq(A){return Object.keys(A).map((Q)=>`${encodeURIComponent(Q)}=${encodeURIComponent(A[Q])}`).join("&")}function MB(A){if(O8(A))return{message:A.message,name:A.name,stack:A.stack,..._W(A)};else if($6(A)){let Q={type:A.type,target:PW(A.target),currentTarget:PW(A.currentTarget),..._W(A)};if(typeof CustomEvent!=="undefined"&&N4(A,CustomEvent))Q.detail=A.detail;return Q}else return A}function PW(A){try{return Dq(A)?T8(A):Object.prototype.toString.call(A)}catch(Q){return"<unknown>"}}function _W(A){if(typeof A==="object"&&A!==null){let Q={};for(let B in A)if(Object.prototype.hasOwnProperty.call(A,B))Q[B]=A[B];return Q}else return{}}function Pq(A,Q=40){let B=Object.keys(MB(A));if(B.sort(),!B.length)return"[object has no keys]";if(B[0].length>=Q)return $4(B[0],Q);for(let C=B.length;C>0;C--){let J=B.slice(0,C).join(", ");if(J.length>Q)continue;if(C===B.length)return J;return $4(J,Q)}return""}function o2(A){return Oq(A,new Map)}function Oq(A,Q){if(vM(A)){let B=Q.get(A);if(B!==void 0)return B;let C={};Q.set(A,C);for(let J of Object.keys(A))if(typeof A[J]!=="undefined")C[J]=Oq(A[J],Q);return C}if(Array.isArray(A)){let B=Q.get(A);if(B!==void 0)return B;let C=[];return Q.set(A,C),A.forEach((J)=>{C.push(Oq(J,Q))}),C}return A}function vM(A){if(!lA(A))return!1;try{let Q=Object.getPrototypeOf(A).constructor.name;return!Q||Q==="Object"}catch(Q){return!0}}var SW=50,TW=/\(error: (.*)\)/,jW=/captureMessage|captureException/;function OB(...A){let Q=A.sort((B,C)=>B[0]-C[0]).map((B)=>B[1]);return(B,C=0)=>{let J=[],I=B.split("\n");for(let q=C;q<I.length;q++){let K=I[q];if(K.length>1024)continue;let Y=TW.test(K)?K.replace(TW,"$1"):K;if(Y.match(/\S*Error: /))continue;for(let Z of Q){let H=Z(Y);if(H){J.push(H);break}}if(J.length>=SW)break}return yW(J)}}function Tq(A){if(Array.isArray(A))return OB(...A);return A}function yW(A){if(!A.length)return[];let Q=Array.from(A);if(/sentryWrapped/.test(Q[Q.length-1].function||""))Q.pop();if(Q.reverse(),jW.test(Q[Q.length-1].function||"")){if(Q.pop(),jW.test(Q[Q.length-1].function||""))Q.pop()}return Q.slice(0,SW).map((B)=>({...B,filename:B.filename||Q[Q.length-1].filename,function:B.function||"?"}))}var _q="<anonymous>";function PA(A){try{if(!A||typeof A!=="function")return _q;return A.name||_q}catch(Q){return _q}}var kB={},fW={};function KA(A,Q){kB[A]=kB[A]||[],kB[A].push(Q)}function YA(A,Q){if(!fW[A])Q(),fW[A]=!0}function E2(A,Q){let B=A&&kB[A];if(!B)return;for(let C of B)try{C(Q)}catch(J){R4&&k0.error(`Error while triggering instrumentation handler.\nType: ${A}\nName: ${PA(C)}\nError:`,J)}}function jq(A){KA("console",A),YA("console",bM)}function bM(){if(!("console"in a0))return;j8.forEach(function(A){if(!(A in a0.console))return;d1(a0.console,A,function(Q){return S5[A]=Q,function(...B){E2("console",{args:B,level:A});let J=S5[A];J&&J.apply(a0.console,B)}})})}function J2(){let A=a0,Q=A.crypto||A.msCrypto,B=()=>Math.random()*16;try{if(Q&&Q.randomUUID)return Q.randomUUID().replace(/-/g,"");if(Q&&Q.getRandomValues)B=()=>{let C=new Uint8Array(1);return Q.getRandomValues(C),C[0]}}catch(C){}return([1e7]+1000+4000+8000+100000000000).replace(/[018]/g,(C)=>(C^(B()&15)>>C/4).toString(16))}function hW(A){return A.exception&&A.exception.values?A.exception.values[0]:void 0}function sA(A){let{message:Q,event_id:B}=A;if(Q)return Q;let C=hW(A);if(C){if(C.type&&C.value)return`${C.type}: ${C.value}`;return C.type||C.value||B||"<unknown>"}return B||"<unknown>"}function y5(A,Q,B){let C=A.exception=A.exception||{},J=C.values=C.values||[],I=J[0]=J[0]||{};if(!I.value)I.value=Q||"";if(!I.type)I.type=B||"Error"}function a4(A,Q){let B=hW(A);if(!B)return;let C={type:"generic",handled:!0},J=B.mechanism;if(B.mechanism={...C,...J,...Q},Q&&"data"in Q){let I={...J&&J.data,...Q.data};B.mechanism.data=I}}function PB(A){if(A&&A.__sentry_captured__)return!0;try{o4(A,"__sentry_captured__",!0)}catch(Q){}return!1}function S8(A){return Array.isArray(A)?A:[A]}var f5=a0,uM=1000,xW,Sq,yq;function fq(A){KA("dom",A),YA("dom",pM)}function pM(){if(!f5.document)return;let A=E2.bind(null,"dom"),Q=gW(A,!0);f5.document.addEventListener("click",Q,!1),f5.document.addEventListener("keypress",Q,!1),["EventTarget","Node"].forEach((B)=>{let C=f5[B]&&f5[B].prototype;if(!C||!C.hasOwnProperty||!C.hasOwnProperty("addEventListener"))return;d1(C,"addEventListener",function(J){return function(I,q,K){if(I==="click"||I=="keypress")try{let Y=this,Z=Y.__sentry_instrumentation_handlers__=Y.__sentry_instrumentation_handlers__||{},H=Z[I]=Z[I]||{refCount:0};if(!H.handler){let G=gW(A);H.handler=G,J.call(this,I,G,K)}H.refCount++}catch(Y){}return J.call(this,I,q,K)}}),d1(C,"removeEventListener",function(J){return function(I,q,K){if(I==="click"||I=="keypress")try{let Y=this,Z=Y.__sentry_instrumentation_handlers__||{},H=Z[I];if(H){if(H.refCount--,H.refCount<=0)J.call(this,I,H.handler,K),H.handler=void 0,delete Z[I];if(Object.keys(Z).length===0)delete Y.__sentry_instrumentation_handlers__}}catch(Y){}return J.call(this,I,q,K)}})})}function mM(A){if(A.type!==Sq)return!1;try{if(!A.target||A.target._sentryId!==yq)return!1}catch(Q){}return!0}function dM(A,Q){if(A!=="keypress")return!1;if(!Q||!Q.tagName)return!0;if(Q.tagName==="INPUT"||Q.tagName==="TEXTAREA"||Q.isContentEditable)return!1;return!0}function gW(A,Q=!1){return(B)=>{if(!B||B._sentryCaptured)return;let C=cM(B);if(dM(B.type,C))return;if(o4(B,"_sentryCaptured",!0),C&&!C._sentryId)o4(C,"_sentryId",J2());let J=B.type==="keypress"?"input":B.type;if(!mM(B))A({event:B,name:J,global:Q}),Sq=B.type,yq=C?C._sentryId:void 0;clearTimeout(xW),xW=f5.setTimeout(()=>{yq=void 0,Sq=void 0},uM)}}function cM(A){try{return A.target}catch(Q){return null}}var hq=R6();function _B(){if(!("fetch"in hq))return!1;try{return new Request("http://www.example.com"),!0}catch(A){return!1}}function y8(A){return A&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(A.toString())}function xq(){if(typeof EdgeRuntime==="string")return!0;if(!_B())return!1;if(y8(hq.fetch))return!0;let A=!1,Q=hq.document;if(Q&&typeof Q.createElement==="function")try{let B=Q.createElement("iframe");if(B.hidden=!0,Q.head.appendChild(B),B.contentWindow&&B.contentWindow.fetch)A=y8(B.contentWindow.fetch);Q.head.removeChild(B)}catch(B){R4&&k0.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",B)}return A}function vq(A){KA("fetch",A),YA("fetch",lM)}function lM(){if(!xq())return;d1(a0,"fetch",function(A){return function(...Q){let{method:B,url:C}=sM(Q),J={args:Q,fetchData:{method:B,url:C},startTimestamp:Date.now()};return E2("fetch",{...J}),A.apply(a0,Q).then((I)=>{let q={...J,endTimestamp:Date.now(),response:I};return E2("fetch",q),I},(I)=>{let q={...J,endTimestamp:Date.now(),error:I};throw E2("fetch",q),I})}})}function gq(A,Q){return!!A&&typeof A==="object"&&!!A[Q]}function vW(A){if(typeof A==="string")return A;if(!A)return"";if(gq(A,"url"))return A.url;if(A.toString)return A.toString();return""}function sM(A){if(A.length===0)return{method:"GET",url:""};if(A.length===2){let[B,C]=A;return{url:vW(B),method:gq(C,"method")?String(C.method).toUpperCase():"GET"}}let Q=A[0];return{url:vW(Q),method:gq(Q,"method")?String(Q.method).toUpperCase():"GET"}}var TB=null;function bq(A){KA("error",A),YA("error",iM)}function iM(){TB=a0.onerror,a0.onerror=function(A,Q,B,C,J){if(E2("error",{column:C,error:J,line:B,msg:A,url:Q}),TB&&!TB.__SENTRY_LOADER__)return TB.apply(this,arguments);return!1},a0.onerror.__SENTRY_INSTRUMENTED__=!0}var jB=null;function uq(A){KA("unhandledrejection",A),YA("unhandledrejection",nM)}function nM(){jB=a0.onunhandledrejection,a0.onunhandledrejection=function(A){if(E2("unhandledrejection",A),jB&&!jB.__SENTRY_LOADER__)return jB.apply(this,arguments);return!0},a0.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}var SB=R6();function bW(){let A=SB.chrome,Q=A&&A.app&&A.app.runtime,B="history"in SB&&!!SB.history.pushState&&!!SB.history.replaceState;return!Q&&B}var f8=a0,yB;function h8(A){KA("history",A),YA("history",oM)}function oM(){if(!bW())return;let A=f8.onpopstate;f8.onpopstate=function(...B){let C=f8.location.href,J=yB;if(yB=C,E2("history",{from:J,to:C}),A)try{return A.apply(this,B)}catch(q){}};function Q(B){return function(...C){let J=C.length>2?C[2]:void 0;if(J){let I=yB,q=String(J);yB=q,E2("history",{from:I,to:q})}return B.apply(this,C)}}d1(f8.history,"pushState",Q),d1(f8.history,"replaceState",Q)}var aM=a0,M6="__sentry_xhr_v3__";function pq(A){KA("xhr",A),YA("xhr",rM)}function rM(){if(!aM.XMLHttpRequest)return;let A=XMLHttpRequest.prototype;d1(A,"open",function(Q){return function(...B){let C=Date.now(),J=qA(B[0])?B[0].toUpperCase():void 0,I=tM(B[1]);if(!J||!I)return Q.apply(this,B);if(this[M6]={method:J,url:I,request_headers:{}},J==="POST"&&I.match(/sentry_key/))this.__sentry_own_request__=!0;let q=()=>{let K=this[M6];if(!K)return;if(this.readyState===4){try{K.status_code=this.status}catch(Z){}let Y={args:[J,I],endTimestamp:Date.now(),startTimestamp:C,xhr:this};E2("xhr",Y)}};if("onreadystatechange"in this&&typeof this.onreadystatechange==="function")d1(this,"onreadystatechange",function(K){return function(...Y){return q(),K.apply(this,Y)}});else this.addEventListener("readystatechange",q);return d1(this,"setRequestHeader",function(K){return function(...Y){let[Z,H]=Y,G=this[M6];if(G&&qA(Z)&&qA(H))G.request_headers[Z.toLowerCase()]=H;return K.apply(this,Y)}}),Q.apply(this,B)}}),d1(A,"send",function(Q){return function(...B){let C=this[M6];if(!C)return Q.apply(this,B);if(B[0]!==void 0)C.body=B[0];let J={args:[C.method,C.url],startTimestamp:Date.now(),xhr:this};return E2("xhr",J),Q.apply(this,B)}})}function tM(A){if(qA(A))return A;try{return A.toString()}catch(Q){}return}function mq(){return"npm"}function uW(){let A=typeof WeakSet==="function",Q=A?new WeakSet:[];function B(J){if(A){if(Q.has(J))return!0;return Q.add(J),!1}for(let I=0;I<Q.length;I++)if(Q[I]===J)return!0;return Q.push(J),!1}function C(J){if(A)Q.delete(J);else for(let I=0;I<Q.length;I++)if(Q[I]===J){Q.splice(I,1);break}}return[B,C]}function iA(A,Q=100,B=1/0){try{return fB("",A,Q,B)}catch(C){return{ERROR:`**non-serializable** (${C})`}}}function hB(A,Q=3,B=102400){let C=iA(A,Q);if(BO(C)>B)return hB(A,Q-1,B);return C}function fB(A,Q,B=1/0,C=1/0,J=uW()){let[I,q]=J;if(Q==null||["number","boolean","string"].includes(typeof Q)&&!Nq(Q))return Q;let K=eM(A,Q);if(!K.startsWith("[object "))return K;if(Q.__sentry_skip_normalization__)return Q;let Y=typeof Q.__sentry_override_normalization_depth__==="number"?Q.__sentry_override_normalization_depth__:B;if(Y===0)return K.replace("object ","");if(I(Q))return"[Circular ~]";let Z=Q;if(Z&&typeof Z.toJSON==="function")try{let F=Z.toJSON();return fB("",F,Y-1,C,J)}catch(F){}let H=Array.isArray(Q)?[]:{},G=0,W=MB(Q);for(let F in W){if(!Object.prototype.hasOwnProperty.call(W,F))continue;if(G>=C){H[F]="[MaxProperties ~]";break}let z=W[F];H[F]=fB(F,z,Y-1,C,J),G++}return q(Q),H}function eM(A,Q){try{if(A==="domain"&&Q&&typeof Q==="object"&&Q._events)return"[Domain]";if(A==="domainEmitter")return"[DomainEmitter]";if(typeof global!=="undefined"&&Q===global)return"[Global]";if(typeof window!=="undefined"&&Q===window)return"[Window]";if(typeof document!=="undefined"&&Q===document)return"[Document]";if(k8(Q))return"[VueViewModel]";if(wq(Q))return"[SyntheticEvent]";if(typeof Q==="number"&&Q!==Q)return"[NaN]";if(typeof Q==="function")return`[Function: ${PA(Q)}]`;if(typeof Q==="symbol")return`[${String(Q)}]`;if(typeof Q==="bigint")return`[BigInt: ${String(Q)}]`;let B=AO(Q);if(/^HTML(\w*)Element$/.test(B))return`[HTMLElement: ${B}]`;return`[object ${B}]`}catch(B){return`**non-serializable** (${B})`}}function AO(A){let Q=Object.getPrototypeOf(A);return Q?Q.constructor.name:"null prototype"}function QO(A){return~-encodeURI(A).split(/%..|./).length}function BO(A){return QO(JSON.stringify(A))}var r4;(function(A){A[A.PENDING=0]="PENDING";let B=1;A[A.RESOLVED=B]="RESOLVED";let C=2;A[A.REJECTED=C]="REJECTED"})(r4||(r4={}));function nA(A){return new w2((Q)=>{Q(A)})}function O6(A){return new w2((Q,B)=>{B(A)})}class w2{constructor(A){w2.prototype.__init.call(this),w2.prototype.__init2.call(this),w2.prototype.__init3.call(this),w2.prototype.__init4.call(this),this._state=r4.PENDING,this._handlers=[];try{A(this._resolve,this._reject)}catch(Q){this._reject(Q)}}then(A,Q){return new w2((B,C)=>{this._handlers.push([!1,(J)=>{if(!A)B(J);else try{B(A(J))}catch(I){C(I)}},(J)=>{if(!Q)C(J);else try{B(Q(J))}catch(I){C(I)}}]),this._executeHandlers()})}catch(A){return this.then((Q)=>Q,A)}finally(A){return new w2((Q,B)=>{let C,J;return this.then((I)=>{if(J=!1,C=I,A)A()},(I)=>{if(J=!0,C=I,A)A()}).then(()=>{if(J){B(C);return}Q(C)})})}__init(){this._resolve=(A)=>{this._setResult(r4.RESOLVED,A)}}__init2(){this._reject=(A)=>{this._setResult(r4.REJECTED,A)}}__init3(){this._setResult=(A,Q)=>{if(this._state!==r4.PENDING)return;if(w4(Q)){Q.then(this._resolve,this._reject);return}this._state=A,this._value=Q,this._executeHandlers()}}__init4(){this._executeHandlers=()=>{if(this._state===r4.PENDING)return;let A=this._handlers.slice();this._handlers=[],A.forEach((Q)=>{if(Q[0])return;if(this._state===r4.RESOLVED)Q[1](this._value);if(this._state===r4.REJECTED)Q[2](this._value);Q[0]=!0})}}}function dq(A){let Q=[];function B(){return A===void 0||Q.length<A}function C(q){return Q.splice(Q.indexOf(q),1)[0]}function J(q){if(!B())return O6(new n2("Not adding Promise because buffer limit was reached."));let K=q();if(Q.indexOf(K)===-1)Q.push(K);return K.then(()=>C(K)).then(null,()=>C(K).then(null,()=>{})),K}function I(q){return new w2((K,Y)=>{let Z=Q.length;if(!Z)return K(!0);let H=setTimeout(()=>{if(q&&q>0)K(!1)},q);Q.forEach((G)=>{nA(G).then(()=>{if(!--Z)clearTimeout(H),K(!0)},Y)})})}return{$:Q,add:J,drain:I}}function x8(A){if(!A)return{};let Q=A.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!Q)return{};let B=Q[6]||"",C=Q[8]||"";return{host:Q[4],path:Q[5],protocol:Q[2],search:B,hash:C,relative:Q[5]+B+C}}var pW=["fatal","error","warning","log","info","debug"];function cq(A){return A==="warn"?"warning":pW.includes(A)?A:"log"}var mW=1000;function L4(){return Date.now()/mW}function CO(){let{performance:A}=a0;if(!A||!A.now)return L4;let Q=Date.now()-A.now(),B=A.timeOrigin==null?Q:A.timeOrigin;return()=>{return(B+A.now())/mW}}var h5=CO();var g8,JO=(()=>{let{performance:A}=a0;if(!A||!A.now){g8="none";return}let Q=3600000,B=A.now(),C=Date.now(),J=A.timeOrigin?Math.abs(A.timeOrigin+B-C):Q,I=J<Q,q=A.timing&&A.timing.navigationStart,Y=typeof q==="number"?Math.abs(q+B-C):Q,Z=Y<Q;if(I||Z)if(J<=Y)return g8="timeOrigin",A.timeOrigin;else return g8="navigationStart",q;return g8="dateNow",C})();function _A(A,Q=[]){return[A,Q]}function sq(A,Q){let[B,C]=A;return[B,[...C,Q]]}function xB(A,Q){let B=A[1];for(let C of B){let J=C[0].type;if(Q(C,J))return!0}return!1}function lq(A,Q){return(Q||new TextEncoder).encode(A)}function iq(A,Q){let[B,C]=A,J=JSON.stringify(B);function I(q){if(typeof J==="string")J=typeof q==="string"?J+q:[lq(J,Q),q];else J.push(typeof q==="string"?lq(q,Q):q)}for(let q of C){let[K,Y]=q;if(I(`\n${JSON.stringify(K)}\n`),typeof Y==="string"||Y instanceof Uint8Array)I(Y);else{let Z;try{Z=JSON.stringify(Y)}catch(H){Z=JSON.stringify(iA(Y))}I(Z)}}return typeof J==="string"?J:IO(J)}function IO(A){let Q=A.reduce((J,I)=>J+I.length,0),B=new Uint8Array(Q),C=0;for(let J of A)B.set(J,C),C+=J.length;return B}function nq(A,Q){let B=typeof A.data==="string"?lq(A.data,Q):A.data;return[o2({type:"attachment",length:B.length,filename:A.filename,content_type:A.contentType,attachment_type:A.attachmentType}),B]}var qO={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function gB(A){return qO[A]}function vB(A){if(!A||!A.sdk)return;let{name:Q,version:B}=A.sdk;return{name:Q,version:B}}function oq(A,Q,B,C){let J=A.sdkProcessingMetadata&&A.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:A.event_id,sent_at:new Date().toISOString(),...Q&&{sdk:Q},...!!B&&C&&{dsn:kA(C)},...J&&{trace:o2({...J})}}}function aq(A,Q,B){let C=[{type:"client_report"},{timestamp:B||L4(),discarded_events:A}];return _A(Q?{dsn:Q}:{},[C])}function dW(A,Q=Date.now()){let B=parseInt(`${A}`,10);if(!isNaN(B))return B*1000;let C=Date.parse(`${A}`);if(!isNaN(C))return C-Q;return 60000}function cW(A,Q){return A[Q]||A.all||0}function rq(A,Q,B=Date.now()){return cW(A,Q)>B}function tq(A,{statusCode:Q,headers:B},C=Date.now()){let J={...A},I=B&&B["x-sentry-rate-limits"],q=B&&B["retry-after"];if(I)for(let K of I.trim().split(",")){let[Y,Z,,,H]=K.split(":",5),G=parseInt(Y,10),W=(!isNaN(G)?G:60)*1000;if(!Z)J.all=C+W;else for(let F of Z.split(";"))if(F==="metric_bucket"){if(!H||H.split(";").includes("custom"))J[F]=C+W}else J[F]=C+W}else if(q)J.all=C+dW(q,C);else if(Q===429)J.all=C+60000;return J}function lW(A,Q){return A(Q.stack||"",1)}function eq(A,Q){let B={type:Q.name||Q.constructor.name,value:Q.message},C=lW(A,Q);if(C.length)B.stacktrace={frames:C};return B}var N1=typeof __SENTRY_DEBUG__==="undefined"||__SENTRY_DEBUG__;var x3="production";function v8(){return _8("globalEventProcessors",()=>[])}function AK(A){v8().push(A)}function x5(A,Q,B,C=0){return new w2((J,I)=>{let q=A[C];if(Q===null||typeof q!=="function")J(Q);else{let K=q({...Q},B);if(N1&&q.id&&K===null&&k0.log(`Event processor "${q.id}" dropped event`),w4(K))K.then((Y)=>x5(A,Y,B,C+1).then(J)).then(null,I);else x5(A,K,B,C+1).then(J).then(null,I)}})}function bB(A){let Q=h5(),B={sid:J2(),init:!0,timestamp:Q,started:Q,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>KO(B)};if(A)oA(B,A);return B}function oA(A,Q={}){if(Q.user){if(!A.ipAddress&&Q.user.ip_address)A.ipAddress=Q.user.ip_address;if(!A.did&&!Q.did)A.did=Q.user.id||Q.user.email||Q.user.username}if(A.timestamp=Q.timestamp||h5(),Q.abnormal_mechanism)A.abnormal_mechanism=Q.abnormal_mechanism;if(Q.ignoreDuration)A.ignoreDuration=Q.ignoreDuration;if(Q.sid)A.sid=Q.sid.length===32?Q.sid:J2();if(Q.init!==void 0)A.init=Q.init;if(!A.did&&Q.did)A.did=`${Q.did}`;if(typeof Q.started==="number")A.started=Q.started;if(A.ignoreDuration)A.duration=void 0;else if(typeof Q.duration==="number")A.duration=Q.duration;else{let B=A.timestamp-A.started;A.duration=B>=0?B:0}if(Q.release)A.release=Q.release;if(Q.environment)A.environment=Q.environment;if(!A.ipAddress&&Q.ipAddress)A.ipAddress=Q.ipAddress;if(!A.userAgent&&Q.userAgent)A.userAgent=Q.userAgent;if(typeof Q.errors==="number")A.errors=Q.errors;if(Q.status)A.status=Q.status}function uB(A,Q){let B={};if(Q)B={status:Q};else if(A.status==="ok")B={status:"exited"};oA(A,B)}function KO(A){return o2({sid:`${A.sid}`,init:A.init,started:new Date(A.started*1000).toISOString(),timestamp:new Date(A.timestamp*1000).toISOString(),status:A.status,errors:A.errors,did:typeof A.did==="number"||typeof A.did==="string"?`${A.did}`:void 0,duration:A.duration,abnormal_mechanism:A.abnormal_mechanism,attrs:{release:A.release,environment:A.environment,ip_address:A.ipAddress,user_agent:A.userAgent}})}var YO=1;function sW(A){let{spanId:Q,traceId:B}=A.spanContext(),{data:C,op:J,parent_span_id:I,status:q,tags:K,origin:Y}=g3(A);return o2({data:C,op:J,parent_span_id:I,span_id:Q,status:q,tags:K,trace_id:B,origin:Y})}function g3(A){if(ZO(A))return A.getSpanJSON();if(typeof A.toJSON==="function")return A.toJSON();return{}}function ZO(A){return typeof A.getSpanJSON==="function"}function iW(A){let{traceFlags:Q}=A.spanContext();return Boolean(Q&YO)}function oW(A,Q,B,C,J,I){let{normalizeDepth:q=3,normalizeMaxBreadth:K=1000}=A,Y={...Q,event_id:Q.event_id||B.event_id||J2(),timestamp:Q.timestamp||L4()},Z=B.integrations||A.integrations.map((E)=>E.name);if(HO(Y,A),WO(Y,Z),Q.type===void 0)XO(Y,A.stackParser);let H=VO(C,B.captureContext);if(B.mechanism)a4(Y,B.mechanism);let G=J&&J.getEventProcessors?J.getEventProcessors():[],W=rW().getScopeData();if(I){let E=I.getScopeData();QK(W,E)}if(H){let E=H.getScopeData();QK(W,E)}let F=[...B.attachments||[],...W.attachments];if(F.length)B.attachments=F;pB(Y,W);let z=[...G,...v8(),...W.eventProcessors];return x5(z,Y,B).then((E)=>{if(E)GO(E);if(typeof q==="number"&&q>0)return FO(E,q,K);return E})}function HO(A,Q){let{environment:B,release:C,dist:J,maxValueLength:I=250}=Q;if(!("environment"in A))A.environment="environment"in Q?B:x3;if(A.release===void 0&&C!==void 0)A.release=C;if(A.dist===void 0&&J!==void 0)A.dist=J;if(A.message)A.message=$4(A.message,I);let q=A.exception&&A.exception.values&&A.exception.values[0];if(q&&q.value)q.value=$4(q.value,I);let K=A.request;if(K&&K.url)K.url=$4(K.url,I)}var nW=new WeakMap;function XO(A,Q){let B=a0._sentryDebugIds;if(!B)return;let C,J=nW.get(Q);if(J)C=J;else C=new Map,nW.set(Q,C);let I=Object.keys(B).reduce((q,K)=>{let Y,Z=C.get(K);if(Z)Y=Z;else Y=Q(K),C.set(K,Y);for(let H=Y.length-1;H>=0;H--){let G=Y[H];if(G.filename){q[G.filename]=B[K];break}}return q},{});try{A.exception.values.forEach((q)=>{q.stacktrace.frames.forEach((K)=>{if(K.filename)K.debug_id=I[K.filename]})})}catch(q){}}function GO(A){let Q={};try{A.exception.values.forEach((C)=>{C.stacktrace.frames.forEach((J)=>{if(J.debug_id){if(J.abs_path)Q[J.abs_path]=J.debug_id;else if(J.filename)Q[J.filename]=J.debug_id;delete J.debug_id}})})}catch(C){}if(Object.keys(Q).length===0)return;A.debug_meta=A.debug_meta||{},A.debug_meta.images=A.debug_meta.images||[];let B=A.debug_meta.images;Object.keys(Q).forEach((C)=>{B.push({type:"sourcemap",code_file:C,debug_id:Q[C]})})}function WO(A,Q){if(Q.length>0)A.sdk=A.sdk||{},A.sdk.integrations=[...A.sdk.integrations||[],...Q]}function FO(A,Q,B){if(!A)return null;let C={...A,...A.breadcrumbs&&{breadcrumbs:A.breadcrumbs.map((J)=>({...J,...J.data&&{data:iA(J.data,Q,B)}}))},...A.user&&{user:iA(A.user,Q,B)},...A.contexts&&{contexts:iA(A.contexts,Q,B)},...A.extra&&{extra:iA(A.extra,Q,B)}};if(A.contexts&&A.contexts.trace&&C.contexts){if(C.contexts.trace=A.contexts.trace,A.contexts.trace.data)C.contexts.trace.data=iA(A.contexts.trace.data,Q,B)}if(A.spans)C.spans=A.spans.map((J)=>{let I=g3(J).data;if(I)J.data=iA(I,Q,B);return J});return C}function VO(A,Q){if(!Q)return A;let B=A?A.clone():new TA;return B.update(Q),B}function aW(A){if(!A)return;if(UO(A))return{captureContext:A};if(DO(A))return{captureContext:A};return A}function UO(A){return A instanceof TA||typeof A==="function"}var zO=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function DO(A){return Object.keys(A).some((Q)=>zO.includes(Q))}function g5(A,Q){return ZA().captureException(A,aW(Q))}function b8(A,Q){return ZA().captureEvent(A,Q)}function M4(A,Q){ZA().addBreadcrumb(A,Q)}function mB(...A){let Q=ZA();if(A.length===2){let[B,C]=A;if(!B)return Q.withScope(C);return Q.withScope(()=>{return Q.getStackTop().scope=B,C(B)})}return Q.withScope(A[0])}function a1(){return ZA().getClient()}function t4(){return ZA().getScope()}function u8(A){let Q=a1(),B=v5(),C=t4(),{release:J,environment:I=x3}=Q&&Q.getOptions()||{},{userAgent:q}=a0.navigator||{},K=bB({release:J,environment:I,user:C.getUser()||B.getUser(),...q&&{userAgent:q},...A}),Y=B.getSession();if(Y&&Y.status==="ok")oA(Y,{status:"exited"});return dB(),B.setSession(K),C.setSession(K),K}function dB(){let A=v5(),Q=t4(),B=Q.getSession()||A.getSession();if(B)uB(B);tW(),A.setSession(),Q.setSession()}function tW(){let A=v5(),Q=t4(),B=a1(),C=Q.getSession()||A.getSession();if(C&&B&&B.captureSession)B.captureSession(C)}function p8(A=!1){if(A){dB();return}tW()}function cB(A){return A.transaction}function BK(A,Q,B){let C=Q.getOptions(),{publicKey:J}=Q.getDsn()||{},{segment:I}=B&&B.getUser()||{},q=o2({environment:C.environment||x3,release:C.release,user_segment:I,public_key:J,trace_id:A});return Q.emit&&Q.emit("createDsc",q),q}function eW(A){let Q=a1();if(!Q)return{};let B=BK(g3(A).trace_id||"",Q,t4()),C=cB(A);if(!C)return B;let J=C&&C._frozenDynamicSamplingContext;if(J)return J;let{sampleRate:I,source:q}=C.metadata;if(I!=null)B.sample_rate=`${I}`;let K=g3(C);if(q&&q!=="url")B.transaction=K.description;return B.sampled=String(iW(C)),Q.emit&&Q.emit("createDsc",B),B}function pB(A,Q){let{fingerprint:B,span:C,breadcrumbs:J,sdkProcessingMetadata:I}=Q;if(EO(A,Q),C)$O(A,C);RO(A,B),wO(A,J),NO(A,I)}function QK(A,Q){let{extra:B,tags:C,user:J,contexts:I,level:q,sdkProcessingMetadata:K,breadcrumbs:Y,fingerprint:Z,eventProcessors:H,attachments:G,propagationContext:W,transactionName:F,span:z}=Q;if(m8(A,"extra",B),m8(A,"tags",C),m8(A,"user",J),m8(A,"contexts",I),m8(A,"sdkProcessingMetadata",K),q)A.level=q;if(F)A.transactionName=F;if(z)A.span=z;if(Y.length)A.breadcrumbs=[...A.breadcrumbs,...Y];if(Z.length)A.fingerprint=[...A.fingerprint,...Z];if(H.length)A.eventProcessors=[...A.eventProcessors,...H];if(G.length)A.attachments=[...A.attachments,...G];A.propagationContext={...A.propagationContext,...W}}function m8(A,Q,B){if(B&&Object.keys(B).length){A[Q]={...A[Q]};for(let C in B)if(Object.prototype.hasOwnProperty.call(B,C))A[Q][C]=B[C]}}function EO(A,Q){let{extra:B,tags:C,user:J,contexts:I,level:q,transactionName:K}=Q,Y=o2(B);if(Y&&Object.keys(Y).length)A.extra={...Y,...A.extra};let Z=o2(C);if(Z&&Object.keys(Z).length)A.tags={...Z,...A.tags};let H=o2(J);if(H&&Object.keys(H).length)A.user={...H,...A.user};let G=o2(I);if(G&&Object.keys(G).length)A.contexts={...G,...A.contexts};if(q)A.level=q;if(K)A.transaction=K}function wO(A,Q){let B=[...A.breadcrumbs||[],...Q];A.breadcrumbs=B.length?B:void 0}function NO(A,Q){A.sdkProcessingMetadata={...A.sdkProcessingMetadata,...Q}}function $O(A,Q){A.contexts={trace:sW(Q),...A.contexts};let B=cB(Q);if(B){A.sdkProcessingMetadata={dynamicSamplingContext:eW(Q),...A.sdkProcessingMetadata};let C=g3(B).description;if(C)A.tags={transaction:C,...A.tags}}}function RO(A,Q){if(A.fingerprint=A.fingerprint?S8(A.fingerprint):[],Q)A.fingerprint=A.fingerprint.concat(Q);if(A.fingerprint&&!A.fingerprint.length)delete A.fingerprint}var LO=100,CK;class TA{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=AF()}static clone(A){return A?A.clone():new TA}clone(){let A=new TA;return A._breadcrumbs=[...this._breadcrumbs],A._tags={...this._tags},A._extra={...this._extra},A._contexts={...this._contexts},A._user=this._user,A._level=this._level,A._span=this._span,A._session=this._session,A._transactionName=this._transactionName,A._fingerprint=this._fingerprint,A._eventProcessors=[...this._eventProcessors],A._requestSession=this._requestSession,A._attachments=[...this._attachments],A._sdkProcessingMetadata={...this._sdkProcessingMetadata},A._propagationContext={...this._propagationContext},A._client=this._client,A}setClient(A){this._client=A}getClient(){return this._client}addScopeListener(A){this._scopeListeners.push(A)}addEventProcessor(A){return this._eventProcessors.push(A),this}setUser(A){if(this._user=A||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session)oA(this._session,{user:A});return this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(A){return this._requestSession=A,this}setTags(A){return this._tags={...this._tags,...A},this._notifyScopeListeners(),this}setTag(A,Q){return this._tags={...this._tags,[A]:Q},this._notifyScopeListeners(),this}setExtras(A){return this._extra={...this._extra,...A},this._notifyScopeListeners(),this}setExtra(A,Q){return this._extra={...this._extra,[A]:Q},this._notifyScopeListeners(),this}setFingerprint(A){return this._fingerprint=A,this._notifyScopeListeners(),this}setLevel(A){return this._level=A,this._notifyScopeListeners(),this}setTransactionName(A){return this._transactionName=A,this._notifyScopeListeners(),this}setContext(A,Q){if(Q===null)delete this._contexts[A];else this._contexts[A]=Q;return this._notifyScopeListeners(),this}setSpan(A){return this._span=A,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){let A=this._span;return A&&A.transaction}setSession(A){if(!A)delete this._session;else this._session=A;return this._notifyScopeListeners(),this}getSession(){return this._session}update(A){if(!A)return this;let Q=typeof A==="function"?A(this):A;if(Q instanceof TA){let B=Q.getScopeData();if(this._tags={...this._tags,...B.tags},this._extra={...this._extra,...B.extra},this._contexts={...this._contexts,...B.contexts},B.user&&Object.keys(B.user).length)this._user=B.user;if(B.level)this._level=B.level;if(B.fingerprint.length)this._fingerprint=B.fingerprint;if(Q.getRequestSession())this._requestSession=Q.getRequestSession();if(B.propagationContext)this._propagationContext=B.propagationContext}else if(lA(Q)){let B=A;if(this._tags={...this._tags,...B.tags},this._extra={...this._extra,...B.extra},this._contexts={...this._contexts,...B.contexts},B.user)this._user=B.user;if(B.level)this._level=B.level;if(B.fingerprint)this._fingerprint=B.fingerprint;if(B.requestSession)this._requestSession=B.requestSession;if(B.propagationContext)this._propagationContext=B.propagationContext}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=AF(),this}addBreadcrumb(A,Q){let B=typeof Q==="number"?Q:LO;if(B<=0)return this;let C={timestamp:L4(),...A},J=this._breadcrumbs;return J.push(C),this._breadcrumbs=J.length>B?J.slice(-B):J,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(A){return this._attachments.push(A),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){let{_breadcrumbs:A,_attachments:Q,_contexts:B,_tags:C,_extra:J,_user:I,_level:q,_fingerprint:K,_eventProcessors:Y,_propagationContext:Z,_sdkProcessingMetadata:H,_transactionName:G,_span:W}=this;return{breadcrumbs:A,attachments:Q,contexts:B,tags:C,extra:J,user:I,level:q,fingerprint:K||[],eventProcessors:Y,propagationContext:Z,sdkProcessingMetadata:H,transactionName:G,span:W}}applyToEvent(A,Q={},B=[]){pB(A,this.getScopeData());let C=[...B,...v8(),...this._eventProcessors];return x5(C,A,Q)}setSDKProcessingMetadata(A){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...A},this}setPropagationContext(A){return this._propagationContext=A,this}getPropagationContext(){return this._propagationContext}captureException(A,Q){let B=Q&&Q.event_id?Q.event_id:J2();if(!this._client)return k0.warn("No client configured on scope - will not capture exception!"),B;let C=new Error("Sentry syntheticException");return this._client.captureException(A,{originalException:A,syntheticException:C,...Q,event_id:B},this),B}captureMessage(A,Q,B){let C=B&&B.event_id?B.event_id:J2();if(!this._client)return k0.warn("No client configured on scope - will not capture message!"),C;let J=new Error(A);return this._client.captureMessage(A,Q,{originalException:A,syntheticException:J,...B,event_id:C},this),C}captureEvent(A,Q){let B=Q&&Q.event_id?Q.event_id:J2();if(!this._client)return k0.warn("No client configured on scope - will not capture event!"),B;return this._client.captureEvent(A,{...Q,event_id:B},this),B}_notifyScopeListeners(){if(!this._notifyingListeners)this._notifyingListeners=!0,this._scopeListeners.forEach((A)=>{A(this)}),this._notifyingListeners=!1}}function rW(){if(!CK)CK=new TA;return CK}function AF(){return{traceId:J2(),spanId:J2().substring(16)}}var b5="7.120.3";var QF=parseFloat(b5),MO=100;class sB{constructor(A,Q,B,C=QF){this._version=C;let J;if(!Q)J=new TA,J.setClient(A);else J=Q;let I;if(!B)I=new TA,I.setClient(A);else I=B;if(this._stack=[{scope:J}],A)this.bindClient(A);this._isolationScope=I}isOlderThan(A){return this._version<A}bindClient(A){let Q=this.getStackTop();if(Q.client=A,Q.scope.setClient(A),A&&A.setupIntegrations)A.setupIntegrations()}pushScope(){let A=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:A}),A}popScope(){if(this.getStack().length<=1)return!1;return!!this.getStack().pop()}withScope(A){let Q=this.pushScope(),B;try{B=A(Q)}catch(C){throw this.popScope(),C}if(w4(B))return B.then((C)=>{return this.popScope(),C},(C)=>{throw this.popScope(),C});return this.popScope(),B}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(A,Q){let B=this._lastEventId=Q&&Q.event_id?Q.event_id:J2(),C=new Error("Sentry syntheticException");return this.getScope().captureException(A,{originalException:A,syntheticException:C,...Q,event_id:B}),B}captureMessage(A,Q,B){let C=this._lastEventId=B&&B.event_id?B.event_id:J2(),J=new Error(A);return this.getScope().captureMessage(A,Q,{originalException:A,syntheticException:J,...B,event_id:C}),C}captureEvent(A,Q){let B=Q&&Q.event_id?Q.event_id:J2();if(!A.type)this._lastEventId=B;return this.getScope().captureEvent(A,{...Q,event_id:B}),B}lastEventId(){return this._lastEventId}addBreadcrumb(A,Q){let{scope:B,client:C}=this.getStackTop();if(!C)return;let{beforeBreadcrumb:J=null,maxBreadcrumbs:I=MO}=C.getOptions&&C.getOptions()||{};if(I<=0)return;let K={timestamp:L4(),...A},Y=J?h3(()=>J(K,Q)):K;if(Y===null)return;if(C.emit)C.emit("beforeAddBreadcrumb",Y,Q);B.addBreadcrumb(Y,I)}setUser(A){this.getScope().setUser(A),this.getIsolationScope().setUser(A)}setTags(A){this.getScope().setTags(A),this.getIsolationScope().setTags(A)}setExtras(A){this.getScope().setExtras(A),this.getIsolationScope().setExtras(A)}setTag(A,Q){this.getScope().setTag(A,Q),this.getIsolationScope().setTag(A,Q)}setExtra(A,Q){this.getScope().setExtra(A,Q),this.getIsolationScope().setExtra(A,Q)}setContext(A,Q){this.getScope().setContext(A,Q),this.getIsolationScope().setContext(A,Q)}configureScope(A){let{scope:Q,client:B}=this.getStackTop();if(B)A(Q)}run(A){let Q=JK(this);try{A(this)}finally{JK(Q)}}getIntegration(A){let Q=this.getClient();if(!Q)return null;try{return Q.getIntegration(A)}catch(B){return N1&&k0.warn(`Cannot retrieve integration ${A.id} from the current Hub`),null}}startTransaction(A,Q){let B=this._callExtensionMethod("startTransaction",A,Q);if(N1&&!B)if(!this.getClient())k0.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'");else k0.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`);return B}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(A=!1){if(A)return this.endSession();this._sendSessionUpdate()}endSession(){let Q=this.getStackTop().scope,B=Q.getSession();if(B)uB(B);this._sendSessionUpdate(),Q.setSession()}startSession(A){let{scope:Q,client:B}=this.getStackTop(),{release:C,environment:J=x3}=B&&B.getOptions()||{},{userAgent:I}=a0.navigator||{},q=bB({release:C,environment:J,user:Q.getUser(),...I&&{userAgent:I},...A}),K=Q.getSession&&Q.getSession();if(K&&K.status==="ok")oA(K,{status:"exited"});return this.endSession(),Q.setSession(q),q}shouldSendDefaultPii(){let A=this.getClient(),Q=A&&A.getOptions();return Boolean(Q&&Q.sendDefaultPii)}_sendSessionUpdate(){let{scope:A,client:Q}=this.getStackTop(),B=A.getSession();if(B&&Q&&Q.captureSession)Q.captureSession(B)}_callExtensionMethod(A,...Q){let C=iB().__SENTRY__;if(C&&C.extensions&&typeof C.extensions[A]==="function")return C.extensions[A].apply(this,Q);N1&&k0.warn(`Extension method ${A} couldn't be found, doing nothing.`)}}function iB(){return a0.__SENTRY__=a0.__SENTRY__||{extensions:{},hub:void 0},a0}function JK(A){let Q=iB(),B=lB(Q);return BF(Q,A),B}function ZA(){let A=iB();if(A.__SENTRY__&&A.__SENTRY__.acs){let Q=A.__SENTRY__.acs.getCurrentHub();if(Q)return Q}return OO(A)}function v5(){return ZA().getIsolationScope()}function OO(A=iB()){if(!kO(A)||lB(A).isOlderThan(QF))BF(A,new sB);return lB(A)}function kO(A){return!!(A&&A.__SENTRY__&&A.__SENTRY__.hub)}function lB(A){return _8("hub",()=>new sB,A)}function BF(A,Q){if(!A)return!1;let B=A.__SENTRY__=A.__SENTRY__||{};return B.hub=Q,!0}function PO(A,Q){if(!Q)return A;return A.sdk=A.sdk||{},A.sdk.name=A.sdk.name||Q.name,A.sdk.version=A.sdk.version||Q.version,A.sdk.integrations=[...A.sdk.integrations||[],...Q.integrations||[]],A.sdk.packages=[...A.sdk.packages||[],...Q.packages||[]],A}function CF(A,Q,B,C){let J=vB(B),I={sent_at:new Date().toISOString(),...J&&{sdk:J},...!!C&&Q&&{dsn:kA(Q)}},q="aggregates"in A?[{type:"sessions"},A]:[{type:"session"},A.toJSON()];return _A(I,[q])}function JF(A,Q,B,C){let J=vB(B),I=A.type&&A.type!=="replay_event"?A.type:"event";PO(A,B&&B.sdk);let q=oq(A,J,C,Q);return delete A.sdkProcessingMetadata,_A(q,[[{type:I},A]])}var _O="7";function TO(A){let Q=A.protocol?`${A.protocol}:`:"",B=A.port?`:${A.port}`:"";return`${Q}//${A.host}${B}${A.path?`/${A.path}`:""}/api/`}function jO(A){return`${TO(A)}${A.projectId}/envelope/`}function SO(A,Q){return kq({sentry_key:A.publicKey,sentry_version:_O,...Q&&{sentry_client:`${Q.name}/${Q.version}`}})}function IF(A,Q={}){let B=typeof Q==="string"?Q:Q.tunnel,C=typeof Q==="string"||!Q._metadata?void 0:Q._metadata.sdk;return B?B:`${jO(A)}?${SO(A,C)}`}var qF=[];function yO(A){let Q={};return A.forEach((B)=>{let{name:C}=B,J=Q[C];if(J&&!J.isDefaultInstance&&B.isDefaultInstance)return;Q[C]=B}),Object.keys(Q).map((B)=>Q[B])}function IK(A){let Q=A.defaultIntegrations||[],B=A.integrations;Q.forEach((q)=>{q.isDefaultInstance=!0});let C;if(Array.isArray(B))C=[...Q,...B];else if(typeof B==="function")C=S8(B(Q));else C=Q;let J=yO(C),I=fO(J,(q)=>q.name==="Debug");if(I!==-1){let[q]=J.splice(I,1);J.push(q)}return J}function KF(A,Q){let B={};return Q.forEach((C)=>{if(C)KK(A,C,B)}),B}function qK(A,Q){for(let B of Q)if(B&&B.afterAllSetup)B.afterAllSetup(A)}function KK(A,Q,B){if(B[Q.name]){N1&&k0.log(`Integration skipped because it was already installed: ${Q.name}`);return}if(B[Q.name]=Q,qF.indexOf(Q.name)===-1)Q.setupOnce(AK,ZA),qF.push(Q.name);if(Q.setup&&typeof Q.setup==="function")Q.setup(A);if(A.on&&typeof Q.preprocessEvent==="function"){let C=Q.preprocessEvent.bind(Q);A.on("preprocessEvent",(J,I)=>C(J,I,A))}if(A.addEventProcessor&&typeof Q.processEvent==="function"){let C=Q.processEvent.bind(Q),J=Object.assign((I,q)=>C(I,q,A),{id:Q.name});A.addEventProcessor(J)}N1&&k0.log(`Integration installed: ${Q.name}`)}function fO(A,Q){for(let B=0;B<A.length;B++)if(Q(A[B])===!0)return B;return-1}function I2(A,Q){return Object.assign(function B(...C){return Q(...C)},{id:A})}function q2(A){return A}function YF(A){let Q="";for(let B of A){let C=Object.entries(B.tags),J=C.length>0?`|#${C.map(([I,q])=>`${I}:${q}`).join(",")}`:"";Q+=`${B.name}@${B.unit}:${B.metric}|${B.metricType}${J}|T${B.timestamp}\n`}return Q}function ZF(A,Q,B,C){let J={sent_at:new Date().toISOString()};if(B&&B.sdk)J.sdk={name:B.sdk.name,version:B.sdk.version};if(!!C&&Q)J.dsn=kA(Q);let I=hO(A);return _A(J,[I])}function hO(A){let Q=YF(A);return[{type:"statsd",length:Q.length},Q]}var HF="Not capturing exception because it's already been captured.";class nB{constructor(A){if(this._options=A,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],A.dsn)this._dsn=RB(A.dsn);else N1&&k0.warn("No DSN provided, client will not send events.");if(this._dsn){let Q=IF(this._dsn,A);this._transport=A.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...A.transportOptions,url:Q})}}captureException(A,Q,B){if(PB(A)){N1&&k0.log(HF);return}let C=Q&&Q.event_id;return this._process(this.eventFromException(A,Q).then((J)=>this._captureEvent(J,Q,B)).then((J)=>{C=J})),C}captureMessage(A,Q,B,C){let J=B&&B.event_id,I=T5(A)?A:String(A),q=N6(A)?this.eventFromMessage(I,Q,B):this.eventFromException(A,B);return this._process(q.then((K)=>this._captureEvent(K,B,C)).then((K)=>{J=K})),J}captureEvent(A,Q,B){if(Q&&Q.originalException&&PB(Q.originalException)){N1&&k0.log(HF);return}let C=Q&&Q.event_id,I=(A.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(A,Q,I||B).then((q)=>{C=q})),C}captureSession(A){if(typeof A.release!=="string")N1&&k0.warn("Discarded session because of missing or non-string release");else this.sendSession(A),oA(A,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(A){let Q=this._transport;if(Q){if(this.metricsAggregator)this.metricsAggregator.flush();return this._isClientDoneProcessing(A).then((B)=>{return Q.flush(A).then((C)=>B&&C)})}else return nA(!0)}close(A){return this.flush(A).then((Q)=>{if(this.getOptions().enabled=!1,this.metricsAggregator)this.metricsAggregator.close();return Q})}getEventProcessors(){return this._eventProcessors}addEventProcessor(A){this._eventProcessors.push(A)}setupIntegrations(A){if(A&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)this._setupIntegrations()}init(){if(this._isEnabled())this._setupIntegrations()}getIntegrationById(A){return this.getIntegrationByName(A)}getIntegrationByName(A){return this._integrations[A]}getIntegration(A){try{return this._integrations[A.id]||null}catch(Q){return N1&&k0.warn(`Cannot retrieve integration ${A.id} from the current Client`),null}}addIntegration(A){let Q=this._integrations[A.name];if(KK(this,A,this._integrations),!Q)qK(this,[A])}sendEvent(A,Q={}){this.emit("beforeSendEvent",A,Q);let B=JF(A,this._dsn,this._options._metadata,this._options.tunnel);for(let J of Q.attachments||[])B=sq(B,nq(J,this._options.transportOptions&&this._options.transportOptions.textEncoder));let C=this._sendEnvelope(B);if(C)C.then((J)=>this.emit("afterSendEvent",A,J),null)}sendSession(A){let Q=CF(A,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(Q)}recordDroppedEvent(A,Q,B){if(this._options.sendClientReports){let C=typeof B==="number"?B:1,J=`${A}:${Q}`;N1&&k0.log(`Recording outcome: "${J}"${C>1?` (${C} times)`:""}`),this._outcomes[J]=(this._outcomes[J]||0)+C}}captureAggregateMetrics(A){N1&&k0.log(`Flushing aggregated metrics, number of metrics: ${A.length}`);let Q=ZF(A,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(Q)}on(A,Q){if(!this._hooks[A])this._hooks[A]=[];this._hooks[A].push(Q)}emit(A,...Q){if(this._hooks[A])this._hooks[A].forEach((B)=>B(...Q))}_setupIntegrations(){let{integrations:A}=this._options;this._integrations=KF(this,A),qK(this,A),this._integrationsInitialized=!0}_updateSessionFromEvent(A,Q){let B=!1,C=!1,J=Q.exception&&Q.exception.values;if(J){C=!0;for(let K of J){let Y=K.mechanism;if(Y&&Y.handled===!1){B=!0;break}}}let I=A.status==="ok";if(I&&A.errors===0||I&&B)oA(A,{...B&&{status:"crashed"},errors:A.errors||Number(C||B)}),this.captureSession(A)}_isClientDoneProcessing(A){return new w2((Q)=>{let B=0,C=1,J=setInterval(()=>{if(this._numProcessing==0)clearInterval(J),Q(!0);else if(B+=C,A&&B>=A)clearInterval(J),Q(!1)},C)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(A,Q,B,C=v5()){let J=this.getOptions(),I=Object.keys(this._integrations);if(!Q.integrations&&I.length>0)Q.integrations=I;return this.emit("preprocessEvent",A,Q),oW(J,A,Q,B,this,C).then((q)=>{if(q===null)return q;let K={...C.getPropagationContext(),...B?B.getPropagationContext():void 0};if(!(q.contexts&&q.contexts.trace)&&K){let{traceId:Z,spanId:H,parentSpanId:G,dsc:W}=K;q.contexts={trace:{trace_id:Z,span_id:H,parent_span_id:G},...q.contexts};let F=W?W:BK(Z,this,B);q.sdkProcessingMetadata={dynamicSamplingContext:F,...q.sdkProcessingMetadata}}return q})}_captureEvent(A,Q={},B){return this._processEvent(A,Q,B).then((C)=>{return C.event_id},(C)=>{if(N1){let J=C;if(J.logLevel==="log")k0.log(J.message);else k0.warn(J)}return})}_processEvent(A,Q,B){let C=this.getOptions(),{sampleRate:J}=C,I=GF(A),q=XF(A),K=A.type||"error",Y=`before send for type \`${K}\``;if(q&&typeof J==="number"&&Math.random()>J)return this.recordDroppedEvent("sample_rate","error",A),O6(new n2(`Discarding event because it's not included in the random sample (sampling rate = ${J})`,"log"));let Z=K==="replay_event"?"replay":K,G=(A.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(A,Q,B,G).then((W)=>{if(W===null)throw this.recordDroppedEvent("event_processor",Z,A),new n2("An event processor returned `null`, will not send event.","log");if(Q.data&&Q.data.__sentry__===!0)return W;let z=gO(C,W,Q);return xO(z,Y)}).then((W)=>{if(W===null){if(this.recordDroppedEvent("before_send",Z,A),I){let E=1+(A.spans||[]).length;this.recordDroppedEvent("before_send","span",E)}throw new n2(`${Y} returned \`null\`, will not send event.`,"log")}let F=B&&B.getSession();if(!I&&F)this._updateSessionFromEvent(F,W);if(I){let U=W.sdkProcessingMetadata&&W.sdkProcessingMetadata.spanCountBeforeProcessing||0,E=W.spans?W.spans.length:0,w=U-E;if(w>0)this.recordDroppedEvent("before_send","span",w)}let z=W.transaction_info;if(I&&z&&W.transaction!==A.transaction)W.transaction_info={...z,source:"custom"};return this.sendEvent(W,Q),W}).then(null,(W)=>{if(W instanceof n2)throw W;throw this.captureException(W,{data:{__sentry__:!0},originalException:W}),new n2(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${W}`)})}_process(A){this._numProcessing++,A.then((Q)=>{return this._numProcessing--,Q},(Q)=>{return this._numProcessing--,Q})}_sendEnvelope(A){if(this.emit("beforeEnvelope",A),this._isEnabled()&&this._transport)return this._transport.send(A).then(null,(Q)=>{N1&&k0.error("Error while sending event:",Q)});else N1&&k0.error("Transport disabled")}_clearOutcomes(){let A=this._outcomes;return this._outcomes={},Object.keys(A).map((Q)=>{let[B,C]=Q.split(":");return{reason:B,category:C,quantity:A[Q]}})}}function xO(A,Q){let B=`${Q} must return \`null\` or a valid event.`;if(w4(A))return A.then((C)=>{if(!lA(C)&&C!==null)throw new n2(B);return C},(C)=>{throw new n2(`${Q} rejected with ${C}`)});else if(!lA(A)&&A!==null)throw new n2(B);return A}function gO(A,Q,B){let{beforeSend:C,beforeSendTransaction:J}=A;if(XF(Q)&&C)return C(Q,B);if(GF(Q)&&J){if(Q.spans){let I=Q.spans.length;Q.sdkProcessingMetadata={...Q.sdkProcessingMetadata,spanCountBeforeProcessing:I}}return J(Q,B)}return Q}function XF(A){return A.type===void 0}function GF(A){return A.type==="transaction"}function YK(A,Q){if(Q.debug===!0)if(N1)k0.enable();else h3(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")});t4().update(Q.initialScope);let C=new A(Q);ZK(C),vO(C)}function ZK(A){let B=ZA().getStackTop();B.client=A,B.scope.setClient(A)}function vO(A){if(A.init)A.init();else if(A.setupIntegrations)A.setupIntegrations()}var bO=30;function u5(A,Q,B=dq(A.bufferSize||bO)){let C={},J=(q)=>B.drain(q);function I(q){let K=[];if(xB(q,(G,W)=>{let F=gB(W);if(rq(C,F)){let z=WF(G,W);A.recordDroppedEvent("ratelimit_backoff",F,z)}else K.push(G)}),K.length===0)return nA();let Y=_A(q[0],K),Z=(G)=>{xB(Y,(W,F)=>{let z=WF(W,F);A.recordDroppedEvent(G,gB(F),z)})},H=()=>Q({body:iq(Y,A.textEncoder)}).then((G)=>{if(G.statusCode!==void 0&&(G.statusCode<200||G.statusCode>=300))N1&&k0.warn(`Sentry responded with status code ${G.statusCode} to sent event.`);return C=tq(C,G),G},(G)=>{throw Z("network_error"),G});return B.add(H).then((G)=>G,(G)=>{if(G instanceof n2)return N1&&k0.error("Skipped sending event because buffer is full."),Z("queue_overflow"),nA();else throw G})}return I.__sentry__baseTransport__=!0,{send:I,flush:J}}function WF(A,Q){if(Q!=="event"&&Q!=="transaction")return;return Array.isArray(A)?A[1]:void 0}function HK(A,Q,B=[Q],C="npm"){let J=A._metadata||{};if(!J.sdk)J.sdk={name:`sentry.javascript.${Q}`,packages:B.map((I)=>({name:`${C}:@sentry/${I}`,version:b5})),version:b5};A._metadata=J}var uO=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],pO=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],FF="InboundFilters",mO=(A={})=>{return{name:FF,setupOnce(){},processEvent(Q,B,C){let J=C.getOptions(),I=dO(A,J);return cO(Q,I)?null:Q}}},d8=q2(mO),aB=I2(FF,d8);function dO(A={},Q={}){return{allowUrls:[...A.allowUrls||[],...Q.allowUrls||[]],denyUrls:[...A.denyUrls||[],...Q.denyUrls||[]],ignoreErrors:[...A.ignoreErrors||[],...Q.ignoreErrors||[],...A.disableErrorDefaults?[]:uO],ignoreTransactions:[...A.ignoreTransactions||[],...Q.ignoreTransactions||[],...A.disableTransactionDefaults?[]:pO],ignoreInternal:A.ignoreInternal!==void 0?A.ignoreInternal:!0}}function cO(A,Q){if(Q.ignoreInternal&&aO(A))return N1&&k0.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${sA(A)}`),!0;if(lO(A,Q.ignoreErrors))return N1&&k0.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${sA(A)}`),!0;if(sO(A,Q.ignoreTransactions))return N1&&k0.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${sA(A)}`),!0;if(iO(A,Q.denyUrls))return N1&&k0.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${sA(A)}.\nUrl: ${oB(A)}`),!0;if(!nO(A,Q.allowUrls))return N1&&k0.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${sA(A)}.\nUrl: ${oB(A)}`),!0;return!1}function lO(A,Q){if(A.type||!Q||!Q.length)return!1;return oO(A).some((B)=>j5(B,Q))}function sO(A,Q){if(A.type!=="transaction"||!Q||!Q.length)return!1;let B=A.transaction;return B?j5(B,Q):!1}function iO(A,Q){if(!Q||!Q.length)return!1;let B=oB(A);return!B?!1:j5(B,Q)}function nO(A,Q){if(!Q||!Q.length)return!0;let B=oB(A);return!B?!0:j5(B,Q)}function oO(A){let Q=[];if(A.message)Q.push(A.message);let B;try{B=A.exception.values[A.exception.values.length-1]}catch(C){}if(B){if(B.value){if(Q.push(B.value),B.type)Q.push(`${B.type}: ${B.value}`)}}if(N1&&Q.length===0)k0.error(`Could not extract message for event ${sA(A)}`);return Q}function aO(A){try{return A.exception.values[0].type==="SentryError"}catch(Q){}return!1}function rO(A=[]){for(let Q=A.length-1;Q>=0;Q--){let B=A[Q];if(B&&B.filename!=="<anonymous>"&&B.filename!=="[native code]")return B.filename||null}return null}function oB(A){try{let Q;try{Q=A.exception.values[0].stacktrace.frames}catch(B){}return Q?rO(Q):null}catch(Q){return N1&&k0.error(`Cannot extract url for event ${sA(A)}`),null}}var VF,zF="FunctionToString",UF=new WeakMap,tO=()=>{return{name:zF,setupOnce(){VF=Function.prototype.toString;try{Function.prototype.toString=function(...A){let Q=L6(this),B=UF.has(a1())&&Q!==void 0?Q:this;return VF.apply(B,A)}}catch(A){}},setup(A){UF.set(A,!0)}}},c8=q2(tO),rB=I2(zF,c8);var eO="cause",Ak=5,DF="LinkedErrors",Qk=(A={})=>{let Q=A.limit||Ak,B=A.key||eO;return{name:DF,setupOnce(){},preprocessEvent(C,J,I){let q=I.getOptions();P8(eq,q.stackParser,q.maxValueLength,B,Q,C,J)}}},Bk=q2(Qk),EF=I2(DF,Bk);var XK={};FW(XK,{LinkedErrors:()=>EF,InboundFilters:()=>aB,FunctionToString:()=>rB});var wF=XK;var H1=a0,GK=0;function WK(){return GK>0}function wk(){GK++,setTimeout(()=>{GK--})}function v3(A,Q={},B){if(typeof A!=="function")return A;try{let J=A.__sentry_wrapped__;if(J)if(typeof J==="function")return J;else return A;if(L6(A))return A}catch(J){return A}let C=function(){let J=Array.prototype.slice.call(arguments);try{if(B&&typeof B==="function")B.apply(this,arguments);let I=J.map((q)=>v3(q,Q));return A.apply(this,I)}catch(I){throw wk(),mB((q)=>{q.addEventProcessor((K)=>{if(Q.mechanism)y5(K,void 0,void 0),a4(K,Q.mechanism);return K.extra={...K.extra,arguments:J},K}),g5(I)}),I}};try{for(let J in A)if(Object.prototype.hasOwnProperty.call(A,J))C[J]=A[J]}catch(J){}LB(C,A),o4(A,"__sentry_wrapped__",C);try{if(Object.getOwnPropertyDescriptor(C,"name").configurable)Object.defineProperty(C,"name",{get(){return A.name}})}catch(J){}return C}var a2=typeof __SENTRY_DEBUG__==="undefined"||__SENTRY_DEBUG__;function UK(A,Q){let B=zK(A,Q),C={type:Q&&Q.name,value:Lk(Q)};if(B.length)C.stacktrace={frames:B};if(C.type===void 0&&C.value==="")C.value="Unrecoverable error caught";return C}function Nk(A,Q,B,C){let J=a1(),I=J&&J.getOptions().normalizeDepth,q={exception:{values:[{type:$6(Q)?Q.constructor.name:C?"UnhandledRejection":"Error",value:Mk(Q,{isUnhandledRejection:C})}]},extra:{__serialized__:hB(Q,I)}};if(B){let K=zK(A,B);if(K.length)q.exception.values[0].stacktrace={frames:K}}return q}function FK(A,Q){return{exception:{values:[UK(A,Q)]}}}function zK(A,Q){let B=Q.stacktrace||Q.stack||"",C=Rk(Q);try{return A(B,C)}catch(J){}return[]}var $k=/Minified React error #\d+;/i;function Rk(A){if(A){if(typeof A.framesToPop==="number")return A.framesToPop;if($k.test(A.message))return 1}return 0}function Lk(A){let Q=A&&A.message;if(!Q)return"No error message";if(Q.error&&typeof Q.error.message==="string")return Q.error.message;return Q}function NF(A,Q,B,C){let J=B&&B.syntheticException||void 0,I=tB(A,Q,J,C);if(a4(I),I.level="error",B&&B.event_id)I.event_id=B.event_id;return nA(I)}function $F(A,Q,B="info",C,J){let I=C&&C.syntheticException||void 0,q=VK(A,Q,I,J);if(q.level=B,C&&C.event_id)q.event_id=C.event_id;return nA(q)}function tB(A,Q,B,C,J){let I;if(_5(Q)&&Q.error)return FK(A,Q.error);if(wB(Q)||zq(Q)){let q=Q;if("stack"in Q)I=FK(A,Q);else{let K=q.name||(wB(q)?"DOMError":"DOMException"),Y=q.message?`${K}: ${q.message}`:K;I=VK(A,Y,B,C),y5(I,Y)}if("code"in q)I.tags={...I.tags,"DOMException.code":`${q.code}`};return I}if(O8(Q))return FK(A,Q);if(lA(Q)||$6(Q))return I=Nk(A,Q,B,J),a4(I,{synthetic:!0}),I;return I=VK(A,Q,B,C),y5(I,`${Q}`,void 0),a4(I,{synthetic:!0}),I}function VK(A,Q,B,C){let J={};if(C&&B){let I=zK(A,B);if(I.length)J.exception={values:[{value:Q,stacktrace:{frames:I}}]}}if(T5(Q)){let{__sentry_template_string__:I,__sentry_template_values__:q}=Q;return J.logentry={message:I,params:q},J}return J.message=Q,J}function Mk(A,{isUnhandledRejection:Q}){let B=Pq(A),C=Q?"promise rejection":"exception";if(_5(A))return`Event \`ErrorEvent\` captured as ${C} with message \`${A.message}\``;if($6(A))return`Event \`${Ok(A)}\` (type=${A.type}) captured as ${C}`;return`Object captured as ${C} with keys: ${B}`}function Ok(A){try{let Q=Object.getPrototypeOf(A);return Q?Q.constructor.name:void 0}catch(Q){}}function RF(A,{metadata:Q,tunnel:B,dsn:C}){let J={event_id:A.event_id,sent_at:new Date().toISOString(),...Q&&Q.sdk&&{sdk:{name:Q.sdk.name,version:Q.sdk.version}},...!!B&&!!C&&{dsn:kA(C)}},I=kk(A);return _A(J,[I])}function kk(A){return[{type:"user_report"},A]}class DK extends nB{constructor(A){let Q=H1.SENTRY_SDK_SOURCE||mq();HK(A,"browser",["browser"],Q);super(A);if(A.sendClientReports&&H1.document)H1.document.addEventListener("visibilitychange",()=>{if(H1.document.visibilityState==="hidden")this._flushOutcomes()})}eventFromException(A,Q){return NF(this._options.stackParser,A,Q,this._options.attachStacktrace)}eventFromMessage(A,Q="info",B){return $F(this._options.stackParser,A,Q,B,this._options.attachStacktrace)}captureUserFeedback(A){if(!this._isEnabled()){a2&&k0.warn("SDK not enabled, will not capture user feedback.");return}let Q=RF(A,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(Q)}_prepareEvent(A,Q,B){return A.platform=A.platform||"javascript",super._prepareEvent(A,Q,B)}_flushOutcomes(){let A=this._clearOutcomes();if(A.length===0){a2&&k0.log("No outcomes to send");return}if(!this._dsn){a2&&k0.log("No dsn provided, will not send outcomes");return}a2&&k0.log("Sending outcomes:",A);let Q=aq(A,this._options.tunnel&&kA(this._dsn));this._sendEnvelope(Q)}}var l8=void 0;function LF(){if(l8)return l8;if(y8(H1.fetch))return l8=H1.fetch.bind(H1);let A=H1.document,Q=H1.fetch;if(A&&typeof A.createElement==="function")try{let B=A.createElement("iframe");B.hidden=!0,A.head.appendChild(B);let C=B.contentWindow;if(C&&C.fetch)Q=C.fetch;A.head.removeChild(B)}catch(B){a2&&k0.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",B)}return l8=Q.bind(H1)}function MF(){l8=void 0}function OF(A,Q=LF()){let B=0,C=0;function J(I){let q=I.body.length;B+=q,C++;let K={body:I.body,method:"POST",referrerPolicy:"origin",headers:A.headers,keepalive:B<=60000&&C<15,...A.fetchOptions};try{return Q(A.url,K).then((Y)=>{return B-=q,C--,{statusCode:Y.status,headers:{"x-sentry-rate-limits":Y.headers.get("X-Sentry-Rate-Limits"),"retry-after":Y.headers.get("Retry-After")}}})}catch(Y){return MF(),B-=q,C--,O6(Y)}}return u5(A,J)}var Pk=4;function kF(A){function Q(B){return new w2((C,J)=>{let I=new XMLHttpRequest;I.onerror=J,I.onreadystatechange=()=>{if(I.readyState===Pk)C({statusCode:I.status,headers:{"x-sentry-rate-limits":I.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":I.getResponseHeader("Retry-After")}})},I.open("POST",A.url);for(let q in A.headers)if(Object.prototype.hasOwnProperty.call(A.headers,q))I.setRequestHeader(q,A.headers[q]);I.send(B.body)})}return u5(A,Q)}var eB="?";var _k=30,Tk=40,jk=50;function EK(A,Q,B,C){let J={filename:A,function:Q,in_app:!0};if(B!==void 0)J.lineno=B;if(C!==void 0)J.colno=C;return J}var Sk=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,yk=/\((\S*)(?::(\d+))(?::(\d+))\)/,fk=(A)=>{let Q=Sk.exec(A);if(Q){if(Q[2]&&Q[2].indexOf("eval")===0){let I=yk.exec(Q[2]);if(I)Q[2]=I[1],Q[3]=I[2],Q[4]=I[3]}let[C,J]=_F(Q[1]||eB,Q[2]);return EK(J,C,Q[3]?+Q[3]:void 0,Q[4]?+Q[4]:void 0)}return},hk=[_k,fk],xk=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,gk=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,vk=(A)=>{let Q=xk.exec(A);if(Q){if(Q[3]&&Q[3].indexOf(" > eval")>-1){let I=gk.exec(Q[3]);if(I)Q[1]=Q[1]||"eval",Q[3]=I[1],Q[4]=I[2],Q[5]=""}let C=Q[3],J=Q[1]||eB;return[J,C]=_F(J,C),EK(C,J,Q[4]?+Q[4]:void 0,Q[5]?+Q[5]:void 0)}return},bk=[jk,vk],uk=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,pk=(A)=>{let Q=uk.exec(A);return Q?EK(Q[2],Q[1]||eB,+Q[3],Q[4]?+Q[4]:void 0):void 0},mk=[Tk,pk];var dk=[hk,bk,mk],PF=OB(...dk),_F=(A,Q)=>{let B=A.indexOf("safari-extension")!==-1,C=A.indexOf("safari-web-extension")!==-1;return B||C?[A.indexOf("@")!==-1?A.split("@")[0]:eB,B?`safari-extension:${Q}`:`safari-web-extension:${Q}`]:[A,Q]};var AC=1024,TF="Breadcrumbs",ck=(A={})=>{let Q={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...A};return{name:TF,setupOnce(){},setup(B){if(Q.console)jq(ik(B));if(Q.dom)fq(sk(B,Q.dom));if(Q.xhr)pq(nk(B));if(Q.fetch)vq(ok(B));if(Q.history)h8(ak(B));if(Q.sentry&&B.on)B.on("beforeSendEvent",lk(B))}}},wK=q2(ck),jF=I2(TF,wK);function lk(A){return function Q(B){if(a1()!==A)return;M4({category:`sentry.${B.type==="transaction"?"transaction":"event"}`,event_id:B.event_id,level:B.level,message:sA(B)},{event:B})}}function sk(A,Q){return function B(C){if(a1()!==A)return;let J,I,q=typeof Q==="object"?Q.serializeAttribute:void 0,K=typeof Q==="object"&&typeof Q.maxStringLength==="number"?Q.maxStringLength:void 0;if(K&&K>AC)a2&&k0.warn(`\`dom.maxStringLength\` cannot exceed ${AC}, but a value of ${K} was configured. Sentry will use ${AC} instead.`),K=AC;if(typeof q==="string")q=[q];try{let Z=C.event,H=rk(Z)?Z.target:Z;J=T8(H,{keyAttrs:q,maxStringLength:K}),I=Mq(H)}catch(Z){J="<unknown>"}if(J.length===0)return;let Y={category:`ui.${C.name}`,message:J};if(I)Y.data={"ui.component_name":I};M4(Y,{event:C.event,name:C.name,global:C.global})}}function ik(A){return function Q(B){if(a1()!==A)return;let C={category:"console",data:{arguments:B.args,logger:"console"},level:cq(B.level),message:NB(B.args," ")};if(B.level==="assert")if(B.args[0]===!1)C.message=`Assertion failed: ${NB(B.args.slice(1)," ")||"console.assert"}`,C.data.arguments=B.args.slice(1);else return;M4(C,{input:B.args,level:B.level})}}function nk(A){return function Q(B){if(a1()!==A)return;let{startTimestamp:C,endTimestamp:J}=B,I=B.xhr[M6];if(!C||!J||!I)return;let{method:q,url:K,status_code:Y,body:Z}=I,H={method:q,url:K,status_code:Y},G={xhr:B.xhr,input:Z,startTimestamp:C,endTimestamp:J};M4({category:"xhr",data:H,type:"http"},G)}}function ok(A){return function Q(B){if(a1()!==A)return;let{startTimestamp:C,endTimestamp:J}=B;if(!J)return;if(B.fetchData.url.match(/sentry_key/)&&B.fetchData.method==="POST")return;if(B.error){let I=B.fetchData,q={data:B.error,input:B.args,startTimestamp:C,endTimestamp:J};M4({category:"fetch",data:I,level:"error",type:"http"},q)}else{let I=B.response,q={...B.fetchData,status_code:I&&I.status},K={input:B.args,response:I,startTimestamp:C,endTimestamp:J};M4({category:"fetch",data:q,type:"http"},K)}}}function ak(A){return function Q(B){if(a1()!==A)return;let{from:C,to:J}=B,I=x8(H1.location.href),q=C?x8(C):void 0,K=x8(J);if(!q||!q.path)q=I;if(I.protocol===K.protocol&&I.host===K.host)J=K.relative;if(I.protocol===q.protocol&&I.host===q.host)C=q.relative;M4({category:"navigation",data:{from:C,to:J}})}}function rk(A){return!!A&&!!A.target}var fF="Dedupe",tk=()=>{let A;return{name:fF,setupOnce(){},processEvent(Q){if(Q.type)return Q;try{if(ek(Q,A))return a2&&k0.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(B){}return A=Q}}},NK=q2(tk),hF=I2(fF,NK);function ek(A,Q){if(!Q)return!1;if(AP(A,Q))return!0;if(QP(A,Q))return!0;return!1}function AP(A,Q){let B=A.message,C=Q.message;if(!B&&!C)return!1;if(B&&!C||!B&&C)return!1;if(B!==C)return!1;if(!gF(A,Q))return!1;if(!xF(A,Q))return!1;return!0}function QP(A,Q){let B=SF(Q),C=SF(A);if(!B||!C)return!1;if(B.type!==C.type||B.value!==C.value)return!1;if(!gF(A,Q))return!1;if(!xF(A,Q))return!1;return!0}function xF(A,Q){let B=yF(A),C=yF(Q);if(!B&&!C)return!0;if(B&&!C||!B&&C)return!1;if(B=B,C=C,C.length!==B.length)return!1;for(let J=0;J<C.length;J++){let I=C[J],q=B[J];if(I.filename!==q.filename||I.lineno!==q.lineno||I.colno!==q.colno||I.function!==q.function)return!1}return!0}function gF(A,Q){let B=A.fingerprint,C=Q.fingerprint;if(!B&&!C)return!0;if(B&&!C||!B&&C)return!1;B=B,C=C;try{return B.join("")===C.join("")}catch(J){return!1}}function SF(A){return A.exception&&A.exception.values&&A.exception.values[0]}function yF(A){let Q=A.exception;if(Q)try{return Q.values[0].stacktrace.frames}catch(B){return}return}var bF="GlobalHandlers",BP=(A={})=>{let Q={onerror:!0,onunhandledrejection:!0,...A};return{name:bF,setupOnce(){Error.stackTraceLimit=50},setup(B){if(Q.onerror)CP(B),vF("onerror");if(Q.onunhandledrejection)JP(B),vF("onunhandledrejection")}}},$K=q2(BP),uF=I2(bF,$K);function CP(A){bq((Q)=>{let{stackParser:B,attachStacktrace:C}=mF();if(a1()!==A||WK())return;let{msg:J,url:I,line:q,column:K,error:Y}=Q,Z=Y===void 0&&qA(J)?KP(J,I,q,K):pF(tB(B,Y||J,void 0,C,!1),I,q,K);Z.level="error",b8(Z,{originalException:Y,mechanism:{handled:!1,type:"onerror"}})})}function JP(A){uq((Q)=>{let{stackParser:B,attachStacktrace:C}=mF();if(a1()!==A||WK())return;let J=IP(Q),I=N6(J)?qP(J):tB(B,J,void 0,C,!0);I.level="error",b8(I,{originalException:J,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function IP(A){if(N6(A))return A;let Q=A;try{if("reason"in Q)return Q.reason;else if("detail"in Q&&"reason"in Q.detail)return Q.detail.reason}catch(B){}return A}function qP(A){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(A)}`}]}}}function KP(A,Q,B,C){let J=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i,I=_5(A)?A.message:A,q="Error",K=I.match(J);if(K)q=K[1],I=K[2];return pF({exception:{values:[{type:q,value:I}]}},Q,B,C)}function pF(A,Q,B,C){let J=A.exception=A.exception||{},I=J.values=J.values||[],q=I[0]=I[0]||{},K=q.stacktrace=q.stacktrace||{},Y=K.frames=K.frames||[],Z=isNaN(parseInt(C,10))?void 0:C,H=isNaN(parseInt(B,10))?void 0:B,G=qA(Q)&&Q.length>0?Q:Lq();if(Y.length===0)Y.push({colno:Z,filename:G,function:"?",in_app:!0,lineno:H});return A}function vF(A){a2&&k0.log(`Global Handler attached: ${A}`)}function mF(){let A=a1();return A&&A.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}var dF="HttpContext",YP=()=>{return{name:dF,setupOnce(){},preprocessEvent(A){if(!H1.navigator&&!H1.location&&!H1.document)return;let Q=A.request&&A.request.url||H1.location&&H1.location.href,{referrer:B}=H1.document||{},{userAgent:C}=H1.navigator||{},J={...A.request&&A.request.headers,...B&&{Referer:B},...C&&{"User-Agent":C}},I={...A.request,...Q&&{url:Q},headers:J};A.request=I}}},RK=q2(YP),cF=I2(dF,RK);var ZP="cause",HP=5,lF="LinkedErrors",XP=(A={})=>{let Q=A.limit||HP,B=A.key||ZP;return{name:lF,setupOnce(){},preprocessEvent(C,J,I){let q=I.getOptions();P8(UK,q.stackParser,q.maxValueLength,B,Q,C,J)}}},LK=q2(XP),sF=I2(lF,LK);var GP=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],nF="TryCatch",WP=(A={})=>{let Q={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...A};return{name:nF,setupOnce(){if(Q.setTimeout)d1(H1,"setTimeout",iF);if(Q.setInterval)d1(H1,"setInterval",iF);if(Q.requestAnimationFrame)d1(H1,"requestAnimationFrame",FP);if(Q.XMLHttpRequest&&"XMLHttpRequest"in H1)d1(XMLHttpRequest.prototype,"send",VP);let B=Q.eventTarget;if(B)(Array.isArray(B)?B:GP).forEach(UP)}}},MK=q2(WP),oF=I2(nF,MK);function iF(A){return function(...Q){let B=Q[0];return Q[0]=v3(B,{mechanism:{data:{function:PA(A)},handled:!1,type:"instrument"}}),A.apply(this,Q)}}function FP(A){return function(Q){return A.apply(this,[v3(Q,{mechanism:{data:{function:"requestAnimationFrame",handler:PA(A)},handled:!1,type:"instrument"}})])}}function VP(A){return function(...Q){let B=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((J)=>{if(J in B&&typeof B[J]==="function")d1(B,J,function(I){let q={mechanism:{data:{function:J,handler:PA(I)},handled:!1,type:"instrument"}},K=L6(I);if(K)q.mechanism.data.handler=PA(K);return v3(I,q)})}),A.apply(this,Q)}}function UP(A){let Q=H1,B=Q[A]&&Q[A].prototype;if(!B||!B.hasOwnProperty||!B.hasOwnProperty("addEventListener"))return;d1(B,"addEventListener",function(C){return function(J,I,q){try{if(typeof I.handleEvent==="function")I.handleEvent=v3(I.handleEvent,{mechanism:{data:{function:"handleEvent",handler:PA(I),target:A},handled:!1,type:"instrument"}})}catch(K){}return C.apply(this,[J,v3(I,{mechanism:{data:{function:"addEventListener",handler:PA(I),target:A},handled:!1,type:"instrument"}}),q])}}),d1(B,"removeEventListener",function(C){return function(J,I,q){let K=I;try{let Y=K&&K.__sentry_wrapped__;if(Y)C.call(this,J,Y,q)}catch(Y){}return C.call(this,J,K,q)}})}var aF=[d8(),c8(),MK(),wK(),$K(),LK(),NK(),RK()];function rF(A){return[...aF]}function OK(A={}){if(A.defaultIntegrations===void 0)A.defaultIntegrations=rF();if(A.release===void 0){if(typeof __SENTRY_RELEASE__==="string")A.release=__SENTRY_RELEASE__;if(H1.SENTRY_RELEASE&&H1.SENTRY_RELEASE.id)A.release=H1.SENTRY_RELEASE.id}if(A.autoSessionTracking===void 0)A.autoSessionTracking=!0;if(A.sendClientReports===void 0)A.sendClientReports=!0;let Q={...A,stackParser:Tq(A.stackParser||PF),integrations:IK(A),transport:A.transport||(_B()?OF:kF)};if(YK(DK,Q),A.autoSessionTracking)zP()}function zP(){if(typeof H1.document==="undefined"){a2&&k0.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}u8({ignoreDuration:!0}),p8(),h8(({from:A,to:Q})=>{if(A!==void 0&&A!==Q)u8({ignoreDuration:!0}),p8()})}var kK={};FW(kK,{TryCatch:()=>oF,LinkedErrors:()=>sF,HttpContext:()=>cF,GlobalHandlers:()=>uF,Dedupe:()=>hF,Breadcrumbs:()=>jF});var tF={};if(H1.Sentry&&H1.Sentry.Integrations)tF=H1.Sentry.Integrations;var Ci={...tF,...wF,...kK};var DP=()=>{let A=new URLSearchParams(window.location.search),Q=window.localStorage.getItem("EK_DEBUG")||!1;return A.has("EK_DEBUG")||Q},j0=(A,...Q)=>{if(A==="e")console.error("EK:",...Q),g5(new Error(JSON.stringify(Q)));else if(DP())console.log("EK:",...Q)};var AV=["2dce6c7f-4b9b-45d8-866b-6e7791cd4b44","6f79acfc-56d5-48fb-8013-36868b9c508b","www.oakfurnitureland.co.uk"],QV=(A)=>{let Q=document.createElement("script");if(Q.type="text/javascript",Q.defer=!0,Q.classList.add("eky-script-tag"),A.deployment)Q.dataset.ekyDistributor=A.deployment;if(A.language)Q.dataset.ekyLanguage=A.language;if(A.identifiers?.sku)Q.dataset.ekySku=A.identifiers.sku;if(A.identifiers?.ean)Q.dataset.ekyEan=A.identifiers.ean;if(A.identifiers?.mpn)Q.dataset.ekyMpn=A.identifiers.mpn;Q.src="//media.pointandplace.com/legacy/pointandplace.js",document.body.appendChild(Q)},BV=(A)=>{let Q={ae:null,ar:"ar",at:"de",au:"en_au",be:"be",br:"br_pt",ch:null,cz:"cs",da:"da",de:"de",en:"en",es:"es",fi:"fi",fr:"fr",gr:"el",hu:"hu",id:"id",ie:"en_ie",in:"id",it:"it",ja:"ja",jo:"ar",js:"en",ko:"ko",kr:"ko",mx:"es",my:"ms",nl:"nl",no:"no",nz:"en_nz",pl:"pl",pt:"pt",ru:"ru",se:"sv",sg:null,sw:null,tr:"tr",ua:"uk",us:"en_us",cs:"cs",el:"el","br-pt":"br_pt",sr:"sr",hr:"hr",ro:"ro",sv:"sv",sk:"sk",bg:"bg",lv:"lv",lt:"lt",hi:"hi",zh:"zh"};return Q[A]?Q[A]:A};var QC=globalThis,BC=QC.ShadowRoot&&(QC.ShadyCSS===void 0||QC.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,PK=Symbol(),CV=new WeakMap;class CC{constructor(A,Q,B){if(this._$cssResult$=!0,B!==PK)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=A,this.t=Q}get styleSheet(){let A=this.o,Q=this.t;if(BC&&A===void 0){let B=Q!==void 0&&Q.length===1;B&&(A=CV.get(Q)),A===void 0&&((this.o=A=new CSSStyleSheet).replaceSync(this.cssText),B&&CV.set(Q,A))}return A}toString(){return this.cssText}}var JC=(A)=>new CC(typeof A=="string"?A:A+"",void 0,PK),U0=(A,...Q)=>{let B=A.length===1?A[0]:Q.reduce((C,J,I)=>C+((q)=>{if(q._$cssResult$===!0)return q.cssText;if(typeof q=="number")return q;throw Error("Value passed to 'css' function must be a 'css' function result: "+q+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(J)+A[I+1],A[0]);return new CC(B,A,PK)},_K=(A,Q)=>{if(BC)A.adoptedStyleSheets=Q.map((B)=>B instanceof CSSStyleSheet?B:B.styleSheet);else for(let B of Q){let C=document.createElement("style"),J=QC.litNonce;J!==void 0&&C.setAttribute("nonce",J),C.textContent=B.cssText,A.appendChild(C)}},IC=BC?(A)=>A:(A)=>A instanceof CSSStyleSheet?((Q)=>{let B="";for(let C of Q.cssRules)B+=C.cssText;return JC(B)})(A):A;var{is:EP,defineProperty:wP,getOwnPropertyDescriptor:NP,getOwnPropertyNames:$P,getOwnPropertySymbols:RP,getPrototypeOf:LP}=Object,qC=globalThis,JV=qC.trustedTypes,MP=JV?JV.emptyScript:"",OP=qC.reactiveElementPolyfillSupport,s8=(A,Q)=>A,i8={toAttribute(A,Q){switch(Q){case Boolean:A=A?MP:null;break;case Object:case Array:A=A==null?A:JSON.stringify(A)}return A},fromAttribute(A,Q){let B=A;switch(Q){case Boolean:B=A!==null;break;case Number:B=A===null?null:Number(A);break;case Object:case Array:try{B=JSON.parse(A)}catch(C){B=null}}return B}},KC=(A,Q)=>!EP(A,Q),IV={attribute:!0,type:String,converter:i8,reflect:!1,hasChanged:KC};Symbol.metadata??=Symbol("metadata"),qC.litPropertyMetadata??=new WeakMap;class b3 extends HTMLElement{static addInitializer(A){this._$Ei(),(this.l??=[]).push(A)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(A,Q=IV){if(Q.state&&(Q.attribute=!1),this._$Ei(),this.elementProperties.set(A,Q),!Q.noAccessor){let B=Symbol(),C=this.getPropertyDescriptor(A,B,Q);C!==void 0&&wP(this.prototype,A,C)}}static getPropertyDescriptor(A,Q,B){let{get:C,set:J}=NP(this.prototype,A)??{get(){return this[Q]},set(I){this[Q]=I}};return{get(){return C?.call(this)},set(I){let q=C?.call(this);J.call(this,I),this.requestUpdate(A,q,B)},configurable:!0,enumerable:!0}}static getPropertyOptions(A){return this.elementProperties.get(A)??IV}static _$Ei(){if(this.hasOwnProperty(s8("elementProperties")))return;let A=LP(this);A.finalize(),A.l!==void 0&&(this.l=[...A.l]),this.elementProperties=new Map(A.elementProperties)}static finalize(){if(this.hasOwnProperty(s8("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(s8("properties"))){let Q=this.properties,B=[...$P(Q),...RP(Q)];for(let C of B)this.createProperty(C,Q[C])}let A=this[Symbol.metadata];if(A!==null){let Q=litPropertyMetadata.get(A);if(Q!==void 0)for(let[B,C]of Q)this.elementProperties.set(B,C)}this._$Eh=new Map;for(let[Q,B]of this.elementProperties){let C=this._$Eu(Q,B);C!==void 0&&this._$Eh.set(C,Q)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(A){let Q=[];if(Array.isArray(A)){let B=new Set(A.flat(1/0).reverse());for(let C of B)Q.unshift(IC(C))}else A!==void 0&&Q.push(IC(A));return Q}static _$Eu(A,Q){let B=Q.attribute;return B===!1?void 0:typeof B=="string"?B:typeof A=="string"?A.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((A)=>this.enableUpdating=A),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((A)=>A(this))}addController(A){(this._$EO??=new Set).add(A),this.renderRoot!==void 0&&this.isConnected&&A.hostConnected?.()}removeController(A){this._$EO?.delete(A)}_$E_(){let A=new Map,Q=this.constructor.elementProperties;for(let B of Q.keys())this.hasOwnProperty(B)&&(A.set(B,this[B]),delete this[B]);A.size>0&&(this._$Ep=A)}createRenderRoot(){let A=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return _K(A,this.constructor.elementStyles),A}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((A)=>A.hostConnected?.())}enableUpdating(A){}disconnectedCallback(){this._$EO?.forEach((A)=>A.hostDisconnected?.())}attributeChangedCallback(A,Q,B){this._$AK(A,B)}_$EC(A,Q){let B=this.constructor.elementProperties.get(A),C=this.constructor._$Eu(A,B);if(C!==void 0&&B.reflect===!0){let J=(B.converter?.toAttribute!==void 0?B.converter:i8).toAttribute(Q,B.type);this._$Em=A,J==null?this.removeAttribute(C):this.setAttribute(C,J),this._$Em=null}}_$AK(A,Q){let B=this.constructor,C=B._$Eh.get(A);if(C!==void 0&&this._$Em!==C){let J=B.getPropertyOptions(C),I=typeof J.converter=="function"?{fromAttribute:J.converter}:J.converter?.fromAttribute!==void 0?J.converter:i8;this._$Em=C,this[C]=I.fromAttribute(Q,J.type),this._$Em=null}}requestUpdate(A,Q,B){if(A!==void 0){if(B??=this.constructor.getPropertyOptions(A),!(B.hasChanged??KC)(this[A],Q))return;this.P(A,Q,B)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(A,Q,B){this._$AL.has(A)||this._$AL.set(A,Q),B.reflect===!0&&this._$Em!==A&&(this._$Ej??=new Set).add(A)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(Q){Promise.reject(Q)}let A=this.scheduleUpdate();return A!=null&&await A,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(let[C,J]of this._$Ep)this[C]=J;this._$Ep=void 0}let B=this.constructor.elementProperties;if(B.size>0)for(let[C,J]of B)J.wrapped!==!0||this._$AL.has(C)||this[C]===void 0||this.P(C,this[C],J)}let A=!1,Q=this._$AL;try{A=this.shouldUpdate(Q),A?(this.willUpdate(Q),this._$EO?.forEach((B)=>B.hostUpdate?.()),this.update(Q)):this._$EU()}catch(B){throw A=!1,this._$EU(),B}A&&this._$AE(Q)}willUpdate(A){}_$AE(A){this._$EO?.forEach((Q)=>Q.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(A)),this.updated(A)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(A){return!0}update(A){this._$Ej&&=this._$Ej.forEach((Q)=>this._$EC(Q,this[Q])),this._$EU()}updated(A){}firstUpdated(A){}}b3.elementStyles=[],b3.shadowRootOptions={mode:"open"},b3[s8("elementProperties")]=new Map,b3[s8("finalized")]=new Map,OP?.({ReactiveElement:b3}),(qC.reactiveElementVersions??=[]).push("2.0.4");var TK=globalThis,YC=TK.trustedTypes,qV=YC?YC.createPolicy("lit-html",{createHTML:(A)=>A}):void 0;var u3=`lit\$${Math.random().toFixed(9).slice(2)}\$`,GV="?"+u3,kP=`<${GV}>`,_6=document,o8=()=>_6.createComment(""),a8=(A)=>A===null||typeof A!="object"&&typeof A!="function",jK=Array.isArray,PP=(A)=>jK(A)||typeof A?.[Symbol.iterator]=="function";var n8=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,KV=/-->/g,YV=/>/g,k6=RegExp(`>|[ \t\n\f\r](?:([^\\s"'>=/]+)([ \t\n\f\r]*=[ \t\n\f\r]*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|\$)`,"g"),ZV=/'/g,HV=/"/g,WV=/^(?:script|style|textarea|title)$/i,SK=(A)=>(Q,...B)=>({_$litType$:A,strings:Q,values:B}),v=SK(1),Gi=SK(2),Wi=SK(3),aA=Symbol.for("lit-noChange"),R1=Symbol.for("lit-nothing"),XV=new WeakMap,P6=_6.createTreeWalker(_6,129);function FV(A,Q){if(!jK(A)||!A.hasOwnProperty("raw"))throw Error("invalid template strings array");return qV!==void 0?qV.createHTML(Q):Q}var _P=(A,Q)=>{let B=A.length-1,C=[],J,I=Q===2?"<svg>":Q===3?"<math>":"",q=n8;for(let K=0;K<B;K++){let Y=A[K],Z,H,G=-1,W=0;for(;W<Y.length&&(q.lastIndex=W,H=q.exec(Y),H!==null);)W=q.lastIndex,q===n8?H[1]==="!--"?q=KV:H[1]!==void 0?q=YV:H[2]!==void 0?(WV.test(H[2])&&(J=RegExp("</"+H[2],"g")),q=k6):H[3]!==void 0&&(q=k6):q===k6?H[0]===">"?(q=J??n8,G=-1):H[1]===void 0?G=-2:(G=q.lastIndex-H[2].length,Z=H[1],q=H[3]===void 0?k6:H[3]==='"'?HV:ZV):q===HV||q===ZV?q=k6:q===KV||q===YV?q=n8:(q=k6,J=void 0);let F=q===k6&&A[K+1].startsWith("/>")?" ":"";I+=q===n8?Y+kP:G>=0?(C.push(Z),Y.slice(0,G)+"$lit$"+Y.slice(G)+u3+F):Y+u3+(G===-2?K:F)}return[FV(A,I+(A[B]||"<?>")+(Q===2?"</svg>":Q===3?"</math>":"")),C]};class r8{constructor({strings:A,_$litType$:Q},B){let C;this.parts=[];let J=0,I=0,q=A.length-1,K=this.parts,[Y,Z]=_P(A,Q);if(this.el=r8.createElement(Y,B),P6.currentNode=this.el.content,Q===2||Q===3){let H=this.el.content.firstChild;H.replaceWith(...H.childNodes)}for(;(C=P6.nextNode())!==null&&K.length<q;){if(C.nodeType===1){if(C.hasAttributes())for(let H of C.getAttributeNames())if(H.endsWith("$lit$")){let G=Z[I++],W=C.getAttribute(H).split(u3),F=/([.?@])?(.*)/.exec(G);K.push({type:1,index:J,name:F[2],strings:W,ctor:F[1]==="."?UV:F[1]==="?"?zV:F[1]==="@"?DV:e8}),C.removeAttribute(H)}else H.startsWith(u3)&&(K.push({type:6,index:J}),C.removeAttribute(H));if(WV.test(C.tagName)){let H=C.textContent.split(u3),G=H.length-1;if(G>0){C.textContent=YC?YC.emptyScript:"";for(let W=0;W<G;W++)C.append(H[W],o8()),P6.nextNode(),K.push({type:2,index:++J});C.append(H[G],o8())}}}else if(C.nodeType===8)if(C.data===GV)K.push({type:2,index:J});else{let H=-1;for(;(H=C.data.indexOf(u3,H+1))!==-1;)K.push({type:7,index:J}),H+=u3.length-1}J++}}static createElement(A,Q){let B=_6.createElement("template");return B.innerHTML=A,B}}function p5(A,Q,B=A,C){if(Q===aA)return Q;let J=C!==void 0?B._$Co?.[C]:B._$Cl,I=a8(Q)?void 0:Q._$litDirective$;return J?.constructor!==I&&(J?._$AO?.(!1),I===void 0?J=void 0:(J=new I(A),J._$AT(A,B,C)),C!==void 0?(B._$Co??=[])[C]=J:B._$Cl=J),J!==void 0&&(Q=p5(A,J._$AS(A,Q.values),J,C)),Q}class VV{constructor(A,Q){this._$AV=[],this._$AN=void 0,this._$AD=A,this._$AM=Q}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(A){let{el:{content:Q},parts:B}=this._$AD,C=(A?.creationScope??_6).importNode(Q,!0);P6.currentNode=C;let J=P6.nextNode(),I=0,q=0,K=B[0];for(;K!==void 0;){if(I===K.index){let Y;K.type===2?Y=new t8(J,J.nextSibling,this,A):K.type===1?Y=new K.ctor(J,K.name,K.strings,this,A):K.type===6&&(Y=new EV(J,this,A)),this._$AV.push(Y),K=B[++q]}I!==K?.index&&(J=P6.nextNode(),I++)}return P6.currentNode=_6,C}p(A){let Q=0;for(let B of this._$AV)B!==void 0&&(B.strings!==void 0?(B._$AI(A,B,Q),Q+=B.strings.length-2):B._$AI(A[Q])),Q++}}class t8{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(A,Q,B,C){this.type=2,this._$AH=R1,this._$AN=void 0,this._$AA=A,this._$AB=Q,this._$AM=B,this.options=C,this._$Cv=C?.isConnected??!0}get parentNode(){let A=this._$AA.parentNode,Q=this._$AM;return Q!==void 0&&A?.nodeType===11&&(A=Q.parentNode),A}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(A,Q=this){A=p5(this,A,Q),a8(A)?A===R1||A==null||A===""?(this._$AH!==R1&&this._$AR(),this._$AH=R1):A!==this._$AH&&A!==aA&&this._(A):A._$litType$!==void 0?this.$(A):A.nodeType!==void 0?this.T(A):PP(A)?this.k(A):this._(A)}O(A){return this._$AA.parentNode.insertBefore(A,this._$AB)}T(A){this._$AH!==A&&(this._$AR(),this._$AH=this.O(A))}_(A){this._$AH!==R1&&a8(this._$AH)?this._$AA.nextSibling.data=A:this.T(_6.createTextNode(A)),this._$AH=A}$(A){let{values:Q,_$litType$:B}=A,C=typeof B=="number"?this._$AC(A):(B.el===void 0&&(B.el=r8.createElement(FV(B.h,B.h[0]),this.options)),B);if(this._$AH?._$AD===C)this._$AH.p(Q);else{let J=new VV(C,this),I=J.u(this.options);J.p(Q),this.T(I),this._$AH=J}}_$AC(A){let Q=XV.get(A.strings);return Q===void 0&&XV.set(A.strings,Q=new r8(A)),Q}k(A){jK(this._$AH)||(this._$AH=[],this._$AR());let Q=this._$AH,B,C=0;for(let J of A)C===Q.length?Q.push(B=new t8(this.O(o8()),this.O(o8()),this,this.options)):B=Q[C],B._$AI(J),C++;C<Q.length&&(this._$AR(B&&B._$AB.nextSibling,C),Q.length=C)}_$AR(A=this._$AA.nextSibling,Q){for(this._$AP?.(!1,!0,Q);A&&A!==this._$AB;){let B=A.nextSibling;A.remove(),A=B}}setConnected(A){this._$AM===void 0&&(this._$Cv=A,this._$AP?.(A))}}class e8{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(A,Q,B,C,J){this.type=1,this._$AH=R1,this._$AN=void 0,this.element=A,this.name=Q,this._$AM=C,this.options=J,B.length>2||B[0]!==""||B[1]!==""?(this._$AH=Array(B.length-1).fill(new String),this.strings=B):this._$AH=R1}_$AI(A,Q=this,B,C){let J=this.strings,I=!1;if(J===void 0)A=p5(this,A,Q,0),I=!a8(A)||A!==this._$AH&&A!==aA,I&&(this._$AH=A);else{let q=A,K,Y;for(A=J[0],K=0;K<J.length-1;K++)Y=p5(this,q[B+K],Q,K),Y===aA&&(Y=this._$AH[K]),I||=!a8(Y)||Y!==this._$AH[K],Y===R1?A=R1:A!==R1&&(A+=(Y??"")+J[K+1]),this._$AH[K]=Y}I&&!C&&this.j(A)}j(A){A===R1?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,A??"")}}class UV extends e8{constructor(){super(...arguments),this.type=3}j(A){this.element[this.name]=A===R1?void 0:A}}class zV extends e8{constructor(){super(...arguments),this.type=4}j(A){this.element.toggleAttribute(this.name,!!A&&A!==R1)}}class DV extends e8{constructor(A,Q,B,C,J){super(A,Q,B,C,J),this.type=5}_$AI(A,Q=this){if((A=p5(this,A,Q,0)??R1)===aA)return;let B=this._$AH,C=A===R1&&B!==R1||A.capture!==B.capture||A.once!==B.once||A.passive!==B.passive,J=A!==R1&&(B===R1||C);C&&this.element.removeEventListener(this.name,this,B),J&&this.element.addEventListener(this.name,this,A),this._$AH=A}handleEvent(A){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,A):this._$AH.handleEvent(A)}}class EV{constructor(A,Q,B){this.element=A,this.type=6,this._$AN=void 0,this._$AM=Q,this.options=B}get _$AU(){return this._$AM._$AU}_$AI(A){p5(this,A)}}var TP=TK.litHtmlPolyfillSupport;TP?.(r8,t8),(TK.litHtmlVersions??=[]).push("3.2.1");var wV=(A,Q,B)=>{let C=B?.renderBefore??Q,J=C._$litPart$;if(J===void 0){let I=B?.renderBefore??null;C._$litPart$=J=new t8(Q.insertBefore(o8(),I),I,void 0,B??{})}return J._$AI(A),J};class y0 extends b3{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){let A=super.createRenderRoot();return this.renderOptions.renderBefore??=A.firstChild,A}update(A){let Q=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(A),this._$Do=wV(Q,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return aA}}y0._$litElement$=!0,y0.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:y0});var jP=globalThis.litElementPolyfillSupport;jP?.({LitElement:y0});(globalThis.litElementVersions??=[]).push("4.1.1");var z0=(A)=>(Q,B)=>{B!==void 0?B.addInitializer(()=>{customElements.define(A,Q)}):customElements.define(A,Q)};var SP={attribute:!0,type:String,converter:i8,reflect:!1,hasChanged:KC},yP=(A=SP,Q,B)=>{let{kind:C,metadata:J}=B,I=globalThis.litPropertyMetadata.get(J);if(I===void 0&&globalThis.litPropertyMetadata.set(J,I=new Map),I.set(B.name,A),C==="accessor"){let{name:q}=B;return{set(K){let Y=Q.get.call(this);Q.set.call(this,K),this.requestUpdate(q,Y,A)},init(K){return K!==void 0&&this.P(q,void 0,A),K}}}if(C==="setter"){let{name:q}=B;return function(K){let Y=this[q];Q.call(this,K),this.requestUpdate(q,Y,A)}}throw Error("Unsupported decorator location: "+C)};function a(A){return(Q,B)=>typeof B=="object"?yP(A,Q,B):((C,J,I)=>{let q=J.hasOwnProperty(I);return J.constructor.createProperty(I,q?{...C,wrapped:!0}:C),q?Object.getOwnPropertyDescriptor(J,I):void 0})(A,Q,B)}function K0(A){return a({...A,state:!0,attribute:!1})}var p3=(A,Q,B)=>(B.configurable=!0,B.enumerable=!0,Reflect.decorate&&typeof Q!="object"&&Object.defineProperty(A,Q,B),B);function X1(A,Q){return(B,C,J)=>{let I=(q)=>q.renderRoot?.querySelector(A)??null;if(Q){let{get:q,set:K}=typeof C=="object"?B:J??(()=>{let Y=Symbol();return{get(){return this[Y]},set(Z){this[Y]=Z}}})();return p3(B,C,{get(){let Y=q.call(this);return Y===void 0&&(Y=I(this),(Y!==null||this.hasUpdated)&&K.call(this,Y)),Y}})}return p3(B,C,{get(){return I(this)}})}}var fP;function ZC(A){return(Q,B)=>p3(Q,B,{get(){return(this.renderRoot??(fP??=document.createDocumentFragment())).querySelectorAll(A)}})}var NV=(A,Q,B)=>{if(B.position==="before")A.before(Q);else A.after(Q)};var $V=(A,Q,B)=>{if(B.position==="first")A.prepend(Q);else if(B.position==="last")A.appendChild(Q);else if(B.position==="nth")if(B.nthOptions&&typeof B.nthOptions.index==="number"){let C=B.nthOptions.index;if(C>=0)if(A.children.length>C)A.insertBefore(Q,A.children[C]);else A.appendChild(Q);else j0("e","Invalid 'nth' value for ChildPlacement")}else j0("e","missing value for placement.nthOptions.index");else j0("e","Invalid position value for ChildPlacement")};var yK=["top","right","bottom","left"],RV=["start","end"],fK=yK.reduce((A,Q)=>A.concat(Q,Q+"-"+RV[0],Q+"-"+RV[1]),[]),m5=Math.min,e4=Math.max,B9=Math.round,C9=Math.floor,A3=(A)=>({x:A,y:A}),hP={left:"right",right:"left",bottom:"top",top:"bottom"},xP={start:"end",end:"start"};function hK(A,Q,B){return e4(A,m5(Q,B))}function Q3(A,Q){return typeof A==="function"?A(Q):A}function rA(A){return A.split("-")[0]}function O4(A){return A.split("-")[1]}function HC(A){return A==="x"?"y":"x"}function xK(A){return A==="y"?"height":"width"}function m3(A){return["top","bottom"].includes(rA(A))?"y":"x"}function gK(A){return HC(m3(A))}function vK(A,Q,B){if(B===void 0)B=!1;let C=O4(A),J=gK(A),I=xK(J),q=J==="x"?C===(B?"end":"start")?"right":"left":C==="start"?"bottom":"top";if(Q.reference[I]>Q.floating[I])q=Q9(q);return[q,Q9(q)]}function LV(A){let Q=Q9(A);return[A9(A),Q,A9(Q)]}function A9(A){return A.replace(/start|end/g,(Q)=>xP[Q])}function gP(A,Q,B){let C=["left","right"],J=["right","left"],I=["top","bottom"],q=["bottom","top"];switch(A){case"top":case"bottom":if(B)return Q?J:C;return Q?C:J;case"left":case"right":return Q?I:q;default:return[]}}function MV(A,Q,B,C){let J=O4(A),I=gP(rA(A),B==="start",C);if(J){if(I=I.map((q)=>q+"-"+J),Q)I=I.concat(I.map(A9))}return I}function Q9(A){return A.replace(/left|right|bottom|top/g,(Q)=>hP[Q])}function vP(A){return{top:0,right:0,bottom:0,left:0,...A}}function OV(A){return typeof A!=="number"?vP(A):{top:A,right:A,bottom:A,left:A}}function T6(A){let{x:Q,y:B,width:C,height:J}=A;return{width:C,height:J,top:B,left:Q,right:Q+C,bottom:B+J,x:Q,y:B}}function kV(A,Q,B){let{reference:C,floating:J}=A,I=m3(Q),q=gK(Q),K=xK(q),Y=rA(Q),Z=I==="y",H=C.x+C.width/2-J.width/2,G=C.y+C.height/2-J.height/2,W=C[K]/2-J[K]/2,F;switch(Y){case"top":F={x:H,y:C.y-J.height};break;case"bottom":F={x:H,y:C.y+C.height};break;case"right":F={x:C.x+C.width,y:G};break;case"left":F={x:C.x-J.width,y:G};break;default:F={x:C.x,y:C.y}}switch(O4(Q)){case"start":F[q]-=W*(B&&Z?-1:1);break;case"end":F[q]+=W*(B&&Z?-1:1);break}return F}var TV=async(A,Q,B)=>{let{placement:C="bottom",strategy:J="absolute",middleware:I=[],platform:q}=B,K=I.filter(Boolean),Y=await(q.isRTL==null?void 0:q.isRTL(Q)),Z=await q.getElementRects({reference:A,floating:Q,strategy:J}),{x:H,y:G}=kV(Z,C,Y),W=C,F={},z=0;for(let U=0;U<K.length;U++){let{name:E,fn:w}=K[U],{x:L,y:X,data:V,reset:D}=await w({x:H,y:G,initialPlacement:C,placement:W,strategy:J,middlewareData:F,rects:Z,platform:q,elements:{reference:A,floating:Q}});if(H=L!=null?L:H,G=X!=null?X:G,F={...F,[E]:{...F[E],...V}},D&&z<=50){if(z++,typeof D==="object"){if(D.placement)W=D.placement;if(D.rects)Z=D.rects===!0?await q.getElementRects({reference:A,floating:Q,strategy:J}):D.rects;({x:H,y:G}=kV(Z,W,Y))}U=-1}}return{x:H,y:G,placement:W,strategy:J,middlewareData:F}};async function d5(A,Q){var B;if(Q===void 0)Q={};let{x:C,y:J,platform:I,rects:q,elements:K,strategy:Y}=A,{boundary:Z="clippingAncestors",rootBoundary:H="viewport",elementContext:G="floating",altBoundary:W=!1,padding:F=0}=Q3(Q,A),z=OV(F),E=K[W?G==="floating"?"reference":"floating":G],w=T6(await I.getClippingRect({element:((B=await(I.isElement==null?void 0:I.isElement(E)))!=null?B:!0)?E:E.contextElement||await(I.getDocumentElement==null?void 0:I.getDocumentElement(K.floating)),boundary:Z,rootBoundary:H,strategy:Y})),L=G==="floating"?{x:C,y:J,width:q.floating.width,height:q.floating.height}:q.reference,X=await(I.getOffsetParent==null?void 0:I.getOffsetParent(K.floating)),V=await(I.isElement==null?void 0:I.isElement(X))?await(I.getScale==null?void 0:I.getScale(X))||{x:1,y:1}:{x:1,y:1},D=T6(I.convertOffsetParentRelativeRectToViewportRelativeRect?await I.convertOffsetParentRelativeRectToViewportRelativeRect({elements:K,rect:L,offsetParent:X,strategy:Y}):L);return{top:(w.top-D.top+z.top)/V.y,bottom:(D.bottom-w.bottom+z.bottom)/V.y,left:(w.left-D.left+z.left)/V.x,right:(D.right-w.right+z.right)/V.x}}function bP(A,Q,B){return(A?[...B.filter((J)=>O4(J)===A),...B.filter((J)=>O4(J)!==A)]:B.filter((J)=>rA(J)===J)).filter((J)=>{if(A)return O4(J)===A||(Q?A9(J)!==J:!1);return!0})}var jV=function(A){if(A===void 0)A={};return{name:"autoPlacement",options:A,async fn(Q){var B,C,J;let{rects:I,middlewareData:q,placement:K,platform:Y,elements:Z}=Q,{crossAxis:H=!1,alignment:G,allowedPlacements:W=fK,autoAlignment:F=!0,...z}=Q3(A,Q),U=G!==void 0||W===fK?bP(G||null,F,W):W,E=await d5(Q,z),w=((B=q.autoPlacement)==null?void 0:B.index)||0,L=U[w];if(L==null)return{};let X=vK(L,I,await(Y.isRTL==null?void 0:Y.isRTL(Z.floating)));if(K!==L)return{reset:{placement:U[0]}};let V=[E[rA(L)],E[X[0]],E[X[1]]],D=[...((C=q.autoPlacement)==null?void 0:C.overflows)||[],{placement:L,overflows:V}],N=U[w+1];if(N)return{data:{index:w+1,overflows:D},reset:{placement:N}};let R=D.map(($)=>{let _=O4($.placement);return[$.placement,_&&H?$.overflows.slice(0,2).reduce((h,S)=>h+S,0):$.overflows[0],$.overflows]}).sort(($,_)=>$[1]-_[1]),P=((J=R.filter(($)=>$[2].slice(0,O4($[0])?2:3).every((_)=>_<=0))[0])==null?void 0:J[0])||R[0][0];if(P!==K)return{data:{index:w+1,overflows:D},reset:{placement:P}};return{}}}},SV=function(A){if(A===void 0)A={};return{name:"flip",options:A,async fn(Q){var B,C;let{placement:J,middlewareData:I,rects:q,initialPlacement:K,platform:Y,elements:Z}=Q,{mainAxis:H=!0,crossAxis:G=!0,fallbackPlacements:W,fallbackStrategy:F="bestFit",fallbackAxisSideDirection:z="none",flipAlignment:U=!0,...E}=Q3(A,Q);if((B=I.arrow)!=null&&B.alignmentOffset)return{};let w=rA(J),L=m3(K),X=rA(K)===K,V=await(Y.isRTL==null?void 0:Y.isRTL(Z.floating)),D=W||(X||!U?[Q9(K)]:LV(K)),N=z!=="none";if(!W&&N)D.push(...MV(K,U,z,V));let R=[K,...D],k=await d5(Q,E),P=[],$=((C=I.flip)==null?void 0:C.overflows)||[];if(H)P.push(k[w]);if(G){let O=vK(J,q,V);P.push(k[O[0]],k[O[1]])}if($=[...$,{placement:J,overflows:P}],!P.every((O)=>O<=0)){var _,h;let O=(((_=I.flip)==null?void 0:_.index)||0)+1,M=R[O];if(M)return{data:{index:O,overflows:$},reset:{placement:M}};let y=(h=$.filter((u)=>u.overflows[0]<=0).sort((u,T)=>u.overflows[1]-T.overflows[1])[0])==null?void 0:h.placement;if(!y)switch(F){case"bestFit":{var S;let u=(S=$.filter((T)=>{if(N){let d=m3(T.placement);return d===L||d==="y"}return!0}).map((T)=>[T.placement,T.overflows.filter((d)=>d>0).reduce((d,g)=>d+g,0)]).sort((T,d)=>T[1]-d[1])[0])==null?void 0:S[0];if(u)y=u;break}case"initialPlacement":y=K;break}if(J!==y)return{reset:{placement:y}}}return{}}}};function PV(A,Q){return{top:A.top-Q.height,right:A.right-Q.width,bottom:A.bottom-Q.height,left:A.left-Q.width}}function _V(A){return yK.some((Q)=>A[Q]>=0)}var yV=function(A){if(A===void 0)A={};return{name:"hide",options:A,async fn(Q){let{rects:B}=Q,{strategy:C="referenceHidden",...J}=Q3(A,Q);switch(C){case"referenceHidden":{let I=await d5(Q,{...J,elementContext:"reference"}),q=PV(I,B.reference);return{data:{referenceHiddenOffsets:q,referenceHidden:_V(q)}}}case"escaped":{let I=await d5(Q,{...J,altBoundary:!0}),q=PV(I,B.floating);return{data:{escapedOffsets:q,escaped:_V(q)}}}default:return{}}}}};async function uP(A,Q){let{placement:B,platform:C,elements:J}=A,I=await(C.isRTL==null?void 0:C.isRTL(J.floating)),q=rA(B),K=O4(B),Y=m3(B)==="y",Z=["left","top"].includes(q)?-1:1,H=I&&Y?-1:1,G=Q3(Q,A),{mainAxis:W,crossAxis:F,alignmentAxis:z}=typeof G==="number"?{mainAxis:G,crossAxis:0,alignmentAxis:null}:{mainAxis:G.mainAxis||0,crossAxis:G.crossAxis||0,alignmentAxis:G.alignmentAxis};if(K&&typeof z==="number")F=K==="end"?z*-1:z;return Y?{x:F*H,y:W*Z}:{x:W*Z,y:F*H}}var jA=function(A){if(A===void 0)A=0;return{name:"offset",options:A,async fn(Q){var B,C;let{x:J,y:I,placement:q,middlewareData:K}=Q,Y=await uP(Q,A);if(q===((B=K.offset)==null?void 0:B.placement)&&(C=K.arrow)!=null&&C.alignmentOffset)return{};return{x:J+Y.x,y:I+Y.y,data:{...Y,placement:q}}}}},fV=function(A){if(A===void 0)A={};return{name:"shift",options:A,async fn(Q){let{x:B,y:C,placement:J}=Q,{mainAxis:I=!0,crossAxis:q=!1,limiter:K={fn:(E)=>{let{x:w,y:L}=E;return{x:w,y:L}}},...Y}=Q3(A,Q),Z={x:B,y:C},H=await d5(Q,Y),G=m3(rA(J)),W=HC(G),F=Z[W],z=Z[G];if(I){let E=W==="y"?"top":"left",w=W==="y"?"bottom":"right",L=F+H[E],X=F-H[w];F=hK(L,F,X)}if(q){let E=G==="y"?"top":"left",w=G==="y"?"bottom":"right",L=z+H[E],X=z-H[w];z=hK(L,z,X)}let U=K.fn({...Q,[W]:F,[G]:z});return{...U,data:{x:U.x-B,y:U.y-C,enabled:{[W]:I,[G]:q}}}}}},hV=function(A){if(A===void 0)A={};return{options:A,fn(Q){let{x:B,y:C,placement:J,rects:I,middlewareData:q}=Q,{offset:K=0,mainAxis:Y=!0,crossAxis:Z=!0}=Q3(A,Q),H={x:B,y:C},G=m3(J),W=HC(G),F=H[W],z=H[G],U=Q3(K,Q),E=typeof U==="number"?{mainAxis:U,crossAxis:0}:{mainAxis:0,crossAxis:0,...U};if(Y){let X=W==="y"?"height":"width",V=I.reference[W]-I.floating[X]+E.mainAxis,D=I.reference[W]+I.reference[X]-E.mainAxis;if(F<V)F=V;else if(F>D)F=D}if(Z){var w,L;let X=W==="y"?"width":"height",V=["top","left"].includes(rA(J)),D=I.reference[G]-I.floating[X]+(V?((w=q.offset)==null?void 0:w[G])||0:0)+(V?0:E.crossAxis),N=I.reference[G]+I.reference[X]+(V?0:((L=q.offset)==null?void 0:L[G])||0)-(V?E.crossAxis:0);if(z<D)z=D;else if(z>N)z=N}return{[W]:F,[G]:z}}}};function XC(){return typeof window!=="undefined"}function B3(A){if(gV(A))return(A.nodeName||"").toLowerCase();return"#document"}function HA(A){var Q;return(A==null||(Q=A.ownerDocument)==null?void 0:Q.defaultView)||window}function k4(A){var Q;return(Q=(gV(A)?A.ownerDocument:A.document)||window.document)==null?void 0:Q.documentElement}function gV(A){if(!XC())return!1;return A instanceof Node||A instanceof HA(A).Node}function tA(A){if(!XC())return!1;return A instanceof Element||A instanceof HA(A).Element}function eA(A){if(!XC())return!1;return A instanceof HTMLElement||A instanceof HA(A).HTMLElement}function xV(A){if(!XC()||typeof ShadowRoot==="undefined")return!1;return A instanceof ShadowRoot||A instanceof HA(A).ShadowRoot}function l5(A){let{overflow:Q,overflowX:B,overflowY:C,display:J}=NA(A);return/auto|scroll|overlay|hidden|clip/.test(Q+C+B)&&!["inline","contents"].includes(J)}function vV(A){return["table","td","th"].includes(B3(A))}function pP(A){return[":popover-open",":modal"].some((Q)=>{try{return A.matches(Q)}catch(B){return!1}})}function GC(A){let Q=WC(),B=tA(A)?NA(A):A;return["transform","translate","scale","rotate","perspective"].some((C)=>B[C]?B[C]!=="none":!1)||(B.containerType?B.containerType!=="normal":!1)||!Q&&(B.backdropFilter?B.backdropFilter!=="none":!1)||!Q&&(B.filter?B.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some((C)=>(B.willChange||"").includes(C))||["paint","layout","strict","content"].some((C)=>(B.contain||"").includes(C))}function bV(A){let Q=j6(A);while(eA(Q)&&!J9(Q)){if(GC(Q))return Q;else if(pP(Q))return null;Q=j6(Q)}return null}function WC(){if(typeof CSS==="undefined"||!CSS.supports)return!1;return CSS.supports("-webkit-backdrop-filter","none")}function J9(A){return["html","body","#document"].includes(B3(A))}function NA(A){return HA(A).getComputedStyle(A)}function I9(A){if(tA(A))return{scrollLeft:A.scrollLeft,scrollTop:A.scrollTop};return{scrollLeft:A.scrollX,scrollTop:A.scrollY}}function j6(A){if(B3(A)==="html")return A;let Q=A.assignedSlot||A.parentNode||xV(A)&&A.host||k4(A);return xV(Q)?Q.host:Q}function uV(A){let Q=j6(A);if(J9(Q))return A.ownerDocument?A.ownerDocument.body:A.body;if(eA(Q)&&l5(Q))return Q;return uV(Q)}function c5(A,Q,B){var C;if(Q===void 0)Q=[];if(B===void 0)B=!0;let J=uV(A),I=J===((C=A.ownerDocument)==null?void 0:C.body),q=HA(J);if(I){let K=mP(q);return Q.concat(q,q.visualViewport||[],l5(J)?J:[],K&&B?c5(K):[])}return Q.concat(J,c5(J,[],B))}function mP(A){return A.parent&&Object.getPrototypeOf(A.parent)?A.frameElement:null}function dV(A){let Q=NA(A),B=parseFloat(Q.width)||0,C=parseFloat(Q.height)||0,J=eA(A),I=J?A.offsetWidth:B,q=J?A.offsetHeight:C,K=B9(B)!==I||B9(C)!==q;if(K)B=I,C=q;return{width:B,height:C,$:K}}function bK(A){return!tA(A)?A.contextElement:A}function s5(A){let Q=bK(A);if(!eA(Q))return A3(1);let B=Q.getBoundingClientRect(),{width:C,height:J,$:I}=dV(Q),q=(I?B9(B.width):B.width)/C,K=(I?B9(B.height):B.height)/J;if(!q||!Number.isFinite(q))q=1;if(!K||!Number.isFinite(K))K=1;return{x:q,y:K}}var dP=A3(0);function cV(A){let Q=HA(A);if(!WC()||!Q.visualViewport)return dP;return{x:Q.visualViewport.offsetLeft,y:Q.visualViewport.offsetTop}}function cP(A,Q,B){if(Q===void 0)Q=!1;if(!B||Q&&B!==HA(A))return!1;return Q}function S6(A,Q,B,C){if(Q===void 0)Q=!1;if(B===void 0)B=!1;let J=A.getBoundingClientRect(),I=bK(A),q=A3(1);if(Q)if(C){if(tA(C))q=s5(C)}else q=s5(A);let K=cP(I,B,C)?cV(I):A3(0),Y=(J.left+K.x)/q.x,Z=(J.top+K.y)/q.y,H=J.width/q.x,G=J.height/q.y;if(I){let W=HA(I),F=C&&tA(C)?HA(C):C,z=W,U=z.frameElement;while(U&&C&&F!==z){let E=s5(U),w=U.getBoundingClientRect(),L=NA(U),X=w.left+(U.clientLeft+parseFloat(L.paddingLeft))*E.x,V=w.top+(U.clientTop+parseFloat(L.paddingTop))*E.y;Y*=E.x,Z*=E.y,H*=E.x,G*=E.y,Y+=X,Z+=V,z=HA(U),U=z.frameElement}}return T6({width:H,height:G,x:Y,y:Z})}var lP=[":popover-open",":modal"];function lV(A){return lP.some((Q)=>{try{return A.matches(Q)}catch(B){return!1}})}function sP(A){let{elements:Q,rect:B,offsetParent:C,strategy:J}=A,I=J==="fixed",q=k4(C),K=Q?lV(Q.floating):!1;if(C===q||K&&I)return B;let Y={scrollLeft:0,scrollTop:0},Z=A3(1),H=A3(0),G=eA(C);if(G||!G&&!I){if(B3(C)!=="body"||l5(q))Y=I9(C);if(eA(C)){let W=S6(C);Z=s5(C),H.x=W.x+C.clientLeft,H.y=W.y+C.clientTop}}return{width:B.width*Z.x,height:B.height*Z.y,x:B.x*Z.x-Y.scrollLeft*Z.x+H.x,y:B.y*Z.y-Y.scrollTop*Z.y+H.y}}function iP(A){return Array.from(A.getClientRects())}function sV(A){return S6(k4(A)).left+I9(A).scrollLeft}function nP(A){let Q=k4(A),B=I9(A),C=A.ownerDocument.body,J=e4(Q.scrollWidth,Q.clientWidth,C.scrollWidth,C.clientWidth),I=e4(Q.scrollHeight,Q.clientHeight,C.scrollHeight,C.clientHeight),q=-B.scrollLeft+sV(A),K=-B.scrollTop;if(NA(C).direction==="rtl")q+=e4(Q.clientWidth,C.clientWidth)-J;return{width:J,height:I,x:q,y:K}}function oP(A,Q){let B=HA(A),C=k4(A),J=B.visualViewport,I=C.clientWidth,q=C.clientHeight,K=0,Y=0;if(J){I=J.width,q=J.height;let Z=WC();if(!Z||Z&&Q==="fixed")K=J.offsetLeft,Y=J.offsetTop}return{width:I,height:q,x:K,y:Y}}function aP(A,Q){let B=S6(A,!0,Q==="fixed"),C=B.top+A.clientTop,J=B.left+A.clientLeft,I=eA(A)?s5(A):A3(1),q=A.clientWidth*I.x,K=A.clientHeight*I.y,Y=J*I.x,Z=C*I.y;return{width:q,height:K,x:Y,y:Z}}function pV(A,Q,B){let C;if(Q==="viewport")C=oP(A,B);else if(Q==="document")C=nP(k4(A));else if(tA(Q))C=aP(Q,B);else{let J=cV(A);C={...Q,x:Q.x-J.x,y:Q.y-J.y}}return T6(C)}function iV(A,Q){let B=j6(A);if(B===Q||!tA(B)||J9(B))return!1;return NA(B).position==="fixed"||iV(B,Q)}function rP(A,Q){let B=Q.get(A);if(B)return B;let C=c5(A,[],!1).filter((K)=>tA(K)&&B3(K)!=="body"),J=null,I=NA(A).position==="fixed",q=I?j6(A):A;while(tA(q)&&!J9(q)){let K=NA(q),Y=GC(q);if(!Y&&K.position==="fixed")J=null;if(I?!Y&&!J:!Y&&K.position==="static"&&!!J&&["absolute","fixed"].includes(J.position)||l5(q)&&!Y&&iV(A,q))C=C.filter((H)=>H!==q);else J=K;q=j6(q)}return Q.set(A,C),C}function tP(A){let{element:Q,boundary:B,rootBoundary:C,strategy:J}=A,q=[...B==="clippingAncestors"?rP(Q,this._c):[].concat(B),C],K=q[0],Y=q.reduce((Z,H)=>{let G=pV(Q,H,J);return Z.top=e4(G.top,Z.top),Z.right=m5(G.right,Z.right),Z.bottom=m5(G.bottom,Z.bottom),Z.left=e4(G.left,Z.left),Z},pV(Q,K,J));return{width:Y.right-Y.left,height:Y.bottom-Y.top,x:Y.left,y:Y.top}}function eP(A){let{width:Q,height:B}=dV(A);return{width:Q,height:B}}function A_(A,Q,B){let C=eA(Q),J=k4(Q),I=B==="fixed",q=S6(A,!0,I,Q),K={scrollLeft:0,scrollTop:0},Y=A3(0);if(C||!C&&!I){if(B3(Q)!=="body"||l5(J))K=I9(Q);if(C){let G=S6(Q,!0,I,Q);Y.x=G.x+Q.clientLeft,Y.y=G.y+Q.clientTop}else if(J)Y.x=sV(J)}let Z=q.left+K.scrollLeft-Y.x,H=q.top+K.scrollTop-Y.y;return{x:Z,y:H,width:q.width,height:q.height}}function mV(A,Q){if(!eA(A)||NA(A).position==="fixed")return null;if(Q)return Q(A);return A.offsetParent}function nV(A,Q){let B=HA(A);if(!eA(A)||lV(A))return B;let C=mV(A,Q);while(C&&vV(C)&&NA(C).position==="static")C=mV(C,Q);if(C&&(B3(C)==="html"||B3(C)==="body"&&NA(C).position==="static"&&!GC(C)))return B;return C||bV(A)||B}var Q_=async function(A){let Q=this.getOffsetParent||nV,B=this.getDimensions;return{reference:A_(A.reference,await Q(A.floating),A.strategy),floating:{x:0,y:0,...await B(A.floating)}}};function B_(A){return NA(A).direction==="rtl"}var C_={convertOffsetParentRelativeRectToViewportRelativeRect:sP,getDocumentElement:k4,getClippingRect:tP,getOffsetParent:nV,getElementRects:Q_,getClientRects:iP,getDimensions:eP,getScale:s5,isElement:tA,isRTL:B_};function J_(A,Q){let B=null,C,J=k4(A);function I(){var K;clearTimeout(C),(K=B)==null||K.disconnect(),B=null}function q(K,Y){if(K===void 0)K=!1;if(Y===void 0)Y=1;I();let{left:Z,top:H,width:G,height:W}=A.getBoundingClientRect();if(!K)Q();if(!G||!W)return;let F=C9(H),z=C9(J.clientWidth-(Z+G)),U=C9(J.clientHeight-(H+W)),E=C9(Z),L={rootMargin:-F+"px "+-z+"px "+-U+"px "+-E+"px",threshold:e4(0,m5(1,Y))||1},X=!0;function V(D){let N=D[0].intersectionRatio;if(N!==Y){if(!X)return q();if(!N)C=setTimeout(()=>{q(!1,0.0000001)},100);else q(!1,N)}X=!1}try{B=new IntersectionObserver(V,{...L,root:J.ownerDocument})}catch(D){B=new IntersectionObserver(V,L)}B.observe(A)}return q(!0),I}function oV(A,Q,B,C){if(C===void 0)C={};let{ancestorScroll:J=!0,ancestorResize:I=!0,elementResize:q=typeof ResizeObserver==="function",layoutShift:K=typeof IntersectionObserver==="function",animationFrame:Y=!1}=C,Z=bK(A),H=J||I?[...Z?c5(Z):[],...c5(Q)]:[];H.forEach((w)=>{J&&w.addEventListener("scroll",B,{passive:!0}),I&&w.addEventListener("resize",B)});let G=Z&&K?J_(Z,B):null,W=-1,F=null;if(q){if(F=new ResizeObserver((w)=>{let[L]=w;if(L&&L.target===Z&&F)F.unobserve(Q),cancelAnimationFrame(W),W=requestAnimationFrame(()=>{var X;(X=F)==null||X.observe(Q)});B()}),Z&&!Y)F.observe(Z);F.observe(Q)}let z,U=Y?S6(A):null;if(Y)E();function E(){let w=S6(A);if(U&&(w.x!==U.x||w.y!==U.y||w.width!==U.width||w.height!==U.height))B();U=w,z=requestAnimationFrame(E)}return B(),()=>{var w;if(H.forEach((L)=>{J&&L.removeEventListener("scroll",B),I&&L.removeEventListener("resize",B)}),G==null||G(),(w=F)==null||w.disconnect(),F=null,Y)cancelAnimationFrame(z)}}var aV=jV,uK=fV,rV=SV;var tV=yV;var pK=hV,eV=(A,Q,B)=>{let C=new Map,J={platform:C_,...B},I={...J.platform,_c:C};return TV(A,Q,{...J,platform:I})};var AU=(A,Q,B,C)=>{if(C===!0)if(B.coreConfig.placeOnSelector===!0)A.appendChild(Q);else document.body.appendChild(Q);let J={middleware:[]},{coreConfig:I}=B;if(I.strategy==="absolute")Q.style.position=I.strategy;else if(I.strategy==="fixed")Q.style.position=I.strategy;else throw console.error("EK: Unknown placement strategy: ",B),new Error("Unknown placement strategy");if(B.middlewareConfig?.offset?.enabled===!0){let{mainAxis:K,crossAxis:Y,alignmentAxis:Z}=B.middlewareConfig.offset.config;J.middleware.push(jA({mainAxis:K||0,crossAxis:Y||0,alignmentAxis:Z||0}))}if(B.middlewareConfig?.flip?.enabled===!0){let{mainAxis:K,crossAxis:Y}=B.middlewareConfig.flip.config;J.middleware.push(rV({mainAxis:K??void 0,crossAxis:Y??void 0}))}if(B.middlewareConfig?.shift?.enabled===!0){let{mainAxis:K,crossAxis:Y}=B.middlewareConfig.shift.config;J.middleware.push(uK({mainAxis:K??void 0,crossAxis:Y??void 0,limiter:pK()}))}if(B.middlewareConfig?.hide?.enabled===!0)J.middleware.push(tV());if(I.placement==="auto")J.middleware.push(aV({padding:5})),J.middleware.push(uK({crossAxis:!0,limiter:pK()}));else if(I.placement==="center")J.placement="bottom",J.middleware.push(jA(({rects:K})=>-K.reference.height/2-K.floating.height/2));else if(I.placement==="inner-left-top")J.placement="left-start",J.middleware.push(jA(({rects:K})=>{return-K.floating.width}));else if(I.placement==="inner-left")J.placement="left",J.middleware.push(jA(({rects:K})=>{return-K.floating.width}));else if(I.placement==="inner-left-bottom")J.placement="left-end",J.middleware.push(jA(({rects:K})=>{return-K.floating.width}));else if(I.placement==="inner-right-top")J.placement="right-start",J.middleware.push(jA(({rects:K})=>{return-K.floating.width}));else if(I.placement==="inner-right")J.placement="right",J.middleware.push(jA(({rects:K})=>{return-K.floating.width}));else if(I.placement==="inner-right-bottom")J.placement="right-end",J.middleware.push(jA(({rects:K})=>{return-K.floating.width}));else if(I.placement==="inner-top")J.placement="top",J.middleware.push(jA(({rects:K})=>{return-K.floating.width}));else if(I.placement==="inner-bottom")J.placement="bottom",J.middleware.push(jA(({rects:K})=>{return-K.floating.width}));else J.placement=I.placement;let q=()=>{eV(A,Q,J).then(({x:K,y:Y})=>{Q.style.setProperty("left",`${K}px`,"important"),Q.style.setProperty("top",`${Y}px`,"important")})};if(B.autoUpdate?.enabled===!0)return oV(A,Q,q,B.autoUpdate?.config);else return q(),()=>{}};var QU=(A,Q)=>{A.replaceWith(Q)};var i5=(A,Q,B,C)=>{if(B.blockType==="FloatUIPlacement")return AU(A,Q,B,C);else if(B.blockType==="ChildPlacement")if(C===!0)$V(A,Q,B);else j0("e","Using ChildPlacement with changeElementDomParent false");else if(B.blockType==="ReplacementPlacement")if(C===!0)QU(A,Q);else j0("e","Using ReplacementPlacement with changeElementDomParent false");else if(B.blockType==="AfterAndBeforePlacement")if(C===!0)NV(A,Q,B);else j0("e","Using AfterAndBeforePlacement with changeElementDomParent false");else console.error("EK: Could not handle placement strategy type: ",B);return()=>{}};var BU=(A)=>{let Q=document.querySelectorAll(A.query);if(Q.length<A.matchNumber+1)return null;return Q[A.matchNumber]};var CU=(A)=>{if(A.blockType==="BasicSelector")return BU(A);else return console.error("EK: Did not support selector type: ",A),null};var mK=function(A,Q){return mK=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,C){B.__proto__=C}||function(B,C){for(var J in C)if(Object.prototype.hasOwnProperty.call(C,J))B[J]=C[J]},mK(A,Q)};function P4(A,Q){if(typeof Q!=="function"&&Q!==null)throw new TypeError("Class extends value "+String(Q)+" is not a constructor or null");mK(A,Q);function B(){this.constructor=A}A.prototype=Q===null?Object.create(Q):(B.prototype=Q.prototype,new B)}function JU(A,Q,B,C){function J(I){return I instanceof B?I:new B(function(q){q(I)})}return new(B||(B=Promise))(function(I,q){function K(H){try{Z(C.next(H))}catch(G){q(G)}}function Y(H){try{Z(C.throw(H))}catch(G){q(G)}}function Z(H){H.done?I(H.value):J(H.value).then(K,Y)}Z((C=C.apply(A,Q||[])).next())})}function FC(A,Q){var B={label:0,sent:function(){if(I[0]&1)throw I[1];return I[1]},trys:[],ops:[]},C,J,I,q=Object.create((typeof Iterator==="function"?Iterator:Object).prototype);return q.next=K(0),q.throw=K(1),q.return=K(2),typeof Symbol==="function"&&(q[Symbol.iterator]=function(){return this}),q;function K(Z){return function(H){return Y([Z,H])}}function Y(Z){if(C)throw new TypeError("Generator is already executing.");while(q&&(q=0,Z[0]&&(B=0)),B)try{if(C=1,J&&(I=Z[0]&2?J.return:Z[0]?J.throw||((I=J.return)&&I.call(J),0):J.next)&&!(I=I.call(J,Z[1])).done)return I;if(J=0,I)Z=[Z[0]&2,I.value];switch(Z[0]){case 0:case 1:I=Z;break;case 4:return B.label++,{value:Z[1],done:!1};case 5:B.label++,J=Z[1],Z=[0];continue;case 7:Z=B.ops.pop(),B.trys.pop();continue;default:if((I=B.trys,!(I=I.length>0&&I[I.length-1]))&&(Z[0]===6||Z[0]===2)){B=0;continue}if(Z[0]===3&&(!I||Z[1]>I[0]&&Z[1]<I[3])){B.label=Z[1];break}if(Z[0]===6&&B.label<I[1]){B.label=I[1],I=Z;break}if(I&&B.label<I[2]){B.label=I[2],B.ops.push(Z);break}if(I[2])B.ops.pop();B.trys.pop();continue}Z=Q.call(A,B)}catch(H){Z=[6,H],J=0}finally{C=I=0}if(Z[0]&5)throw Z[1];return{value:Z[0]?Z[1]:void 0,done:!0}}}function C3(A){var Q=typeof Symbol==="function"&&Symbol.iterator,B=Q&&A[Q],C=0;if(B)return B.call(A);if(A&&typeof A.length==="number")return{next:function(){if(A&&C>=A.length)A=void 0;return{value:A&&A[C++],done:!A}}};throw new TypeError(Q?"Object is not iterable.":"Symbol.iterator is not defined.")}function SA(A,Q){var B=typeof Symbol==="function"&&A[Symbol.iterator];if(!B)return A;var C=B.call(A),J,I=[],q;try{while((Q===void 0||Q-- >0)&&!(J=C.next()).done)I.push(J.value)}catch(K){q={error:K}}finally{try{if(J&&!J.done&&(B=C.return))B.call(C)}finally{if(q)throw q.error}}return I}function _4(A,Q,B){if(B||arguments.length===2){for(var C=0,J=Q.length,I;C<J;C++)if(I||!(C in Q)){if(!I)I=Array.prototype.slice.call(Q,0,C);I[C]=Q[C]}}return A.concat(I||Array.prototype.slice.call(Q))}function y6(A){return this instanceof y6?(this.v=A,this):new y6(A)}function IU(A,Q,B){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C=B.apply(A,Q||[]),J,I=[];return J=Object.create((typeof AsyncIterator==="function"?AsyncIterator:Object).prototype),K("next"),K("throw"),K("return",q),J[Symbol.asyncIterator]=function(){return this},J;function q(F){return function(z){return Promise.resolve(z).then(F,G)}}function K(F,z){if(C[F]){if(J[F]=function(U){return new Promise(function(E,w){I.push([F,U,E,w])>1||Y(F,U)})},z)J[F]=z(J[F])}}function Y(F,z){try{Z(C[F](z))}catch(U){W(I[0][3],U)}}function Z(F){F.value instanceof y6?Promise.resolve(F.value.v).then(H,G):W(I[0][2],F)}function H(F){Y("next",F)}function G(F){Y("throw",F)}function W(F,z){if(F(z),I.shift(),I.length)Y(I[0][0],I[0][1])}}function qU(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Q=A[Symbol.asyncIterator],B;return Q?Q.call(A):(A=typeof C3==="function"?C3(A):A[Symbol.iterator](),B={},C("next"),C("throw"),C("return"),B[Symbol.asyncIterator]=function(){return this},B);function C(I){B[I]=A[I]&&function(q){return new Promise(function(K,Y){q=A[I](q),J(K,Y,q.done,q.value)})}}function J(I,q,K,Y){Promise.resolve(Y).then(function(Z){I({value:Z,done:K})},q)}}function K1(A){return typeof A==="function"}function VC(A){var Q=function(C){Error.call(C),C.stack=new Error().stack},B=A(Q);return B.prototype=Object.create(Error.prototype),B.prototype.constructor=B,B}var UC=VC(function(A){return function Q(B){A(this),this.message=B?B.length+" errors occurred during unsubscription:\n"+B.map(function(C,J){return J+1+") "+C.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=B}});function q9(A,Q){if(A){var B=A.indexOf(Q);0<=B&&A.splice(B,1)}}var n5=function(){function A(Q){this.initialTeardown=Q,this.closed=!1,this._parentage=null,this._finalizers=null}return A.prototype.unsubscribe=function(){var Q,B,C,J,I;if(!this.closed){this.closed=!0;var q=this._parentage;if(q)if(this._parentage=null,Array.isArray(q))try{for(var K=C3(q),Y=K.next();!Y.done;Y=K.next()){var Z=Y.value;Z.remove(this)}}catch(U){Q={error:U}}finally{try{if(Y&&!Y.done&&(B=K.return))B.call(K)}finally{if(Q)throw Q.error}}else q.remove(this);var H=this.initialTeardown;if(K1(H))try{H()}catch(U){I=U instanceof UC?U.errors:[U]}var G=this._finalizers;if(G){this._finalizers=null;try{for(var W=C3(G),F=W.next();!F.done;F=W.next()){var z=F.value;try{KU(z)}catch(U){if(I=I!==null&&I!==void 0?I:[],U instanceof UC)I=_4(_4([],SA(I)),SA(U.errors));else I.push(U)}}}catch(U){C={error:U}}finally{try{if(F&&!F.done&&(J=W.return))J.call(W)}finally{if(C)throw C.error}}}if(I)throw new UC(I)}},A.prototype.add=function(Q){var B;if(Q&&Q!==this)if(this.closed)KU(Q);else{if(Q instanceof A){if(Q.closed||Q._hasParent(this))return;Q._addParent(this)}(this._finalizers=(B=this._finalizers)!==null&&B!==void 0?B:[]).push(Q)}},A.prototype._hasParent=function(Q){var B=this._parentage;return B===Q||Array.isArray(B)&&B.includes(Q)},A.prototype._addParent=function(Q){var B=this._parentage;this._parentage=Array.isArray(B)?(B.push(Q),B):B?[B,Q]:Q},A.prototype._removeParent=function(Q){var B=this._parentage;if(B===Q)this._parentage=null;else if(Array.isArray(B))q9(B,Q)},A.prototype.remove=function(Q){var B=this._finalizers;if(B&&q9(B,Q),Q instanceof A)Q._removeParent(this)},A.EMPTY=function(){var Q=new A;return Q.closed=!0,Q}(),A}();var dK=n5.EMPTY;function zC(A){return A instanceof n5||A&&"closed"in A&&K1(A.remove)&&K1(A.add)&&K1(A.unsubscribe)}function KU(A){if(K1(A))A();else A.unsubscribe()}var A4={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var o5={setTimeout:function(A,Q){var B=[];for(var C=2;C<arguments.length;C++)B[C-2]=arguments[C];var J=o5.delegate;if(J===null||J===void 0?void 0:J.setTimeout)return J.setTimeout.apply(J,_4([A,Q],SA(B)));return setTimeout.apply(void 0,_4([A,Q],SA(B)))},clearTimeout:function(A){var Q=o5.delegate;return((Q===null||Q===void 0?void 0:Q.clearTimeout)||clearTimeout)(A)},delegate:void 0};function DC(A){o5.setTimeout(function(){var Q=A4.onUnhandledError;if(Q)Q(A);else throw A})}function cK(){}var YU=function(){return lK("C",void 0,void 0)}();function ZU(A){return lK("E",void 0,A)}function HU(A){return lK("N",A,void 0)}function lK(A,Q,B){return{kind:A,value:Q,error:B}}var f6=null;function a5(A){if(A4.useDeprecatedSynchronousErrorHandling){var Q=!f6;if(Q)f6={errorThrown:!1,error:null};if(A(),Q){var B=f6,C=B.errorThrown,J=B.error;if(f6=null,C)throw J}}else A()}function XU(A){if(A4.useDeprecatedSynchronousErrorHandling&&f6)f6.errorThrown=!0,f6.error=A}var K9=function(A){P4(Q,A);function Q(B){var C=A.call(this)||this;if(C.isStopped=!1,B){if(C.destination=B,zC(B))B.add(C)}else C.destination=Y_;return C}return Q.create=function(B,C,J){return new h6(B,C,J)},Q.prototype.next=function(B){if(this.isStopped)iK(HU(B),this);else this._next(B)},Q.prototype.error=function(B){if(this.isStopped)iK(ZU(B),this);else this.isStopped=!0,this._error(B)},Q.prototype.complete=function(){if(this.isStopped)iK(YU,this);else this.isStopped=!0,this._complete()},Q.prototype.unsubscribe=function(){if(!this.closed)this.isStopped=!0,A.prototype.unsubscribe.call(this),this.destination=null},Q.prototype._next=function(B){this.destination.next(B)},Q.prototype._error=function(B){try{this.destination.error(B)}finally{this.unsubscribe()}},Q.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},Q}(n5);var I_=Function.prototype.bind;function sK(A,Q){return I_.call(A,Q)}var q_=function(){function A(Q){this.partialObserver=Q}return A.prototype.next=function(Q){var B=this.partialObserver;if(B.next)try{B.next(Q)}catch(C){EC(C)}},A.prototype.error=function(Q){var B=this.partialObserver;if(B.error)try{B.error(Q)}catch(C){EC(C)}else EC(Q)},A.prototype.complete=function(){var Q=this.partialObserver;if(Q.complete)try{Q.complete()}catch(B){EC(B)}},A}(),h6=function(A){P4(Q,A);function Q(B,C,J){var I=A.call(this)||this,q;if(K1(B)||!B)q={next:B!==null&&B!==void 0?B:void 0,error:C!==null&&C!==void 0?C:void 0,complete:J!==null&&J!==void 0?J:void 0};else{var K;if(I&&A4.useDeprecatedNextContext)K=Object.create(B),K.unsubscribe=function(){return I.unsubscribe()},q={next:B.next&&sK(B.next,K),error:B.error&&sK(B.error,K),complete:B.complete&&sK(B.complete,K)};else q=B}return I.destination=new q_(q),I}return Q}(K9);function EC(A){if(A4.useDeprecatedSynchronousErrorHandling)XU(A);else DC(A)}function K_(A){throw A}function iK(A,Q){var B=A4.onStoppedNotification;B&&o5.setTimeout(function(){return B(A,Q)})}var Y_={closed:!0,next:cK,error:K_,complete:cK};var r5=function(){return typeof Symbol==="function"&&Symbol.observable||"@@observable"}();function t5(A){return A}function GU(A){if(A.length===0)return t5;if(A.length===1)return A[0];return function Q(B){return A.reduce(function(C,J){return J(C)},B)}}var N2=function(){function A(Q){if(Q)this._subscribe=Q}return A.prototype.lift=function(Q){var B=new A;return B.source=this,B.operator=Q,B},A.prototype.subscribe=function(Q,B,C){var J=this,I=H_(Q)?Q:new h6(Q,B,C);return a5(function(){var q=J,K=q.operator,Y=q.source;I.add(K?K.call(I,Y):Y?J._subscribe(I):J._trySubscribe(I))}),I},A.prototype._trySubscribe=function(Q){try{return this._subscribe(Q)}catch(B){Q.error(B)}},A.prototype.forEach=function(Q,B){var C=this;return B=WU(B),new B(function(J,I){var q=new h6({next:function(K){try{Q(K)}catch(Y){I(Y),q.unsubscribe()}},error:I,complete:J});C.subscribe(q)})},A.prototype._subscribe=function(Q){var B;return(B=this.source)===null||B===void 0?void 0:B.subscribe(Q)},A.prototype[r5]=function(){return this},A.prototype.pipe=function(){var Q=[];for(var B=0;B<arguments.length;B++)Q[B]=arguments[B];return GU(Q)(this)},A.prototype.toPromise=function(Q){var B=this;return Q=WU(Q),new Q(function(C,J){var I;B.subscribe(function(q){return I=q},function(q){return J(q)},function(){return C(I)})})},A.create=function(Q){return new A(Q)},A}();function WU(A){var Q;return(Q=A!==null&&A!==void 0?A:A4.Promise)!==null&&Q!==void 0?Q:Promise}function Z_(A){return A&&K1(A.next)&&K1(A.error)&&K1(A.complete)}function H_(A){return A&&A instanceof K9||Z_(A)&&zC(A)}function X_(A){return K1(A===null||A===void 0?void 0:A.lift)}function XA(A){return function(Q){if(X_(Q))return Q.lift(function(B){try{return A(B,this)}catch(C){this.error(C)}});throw new TypeError("Unable to lift unknown Observable type")}}function J3(A,Q,B,C,J){return new G_(A,Q,B,C,J)}var G_=function(A){P4(Q,A);function Q(B,C,J,I,q,K){var Y=A.call(this,B)||this;return Y.onFinalize=q,Y.shouldUnsubscribe=K,Y._next=C?function(Z){try{C(Z)}catch(H){B.error(H)}}:A.prototype._next,Y._error=I?function(Z){try{I(Z)}catch(H){B.error(H)}finally{this.unsubscribe()}}:A.prototype._error,Y._complete=J?function(){try{J()}catch(Z){B.error(Z)}finally{this.unsubscribe()}}:A.prototype._complete,Y}return Q.prototype.unsubscribe=function(){var B;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var C=this.closed;A.prototype.unsubscribe.call(this),!C&&((B=this.onFinalize)===null||B===void 0||B.call(this))}},Q}(K9);var FU=VC(function(A){return function Q(){A(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}});var Y9=function(A){P4(Q,A);function Q(){var B=A.call(this)||this;return B.closed=!1,B.currentObservers=null,B.observers=[],B.isStopped=!1,B.hasError=!1,B.thrownError=null,B}return Q.prototype.lift=function(B){var C=new VU(this,this);return C.operator=B,C},Q.prototype._throwIfClosed=function(){if(this.closed)throw new FU},Q.prototype.next=function(B){var C=this;a5(function(){var J,I;if(C._throwIfClosed(),!C.isStopped){if(!C.currentObservers)C.currentObservers=Array.from(C.observers);try{for(var q=C3(C.currentObservers),K=q.next();!K.done;K=q.next()){var Y=K.value;Y.next(B)}}catch(Z){J={error:Z}}finally{try{if(K&&!K.done&&(I=q.return))I.call(q)}finally{if(J)throw J.error}}}})},Q.prototype.error=function(B){var C=this;a5(function(){if(C._throwIfClosed(),!C.isStopped){C.hasError=C.isStopped=!0,C.thrownError=B;var J=C.observers;while(J.length)J.shift().error(B)}})},Q.prototype.complete=function(){var B=this;a5(function(){if(B._throwIfClosed(),!B.isStopped){B.isStopped=!0;var C=B.observers;while(C.length)C.shift().complete()}})},Q.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(Q.prototype,"observed",{get:function(){var B;return((B=this.observers)===null||B===void 0?void 0:B.length)>0},enumerable:!1,configurable:!0}),Q.prototype._trySubscribe=function(B){return this._throwIfClosed(),A.prototype._trySubscribe.call(this,B)},Q.prototype._subscribe=function(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)},Q.prototype._innerSubscribe=function(B){var C=this,J=this,I=J.hasError,q=J.isStopped,K=J.observers;if(I||q)return dK;return this.currentObservers=null,K.push(B),new n5(function(){C.currentObservers=null,q9(K,B)})},Q.prototype._checkFinalizedStatuses=function(B){var C=this,J=C.hasError,I=C.thrownError,q=C.isStopped;if(J)B.error(I);else if(q)B.complete()},Q.prototype.asObservable=function(){var B=new N2;return B.source=this,B},Q.create=function(B,C){return new VU(B,C)},Q}(N2);var VU=function(A){P4(Q,A);function Q(B,C){var J=A.call(this)||this;return J.destination=B,J.source=C,J}return Q.prototype.next=function(B){var C,J;(J=(C=this.destination)===null||C===void 0?void 0:C.next)===null||J===void 0||J.call(C,B)},Q.prototype.error=function(B){var C,J;(J=(C=this.destination)===null||C===void 0?void 0:C.error)===null||J===void 0||J.call(C,B)},Q.prototype.complete=function(){var B,C;(C=(B=this.destination)===null||B===void 0?void 0:B.complete)===null||C===void 0||C.call(B)},Q.prototype._subscribe=function(B){var C,J;return(J=(C=this.source)===null||C===void 0?void 0:C.subscribe(B))!==null&&J!==void 0?J:dK},Q}(Y9);var nK={now:function(){return(nK.delegate||Date).now()},delegate:void 0};var UU=function(A){P4(Q,A);function Q(B,C,J){if(B===void 0)B=1/0;if(C===void 0)C=1/0;if(J===void 0)J=nK;var I=A.call(this)||this;return I._bufferSize=B,I._windowTime=C,I._timestampProvider=J,I._buffer=[],I._infiniteTimeWindow=!0,I._infiniteTimeWindow=C===1/0,I._bufferSize=Math.max(1,B),I._windowTime=Math.max(1,C),I}return Q.prototype.next=function(B){var C=this,J=C.isStopped,I=C._buffer,q=C._infiniteTimeWindow,K=C._timestampProvider,Y=C._windowTime;if(!J)I.push(B),!q&&I.push(K.now()+Y);this._trimBuffer(),A.prototype.next.call(this,B)},Q.prototype._subscribe=function(B){this._throwIfClosed(),this._trimBuffer();var C=this._innerSubscribe(B),J=this,I=J._infiniteTimeWindow,q=J._buffer,K=q.slice();for(var Y=0;Y<K.length&&!B.closed;Y+=I?1:2)B.next(K[Y]);return this._checkFinalizedStatuses(B),C},Q.prototype._trimBuffer=function(){var B=this,C=B._bufferSize,J=B._timestampProvider,I=B._buffer,q=B._infiniteTimeWindow,K=(q?1:2)*C;if(C<1/0&&K<I.length&&I.splice(0,I.length-K),!q){var Y=J.now(),Z=0;for(var H=1;H<I.length&&I[H]<=Y;H+=2)Z=H;Z&&I.splice(0,Z+1)}},Q}(Y9);function zU(A){return A&&K1(A.schedule)}function W_(A){return A[A.length-1]}function wC(A){return zU(W_(A))?A.pop():void 0}var e5=function(A){return A&&typeof A.length==="number"&&typeof A!=="function"};function NC(A){return K1(A===null||A===void 0?void 0:A.then)}function $C(A){return K1(A[r5])}function RC(A){return Symbol.asyncIterator&&K1(A===null||A===void 0?void 0:A[Symbol.asyncIterator])}function LC(A){return new TypeError("You provided "+(A!==null&&typeof A==="object"?"an invalid object":"'"+A+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function F_(){if(typeof Symbol!=="function"||!Symbol.iterator)return"@@iterator";return Symbol.iterator}var MC=F_();function OC(A){return K1(A===null||A===void 0?void 0:A[MC])}function kC(A){return IU(this,arguments,function Q(){var B,C,J,I;return FC(this,function(q){switch(q.label){case 0:B=A.getReader(),q.label=1;case 1:q.trys.push([1,,9,10]),q.label=2;case 2:return[4,y6(B.read())];case 3:if(C=q.sent(),J=C.value,I=C.done,!I)return[3,5];return[4,y6(void 0)];case 4:return[2,q.sent()];case 5:return[4,y6(J)];case 6:return[4,q.sent()];case 7:return q.sent(),[3,2];case 8:return[3,10];case 9:return B.releaseLock(),[7];case 10:return[2]}})})}function PC(A){return K1(A===null||A===void 0?void 0:A.getReader)}function r2(A){if(A instanceof N2)return A;if(A!=null){if($C(A))return V_(A);if(e5(A))return U_(A);if(NC(A))return z_(A);if(RC(A))return DU(A);if(OC(A))return D_(A);if(PC(A))return E_(A)}throw LC(A)}function V_(A){return new N2(function(Q){var B=A[r5]();if(K1(B.subscribe))return B.subscribe(Q);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function U_(A){return new N2(function(Q){for(var B=0;B<A.length&&!Q.closed;B++)Q.next(A[B]);Q.complete()})}function z_(A){return new N2(function(Q){A.then(function(B){if(!Q.closed)Q.next(B),Q.complete()},function(B){return Q.error(B)}).then(null,DC)})}function D_(A){return new N2(function(Q){var B,C;try{for(var J=C3(A),I=J.next();!I.done;I=J.next()){var q=I.value;if(Q.next(q),Q.closed)return}}catch(K){B={error:K}}finally{try{if(I&&!I.done&&(C=J.return))C.call(J)}finally{if(B)throw B.error}}Q.complete()})}function DU(A){return new N2(function(Q){w_(A,Q).catch(function(B){return Q.error(B)})})}function E_(A){return DU(kC(A))}function w_(A,Q){var B,C,J,I;return JU(this,void 0,void 0,function(){var q,K;return FC(this,function(Y){switch(Y.label){case 0:Y.trys.push([0,5,6,11]),B=qU(A),Y.label=1;case 1:return[4,B.next()];case 2:if(C=Y.sent(),!!C.done)return[3,4];if(q=C.value,Q.next(q),Q.closed)return[2];Y.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return K=Y.sent(),J={error:K},[3,11];case 6:if(Y.trys.push([6,,9,10]),!(C&&!C.done&&(I=B.return)))return[3,8];return[4,I.call(B)];case 7:Y.sent(),Y.label=8;case 8:return[3,10];case 9:if(J)throw J.error;return[7];case 10:return[7];case 11:return Q.complete(),[2]}})})}function yA(A,Q,B,C,J){if(C===void 0)C=0;if(J===void 0)J=!1;var I=Q.schedule(function(){if(B(),J)A.add(this.schedule(null,C));else this.unsubscribe()},C);if(A.add(I),!J)return I}function _C(A,Q){if(Q===void 0)Q=0;return XA(function(B,C){B.subscribe(J3(C,function(J){return yA(C,A,function(){return C.next(J)},Q)},function(){return yA(C,A,function(){return C.complete()},Q)},function(J){return yA(C,A,function(){return C.error(J)},Q)}))})}function TC(A,Q){if(Q===void 0)Q=0;return XA(function(B,C){C.add(A.schedule(function(){return B.subscribe(C)},Q))})}function EU(A,Q){return r2(A).pipe(TC(Q),_C(Q))}function wU(A,Q){return r2(A).pipe(TC(Q),_C(Q))}function NU(A,Q){return new N2(function(B){var C=0;return Q.schedule(function(){if(C===A.length)B.complete();else if(B.next(A[C++]),!B.closed)this.schedule()})})}function $U(A,Q){return new N2(function(B){var C;return yA(B,Q,function(){C=A[MC](),yA(B,Q,function(){var J,I,q;try{J=C.next(),I=J.value,q=J.done}catch(K){B.error(K);return}if(q)B.complete();else B.next(I)},0,!0)}),function(){return K1(C===null||C===void 0?void 0:C.return)&&C.return()}})}function jC(A,Q){if(!A)throw new Error("Iterable cannot be null");return new N2(function(B){yA(B,Q,function(){var C=A[Symbol.asyncIterator]();yA(B,Q,function(){C.next().then(function(J){if(J.done)B.complete();else B.next(J.value)})},0,!0)})})}function RU(A,Q){return jC(kC(A),Q)}function LU(A,Q){if(A!=null){if($C(A))return EU(A,Q);if(e5(A))return NU(A,Q);if(NC(A))return wU(A,Q);if(RC(A))return jC(A,Q);if(OC(A))return $U(A,Q);if(PC(A))return RU(A,Q)}throw LC(A)}function MU(A,Q){return Q?LU(A,Q):r2(A)}function x6(A,Q){return XA(function(B,C){var J=0;B.subscribe(J3(C,function(I){C.next(A.call(Q,I,J++))}))})}var N_=Array.isArray;function $_(A,Q){return N_(Q)?A.apply(void 0,_4([],SA(Q))):A(Q)}function OU(A){return x6(function(Q){return $_(A,Q)})}function kU(A,Q,B,C,J,I,q,K){var Y=[],Z=0,H=0,G=!1,W=function(){if(G&&!Y.length&&!Z)Q.complete()},F=function(U){return Z<C?z(U):Y.push(U)},z=function(U){I&&Q.next(U),Z++;var E=!1;r2(B(U,H++)).subscribe(J3(Q,function(w){if(J===null||J===void 0||J(w),I)F(w);else Q.next(w)},function(){E=!0},void 0,function(){if(E)try{Z--;var w=function(){var L=Y.shift();if(q)yA(Q,q,function(){return z(L)});else z(L)};while(Y.length&&Z<C)w();W()}catch(L){Q.error(L)}}))};return A.subscribe(J3(Q,F,function(){G=!0,W()})),function(){K===null||K===void 0||K()}}function Z9(A,Q,B){if(B===void 0)B=1/0;if(K1(Q))return Z9(function(C,J){return x6(function(I,q){return Q(C,I,J,q)})(r2(A(C,J)))},B);else if(typeof Q==="number")B=Q;return XA(function(C,J){return kU(C,J,A,B)})}function PU(A){if(A===void 0)A=1/0;return Z9(t5,A)}function _U(){return PU(1)}function oK(){var A=[];for(var Q=0;Q<arguments.length;Q++)A[Q]=arguments[Q];return _U()(MU(A,wC(A)))}var R_=["addListener","removeListener"],L_=["addEventListener","removeEventListener"],M_=["on","off"];function H9(A,Q,B,C){if(K1(B))C=B,B=void 0;if(C)return H9(A,Q,B).pipe(OU(C));var J=SA(P_(A)?L_.map(function(K){return function(Y){return A[K](Q,Y,B)}}):O_(A)?R_.map(TU(A,Q)):k_(A)?M_.map(TU(A,Q)):[],2),I=J[0],q=J[1];if(!I){if(e5(A))return Z9(function(K){return H9(K,Q,B)})(r2(A))}if(!I)throw new TypeError("Invalid event target");return new N2(function(K){var Y=function(){var Z=[];for(var H=0;H<arguments.length;H++)Z[H]=arguments[H];return K.next(1<Z.length?Z:Z[0])};return I(Y),function(){return q(Y)}})}function TU(A,Q){return function(B){return function(C){return A[B](Q,C)}}}function O_(A){return K1(A.addListener)&&K1(A.removeListener)}function k_(A){return K1(A.on)&&K1(A.off)}function P_(A){return K1(A.addEventListener)&&K1(A.removeEventListener)}function aK(A,Q){if(Q===void 0)Q=t5;return A=A!==null&&A!==void 0?A:__,XA(function(B,C){var J,I=!0;B.subscribe(J3(C,function(q){var K=Q(q);if(I||!A(J,K))I=!1,J=K,C.next(q)}))})}function __(A,Q){return A===Q}function jU(A){if(A===void 0)A={};var Q=A.connector,B=Q===void 0?function(){return new Y9}:Q,C=A.resetOnError,J=C===void 0?!0:C,I=A.resetOnComplete,q=I===void 0?!0:I,K=A.resetOnRefCountZero,Y=K===void 0?!0:K;return function(Z){var H,G,W,F=0,z=!1,U=!1,E=function(){G===null||G===void 0||G.unsubscribe(),G=void 0},w=function(){E(),H=W=void 0,z=U=!1},L=function(){var X=H;w(),X===null||X===void 0||X.unsubscribe()};return XA(function(X,V){if(F++,!U&&!z)E();var D=W=W!==null&&W!==void 0?W:B();if(V.add(function(){if(F--,F===0&&!U&&!z)G=rK(L,Y)}),D.subscribe(V),!H&&F>0)H=new h6({next:function(N){return D.next(N)},error:function(N){U=!0,E(),G=rK(w,J,N),D.error(N)},complete:function(){z=!0,E(),G=rK(w,q),D.complete()}}),r2(X).subscribe(H)})(Z)}}function rK(A,Q){var B=[];for(var C=2;C<arguments.length;C++)B[C-2]=arguments[C];if(Q===!0){A();return}if(Q===!1)return;var J=new h6({next:function(){J.unsubscribe(),A()}});return r2(Q.apply(void 0,_4([],SA(B)))).subscribe(J)}function tK(A,Q,B){var C,J,I,q,K=!1;if(A&&typeof A==="object")C=A.bufferSize,q=C===void 0?1/0:C,J=A.windowTime,Q=J===void 0?1/0:J,I=A.refCount,K=I===void 0?!1:I,B=A.scheduler;else q=A!==null&&A!==void 0?A:1/0;return jU({connector:function(){return new UU(q,Q,B)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:K})}function eK(){var A=[];for(var Q=0;Q<arguments.length;Q++)A[Q]=arguments[Q];var B=wC(A);return XA(function(C,J){(B?oK(A,C,B):oK(A,C)).subscribe(J)})}var T_=(A)=>{let Q=()=>{let B=Object.keys(A).findLast((C)=>{return window.matchMedia(A[C]).matches});return B&&B in A?B:"default"};return H9(window,"resize").pipe(eK(Q()),x6(()=>Q()),aK(),tK(1))},AY=(A)=>{let Q=["xxl","xl","lg","md","sm","default"],B={default:"default",sm:"default",md:"default",lg:"default",xl:"default",xxl:"default"};return Q.forEach((C)=>{for(let J of Q.slice(Q.indexOf(C)))if(A[J]&&A[J].length>0){B[C]=J;break}}),B},QY=(A)=>{if(A._breakpointSubscription)A._breakpointSubscription.unsubscribe();A._breakpointSubscription=null},SU=(A)=>{if(A._breakpointSubscription!==null)QY(A);A._breakpointSubscription=T_(A._breakpoints).subscribe((Q)=>{A._currentBreakpoint=Q;for(let B in A._registeredElements)A._registeredElements[B].updateBreakpoint(Q)})};var SC={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},yC=(A)=>(...Q)=>({_$litDirective$:A,values:Q});class X9{constructor(A){}get _$AU(){return this._$AM._$AU}_$AT(A,Q,B){this._$Ct=A,this._$AM=Q,this._$Ci=B}_$AS(A,Q){return this.update(A,Q)}update(A,Q){return this.render(...Q)}}var yU="important",j_=" !"+yU,fU=yC(class extends X9{constructor(A){if(super(A),A.type!==SC.ATTRIBUTE||A.name!=="style"||A.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(A){return Object.keys(A).reduce((Q,B)=>{let C=A[B];return C==null?Q:Q+`${B=B.includes("-")?B:B.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${C};`},"")}update(A,[Q]){let{style:B}=A.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(Q)),this.render(Q);for(let C of this.ft)Q[C]==null&&(this.ft.delete(C),C.includes("-")?B.removeProperty(C):B[C]=null);for(let C in Q){let J=Q[C];if(J!=null){this.ft.add(C);let I=typeof J=="string"&&J.endsWith(j_);C.includes("-")||I?B.setProperty(C,I?J.slice(0,-11):J,I?yU:""):B[C]=J}}return aA}});var hU=(A)=>{return Object.keys(A).reduce((Q,B)=>Q+B.split(/(?=[A-Z])/).join("-").toLowerCase()+":"+A[B]+";","")},I3=(A,Q=!1)=>{if(A==="default")return!0;let B=!1,J=new URLSearchParams(window.location.search).get("ek-is-mobile");if(J!==null&&J!=="")return!0;try{let I=navigator.userAgent;B=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(I)}catch(I){console.error("[EKAllInOneContent] - isMobileDevice() ERROR:",I)}if(document.body.clientWidth<=460&&Q===!1)B=!0;return B};var d3=(A=16)=>{let B="";for(let C=0;C<A;C++){let J=Math.floor(Math.random()*"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".length);B+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(J)}return B};class M1 extends y0{wotwIdentifierLegacy;wotwVariant;haveFiredNexusWOWTVisibilityEvent=!1;breadcrumbs;EKBlockType;wotwEnabled=!1;interactionTimers={};constructor(A,Q,B,C,J,I,q,K,Y,Z=!1,H=null,G="core"){super();this.EKEnvironment="prod";this._showModelViewer=!0;this.breadcrumbs=K,this.EKBlockType=Q,this.wotwEnabled=Z,this.wotwIdentifierLegacy=H,this.wotwVariant=G,this.EKID=A,this.EKChildren=C,this.EKControlObject=I,this._currentBreakpoint=this.EKControlObject?._currentBreakpoint,this.EKProps={...B},this.EKResolvedData={...J},this.EKIdentities={...q};for(let W of this.EKChildren)W.addEventListener("ek-child-nullified",(F)=>{if(F.stopPropagation(),this.EKChildren=this.EKChildren.filter((z)=>z!==W),Y===!1&&this.getNumberOfChildrenNonNull()===0)this.nullifyComponent()})}getNumberOfChildrenNonNull(){let A=0;if(this.EKChildren){for(let Q of this.EKChildren)if(Q.EKBlockType!=="NullElement")A++}return A}getHostStyleOverride(){if(this.EKProps.hostStyle!==void 0)return v`<style>
        :host {
          ${JC(hU(this.EKProps.hostStyle))}
        }
      </style>`;return null}getCustomCSSStyles(){if(this.EKProps.customCSS!==void 0)return v`
        <style class="ek-custom-styles">
          ${this.EKProps.customCSS}
        </style>
      `;return null}getElementStyleOverride(){if(this.EKProps.style!==void 0)return fU(this.EKProps.style);return null}loadInterDisplayFont(){let A=document.createElement("link");A.href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap",A.rel="stylesheet",document.head.appendChild(A)}loadIntelOneDisplayFont(){let B=document.createElement("style");B.appendChild(document.createTextNode(`
      @font-face {
        font-family: "IntelOneDisplay";
        src: url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplayregular-webfont.eot");
        src: url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplayregular-webfont.eot?#iefix")
            format("embedded-opentype"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplayregular-webfont.woff2")
            format("woff2"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplayregular-webfont.woff")
            format("woff"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplayregular-webfont.ttf")
            format("truetype"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplayregular-webfont.svg#intelonedisplay-regular")
            format("svg");
        font-weight: 400;
        font-style: normal;
      }

      @font-face {
        font-family: "IntelOneDisplay";
        src: url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaybold-webfont.eot");
        src: url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaybold-webfont.eot?#iefix")
            format("embedded-opentype"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaybold-webfont.woff2")
            format("woff2"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaybold-webfont.woff")
            format("woff"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaybold-webfont.ttf")
            format("truetype"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaybold-webfont.svg#intelonedisplay-bold")
            format("svg");
        font-weight: 700;
        font-style: normal;
      }

      @font-face {
        font-family: "IntelOneDisplay";
        src: url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaylight-webfont.eot");
        src: url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaylight-webfont.eot?#iefix")
            format("embedded-opentype"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaylight-webfont.woff2")
            format("woff2"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaylight-webfont.woff")
            format("woff"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaylight-webfont.ttf")
            format("truetype"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaylight-webfont.svg#intelonedisplay-light")
            format("svg");
        font-weight: 300;
        font-style: normal;
      }

      @font-face {
        font-family: "IntelOneDisplay";
        src: url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaymedium-webfont.eot");
        src: url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaymedium-webfont.eot?#iefix")
            format("embedded-opentype"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaymedium-webfont.woff2")
            format("woff2"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaymedium-webfont.woff")
            format("woff"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaymedium-webfont.ttf")
            format("truetype"),
          url("https://s3-nexus.pointandplace.com/fonts/intel/intelonedisplaymedium-webfont.svg#intelonedisplay-medium")
            format("svg");
        font-weight: 500;
        font-style: normal;
      }
    `)),(document.head||document.getElementsByTagName("head")[0]).appendChild(B)}isExpectingReattach=!1;firstRun=!0;disconnectedCallback(){if(super.disconnectedCallback(),j0("l","Removing",this.EKID,this.EKBlockType),this.isExpectingReattach===!0);else this.cleanup()}connectedCallback(){if(super.connectedCallback(),this.isExpectingReattach===!0&&this.firstRun===!1);else this.EKControlObject._registerWebComponent(this.EKID,this)}cleanup(){this.EKControlObject._deRegisterWebComponent(this.EKID);for(let A in this.placementsAndSelectors)this.placementsAndSelectors[A].placementCleanupFunc()}updateBreakpoint(A){this._currentBreakpoint=A,this.runPlacementsAndSelectors()}placementsAndSelectors={};doSelectAndPlace(A){this.isExpectingReattach=!0,A.placementCleanupFunc();let Q=null;if(A.selector instanceof HTMLElement)Q=A.selector;else{let J=A.selector[A.selectorMapping[this._currentBreakpoint]];if(!J){j0("e","impossible selector condition"),this.isExpectingReattach=!1,this.firstRun=!1;return}Q=CU(J[0])}if(!Q){j0("e","could not get anchor element for selector",A.selector,A.selectorMapping[this._currentBreakpoint]),this.isExpectingReattach=!1,this.firstRun=!1;return}let B=A.placement[A.placementMapping[this._currentBreakpoint]];if(this.EKPlacement=B,!B){j0("e","impossible placement condition"),this.isExpectingReattach=!1,this.firstRun=!1;return}let C=i5(Q,A.element,B[0],A.placementchangeElementDomParent);A.placementCleanupFunc=C,A.currentPlacementBreakpoint=A.placementMapping[this._currentBreakpoint],A.currentSelectorBreakpoint=A.selectorMapping[this._currentBreakpoint],this.isExpectingReattach=!1,this.firstRun=!1}initialiseFloatingUI(){}runPlacementsAndSelectors(){for(let A in this.placementsAndSelectors){let Q=this.placementsAndSelectors[A];if(!Q.currentPlacementBreakpoint||!Q.currentSelectorBreakpoint)this.doSelectAndPlace(Q);else if(Q.placementMapping[this._currentBreakpoint]!=Q.currentPlacementBreakpoint)this.doSelectAndPlace(Q);else if(Q.selectorMapping[this._currentBreakpoint]!=Q.currentSelectorBreakpoint)this.doSelectAndPlace(Q)}}registerPlacementAndSelector(A,Q,B,C,J=!0){if(this.placementsAndSelectors[A])this.placementsAndSelectors[A].placementCleanupFunc();let I={default:"default",sm:"default",md:"default",lg:"default",xl:"default",xxl:"default"};if(!(B instanceof HTMLElement))I=AY(B);this.placementsAndSelectors[A]={element:Q,selector:B,placement:C,placementchangeElementDomParent:J,placementCleanupFunc:()=>{},selectorMapping:I,placementMapping:{...AY(C)}},this.runPlacementsAndSelectors()}deregisterPlacementAndSelector(A){let Q=this.placementsAndSelectors[A];if(Q)Q.placementCleanupFunc();delete this.placementsAndSelectors[A]}isWOTWEnabled(){return this.wotwEnabled}logEventLegacy(A,Q,B=null,C=null,J=null){let I=B===null?this.wotwIdentifierLegacy:B,q=null;if(this.EKIdentities&&this.EKIdentities.arid)q=this.EKIdentities.arid;if(C!==null)q=C;if(I!==null)this.EKControlObject._logEventLegacy({detail:Q,type:A,service:I,arid:q,ab:J})}elementIsDirectlyOnPage(A){if(A==="model-viewer"){if(this.parentNode.id==="product-info-model-viewer")return!1}return this.breadcrumbs.filter((Q)=>Q!=="ContainerElement").length===0}getWOTWNexusBreadcrumbs(){let A=this.breadcrumbs.join(">");if(A.trim().length===0)A="page";else A=`page>${A}`;return A}getWOTWNexusProductID(){if(this.EKIdentities?.productID)return this.EKIdentities?.productID;else return"unknown"}getWOTWNexusParent(){if(this.breadcrumbs.length===0)return"page";for(let A=this.breadcrumbs.length-1;A>=0;A--){let Q=this.breadcrumbs[A];if(Q==="AllInOnePageButtonElement"||Q==="AllInOneV2PageButtonElement")return"AllInOne";else if(Q==="BadgeElement")return"Badge";else if(Q==="CustomButtonElement")return"CustomButton";else if(Q==="PCRoomsElement")return"PCRooms";else if(Q==="ModelViewerElement")return"ModelViewer"}return"page"}triggerWOTWStartInteraction(A,Q,B=void 0){if(this.interactionTimers[A]=performance.now(),this.isWOTWEnabled())this.EKControlObject._wotwInterfaceNexus.triggerUIEvent({action:"start-interaction",component:this.EKBlockType,breadcrumbs:this.getWOTWNexusBreadcrumbs(),productID:this.getWOTWNexusProductID(),interactionType:Q,parent:this.getWOTWNexusParent(),interactionDetail:B})}triggerWOTWEndInteraction(A){if(this.interactionTimers[A]){let Q=this.interactionTimers[A],C=(performance.now()-Q)/1000;if(this.isWOTWEnabled())this.EKControlObject._wotwInterfaceNexus.triggerUIEvent({action:"end-interaction",component:this.EKBlockType,breadcrumbs:this.getWOTWNexusBreadcrumbs(),productID:this.getWOTWNexusProductID(),hangTime:C,parent:this.getWOTWNexusParent()})}}triggerWOTWPlacedEvent(){if(this.isWOTWEnabled()){let A={action:"placed",component:this.EKBlockType,breadcrumbs:this.getWOTWNexusBreadcrumbs(),productID:this.getWOTWNexusProductID(),parent:this.getWOTWNexusParent()};if(this.EKControlObject._wotwInterfaceNexus.triggerUIEvent(A,{variant:this.wotwVariant}),this.EKBlockType==="BadgeElement"){let Q=this;this.logEventLegacy("delivery",Q._wotwGetDetail())}else if(this.EKBlockType==="PCRoomsElement")this.logEventLegacy("delivery",`${this.elementIsDirectlyOnPage()?"embed":"button"}:::${this.wotwVariant}`);else if(this.EKBlockType!=="ModelViewerElement"){if(this.elementIsDirectlyOnPage())if(this.EKBlockType==="AllInOnePageButtonElement")this.logEventLegacy("delivery","button","all-in-one","meta");else this.logEventLegacy("delivery","embed");else if(this.EKBlockType!=="CrossmarkElement"&&this.EKBlockType!=="ULElement")this.logEventLegacy("delivery","button")}else this.logEventLegacy("delivery",this.elementIsDirectlyOnPage()?"embed":"button","3dfw",null)}}triggerWOTWVisibility(){if(this.isWOTWEnabled()&&this.haveFiredNexusWOWTVisibilityEvent===!1){let A={action:"impression",component:this.EKBlockType,breadcrumbs:this.getWOTWNexusBreadcrumbs(),productID:this.getWOTWNexusProductID(),parent:this.getWOTWNexusParent()};if(this.EKControlObject._wotwInterfaceNexus.triggerUIEvent(A),this.haveFiredNexusWOWTVisibilityEvent=!0,this.wotwIdentifierLegacy==="pc-rooms")this.logEventLegacy("view",this.elementIsDirectlyOnPage()?"embed":"button")}}triggerWOTWCommonInteraction(A,Q=void 0){if(this.isWOTWEnabled())this.EKControlObject._wotwInterfaceNexus.triggerUIEvent({action:A,component:this.EKBlockType,breadcrumbs:this.getWOTWNexusBreadcrumbs(),productID:this.getWOTWNexusProductID(),parent:this.getWOTWNexusParent(),detail:Q})}getLocalisations(A){if(this.EKProps.localisation){let Q=this.EKProps.localisation;if(Array.isArray(Q.localisedValues)){if(Q.localisedValues[0].blockType===A)return Q.localisedValues[0]}}return null}nullifyComponent(A=""){j0("e","Nullifying component: ",this.EKBlockType,"Reason: ",A instanceof Error?A.message:A),this.dispatchEvent(new CustomEvent("ek-child-nullified",{bubbles:!0,composed:!0,detail:{child:this}})),this.remove()}firstUpdated(A){this.triggerWOTWPlacedEvent()}}f([a({attribute:!1})],M1.prototype,"EKChildren",void 0),f([a({attribute:!1})],M1.prototype,"EKProps",void 0),f([a({attribute:!1})],M1.prototype,"EKResolvedData",void 0),f([a({attribute:!1})],M1.prototype,"EKIdentities",void 0),f([a({attribute:!1})],M1.prototype,"EKControlObject",void 0),f([a({attribute:!1})],M1.prototype,"EKID",void 0),f([a({attribute:!1})],M1.prototype,"EKPlacement",void 0),f([K0()],M1.prototype,"EKEnvironment",void 0),f([K0()],M1.prototype,"_showModelViewer",void 0),f([K0()],M1.prototype,"_currentBreakpoint",void 0);var xU=U0` /*! tailwindcss v3.4.1 | MIT License | https://tailwindcss.com*/:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;font-family:IntelOneDisplay,ui-sans-serif,system-ui,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-feature-settings:normal;font-variation-settings:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-tap-highlight-color:transparent}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-size:1em;font-variation-settings:normal}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{color:inherit;font-family:inherit;font-feature-settings:inherit;font-size:100%;font-variation-settings:inherit;font-weight:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]{display:none}*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}.static{position:static}.absolute{position:absolute}.relative{position:relative}.inset-0{inset:0}.bottom-0{bottom:0}.left-0{left:0}.left-1\\/2{left:50%}.left-5{left:1.25rem}.right-0{right:0}.right-5{right:1.25rem}.top-0{top:0}.top-20{top:5rem}.top-5{top:1.25rem}.top-\\[14\\%\\]{top:14%}.z-10{z-index:10}.mx-auto{margin-left:auto;margin-right:auto}.mb-5{margin-bottom:1.25rem}.flex{display:flex}.h-12{height:3rem}.h-14{height:3.5rem}.h-28{height:7rem}.h-3\\/5{height:60%}.h-8{height:2rem}.h-full{height:100%}.min-h-full{min-height:100%}.w-10{width:2.5rem}.w-11\\/12{width:91.666667%}.w-12{width:3rem}.w-3\\/5{width:60%}.w-56{width:14rem}.w-8{width:2rem}.w-full{width:100%}.min-w-0{min-width:0}.min-w-full{min-width:100%}.max-w-0{max-width:0}.max-w-48{max-width:12rem}.max-w-72{max-width:18rem}.max-w-full{max-width:100%}.max-w-none{max-width:none}.flex-1{flex:1 1 0%}.shrink-0{flex-shrink:0}.-translate-x-1\\/2{--tw-translate-x:-50%}.-translate-x-1\\/2,.-translate-x-20{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-x-20{--tw-translate-x:-5rem}.translate-y-0{--tw-translate-y:0px}.translate-y-0,.translate-y-full{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-full{--tw-translate-y:100%}@keyframes hotspot{0%{opacity:1;transform:scale(1)}50%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(2.5)}}.animate-hotspot{animation:hotspot 3s cubic-bezier(0,0,.2,1) infinite}.cursor-pointer{cursor:pointer}.resize{resize:both}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-center{justify-content:center}.gap-1{gap:.25rem}.gap-10{gap:2.5rem}.gap-4{gap:1rem}.overflow-hidden,.truncate{overflow:hidden}.truncate{text-overflow:ellipsis;white-space:nowrap}.rounded-full{border-radius:9999px}.rounded-b-full{border-bottom-left-radius:9999px;border-bottom-right-radius:9999px}.rounded-t-2xl{border-top-left-radius:1rem;border-top-right-radius:1rem}.rounded-t-full{border-top-left-radius:9999px;border-top-right-radius:9999px}.border-2{border-width:2px}.border-\\[\\#5ac4f8\\]{--tw-border-opacity:1;border-color:rgb(90 196 248/var(--tw-border-opacity))}.bg-\\[rgba\\(43\\2c 97\\2c 163\\)\\]\\/\\[0\\.85\\]{background-color:rgba(43,97,163,.85)}.bg-black\\/50{background-color:rgba(0,0,0,.5)}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.bg-white\\/\\[90\\%\\]{background-color:hsla(0,0%,100%,.9)}.p-8{padding:2rem}.px-12{padding-left:3rem;padding-right:3rem}.px-7{padding-left:1.75rem;padding-right:1.75rem}.py-3{padding-bottom:.75rem;padding-top:.75rem}.py-3\\.5{padding-bottom:.875rem;padding-top:.875rem}.py-6{padding-bottom:1.5rem;padding-top:1.5rem}.text-center{text-align:center}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-medium{font-weight:500}.leading-tight{line-height:1.25}.tracking-wide{letter-spacing:.025em}.text-\\[\\#2b66af\\]{--tw-text-opacity:1;color:rgb(43 102 175/var(--tw-text-opacity))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.opacity-0{opacity:0}.shadow{--tw-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px -1px rgba(0,0,0,.1);--tw-shadow-colored:0 1px 3px 0 var(--tw-shadow-color),0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.backdrop-blur{--tw-backdrop-blur:blur(8px)}.backdrop-blur,.backdrop-brightness-50{-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-brightness-50{--tw-backdrop-brightness:brightness(.5)}.transition-all{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-opacity{transition-duration:.15s;transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-transform{transition-duration:.15s;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-300{transition-duration:.3s}.\\*\\:transition-transform>*{transition-duration:.15s;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.first-letter\\:uppercase:first-letter{text-transform:uppercase}.after\\:absolute:after{content:var(--tw-content);position:absolute}.after\\:left-1\\/2:after{content:var(--tw-content);left:50%}.after\\:top-full:after{content:var(--tw-content);top:100%}.after\\:h-0:after{content:var(--tw-content);height:0}.after\\:w-0:after{content:var(--tw-content);width:0}.after\\:-translate-x-\\[20px\\]:after{content:var(--tw-content);--tw-translate-x:-20px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.after\\:border-x-\\[20px\\]:after{border-left-width:20px;border-right-width:20px;content:var(--tw-content)}.after\\:border-t-\\[20px\\]:after{border-top-width:20px;content:var(--tw-content)}.after\\:border-white\\/\\[90\\%\\]:after{border-color:hsla(0,0%,100%,.9);content:var(--tw-content)}.after\\:border-x-transparent:after{border-left-color:transparent;border-right-color:transparent;content:var(--tw-content)}.hover\\:\\*\\:scale-110>:hover{--tw-scale-x:1.1;--tw-scale-y:1.1}.hover\\:\\*\\:scale-110>:hover,.hover\\:\\*\\:scale-125>:hover{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:\\*\\:scale-125>:hover{--tw-scale-x:1.25;--tw-scale-y:1.25}.active\\:\\*\\:scale-100>:active{--tw-scale-x:1;--tw-scale-y:1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\\[\\&\\>\\*\\:first-child\\]\\:rounded-lg>:first-child{border-radius:.5rem}.\\[\\&\\>\\*\\:first-child\\]\\:border-4>:first-child{border-width:4px}.\\[\\&\\>\\*\\:first-child\\]\\:border-\\[\\#2c67af\\]>:first-child{--tw-border-opacity:1;border-color:rgb(44 103 175/var(--tw-border-opacity))}.\\[\\&\\>\\*\\:first-child\\]\\:border-transparent>:first-child{border-color:transparent}.\\[\\&\\>\\*\\:first-child\\]\\:transition-all>:first-child{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.\\[\\&\\>\\*\\:first-child\\]\\:hover\\:border-\\[\\#5ac4f8\\]:hover>:first-child{--tw-border-opacity:1;border-color:rgb(90 196 248/var(--tw-border-opacity))} `;class gU{config;constructor(){this.config={components:{panel:{borderGradientStartColor:"rgb(45 124 246)",borderGradientEndColor:"rgb(255 255 255)",textGradientStartColor:"rgb(45 124 246)",textGradientEndColor:"rgb(255 255 255)",backgroundColor:"rgba(255, 255, 255, 0.66)"},brandBlock:{showPanelBrandBlock:!0},tabbedLauncher:{flipFlopTextAnimationDelayMilliseconds:4000},brandBar:{brand:"harvey-norman",link:!0},localisation:{salutation:"",introText:"",smallText:"",ctaText:"",transparencyText:"",variantTexts:[],prompts:[]}}}}applyConfiguration(A){this.config={...this.config,...A}}}var _1=new gU;class fC extends X9{constructor(A){if(super(A),this.it=R1,A.type!==SC.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(A){if(A===R1||A==null)return this._t=void 0,this.it=A;if(A===aA)return A;if(typeof A!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(A===this.it)return this._t;this.it=A;let Q=[A];return Q.raw=Q,this._t={_$litType$:this.constructor.resultType,strings:Q,values:[]}}}fC.directiveName="unsafeHTML",fC.resultType=1;var K2=yC(fC);var Sz=Hq(BY(),1);class CY extends y0{constructor(){super(...arguments);this.brand=_1.config.components.brandBar.brand||"dell";this.logoAsLink=_1.config.components.brandBar.link}static styles=U0`
    :host .brands {
      display: flex;
      gap: 12px;
      align-items: center;
    }
  `;renderHarveyNorman(){return v`
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="91"
        height="13"
        viewBox="0 0 91 13"
        fill="none"
      >
        <path
          d="M2.2722 0.38822C2.2722 0.38822 1.31067 0.358169 0.95009 0.343145C0.589514 0.328121 0.04865 0.268027 0.00357797 0.823917C-0.041494 1.4399 0.34913 1.40985 0.619562 1.62019C0.79985 1.74038 0.905018 1.9357 0.920042 2.16106C0.920042 2.37139 0.905018 3.84375 0.935066 4.50481C0.965114 5.1809 0.980138 6.6232 0.935066 7.47958C0.889994 8.35097 0.889994 8.48619 0.514394 8.66648C0.108746 8.84677 0.063674 9.02706 0.093722 9.47778C0.108746 9.79328 0.334106 10.0036 1.1454 9.95855C1.1454 9.95855 1.80646 9.89845 2.37737 9.89845C2.94828 9.89845 3.53422 9.97357 3.93987 9.97357C4.34551 9.97357 4.66102 9.86841 4.66102 9.34256C4.67604 9.02706 4.49575 8.7416 4.2103 8.6214C4.07508 8.53126 3.8347 8.51624 3.8347 8.03547C3.8347 7.5547 3.80465 6.20253 3.80465 6.20253C3.80465 6.20253 3.81967 5.79688 4.07508 5.76683C4.31547 5.73678 4.57087 5.73678 4.81126 5.75181C5.20188 5.75181 5.53241 5.75181 5.53241 5.75181C5.53241 5.75181 5.78782 5.78186 5.78782 6.15746C5.78782 6.53306 5.81787 7.4946 5.81787 7.9303C5.81787 8.38102 5.84791 8.47116 5.59251 8.6214C5.3371 8.77165 5.08169 8.86179 5.08169 9.32754C5.08169 9.77826 5.277 9.97357 5.72772 9.97357C6.17844 9.97357 6.44887 9.89845 7.41041 9.89845C8.37195 9.89845 8.86774 10.0487 9.25836 9.89845C9.64899 9.74821 9.55884 9.32754 9.55884 9.1172C9.55884 8.90687 9.4687 8.72658 9.033 8.59136C8.62735 8.47117 8.59731 7.91527 8.59731 7.40446C8.59731 7.40446 8.58228 5.07573 8.58228 4.09916C8.56726 3.4381 8.59731 2.77705 8.6574 2.13101C8.7175 1.69531 8.86774 1.60517 9.06305 1.51503C9.36353 1.37981 9.34851 1.10937 9.34851 0.868988C9.34851 0.628603 9.24334 0.343145 8.68745 0.343145C8.13156 0.343145 7.83108 0.373195 7.12495 0.373195C6.41883 0.373195 5.90801 0.328125 5.59251 0.328125C5.277 0.328125 5.02159 0.448314 5.02159 0.793867C5.02159 1.13942 5.00657 1.25961 5.39719 1.48498C5.80284 1.72536 5.74275 2.17608 5.74275 2.79207V3.51322C5.74275 3.67849 5.75777 4.06912 5.30705 4.06912H4.12015C4.12015 4.06912 3.86475 4.05409 3.80465 3.84375C3.74455 3.48318 3.72953 3.1226 3.74455 2.77705C3.74455 2.07091 3.7746 1.72536 4.01499 1.5601C4.25537 1.39483 4.51078 1.42488 4.51078 0.899038C4.54083 0.61358 4.34551 0.358173 4.06006 0.328125C4.03001 0.328125 3.98494 0.328125 3.95489 0.328125C3.80465 0.328125 2.2722 0.38822 2.2722 0.38822Z"
          fill="#015C96"
        />
        <path
          d="M15.8241 8.0353C15.5686 8.00526 15.2531 7.91511 15.4334 5.55633C15.6137 3.19756 15.1029 2.94215 14.7573 2.71679C14.1113 2.37124 13.3902 2.23602 12.669 2.31114C12.1732 2.34119 11.6774 2.46138 11.2117 2.64167C10.806 2.82196 10.4154 3.04732 10.0548 3.31775C9.69426 3.63326 9.75436 4.1591 9.79943 4.51968C9.8445 4.89528 9.94967 5.30093 10.4455 5.2859C10.9413 5.27088 11.1816 4.89528 11.5122 4.41451C11.8427 3.93374 12.053 3.69335 12.3685 3.69335C12.8042 3.69335 12.9244 4.14407 12.9244 4.4746C12.9244 4.80513 12.9995 5.30093 12.654 5.42112C12.2934 5.54131 11.1065 5.7216 10.3102 6.30754C9.51397 6.89348 9.51397 7.94516 9.51397 8.18554C9.45388 8.77148 9.69426 9.35742 10.16 9.73302C10.8661 10.2889 11.9479 9.88327 12.2784 9.70298C12.5038 9.58278 12.7141 9.43254 12.9244 9.2823C13.1498 9.67293 13.5554 9.94336 14.0062 10.0035C14.6672 10.0035 16.1846 9.40249 16.2898 8.68134C16.3799 7.99023 16.0945 8.06535 15.8241 8.0353ZM12.4437 8.14047C12.3685 8.14047 12.1131 8.17052 12.0831 7.64468C12.023 7.26908 12.2183 6.9085 12.5789 6.77328C12.8794 6.63807 12.8794 6.86343 12.8794 7.35922C12.8794 7.85502 12.654 8.14047 12.4437 8.14047Z"
          fill="#015C96"
        />
        <path
          d="M82.3631 8.0353C82.1077 8.00526 81.7922 7.91511 81.9725 5.55633C82.1528 3.19756 81.642 2.94215 81.2964 2.71679C80.6504 2.37124 79.9292 2.23602 79.2081 2.31114C78.7123 2.34119 78.2165 2.46138 77.7507 2.64167C77.3451 2.82196 76.9545 3.04732 76.5939 3.31775C76.2333 3.63326 76.2934 4.1591 76.3385 4.51968C76.3836 4.89528 76.4887 5.30093 76.9845 5.2859C77.4803 5.27088 77.7207 4.89528 78.0512 4.41451C78.3818 3.93374 78.5921 3.69335 78.9076 3.69335C79.3433 3.69335 79.4635 4.14407 79.4635 4.4746C79.4635 4.80513 79.5536 5.30093 79.1931 5.42112C78.8325 5.54131 77.6456 5.7216 76.8493 6.30754C76.053 6.89348 76.053 7.94516 76.053 8.18554C75.9929 8.77148 76.2333 9.35742 76.6991 9.73302C77.4052 10.2889 78.4869 9.88327 78.8175 9.70298C79.0428 9.58278 79.2532 9.43254 79.4635 9.2823C79.6888 9.67293 80.0945 9.94336 80.5452 10.0035C81.2063 10.0035 82.7237 9.40249 82.8289 8.68134C82.934 7.96018 82.6335 8.06535 82.3631 8.0353ZM78.9827 8.1555C78.9076 8.1555 78.6522 8.18554 78.6221 7.6597C78.5621 7.2841 78.7574 6.92353 79.1179 6.78831C79.4184 6.65309 79.4184 6.87845 79.4184 7.37425C79.4334 7.87004 79.1931 8.1555 78.9827 8.1555Z"
          fill="#015C96"
        />
        <path
          d="M19.1586 2.41766C18.8582 2.26742 18.4976 2.38761 17.9117 2.5679C17.4609 2.68809 17.0252 2.83834 16.6046 3.01862C16.1388 3.22896 15.8984 3.45432 15.8984 3.82992C15.8984 4.20552 16.229 4.31069 16.5144 4.40084C16.7999 4.47596 17.0252 4.64122 17.0252 5.21214V8.09676C17.0252 8.39724 16.8299 8.66767 16.5445 8.78786C16.0337 9.02825 16.1238 9.35878 16.1238 9.46395C16.1538 9.77945 16.4393 10.0048 16.7548 9.97476C17.2806 9.97476 17.5961 9.92969 18.3473 9.92969C19.0985 9.92969 19.6845 9.98979 20.2554 9.98979C20.8263 9.98979 20.9014 9.62921 20.9014 9.29868C20.9014 8.96815 20.7211 8.77284 20.2404 8.65265C19.8648 8.59255 19.5943 8.247 19.6544 7.87139V5.10697C19.6544 5.10697 19.7596 4.80649 20.03 5.09194C20.2854 5.3774 20.5108 5.8732 20.7662 6.00841C21.1568 6.1887 21.6226 6.03846 21.8179 5.64784C22.2085 4.95673 22.2085 4.1304 21.8329 3.4393C21.3672 2.41766 20.8413 2.35756 20.4357 2.61297C20.03 2.86838 19.7145 3.3792 19.6094 3.40925C19.5042 3.4393 19.369 3.24398 19.369 3.0036C19.369 2.77824 19.384 2.52283 19.1586 2.41766Z"
          fill="#015C96"
        />
        <path
          d="M61.3608 2.41766C61.0603 2.26742 60.6997 2.38761 60.1138 2.5679C59.6631 2.68809 59.2274 2.83834 58.8067 3.01862C58.341 3.22896 58.1006 3.45432 58.1006 3.82992C58.1006 4.20552 58.4311 4.31069 58.7166 4.40084C59.002 4.47596 59.2274 4.64122 59.2274 5.21214V8.09676C59.2274 8.39724 59.0321 8.66767 58.7466 8.78786C58.2358 9.02825 58.3259 9.34375 58.3259 9.46395C58.356 9.77945 58.6415 10.0048 58.957 9.97476C59.4828 9.97476 59.6931 9.94472 60.4443 9.94472C61.1805 9.94472 61.8866 10.0048 62.4425 10.0048C62.9984 10.0048 63.0886 9.64423 63.0886 9.31371C63.0886 8.98318 62.9083 8.78787 62.4275 8.66767C62.0519 8.60758 61.7815 8.26202 61.8416 7.88642V5.12199C61.8416 5.12199 61.9467 4.82151 62.2172 5.10697C62.4876 5.39243 62.6979 5.88822 62.9533 6.02344C63.344 6.20373 63.8097 6.05349 64.005 5.66286C64.3956 4.97175 64.3956 4.14543 64.02 3.45432C63.5543 2.43268 63.0285 2.37259 62.6228 2.628C62.2172 2.88341 61.9017 3.39422 61.7965 3.42427C61.6913 3.45432 61.5561 3.25901 61.5561 3.01862C61.5711 2.77824 61.5862 2.52283 61.3608 2.41766Z"
          fill="#015C96"
        />
        <path
          d="M24.041 2.52239C23.2898 2.52239 23.0344 2.49234 22.6738 2.49234C22.3132 2.49234 21.8926 2.64258 21.8926 3.10833C21.8926 3.49895 22.0278 3.64919 22.3583 3.85953C22.6137 4.11494 22.794 4.43044 22.8992 4.776C23.0194 5.06145 24.9124 9.53862 24.9124 9.53862C24.9124 9.53862 25.1979 10.2448 25.7537 10.2448C26.1894 10.2898 26.5801 10.0194 26.7153 9.61374C26.9106 9.2081 28.1876 5.88778 28.5332 5.1516C28.8787 4.41542 29.044 3.94967 29.2844 3.79943C29.5698 3.66421 29.7501 3.36373 29.7201 3.04823C29.7201 2.73272 29.4647 2.47732 29.1492 2.47732C29.1341 2.47732 29.1191 2.47732 29.1041 2.47732C28.8487 2.47732 28.7736 2.50737 28.2477 2.50737C27.7219 2.50737 27.5416 2.47732 27.2712 2.47732C27.0007 2.49234 26.6101 2.61253 26.6101 2.97311C26.6101 3.33369 26.6251 3.46891 26.7904 3.63417C26.9857 3.82948 27.0608 4.11494 26.9707 4.37035C26.9106 4.64078 26.6101 5.4671 26.6101 5.4671C26.6101 5.4671 26.55 5.70749 26.3547 5.70749C26.2045 5.70749 26.1143 5.45208 26.0392 5.22672C25.904 4.86614 25.7537 4.44547 25.6937 4.20508C25.6336 3.9647 25.6336 3.76938 25.8289 3.64919C26.0242 3.529 26.1143 3.45388 26.1143 3.03321C26.0993 2.53741 25.7087 2.44727 25.3631 2.44727C25.0176 2.49234 24.657 2.52239 24.041 2.52239Z"
          fill="#015C96"
        />
        <path
          d="M31.4477 6.83419C31.5679 6.7741 31.6881 6.72902 31.8083 6.69898L34.3474 6.00787C34.5878 5.93275 34.753 5.73744 34.7831 5.49705C34.7981 5.13647 34.723 4.79092 34.5878 4.46039C34.3173 3.81436 33.8666 3.25847 33.2957 2.85282C32.4694 2.37205 31.4628 2.35702 30.6214 2.79272C29.75 3.28851 29.1791 4.09982 28.8336 5.51208C28.488 6.92434 28.8937 8.7723 29.5247 9.40331C30.1557 10.0343 30.7116 10.1695 31.6731 10.2296C32.5595 10.2747 33.4159 9.97422 34.0769 9.38828C34.6779 8.86244 34.8131 8.32158 34.6779 7.84081C34.5427 7.36004 34.1971 7.58539 33.9417 7.78071C33.4309 8.20138 32.7098 8.30655 32.1088 8.02109C31.3125 7.60042 31.3276 6.90931 31.4477 6.83419ZM31.2224 4.7158C31.2524 4.53551 31.3125 4.15991 31.628 4.08479C31.9285 4.02469 32.1389 4.29513 32.3191 4.61063C32.4994 4.92614 32.259 5.00126 32.259 5.00126L31.4628 5.2116C31.1923 5.25667 31.1923 4.89609 31.2224 4.7158Z"
          fill="#015C96"
        />
        <path
          d="M36.2568 2.61327C35.4905 2.61327 35.0999 2.58322 34.7243 2.58322C34.3637 2.58322 34.0783 2.86868 34.0783 3.22926C34.0783 3.24428 34.0783 3.27433 34.0783 3.28935C34.0783 3.71002 34.4088 3.78514 34.5591 3.89031C34.8746 4.14572 35.0999 4.47625 35.2051 4.86688C35.3704 5.28755 36.5572 8.69801 36.5572 8.69801C36.7075 9.10366 36.7526 9.52434 36.6774 9.94501C36.6023 10.3507 36.1967 10.6211 35.791 10.546C35.761 10.546 35.7309 10.5309 35.7009 10.5159C35.3553 10.3807 34.7694 9.91496 34.2135 10.8615C33.7778 11.5977 34.3036 12.439 35.4004 12.439C36.2117 12.3939 36.9629 11.9883 37.4437 11.3272C38.0747 10.3356 38.6005 9.28395 39.0212 8.1872C39.4569 7.04537 40.0879 5.72325 40.3884 5.04717C40.6888 4.37108 40.8541 3.98046 41.1546 3.84524C41.44 3.77012 41.6203 3.48466 41.5753 3.19921C41.5903 2.86868 41.3349 2.58322 40.9893 2.5682C40.9743 2.5682 40.9443 2.5682 40.9292 2.5682C40.5687 2.5682 40.4935 2.61327 40.0578 2.61327C39.6221 2.61327 39.3818 2.58322 39.0663 2.58322C38.7357 2.58322 38.6005 2.80858 38.6005 3.21423C38.5855 3.37949 38.6606 3.54476 38.8108 3.63491C39.0362 3.74008 39.1414 3.99548 39.0512 4.23587C38.931 4.61147 38.7958 4.97205 38.6306 5.33262C38.6306 5.33262 38.5104 5.55798 38.3752 5.55798C38.2399 5.55798 37.9996 5.12229 37.9395 4.97205C37.7892 4.65654 37.7291 4.29596 37.7742 3.95041C37.8042 3.84524 37.8643 3.7551 37.9545 3.695C38.1348 3.58983 38.2099 3.43959 38.2099 3.09404C38.2099 2.71844 37.9845 2.55317 37.6089 2.55317C37.2333 2.53815 36.7375 2.59824 36.2568 2.61327Z"
          fill="#015C96"
        />
        <path
          d="M33.4922 10.6504H0.168945V12.0927H33.4922V10.6504Z"
          fill="#E1383F"
        />
        <path
          d="M90.1319 10.6504H38.5244V12.0927H90.1319V10.6504Z"
          fill="#E1383F"
        />
        <path
          d="M45.9171 0.388973C45.196 0.388973 45.1058 0.328878 44.8805 0.328878C44.6551 0.328878 44.1143 0.479117 44.1143 0.974911C44.1143 1.4707 44.3396 1.54583 44.61 1.66602C44.8805 1.80124 45.0157 1.95148 45.1209 2.64258C45.2411 3.36374 45.1509 7.79584 45.1509 7.97612C45.1659 8.21651 45.0608 8.4569 44.8504 8.59211C44.58 8.78743 44.1744 8.75737 44.1744 9.38839C44.1744 10.0194 44.61 9.91423 44.7903 9.91423C44.9856 9.91423 45.5566 9.88418 46.1124 9.88418C46.7585 9.88418 47.1641 9.91423 47.6749 9.91423C48.1858 9.91423 48.2759 9.68887 48.2759 9.31326C48.2759 8.93766 48.0055 8.80245 47.5548 8.66723C47.104 8.53202 46.8036 8.32168 46.8036 7.49535V5.63237C46.8036 5.63237 46.7284 5.25677 47.089 5.61734C47.4496 5.97792 49.4628 8.98273 49.4628 8.98273C49.7332 9.53862 50.3041 9.8992 50.9201 9.8992C51.7164 9.8992 51.7314 9.47853 51.7314 8.68225V2.32708C51.7314 2.32708 51.6864 1.72611 52.107 1.5909C52.6028 1.44066 52.6779 1.45568 52.6779 0.85472C52.6779 0.358926 52.3174 0.313853 52.0019 0.313853C51.6864 0.313853 51.3558 0.358923 50.7549 0.358923C50.1539 0.358923 49.7182 0.298828 49.2825 0.298828C48.8468 0.298828 48.7567 0.614335 48.7567 0.929841C48.7266 1.27539 48.9971 1.57588 49.3426 1.60592C49.8835 1.69607 49.9886 1.89138 50.0337 2.29703C50.0938 2.73272 50.0938 3.60412 50.1088 3.87455C50.1239 4.16001 50.1689 4.52059 50.0187 4.52059C49.7182 4.52059 49.0572 3.42383 48.4261 2.35713C47.6148 0.974913 47.4496 0.313853 47.0289 0.313853C46.5632 0.358925 46.3679 0.388973 45.9171 0.388973Z"
          fill="#015C96"
        />
        <path
          d="M55.0669 2.43164C53.4744 2.43164 51.9419 3.96409 51.8668 6.12756C51.7917 8.29102 52.9185 10.1841 55.112 10.1841C57.2905 10.1841 58.5976 8.59151 58.5976 6.26278C58.5976 3.94907 57.1853 2.43164 55.0669 2.43164ZM55.3223 8.56146C54.8716 8.56146 54.6913 6.80364 54.6763 6.32287C54.6462 5.8421 54.6312 3.94907 55.0669 3.94907C55.5176 3.94907 55.6228 4.7153 55.713 5.91722C55.8031 7.11914 55.7881 8.56146 55.3223 8.56146Z"
          fill="#015C96"
        />
        <path
          d="M66.1831 2.82228C65.2667 3.15281 65.1315 3.2129 64.8911 3.30305C64.6507 3.39319 64.3652 3.49836 64.3652 3.94908C64.3652 4.4599 65.3268 4.35473 65.3568 4.88058C65.3869 5.43647 65.4319 6.68346 65.4319 7.47974C65.4319 8.27601 65.462 8.62157 65.1615 8.80186C64.9211 8.93707 64.6056 9.01219 64.6056 9.47794C64.6056 9.94369 64.9361 10.0338 65.2516 10.0338C65.5672 10.0338 65.9728 9.97373 66.5287 9.97373C67.0846 9.97373 67.3099 10.0038 67.6855 9.98876C68.2414 9.97373 68.4968 9.91364 68.4968 9.53803C68.5269 9.31267 68.4067 9.07229 68.2114 8.96712C68.0611 8.84693 67.971 8.53142 67.971 7.85534V4.92565C67.971 4.92565 67.9259 4.47493 68.4518 4.53502C68.9926 4.59512 69.2631 4.86555 69.2631 6.02241C69.2631 6.86375 69.3081 7.34452 69.2931 7.91544C69.2631 8.48635 69.3682 8.63659 69.1729 8.78683C68.9626 8.9521 68.8274 9.19248 68.8123 9.46291C68.8123 9.7033 68.9025 9.98876 69.5335 9.98876C70.1645 9.98876 69.9692 9.97373 70.495 9.97373C71.0209 9.97373 71.0659 9.98876 71.5317 9.98876C71.9824 9.98876 72.0575 9.71833 72.0575 9.41784C72.0575 9.10234 71.6669 9.02722 71.6669 8.72674C71.6669 8.41123 71.6218 5.55666 71.6218 5.24115C71.6218 4.92565 71.6218 4.56507 72.0575 4.56507C72.4932 4.56507 72.9439 4.68526 72.9439 5.96231C72.9439 7.02902 72.989 7.37457 72.989 7.90041C72.989 8.42626 72.974 8.50137 72.8688 8.69669C72.7637 8.892 72.4331 8.93707 72.4331 9.46291C72.4331 9.98876 72.7636 10.0188 73.1242 10.0188C73.4848 10.0188 73.7402 9.95871 74.3562 9.95871C74.9872 9.95871 75.1975 9.97373 75.5431 9.97373C75.9337 9.97373 76.1741 9.94368 76.1741 9.35774C76.1741 8.86195 75.8436 8.93707 75.6182 8.72674C75.3778 8.48635 75.4079 7.73515 75.4079 6.23274C75.4079 4.73034 75.6032 3.75377 74.8069 3.03262C74.2661 2.47673 73.4247 2.35653 72.7486 2.71711C72.2979 2.94247 71.8622 3.22793 71.4716 3.55846C71.4716 3.55846 71.0359 2.5218 70.0744 2.5218C69.4584 2.5218 68.8574 2.74716 68.3917 3.15281C68.1062 3.34812 68.0611 3.46831 67.8808 3.46831C67.7006 3.46831 67.6855 2.98754 67.6855 2.8373C67.6855 2.68706 67.6855 2.31146 67.1597 2.47673C66.6339 2.64199 66.1831 2.82228 66.1831 2.82228Z"
          fill="#015C96"
        />
        <path
          d="M89.4871 5.22733C89.4871 5.54283 89.5321 7.93166 89.5321 8.24716C89.5321 9.10354 90.103 8.53262 90.088 9.40402C90.058 9.74957 89.7575 10.005 89.4119 9.97493H89.3969C88.9462 9.95991 88.8861 9.94489 88.3603 9.94489C87.8344 9.94489 88.0297 9.97493 87.3987 9.97493C86.7677 9.97493 86.6776 9.68947 86.6776 9.44909C86.6625 9.19368 86.7677 8.9533 86.978 8.80306C87.1283 8.69789 87.1283 8.48755 87.1583 7.91664C87.1884 7.34572 87.1734 6.86495 87.1734 6.02361C87.1734 5.01699 86.933 4.68646 86.4222 4.5212C85.7912 4.31086 85.8362 5.07709 85.8362 5.07709V7.85654C85.8362 8.53262 85.9264 8.84813 86.0766 8.96832C86.2719 9.08851 86.3921 9.31387 86.3621 9.53923C86.3621 9.92986 86.0916 9.98996 85.5508 9.98996C84.9949 9.98996 84.9648 9.95991 84.4089 9.95991C83.8531 9.95991 83.5676 10.035 83.2521 10.035C82.9366 10.035 82.591 9.92986 82.591 9.47914C82.591 9.02842 82.8615 8.9533 83.0267 8.81808C83.2972 8.60774 83.2972 8.29224 83.2972 7.49596C83.2972 6.69969 83.2521 5.45269 83.222 4.8968C83.192 4.37096 82.2305 4.4611 82.2305 3.96531C82.2305 3.51459 82.5159 3.40942 82.7563 3.31927C82.9967 3.22913 83.1469 3.16903 84.0484 2.8385C84.0484 2.8385 84.4991 2.67324 85.0399 2.50798C85.5658 2.34271 85.5658 2.71831 85.5658 2.86855C85.5658 3.01879 85.5958 3.49956 85.7611 3.49956C85.9264 3.49956 85.9714 3.37937 86.2719 3.18406C86.7377 2.77841 87.3386 2.55305 87.9546 2.55305C88.6006 2.55305 89.1565 2.97372 89.3518 3.58971C89.442 4.10052 89.4871 4.65641 89.4871 5.22733Z"
          fill="#015C96"
        />
        <path
          d="M88.7803 0.824219H89.2761C89.4714 0.824219 89.6066 0.929385 89.6066 1.09465C89.6216 1.21484 89.5465 1.33504 89.4263 1.36509C89.5465 1.39513 89.5765 1.48528 89.5916 1.59045C89.5916 1.69562 89.6066 1.80078 89.6517 1.8759H89.5014C89.4564 1.83083 89.4864 1.72566 89.4564 1.62049C89.4263 1.51532 89.4113 1.42518 89.2761 1.42518H88.9305V1.8759H88.7953L88.7803 0.824219ZM89.216 1.30499C89.3512 1.30499 89.4564 1.27494 89.4564 1.10968C89.4714 1.01953 89.3963 0.929389 89.3061 0.929389C89.2911 0.929389 89.2761 0.929389 89.2761 0.929389H88.9305V1.30499H89.216Z"
          fill="#015C96"
        />
        <path
          d="M88.1943 1.35021C88.1943 0.824369 88.63 0.388672 89.1559 0.388672C89.6817 0.388672 90.1174 0.824369 90.1174 1.35021C90.1174 1.87605 89.6817 2.31175 89.1559 2.31175C88.63 2.31175 88.1943 1.87605 88.1943 1.35021ZM88.3145 1.35021C88.3145 1.81596 88.6901 2.19156 89.1559 2.19156C89.6216 2.19156 89.9972 1.81596 89.9972 1.35021C89.9972 0.884465 89.6216 0.508863 89.1559 0.508863C88.6901 0.508863 88.3145 0.884465 88.3145 1.35021Z"
          fill="#015C96"
        />
      </svg>
    `}renderDell(){return v` <svg
      width="95"
      height="13"
      viewBox="0 0 95 13"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <g id="Group 2">
        <path
          id="Vector"
          d="M37.2318 1.61847V1.23858L37.0686 1.13022H30.5673L30.459 1.23858V1.61847L30.5673 1.72683H33.335L33.4433 1.83518V9.74638L33.5517 9.85473H34.0399L34.1483 9.74638V1.8874L34.2566 1.77904H37.0765L37.2396 1.61717L37.2318 1.61847ZM38.694 3.51141C36.9577 3.51141 35.9263 4.75684 35.9263 6.54012V6.81297C35.9263 8.54926 36.7945 10.0636 38.7984 10.0636C40.5347 10.0636 41.1874 8.92523 41.2919 8.17067L41.1848 8.06362H40.6953L40.5882 8.17067C40.3167 8.92915 39.8271 9.4174 38.8519 9.4174C37.2201 9.4174 36.737 7.90304 36.737 7.14587L36.8467 7.03882H41.3506L41.4603 6.92916V6.54926C41.4603 4.76076 40.4851 3.52055 38.6926 3.52055L38.694 3.51141ZM38.694 4.16154C39.4524 4.16154 39.9524 4.47355 40.2605 4.89392C40.5725 5.31428 40.694 5.84169 40.694 6.27772L40.5869 6.38738H36.788L36.6783 6.27772C36.6783 5.8443 36.8001 5.31559 37.1117 4.89392C37.4237 4.47355 37.9263 4.16154 38.6913 4.16154H38.694ZM42.7018 6.75945C42.7018 5.02316 43.5686 4.10932 44.8167 4.10932C46.0634 4.10932 46.5529 4.86781 46.7096 5.62368L46.818 5.73203H47.3597L47.4681 5.62368C47.3597 4.37695 46.3297 3.5088 44.818 3.5088C43.1861 3.5088 41.9459 4.53883 41.9459 6.75945C41.9459 9.03098 43.1926 10.0101 44.818 10.0101C46.3323 10.0101 47.3114 9.14325 47.4681 7.89521L47.3597 7.78686H46.8715L46.7631 7.89521C46.6548 8.65369 46.113 9.40957 44.8702 9.40957C43.6234 9.40957 42.7018 8.54273 42.7018 6.75945ZM53.5373 9.80121V6.00227C53.5373 4.37042 52.6704 3.5088 51.2657 3.5088C50.3989 3.5088 49.6339 3.8887 49.2553 4.53883H49.1469V1.28818L48.9838 1.12631H48.4955L48.3871 1.23466V9.7986L48.4955 9.90695H48.9838L49.0921 9.7986V6.37824C49.0921 4.96833 49.7422 4.10671 51.1025 4.10671C52.1326 4.10671 52.7344 4.75684 52.7344 5.99966V9.7986L52.8427 9.90695H53.331L53.5477 9.7986L53.5373 9.80121ZM59.9341 9.80121V6.00227C59.9341 4.37042 59.0673 3.5088 57.6626 3.5088C56.7957 3.5088 56.0307 3.8887 55.6521 4.53883H55.5438L55.4354 3.78034L55.3271 3.67199H54.9472L54.8388 3.78034V9.7986L54.9472 9.90695H55.4354L55.5438 9.7986V6.37824C55.5438 4.96833 56.1939 4.10671 57.5542 4.10671C58.5843 4.10671 59.1861 4.75684 59.1861 5.99966V9.7986L59.2944 9.90695H59.8362L59.9446 9.7986L59.9341 9.80121ZM63.5634 3.56102C61.9315 3.56102 60.6913 4.70071 60.6913 6.81166C60.6913 8.92654 61.9393 10.0623 63.5634 10.0623C65.1874 10.0623 66.4354 8.92523 66.4354 6.81166C66.4354 4.69679 65.1874 3.56102 63.5634 3.56102ZM63.5634 4.15763C64.1874 4.15763 64.7148 4.41611 65.0908 4.87694C65.4628 5.33778 65.6795 6.00227 65.6795 6.80905C65.6795 7.62237 65.4628 8.28424 65.0908 8.74116C64.7187 9.20199 64.19 9.45787 63.5634 9.45787C62.9393 9.45787 62.4119 9.20199 62.0359 8.74116C61.6639 8.28033 61.4472 7.61584 61.4472 6.80905C61.4472 5.96833 61.6639 5.30775 62.0359 4.85084C62.408 4.39653 62.9367 4.1524 63.5634 4.1524V4.15763ZM68.1195 9.79729V1.23335L67.9563 1.125H67.468L67.3597 1.23335V9.79729L67.468 9.90565H67.9563L68.1195 9.79729ZM71.8662 3.55711C70.2344 3.55711 68.9942 4.69679 68.9942 6.80775C68.9942 8.92262 70.2422 10.0584 71.8662 10.0584C73.4902 10.0584 74.7383 8.92132 74.7383 6.80775C74.7383 4.69287 73.4928 3.55711 71.8662 3.55711ZM71.8662 4.15371C72.4902 4.15371 73.0163 4.41219 73.3936 4.87303C73.7657 5.33386 73.985 5.99835 73.985 6.80514C73.985 7.61845 73.7657 8.28033 73.3936 8.73724C73.0216 9.19808 72.4941 9.45395 71.8662 9.45395C71.2422 9.45395 70.7148 9.19808 70.3388 8.73724C69.9641 8.27641 69.7448 7.61192 69.7448 6.80514C69.7448 5.96441 69.9641 5.30384 70.3362 4.84692C70.7082 4.39261 71.237 4.14849 71.8636 4.14849L71.8662 4.15371ZM78.0411 3.50358C76.3048 3.50358 75.3779 4.9135 75.3779 6.75422C75.3779 8.64717 76.2461 10.0049 78.0411 10.0049C79.1795 10.0049 79.7774 9.51662 80.0516 8.97484V9.02837C80.0516 10.6602 79.673 11.9004 78.1586 11.9004C77.0202 11.9004 76.6443 11.4135 76.5268 10.7633L76.4171 10.6537H75.9302L75.8205 10.7633C75.9289 11.7934 76.69 12.4996 78.2095 12.4996C79.8414 12.4996 80.8727 11.4696 80.8727 8.97484V3.76598L80.7631 3.65893H80.3832L80.2761 3.76598L80.1665 4.52577H80.0594C79.7879 4.03752 79.1913 3.49575 78.049 3.49575L78.0411 3.50358ZM78.0411 4.10019C78.6651 4.10019 79.1665 4.31559 79.5163 4.75554C79.8623 5.19548 80.0516 5.85997 80.0516 6.75292C80.0516 7.64717 79.8623 8.30644 79.5163 8.7503C79.1704 9.19025 78.6691 9.40826 78.0411 9.40826C77.4171 9.40826 76.9158 9.19025 76.5659 8.7503C76.22 8.31035 76.0333 7.64586 76.0333 6.75292C76.0333 5.88608 76.2213 5.22551 76.5659 4.76859C76.9119 4.32081 77.4132 4.09235 78.0411 4.09235V4.10019ZM82.8061 2.53361V1.77513L82.6978 1.66677H82.2095L82.0463 1.77513V2.53361L82.1547 2.64197H82.643L82.8061 2.53361ZM82.8061 9.79207V3.77382L82.6978 3.66546H82.2095L82.0463 3.77382V9.79207L82.1547 9.90043H82.643L82.8061 9.79207ZM86.4354 3.49967C84.6991 3.49967 83.6677 4.74509 83.6677 6.52838V6.80122C83.6677 8.53751 84.5359 10.0519 86.5398 10.0519C88.2761 10.0519 88.9288 8.91348 89.0333 8.15892L88.9236 8.05187H88.4367L88.327 8.15892C88.0555 8.9174 87.5685 9.40565 86.5907 9.40565C84.9589 9.40565 84.4758 7.89129 84.4758 7.13412L84.5855 7.02707H89.0894L89.1991 6.91741V6.53751C89.1991 4.80123 88.1677 3.5088 86.4315 3.5088L86.4354 3.49967ZM86.4354 4.14979C87.1939 4.14979 87.6965 4.4618 88.015 4.88217C88.327 5.30253 88.4484 5.82994 88.4484 6.26597L88.3388 6.37563H84.5398L84.4328 6.26597C84.4328 5.83255 84.5546 5.30384 84.8662 4.88217C85.1782 4.4618 85.6782 4.14979 86.4328 4.14979H86.4354ZM94.5163 8.2751C94.5163 7.13673 93.8662 6.64326 92.6233 6.38216C91.3766 6.11062 90.6129 6.00227 90.6129 5.13543C90.6129 4.4853 91.1012 4.10541 92.0228 4.10541C93.1612 4.10541 93.5372 4.59366 93.5372 5.24378L93.6455 5.35214H94.1338L94.2423 5.24378C94.2423 3.99705 93.2122 3.5075 91.9707 3.5075C90.5608 3.5075 89.8559 4.26598 89.8559 5.13935C89.8559 6.16937 90.6143 6.6537 91.8663 6.87563C93.113 7.14717 93.7592 7.25553 93.7592 8.28555C93.7592 8.93568 93.3793 9.42393 92.1274 9.42393C90.989 9.42393 90.4955 8.7738 90.4955 8.01401L90.3871 7.90565H89.8988L89.7903 8.01401C89.7903 9.15239 90.6572 10.0244 92.1794 10.0244C93.7459 10.0793 94.5162 9.31949 94.5162 8.28816L94.5163 8.2751Z"
          fill="#808080"
        />
        <path
          id="Vector_2"
          d="M30.4431 8.05872V9.84723H24.8034V0.996082H26.853V8.04567H30.4431V8.05872ZM13.3413 0.5L8.34131 4.35116C7.82826 2.43211 6.16116 1.02219 4.11156 1.02219H0.521484V9.87333H4.11156C6.16116 9.87333 7.96272 8.46342 8.34131 6.54437L13.3413 10.3955L18.3413 6.54437V9.87333H23.981V8.07178H20.2603V1.02219H18.2107V4.35116L13.4718 8.20232L12.447 7.30415L14.7577 5.50259L17.199 3.58354L15.7891 2.4308L11.0502 6.15142L10.0254 5.25325L14.7643 1.66318L13.3544 0.510444H13.3519L13.3413 0.5ZM2.44054 2.8107H3.98101C4.30085 2.8107 4.61547 2.8825 4.90398 3.01435C5.19249 3.1462 5.45751 3.33942 5.68205 3.58093C5.90659 3.82114 6.08936 4.10834 6.21729 4.4321C6.34549 4.75717 6.41573 5.11878 6.41573 5.50259C6.41573 5.85507 6.35293 6.19841 6.23427 6.51695C6.11599 6.83549 5.94314 7.12791 5.72643 7.37596C5.50972 7.624 5.25124 7.82765 4.9562 7.96995C4.66116 8.11225 4.33218 8.19188 3.9797 8.19188H2.43923V2.81331L2.44054 2.8107Z"
          fill="#007DB8"
        />
      </g>
    </svg>`}renderEyekandy(){return v`<svg
      width="68"
      height="22"
      viewBox="0 0 68 22"
      fill="#343434"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M8.09876 14.6844C8.23206 14.5539 8.30013 14.3922 8.30013 14.1965C8.30013 13.4591 8.16116 12.7982 7.8832 12.231C7.60524 11.6609 7.19681 11.2071 6.66926 10.8837C6.14171 10.5604 5.50637 10.3959 4.77177 10.3959C4.03717 10.3959 3.36496 10.5661 2.79486 10.8979C2.22193 11.2297 1.76812 11.6977 1.44195 12.2849C1.11861 12.872 0.954102 13.5584 0.954102 14.3242C0.954102 15.09 1.12712 15.765 1.47031 16.3493C1.8135 16.9364 2.29284 17.4016 2.89981 17.7362C3.50394 18.0681 4.20451 18.2383 4.98166 18.2383C5.41277 18.2383 5.86942 18.1588 6.34308 18C6.81675 17.8412 7.21667 17.6313 7.53717 17.3789C7.71302 17.2456 7.79811 17.081 7.78676 16.891C7.77542 16.7067 7.68466 16.5365 7.51164 16.3833C7.37834 16.2699 7.22234 16.216 7.04081 16.2216C6.86496 16.2273 6.70046 16.284 6.55013 16.3947C6.37145 16.528 6.1332 16.6499 5.84106 16.752C5.54892 16.8541 5.25961 16.908 4.98166 16.908C4.46828 16.908 4.0088 16.7946 3.61456 16.5705C3.22031 16.3464 2.90548 16.0373 2.68141 15.6515C2.54811 15.4246 2.45451 15.1665 2.40062 14.8801H7.59106C7.79244 14.8801 7.96545 14.8148 8.09876 14.6872V14.6844ZM2.41764 13.6293C2.46585 13.3939 2.53676 13.1783 2.63036 12.9854C2.81755 12.5968 3.09551 12.2877 3.45856 12.0636C3.82161 11.8396 4.26407 11.7261 4.77461 11.7261C5.21991 11.7261 5.60564 11.831 5.9148 12.0353C6.22679 12.2395 6.47072 12.5231 6.6409 12.8748C6.74868 13.1017 6.82526 13.3541 6.87064 13.6293H2.41764Z"
      />
      <path
        d="M16.3011 10.9146C16.2359 10.7501 16.0884 10.6197 15.8643 10.5232C15.4332 10.3446 15.1013 10.4693 14.9 10.892L12.7273 15.7959L10.2512 10.8749C10.1605 10.6849 10.0272 10.5516 9.85133 10.4864C9.67832 10.4211 9.49112 10.4268 9.30109 10.5091C9.10822 10.5913 8.97208 10.7218 8.8955 10.9005C8.81892 11.082 8.83026 11.272 8.93237 11.4677L12.0353 17.3616L10.6654 20.456C10.5661 20.6687 10.5462 20.8587 10.6058 21.0232C10.6654 21.1877 10.81 21.3239 11.0341 21.426C11.1702 21.4856 11.2922 21.5139 11.3943 21.5139C11.6751 21.5139 11.8793 21.3551 11.9984 21.0431L16.2444 11.4933C16.3436 11.2749 16.3635 11.0792 16.2983 10.9175L16.3011 10.9146Z"
      />
      <path
        d="M67.9193 10.9146C67.854 10.7501 67.7065 10.6197 67.4825 10.5232C67.0513 10.3417 66.7195 10.4693 66.5181 10.892L64.3455 15.7959L61.8694 10.8749C61.7787 10.6849 61.6453 10.5516 61.4695 10.4864C61.2965 10.4211 61.1093 10.4268 60.9193 10.5091C60.7264 10.5913 60.5902 10.7218 60.5137 10.9005C60.4371 11.082 60.4484 11.272 60.5505 11.4677L63.6535 17.3616L62.2835 20.456C62.1842 20.6687 62.1644 20.8587 62.224 21.0232C62.2835 21.1877 62.4282 21.3239 62.6522 21.426C62.7912 21.4856 62.9103 21.5139 63.0124 21.5139C63.2932 21.5139 63.4975 21.3551 63.6166 21.0431L67.8625 11.4933C67.9618 11.2749 67.9817 11.0792 67.9164 10.9175L67.9193 10.9146Z"
      />
      <path
        d="M59.0076 7.41478C58.8658 7.27297 58.6758 7.19922 58.446 7.19922C58.2163 7.19922 58.0376 7.27013 57.8901 7.41194C57.7426 7.55376 57.6689 7.74379 57.6689 7.97637V11.5359C57.3711 11.2069 57.0137 10.9403 56.6024 10.7389C56.1316 10.5092 55.6125 10.3929 55.0595 10.3929C54.3731 10.3929 53.7491 10.5659 53.2045 10.9091C52.66 11.2523 52.226 11.7231 51.9112 12.3102C51.5963 12.8974 51.4375 13.5667 51.4375 14.307C51.4375 15.0473 51.6105 15.7223 51.9537 16.3123C52.2969 16.9022 52.7677 17.3759 53.352 17.7191C53.9391 18.0623 54.6057 18.2353 55.3374 18.2353C56.0692 18.2353 56.7329 18.0623 57.3172 17.7191C57.8986 17.3759 58.3666 16.9022 58.7098 16.3123C59.053 15.7223 59.226 15.0473 59.226 14.307V7.9792C59.226 7.74946 59.1551 7.55943 59.0104 7.41762L59.0076 7.41478ZM57.7228 14.307C57.7228 14.7835 57.6178 15.2203 57.4108 15.606C57.2065 15.9918 56.9201 16.2981 56.5599 16.5165C56.2025 16.7349 55.7912 16.8455 55.3318 16.8455C54.8723 16.8455 54.4723 16.7349 54.1121 16.5165C53.7491 16.2981 53.4598 15.9918 53.2499 15.606C53.04 15.2203 52.9322 14.7835 52.9322 14.307C52.9322 13.8305 53.04 13.3852 53.2499 13.008C53.4598 12.6307 53.7519 12.3301 54.1121 12.1089C54.4752 11.8905 54.8836 11.7799 55.3318 11.7799C55.7799 11.7799 56.2025 11.8905 56.5599 12.1089C56.9172 12.3273 57.2037 12.6307 57.4108 13.0051C57.6178 13.3824 57.7228 13.8192 57.7228 14.3042V14.307Z"
      />
      <path
        d="M23.9201 14.6844C24.0534 14.5539 24.1215 14.3922 24.1215 14.1965C24.1215 13.4591 23.9825 12.7982 23.7046 12.231C23.4266 11.6609 23.0182 11.2071 22.4906 10.8837C21.9631 10.5604 21.3278 10.3959 20.5932 10.3959C19.8585 10.3959 19.1863 10.5661 18.6162 10.8979C18.0433 11.2297 17.5895 11.6977 17.2662 12.2849C16.9428 12.872 16.7783 13.5584 16.7783 14.3242C16.7783 15.09 16.9513 15.765 17.2945 16.3493C17.6377 16.9364 18.1171 17.4016 18.724 17.7362C19.3282 18.0681 20.0287 18.2383 20.8059 18.2383C21.237 18.2383 21.6936 18.1588 22.1673 18C22.641 17.8412 23.0409 17.6313 23.3614 17.3789C23.5372 17.2456 23.6223 17.081 23.611 16.891C23.5996 16.7067 23.5089 16.5365 23.3359 16.3833C23.2026 16.2699 23.0494 16.2131 22.865 16.2216C22.6892 16.2273 22.5247 16.284 22.3744 16.3947C22.1957 16.528 21.9574 16.6499 21.6653 16.752C21.3731 16.8541 21.0838 16.908 20.8059 16.908C20.2925 16.908 19.833 16.7946 19.4388 16.5705C19.0445 16.3464 18.7325 16.0373 18.5056 15.6515C18.3723 15.4246 18.2787 15.1665 18.2248 14.8801H23.4153C23.6167 14.8801 23.7868 14.8148 23.923 14.6872L23.9201 14.6844ZM18.239 13.6293C18.2872 13.3939 18.3581 13.1783 18.4517 12.9854C18.6389 12.5968 18.9169 12.2877 19.2799 12.0636C19.643 11.8396 20.0855 11.7261 20.596 11.7261C21.0441 11.7261 21.427 11.831 21.7362 12.0353C22.0482 12.2395 22.2921 12.5231 22.4623 12.8748C22.5701 13.1017 22.6466 13.3541 22.692 13.6293H18.239Z"
      />
      <path
        d="M39.8739 12.316C39.5308 11.726 39.0628 11.2523 38.4813 10.9091C37.8999 10.566 37.2333 10.3929 36.5044 10.3929C35.7755 10.3929 35.1061 10.566 34.519 10.9091C33.9319 11.2523 33.4611 11.726 33.1207 12.316C32.7775 12.9059 32.6045 13.5809 32.6045 14.3212C32.6045 15.0615 32.7633 15.7337 33.0782 16.318C33.393 16.9051 33.8269 17.3759 34.3715 17.7191C34.9161 18.0623 35.5401 18.2353 36.2265 18.2353C36.9128 18.2353 37.5368 18.0623 38.0814 17.7191C38.3537 17.5461 38.609 17.3305 38.8359 17.0781V17.4185C38.8359 17.6397 38.9096 17.8269 39.0571 17.9744C39.2046 18.1219 39.3889 18.1956 39.613 18.1956C39.8371 18.1956 40.0214 18.1219 40.1689 17.9744C40.3164 17.8269 40.3901 17.6397 40.3901 17.4185V14.3241C40.3901 13.5838 40.2171 12.9087 39.8739 12.3188V12.316ZM38.8897 14.3212C38.8897 14.7977 38.7848 15.2317 38.5778 15.6146C38.3707 15.9946 38.0842 16.2981 37.7269 16.5194C37.3695 16.7378 36.9582 16.8484 36.4987 16.8484C36.0393 16.8484 35.6393 16.7378 35.2791 16.5194C34.9161 16.301 34.6268 15.9946 34.4169 15.6146C34.207 15.2345 34.0992 14.7977 34.0992 14.3241C34.0992 13.8504 34.207 13.3994 34.4169 13.0165C34.6268 12.6365 34.9189 12.333 35.2791 12.1117C35.6422 11.8933 36.0506 11.7827 36.4987 11.7827C36.9469 11.7827 37.3666 11.8933 37.7269 12.1117C38.0842 12.3301 38.3707 12.6365 38.5778 13.0165C38.7848 13.3966 38.8897 13.8362 38.8897 14.3241V14.3212Z"
      />
      <path
        d="M31.6433 17.0667L28.9999 13.8107L31.4986 11.5813C31.649 11.4395 31.7312 11.275 31.7426 11.0906C31.7539 10.9063 31.6858 10.7333 31.544 10.5829C31.4107 10.4298 31.249 10.3475 31.059 10.3362C30.869 10.3277 30.696 10.3929 30.5456 10.5347L27.2896 13.4419V7.948C27.2896 7.72677 27.2187 7.54525 27.0825 7.40627C26.9435 7.26729 26.762 7.19922 26.5408 7.19922C26.3195 7.19922 26.138 7.27013 25.999 7.40627C25.8601 7.54241 25.792 7.72677 25.792 7.948V17.4269C25.792 17.6482 25.8629 17.8297 25.999 17.9687C26.138 18.1077 26.3195 18.1757 26.5408 18.1757C26.762 18.1757 26.9435 18.1048 27.0825 17.9687C27.2215 17.8297 27.2896 17.6482 27.2896 17.4269V15.3366L27.9022 14.7892L30.4974 17.997C30.6307 18.1587 30.7981 18.2495 30.9966 18.2665C31.0165 18.2665 31.0363 18.2665 31.0562 18.2665C31.232 18.2665 31.3937 18.2069 31.5383 18.0878C31.7085 17.946 31.805 17.7786 31.8191 17.5886C31.8333 17.3986 31.7766 17.2227 31.6433 17.0611V17.0667Z"
      />
      <path
        d="M49.1713 12.0236C48.8763 11.4875 48.4651 11.0734 47.9517 10.7955C47.4383 10.5175 46.8512 10.3785 46.2045 10.3785C45.5578 10.3785 45.0189 10.5175 44.5198 10.7898C44.3014 10.9089 44.1 11.0507 43.9156 11.2181C43.9156 10.9912 43.8419 10.804 43.7001 10.6622C43.5582 10.5204 43.3682 10.4466 43.1385 10.4466C42.9087 10.4466 42.73 10.5175 42.5826 10.6593C42.4351 10.8012 42.3613 10.9912 42.3613 11.2238V17.4126C42.3613 17.6338 42.4351 17.821 42.5826 17.9685C42.73 18.116 42.9172 18.1897 43.1385 18.1897C43.3597 18.1897 43.5583 18.116 43.7029 17.9685C43.8447 17.821 43.9156 17.6338 43.9156 17.4126V13.4985C43.9156 13.1723 44.0036 12.8802 44.1794 12.6306C44.3553 12.3781 44.5992 12.1739 44.9027 12.0208C45.2061 11.8676 45.5493 11.791 45.9266 11.791C46.3378 11.791 46.7094 11.8704 47.0271 12.0264C47.3419 12.1824 47.5943 12.4235 47.7815 12.7412C47.9687 13.0617 48.0651 13.4843 48.0651 13.9977V17.4126C48.0651 17.6338 48.1389 17.821 48.2864 17.9685C48.4339 18.116 48.6182 18.1897 48.8423 18.1897C49.0664 18.1897 49.2507 18.116 49.3982 17.9685C49.5457 17.821 49.6194 17.6338 49.6194 17.4126V13.9977C49.6194 13.2205 49.4691 12.5568 49.1741 12.0208L49.1713 12.0236Z"
      />
      <path
        d="M37.6824 6.86803C37.6476 6.86803 37.6042 6.85718 37.5521 6.83546C37.3914 6.76164 37.348 6.64656 37.4218 6.49023L39.4867 1.89796C39.5605 1.74597 39.6756 1.70472 39.8319 1.7742C39.9926 1.83934 40.0382 1.95225 39.9687 2.11292L37.8908 6.69867C37.8474 6.81158 37.7779 6.86803 37.6824 6.86803ZM38.4184 5.18746C38.349 5.2222 38.2838 5.22871 38.223 5.207C38.1622 5.18529 38.1123 5.13752 38.0732 5.0637L36.6141 2.11292C36.5794 2.0391 36.5728 1.97179 36.5946 1.91099C36.6206 1.8502 36.6684 1.80243 36.7379 1.76769C36.8117 1.73729 36.879 1.73295 36.9398 1.75466C37.0006 1.77637 37.0484 1.82197 37.0831 1.89145L38.5096 4.84874C38.5444 4.91822 38.5552 4.98553 38.5422 5.05067C38.5335 5.11146 38.4923 5.15706 38.4184 5.18746Z"
      />
      <path
        d="M34.459 5.34376C34.1202 5.34376 33.8163 5.2656 33.547 5.10927C33.2778 4.94859 33.0628 4.73363 32.9021 4.46439C32.7458 4.19081 32.6655 3.88466 32.6611 3.54594V0.503972C32.6611 0.417121 32.685 0.349811 32.7328 0.302043C32.7849 0.249932 32.8544 0.223877 32.9412 0.223877C33.0237 0.223877 33.0889 0.249932 33.1366 0.302043C33.1888 0.349811 33.2148 0.417121 33.2148 0.503972V2.36693C33.3581 2.17152 33.5448 2.01519 33.775 1.89794C34.0052 1.77634 34.2614 1.71555 34.5436 1.71555C34.8737 1.71555 35.169 1.79589 35.4295 1.95656C35.6901 2.11289 35.8942 2.32785 36.0418 2.60143C36.1938 2.87501 36.2698 3.18334 36.2698 3.5264C36.2698 3.87381 36.1895 4.1843 36.0288 4.45788C35.8725 4.73146 35.6575 4.94859 35.3839 5.10927C35.1147 5.2656 34.8064 5.34376 34.459 5.34376ZM34.459 4.84871C34.7021 4.84871 34.9193 4.79009 35.1103 4.67284C35.3058 4.55559 35.4577 4.39926 35.5663 4.20384C35.6792 4.00408 35.7357 3.77827 35.7357 3.5264C35.7357 3.27887 35.6792 3.05523 35.5663 2.85547C35.4577 2.65571 35.3058 2.49938 35.1103 2.38648C34.9193 2.26923 34.7021 2.2106 34.459 2.2106C34.2245 2.2106 34.0095 2.26923 33.8141 2.38648C33.623 2.49938 33.4732 2.65571 33.3646 2.85547C33.2561 3.05523 33.2018 3.27887 33.2018 3.5264C33.2018 3.77827 33.2561 4.00408 33.3646 4.20384C33.4732 4.39926 33.623 4.55559 33.8141 4.67284C34.0095 4.79009 34.2245 4.84871 34.459 4.84871Z"
      />
      <path
        d="M27.7747 5.34376C27.4317 5.34376 27.1233 5.2656 26.8498 5.10927C26.5762 4.94859 26.359 4.73146 26.1984 4.45788C26.042 4.1843 25.9639 3.87381 25.9639 3.5264C25.9639 3.18334 26.0399 2.87501 26.1919 2.60143C26.3438 2.32785 26.5501 2.11289 26.8107 1.95656C27.0712 1.79589 27.3665 1.71555 27.6966 1.71555C27.9788 1.71555 28.2329 1.77634 28.4587 1.89794C28.6888 2.01519 28.8756 2.17152 29.0189 2.36693V0.503972C29.0189 0.417121 29.0449 0.349811 29.097 0.302043C29.1535 0.249932 29.2208 0.223877 29.299 0.223877C29.3815 0.223877 29.4488 0.249932 29.5009 0.302043C29.553 0.349811 29.5791 0.417121 29.5791 0.503972V3.54594C29.5704 3.88466 29.4857 4.19081 29.325 4.46439C29.1687 4.73363 28.9559 4.94859 28.6867 5.10927C28.4174 5.2656 28.1134 5.34376 27.7747 5.34376ZM27.7747 4.84871C28.0179 4.84871 28.2329 4.79009 28.4196 4.67284C28.6107 4.55559 28.7605 4.39926 28.869 4.20384C28.982 4.00408 29.0384 3.77827 29.0384 3.5264C29.0384 3.27887 28.982 3.05523 28.869 2.85547C28.7605 2.65571 28.6107 2.49938 28.4196 2.38648C28.2329 2.26923 28.0179 2.2106 27.7747 2.2106C27.5359 2.2106 27.3187 2.26923 27.1233 2.38648C26.9323 2.49938 26.7803 2.65571 26.6674 2.85547C26.5545 3.05523 26.498 3.27887 26.498 3.5264C26.498 3.77827 26.5545 4.00408 26.6674 4.20384C26.7803 4.39926 26.9323 4.55559 27.1233 4.67284C27.3187 4.79009 27.5359 4.84871 27.7747 4.84871Z"
      />
      <path
        d="M23.901 5.34355C23.5449 5.34355 23.2301 5.26755 22.9565 5.11556C22.6829 4.95923 22.468 4.74427 22.3116 4.47069C22.1553 4.19711 22.0771 3.88444 22.0771 3.5327C22.0771 3.17661 22.151 2.86394 22.2986 2.5947C22.4463 2.32112 22.6482 2.10616 22.9044 1.94983C23.165 1.7935 23.4646 1.71533 23.8033 1.71533C24.1334 1.71533 24.42 1.79133 24.6631 1.94332C24.9107 2.09096 25.0996 2.29724 25.2299 2.56213C25.3645 2.82703 25.4318 3.12884 25.4318 3.46756C25.4318 3.54138 25.4079 3.60218 25.3601 3.64995C25.3124 3.69337 25.2516 3.71508 25.1777 3.71508H22.455V3.26563H25.2103L24.9302 3.46104C24.9346 3.2222 24.8911 3.00725 24.7999 2.81617C24.7087 2.6251 24.5785 2.47528 24.4091 2.36672C24.2397 2.25815 24.0378 2.20387 23.8033 2.20387C23.5558 2.20387 23.3387 2.26032 23.1519 2.37323C22.9695 2.48614 22.8284 2.64464 22.7285 2.84874C22.633 3.0485 22.5852 3.27649 22.5852 3.5327C22.5852 3.78891 22.6417 4.01689 22.7546 4.21665C22.8675 4.41641 23.0217 4.57274 23.2171 4.68565C23.4168 4.79856 23.6448 4.85501 23.901 4.85501C24.0487 4.85501 24.1985 4.82895 24.3505 4.77684C24.5068 4.72473 24.6306 4.65959 24.7218 4.58143C24.7739 4.54234 24.8325 4.5228 24.8976 4.5228C24.9671 4.51846 25.0236 4.53583 25.067 4.57491C25.1321 4.63137 25.1647 4.69216 25.1647 4.7573C25.1691 4.82244 25.1408 4.87889 25.08 4.92666C24.9367 5.04825 24.7543 5.14813 24.5329 5.2263C24.3114 5.30446 24.1008 5.34355 23.901 5.34355Z"
      />
      <path
        d="M19.7283 3.10283C19.737 2.83793 19.8043 2.60126 19.9302 2.39282C20.0605 2.18003 20.2299 2.01284 20.4383 1.89125C20.6511 1.76966 20.8834 1.70886 21.1353 1.70886C21.3568 1.70886 21.524 1.74143 21.6369 1.80657C21.7541 1.87171 21.7976 1.96073 21.7672 2.07364C21.7541 2.13443 21.7259 2.17786 21.6825 2.20392C21.6434 2.22997 21.5956 2.243 21.5392 2.243C21.4871 2.243 21.4263 2.23866 21.3568 2.22997C21.1006 2.19957 20.8726 2.21694 20.6728 2.28208C20.4774 2.34288 20.3211 2.44493 20.2038 2.58823C20.0866 2.73154 20.028 2.90307 20.028 3.10283H19.7283ZM19.7609 5.31102C19.674 5.31102 19.6067 5.28714 19.559 5.23937C19.5112 5.1916 19.4873 5.12429 19.4873 5.03744V2.02153C19.4873 1.93468 19.5112 1.86737 19.559 1.8196C19.6067 1.77183 19.674 1.74795 19.7609 1.74795C19.8477 1.74795 19.9129 1.77183 19.9563 1.8196C20.0041 1.86737 20.028 1.93468 20.028 2.02153V5.03744C20.028 5.12429 20.0041 5.1916 19.9563 5.23937C19.9129 5.28714 19.8477 5.31102 19.7609 5.31102Z"
      />
      <path
        d="M17.1071 5.34355C16.751 5.34355 16.4362 5.26755 16.1626 5.11556C15.889 4.95923 15.674 4.74427 15.5177 4.47069C15.3614 4.19711 15.2832 3.88444 15.2832 3.5327C15.2832 3.17661 15.357 2.86394 15.5047 2.5947C15.6523 2.32112 15.8542 2.10616 16.1105 1.94983C16.371 1.7935 16.6707 1.71533 17.0094 1.71533C17.3394 1.71533 17.626 1.79133 17.8692 1.94332C18.1167 2.09096 18.3056 2.29724 18.4359 2.56213C18.5705 2.82703 18.6378 3.12884 18.6378 3.46756C18.6378 3.54138 18.614 3.60218 18.5662 3.64995C18.5184 3.69337 18.4576 3.71508 18.3838 3.71508H15.661V3.26563H18.4164L18.1363 3.46104C18.1406 3.2222 18.0972 3.00725 18.006 2.81617C17.9148 2.6251 17.7845 2.47528 17.6152 2.36672C17.4458 2.25815 17.2439 2.20387 17.0094 2.20387C16.7618 2.20387 16.5447 2.26032 16.358 2.37323C16.1756 2.48614 16.0345 2.64464 15.9346 2.84874C15.8391 3.0485 15.7913 3.27649 15.7913 3.5327C15.7913 3.78891 15.8477 4.01689 15.9606 4.21665C16.0735 4.41641 16.2277 4.57274 16.4231 4.68565C16.6229 4.79856 16.8509 4.85501 17.1071 4.85501C17.2547 4.85501 17.4045 4.82895 17.5565 4.77684C17.7129 4.72473 17.8366 4.65959 17.9278 4.58143C17.9799 4.54234 18.0386 4.5228 18.1037 4.5228C18.1732 4.51846 18.2296 4.53583 18.2731 4.57491C18.3382 4.63137 18.3708 4.69216 18.3708 4.7573C18.3751 4.82244 18.3469 4.87889 18.2861 4.92666C18.1428 5.04825 17.9604 5.14813 17.7389 5.2263C17.5175 5.30446 17.3068 5.34355 17.1071 5.34355Z"
      />
      <path
        d="M11.6175 5.31149C11.5567 5.31149 11.5025 5.29412 11.4547 5.25938C11.4069 5.22464 11.3722 5.18338 11.3505 5.13562L10.3539 2.13273C10.3235 2.01548 10.3235 1.92212 10.3539 1.85263C10.3886 1.78315 10.4559 1.74841 10.5558 1.74841C10.6209 1.74841 10.6774 1.76578 10.7251 1.80052C10.7729 1.83526 10.8098 1.89172 10.8359 1.96988L11.7152 4.67965H11.5459L12.3666 1.95686C12.384 1.89606 12.4144 1.84612 12.4578 1.80704C12.5056 1.76795 12.5642 1.74841 12.6337 1.74841C12.7075 1.74841 12.7661 1.76795 12.8096 1.80704C12.8573 1.84612 12.8899 1.89606 12.9073 1.95686L13.6564 4.58194H13.5456L14.399 1.96988C14.4467 1.82224 14.5357 1.74841 14.666 1.74841C14.7702 1.74841 14.8419 1.7875 14.881 1.86566C14.9201 1.93949 14.9201 2.02851 14.881 2.13273L13.8778 5.13562C13.8605 5.18338 13.8279 5.22464 13.7801 5.25938C13.7367 5.29412 13.6846 5.31149 13.6238 5.31149C13.563 5.31149 13.5066 5.29412 13.4544 5.25938C13.4067 5.22464 13.3741 5.18338 13.3567 5.13562L12.5816 2.48448H12.6598L11.8716 5.13562C11.8542 5.18773 11.8216 5.23115 11.7739 5.26589C11.7261 5.29629 11.674 5.31149 11.6175 5.31149Z"
      />
      <path
        d="M8.22198 5.34355C7.87024 5.34355 7.55757 5.26538 7.28399 5.10905C7.01475 4.95272 6.80196 4.73776 6.64563 4.46418C6.4893 4.1906 6.41113 3.8801 6.41113 3.5327C6.41113 3.18095 6.4893 2.86828 6.64563 2.5947C6.80196 2.32112 7.01475 2.10616 7.28399 1.94983C7.55757 1.7935 7.87024 1.71533 8.22198 1.71533C8.56939 1.71533 8.87771 1.7935 9.14695 1.94983C9.41619 2.10616 9.62898 2.32112 9.78531 2.5947C9.94164 2.86828 10.022 3.18095 10.0263 3.5327C10.0263 3.8801 9.94815 4.1906 9.79182 4.46418C9.63549 4.73776 9.42053 4.95272 9.14695 5.10905C8.87771 5.26538 8.56939 5.34355 8.22198 5.34355ZM8.22198 4.8485C8.46517 4.8485 8.6823 4.79204 8.87337 4.67913C9.06444 4.56189 9.21426 4.40555 9.32282 4.21014C9.43139 4.01038 9.48567 3.78457 9.48567 3.5327C9.48567 3.28083 9.43139 3.05501 9.32282 2.85526C9.21426 2.6555 9.06444 2.49917 8.87337 2.38626C8.6823 2.26901 8.46517 2.21038 8.22198 2.21038C7.9788 2.21038 7.7595 2.26901 7.56408 2.38626C7.37301 2.49917 7.22102 2.6555 7.10811 2.85526C6.99955 3.05501 6.94527 3.28083 6.94527 3.5327C6.94527 3.78457 6.99955 4.01038 7.10811 4.21014C7.22102 4.40555 7.37301 4.56189 7.56408 4.67913C7.7595 4.79204 7.9788 4.8485 8.22198 4.8485Z"
      />
      <path
        d="M2.2801 6.83522C2.19324 6.83522 2.12376 6.80916 2.07165 6.75705C2.02388 6.70928 2 6.64197 2 6.55512V3.51316C2.00434 3.17443 2.08468 2.87046 2.24101 2.60122C2.40169 2.32763 2.61664 2.11268 2.88588 1.95634C3.15512 1.79567 3.4591 1.71533 3.79782 1.71533C4.14523 1.71533 4.45355 1.79567 4.72279 1.95634C4.99637 2.11268 5.21133 2.32763 5.36766 2.60122C5.52834 2.8748 5.60867 3.18529 5.60867 3.5327C5.60867 3.87576 5.53268 4.18408 5.38069 4.45766C5.23304 4.73125 5.02894 4.94837 4.76839 5.10905C4.50783 5.26538 4.21254 5.34355 3.8825 5.34355C3.60024 5.34355 3.34402 5.28492 3.11387 5.16767C2.88371 5.04608 2.69698 4.88758 2.55368 4.69216V6.55512C2.55368 6.64197 2.52762 6.70928 2.47551 6.75705C2.4234 6.80916 2.35826 6.83522 2.2801 6.83522ZM3.79782 4.84849C4.04101 4.84849 4.25814 4.79204 4.44921 4.67913C4.64462 4.56189 4.79661 4.40338 4.90518 4.20362C5.01809 4.00387 5.07454 3.78022 5.07454 3.5327C5.07454 3.28083 5.01809 3.05719 4.90518 2.86177C4.79661 2.66201 4.64462 2.50351 4.44921 2.38626C4.25814 2.26901 4.04101 2.21038 3.79782 2.21038C3.56332 2.21038 3.34837 2.26901 3.15295 2.38626C2.96188 2.50351 2.81206 2.66201 2.7035 2.86177C2.59493 3.05719 2.54065 3.28083 2.54065 3.5327C2.54065 3.78022 2.59493 4.00387 2.7035 4.20362C2.81206 4.40338 2.96188 4.56189 3.15295 4.67913C3.34403 4.79204 3.55898 4.84849 3.79782 4.84849Z"
      />
    </svg>`}render(){let A=[this.brand==="harvey-norman"&&this.renderHarveyNorman(),this.brand==="dell"&&this.renderDell()].filter(Boolean);return v` <div class="brands">
      ${A}
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="31"
        height="13"
        viewBox="0 0 31 13"
        fill="none"
      >
        <g clip-path="url(#clip0_1717_30779)">
          <path
            d="M2.3322 0.701172H0.158203V2.87827H2.3322V0.701172Z"
            fill="#00C7FD"
          />
          <path
            d="M2.27798 12.0335V4.20019H0.216797V12.0354H2.27798V12.0335ZM15.9376 12.1139V10.1934C15.6336 10.1934 15.3831 10.1762 15.1919 10.1456C14.9797 10.1111 14.8172 10.0402 14.7082 9.9311C14.5992 9.82196 14.5265 9.66495 14.494 9.46199C14.4615 9.26859 14.4462 9.01393 14.4462 8.70565V5.96561H15.9376V4.20019H14.4462V1.14612H12.3851V8.71905C12.3851 9.35859 12.4405 9.90047 12.5495 10.3351C12.6585 10.764 12.842 11.1125 13.0982 11.3748C13.3545 11.6372 13.6929 11.8267 14.104 11.9397C14.5189 12.0546 15.0485 12.112 15.6757 12.112H15.9357L15.9376 12.1139ZM27.7503 12.0335V0.542969H25.6891V12.0335H27.7503ZM10.3984 4.96993C9.82674 4.35337 9.02177 4.03935 8.00074 4.03935C7.50934 4.03935 7.05427 4.14083 6.64892 4.33997C6.24357 4.54102 5.8994 4.82057 5.62406 5.17672L5.51125 5.32224V5.19204V4.19827H3.47875V12.0335H5.52655V7.85932V8.14845C5.52655 8.10058 5.52846 8.05271 5.53037 8.00676C5.5514 7.27531 5.73496 6.72769 6.07339 6.38111C6.43668 6.01156 6.87645 5.82392 7.38123 5.82392C7.97588 5.82392 8.42903 6.00582 8.73114 6.3658C9.02559 6.71811 9.17664 7.22361 9.17856 7.86698V7.8823C9.17856 7.8823 9.17856 7.88421 9.17856 7.88613V12.0297H11.2589V7.58168C11.2589 6.46536 10.9682 5.58457 10.3965 4.9661L10.3984 4.96993ZM24.6164 8.10058C24.6164 7.53955 24.517 7.00533 24.3181 6.51706C24.1212 6.0288 23.842 5.59223 23.4883 5.22268C23.1346 4.85313 22.7063 4.56208 22.213 4.35337C21.7197 4.14466 21.169 4.03935 20.5763 4.03935C20.016 4.03935 19.4807 4.14657 18.9874 4.36103C18.494 4.57357 18.0581 4.86653 17.6948 5.23225C17.3315 5.59606 17.039 6.03263 16.8248 6.52664C16.6126 7.02065 16.5036 7.55487 16.5036 8.11781C16.5036 8.68076 16.6069 9.21498 16.8095 9.70899C17.0122 10.203 17.2971 10.6377 17.6547 11.0015C18.0122 11.3653 18.452 11.6582 18.9625 11.8708C19.4711 12.0833 20.0352 12.1925 20.6394 12.1925C22.3831 12.1925 23.4711 11.3978 24.1193 10.6549L22.6355 9.52326C22.322 9.89472 21.5801 10.3983 20.6547 10.3983C20.0734 10.3983 19.5954 10.2643 19.2321 9.99812C18.8688 9.73197 18.6183 9.36625 18.4883 8.91053L18.4673 8.83777H24.6145V8.10058H24.6164ZM18.4864 7.38254C18.4864 6.80811 19.1441 5.8086 20.561 5.80668C21.9778 5.80668 22.6374 6.80811 22.6374 7.38063H18.4864V7.38254Z"
            fill="#0068B5"
          />
          <path
            d="M30.0974 11.0472C30.0572 10.9553 30.0018 10.8749 29.9329 10.8041C29.8641 10.7351 29.7838 10.6796 29.6901 10.6394C29.5983 10.5992 29.4989 10.5781 29.3937 10.5781C29.2886 10.5781 29.1891 10.5992 29.0974 10.6394C29.0056 10.6796 28.9234 10.7351 28.8545 10.8041C28.7857 10.873 28.7302 10.9534 28.6901 11.0472C28.6499 11.1392 28.6289 11.2387 28.6289 11.344C28.6289 11.4493 28.6499 11.5489 28.6901 11.6408C28.7302 11.7327 28.7857 11.8132 28.8545 11.884C28.9234 11.9529 29.0037 12.0085 29.0974 12.0487C29.1891 12.0889 29.2886 12.1099 29.3937 12.1099C29.4989 12.1099 29.5983 12.0889 29.6901 12.0487C29.7819 12.0085 29.8622 11.9529 29.9329 11.884C30.0018 11.8151 30.0572 11.7346 30.0974 11.6408C30.1375 11.5489 30.1585 11.4493 30.1585 11.344C30.1585 11.2387 30.1375 11.1392 30.0974 11.0472ZM29.9731 11.5872C29.9406 11.6638 29.8947 11.7308 29.8392 11.7883C29.7819 11.8457 29.7149 11.8897 29.6385 11.9223C29.562 11.9548 29.4798 11.9721 29.3937 11.9721C29.3077 11.9721 29.2255 11.9548 29.149 11.9223C29.0725 11.8897 29.0056 11.8438 28.9482 11.7883C28.8909 11.7308 28.8469 11.6638 28.8144 11.5872C28.7819 11.5106 28.7647 11.4283 28.7647 11.3421C28.7647 11.256 28.7819 11.1736 28.8144 11.097C28.8469 11.0204 28.8928 10.9534 28.9482 10.896C29.0056 10.8385 29.0725 10.7945 29.149 10.7619C29.2255 10.7294 29.3077 10.7122 29.3937 10.7122C29.4798 10.7122 29.562 10.7294 29.6385 10.7619C29.7149 10.7945 29.7819 10.8404 29.8392 10.896C29.8966 10.9534 29.9406 11.0204 29.9731 11.097C30.0056 11.1736 30.0228 11.256 30.0228 11.3421C30.0228 11.4283 30.0056 11.5106 29.9731 11.5872ZM29.539 11.4053C29.5983 11.3976 29.648 11.3766 29.6882 11.3383C29.7283 11.3 29.7475 11.2426 29.7475 11.166C29.7475 11.0817 29.7226 11.0166 29.6729 10.9707C29.6232 10.9247 29.5448 10.9036 29.4396 10.9036H29.1031V11.7768H29.2637V11.4187H29.3803L29.5983 11.7768H29.7666L29.541 11.4072L29.539 11.4053ZM29.453 11.2789C29.4281 11.2808 29.4033 11.2828 29.3784 11.2828H29.2618V11.0377H29.3784C29.4033 11.0377 29.4281 11.0377 29.453 11.0396C29.4779 11.0396 29.4989 11.0453 29.5199 11.0549C29.539 11.0626 29.5562 11.076 29.5677 11.0913C29.5792 11.1066 29.5868 11.1296 29.5868 11.1583C29.5868 11.187 29.5811 11.21 29.5677 11.2253C29.5562 11.2426 29.539 11.254 29.5199 11.2617C29.5008 11.2694 29.4779 11.2751 29.453 11.277V11.2789Z"
            fill="#0068B5"
          />
        </g>
        <defs>
          <clipPath id="clip0_1717_30779">
            <rect
              width="30"
              height="11.6495"
              fill="white"
              transform="translate(0.15918 0.542969)"
            />
          </clipPath>
        </defs>
      </svg>
      ${this.logoAsLink?v`<a
            href="https://www.eyekandy.com?utm_source=${encodeURIComponent(window.location.href)}&utm_medium=aips&utm_campaign=brand-bar&utm_content=powered-by-eyekandy"
            target="_blank"
            >${this.renderEyekandy()}</a
          >`:this.renderEyekandy()}
    </div>`}}f([a({type:String})],CY.prototype,"brand",void 0),f([a({type:String})],CY.prototype,"logoAsLink",void 0),CY=f([z0("ek-aips-brand-bar")],CY);function bU(A,Q){for(var B=0;B<Q.length;B++){var C=Q[B];if(C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C)C.writable=!0;Object.defineProperty(A,C.key,C)}}function S_(A,Q,B){if(Q)bU(A.prototype,Q);if(B)bU(A,B);return Object.defineProperty(A,"prototype",{writable:!1}),A}/*!
 * Splide.js
 * Version  : 4.1.4
 * License  : MIT
 * Copyright: 2022 Naotoshi Fujita
 */var uU="(prefers-reduced-motion: reduce)",B7=1,y_=2,I7=3,K7=4,$9=5,gC=6,pC=7,f_={CREATED:B7,MOUNTED:y_,IDLE:I7,MOVING:K7,SCROLLING:$9,DRAGGING:gC,DESTROYED:pC};function H3(A){A.length=0}function n3(A,Q,B){return Array.prototype.slice.call(A,Q,B)}function v1(A){return A.bind.apply(A,[null].concat(n3(arguments,1)))}var Az=setTimeout,YY=function A(){};function pU(A){return requestAnimationFrame(A)}function lC(A,Q){return typeof Q===A}function F9(A){return!VY(A)&&lC("object",A)}var FY=Array.isArray,Qz=v1(lC,"function"),l3=v1(lC,"string"),R9=v1(lC,"undefined");function VY(A){return A===null}function Bz(A){try{return A instanceof(A.ownerDocument.defaultView||window).HTMLElement}catch(Q){return!1}}function L9(A){return FY(A)?A:[A]}function xA(A,Q){L9(A).forEach(Q)}function UY(A,Q){return A.indexOf(Q)>-1}function vC(A,Q){return A.push.apply(A,L9(Q)),A}function K3(A,Q,B){if(A)xA(Q,function(C){if(C)A.classList[B?"add":"remove"](C)})}function T4(A,Q){K3(A,l3(Q)?Q.split(" "):Q,!0)}function M9(A,Q){xA(Q,A.appendChild.bind(A))}function zY(A,Q){xA(A,function(B){var C=(Q||B).parentNode;if(C)C.insertBefore(B,Q)})}function V9(A,Q){return Bz(A)&&(A.msMatchesSelector||A.matches).call(A,Q)}function Cz(A,Q){var B=A?n3(A.children):[];return Q?B.filter(function(C){return V9(C,Q)}):B}function O9(A,Q){return Q?Cz(A,Q)[0]:A.firstElementChild}var U9=Object.keys;function v6(A,Q,B){if(A)(B?U9(A).reverse():U9(A)).forEach(function(C){C!=="__proto__"&&Q(A[C],C)});return A}function z9(A){return n3(arguments,1).forEach(function(Q){v6(Q,function(B,C){A[C]=Q[C]})}),A}function c3(A){return n3(arguments,1).forEach(function(Q){v6(Q,function(B,C){if(FY(B))A[C]=B.slice();else if(F9(B))A[C]=c3({},F9(A[C])?A[C]:{},B);else A[C]=B})}),A}function mU(A,Q){xA(Q||U9(A),function(B){delete A[B]})}function j4(A,Q){xA(A,function(B){xA(Q,function(C){B&&B.removeAttribute(C)})})}function C1(A,Q,B){if(F9(Q))v6(Q,function(C,J){C1(A,J,C)});else xA(A,function(C){VY(B)||B===""?j4(C,Q):C.setAttribute(Q,String(B))})}function C7(A,Q,B){var C=document.createElement(A);if(Q)l3(Q)?T4(C,Q):C1(C,Q);return B&&M9(B,C),C}function Q4(A,Q,B){if(R9(B))return getComputedStyle(A)[Q];if(!VY(B))A.style[Q]=""+B}function D9(A,Q){Q4(A,"display",Q)}function Jz(A){A.setActive&&A.setActive()||A.focus({preventScroll:!0})}function B4(A,Q){return A.getAttribute(Q)}function dU(A,Q){return A&&A.classList.contains(Q)}function fA(A){return A.getBoundingClientRect()}function b6(A){xA(A,function(Q){if(Q&&Q.parentNode)Q.parentNode.removeChild(Q)})}function Iz(A){return O9(new DOMParser().parseFromString(A,"text/html").body)}function q3(A,Q){if(A.preventDefault(),Q)A.stopPropagation(),A.stopImmediatePropagation()}function qz(A,Q){return A&&A.querySelector(Q)}function DY(A,Q){return Q?n3(A.querySelectorAll(Q)):[]}function Y3(A,Q){K3(A,Q,!1)}function ZY(A){return A.timeStamp}function g6(A){return l3(A)?A:A?A+"px":""}var k9="splide",EY="data-"+k9;function G9(A,Q){if(!A)throw new Error("["+k9+"] "+(Q||""))}var{min:s3,max:mC,floor:dC,ceil:E9,abs:GA}=Math;function Kz(A,Q,B){return GA(A-Q)<B}function bC(A,Q,B,C){var J=s3(Q,B),I=mC(Q,B);return C?J<A&&A<I:J<=A&&A<=I}function A7(A,Q,B){var C=s3(Q,B),J=mC(Q,B);return s3(mC(C,A),J)}function HY(A){return+(A>0)-+(A<0)}function XY(A,Q){return xA(Q,function(B){A=A.replace("%s",""+B)}),A}function wY(A){return A<10?"0"+A:""+A}var cU={};function h_(A){return""+A+wY(cU[A]=(cU[A]||0)+1)}function Yz(){var A=[];function Q(q,K,Y,Z){J(q,K,function(H,G,W){var F="addEventListener"in H,z=F?H.removeEventListener.bind(H,G,Y,Z):H.removeListener.bind(H,Y);F?H.addEventListener(G,Y,Z):H.addListener(Y),A.push([H,G,W,Y,z])})}function B(q,K,Y){J(q,K,function(Z,H,G){A=A.filter(function(W){if(W[0]===Z&&W[1]===H&&W[2]===G&&(!Y||W[3]===Y))return W[4](),!1;return!0})})}function C(q,K,Y){var Z,H=!0;if(typeof CustomEvent==="function")Z=new CustomEvent(K,{bubbles:H,detail:Y});else Z=document.createEvent("CustomEvent"),Z.initCustomEvent(K,H,!1,Y);return q.dispatchEvent(Z),Z}function J(q,K,Y){xA(q,function(Z){Z&&xA(K,function(H){H.split(" ").forEach(function(G){var W=G.split(".");Y(Z,W[0],W[1])})})})}function I(){A.forEach(function(q){q[4]()}),H3(A)}return{bind:Q,unbind:B,dispatch:C,destroy:I}}var p6="mounted",lU="ready",i3="move",P9="moved",Zz="click",x_="active",g_="inactive",v_="visible",b_="hidden",Y2="refresh",WA="updated",w9="resize",NY="resized",u_="drag",p_="dragging",m_="dragged",$Y="scroll",Y7="scrolled",d_="overflow",Hz="destroy",c_="arrows:mounted",l_="arrows:updated",s_="pagination:mounted",i_="pagination:updated",Xz="navigation:mounted",Gz="autoplay:play",n_="autoplay:playing",Wz="autoplay:pause",Fz="lazyload:loaded",Vz="sk",Uz="sh",cC="ei";function i1(A){var Q=A?A.event.bus:document.createDocumentFragment(),B=Yz();function C(I,q){B.bind(Q,L9(I).join(" "),function(K){q.apply(q,FY(K.detail)?K.detail:[])})}function J(I){B.dispatch(Q,I,n3(arguments,1))}if(A)A.event.on(Hz,B.destroy);return z9(B,{bus:Q,on:C,off:v1(B.unbind,Q),emit:J})}function sC(A,Q,B,C){var J=Date.now,I,q=0,K,Y=!0,Z=0;function H(){if(!Y){if(q=A?s3((J()-I)/A,1):1,B&&B(q),q>=1){if(Q(),I=J(),C&&++Z>=C)return W()}K=pU(H)}}function G(w){w||z(),I=J()-(w?q*A:0),Y=!1,K=pU(H)}function W(){Y=!0}function F(){if(I=J(),q=0,B)B(q)}function z(){K&&cancelAnimationFrame(K),q=0,K=0,Y=!0}function U(w){A=w}function E(){return Y}return{start:G,rewind:F,pause:W,cancel:z,set:U,isPaused:E}}function o_(A){var Q=A;function B(J){Q=J}function C(J){return UY(L9(J),Q)}return{set:B,is:C}}function a_(A,Q){var B=sC(Q||0,A,null,1);return function(){B.isPaused()&&B.start()}}function r_(A,Q,B){var C=A.state,J=B.breakpoints||{},I=B.reducedMotion||{},q=Yz(),K=[];function Y(){var z=B.mediaQuery==="min";U9(J).sort(function(U,E){return z?+U-+E:+E-+U}).forEach(function(U){H(J[U],"("+(z?"min":"max")+"-width:"+U+"px)")}),H(I,uU),G()}function Z(z){if(z)q.destroy()}function H(z,U){var E=matchMedia(U);q.bind(E,"change",G),K.push([z,E])}function G(){var z=C.is(pC),U=B.direction,E=K.reduce(function(w,L){return c3(w,L[1].matches?L[0]:{})},{});if(mU(B),F(E),B.destroy)A.destroy(B.destroy==="completely");else if(z)Z(!0),A.mount();else U!==B.direction&&A.refresh()}function W(z){if(matchMedia(uU).matches)z?c3(B,I):mU(B,U9(I))}function F(z,U,E){if(c3(B,z),U&&c3(Object.getPrototypeOf(B),z),E||!C.is(B7))A.emit(WA,B)}return{setup:Y,destroy:Z,reduce:W,set:F}}var iC="Arrow",nC=iC+"Left",oC=iC+"Right",zz=iC+"Up",Dz=iC+"Down";var sU="rtl",aC="ttb",JY={width:["height"],left:["top","right"],right:["bottom","left"],x:["y"],X:["Y"],Y:["X"],ArrowLeft:[zz,oC],ArrowRight:[Dz,nC]};function t_(A,Q,B){function C(I,q,K){K=K||B.direction;var Y=K===sU&&!q?1:K===aC?0:-1;return JY[I]&&JY[I][Y]||I.replace(/width|left|right/i,function(Z,H){var G=JY[Z.toLowerCase()][Y]||Z;return H>0?G.charAt(0).toUpperCase()+G.slice(1):G})}function J(I){return I*(B.direction===sU?1:-1)}return{resolve:C,orient:J}}var Z3="role",J7="tabindex",e_="disabled",C4="aria-",_9=C4+"controls",Ez=C4+"current",iU=C4+"selected",hA=C4+"label",RY=C4+"labelledby",wz=C4+"hidden",LY=C4+"orientation",N9=C4+"roledescription",nU=C4+"live",oU=C4+"busy",aU=C4+"atomic",MY=[Z3,J7,e_,_9,Ez,hA,RY,wz,LY,N9],S4=k9+"__",o3="is-",IY=k9,rU=S4+"track",AT=S4+"list",rC=S4+"slide",Nz=rC+"--clone",QT=rC+"__container",OY=S4+"arrows",tC=S4+"arrow",$z=tC+"--prev",Rz=tC+"--next",eC=S4+"pagination",Lz=eC+"__page",BT=S4+"progress",CT=BT+"__bar",kY=S4+"toggle",nt=kY+"__play",ot=kY+"__pause",JT=S4+"spinner",IT=S4+"sr",qT=o3+"initialized",u6=o3+"active",Mz=o3+"prev",Oz=o3+"next",GY=o3+"visible",WY=o3+"loading",kz=o3+"focus-in",Pz=o3+"overflow",KT=[u6,GY,Mz,Oz,WY,kz,Pz],YT={slide:rC,clone:Nz,arrows:OY,arrow:tC,prev:$z,next:Rz,pagination:eC,page:Lz,spinner:JT};function ZT(A,Q){if(Qz(A.closest))return A.closest(Q);var B=A;while(B&&B.nodeType===1){if(V9(B,Q))break;B=B.parentElement}return B}var HT=5,tU=200,_z="touchstart mousedown",qY="touchmove mousemove",KY="touchend touchcancel mouseup click";function XT(A,Q,B){var C=i1(A),J=C.on,I=C.bind,q=A.root,K=B.i18n,Y={},Z=[],H=[],G=[],W,F,z;function U(){X(),V(),L()}function E(){J(Y2,w),J(Y2,U),J(WA,L),I(document,_z+" keydown",function(R){z=R.type==="keydown"},{capture:!0}),I(q,"focusin",function(){K3(q,kz,!!z)})}function w(R){var k=MY.concat("style");H3(Z),Y3(q,H),Y3(W,G),j4([W,F],k),j4(q,R?k:["style",N9])}function L(){Y3(q,H),Y3(W,G),H=N(IY),G=N(rU),T4(q,H),T4(W,G),C1(q,hA,B.label),C1(q,RY,B.labelledby)}function X(){W=D("."+rU),F=O9(W,"."+AT),G9(W&&F,"A track/list element is missing."),vC(Z,Cz(F,"."+rC+":not(."+Nz+")")),v6({arrows:OY,pagination:eC,prev:$z,next:Rz,bar:CT,toggle:kY},function(R,k){Y[k]=D("."+R)}),z9(Y,{root:q,track:W,list:F,slides:Z})}function V(){var R=q.id||h_(k9),k=B.role;if(q.id=R,W.id=W.id||R+"-track",F.id=F.id||R+"-list",!B4(q,Z3)&&q.tagName!=="SECTION"&&k)C1(q,Z3,k);C1(q,N9,K.carousel),C1(F,Z3,"presentation")}function D(R){var k=qz(q,R);return k&&ZT(k,"."+IY)===q?k:void 0}function N(R){return[R+"--"+B.type,R+"--"+B.direction,B.drag&&R+"--draggable",B.isNavigation&&R+"--nav",R===IY&&u6]}return z9(Y,{setup:U,mount:E,destroy:w})}var q7="slide",Z7="loop",T9="fade";function GT(A,Q,B,C){var J=i1(A),I=J.on,q=J.emit,K=J.bind,Y=A.Components,Z=A.root,H=A.options,G=H.isNavigation,W=H.updateOnMove,F=H.i18n,z=H.pagination,U=H.slideFocus,E=Y.Direction.resolve,w=B4(C,"style"),L=B4(C,hA),X=B>-1,V=O9(C,"."+QT),D;function N(){if(!X)C.id=Z.id+"-slide"+wY(Q+1),C1(C,Z3,z?"tabpanel":"group"),C1(C,N9,F.slide),C1(C,hA,L||XY(F.slideLabel,[Q+1,A.length]));R()}function R(){if(K(C,"click",v1(q,Zz,T)),K(C,"keydown",v1(q,Vz,T)),I([P9,Uz,Y7],_),I(Xz,P),W)I(i3,$)}function k(){D=!0,J.destroy(),Y3(C,KT),j4(C,MY),C1(C,"style",w),C1(C,hA,L||"")}function P(){var d=A.splides.map(function(g){var l=g.splide.Components.Slides.getAt(Q);return l?l.slide.id:""}).join(" ");C1(C,hA,XY(F.slideX,(X?B:Q)+1)),C1(C,_9,d),C1(C,Z3,U?"button":""),U&&j4(C,N9)}function $(){if(!D)_()}function _(){if(!D){var d=A.index;h(),S(),K3(C,Mz,Q===d-1),K3(C,Oz,Q===d+1)}}function h(){var d=M();if(d!==dU(C,u6))K3(C,u6,d),C1(C,Ez,G&&d||""),q(d?x_:g_,T)}function S(){var d=y(),g=!d&&(!M()||X);if(!A.state.is([K7,$9]))C1(C,wz,g||"");if(C1(DY(C,H.focusableNodes||""),J7,g?-1:""),U)C1(C,J7,g?-1:0);if(d!==dU(C,GY))K3(C,GY,d),q(d?v_:b_,T);if(!d&&document.activeElement===C){var l=Y.Slides.getAt(A.index);l&&Jz(l.slide)}}function O(d,g,l){Q4(l&&V||C,d,g)}function M(){var d=A.index;return d===Q||H.cloneStatus&&d===B}function y(){if(A.is(T9))return M();var d=fA(Y.Elements.track),g=fA(C),l=E("left",!0),t=E("right",!0);return dC(d[l])<=E9(g[l])&&dC(g[t])<=E9(d[t])}function u(d,g){var l=GA(d-Q);if(!X&&(H.rewind||A.is(Z7)))l=s3(l,A.length-l);return l<=g}var T={index:Q,slideIndex:B,slide:C,container:V,isClone:X,mount:N,destroy:k,update:_,style:O,isWithin:u};return T}function WT(A,Q,B){var C=i1(A),J=C.on,I=C.emit,q=C.bind,K=Q.Elements,Y=K.slides,Z=K.list,H=[];function G(){W(),J(Y2,F),J(Y2,W)}function W(){Y.forEach(function(_,h){U(_,h,-1)})}function F(){D(function(_){_.destroy()}),H3(H)}function z(){D(function(_){_.update()})}function U(_,h,S){var O=GT(A,h,S,_);O.mount(),H.push(O),H.sort(function(M,y){return M.index-y.index})}function E(_){return _?N(function(h){return!h.isClone}):H}function w(_){var h=Q.Controller,S=h.toIndex(_),O=h.hasFocus()?1:B.perPage;return N(function(M){return bC(M.index,S,S+O-1)})}function L(_){return N(_)[0]}function X(_,h){xA(_,function(S){if(l3(S))S=Iz(S);if(Bz(S)){var O=Y[h];O?zY(S,O):M9(Z,S),T4(S,B.classes.slide),k(S,v1(I,w9))}}),I(Y2)}function V(_){b6(N(_).map(function(h){return h.slide})),I(Y2)}function D(_,h){E(h).forEach(_)}function N(_){return H.filter(Qz(_)?_:function(h){return l3(_)?V9(h.slide,_):UY(L9(_),h.index)})}function R(_,h,S){D(function(O){O.style(_,h,S)})}function k(_,h){var S=DY(_,"img"),O=S.length;if(O)S.forEach(function(M){q(M,"load error",function(){if(!--O)h()})});else h()}function P(_){return _?Y.length:H.length}function $(){return H.length>B.perPage}return{mount:G,destroy:F,update:z,register:U,get:E,getIn:w,getAt:L,add:X,remove:V,forEach:D,filter:N,style:R,getLength:P,isEnough:$}}function FT(A,Q,B){var C=i1(A),J=C.on,I=C.bind,q=C.emit,K=Q.Slides,Y=Q.Direction.resolve,Z=Q.Elements,H=Z.root,G=Z.track,W=Z.list,F=K.getAt,z=K.style,U,E,w;function L(){X(),I(window,"resize load",a_(v1(q,w9))),J([WA,Y2],X),J(w9,V)}function X(){U=B.direction===aC,Q4(H,"maxWidth",g6(B.width)),Q4(G,Y("paddingLeft"),D(!1)),Q4(G,Y("paddingRight"),D(!0)),V(!0)}function V(T){var d=fA(H);if(T||E.width!==d.width||E.height!==d.height){if(Q4(G,"height",N()),z(Y("marginRight"),g6(B.gap)),z("width",k()),z("height",P(),!0),E=d,q(NY),w!==(w=u()))K3(H,Pz,w),q(d_,w)}}function D(T){var d=B.padding,g=Y(T?"right":"left");return d&&g6(d[g]||(F9(d)?0:d))||"0px"}function N(){var T="";if(U)T=R(),G9(T,"height or heightRatio is missing."),T="calc("+T+" - "+D(!1)+" - "+D(!0)+")";return T}function R(){return g6(B.height||fA(W).width*B.heightRatio)}function k(){return B.autoWidth?null:g6(B.fixedWidth)||(U?"":$())}function P(){return g6(B.fixedHeight)||(U?B.autoHeight?null:$():R())}function $(){var T=g6(B.gap);return"calc((100%"+(T&&" + "+T)+")/"+(B.perPage||1)+(T&&" - "+T)+")"}function _(){return fA(W)[Y("width")]}function h(T,d){var g=F(T||0);return g?fA(g.slide)[Y("width")]+(d?0:M()):0}function S(T,d){var g=F(T);if(g){var l=fA(g.slide)[Y("right")],t=fA(W)[Y("left")];return GA(l-t)+(d?0:M())}return 0}function O(T){return S(A.length-1)-S(0)+h(0,T)}function M(){var T=F(0);return T&&parseFloat(Q4(T.slide,Y("marginRight")))||0}function y(T){return parseFloat(Q4(G,Y("padding"+(T?"Right":"Left"))))||0}function u(){return A.is(T9)||O(!0)>_()}return{mount:L,resize:V,listSize:_,slideSize:h,sliderSize:O,totalSize:S,getPadding:y,isOverflow:u}}var VT=2;function UT(A,Q,B){var C=i1(A),J=C.on,I=Q.Elements,q=Q.Slides,K=Q.Direction.resolve,Y=[],Z;function H(){if(J(Y2,G),J([WA,w9],F),Z=E())z(Z),Q.Layout.resize(!0)}function G(){W(),H()}function W(){b6(Y),H3(Y),C.destroy()}function F(){var w=E();if(Z!==w){if(Z<w||!w)C.emit(Y2)}}function z(w){var L=q.get().slice(),X=L.length;if(X){while(L.length<w)vC(L,L);vC(L.slice(-w),L.slice(0,w)).forEach(function(V,D){var N=D<w,R=U(V.slide,D);N?zY(R,L[0].slide):M9(I.list,R),vC(Y,R),q.register(R,D-w+(N?0:X),V.index)})}}function U(w,L){var X=w.cloneNode(!0);return T4(X,B.classes.clone),X.id=A.root.id+"-clone"+wY(L+1),X}function E(){var w=B.clones;if(!A.is(Z7))w=0;else if(R9(w)){var L=B[K("fixedWidth")]&&Q.Layout.slideSize(0),X=L&&E9(fA(I.track)[K("width")]/L);w=X||B[K("autoWidth")]&&A.length||B.perPage*VT}return w}return{mount:H,destroy:W}}function zT(A,Q,B){var C=i1(A),J=C.on,I=C.emit,q=A.state.set,K=Q.Layout,Y=K.slideSize,Z=K.getPadding,H=K.totalSize,G=K.listSize,W=K.sliderSize,F=Q.Direction,z=F.resolve,U=F.orient,E=Q.Elements,w=E.list,L=E.track,X;function V(){X=Q.Transition,J([p6,NY,WA,Y2],D)}function D(){if(!Q.Controller.isBusy())Q.Scroll.cancel(),R(A.index),Q.Slides.update()}function N(g,l,t,i){if(g!==l&&T(g>t))_(),k($(O(),g>t),!0);q(K7),I(i3,l,t,g),X.start(l,function(){q(I7),I(P9,l,t,g),i&&i()})}function R(g){k(S(g,!0))}function k(g,l){if(!A.is(T9)){var t=l?g:P(g);Q4(w,"transform","translate"+z("X")+"("+t+"px)"),g!==t&&I(Uz)}}function P(g){if(A.is(Z7)){var l=h(g),t=l>Q.Controller.getEnd(),i=l<0;if(i||t)g=$(g,t)}return g}function $(g,l){var t=g-u(l),i=W();return g-=U(i*(E9(GA(t)/i)||1))*(l?1:-1),g}function _(){k(O(),!0),X.cancel()}function h(g){var l=Q.Slides.get(),t=0,i=1/0;for(var n=0;n<l.length;n++){var J0=l[n].index,e=GA(S(J0,!0)-g);if(e<=i)i=e,t=J0;else break}return t}function S(g,l){var t=U(H(g-1)-y(g));return l?M(t):t}function O(){var g=z("left");return fA(w)[g]-fA(L)[g]+U(Z(!1))}function M(g){if(B.trimSpace&&A.is(q7))g=A7(g,0,U(W(!0)-G()));return g}function y(g){var l=B.focus;return l==="center"?(G()-Y(g,!0))/2:+l*Y(g)||0}function u(g){return S(g?Q.Controller.getEnd():0,!!B.trimSpace)}function T(g){var l=U($(O(),g));return g?l>=0:l<=w[z("scrollWidth")]-fA(L)[z("width")]}function d(g,l){l=R9(l)?O():l;var t=g!==!0&&U(l)<U(u(!1)),i=g!==!1&&U(l)>U(u(!0));return t||i}return{mount:V,move:N,jump:R,translate:k,shift:$,cancel:_,toIndex:h,toPosition:S,getPosition:O,getLimit:u,exceededLimit:d,reposition:D}}function DT(A,Q,B){var C=i1(A),J=C.on,I=C.emit,q=Q.Move,K=q.getPosition,Y=q.getLimit,Z=q.toPosition,H=Q.Slides,G=H.isEnough,W=H.getLength,F=B.omitEnd,z=A.is(Z7),U=A.is(q7),E=v1(O,!1),w=v1(O,!0),L=B.start||0,X,V=L,D,N,R;function k(){P(),J([WA,Y2,cC],P),J(NY,$)}function P(){D=W(!0),N=B.perMove,R=B.perPage,X=T();var e=A7(L,0,F?X:D-1);if(e!==L)L=e,q.reposition()}function $(){if(X!==T())I(cC)}function _(e,H0,X0){if(!J0()){var L0=S(e),T0=u(L0);if(T0>-1&&(H0||T0!==L))t(T0),q.move(L0,T0,V,X0)}}function h(e,H0,X0,L0){Q.Scroll.scroll(e,H0,X0,function(){var T0=u(q.toIndex(K()));t(F?s3(T0,X):T0),L0&&L0()})}function S(e){var H0=L;if(l3(e)){var X0=e.match(/([+\-<>])(\d+)?/)||[],L0=X0[1],T0=X0[2];if(L0==="+"||L0==="-")H0=M(L+ +(""+L0+(+T0||1)),L);else if(L0===">")H0=T0?d(+T0):E(!0);else if(L0==="<")H0=w(!0)}else H0=z?e:A7(e,0,X);return H0}function O(e,H0){var X0=N||(n()?1:R),L0=M(L+X0*(e?-1:1),L,!(N||n()));if(L0===-1&&U){if(!Kz(K(),Y(!e),1))return e?0:X}return H0?L0:u(L0)}function M(e,H0,X0){if(G()||n()){var L0=y(e);if(L0!==e)H0=e,e=L0,X0=!1;if(e<0||e>X)if(!N&&(bC(0,e,H0,!0)||bC(X,H0,e,!0)))e=d(g(e));else if(z)e=X0?e<0?-(D%R||R):D:e;else if(B.rewind)e=e<0?X:0;else e=-1;else if(X0&&e!==H0)e=d(g(H0)+(e<H0?-1:1))}else e=-1;return e}function y(e){if(U&&B.trimSpace==="move"&&e!==L){var H0=K();while(H0===Z(e,!0)&&bC(e,0,A.length-1,!B.rewind))e<L?--e:++e}return e}function u(e){return z?(e+D)%D||0:e}function T(){var e=D-(n()||z&&N?1:R);while(F&&e-- >0)if(Z(D-1,!0)!==Z(e,!0)){e++;break}return A7(e,0,D-1)}function d(e){return A7(n()?e:R*e,0,X)}function g(e){return n()?s3(e,X):dC((e>=X?D-1:e)/R)}function l(e){var H0=q.toIndex(e);return U?A7(H0,0,X):H0}function t(e){if(e!==L)V=L,L=e}function i(e){return e?V:L}function n(){return!R9(B.focus)||B.isNavigation}function J0(){return A.state.is([K7,$9])&&!!B.waitForTransition}return{mount:k,go:_,scroll:h,getNext:E,getPrev:w,getAdjacent:O,getEnd:T,setIndex:t,getIndex:i,toIndex:d,toPage:g,toDest:l,hasFocus:n,isBusy:J0}}var ET="http://www.w3.org/2000/svg",wT="m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z",xC=40;function NT(A,Q,B){var C=i1(A),J=C.on,I=C.bind,q=C.emit,K=B.classes,Y=B.i18n,Z=Q.Elements,H=Q.Controller,G=Z.arrows,W=Z.track,F=G,z=Z.prev,U=Z.next,E,w,L={};function X(){D(),J(WA,V)}function V(){N(),X()}function D(){var h=B.arrows;if(h&&!(z&&U))P();if(z&&U){if(z9(L,{prev:z,next:U}),D9(F,h?"":"none"),T4(F,w=OY+"--"+B.direction),h)R(),_(),C1([z,U],_9,W.id),q(c_,z,U)}}function N(){if(C.destroy(),Y3(F,w),E)b6(G?[z,U]:F),z=U=null;else j4([z,U],MY)}function R(){J([p6,P9,Y2,Y7,cC],_),I(U,"click",v1(k,">")),I(z,"click",v1(k,"<"))}function k(h){H.go(h,!0)}function P(){F=G||C7("div",K.arrows),z=$(!0),U=$(!1),E=!0,M9(F,[z,U]),!G&&zY(F,W)}function $(h){var S="<button class=\""+K.arrow+" "+(h?K.prev:K.next)+"\" type=\"button\"><svg xmlns=\""+ET+"\" viewBox=\"0 0 "+xC+" "+xC+"\" width=\""+xC+"\" height=\""+xC+"\" focusable=\"false\"><path d=\""+(B.arrowPath||wT)+"\" />";return Iz(S)}function _(){if(z&&U){var h=A.index,S=H.getPrev(),O=H.getNext(),M=S>-1&&h<S?Y.last:Y.prev,y=O>-1&&h>O?Y.first:Y.next;z.disabled=S<0,U.disabled=O<0,C1(z,hA,M),C1(U,hA,y),q(l_,z,U,S,O)}}return{arrows:L,mount:X,destroy:N,update:_}}var $T=EY+"-interval";function RT(A,Q,B){var C=i1(A),J=C.on,I=C.bind,q=C.emit,K=sC(B.interval,A.go.bind(A,">"),R),Y=K.isPaused,Z=Q.Elements,H=Q.Elements,G=H.root,W=H.toggle,F=B.autoplay,z,U,E=F==="pause";function w(){if(F)L(),W&&C1(W,_9,Z.track.id),E||X(),N()}function L(){if(B.pauseOnHover)I(G,"mouseenter mouseleave",function(P){z=P.type==="mouseenter",D()});if(B.pauseOnFocus)I(G,"focusin focusout",function(P){U=P.type==="focusin",D()});if(W)I(W,"click",function(){E?X():V(!0)});J([i3,$Y,Y2],K.rewind),J(i3,k)}function X(){if(Y()&&Q.Slides.isEnough())K.start(!B.resetProgress),U=z=E=!1,N(),q(Gz)}function V(P){if(P===void 0)P=!0;if(E=!!P,N(),!Y())K.pause(),q(Wz)}function D(){if(!E)z||U?V(!1):X()}function N(){if(W)K3(W,u6,!E),C1(W,hA,B.i18n[E?"play":"pause"])}function R(P){var $=Z.bar;$&&Q4($,"width",P*100+"%"),q(n_,P)}function k(P){var $=Q.Slides.getAt(P);K.set($&&+B4($.slide,$T)||B.interval)}return{mount:w,destroy:K.cancel,play:X,pause:V,isPaused:Y}}function LT(A,Q,B){var C=i1(A),J=C.on;function I(){if(B.cover)J(Fz,v1(K,!0)),J([p6,WA,Y2],v1(q,!0))}function q(Y){Q.Slides.forEach(function(Z){var H=O9(Z.container||Z.slide,"img");if(H&&H.src)K(Y,H,Z)})}function K(Y,Z,H){H.style("background",Y?"center/cover no-repeat url(\""+Z.src+"\")":"",!0),D9(Z,Y?"none":"")}return{mount:I,destroy:v1(q,!1)}}var MT=10,OT=600,kT=0.6,PT=1.5,_T=800;function TT(A,Q,B){var C=i1(A),J=C.on,I=C.emit,q=A.state.set,K=Q.Move,Y=K.getPosition,Z=K.getLimit,H=K.exceededLimit,G=K.translate,W=A.is(q7),F,z,U=1;function E(){J(i3,V),J([WA,Y2],D)}function w(R,k,P,$,_){var h=Y();if(V(),P&&(!W||!H())){var S=Q.Layout.sliderSize(),O=HY(R)*S*dC(GA(R)/S)||0;R=K.toPosition(Q.Controller.toDest(R%S))+O}var M=Kz(h,R,1);U=1,k=M?0:k||mC(GA(R-h)/PT,_T),z=$,F=sC(k,L,v1(X,h,R,_),1),q($9),I($Y),F.start()}function L(){q(I7),z&&z(),I(Y7)}function X(R,k,P,$){var _=Y(),h=R+(k-R)*N($),S=(h-_)*U;if(G(_+S),W&&!P&&H()){if(U*=kT,GA(S)<MT)w(Z(H(!0)),OT,!1,z,!0)}}function V(){if(F)F.cancel()}function D(){if(F&&!F.isPaused())V(),L()}function N(R){var k=B.easingFunc;return k?k(R):1-Math.pow(1-R,4)}return{mount:E,destroy:V,scroll:w,cancel:D}}var Q7={passive:!1,capture:!0};function jT(A,Q,B){var C=i1(A),J=C.on,I=C.emit,q=C.bind,K=C.unbind,Y=A.state,Z=Q.Move,H=Q.Scroll,G=Q.Controller,W=Q.Elements.track,F=Q.Media.reduce,z=Q.Direction,U=z.resolve,E=z.orient,w=Z.getPosition,L=Z.exceededLimit,X,V,D,N,R,k=!1,P,$,_;function h(){q(W,qY,YY,Q7),q(W,KY,YY,Q7),q(W,_z,O,Q7),q(W,"click",u,{capture:!0}),q(W,"dragstart",q3),J([p6,WA],S)}function S(){var Z0=B.drag;P1(!Z0),N=Z0==="free"}function O(Z0){if(P=!1,!$){var G0=T0(Z0);if(L0(Z0.target)&&(G0||!Z0.button))if(!G.isBusy())_=G0?W:window,R=Y.is([K7,$9]),D=null,q(_,qY,M,Q7),q(_,KY,y,Q7),Z.cancel(),H.cancel(),T(Z0);else q3(Z0,!0)}}function M(Z0){if(!Y.is(gC))Y.set(gC),I(u_);if(Z0.cancelable){if(R){Z.translate(X+X0(n(Z0)));var G0=J0(Z0)>tU,x0=k!==(k=L());if(G0||x0)T(Z0);P=!0,I(p_),q3(Z0)}else if(l(Z0))R=g(Z0),q3(Z0)}}function y(Z0){if(Y.is(gC))Y.set(I7),I(m_);if(R)d(Z0),q3(Z0);K(_,qY,M),K(_,KY,y),R=!1}function u(Z0){if(!$&&P)q3(Z0,!0)}function T(Z0){D=V,V=Z0,X=w()}function d(Z0){var G0=t(Z0),x0=i(G0),J1=B.rewind&&B.rewindByDrag;if(F(!1),N)G.scroll(x0,0,B.snap);else if(A.is(T9))G.go(E(HY(G0))<0?J1?"<":"-":J1?">":"+");else if(A.is(q7)&&k&&J1)G.go(L(!0)?">":"<");else G.go(G.toDest(x0),!0);F(!0)}function g(Z0){var G0=B.dragMinThreshold,x0=F9(G0),J1=x0&&G0.mouse||0,S0=(x0?G0.touch:+G0)||10;return GA(n(Z0))>(T0(Z0)?S0:J1)}function l(Z0){return GA(n(Z0))>GA(n(Z0,!0))}function t(Z0){if(A.is(Z7)||!k){var G0=J0(Z0);if(G0&&G0<tU)return n(Z0)/G0}return 0}function i(Z0){return w()+HY(Z0)*s3(GA(Z0)*(B.flickPower||600),N?1/0:Q.Layout.listSize()*(B.flickMaxPages||1))}function n(Z0,G0){return H0(Z0,G0)-H0(e(Z0),G0)}function J0(Z0){return ZY(Z0)-ZY(e(Z0))}function e(Z0){return V===Z0&&D||V}function H0(Z0,G0){return(T0(Z0)?Z0.changedTouches[0]:Z0)["page"+U(G0?"Y":"X")]}function X0(Z0){return Z0/(k&&A.is(q7)?HT:1)}function L0(Z0){var G0=B.noDrag;return!V9(Z0,"."+Lz+", ."+tC)&&(!G0||!V9(Z0,G0))}function T0(Z0){return typeof TouchEvent!=="undefined"&&Z0 instanceof TouchEvent}function s(){return R}function P1(Z0){$=Z0}return{mount:h,disable:P1,isDragging:s}}var ST={Spacebar:" ",Right:oC,Left:nC,Up:zz,Down:Dz};function PY(A){return A=l3(A)?A:A.key,ST[A]||A}var eU="keydown";function yT(A,Q,B){var C=i1(A),J=C.on,I=C.bind,q=C.unbind,K=A.root,Y=Q.Direction.resolve,Z,H;function G(){W(),J(WA,F),J(WA,W),J(i3,U)}function W(){var w=B.keyboard;if(w)Z=w==="global"?window:K,I(Z,eU,E)}function F(){q(Z,eU)}function z(w){H=w}function U(){var w=H;H=!0,Az(function(){H=w})}function E(w){if(!H){var L=PY(w);if(L===Y(nC))A.go("<");else if(L===Y(oC))A.go(">")}}return{mount:G,destroy:F,disable:z}}var W9=EY+"-lazy",uC=W9+"-srcset",fT="["+W9+"], ["+uC+"]";function hT(A,Q,B){var C=i1(A),J=C.on,I=C.off,q=C.bind,K=C.emit,Y=B.lazyLoad==="sequential",Z=[P9,Y7],H=[];function G(){if(B.lazyLoad)W(),J(Y2,W)}function W(){if(H3(H),F(),Y)w();else I(Z),J(Z,z),z()}function F(){Q.Slides.forEach(function(L){DY(L.slide,fT).forEach(function(X){var V=B4(X,W9),D=B4(X,uC);if(V!==X.src||D!==X.srcset){var N=B.classes.spinner,R=X.parentElement,k=O9(R,"."+N)||C7("span",N,R);H.push([X,L,k]),X.src||D9(X,"none")}})})}function z(){H=H.filter(function(L){var X=B.perPage*((B.preloadPages||1)+1)-1;return L[1].isWithin(A.index,X)?U(L):!0}),H.length||I(Z)}function U(L){var X=L[0];T4(L[1].slide,WY),q(X,"load error",v1(E,L)),C1(X,"src",B4(X,W9)),C1(X,"srcset",B4(X,uC)),j4(X,W9),j4(X,uC)}function E(L,X){var V=L[0],D=L[1];if(Y3(D.slide,WY),X.type!=="error")b6(L[2]),D9(V,""),K(Fz,V,D),K(w9);Y&&w()}function w(){H.length&&U(H.shift())}return{mount:G,destroy:v1(H3,H),check:z}}function xT(A,Q,B){var C=i1(A),J=C.on,I=C.emit,q=C.bind,K=Q.Slides,Y=Q.Elements,Z=Q.Controller,H=Z.hasFocus,G=Z.getIndex,W=Z.go,F=Q.Direction.resolve,z=Y.pagination,U=[],E,w;function L(){X(),J([WA,Y2,cC],L);var $=B.pagination;if(z&&D9(z,$?"":"none"),$)J([i3,$Y,Y7],P),V(),P(),I(s_,{list:E,items:U},k(A.index))}function X(){if(E)b6(z?n3(E.children):E),Y3(E,w),H3(U),E=null;C.destroy()}function V(){var $=A.length,_=B.classes,h=B.i18n,S=B.perPage,O=H()?Z.getEnd()+1:E9($/S);E=z||C7("ul",_.pagination,Y.track.parentElement),T4(E,w=eC+"--"+R()),C1(E,Z3,"tablist"),C1(E,hA,h.select),C1(E,LY,R()===aC?"vertical":"");for(var M=0;M<O;M++){var y=C7("li",null,E),u=C7("button",{class:_.page,type:"button"},y),T=K.getIn(M).map(function(g){return g.slide.id}),d=!H()&&S>1?h.pageX:h.slideX;if(q(u,"click",v1(D,M)),B.paginationKeyboard)q(u,"keydown",v1(N,M));C1(y,Z3,"presentation"),C1(u,Z3,"tab"),C1(u,_9,T.join(" ")),C1(u,hA,XY(d,M+1)),C1(u,J7,-1),U.push({li:y,button:u,page:M})}}function D($){W(">"+$,!0)}function N($,_){var h=U.length,S=PY(_),O=R(),M=-1;if(S===F(oC,!1,O))M=++$%h;else if(S===F(nC,!1,O))M=(--$+h)%h;else if(S==="Home")M=0;else if(S==="End")M=h-1;var y=U[M];if(y)Jz(y.button),W(">"+M),q3(_,!0)}function R(){return B.paginationDirection||B.direction}function k($){return U[Z.toPage($)]}function P(){var $=k(G(!0)),_=k(G());if($){var h=$.button;Y3(h,u6),j4(h,iU),C1(h,J7,-1)}if(_){var S=_.button;T4(S,u6),C1(S,iU,!0),C1(S,J7,"")}I(i_,{list:E,items:U},$,_)}return{items:U,mount:L,destroy:X,getAt:k,update:P}}var gT=[" ","Enter"];function vT(A,Q,B){var{isNavigation:C,slideFocus:J}=B,I=[];function q(){if(A.splides.forEach(function(z){if(!z.isParent)Z(A,z.splide),Z(z.splide,A)}),C)H()}function K(){I.forEach(function(z){z.destroy()}),H3(I)}function Y(){K(),q()}function Z(z,U){var E=i1(z);E.on(i3,function(w,L,X){U.go(U.is(Z7)?X:w)}),I.push(E)}function H(){var z=i1(A),U=z.on;U(Zz,W),U(Vz,F),U([p6,WA],G),I.push(z),z.emit(Xz,A.splides)}function G(){C1(Q.Elements.list,LY,B.direction===aC?"vertical":"")}function W(z){A.go(z.index)}function F(z,U){if(UY(gT,PY(U)))W(z),q3(U)}return{setup:v1(Q.Media.set,{slideFocus:R9(J)?C:J},!0),mount:q,destroy:K,remount:Y}}function bT(A,Q,B){var C=i1(A),J=C.bind,I=0;function q(){if(B.wheel)J(Q.Elements.track,"wheel",K,Q7)}function K(Z){if(Z.cancelable){var H=Z.deltaY,G=H<0,W=ZY(Z),F=B.wheelMinThreshold||0,z=B.wheelSleep||0;if(GA(H)>F&&W-I>z)A.go(G?"<":">"),I=W;Y(G)&&q3(Z)}}function Y(Z){return!B.releaseWheel||A.state.is(K7)||Q.Controller.getAdjacent(Z)!==-1}return{mount:q}}var uT=90;function pT(A,Q,B){var C=i1(A),J=C.on,I=Q.Elements.track,q=B.live&&!B.isNavigation,K=C7("span",IT),Y=sC(uT,v1(H,!1));function Z(){if(q)W(!Q.Autoplay.isPaused()),C1(I,aU,!0),K.textContent="\u2026",J(Gz,v1(W,!0)),J(Wz,v1(W,!1)),J([P9,Y7],v1(H,!0))}function H(F){if(C1(I,oU,F),F)M9(I,K),Y.start();else b6(K),Y.cancel()}function G(){j4(I,[nU,aU,oU]),b6(K)}function W(F){if(q)C1(I,nU,F?"off":"polite")}return{mount:Z,disable:W,destroy:G}}var mT=Object.freeze({__proto__:null,Media:r_,Direction:t_,Elements:XT,Slides:WT,Layout:FT,Clones:UT,Move:zT,Controller:DT,Arrows:NT,Autoplay:RT,Cover:LT,Scroll:TT,Drag:jT,Keyboard:yT,LazyLoad:hT,Pagination:xT,Sync:vT,Wheel:bT,Live:pT}),dT={prev:"Previous slide",next:"Next slide",first:"Go to first slide",last:"Go to last slide",slideX:"Go to slide %s",pageX:"Go to page %s",play:"Start autoplay",pause:"Pause autoplay",carousel:"carousel",slide:"slide",select:"Select a slide to show",slideLabel:"%s of %s"},cT={type:"slide",role:"region",speed:400,perPage:1,cloneStatus:!0,arrows:!0,pagination:!0,paginationKeyboard:!0,interval:5000,pauseOnHover:!0,pauseOnFocus:!0,resetProgress:!0,easing:"cubic-bezier(0.25, 1, 0.5, 1)",drag:!0,direction:"ltr",trimSpace:!0,focusableNodes:"a, button, textarea, input, select, iframe",live:!0,classes:YT,i18n:dT,reducedMotion:{speed:0,rewindSpeed:0,autoplay:"pause"}};function lT(A,Q,B){var C=Q.Slides;function J(){i1(A).on([p6,Y2],I)}function I(){C.forEach(function(K){K.style("transform","translateX(-"+100*K.index+"%)")})}function q(K,Y){C.style("transition","opacity "+B.speed+"ms "+B.easing),Az(Y)}return{mount:J,start:q,cancel:YY}}function sT(A,Q,B){var{Move:C,Controller:J,Scroll:I}=Q,q=Q.Elements.list,K=v1(Q4,q,"transition"),Y;function Z(){i1(A).bind(q,"transitionend",function(F){if(F.target===q&&Y)G(),Y()})}function H(F,z){var U=C.toPosition(F,!0),E=C.getPosition(),w=W(F);if(GA(U-E)>=1&&w>=1)if(B.useScroll)I.scroll(U,w,!1,z);else K("transform "+w+"ms "+B.easing),C.translate(U,!0),Y=z;else C.jump(F),z()}function G(){K(""),I.cancel()}function W(F){var z=B.rewindSpeed;if(A.is(q7)&&z){var U=J.getIndex(!0),E=J.getEnd();if(U===0&&F>=E||U>=E&&F===0)return z}return B.speed}return{mount:Z,start:H,cancel:G}}var iT=function(){function A(B,C){this.event=i1(),this.Components={},this.state=o_(B7),this.splides=[],this._o={},this._E={};var J=l3(B)?qz(document,B):B;G9(J,J+" is invalid."),this.root=J,C=c3({label:B4(J,hA)||"",labelledby:B4(J,RY)||""},cT,A.defaults,C||{});try{c3(C,JSON.parse(B4(J,EY)))}catch(I){G9(!1,"Invalid JSON")}this._o=Object.create(c3({},C))}var Q=A.prototype;return Q.mount=function B(C,J){var I=this,q=this.state,K=this.Components;G9(q.is([B7,pC]),"Already mounted!"),q.set(B7),this._C=K,this._T=J||this._T||(this.is(T9)?lT:sT),this._E=C||this._E;var Y=z9({},mT,this._E,{Transition:this._T});return v6(Y,function(Z,H){var G=Z(I,K,I._o);K[H]=G,G.setup&&G.setup()}),v6(K,function(Z){Z.mount&&Z.mount()}),this.emit(p6),T4(this.root,qT),q.set(I7),this.emit(lU),this},Q.sync=function B(C){if(this.splides.push({splide:C}),C.splides.push({splide:this,isParent:!0}),this.state.is(I7))this._C.Sync.remount(),C.Components.Sync.remount();return this},Q.go=function B(C){return this._C.Controller.go(C),this},Q.on=function B(C,J){return this.event.on(C,J),this},Q.off=function B(C){return this.event.off(C),this},Q.emit=function B(C){var J;return(J=this.event).emit.apply(J,[C].concat(n3(arguments,1))),this},Q.add=function B(C,J){return this._C.Slides.add(C,J),this},Q.remove=function B(C){return this._C.Slides.remove(C),this},Q.is=function B(C){return this._o.type===C},Q.refresh=function B(){return this.emit(Y2),this},Q.destroy=function B(C){if(C===void 0)C=!0;var J=this.event,I=this.state;if(I.is(B7))i1(this).on(lU,this.destroy.bind(this,C));else v6(this._C,function(q){q.destroy&&q.destroy(C)},!0),J.emit(Hz),J.destroy(),C&&H3(this.splides),I.set(pC);return this},S_(A,[{key:"options",get:function B(){return this._o},set:function B(C){this._C.Media.set(C,!0,!0)}},{key:"length",get:function B(){return this._C.Slides.getLength(!0)}},{key:"index",get:function B(){return this._C.Controller.getIndex()}}]),A}(),AJ=iT;AJ.defaults={};AJ.STATES=f_;class _Y extends y0{constructor(){super(...arguments);this.context={};this.liked=void 0}static styles=U0`
    :host {
      display: block;
      margin-top: 12px;
    }

    :host .button-container {
      display: flex;
      justify-content: center;
      gap: 5px;
    }

    :host .button-container button {
      border-radius: 30px;
      height: 30px;
      width: 30px;
      border: 0;
      display: flex;
      align-items: center;
      background-color: rgb(200 200 200 / 1);
    }

    :host .button-container button svg {
      width: 100%;
      fill: white;
    }

    :host .button-container button:hover,
    :host .button-container button.active {
      cursor: pointer;
      background-color: rgb(255 255 255 / 1);
    }

    :host .button-container button:hover svg,
    :host .button-container button.active svg {
      fill: rgb(45 124 246);
    }
  `;onButtonClicked=(A,Q)=>{this.liked=Q,this.dispatchEvent(new CustomEvent("product-feedback:clicked",{detail:{liked:Q,context:this.context},composed:!0,bubbles:!0}))};render(){return v`
      <div class="button-container">
        <!-- Like button -->
        <button class="${this.liked===!0?"active":""}" @click=${(A)=>this.onButtonClicked(A,!0)}>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="19"
            height="18"
            viewBox="0 0 19 18"
            fill="none"
          >
            <g id="thumb_up">
              <mask
                id="mask0_1922_3550"
                style="mask-type:alpha"
                maskUnits="userSpaceOnUse"
                x="0"
                y="0"
                width="19"
                height="18"
              >
                <rect
                  id="Bounding box"
                  x="0.962891"
                  y="0.455078"
                  width="17.2674"
                  height="17.2674"

                />
              </mask>
              <g mask="url(#mask0_1922_3550)">
                <path
                  id="thumb_up_2"
                  d="M13.914 15.5634H6.7192V6.21017L11.7555 1.17383L12.6549 2.07317C12.7388 2.15711 12.8078 2.27103 12.8617 2.41493C12.9157 2.55882 12.9427 2.69672 12.9427 2.82862V3.08044L12.1513 6.21017H16.0724C16.4561 6.21017 16.7919 6.35406 17.0797 6.64185C17.3675 6.92964 17.5114 7.2654 17.5114 7.64912V9.08807C17.5114 9.17201 17.5024 9.26195 17.4844 9.35788C17.4664 9.45381 17.4394 9.54374 17.4034 9.62768L15.245 14.7C15.1371 14.9398 14.9572 15.1437 14.7054 15.3115C14.4536 15.4794 14.1898 15.5634 13.914 15.5634ZM5.28025 6.21017V15.5634H2.40234V6.21017H5.28025Z"

                />
              </g>
            </g>
          </svg>
        </button>

        <!-- Dislike button -->
        <button class="${this.liked===!1?"active":""}" @click=${(A)=>this.onButtonClicked(A,!1)}>
          <svg xmlns="http://www.w3.org/2000/svg" width="19" height="18" viewBox="0 0 19 18" >
            <mask id="mask0_1922_16" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="19" height="18">
              <rect x="18.0371" y="17.5762" width="17.2674" height="17.2674" transform="rotate(-180 18.0371 17.5762)"/>
            </mask>
            <g mask="url(#mask0_1922_16)">
              <path d="M5.08603 2.46789L12.2808 2.46789L12.2808 11.8211L7.24446 16.8574L6.34511 15.9581C6.26117 15.8741 6.19222 15.7602 6.13826 15.6163C6.0843 15.4724 6.05732 15.3345 6.05732 15.2026L6.05732 14.9508L6.84875 11.8211L2.9276 11.8211C2.54388 11.8211 2.20812 11.6772 1.92033 11.3894C1.63254 11.1016 1.48865 10.7659 1.48865 10.3821L1.48865 8.94318C1.48865 8.85924 1.49764 8.7693 1.51563 8.67337C1.53361 8.57744 1.56059 8.48751 1.59657 8.40357L3.755 3.33126C3.86292 3.09143 4.04279 2.88758 4.29461 2.7197C4.54642 2.55183 4.81023 2.46789 5.08603 2.46789ZM13.7197 11.8211L13.7198 2.46789L16.5977 2.46789L16.5977 11.8211L13.7197 11.8211Z"/>
            </g>
          </svg>
      </div>
    `}}f([a({type:Object})],_Y.prototype,"context",void 0),f([a({type:Boolean})],_Y.prototype,"liked",void 0),_Y=f([z0("ek-apis-product-feedback")],_Y);class TY extends y0{constructor(){super(...arguments);this.products=[]}static styles=[U0`
      :host {
        display: block;
      }

      :host .carousel-container {
        overflow-x: auto;
        scrollbar-width: none;
        scroll-snap-type: x mandatory;
        scroll-behavior: smooth;
        -webkit-overflow-scrolling: touch;
        -ms-overflow-style: none;
      }

      :host .product-container {
        width: 180px;
        display: flex;
        align-items: center;
        flex-direction: column;
      }

      :host .product-wrapper {
        border-radius: 7.2px;
        border: 1.2px solid #ddd;
        background: rgba(200, 200, 200, 0.1);
      }

      :host .product-wrapper img {
        width: 100%;
      }

      :host .product-wrapper p {
        margin: 0;
      }

      :host .product-wrapper .messages {
        display: flex;
        gap: 7.2px;
      }

      :host .product-wrapper .messages .message {
        display: flex;
        padding: 4.8px 7.2px;
        align-items: center;
        border-radius: 4.8px;
        background: #e11717;
        color: #fff;
        font-size: 7.2px;
        font-style: normal;
        font-weight: 600;
        line-height: normal;
      }

      :host .product-wrapper .recommended {
        border-radius: 4.8px;
        background: rgba(255, 255, 255, 0.6);
        color: #252525;
        padding: 4.8px 11.497px;
        width: 100%;
        text-align: left;
        font-size: 8px;
        font-style: normal;
        font-weight: 600;
        line-height: normal;
        width: -moz-available;
        width: -webkit-fill-available;
        width: fill-available;
      }

      :host .product-wrapper .price {
        color: #e11717;
        font-size: 12px;
        font-style: normal;
        font-weight: 700;
        line-height: normal;
      }

      :host .product-wrapper .view-button {
        display: flex;
        padding: 5.11px 17.884px;
        justify-content: center;
        align-items: center;
        gap: 12.774px;
        color: #fff;
        text-decoration: none;
        border-radius: 4.8px;
        background: linear-gradient(0deg, #59a22e 0%, #59a22e 100%);
        font-size: 12px;
        font-style: normal;
        font-weight: 600;
        line-height: normal;
      }

      :host .product-container .promotion {
        color: #e11717;
        leading-trim: both;
        text-edge: cap;
        font-size: 7.2px;
        font-style: normal;
        font-weight: 700;
        line-height: normal;
      }

      :host .product-container .product-wrapper {
        display: flex;
        flex-direction: column;
        align-items: start;
        gap: 14.4px;
        padding: 14.4px;
      }

      :host .product-details {
        display: flex;
        flex-direction: column;
        align-items: start;
        gap: 9.6px;
        text-align: left;
      }

      :host .product-image {
        border-radius: 7.2px;
      }

      :host .product-details .product-title {
        color: #252525;
        leading-trim: both;
        text-edge: cap;
        font-size: 12px;
        font-style: normal;
        font-weight: 600;
        line-height: normal;
      }

      :host .product-description {
        text-align: left;
        color: #252525;
        leading-trim: both;
        text-edge: cap;
        font-size: 12px;
        font-style: normal;
        font-weight: 400;
        line-height: normal;
      }

      :host .product-price {
        color: #252525;
        font-size: 12px;
        font-style: normal;
        font-weight: 700;
        line-height: normal;
      }

      :host .has-promotion .product-price {
        color: #e11717;
      }

      :host .splide__slide {
        display: flex;
        align-items: center;
      }

      :host .splide__slide .product-container {
        display: flex;
        align-items: center;
        transform: scale(0.8);
        transition: transform 0.3s ease-in-out;
      }

      :host .splide__slide.is-visible .product-container {
        transform: scale(1);
        transition: transform 0.3s ease-in-out;
      }

      :host .splide__slide:not(.is-visible) ek-apis-product-feedback {
        visibility: hidden;
      }

      :host .splide__slide.is-visible ek-apis-product-feedback {
        visibility: visible;
      }
    `];clickProduct(A){this.dispatchEvent(new CustomEvent("product:click",{detail:A,composed:!0,bubbles:!0}))}async firstUpdated(A){super.firstUpdated(A),setTimeout(()=>{let Q=this.shadowRoot?.querySelector(".splide");new AJ(Q,{type:"slide",perMove:1,autoWidth:!0,pagination:!1,snap:!0,start:1,width:"100%",fixedWidth:"182px",padding:{left:180,right:180},arrows:!0,gap:0,focus:"center",slideFocus:!0,updateOnMove:!0}).mount()},200),setTimeout(()=>{this.dispatchEvent(new CustomEvent("product:carousel:initialized",{composed:!0,bubbles:!0}))},200)}renderProductCard=(A)=>{let Q=["product-pricing",A.promotion&&"has-promotion"].filter(Boolean).join(" ");return v`<li class="splide__slide">
      <div class="product-container">
        <div class="product-wrapper">
          ${A.recommended?v`<div class="recommended">Recommended</div>`:null}

          <img
            src=${A.image}
            alt="${A.title}"
            class="product-image"
          />

          <div class="product-details">
            <strong class="product-title">${K2(A.title)}</strong>
            <p class="product-description">
              ${K2(A.description)}
            </p>

            <div class="${Q}">
              <span class="product-price">${A.price}</span>

              <!-- Product Messages -->
              ${A.messages?.length?v`<div class="messages">
                    ${A.messages.map((B)=>v`<span class="message">${B}</span>`)}
                  </div>`:null}

              <!-- Promotion -->
              ${A.promotion?v`<p class="promotion">${A.promotion}</p>`:null}
            </div>
          </div>

          <!-- View Button -->
          <a
            href="${A.href}"
            class="view-button"
            @click=${()=>this.clickProduct(A.title)}
            >View</a
          >
        </div>
        <ek-apis-product-feedback
          .context=${A}
        ></ek-apis-product-feedback>
      </div>
    </li>`};render(){return v`
      <style>
        @import url("https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.3/dist/css/splide.min.css");
      </style>

      <section class="splide" aria-labelledby="carousel-heading">
        <div class="splide__track">
          <ul class="splide__list">
            ${this.products?.length?this.products.map(this.renderProductCard):null}
          </ul>
        </div>
      </section>
    `}}f([a({type:Array})],TY.prototype,"products",void 0),TY=f([z0("ek-aips-product-carousel")],TY);var jz=Hq(Tz(),1);class SY extends y0{static styles=U0`
    :host {
      display: block;
    }
  `;typewriter;constructor(){super();this.text="";this.typewriter=new jz.default(this,{loop:!1,delay:10,onCreateTextNode:this.customNodeCreator})}customNodeCreator=(A)=>{return this.dispatchEvent(new CustomEvent("character:added",{detail:A})),document.createTextNode(A)};updated(A){if(super.updated(A),A.has("text"))this.typewriter.typeString(this.text).callFunction((Q)=>{this.typewriter.stop(),Q.elements.cursor.remove()}).start()}render(){return v`<slot></slot>`}}f([a({type:String})],SY.prototype,"text",void 0),SY=f([z0("ek-aips-typewriter")],SY);var $2={SALUTATION:"salutation",BRAND_BAR:"brand-bar",HIGHLIGHTED:"highlighted",INFO:"info",PROMPT:"prompt",PROMPTS:"prompts",HUMAN_REQUEST:"human-request",AI_RESPONSE:"ai-response",PRODUCTS:"products"},nT="eky-ai-shopper-state";class yY extends y0{constructor(){super(...arguments);this.responses=[]}static styles=[U0`
      @keyframes fade-up {
        from {
          transform: translateY(100%);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      @keyframes text-wipe {
        0% {
          opacity: 1;
          mask-position: 100%;
        }

        100% {
          opacity: 1;
          mask-position: 0%;
        }
      }

      @keyframes fade-in {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes t {
        from {
          background-size: 0 200%;
        }
      }

      @keyframes b {
        50% {
          background-position:
            0 -100%,
            0 0;
        }
      }

      :host {
        display: flex;
        flex-direction: column;
        overflow-y: scroll;
        scrollbar-width: none;
        scroll-behavior: smooth;
        overflow-anchor: auto;
        height: 100%;
        mask-image: linear-gradient(0deg, #000 83.73%, rgba(0, 0, 0, 0) 100%);
        background-blend-mode: luminosity;
        width: 100%;
      }

      :host .wrapper {
        width: 100%;
      }

      :host::-webkit-scrollbar {
        display: none;
        -webkit-appearance: none;
      }

      :host .ai-response-container {
        height: -moz-available;
        height: -webkit-fill-available;
        height: fill-available;
        display: flex;
        width: 100%;
        flex-direction: column;
        align-items: flex-end;
        margin-top: 200px;
      }

      :host .ai-scroll-container {
        font-weight: 500;
        display: flex;
        flex-direction: column;
        gap: 20px;
        align-items: center;
        text-align: center;
        width: 100%;
      }

      :host .response {
        text-align: center;
        opacity: 0;
      }

      :host .response p {
        padding: 0;
        margin: 0;
      }

      :host .response-salutation {
        background: linear-gradient(
          var(--eky-text-start-gradient),
          var(--eky-text-end-gradient)
        );
        background-clip: text;
        -webkit-text-fill-color: transparent;
        font-size: 60px;
        font-weight: 600;
        line-height: 64px;
      }

      @keyframes salutationSlide {
        from {
          transform: translateX(-50%);
        }
        to {
          transform: translateX(100%);
        }
      }

      :host .response-highlighted {
        font-size: 14px;
        padding: 0 2.5em;
      }

      :host .response-info {
        font-size: 10px;
        padding: 0 1rem !important;
      }

      :host .response.response-ai-response {
        padding: 0.5rem 1rem;
        font-size: 14px;
        opacity: 1;
        animation: none !important;
        border: 1px solid #ddd;
        border-radius: 16px;
        text-align: left;
        max-width: 70%;
        align-self: flex-start;
      }

      :host .response.response-ai-response ul {
        padding-left: 10px;
        margin-left: 0;
      }

      :host .response.response-ai-response li {
        padding-left: 0;
        margin-left: 10px;
        margin-bottom: 10px;
      }

      :host .response.response-prompts .prompt {
        margin-top: 11px;
      }

      :host .response.response-products {
        padding: 0;
        position: relative;
        width: 100%;
        overflow: hidden;
      }

      :host .response.response-human-request {
        width: auto;
        padding: 0.5rem 1rem;
        border-radius: 16px;
        background-color: rgb(173 173 173 / 0.33);
        backdrop-filter: blur(10px);
        font-size: 14px;
        text-align: left;
        border: 1px solid #ddd;
        max-width: 70%;
        align-self: flex-end;
      }

      :host .response-prompt {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        opacity: 0;
        border: 1px solid #ddd;
      }

      :host .response.historic {
        opacity: 1;
      }

      :host .response.fade-up {
        animation: fade-up 0.8s ease-in forwards;
      }

      :host .response.wipe-right {
        opacity: 0;
        -webkit-mask-image: linear-gradient(to left, #0000 25%, #000 75%);
        -webkit-mask-size: 500%;
        animation: text-wipe 500ms linear forwards;
      }

      :host .response.fade-in {
        animation: fade-in 0.5s ease-in forwards;
      }

      :host .response-prompts {
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      :host .response-prompts .prompt {
        width: auto;
        padding: 0.5rem 0.75rem;
        border-radius: 20px;
        background-color: rgb(173 173 173 / 0.33);
        backdrop-filter: blur(10px);
        font-size: 14px;
        font-weight: 500;
        text-align: center;
      }

      :host .response-prompts .prompt:hover {
        cursor: pointer;
      }

      :host .response-ai-response {
        color: #343434;
        font-size: 20px;
        font-weight: 500;
      }
    `];get wrapper(){return this.shadowRoot&&this.shadowRoot.querySelector(".wrapper")}get responsesContainer(){return this.shadowRoot&&this.shadowRoot.querySelector(".ai-response-container")}addResponse=async({type:A=$2.SALUTATION,text:Q="",animationDelay:B=0,animationType:C="fade-up",products:J=[],prompts:I=[]}={})=>{let q={type:A,text:Q,animationDelay:B,products:J,prompts:I};this.responses.push(q),this.requestUpdate(),await this.updateComplete,this.scrollToBottom(),setTimeout(()=>{(this.shadowRoot?.querySelectorAll(".response:not(.animated):not(.historic)")).forEach((Y)=>{Y.classList.add("animated"),Y.classList.add(C)})},200)};updateLastResponseText=async(A)=>{let Q=this.responses[this.responses.length-1];Q.text=`${Q.text}${A}`,await this.requestUpdate(),this.scrollToBottom()};scrollToBottom=()=>{this.scrollTo({top:this.scrollHeight,behavior:"smooth"})};async connectedCallback(){super.connectedCallback();let A=localStorage.getItem(nT);if(A)try{let Q=JSON.parse(A);if(Q.messages)this.responses=Q.messages.map((B)=>({...B,historic:!0})),this.requestUpdate(),await this.updateComplete,this.scrollToBottom()}catch(Q){console.error(`The previous state was malformed: ${Q.toString()}`)}}onPromptClick=(A,Q)=>{A&&A.stopPropagation(),this.shadowRoot?.querySelectorAll(".response-prompts .prompt")?.forEach((C)=>{C.remove()}),this.dispatchEvent(new CustomEvent("prompt:click",{detail:Q,composed:!0,bubbles:!0}))};handleClick=(A)=>{if(A.srcElement.hasAttribute("trigger-event")){let Q=A.srcElement.getAttribute("trigger-event");A&&A.stopPropagation(),A&&A.preventDefault(),this.dispatchEvent(new CustomEvent(Q,{bubbles:!0,composed:!0}))}};typeText=(A)=>{let Q=new Sz.default.Converter;return v`${K2(Q.makeHtml(A.text.replace("<END_OF_TURN>","").trim()))}`};renderProducts=(A)=>{return v`<ek-aips-product-carousel
      @product:carousel:initialized=${this.scrollToBottom}
      .products=${A}
    ></ek-aips-product-carousel>`};renderPrompts=(A=[])=>{return A.prompts.map((Q)=>v`<div
          class="prompt"
          @click=${(B)=>this.onPromptClick(B,Q,A)}
        >
          ${Q}
        </div>`)};renderBrandBar=()=>{return v`<ek-aips-brand-bar></ek-aips-brand-bar>`};render(){return v`<div class="wrapper">
      <div class="ai-response-container" @click=${this.handleClick}>
        <div class="ai-scroll-container">
          ${this.responses.map((A)=>{let Q=[A.type===$2.PRODUCTS&&this.renderProducts(A.products),A.type===$2.AI_RESPONSE&&this.typeText(A),A.type===$2.PROMPTS&&this.renderPrompts(A),A.type===$2.BRAND_BAR&&this.renderBrandBar()].filter(Boolean),B=["response",`response-${A.type.toLowerCase()}`,A.historic&&"historic"].filter(Boolean).join(" ");return v` <div
              class="${B}"
              style="animation-delay: ${A?.animationDelay||"0"}ms;"
            >
              ${Q?.length?Q:K2(A.text)}
            </div>`})}
        </div>
      </div>
    </div>`}}f([a({type:Array})],yY.prototype,"responses",void 0),yY=f([z0("ek-aips-ai-console")],yY);class fY extends y0{constructor(){super(...arguments);this.text=[]}static styles=U0`
    :host .scrolling-words-container {
      display: flex;
      align-items: center;
      font-size: 14px;
      font-weight: 600;
    }
    :host .scrolling-words-box {
      margin: auto;
      overflow: hidden;
    }
    :host .scrolling-words-box ul {
      margin: 0 0.625rem;
      padding: 0;
      transform: translateY(-11%);
      animation-timing-function: ease-in-out;
    }

    :host .scrolling-words-box ul.in {
      margin: 0 0.625rem;
      padding: 0;
      transform: translateY(-61%);
      animation-timing-function: ease-in-out;
      transition: ease-in-out 1s transform;
    }

    :host .scrolling-words-box ul.out {
      margin: 0 0.625rem;
      padding: 0;
      transform: translateY(-11%);
      animation-timing-function: ease-in-out;
      transition: ease-in-out 1s transform;
    }

    :host .scrolling-words-box ul li {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 3em;
      list-style: none;
      line-height: 16px;
      color: rgba(76, 156, 215, 1);
    }
  `;get animatedElement(){return this.shadowRoot&&this.shadowRoot.querySelector("ul")}flipFlop=()=>{if(this.animatedElement.classList.contains("in"))this.animatedElement.classList.add("out"),this.animatedElement.classList.remove("in");else this.animatedElement.classList.add("in"),this.animatedElement.classList.remove("out");setTimeout(()=>{(()=>this.flipFlop())()},_1.config?.components?.tabbedLauncher?.flipFlopTextAnimationDelayMilliseconds||4000)};firstUpdated(A){super.firstUpdated(A),(async()=>this.flipFlop())()}render(){return v`
      <div class="scrolling-words-container">
        <div class="scrolling-words-box">
          <ul>
            ${this.text?.length&&this.text.map((A)=>v`<li part="text">${K2(A)}</li>`)}
          </ul>
        </div>
      </div>
    `}}f([a({type:Array})],fY.prototype,"text",void 0),fY=f([z0("ek-aips-vertical-text-scroller")],fY);class hY extends y0{constructor(){super(...arguments);this.value="";this.label="";this.placeholder="";this.type="text";this.thinking=!1}static styles=U0`
    @property --angle {
      syntax: "<angle>";
      initial-value: 0deg;
      inherits: false;
    }
    @keyframes bgRotate {
      100% {
        transform: rotate(1turn);
      }
    }

    :host .button-wrapper {
      position: relative;
      z-index: 0;
      height: 30px;
      width: 30px;
    }

    :host .button-wrapper.thinking::after {
      content: "";
      position: absolute;
      z-index: -1;
      animation: bgRotate 1s linear infinite;
      width: 32px;
      height: 32px;
      background: linear-gradient(rgba(55, 76, 92, 1), rgba(76, 156, 215, 1));
      border-radius: 50px;
    }

    :host button {
      border-radius: 50px;
      border: 1px;
      width: 30px;
      display: flex;
      align-items: center;
      height: 30px;
      padding: 0;
      justify-content: center;
      background-color: white;
      position: absolute;
      top: 1px;
      left: 1px;
    }

    :host button:hover {
      cursor: pointer;
    }

    :host svg {
      width: 30px;
    }
  `;render(){let A=["button-wrapper",this.thinking&&"thinking"].filter(Boolean).join(" ");return v`
      <div class="${A}">
        <button aria-label="ask ai assistant">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 32 32"
            fill="none"
          >
            <path
              d="M7 16C14.2216 15.0179 15.0179 14.2215 16 7C16.9824 14.2215 17.7781 15.0179 25 16C17.7784 16.9821 16.9824 17.7785 16 25C15.0179 17.7785 14.2216 16.9824 7 16Z"
              fill="white"
            />
            <path
              d="M7 16C14.2216 15.0179 15.0179 14.2215 16 7C16.9824 14.2215 17.7781 15.0179 25 16C17.7784 16.9821 16.9824 17.7785 16 25C15.0179 17.7785 14.2216 16.9824 7 16Z"
              fill="var(--eky-start-gradient)"
            />
            <defs>
              <linearGradient
                id="paint0_linear_1333_67699"
                x1="1"
                y1="1"
                x2="31"
                y2="31"
                gradientUnits="userSpaceOnUse"
              >
                <stop stop-color="white" />
                <stop offset="1" stop-color="var(--eky-start-gradient)" />
              </linearGradient>
            </defs>
          </svg>
        </button>
      </div>
    `}}f([a({type:String})],hY.prototype,"value",void 0),f([a({type:String})],hY.prototype,"label",void 0),f([a({type:String})],hY.prototype,"placeholder",void 0),f([a({type:String})],hY.prototype,"type",void 0),f([a({type:Boolean})],hY.prototype,"thinking",void 0),hY=f([z0("ek-aips-ai-button")],hY);class xY extends y0{constructor(){super(...arguments);this.placeholder="";this.expandedInput=!1;this.thinking=!1}static styles=U0`
    :host {
      display: block;
      width: 100%;
    }

    :host .ai-input-container {
      display: flex;
      padding: 16px 50px;
      justify-content: flex-end;
      align-items: flex-end;
      border-radius: 28px;
      border: 1px solid rgba(189, 189, 189, 0.5);
      background: rgba(173, 173, 173, 0.2);
      user-select: none;
      position: relative;
    }

    :host textarea {
      resize: none;
      background: transparent;
      border: 0;
      font-size: 14px;
      font-style: normal;
      font-weight: 400;
      line-height: 18px;
      font-family: "Inter", sans-serif;
      width: 100%;
      text-align: center;
      overflow-y: hidden;
      padding: 0;
      min-height: 22px;
      max-height: 90px;
      color: #333;
    }

    :host textarea:focus {
      outline: none;
    }

    :host textarea::placeholder {
      color: #333;
      text-align: center;
    }

    :host textarea:focus::placeholder {
      color: transparent;
    }

    :host ek-aips-ai-button {
      position: absolute;
      right: 10px;
    }
  `;get textArea(){return this.shadowRoot.querySelector("textarea")}onUserInputComplete=(A)=>{if(this.textArea?.value?.trim())this.dispatchEvent(new CustomEvent("ai:request",{detail:this.textArea.value.replace(/\n/g," "),composed:!0,bubbles:!0})),this.textArea.value=""};onKeyDown=(A)=>{if(A.key==="Enter")return A&&A.preventDefault(),!1};onKeyUp=(A)=>{if(A&&A.stopPropagation(),A.key==="Enter")this.onUserInputComplete(A);let Q=A.target;if(Q.style.height="auto",Q.style.height=Math.min(Q.scrollHeight,90)+"px",Q.scrollHeight>90)Q.style.overflowY="scroll";else Q.style.overflowY="hidden";setTimeout(()=>{this.dispatchEvent(new CustomEvent("input:height:changed",{bubbles:!0,composed:!0}))},0)};render(){return v`
      <div class="ai-input-container">
        <textarea
          @keyup=${this.onKeyUp}
          @keydown=${this.onKeyDown}
          class="ai-input-text-area"
          rows="1"
          placeholder=${_1.config.components.localisation.ctaText}
        ></textarea>

        <ek-aips-ai-button
          .thinking=${this.thinking}
          @click=${this.onUserInputComplete}
          style="bottom: 13px"
        ></ek-aips-ai-button>
      </div>
    `}}f([a({type:String})],xY.prototype,"placeholder",void 0),f([a({type:Boolean})],xY.prototype,"expandedInput",void 0),f([a({type:Boolean})],xY.prototype,"thinking",void 0),xY=f([z0("ek-aips-ai-input")],xY);var oT=[{transform:"translateX(0)"},{transform:"translateX(100%)"}],aT=[{transform:"translateX(-100%)"},{transform:"translateX(0)"}],rT=[{transform:"translateX(100%)"},{transform:"translateX(0)"}],tT=[{transform:"translateX(0)"},{transform:"translateX(-100%)"}];var eT=[{transform:"translateY(100%)"},{transform:"translateY(0)"}],Aj=[{transform:"translateY(0)"},{transform:"translateY(-100%)"}],m6={duration:500,easing:"ease-in-out",iterations:1,fill:"forwards"},be={...m6,direction:"reverse"},Qj={duration:200,easing:"ease-in-out",iterations:1},ue={...Qj,direction:"reverse"},gY=[tT,m6],vY=[oT,m6],bY=[rT,m6],uY=[aT,m6],pY=[eT,m6],mY=[Aj,m6];class dY extends y0{constructor(){super(...arguments);this.open=!1}static styles=U0`
    :host {
      position: relative;
      overflow: hidden;
      height: 100%;
    }

    :host ::slotted(*) {
      height: inherit;
      position: absolute;
      width: 100%;
      overflow-y: hidden;
      overflow-x: hidden;
    }

    :host slot {
      height: 100%;
      position: relative;
      display: flex;
      flex-direction: column;
    }

    :host .container {
      position: relative;
      overflow: hidden;
      height: inherit;
    }
  `;currentSlideIndex=0;get currentNode(){return this.slides[this.currentSlideIndex]}get slides(){let A=this.shadowRoot&&this.shadowRoot.querySelector("slot");return A?A.assignedElements():[]}firstUpdated(A){super.firstUpdated(A),this.currentSlideIndex=0,this.slides.forEach((Q,B)=>{if(Q!==this.currentNode)Q.style.transform="scale(1) translateX(100%)"})}next=async()=>{if(this.currentSlideIndex+1<=this.slides.length){let A=this.currentNode.animate(gY[0],gY[1]);this.currentSlideIndex=this.currentSlideIndex+1;let Q=this.currentNode.animate(bY[0],bY[1]);return await Promise.all([A.finished,Q.finished])}};previous=async()=>{if(this.currentSlideIndex>0){let A=this.currentNode.animate(vY[0],vY[1]);this.currentSlideIndex=this.currentSlideIndex-1;let Q=this.currentNode.animate(uY[0],uY[1]);return await Promise.all([A.finished,Q.finished])}};render(){return v` <div class="container"><slot></slot></div>`}}f([a({type:Boolean})],dY.prototype,"open",void 0),dY=f([z0("ek-aips-content-slider")],dY);class cY extends y0{constructor(){super(...arguments);this.position="none"}static styles=U0`
    :host {
      display: block;
    }

    :host slot {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
  `;render(){return v`<slot></slot>`}}f([a({type:String})],cY.prototype,"position",void 0),cY=f([z0("ek-aips-nav-toolbar")],cY);class lY extends y0{constructor(){super(...arguments);this.thinking=!1;this.animatedBorder=!0;this.slowInitialAnimation=!0}static styles=U0`
    @keyframes rotate {
      to {
        --gradient-angle: 360deg;
      }
    }

    :host div.panel {
      border: 0;
      border-radius: 24px;
      position: relative;
      background: var(--panel-background-color);
      backdrop-filter: blur(36px);
      -webkit-backdrop-filter: blur(36px);
      padding: 1rem 16.5px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      gap: 1rem;
      height: inherit;
      max-width: 372px;
    }

    :host slot {
      display: block;
      height: inherit;
      width: 100%;
    }

    :host div.panel {
      border: 1px solid white;
      border-radius: 24px;
    }

    :host div.panel.thinking::before {
      display: inline-block;
      content: "";
      position: absolute;
      inset: -1px;
      border-radius: 24px;
      border: 2px solid transparent;
      background:
        linear-gradient(
            to bottom,
            var(--panel-border-gradient-end-color),
            var(--panel-border-gradient-end-color)
          )
          padding-box,
        /* ends at inner border edges */
          conic-gradient(
            from var(--gradient-angle) in oklch shorter hue,
            var(--panel-border-gradient-start-color),
            rgb(255 255 255),
            var(--panel-border-gradient-start-color)
          )
          border-box;
      -webkit-mask:
        linear-gradient(#000 0 0) padding-box,
        linear-gradient(#000 0 0);
      mask:
        linear-gradient(#000 0 0) padding-box,
        linear-gradient(#000 0 0);
      -webkit-mask-composite: destination-out;
      mask-composite: exclude;
      animation: rotate 2.5s infinite linear;
    }

    :host div.panel.slow-initial::before {
      display: inline-block;
      content: "";
      position: absolute;
      inset: -1px;
      border-radius: 24px;
      border: 2px solid transparent;
      background:
        linear-gradient(
            to bottom,
            var(--panel-border-gradient-end-color),
            var(--panel-border-gradient-end-color)
          )
          padding-box,
        /* ends at inner border edges */
          conic-gradient(
            from var(--gradient-angle) in oklch shorter hue,
            var(--panel-border-gradient-start-color),
            var(--panel-border-gradient-end-color),
            var(--panel-border-gradient-start-color)
          )
          border-box;
      -webkit-mask:
        linear-gradient(#000 0 0) padding-box,
        linear-gradient(#000 0 0);
      mask:
        linear-gradient(#000 0 0) padding-box,
        linear-gradient(#000 0 0);
      -webkit-mask-composite: destination-out;
      mask-composite: exclude;
      animation: rotate 6s infinite linear;
    }

    :host div.panel.slow-initial.thinking-fast::before {
      animation: rotate 1s infinite linear;
    }
  `;render(){let A=["panel",this.animatedBorder&&this.thinking&&!this.slowInitialAnimation&&"thinking",this.animatedBorder&&this.slowInitialAnimation&&"slow-initial",this.animatedBorder&&this.slowInitialAnimation&&this.thinking&&"thinking-fast"].filter(Boolean).join(" ");return v` <style>
        :host {
          --panel-border-gradient-start-color: ${_1.config.components.panel.borderGradientStartColor};
          --panel-border-gradient-end-color: ${_1.config.components.panel.borderGradientEndColor};
          --panel-background-color: ${_1.config.components.panel.backgroundColor};
        }
      </style>

      <div part="panel" class="${A}">
        <slot></slot>
      </div>`}}f([a({type:Boolean})],lY.prototype,"thinking",void 0),f([a({type:Boolean})],lY.prototype,"animatedBorder",void 0),f([a({type:Boolean})],lY.prototype,"slowInitialAnimation",void 0),lY=f([z0("ek-aips-panel")],lY);class sY extends y0{constructor(){super(...arguments);this.options=[]}static styles=U0`
    :host {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
      .option {
        padding: 0.5rem 1rem;
        border-radius: 16px;
        background-color: rgb(200 200 200 / 0.5);
        backdrop-filter: blur(10px);
        font-size: 14px;
        text-align: center;
        &:hover {
          cursor: pointer;
        }
      }
    }
  `;render(){return v`${this.options.map((A)=>v`<div class="option">${A}</div>`)}`}}f([a({type:Object})],sY.prototype,"options",void 0),sY=f([z0("ek-aips-query-options")],sY);class iY extends y0{constructor(){super(...arguments);this.icon="";this.label="";this.id=""}static styles=U0`
    :host button {
      border-radius: 50px;
      border: 1px;
      width: 24px;
      display: flex;
      align-items: center;
      height: 24px;
      padding: 0;
      justify-content: center;
      background-color: #f0f0f0;
    }

    :host button:hover {
      cursor: pointer;
    }

    :host svg {
      width: 30px;
    }
  `;render(){return v`
      <button aria-label=${this.label} id=${this.id}>
        <slot></slot>
      </button>
    `}}f([a({type:String})],iY.prototype,"icon",void 0),f([a({type:String})],iY.prototype,"label",void 0),f([a({type:String})],iY.prototype,"id",void 0),iY=f([z0("ek-aips-toolbar-button")],iY);class H7 extends y0{constructor(){super(...arguments);this.open=!1}get AIConsole(){return this.shadowRoot&&this.shadowRoot.querySelector("ek-aips-ai-console")}get AIPanel(){return this.shadowRoot&&this.shadowRoot.querySelector("ek-aips-panel")}get AIInput(){return this.shadowRoot&&this.shadowRoot.querySelector("ek-aips-ai-input")}get contentSlider(){return this.shadowRoot&&this.shadowRoot.querySelector("ek-aips-content-slider")}onPanelClicked=async(A)=>{if(A&&A.stopPropagation(),!this.open)this.openPanel()};openPanel=async(A,Q="")=>{if(A&&A.stopPropagation(),!this.open)this.open=!0,await this.requestUpdate(),this.dispatchEvent(new CustomEvent("ek-aips:open",{detail:Q,composed:!0,bubbles:!0}))};closePanel=async(A)=>{if(A&&A.stopPropagation(),this.open)this.open=!1,await this.requestUpdate(),this.dispatchEvent(new CustomEvent("ek-aips:close",{composed:!0,bubbles:!0}))};clearPanel=async(A)=>{A&&A.stopPropagation(),this.dispatchEvent(new CustomEvent("ek-aips:clear",{composed:!0,bubbles:!0}))};addResponse=({type:A,text:Q,animationDelay:B,products:C,prompts:J,animationType:I})=>{this.AIConsole.addResponse({type:A,text:Q,animationDelay:B,products:C,prompts:J,animationType:I})};clear=async()=>{this.AIConsole.responses=[],await this.requestUpdate()};hasResponses=()=>{return!!this.AIConsole.responses.length};nextSlide=async(A)=>{A&&A.stopPropagation(),this.dispatchEvent(new CustomEvent("terms:opened",{composed:!0,bubbles:!0})),await this.contentSlider.next()};onInputHeightChanged=(A)=>{A&&A.stopPropagation(),this.AIConsole.scrollToBottom()};previousSlide=async(A)=>{A&&A.stopPropagation(),await this.contentSlider.previous()};renderAIConsole(){return v` <ek-aips-nav-toolbar class="close-toolbar">
        <ek-aips-toolbar-button
          .label=${"close ai assistant"}
          @click=${this.clearPanel}
          ><svg
            width="12"
            height="14"
            viewBox="0 0 12 14"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M5.25 13.9993C3.76389 13.8049 2.51736 13.1487 1.51042 12.0306C0.503472 10.9125 0 9.58268 0 8.04102C0 7.19379 0.159722 6.4056 0.479167 5.67643C0.798611 4.94727 1.23611 4.31185 1.79167 3.77018L2.85417 4.83268C2.4375 5.23546 2.10764 5.71463 1.86458 6.27018C1.62153 6.82574 1.5 7.41602 1.5 8.04102C1.5 9.16602 1.85764 10.1382 2.57292 10.9577C3.28819 11.7771 4.18056 12.2841 5.25 12.4785V13.9993ZM6.75 13.9993V12.4785C7.81944 12.298 8.71181 11.7945 9.42708 10.9681C10.1424 10.1417 10.5 9.16602 10.5 8.04102C10.5 6.79102 10.0625 5.72852 9.1875 4.85352C8.3125 3.97852 7.25 3.54102 6 3.54102H5.85417L6.8125 4.49935L5.75 5.54102L3 2.79102L5.75 0.0410156L6.8125 1.10352L5.875 2.04102H6C7.66667 2.04102 9.08333 2.62435 10.25 3.79102C11.4167 4.95768 12 6.37435 12 8.04102C12 9.58268 11.4965 10.916 10.4896 12.041C9.48264 13.166 8.23611 13.8188 6.75 13.9993Z"
              fill="var(--eky-start-gradient)"
            />
          </svg>
        </ek-aips-toolbar-button>
        <ek-aips-toolbar-button
          .label=${"close ai assistant"}
          @click=${this.closePanel}
          ><svg
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 20 20"
            fill="none"
          >
            <g>
              <path
                d="M7.00065 14.168L5.83398 13.0013L8.83398 10.0013L5.83398 7.02214L7.00065 5.85547L10.0007 8.85547L12.9798 5.85547L14.1465 7.02214L11.1465 10.0013L14.1465 13.0013L12.9798 14.168L10.0007 11.168L7.00065 14.168Z"
                fill="var(--eky-start-gradient)"
              />
            </g></svg
        ></ek-aips-toolbar-button>
      </ek-aips-nav-toolbar>
      <ek-aips-content-slider>
        <!-- AI Communicator -->
        <div class="ai-console">
          <ek-aips-ai-console
            @open:terms=${this.nextSlide}
          ></ek-aips-ai-console>

          <ek-aips-ai-input
            @input:height:changed=${this.onInputHeightChanged}
          ></ek-aips-ai-input>

          ${_1.config.components.brandBlock.showPanelBrandBlock?v`<ek-aips-brand-bar></ek-aips-brand-bar>`:null}
        </div>
        <!-- Terms & Conditions -->
        <div>
          <ek-aips-nav-toolbar>
            <ek-aips-toolbar-button
              @click=${this.previousSlide}
              .label=${"go back to ai assistant"}
              ><svg
                xmlns="http://www.w3.org/2000/svg"
                width="7"
                height="10"
                viewBox="0 0 8 10"
                fill="none"
              >
                <path
                  d="M6 1L2 5L6 9"
                  stroke="var(--eky-start-gradient)"
                  stroke-width="2"
                /></svg
            ></ek-aips-toolbar-button>
          </ek-aips-nav-toolbar>
          <div class="tc-inner">
            <div class="container-scrollable">
              ${K2(_1.config.components.localisation.transparencyText)}
            </div>
          </div>
        </div>
      </ek-aips-content-slider>`}}f([a({type:Boolean})],H7.prototype,"open",void 0);class nY extends H7{constructor(){super(...arguments);this.launchLineText=_1.config.components.localisation.variantTexts}interval=0;static styles=[U0`
      @keyframes fadeIn {
        0% {
          opacity: 0;
        }
        100% {
          opacity: 1;
        }
      }
      :host {
        font-family: "Inter", sans-serif;
      }

      :host .text-center {
        text-align: center;
      }

      :host .tabbed-launch-prompt {
        display: flex;
        align-items: center;
        position: relative;
      }

      :host .tabbed-launch-prompt .left-star-cluster {
        position: absolute;
        top: -3px;
        left: 0;
        opacity: 0;
        transition: 1s opacity ease-in-out;
      }

      :host .tabbed-launch-prompt .left-star-cluster.active {
        opacity: 1;
        transition: 1s opacity ease-in-out;
      }

      :host .tabbed-launch-prompt .right-star-cluster {
        position: absolute;
        top: -3px;
        right: 0;
        opacity: 0;
        transition: 1s opacity ease-in-out;
      }

      :host .tabbed-launch-prompt .right-star-cluster.active {
        opacity: 1;
        transition: 1s opacity ease-in-out;
      }

      :host .launch-line {
        color: var(--eky-start-gradient);
        text-align: center;
        font-size: 14px;
        font-style: normal;
        font-weight: 700;
        width: 100%;
        user-select: none;
      }

      :host ek-aips-panel.open {
        position: fixed;
        bottom: 0;
        left: 10px;
        z-index: 1000;
        transform: translate3d(0, -30px, 0);
        animation: transform 1s ease forwards;
        transition: all 1s ease;
        width: calc(100vw - 20px);
        max-width: calc(100vw - 20px);
      }

      @media (min-width: 768px) {
        :host ek-aips-panel.open {
          left: 25px;
          width: 372px;
        }
      }

      :host ek-aips-panel.open::part(panel) {
        height: var(--ek-aips-height);
      }

      :host ek-aips-panel:not(.open) {
        position: fixed;
        transform: translate3d(0, calc(var(--ek-aips-height) - 20px), 0);
        left: 10px;
        bottom: 0;
        animation: transform 1s ease forwards;
        transition: all 1s ease;
        width: calc(100vw - 20px);
        max-width: calc(100vw - 85px);
      }

      @media (min-width: 768px) {
        :host ek-aips-panel:not(.open) {
          left: 25px;
          width: 320px;
        }
      }

      :host ek-aips-panel:not(.open):hover {
        cursor: pointer;
      }

      :host ek-aips-panel:not(.open)::part(panel) {
        height: var(--ek-aips-height);
      }

      @keyframes grow {
        to {
          height: var(--ek-aips-height);
        }
      }

      :host .ai-console {
        display: flex;
        flex-direction: column;
        gap: 24px;
        align-items: center;
      }

      :host ek-aips-content-slider {
        display: block;
        height: var(--ek-aips-height);
        width: 100%;
      }

      :host .tc-inner {
        display: flex;
        flex-direction: column;
        height: 95%;
      }

      :host .container-scrollable {
        padding: 1rem 1.5rem;
        text-align: left;
        display: flex;
        flex-direction: column;
        gap: 12px;
        overflow-y: auto;
        scrollbar-width: none;
        font-size: 12px;
        font-weight: 400;
      }

      :host .container-scrollable ol {
        list-style-position: outside;
        padding-left: 1.1em;
      }

      :host .container-scrollable li {
        margin-bottom: 12px;
      }

      :host .brands {
        display: flex;
        gap: 12px;
        align-items: center;
      }

      :host .close-toolbar {
        position: relative;
      }

      :host .close-toolbar ek-aips-toolbar-button:nth-child(1) {
        right: 28px;
        top: -1px;
        position: absolute;
        z-index: 2000;
      }

      :host .close-toolbar ek-aips-toolbar-button:nth-child(2) {
        right: -3px;
        top: -1px;
        position: absolute;
        z-index: 2000;
      }

      :host .tabbed-launch-prompt {
        opacity: 0;
        animation: fadeIn 1s ease forwards;
        animation-delay: 0.7s;
      }
    `];startTabbedLaunchAnimation=()=>{this.interval=setInterval(()=>{let A=this.shadowRoot.querySelector(".left-star-cluster"),Q=this.shadowRoot.querySelector(".right-star-cluster");if(A.classList.contains("active"))A.classList.remove("active"),Q.classList.add("active");else A.classList.add("active"),Q.classList.remove("active")},8000)};renderTabbedLaunchPrompt(){return this.startTabbedLaunchAnimation(),v`<div class="tabbed-launch-prompt">
      <svg
        class="left-star-cluster active"
        xmlns="http://www.w3.org/2000/svg"
        width="32"
        height="28"
        viewBox="0 0 32 28"
      >
        <g>
          <path
            id="center-star"
            d="M4 16C13.6287 14.6905 14.6905 13.6287 16 4C17.3099 13.6287 18.3709 14.6905 28 16C18.3713 17.3095 17.3099 18.3713 16 28C14.6905 18.3713 13.6287 17.3099 4 16Z"
            fill="var(--eky-start-gradient)"
          />
          <path
            id="top-right-star"
            d="M20 6C24.8144 5.34524 25.3453 4.81433 26 0C26.6549 4.81433 27.1854 5.34524 32 6C27.1856 6.65476 26.6549 7.18567 26 12C25.3453 7.18567 24.8144 6.65496 20 6Z"
            fill="var(--eky-start-gradient)"
            fill-opacity="0"
          >
            <animate
              id="top-right-anim"
              attributeName="fill-opacity"
              values="0;1;0"
              dur="1.5s"
              begin="0s;top-left-anim.end+0.2s"
            />
          </path>

          <path
            id="bottom-left-star"
            d="M4 25C6.40718 24.6726 6.67263 24.4072 7 22C7.32747 24.4072 7.59272 24.6726 10 25C7.59282 25.3274 7.32747 25.5928 7 28C6.67263 25.5928 6.40718 25.3275 4 25Z"
            fill="var(--eky-start-gradient)"
            fill-opacity="0"
          >
            <animate
              id="bottom-left-anim"
              attributeName="fill-opacity"
              values="0;1;0"
              dur="1.5s"
              begin="top-right-anim.end+0.2s"
            />
          </path>

          <path
            id="top-left-star"
            d="M0 6C4.81437 5.34524 5.34526 4.81433 6 0C6.65494 4.81433 7.18543 5.34524 12 6C7.18563 6.65476 6.65494 7.18567 6 12C5.34526 7.18567 4.81437 6.65496 0 6Z"
            fill="var(--eky-start-gradient)"
            fill-opacity="0"
          >
            <animate
              id="top-left-anim"
              attributeName="fill-opacity"
              values="0;1;0"
              dur="1.5s"
              begin="bottom-left-anim.end+0.2s"
            />
          </path>
        </g>
      </svg>

      <div class="launch-line">
        <ek-aips-vertical-text-scroller
          .text=${this.launchLineText}
        ></ek-aips-vertical-text-scroller>
      </div>

      <svg
        class="right-star-cluster"
        xmlns="http://www.w3.org/2000/svg"
        width="32"
        height="28"
        viewBox="0 0 32 28"
        fill="none"
      >
        <path
          id="center-star"
          d="M4 16C13.6287 14.6905 14.6905 13.6287 16 4C17.3099 13.6287 18.3709 14.6905 28 16C18.3713 17.3095 17.3099 18.3713 16 28C14.6905 18.3713 13.6287 17.3099 4 16Z"
          fill="var(--eky-start-gradient)"
        />
        <path
          id="top-right-star"
          d="M20 6C24.8144 5.34524 25.3453 4.81433 26 0C26.6549 4.81433 27.1854 5.34524 32 6C27.1856 6.65476 26.6549 7.18567 26 12C25.3453 7.18567 24.8144 6.65496 20 6Z"
          fill="var(--eky-start-gradient)"
          fill-opacity="0"
        >
          <animate
            id="top-right-anim"
            attributeName="fill-opacity"
            values="0;1;0"
            dur="1.5s"
            begin="0s;top-left-anim.end+0.2s"
          />
        </path>

        <path
          id="bottom-left-star"
          d="M4 25C6.40718 24.6726 6.67263 24.4072 7 22C7.32747 24.4072 7.59272 24.6726 10 25C7.59282 25.3274 7.32747 25.5928 7 28C6.67263 25.5928 6.40718 25.3275 4 25Z"
          fill="var(--eky-start-gradient)"
          fill-opacity="0"
        >
          <animate
            id="bottom-left-anim"
            attributeName="fill-opacity"
            values="0;1;0"
            dur="1.5s"
            begin="top-right-anim.end+0.2s"
          />
        </path>

        <path
          id="top-left-star"
          d="M0 6C4.81437 5.34524 5.34526 4.81433 6 0C6.65494 4.81433 7.18543 5.34524 12 6C7.18563 6.65476 6.65494 7.18567 6 12C5.34526 7.18567 4.81437 6.65496 0 6Z"
          fill="var(--eky-start-gradient)"
          fill-opacity="0"
        >
          <animate
            id="top-left-anim"
            attributeName="fill-opacity"
            values="0;1;0"
            dur="1.5s"
            begin="bottom-left-anim.end+0.2s"
          />
        </path>
      </svg>
    </div>`}render(){let A=[this.open&&this.renderAIConsole(),!this.open&&this.renderTabbedLaunchPrompt()].filter(Boolean);if(this.open)clearInterval(this.interval);let Q=[this.open&&"open"].filter(Boolean).join(" ");return v`
      <ek-aips-panel class="${Q}" @click=${this.onPanelClicked}
        >${A}</ek-aips-panel
      >
    `}}f([a({type:Array})],nY.prototype,"launchLineText",void 0),nY=f([z0("ek-aips-tabbed")],nY);class oY extends y0{constructor(){super(...arguments);this.text=[];this.variant="flip-flop"}currentIndex=0;currentElement=null;static styles=U0`
    @keyframes fadeIn {
    }
    @keyframes scrollUp {
      0%,
      10% {
        transform: translateY(100%);
      }

      10%,
      80% {
        transform: translateY(0);
      }

      80%,
      100% {
        transform: translateY(-100%);
      }
    }

    :host {
      width: inherit;
      height: inherit;
    }

    :host .scroller-container {
      position: fixed;
      width: calc(var(--black-hole-height) - 22px);
      overflow: hidden;
      border-radius: 50px;
      height: inherit;
      display: flex;
      justify-content: center;
      flex-direction: column;
      align-items: center;
      left: 11px;
    }

    :host .scroller-container .scroll-wrapper {
      position: relative;
      display: block;
      width: inherit;
      height: inherit;
    }

    :host .scroller-text {
      transform: translateY(100%);
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      position: absolute;
      width: 100%;
    }

    :host .scroller-text .text-wrapper {
      padding: 0 14px;
    }
  `;get textElements(){return Array.from(this.shadowRoot?.querySelectorAll(".scroller-text"))}firstUpdated(A){super.firstUpdated(A),(async()=>await this.animateText())()}animateText=async()=>{let A=this.currentElement&&this.currentElement.animate(mY[0],mY[1]);this.currentElement=this.textElements[this.currentIndex];let Q=this.currentElement.animate(pY[0],pY[1]);if(await Promise.all([A&&A.finished,Q.finished]),this.currentIndex++,this.currentIndex>=this.textElements.length)this.currentIndex=0;setTimeout(async()=>{await this.animateText()},4000)};render(){return v`
      <div class="scroller-container">
        <div class="scroll-wrapper">
          ${this.text?.length&&this.text.map((A,Q)=>{let B=["scroller-text"].filter(Boolean).join(" "),C=[A.type].filter(Boolean).join(" ");return v` <div part="${C}" class="${B}">
              <div class="text-wrapper">${K2(A.text)}</div>
            </div>`})}
        </div>
      </div>
    `}}f([a({type:Array})],oY.prototype,"text",void 0),f([a({type:String})],oY.prototype,"variant",void 0),oY=f([z0("ek-aips-vertical-text-scroller-infinite")],oY);class QJ extends H7{static styles=U0`
    :host ek-aips-panel.open {
      position: fixed;
      bottom: 0;
      left: 10px;
      z-index: 1006;
      transform: translate3d(0, -30px, 0);
      animation: transform 1s ease forwards;
      transition: all 1s ease;
      width: calc(100vw - 20px);
      max-width: calc(100vw - 20px);
    }

    @media (min-width: 768px) {
      :host ek-aips-panel.open {
        left: 25px;
        width: 372px;
      }
    }

    :host ek-aips-panel.open::part(panel) {
      height: var(--ek-aips-height);
    }

    :host ek-aips-panel:not(.open) {
      position: fixed;
      transform: translate3d(0, calc(var(--ek-aips-height) + 40px), 0);
      left: 10px;
      bottom: 0;
      animation: transform 1s ease forwards;
      transition: all 1s ease;
      width: calc(100vw - 20px);
      max-width: calc(100vw - 20px);
    }

    @media (min-width: 768px) {
      :host ek-aips-panel:not(.open) {
        left: 25px;
        width: 320px;
      }
    }

    :host ek-aips-panel:not(.open)::part(panel) {
      height: var(--ek-aips-height);
    }

    @keyframes grow {
      to {
        height: var(--ek-aips-height);
      }
    }

    :host .ai-console {
      display: flex;
      flex-direction: column;
      gap: 24px;
      align-items: center;
      justify-content: end;
    }

    :host ek-aips-content-slider {
      display: block;
      height: var(--ek-aips-height);
      width: 100%;
    }

    :host .tc-inner {
      display: flex;
      flex-direction: column;
      height: 95%;
    }

    :host .container-scrollable {
      padding: 1rem 1.5rem;
      text-align: left;
      display: flex;
      flex-direction: column;
      gap: 12px;
      overflow-y: auto;
      scrollbar-width: none;
      font-size: 12px;
      font-weight: 400;
    }

    :host .container-scrollable ol {
      list-style-position: outside;
      padding-left: 1.1em;
    }

    :host .container-scrollable li {
      margin-bottom: 12px;
    }

    :host .brands {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    :host .close-toolbar {
      position: relative;
    }

    :host .close-toolbar ek-aips-toolbar-button:nth-child(1) {
      right: 28px;
      top: -1px;
      position: absolute;
      z-index: 2000;
    }

    :host .close-toolbar ek-aips-toolbar-button:nth-child(2) {
      right: -3px;
      top: -1px;
      position: absolute;
      z-index: 2000;
    }

    :host {
      --black-hole-height: 100px;
    }

    @media (min-width: 768px) {
      :host {
        --black-hole-height: 130px;
      }
    }

    :host .wrapper {
      display: flex;
      flex-direction: column;
      position: fixed;
      width: var(--black-hole-height);
      height: var(--black-hole-height);
      border-radius: 50px;
      transform: translateY(0);
      animation: transform 1s ease forwards;
      transition: all 1s ease;
      bottom: 25px;
      left: 30px;
      user-select: none;
    }

    :host .wrapper:hover {
      cursor: pointer;
    }

    :host .wrapper.closed {
      transform: translateY(160px);
      animation: transform 1s ease forwards;
      transition: all 1s ease;
    }

    :host ek-aips-vertical-text-scroller-infinite {
      z-index: 1001;
      width: inherit;
      border-radius: 50px;
      overflow: hidden;
      height: calc(var(--black-hole-height) - 40px);
      margin: 20px 15px;
    }

    :host ek-aips-vertical-text-scroller-infinite::part(large-text) {
      color: rgba(112, 0, 255, 1);
      font-size: 32px;
      font-style: normal;
      font-weight: 600;
    }

    :host ek-aips-vertical-text-scroller-infinite::part(standard-text) {
      color: rgba(112, 0, 255, 1);
      font-size: 10px;
      font-style: normal;
      font-weight: 600;
    }

    @media (min-width: 768px) {
      :host ek-aips-vertical-text-scroller-infinite::part(large-text) {
        font-size: 42px;
      }

      :host ek-aips-vertical-text-scroller-infinite::part(standard-text) {
        font-size: 12px;
      }
    }

    :host .black-hole-container {
      position: relative;
    }

    :host .black-hole-container svg {
      position: absolute;
      overflow: hidden;
    }

    :host .black-hole-container svg#layer-0 {
      z-index: 1000;
      width: var(--black-hole-height);
      height: var(--black-hole-height);
    }

    :host .black-hole-container svg#layer-1 {
      z-index: 1002;
      width: var(--black-hole-height);
      height: var(--black-hole-height);
    }

    :host .black-hole-container svg#layer-2 {
      z-index: 1003;
      width: var(--black-hole-height);
      height: var(--black-hole-height);
    }
  `;handleTheBlackHoleClick(A){this.openPanel(A)}renderTheBlackHole(){let A=[this.open&&"closed","wrapper"].filter(Boolean).join(" ");return v`
      <style>
        @keyframes rotate {
          0% {
            transform: rotate(0deg) scale(0.9);
          }
          50% {
            transform: rotate(180deg) scale(1);
          }
          100% {
            transform: rotate(360deg) scale(0.9);
          }
        }
      </style>
      <div class="${A}" @click=${this.handleTheBlackHoleClick}>
        <div class="black-hole-container">
          <svg viewBox="0 0 153 169" fill="none" id="layer-0">
            <g
              filter="url(#filter0_f_427_10259)"
              style="animation: rotate 2.5s linear infinite; transform-origin: 50% 50%;"
            >
              <ellipse
                cx="76.3774"
                cy="84.588"
                rx="75"
                ry="83"
                fill="white"
              ></ellipse>
              <path
                d="M150.377 84.588C150.377 129.973 117.154 166.588 76.3774 166.588C35.6013 166.588 2.37744 129.973 2.37744 84.588C2.37744 39.2029 35.6013 2.58801 76.3774 2.58801C117.154 2.58801 150.377 39.2029 150.377 84.588Z"
                stroke="white"
                stroke-width="2"
              ></path>
              <path
                d="M150.377 84.588C150.377 129.973 117.154 166.588 76.3774 166.588C35.6013 166.588 2.37744 129.973 2.37744 84.588C2.37744 39.2029 35.6013 2.58801 76.3774 2.58801C117.154 2.58801 150.377 39.2029 150.377 84.588Z"
                stroke="url(#paint0_linear_427_10259)"
                stroke-width="2"
              ></path>
            </g>
            <defs>
              <filter
                id="filter0_f_427_10259"
                x="0.377441"
                y="0.588013"
                width="152"
                height="168"
                filterUnits="userSpaceOnUse"
                color-interpolation-filters="sRGB"
              >
                <feFlood
                  flood-opacity="0"
                  result="BackgroundImageFix"
                ></feFlood>
                <feBlend
                  mode="normal"
                  in="SourceGraphic"
                  in2="BackgroundImageFix"
                  result="shape"
                ></feBlend>
                <feGaussianBlur
                  stdDeviation="0.5"
                  result="effect1_foregroundBlur_427_10259"
                ></feGaussianBlur>
              </filter>
              <linearGradient
                id="paint0_linear_427_10259"
                x1="1.37744"
                y1="1.58801"
                x2="166.528"
                y2="150.821"
                gradientUnits="userSpaceOnUse"
              >
                <stop stop-color="white"></stop>
                <stop offset="0.5" stop-color="#0CB7EB"></stop>
                <stop offset="1" stop-color="#9747FF"></stop>
              </linearGradient>
            </defs>
          </svg>
          <svg viewBox="0 0 170 159" fill="none" id="layer-1">
            <g
              filter="url(#filter0_f_427_10260)"
              style="animation: rotate 2.5s linear infinite; transform-origin: 50% 50%;"
            >
              <path
                d="M102.119 150.359C58.4818 160.065 16.4411 135.925 7.79783 97.0663C-0.845388 58.2076 26.9993 18.5236 70.6362 8.81756C114.273 -0.888483 156.314 23.2511 164.957 62.1098C173.6 100.968 145.756 140.652 102.119 150.359Z"
                stroke="white"
                stroke-width="5"
              ></path>
              <path
                d="M102.119 150.359C58.4818 160.065 16.4411 135.925 7.79783 97.0663C-0.845388 58.2076 26.9993 18.5236 70.6362 8.81756C114.273 -0.888483 156.314 23.2511 164.957 62.1098C173.6 100.968 145.756 140.652 102.119 150.359Z"
                stroke="url(#paint0_linear_427_10260)"
                stroke-width="5"
              ></path>
            </g>
            <defs>
              <filter
                id="filter0_f_427_10260"
                x="-0.278809"
                y="0.174194"
                width="173.313"
                height="158.828"
                filterUnits="userSpaceOnUse"
                color-interpolation-filters="sRGB"
              >
                <feFlood
                  flood-opacity="0"
                  result="BackgroundImageFix"
                ></feFlood>
                <feBlend
                  mode="normal"
                  in="SourceGraphic"
                  in2="BackgroundImageFix"
                  result="shape"
                ></feBlend>
                <feGaussianBlur
                  stdDeviation="2"
                  result="effect1_foregroundBlur_427_10260"
                ></feGaussianBlur>
              </filter>
              <linearGradient
                id="paint0_linear_427_10260"
                x1="151.113"
                y1="-11.6439"
                x2="41.2983"
                y2="181.969"
                gradientUnits="userSpaceOnUse"
              >
                <stop stop-color="white"></stop>
                <stop offset="0.5" stop-color="#0CB7EB"></stop>
                <stop offset="1" stop-color="#9747FF"></stop>
              </linearGradient>
            </defs>
          </svg>
          <svg viewBox="0 0 160 167" fill="none" id="layer-2">
            <g
              filter="url(#filter0_f_427_10261)"
              style="animation: rotate 2.5s linear infinite; transform-origin: 50% 50%;"
            >
              <path
                d="M142.621 43.5667C167.167 81.7416 159.023 130.508 124.725 152.561C90.4269 174.614 42.6789 161.784 18.1334 123.609C-6.41216 85.4342 1.7312 36.6679 36.0294 14.615C70.3275 -7.43786 118.076 5.39176 142.621 43.5667Z"
                stroke="white"
                stroke-width="2"
              ></path>
              <path
                d="M142.621 43.5667C167.167 81.7416 159.023 130.508 124.725 152.561C90.4269 174.614 42.6789 161.784 18.1334 123.609C-6.41216 85.4342 1.7312 36.6679 36.0294 14.615C70.3275 -7.43786 118.076 5.39176 142.621 43.5667Z"
                stroke="url(#paint0_linear_427_10261)"
                stroke-width="2"
              ></path>
            </g>
            <defs>
              <filter
                id="filter0_f_427_10261"
                x="0.945557"
                y="0.832581"
                width="158.863"
                height="165.511"
                filterUnits="userSpaceOnUse"
                color-interpolation-filters="sRGB"
              >
                <feFlood
                  flood-opacity="0"
                  result="BackgroundImageFix"
                ></feFlood>
                <feBlend
                  mode="normal"
                  in="SourceGraphic"
                  in2="BackgroundImageFix"
                  result="shape"
                ></feBlend>
                <feGaussianBlur
                  stdDeviation="1"
                  result="effect1_foregroundBlur_427_10261"
                ></feGaussianBlur>
              </filter>
              <linearGradient
                id="paint0_linear_427_10261"
                x1="-27.5965"
                y1="54.3359"
                x2="192.027"
                y2="90.5424"
                gradientUnits="userSpaceOnUse"
              >
                <stop stop-color="white"></stop>
                <stop offset="0.5" stop-color="#0CB7EB"></stop>
                <stop offset="1" stop-color="#9747FF"></stop>
              </linearGradient>
            </defs>
          </svg>
        </div>
        <ek-aips-vertical-text-scroller-infinite
          .text=${[{text:"Hi!",type:"large-text"},{text:"I'm the Intel&reg; AI assistant.",type:"standard-text"},{text:"Ask me about Intel&reg; AI PCs",type:"standard-text"}]}
        ></ek-aips-vertical-text-scroller-infinite>
      </div>
    `}render(){let A=[this.open&&"open"].filter(Boolean).join(" ");return v`
      ${this.renderTheBlackHole()}
      <ek-aips-panel class="${A} z-50" @click=${this.onPanelClicked}>
        ${this.open?this.renderAIConsole():null}
      </ek-aips-panel>
    `}}QJ=f([z0("ek-aips-the-black-hole")],QJ);var yz="eky-ai-shopper-state";class S9 extends M1{opened=!1;static styles=[xU,U0`
      :host {
        --ek-aips-height: calc(100vh * 0.6);

        z-index: 999;
        position: absolute;
        color: #343434;

        font-family: "Inter", sans-serif;
        font-optical-sizing: auto;
        font-weight: 400;
        font-style: normal;
      }
    `];sessionId=null;messages=[];constructor(A,Q,B,C,J,I,q,K,Y){super(A,Q,B,C,J,I,q,K,Y,!0,"aips");this.ekVariant="tabbed"}get ekRenderedVariant(){return this.shadowRoot?.querySelector("#ek-aips")}isComponentValidToRender(){let A=this.getLocalisations("AIPSLocalisation");if(A===null||!A)return!1;else if(!A.translation_salutation||!A.translation_introText||!A.translation_smallText||!A.translation_ctaText||!A.translation_transparencyText||!A.translation_variantTexts||!A.translation_prompts)return!1;return!0}getSessionId(){if(!this.sessionId)this.sessionId=d3(),this.saveState();return this.sessionId}loadPreviousState(){let A=localStorage.getItem(yz);if(A)try{let Q=JSON.parse(A);if(Q.sessionId)this.sessionId=Q.sessionId;if(Q.messages)this.messages=Q.messages;if(Q.opened)this.opened=Q.opened,this.ekAips.openPanel(null,"auto")}catch(Q){console.error(`The previous state was malformed: ${Q.toString()}`)}}saveState(){localStorage.setItem(yz,JSON.stringify({sessionId:this.sessionId,messages:this.messages,opened:this.opened}))}async clearAIConsole(){this.messages=[],this.sessionId=null,this.logEventLegacy("refresh",""),this.triggerWOTWCommonInteraction("refresh"),await this.ekAips.clear(),this.runIntro()}openAIConsole(A){if(this.opened=!0,this.saveState(),this.logEventLegacy("open",A.detail||""),this.triggerWOTWCommonInteraction("open"),!this.ekAips.hasResponses())setTimeout(()=>this.runIntro(),1100)}closeAIConsole(){this.opened=!1,this.logEventLegacy("close",""),this.triggerWOTWCommonInteraction("close"),this.saveState()}gradientAnglePropertyInject=()=>{let Q=document.head||document.getElementsByTagName("head")[0],B=document.createElement("style");Q.appendChild(B),B.type="text/css",B.appendChild(document.createTextNode('@property --gradient-angle {\n        inherits: false;\n        initial-value: 0deg;\n        syntax: "<angle>";\n      }'))};termsOpened(){this.logEventLegacy("transparency-statement","")}feedbackClicked(A){this.logEventLegacy("feedback",A.detail.liked?"liked":"disliked")}clickedProduct(A){this.logEventLegacy("click",A.detail.toString())}openPanelManual(A){if(this.ekAips)this.ekAips.openPanel(A,"manual")}connectedCallback(){super.connectedCallback(),this.loadInterDisplayFont();let A=this.getLocalisations("AIPSLocalisation");_1.applyConfiguration({components:{panel:{borderGradientStartColor:this.EKProps.gradientStartColour,borderGradientEndColor:this.EKProps.gradientEndColour,textGradientStartColor:this.EKProps.textGradientStartColour,textGradientEndColor:this.EKProps.textGradientEndColour,backgroundColor:this.EKProps.backgroundColour},brandBlock:{showPanelBrandBlock:this.EKProps.showBrandBarInPanel},tabbedLauncher:{flipFlopTextAnimationDelayMilliseconds:4000},brandBar:{brand:this.EKProps.brandBarVersion,link:this.EKProps.eyekandyLogoAsLink},localisation:{salutation:A.translation_salutation,introText:A.translation_introText,smallText:A.translation_smallText,ctaText:A.translation_ctaText,transparencyText:A.translation_transparencyText,variantTexts:A.translation_variantTexts.map((Q)=>Q.text),prompts:A.translation_prompts}}}),this.ekVariant=this.EKProps.buttonVariant,this.addEventListener("ai:request",(Q)=>this.handleHumanInput(Q)),this.addEventListener("prompt:click",(Q)=>this.handlePromptInput(Q)),this.addEventListener("ek-aips:clear",()=>this.clearAIConsole()),this.addEventListener("ek-aips:open",(Q)=>this.openAIConsole(Q)),this.addEventListener("ek-aips:close",()=>this.closeAIConsole()),this.addEventListener("terms:opened",()=>this.termsOpened()),this.addEventListener("product:click",(Q)=>this.clickedProduct(Q)),this.addEventListener("product-feedback:clicked",(Q)=>this.feedbackClicked(Q)),this.addEventListener("open-panel",(Q)=>this.openPanelManual(Q)),this.gradientAnglePropertyInject()}firstUpdated(A){super.firstUpdated(A),setTimeout(()=>this.loadPreviousState(),50)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("ai:request",(A)=>this.handleHumanInput(A)),this.removeEventListener("prompt:click",(A)=>this.handlePromptInput(A)),this.removeEventListener("ek-aips:clear",()=>this.clearAIConsole()),this.removeEventListener("ek-aips:open",()=>this.openAIConsole()),this.removeEventListener("ek-aips:close",()=>this.closeAIConsole()),this.removeEventListener("terms:opened",()=>this.termsOpened()),this.removeEventListener("product:click",(A)=>this.clickedProduct(A)),this.removeEventListener("product-feedback:clicked",(A)=>this.feedbackClicked(A)),this.removeEventListener("open-panel",(A)=>this.openPanelManual(A))}setAIThinking=(A=!1)=>{this.ekRenderedVariant.AIPanel.thinking=A,this.ekRenderedVariant.AIInput.thinking=A};handlePromptInput=async(A)=>{let Q=A.detail.toString();this.logEventLegacy("prompt",Q),this.triggerWOTWCommonInteraction("prompt",Q),this.handleHumanInput(A)};handleHumanInput=async(A)=>{A&&A.stopPropagation();let Q=A.detail.toString();this.renderMessageOnAIConsole({type:$2.HUMAN_REQUEST,text:Q}),this.logEventLegacy("human-message",""),this.triggerWOTWCommonInteraction("human-message"),this.setAIThinking(!0);try{let B=new URLSearchParams(window.location.search),C=this;fetch(this.EKProps.apiEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:this.getSessionId(),text:Q,stream:!0,filter_sku:B.get("eky-aips-filter-sku")||this.EKControlObject?._config.identifiers.sku||""})}).then((J)=>{let I=J.body.getReader(),q=!0,K="";function Y(){I.read().then(({done:Z,value:H})=>{if(Z){C.displayRecommendations(K);return}let G=new TextDecoder().decode(H);K+=G,G.split("\n").forEach((F)=>{if(F.startsWith("data: ")){let z=F.slice(6);if(z==="[DONE]")return;try{let U=JSON.parse(z);if(U.chunk)if(q)C.renderMessageOnAIConsole({type:$2.AI_RESPONSE,text:U.chunk}),q=!1;else C.updateLastResponseText(U.chunk)}catch(U){console.error("Error parsing event data:",U)}}}),Y()}).catch((Z)=>{console.error("Error:",Z),C.renderMessageOnAIConsole({type:$2.AI_RESPONSE,text:"Sorry, there was an error getting a response at the moment. Please try again later."})})}Y()}).finally(()=>{this.setAIThinking(!1)})}catch(B){console.error(B),this.renderMessageOnAIConsole({type:$2.AI_RESPONSE,text:"I am getting some brain upgrades at the moment so I am currently offline while I learn some new bits and pieces - I'll be back up shortly!"}),this.setAIThinking(!1)}};displayRecommendations(A=""){let Q=A.split("data:").filter((C)=>C.includes('"recommendations"')),B=[];for(let C=0;C<Q.length;C++)try{let J=JSON.parse(Q[C].trim());if(J.recommendations&&J.recommendations.unique_key&&J.recommendations.unique_key.length){if(J.recommendations.unique_key.map((I)=>{this.triggerWOTWCommonInteraction("recommendation",I.url)}),_1.config.components.brandBar.brand==="harvey-norman"){let I=new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD"});this.renderMessageOnAIConsole({type:$2.PRODUCTS,products:J.recommendations.unique_key.map((q,K)=>{let Y=new URL(q.url),Z=new URLSearchParams(Y.search);Z.set("utm_source","eyekandy"),Z.set("utm_medium","aips"),Z.set("utm_campaign","carousel"),Z.set("utm_content",this.EKControlObject?._config.identifiers.sku||""),Y.search=Z.toString();let H=Y.toString();return B.push(q.title),{title:q.title,price:I.format(q.price),description:q.title,image:q.url_images.split(", ")[0],href:H,recommended:J.recommendations.unique_key.length>1?K===1:K===0}})})}else if(_1.config.components.brandBar.brand==="dell"){let I=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});this.renderMessageOnAIConsole({type:$2.PRODUCTS,products:J.recommendations.unique_key.map((q,K)=>{let Y=new URL(q.url),Z=new URLSearchParams(Y.search);Z.set("utm_source","eyekandy"),Z.set("utm_medium","aips"),Z.set("utm_campaign","carousel"),Z.set("utm_content",this.EKControlObject?._config.identifiers.sku||""),Y.search=Z.toString();let H=Y.toString();return B.push(q.title),{title:q.title||"",price:q.price?I.format(q.price):"",description:q.title||"",image:q.url_images?q.url_images.split(", ")[0]:"",href:H,recommended:J.recommendations.unique_key.length>1?K===1:K===0}})})}break}}catch(J){}this.logEventLegacy("ai-message",B.join(", ")),this.triggerWOTWCommonInteraction("ai-message")}runIntro(){if(this.renderMessageOnAIConsole({type:$2.SALUTATION,text:_1.config.components.localisation.salutation,animationType:"wipe-right"}),setTimeout(()=>{this.renderMessageOnAIConsole({type:$2.HIGHLIGHTED,text:_1.config.components.localisation.introText,animationType:"fade-in"})},750),_1.config.components.brandBar.brand==="dell")setTimeout(()=>{this.renderMessageOnAIConsole({type:$2.BRAND_BAR,animationType:"fade-in"})},800);setTimeout(()=>{this.renderMessageOnAIConsole({type:$2.INFO,text:_1.config.components.localisation.smallText})},2500),setTimeout(()=>{let Q=_1.config.components.localisation.prompts.filter((J)=>J.alwaysShow).map((J)=>J.text).slice();for(let J=Q.length-1;J>0;J--){let I=Math.floor(Math.random()*(J+1));[Q[J],Q[I]]=[Q[I],Q[J]]}let C=_1.config.components.localisation.prompts.filter((J)=>!J.alwaysShow).map((J)=>J.text).slice();for(let J=C.length-1;J>0;J--){let I=Math.floor(Math.random()*(J+1));[C[J],C[I]]=[C[I],C[J]]}this.renderMessageOnAIConsole({type:$2.PROMPTS,prompts:[...Q,...C].slice(0,3)})},2500)}renderMessageOnAIConsole=({type:A=$2.AI_RESPONSE,text:Q="",animationDelay:B=0,products:C=[],prompts:J=[],animationType:I="fade-up"})=>{this.ekAips.addResponse({type:A,text:Q,animationDelay:B,products:C,prompts:J,animationType:I}),this.messages=[...this.messages,{type:A,text:Q,animationDelay:B,products:C,prompts:J,animationType:I}],this.saveState()};updateLastResponseText=async(A)=>{if(!this.messages.length)return;await this.ekAips.AIConsole.updateLastResponseText(A);let Q=this.messages[this.messages.length-1];Q.text=`${Q.text}${A}`,this.saveState()};render(){if(!this.isComponentValidToRender())return this.nullifyComponent("Missing localisations"),null;let A=[this.ekVariant==="tabbed"&&v`<ek-aips-tabbed id="ek-aips"></ek-aips-tabbed>`,this.ekVariant==="black-hole"&&v`<ek-aips-the-black-hole id="ek-aips"></ek-aips-the-black-hole>`].filter(Boolean);return v`<style>
        :host {
          --eky-start-gradient: ${_1.config.components.panel.borderGradientStartColor};
          --eky-end-gradient: ${_1.config.components.panel.borderGradientEndColor};
          --eky-text-start-gradient: ${_1.config.components.panel.textGradientStartColor};
          --eky-text-end-gradient: ${_1.config.components.panel.textGradientEndColor};
        }</style
      >${this.getHostStyleOverride()} ${A} `}}f([a({attribute:!1})],S9.prototype,"EKProps",void 0),f([a({type:String,reflect:!0})],S9.prototype,"ekVariant",void 0),f([X1("#ek-aips")],S9.prototype,"ekAips",void 0),S9=f([z0("ek-aips")],S9);var r1=U0` *,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/*! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;font-family:IntelOneDisplay,ui-sans-serif,system-ui,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-feature-settings:normal;font-variation-settings:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-tap-highlight-color:transparent}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-size:1em;font-variation-settings:normal}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{color:inherit;font-family:inherit;font-feature-settings:inherit;font-size:100%;font-variation-settings:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]:where(:not([hidden=until-found])){display:none}.pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{inset:0}.bottom-0{bottom:0}.bottom-\\[14\\%\\]{bottom:14%}.left-0{left:0}.left-1{left:4px}.left-1\\/2{left:50%}.left-5{left:20px}.left-\\[-136px\\]{left:-136px}.right-0{right:0}.right-1{right:4px}.right-5{right:20px}.right-\\[10px\\]{right:10px}.top-0{top:0}.top-1\\/2{top:50%}.top-20{top:80px}.top-5{top:20px}.top-\\[10px\\]{top:10px}.top-\\[14\\%\\]{top:14%}.top-\\[2px\\]{top:2px}.z-10{z-index:10}.z-\\[1\\]{z-index:1}.z-\\[2\\]{z-index:2}.z-\\[3\\]{z-index:3}.z-\\[99\\]{z-index:99}.z-\\[9\\]{z-index:9}.-mx-4{margin-left:-16px;margin-right:-16px}.mx-4{margin-left:16px;margin-right:16px}.mx-auto{margin-left:auto;margin-right:auto}.my-2{margin-bottom:8px;margin-top:8px}.my-6{margin-bottom:24px;margin-top:24px}.mb-2\\.5{margin-bottom:10px}.mb-3{margin-bottom:12px}.mb-4{margin-bottom:16px}.mb-5{margin-bottom:20px}.mb-6{margin-bottom:24px}.mr-0{margin-right:0}.mr-3{margin-right:12px}.box-border{box-sizing:border-box}.block{display:block}.inline{display:inline}.flex{display:flex}.grid{display:grid}.hidden{display:none}.aspect-square{aspect-ratio:1/1}.h-1\\/2{height:50%}.h-10{height:40px}.h-11{height:44px}.h-12{height:48px}.h-14{height:56px}.h-20{height:80px}.h-3\\/5{height:60%}.h-4{height:16px}.h-40{height:160px}.h-8{height:32px}.h-\\[21px\\]{height:21px}.h-\\[24px\\]{height:24px}.h-full{height:100%}.max-h-full{max-height:100%}.min-h-0{min-height:0}.min-h-\\[540px\\]{min-height:540px}.min-h-full{min-height:100%}.w-1\\/2{width:50%}.w-10{width:40px}.w-11{width:44px}.w-12{width:48px}.w-14{width:56px}.w-20{width:80px}.w-24{width:96px}.w-3\\/4{width:75%}.w-3\\/5{width:60%}.w-4{width:16px}.w-8{width:32px}.w-8\\/12{width:66.666667%}.w-9\\/12{width:75%}.w-\\[24px\\]{width:24px}.w-\\[50px\\]{width:50px}.w-\\[90vw\\]{width:90vw}.w-\\[calc\\(100\\%-9rem\\)\\]{width:calc(100% - 9rem)}.w-auto{width:auto}.w-fit{width:-moz-fit-content;width:fit-content}.w-full{width:100%}.min-w-\\[45px\\]{min-width:45px}.min-w-full{min-width:100%}.min-w-max{min-width:-moz-max-content;min-width:max-content}.max-w-0{max-width:0}.max-w-80{max-width:320px}.max-w-\\[200px\\]{max-width:200px}.max-w-\\[290px\\]{max-width:290px}.max-w-\\[400px\\]{max-width:400px}.max-w-\\[80\\%\\]{max-width:80%}.max-w-\\[90\\%\\]{max-width:90%}.max-w-full{max-width:100%}.max-w-none{max-width:none}.flex-1{flex:1 1 0%}.flex-auto{flex:1 1 auto}.flex-shrink{flex-shrink:1}.flex-shrink-0{flex-shrink:0}.shrink{flex-shrink:1}.shrink-0{flex-shrink:0}.grow{flex-grow:1}.grow-0{flex-grow:0}.-translate-x-1\\/2{--tw-translate-x:-50%}.-translate-x-1\\/2,.-translate-x-20{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-x-20{--tw-translate-x:-80px}.-translate-y-1\\/2{--tw-translate-y:-50%}.-translate-y-10,.-translate-y-1\\/2{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-10{--tw-translate-y:-40px}.translate-y-0{--tw-translate-y:0}.translate-y-0,.translate-y-full{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-full{--tw-translate-y:100%}.-rotate-90{--tw-rotate:-90deg}.-rotate-90,.rotate-90{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-90{--tw-rotate:90deg}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes hotspot{0%{opacity:1;transform:scale(1)}50%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(2.5)}}.animate-hotspot{animation:hotspot 3s cubic-bezier(0,0,.2,1) infinite}@keyframes spin{to{transform:rotate(1turn)}}.animate-spin{animation:spin 1s linear infinite}.cursor-pointer{cursor:pointer}.resize{resize:both}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-start{justify-content:flex-start}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.gap-1{gap:4px}.gap-1\\.5{gap:6px}.gap-10{gap:40px}.gap-2{gap:8px}.gap-2\\.5{gap:10px}.gap-3{gap:12px}.gap-4{gap:16px}.gap-5{gap:20px}.gap-\\[13px\\]{gap:13px}.gap-x-2{-moz-column-gap:8px;column-gap:8px}.gap-x-4{-moz-column-gap:16px;column-gap:16px}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.overflow-y-visible{overflow-y:visible}.overflow-y-scroll{overflow-y:scroll}.truncate{overflow:hidden;white-space:nowrap}.text-ellipsis,.truncate{text-overflow:ellipsis}.whitespace-nowrap{white-space:nowrap}.text-nowrap{text-wrap:nowrap}.rounded{border-radius:4px}.rounded-\\[25px\\]{border-radius:25px}.rounded-\\[28px\\]{border-radius:28px}.rounded-\\[40px\\]{border-radius:40px}.rounded-\\[45px\\]{border-radius:45px}.rounded-\\[4px\\]{border-radius:4px}.rounded-\\[5px\\]{border-radius:5px}.rounded-full{border-radius:9999px}.rounded-b-full{border-bottom-left-radius:9999px;border-bottom-right-radius:9999px}.rounded-t-2xl{border-top-left-radius:16px;border-top-right-radius:16px}.rounded-t-full{border-top-left-radius:9999px;border-top-right-radius:9999px}.border{border-width:1px}.border-2{border-width:2px}.border-\\[\\#2c67af\\]{--tw-border-opacity:1;border-color:rgb(44 103 175/var(--tw-border-opacity,1))}.border-\\[\\#5ac4f8\\]{--tw-border-opacity:1;border-color:rgb(90 196 248/var(--tw-border-opacity,1))}.border-black{--tw-border-opacity:1;border-color:rgb(0 0 0/var(--tw-border-opacity,1))}.bg-\\[\\#22558f\\]{--tw-bg-opacity:1;background-color:rgb(34 85 143/var(--tw-bg-opacity,1))}.bg-\\[\\#2c67af\\]{--tw-bg-opacity:1;background-color:rgb(44 103 175/var(--tw-bg-opacity,1))}.bg-\\[rgba\\(43\\2c 97\\2c 163\\)\\]\\/\\[0\\.85\\]{background-color:rgba(43,97,163,.85)}.bg-black{--tw-bg-opacity:1;background-color:rgb(0 0 0/var(--tw-bg-opacity,1))}.bg-black\\/50{background-color:rgba(0,0,0,.5)}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity,1))}.bg-white\\/\\[90\\%\\]{background-color:hsla(0,0%,100%,.9)}.bg-gradient-to-b{background-image:linear-gradient(to bottom,var(--tw-gradient-stops))}.from-\\[\\#469dea\\]{--tw-gradient-from:#469dea var(--tw-gradient-from-position);--tw-gradient-to:rgba(70,157,234,0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to)}.to-\\[\\#1e4b85\\]{--tw-gradient-to:#1e4b85 var(--tw-gradient-to-position)}.object-cover{-o-object-fit:cover;object-fit:cover}.p-1\\.5{padding:6px}.p-2{padding:8px}.p-3{padding:12px}.p-4{padding:16px}.p-\\[1px\\]{padding:1px}.p-\\[2px\\]{padding:2px}.p-\\[3px\\]{padding:3px}.px-1{padding-left:4px;padding-right:4px}.px-12{padding-left:48px;padding-right:48px}.px-14{padding-left:56px;padding-right:56px}.px-2{padding-left:8px;padding-right:8px}.px-4{padding-left:16px;padding-right:16px}.px-6{padding-left:24px;padding-right:24px}.px-7{padding-left:28px;padding-right:28px}.px-\\[1\\%\\]{padding-left:1%;padding-right:1%}.px-\\[62px\\]{padding-left:62px;padding-right:62px}.px-\\[8px\\]{padding-left:8px;padding-right:8px}.py-10{padding-bottom:40px;padding-top:40px}.py-3{padding-bottom:12px;padding-top:12px}.py-3\\.5{padding-bottom:14px;padding-top:14px}.py-6{padding-bottom:24px;padding-top:24px}.py-\\[30px\\]{padding-bottom:30px;padding-top:30px}.pb-2\\.5{padding-bottom:10px}.pb-\\[142\\%\\]{padding-bottom:142%}.pt-1\\.5{padding-top:6px}.text-center{text-align:center}.text-2xl{font-size:24px;line-height:32px}.text-3xl{font-size:30px;line-height:36px}.text-\\[13px\\]{font-size:13px}.text-\\[14px\\]{font-size:14px}.text-\\[16px\\]{font-size:16px}.text-\\[17px\\]{font-size:17px}.text-\\[20px\\]{font-size:20px}.text-\\[26px\\]{font-size:26px}.text-\\[8px\\]{font-size:8px}.text-\\[9px\\]{font-size:9px}.text-lg{font-size:18px;line-height:28px}.text-sm{font-size:14px;line-height:20px}.text-xl{font-size:20px;line-height:28px}.text-xs{font-size:12px;line-height:16px}.font-medium{font-weight:500}.uppercase{text-transform:uppercase}.italic{font-style:italic}.leading-4{line-height:16px}.leading-tight{line-height:1.25}.tracking-wide{letter-spacing:.025em}.text-\\[\\#22558f\\]{--tw-text-opacity:1;color:rgb(34 85 143/var(--tw-text-opacity,1))}.text-\\[\\#2b66af\\]{--tw-text-opacity:1;color:rgb(43 102 175/var(--tw-text-opacity,1))}.text-black{--tw-text-opacity:1;color:rgb(0 0 0/var(--tw-text-opacity,1))}.text-red-400{--tw-text-opacity:1;color:rgb(248 113 113/var(--tw-text-opacity,1))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity,1))}.underline{text-decoration-line:underline}.line-through{text-decoration-line:line-through}.opacity-0{opacity:0}.opacity-25{opacity:.25}.opacity-75{opacity:.75}.shadow{--tw-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px -1px rgba(0,0,0,.1);--tw-shadow-colored:0 1px 3px 0 var(--tw-shadow-color),0 1px 2px -1px var(--tw-shadow-color)}.shadow,.shadow-lg{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color)}.outline{outline-style:solid}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur{--tw-backdrop-blur:blur(8px)}.backdrop-blur,.backdrop-blur-sm{-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-sm{--tw-backdrop-blur:blur(4px)}.backdrop-brightness-50{--tw-backdrop-brightness:brightness(.5)}.backdrop-brightness-50,.backdrop-brightness-\\[\\.25\\]{-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-brightness-\\[\\.25\\]{--tw-backdrop-brightness:brightness(.25)}.transition{transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-all{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-transform{transition-duration:.15s;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-300{transition-duration:.3s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.\\@container{container-type:inline-size}.\\*\\:transition-transform>*{transition-duration:.15s;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.first-letter\\:uppercase:first-letter{text-transform:uppercase}.after\\:absolute:after{content:var(--tw-content);position:absolute}.after\\:left-1\\/2:after{content:var(--tw-content);left:50%}.after\\:top-full:after{content:var(--tw-content);top:100%}.after\\:h-0:after{content:var(--tw-content);height:0}.after\\:w-0:after{content:var(--tw-content);width:0}.after\\:-translate-x-\\[20px\\]:after{content:var(--tw-content);--tw-translate-x:-20px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.after\\:border-x-\\[20px\\]:after{border-left-width:20px;border-right-width:20px;content:var(--tw-content)}.after\\:border-t-\\[20px\\]:after{border-top-width:20px;content:var(--tw-content)}.after\\:border-white\\/\\[90\\%\\]:after{border-color:hsla(0,0%,100%,.9);content:var(--tw-content)}.after\\:border-x-transparent:after{border-left-color:transparent;border-right-color:transparent;content:var(--tw-content)}.hover\\:scale-105:hover{--tw-scale-x:1.05;--tw-scale-y:1.05;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:\\*\\:scale-110>:hover,.hover\\:scale-110:hover{--tw-scale-x:1.1;--tw-scale-y:1.1}.hover\\:\\*\\:scale-110>:hover,.hover\\:\\*\\:scale-125>:hover,.hover\\:scale-110:hover{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:\\*\\:scale-125>:hover{--tw-scale-x:1.25;--tw-scale-y:1.25}.active\\:\\*\\:scale-100>:active{--tw-scale-x:1;--tw-scale-y:1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@container (min-width: 512px){.\\@lg\\:h-\\[200px\\]{height:200px}.\\@lg\\:w-\\[200px\\]{width:200px}}@container (min-width: 576px){.\\@xl\\:h-\\[250px\\]{height:250px}.\\@xl\\:w-\\[250px\\]{width:250px}}@container (min-width: 672px){.\\@2xl\\:left-1\\/2{left:50%}.\\@2xl\\:block{display:block}.\\@2xl\\:hidden{display:none}.\\@2xl\\:h-28{height:112px}.\\@2xl\\:h-\\[300px\\]{height:300px}.\\@2xl\\:h-auto{height:auto}.\\@2xl\\:w-11\\/12{width:91.666667%}.\\@2xl\\:w-28{width:112px}.\\@2xl\\:w-56{width:224px}.\\@2xl\\:w-\\[300px\\]{width:300px}.\\@2xl\\:min-w-0{min-width:0}.\\@2xl\\:max-w-48{max-width:192px}.\\@2xl\\:max-w-\\[300px\\]{max-width:300px}.\\@2xl\\:max-w-none{max-width:none}.\\@2xl\\:flex-1{flex:1 1 0%}.\\@2xl\\:-translate-x-1\\/2{--tw-translate-x:-50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\\@2xl\\:flex-row{flex-direction:row}.\\@2xl\\:justify-center{justify-content:center}.\\@2xl\\:gap-4{gap:16px}.\\@2xl\\:rounded-t-2xl{border-top-left-radius:16px;border-top-right-radius:16px}.\\@2xl\\:p-8{padding:32px}.\\@2xl\\:px-12{padding-left:48px;padding-right:48px}.\\@2xl\\:text-3xl{font-size:30px;line-height:36px}.\\@2xl\\:text-4xl{font-size:36px;line-height:36px}.\\@2xl\\:text-5xl{font-size:48px;line-height:1}.\\@2xl\\:text-base{font-size:16px;line-height:24px}}@media (min-width:640px){.sm\\:left-\\[-20px\\]{left:-20px}.sm\\:left-\\[0px\\]{left:0}.sm\\:top-\\[-77px\\]{top:-77px}.sm\\:z-\\[1\\]{z-index:1}.sm\\:flex{display:flex}.sm\\:w-\\[80vw\\]{width:80vw}.sm\\:flex-col{flex-direction:column}.sm\\:pb-\\[56\\.25\\%\\]{padding-bottom:56.25%}}@media (min-width:768px){.md\\:text-\\[21px\\]{font-size:21px}.md\\:text-base{font-size:16px;line-height:24px}}.\\[\\&\\>\\*\\:first-child\\]\\:rounded-lg>:first-child{border-radius:8px}.\\[\\&\\>\\*\\:first-child\\]\\:border-4>:first-child{border-width:4px}.\\[\\&\\>\\*\\:first-child\\]\\:border-\\[\\#2c67af\\]>:first-child{--tw-border-opacity:1;border-color:rgb(44 103 175/var(--tw-border-opacity,1))}.\\[\\&\\>\\*\\:first-child\\]\\:border-transparent>:first-child{border-color:transparent}.\\[\\&\\>\\*\\:first-child\\]\\:transition-all>:first-child{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.\\[\\&\\>\\*\\:first-child\\]\\:hover\\:border-\\[\\#5ac4f8\\]:hover>:first-child{--tw-border-opacity:1;border-color:rgb(90 196 248/var(--tw-border-opacity,1))} `;class aY extends y0{static styles=[r1,U0`
      :host {
        display: inline-block;
      }

      button,
      a {
        border-radius: 100px;
        box-shadow: 0px 3px 6px 0px rgba(0, 0, 0, 0.25);
        padding: 4px 12px;
        font-family: Inter;
        font-size: 12px;
        font-style: normal;
        font-weight: 500;
        line-height: normal;
        white-space: nowrap;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .primary {
        background-color: var(--brand-color);
        color: var(--white);
        fill: var(--white);
      }

      .secondary {
        background-color: var(--light-grey);
        color: var(--dark-grey);
      }

      .text-large {
        font-size: 14px;
      }

      .bold {
        font-weight: 600;
      }

      .rounded {
        border-radius: 50%;
        padding: 4px;
      }
    `];constructor(){super();this.type="primary",this.rounded=!1,this.size="24px",this.text="medium"}handleClick(A){if(this.onClick)this.onClick(A)}render(){return this.href?v`<a
          target="_blank"
          href=${this.href}
          title="${this.title}"
          class="${this.type} text-${this.text} ${this.bold?"bold":""} ${this.rounded?"rounded":""}"
          style="${this.rounded?`width:${this.size};height:${this.size}`:""}"
          @click="${this.handleClick}"
        >
          <slot></slot>
        </a>`:v`<button
          title="${this.title}"
          class="${this.type} text-${this.text} ${this.bold?"bold":""} ${this.rounded?"rounded":""}"
          style="${this.rounded?`width:${this.size};height:${this.size}`:""}"
          @click="${this.handleClick}"
        >
          <slot></slot>
        </button>`}}f([a({type:String})],aY.prototype,"href",void 0),f([a({type:Function})],aY.prototype,"onClick",void 0),f([a({type:String})],aY.prototype,"type",void 0),f([a({type:Boolean})],aY.prototype,"rounded",void 0),f([a({type:Boolean})],aY.prototype,"bold",void 0),f([a({type:String})],aY.prototype,"text",void 0),f([a({type:String})],aY.prototype,"size",void 0),aY=f([z0("ek-aips-button")],aY);var X7=v`<svg
  xmlns="http://www.w3.org/2000/svg"
  width="16"
  height="16"
  viewBox="0 0 16 16"
  fill="none"
>
  <mask
    id="mask0_1003_5208"
    style="mask-type:alpha"
    maskUnits="userSpaceOnUse"
    x="0"
    y="0"
    width="16"
    height="16"
  >
    <rect x="0.800049" y="0.800171" width="14.4" height="14.4" fill="#D9D9D9" />
  </mask>
  <g mask="url(#mask0_1003_5208)">
    <path
      d="M3.80012 7.99976L9.63796 1.99976L11.0001 3.39976L6.52445 7.99976L11.0001 12.5998L9.63796 13.9998L3.80012 7.99976Z"
      fill="white"
    />
  </g>
</svg>`,fz=v`<svg
  xmlns="http://www.w3.org/2000/svg"
  width="8"
  height="12"
  viewBox="0 0 8 12"
  fill="none"
>
  <path
    d="M7.60039 6L1.76255 12L0.400391 10.6L4.87607 6L0.40039 1.4L1.76255 -5.9542e-08L7.60039 6Z"
    fill="white"
  />
</svg>`,hz=v`<svg
  xmlns="http://www.w3.org/2000/svg"
  x="0px"
  y="0px"
  width="50"
  height="50"
  viewBox="0 0 50 50"
>
  <path
    d="M 25 5 C 14.351563 5 5.632813 13.378906 5.054688 23.890625 C 5.007813 24.609375 5.347656 25.296875 5.949219 25.695313 C 6.550781 26.089844 7.320313 26.132813 7.960938 25.804688 C 8.601563 25.476563 9.019531 24.828125 9.046875 24.109375 C 9.511719 15.675781 16.441406 9 25 9 C 29.585938 9 33.699219 10.925781 36.609375 14 L 34 14 C 33.277344 13.988281 32.609375 14.367188 32.246094 14.992188 C 31.878906 15.613281 31.878906 16.386719 32.246094 17.007813 C 32.609375 17.632813 33.277344 18.011719 34 18 L 40.261719 18 C 40.488281 18.039063 40.71875 18.039063 40.949219 18 L 44 18 L 44 8 C 44.007813 7.460938 43.796875 6.941406 43.414063 6.558594 C 43.03125 6.175781 42.511719 5.964844 41.96875 5.972656 C 40.867188 5.988281 39.984375 6.894531 40 8 L 40 11.777344 C 36.332031 7.621094 30.964844 5 25 5 Z M 43.03125 23.972656 C 41.925781 23.925781 40.996094 24.785156 40.953125 25.890625 C 40.488281 34.324219 33.558594 41 25 41 C 20.414063 41 16.304688 39.074219 13.390625 36 L 16 36 C 16.722656 36.011719 17.390625 35.632813 17.753906 35.007813 C 18.121094 34.386719 18.121094 33.613281 17.753906 32.992188 C 17.390625 32.367188 16.722656 31.988281 16 32 L 9.71875 32 C 9.507813 31.96875 9.296875 31.96875 9.085938 32 L 6 32 L 6 42 C 5.988281 42.722656 6.367188 43.390625 6.992188 43.753906 C 7.613281 44.121094 8.386719 44.121094 9.007813 43.753906 C 9.632813 43.390625 10.011719 42.722656 10 42 L 10 38.222656 C 13.667969 42.378906 19.035156 45 25 45 C 35.648438 45 44.367188 36.621094 44.945313 26.109375 C 44.984375 25.570313 44.800781 25.039063 44.441406 24.636719 C 44.078125 24.234375 43.570313 23.996094 43.03125 23.972656 Z"
  ></path>
</svg>`,xz=v`<svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 512 512"
>
  <path
    d="M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"
  />
</svg>`;class rY extends y0{static styles=[r1];handleRefresh(A){if(this.onRefresh)A.stopPropagation(),this.onRefresh()}handleCompact(A){if(this.onCompact)A.stopPropagation(),this.onCompact()}render(){return v`<div class="flex gap-2 w-full justify-end p-4 z-10">
      ${this.hasCompactMode?v`<ek-aips-button
            .onClick="${(A)=>this.handleCompact(A)}"
            rounded
            title="Comapct"
            >${xz}</ek-aips-button
          >`:null}
      <ek-aips-button
        .onClick="${(A)=>this.handleRefresh(A)}"
        rounded
        title="Refresh"
        >${hz}</ek-aips-button
      >
    </div>`}}f([a({type:Function})],rY.prototype,"onRefresh",void 0),f([a({type:Function})],rY.prototype,"onCompact",void 0),f([a({type:Boolean})],rY.prototype,"hasCompactMode",void 0),rY=f([z0("ek-aips-chat-window-header")],rY);var gz=Hq(BY(),1);var tY=250;class eY extends y0{constructor(){super(...arguments);this.recommendations=[];this.locale="en-US";this.currency="USD";this.showLeftButton=!1;this.showRightButton=!1}static styles=[r1,U0`
      .carousel-container {
        scroll-snap-type: x mandatory;
        scroll-padding-inline-start: 16px;
        scroll-behavior: smooth;
        overflow: scroll;
        scrollbar-width: none;
      }

      .carousel-container::-webkit-scrollbar {
        display: none;
      }

      .recommendation-card {
        border-radius: 12px;
        background: #101010;
        box-shadow: 6px 6px 12px 0px rgba(0, 0, 0, 0.12);
        overflow: hidden;
        width: ${tY}px;
        flex-shrink: 0;
        scroll-snap-align: start;
      }

      .recommendation-image {
        background-repeat: no-repeat;
        background-size: contain;
        background-position: center;
        height: 188px;
        box-shadow: 6px 6px 12px 0px rgba(0, 0, 0, 0.12);
        background-color: #fff;
      }

      .recommendation-flag {
        border-radius: 0px 3px 12px 0px;
        box-shadow: 0px 3px 6px 0px rgba(0, 0, 0, 0.25);
        color: var(--white);
        padding: 4px 12px;
        font-family: Inter;
        font-size: 14px;
        font-style: normal;
        font-weight: 600;
        line-height: normal;
      }

      .recommendation-recommended {
        background: var(--brand-color);
      }

      .recommendation-deal-text {
        background: var(--red);
      }

      .recommendation-detail {
        color: var(--white);
        font-family: Inter;
        font-size: 14px;
        font-style: normal;
        font-weight: 500;
        height: 129px;
      }

      .recommendation-title {
        font-weight: 600;
      }

      .recommendation-deal-price {
        color: var(--red);
      }
    `];handleScrollLeft(){if(this.carouselContainer){let A=this.carouselContainer.scrollLeft;this.carouselContainer.scrollLeft=A-tY}}handleScrollRight(){if(this.carouselContainer){let A=this.carouselContainer.scrollLeft;this.carouselContainer.scrollLeft=A+tY}}handleScroll(){if(this.carouselContainer){let A=this.carouselContainer.scrollLeft,Q=this.carouselContainer.scrollWidth,B=this.carouselContainer.clientWidth;this.showLeftButton=A>16,this.showRightButton=A+B+16<Q}}firstUpdated(A){if(super.firstUpdated(A),this.carouselContainer)this.handleScroll(),this.carouselContainer.addEventListener("scroll",()=>this.handleScroll())}disconnectedCallback(){if(super.disconnectedCallback(),this.carouselContainer)this.carouselContainer.removeEventListener("scroll",()=>this.handleScroll())}render(){return v`<div class="relative">
      <div
        class="carousel-container flex gap-x-4 overflow-x-auto overflow-y-visible -mx-4 px-4 pb-2.5 relative"
      >
        ${this.recommendations.map((A,Q)=>{let B=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency}),C=A.products.length,J=A.products.reduce((I,q)=>q.price<I.price?q:I);return v`<div class="recommendation-card">
            <div
              class="recommendation-image"
              style="background-image:url(${A.image})"
            >
              <div class="flex flex-col pt-1.5 gap-1.5 items-start">
                ${Q===0?v`<div
                      class="recommendation-flag recommendation-recommended shrink-0 w-auto"
                    >
                      Recommended
                    </div>`:null}
                ${C===1&&J.deal_text?v`<div
                      class="recommendation-flag recommendation-deal-text shrink-0 w-auto"
                    >
                      ${J.deal_text}
                    </div>`:null}
              </div>
            </div>

            <div class="p-3 recommendation-detail flex flex-col h-full">
              <div
                class="recommendation-title text-ellipsis text-nowrap w-full overflow-hidden leading-tight"
              >
                ${A.title}
              </div>
              <div
                class="text-ellipsis text-nowrap w-full overflow-hidden leading-tight"
              >
                ${A.short_description}
              </div>
              <div
                class="leading-tight ${C===1&&J.deal_price?"line-through":""}"
              >
                ${C>1?"From ":""}${B.format(J.price)}
              </div>
              ${C===1&&J.deal_price?v`<div class="leading-tight recommendation-deal-price">
                    ${B.format(J.deal_price)}
                  </div>`:null}
              <div class="grow shrink"></div>
              <div>
                <ek-aips-button
                  text="large"
                  bold
                  .onClick=${(I)=>this.onMoreInfo?this.onMoreInfo(I,A):null}
                >
                  More info
                </ek-aips-button>
              </div>
            </div>
          </div>`})}
      </div>

      ${this.showLeftButton?v`<ek-aips-button
            class="absolute top-1/2 transform -translate-y-1/2 left-0"
            rounded
            .onClick=${()=>this.handleScrollLeft()}
            >${X7}</ek-aips-button
          >`:null}
      ${this.showRightButton?v`<ek-aips-button
            class="absolute top-1/2 transform -translate-y-1/2 right-0"
            rounded
            .onClick=${()=>this.handleScrollRight()}
            >${fz}</ek-aips-button
          >`:null}
    </div>`}}f([a({type:Array})],eY.prototype,"recommendations",void 0),f([a({type:String})],eY.prototype,"locale",void 0),f([a({type:String})],eY.prototype,"currency",void 0),f([a({type:Boolean})],eY.prototype,"showLeftButton",void 0),f([a({type:Boolean})],eY.prototype,"showRightButton",void 0),f([a({type:Function})],eY.prototype,"onMoreInfo",void 0),f([X1(".carousel-container")],eY.prototype,"carouselContainer",void 0),eY=f([z0("ek-aips-recommendations-carousel")],eY);class d6 extends y0{constructor(){super(...arguments);this.history=[];this.locale="en-US";this.currency="USD"}static styles=[r1,U0`
      button[data-event],
      a {
        text-decoration: underline;
      }

      .history-wrapper > *:last-child {
        padding-bottom: 15px;
      }

      .history-wrapper > *:first-child {
        padding-top: 15px;
      }

      .scroll-container {
        scrollbar-width: none;
        -ms-overflow-style: none;
      }

      .scroll-container::-webkit-scrollbar {
        display: none;
      }

      .message {
        padding: 12px 16px;
        max-width: 75%;
        border-radius: 12px;
        font-family: Inter;
        font-size: 14px;
        font-style: normal;
        font-weight: 500;
        line-height: 20px;
      }

      .welcome-message {
        font-size: 24px;
        line-height: normal;
      }

      .smallprint-message {
        color: var(--white);
        font-size: 12px;
        padding: 0;
        border-radius: 0;
      }

      .human-message {
        color: var(--white);
        background-color: #101010;
        border-bottom-right-radius: 3px;
      }

      .ai-message {
        color: var(--white);
        background-color: var(--brand-color);
        border-bottom-left-radius: 3px;
      }

      .thinking {
        animation: thinking ease-in-out 1s infinite alternate;
        box-shadow: 0 0 1px rgba(0, 0, 0, 0.05);
      }

      @keyframes thinking {
        0% {
          width: 24px;
        }
        50% {
          width: 72px;
        }
        100% {
          width: 24px;
        }
      }
    `];static converter=new gz.default.Converter({simplifiedAutoLink:!0,openLinksInNewWindow:!0});resizeObserver=null;renderWelcomeMessage(A){return v`<div class="flex flex-col w-full items-start">
      <div class="message ai-message welcome-message">
        ${K2(d6.converter.makeHtml(A))}
      </div>
    </div>`}renderSmallPrintMessage(A){return v`<div class="flex flex-col w-full items-start">
      <div class="message smallprint-message">
        ${K2(d6.converter.makeHtml(A))}
      </div>
    </div>`}renderHumanMessage(A,Q=void 0){return v`<div class="flex flex-col w-full items-end">
      <div class="message human-message">
        ${K2(d6.converter.makeHtml(A))}
      </div>
      ${Q?v`<div class="text-xs text-red-400">${Q}</div>`:null}
    </div>`}renderAiMessage(A,Q=void 0){return v`<div class="flex flex-col w-full items-start">
      <div class="message ai-message ${A?"":"thinking"}">
        ${K2(d6.converter.makeHtml(A??""))}
      </div>
      ${Q?v`<div class="text-xs text-red-400">${Q}</div>`:null}
    </div>`}renderRecommendations(A){return v`<ek-aips-recommendations-carousel
      .recommendations=${A}
      .onMoreInfo=${(Q,B)=>this.onMoreInfo?this.onMoreInfo(Q,B):null}
      locale=${this.locale}
      currency=${this.currency}
    ></ek-aips-recommendations-carousel>`}renderFeedback(){return v`<div class="flex gap-x-2">
      <strong>Feedback</strong>
      <button>Positive</button>
      <button>Negative</button>
    </div>`}firstUpdated(){if(this.historyWrapper)this.resizeObserver=new ResizeObserver((A)=>{A.forEach((Q)=>{setTimeout(()=>this.scrollToBottom(),100)})}),this.resizeObserver.observe(this.historyWrapper)}scrollToBottom(){if(this.scrollContainer&&this.historyWrapper)this.scrollContainer.scrollTo({top:this.historyWrapper.scrollHeight,behavior:"smooth"})}disconnectedCallback(){if(super.disconnectedCallback(),this.resizeObserver)this.resizeObserver.disconnect()}render(){return v`<div class="h-full overflow-y-scroll scroll-container">
      <div
        class="flex flex-col min-h-full justify-end gap-3 px-4 history-wrapper history-wrapper"
      >
        ${this.history.map((A)=>{if(A.type==="WELCOME")return this.renderWelcomeMessage(A.message);else if(A.type==="SMALLPRINT")return this.renderSmallPrintMessage(A.message);else if(A.type==="HUMAN")return this.renderHumanMessage(A.message,A.error);else if(A.type==="AI")return this.renderAiMessage(A.message,A.error);else if(A.type==="RECOMMENDATIONS")return this.renderRecommendations(A.recommendations);else if(A.type==="FEEDBACK")return this.renderFeedback();return null})}
      </div>
    </div>`}}f([a({type:Array})],d6.prototype,"history",void 0),f([a({type:Function})],d6.prototype,"onMoreInfo",void 0),f([a({type:String})],d6.prototype,"locale",void 0),f([a({type:String})],d6.prototype,"currency",void 0),f([X1(".history-wrapper")],d6.prototype,"historyWrapper",void 0),f([X1(".scroll-container")],d6.prototype,"scrollContainer",void 0),d6=f([z0("ek-aips-chat-window-history")],d6);class AZ extends y0{constructor(){super(...arguments);this.compactMode=!0;this.includeSuggestions=!0;this.suggestionsMinWidth="100%";this.showSuggestions=!0}static styles=[r1,U0`
      .input-wrapper {
        line-height: 0;
      }

      textarea,
      .compact-overlay-wrapper {
        padding: 15px 16px;
        line-height: 20px;
        margin: 0;
        color: var(--white);
        font-family: Inter;
        font-size: 14px;
        font-style: normal;
        font-weight: 500;
        border-radius: 30px;
        outline: none;
        background-color: transparent;
      }

      textarea {
        border: 2px solid var(--brand-color);
        resize: none;
        caret-color: var(--brand-color);
      }

      textarea::-webkit-scrollbar {
        display: none;
      }

      .compact-overlay-wrapper {
        position: absolute;
        inset: 1px;
        background-color: #fff;
      }

      .compact-overlay {
        position: absolute;
      }

      .compact-overlay {
        opacity: 0;
        animation: none;
      }

      .compact-overlay-active {
        animation-name: fade-in-out;
        animation-duration: 4s;
      }

      @keyframes fade-in-out {
        0%,
        100% {
          opacity: 0;
        }
        30%,
        70% {
          opacity: 1;
        }
      }

      .compact-overlay-active::after {
        content: " ";
        width: 3px;
        height: 24px;
        background-color: var(--brand-color);
        border-radius: 3px;
        position: absolute;
        top: -2px;
        display: block;
        animation-name: caret-slide;
        animation-duration: 4s;
        animation-iteration-count: infinite;
      }

      @keyframes caret-slide {
        0%,
        100% {
          left: -3%;
        }
        50% {
          left: 103%;
        }
      }

      .send-button {
        width: 52px;
        height: 52px;
        background-color: var(--brand-color);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0px 3px 6px 0px rgba(0, 0, 0, 0.25);
      }

      .send-button > svg {
        width: 70%;
        height: 70%;
      }
    `];promptIdx=0;sendMessage(A){let Q=this.input?.value;if(Q&&this.onSend){if(this.onSend(A,Q,!1),this.input)this.input.value="",this.autoResize(A)}}sendPrompt(A,Q){if(this.onSend)this.onSend(A,Q,!0)}autoResize(A){let Q=A.target;Q.style.height="auto";let B=window.getComputedStyle(Q),C=parseInt(B.borderTopWidth),J=parseInt(B.borderBottomWidth),q=5*parseInt(B.lineHeight),K=Q.scrollHeight+C+J;if(Q.style.height=Math.min(K,q)+"px",Q.selectionStart===Q.value.length&&Q.scrollHeight>Q.clientHeight)Q.scrollTop=Q.scrollHeight}handleEnter(A){if(A.key==="Enter")A.preventDefault(),this.sendMessage(A)}connectedCallback(){if(super.connectedCallback(),(this.compactPrompts||[]).length)setInterval(()=>{this.promptIdx=(this.promptIdx+1)%this.compactPrompts.length,this.requestUpdate()},4000)}render(){return v`<div>
      ${this.prompts?.length&&this.includeSuggestions?v`<div style="width: ${this.suggestionsMinWidth}">
            <ek-aips-button
              type="primary"
              class="mb-3"
              .onClick="${()=>this.showSuggestions=!this.showSuggestions}"
              >${this.showSuggestions?"Hide suggestions":"Show suggestions"}</ek-aips-button
            >
            ${this.showSuggestions?v`<div class="flex gap-2.5 flex-wrap mb-3">
                  ${this.prompts.map((A)=>v`<ek-aips-button
                        type="secondary"
                        .onClick="${(Q)=>this.sendPrompt(Q,A)}"
                        >${A}</ek-aips-button
                      >`)}
                </div>`:null}
          </div>`:""}
      <div class="flex gap-2.5">
        <div class="grow input-wrapper relative">
          <textarea
            class="w-full"
            rows="1"
            @input=${this.autoResize}
            @keydown=${this.handleEnter}
            placeholder="Ask a question"
          ></textarea>
          ${this.compactMode&&this.compactPrompts.length?v`<div class="compact-overlay-wrapper">
                ${this.compactPrompts?.map((A,Q)=>v`<div
                      class="compact-overlay ${this.promptIdx===Q?"compact-overlay-active":""}"
                    >
                      ${A}
                    </div>`)}
                <div class="brand-caret"></div>
              </div>`:null}
        </div>

        <div class="grow-0 shrink-0 flex items-end">
          <button
            class="p-2 send-button"
            role="button"
            aria-label="Send message"
            @click=${this.sendMessage}
          >
            <svg
              width="48"
              height="48"
              viewBox="12 14 24 20"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g id="Send 1">
                <path
                  id="send"
                  d="M13.2 33.6V14.4L36 24L13.2 33.6ZM15.6 30L29.82 24L15.6 18V22.2L22.8 24L15.6 25.8V30Z"
                  fill="white"
                />
              </g>
            </svg>
          </button>
        </div>
      </div>
    </div>`}}f([a({type:Function})],AZ.prototype,"onSend",void 0),f([a({type:Array})],AZ.prototype,"prompts",void 0),f([a({type:Array})],AZ.prototype,"compactPrompts",void 0),f([a({type:Boolean})],AZ.prototype,"compactMode",void 0),f([a({type:Boolean})],AZ.prototype,"includeSuggestions",void 0),f([a({type:String})],AZ.prototype,"suggestionsMinWidth",void 0),f([K0()],AZ.prototype,"showSuggestions",void 0),f([X1("textarea")],AZ.prototype,"input",void 0),AZ=f([z0("ek-aips-chat-window-new-message")],AZ);class QZ extends y0{constructor(){super(...arguments);this.onClose=()=>null}static styles=[r1,U0`
      .header {
        display: inline-block;
        padding: 12px 16px;
        border-radius: 12px;
        font-family: Inter;
        font-size: 24px;
        font-style: normal;
        font-weight: 500;
        line-height: 20px;
        color: var(--white);
        background-color: var(--brand-color);
        border-bottom-left-radius: 3px;
      }

      p {
        color: var(--dark-grey);
        font-family: Inter;
        font-size: 14px;
        font-style: normal;
        font-weight: 500;
        line-height: normal;
        margin-bottom: 14px;
      }

      a {
        color: var(--dark-grey);
        text-decoration-line: underline;
        text-decoration-style: solid;
        text-decoration-skip-ink: none;
        text-decoration-thickness: auto;
        text-underline-offset: auto;
        text-underline-position: from-font;
      }

      .close-button {
        width: 24px;
        height: 24px;
        background-color: var(--brand-color);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0px 3px 6px 0px rgba(0, 0, 0, 0.25);
        position: absolute;
        top: 16px;
        right: 16px;
      }

      .close-button > svg {
        width: 60%;
        height: 60%;
      }
    `];render(){return v`<div
      class="absolute top-0 left-0 w-full h-full bg-white p-4 overflow-y-auto"
    >
      <div class="flex">
        <div class="grow">
          <div class="header mb-4">Transparency Statement</div>
        </div>
        <ek-aips-button .onClick="${()=>this.onClose()}" rounded title="Back"
          >${X7}</ek-aips-button
        >
      </div>
      <div>
        <p>
          I am a Virtual Assistant, powered by AI. I can help you with questions
          about products on this website.
        </p>
        <p>
          If you do not want to be monitored or recorded, please do not interact
          with me. I am still learning and sometimes my answers may lack context
          or may not contain all data that you might be seeking, so please also
          review the information and check before making a purchase decision.
        </p>
        <p>
          At this time, I can only answer questions about a limited number of
          products. Any information you share with me may be used to train me
          and improve my responses, and may be shared with other parties for
          support, or other uses related to me.
        </p>
        <p>
          Please do not share personal information, such as your name or any
          other information that could be used to identify you. See our
          <a href="https://www.eyekandy.com/privacy" target="_blank"
            >privacy policy</a
          >
          for more information.
        </p>
      </div>
    </div>`}}f([a({type:Function})],QZ.prototype,"onClose",void 0),QZ=f([z0("ek-aips-transparency-statement")],QZ);class BZ extends y0{constructor(){super(...arguments);this.onClose=()=>null;this.options=[];this.locale="en-US";this.currency="USD"}static styles=[r1,U0`
      .header {
        display: inline-block;
        padding: 12px 16px;
        border-radius: 12px;
        font-family: Inter;
        font-size: 24px;
        font-style: normal;
        font-weight: 500;
        line-height: 20px;
        color: var(--white);
        background-color: var(--brand-color);
        border-bottom-left-radius: 3px;
      }

      .small-print {
        color: var(--dark-grey);
        font-size: 12px;
      }

      .card {
        background: var(--white);
        box-shadow: 6px 6px 12px 0px rgba(0, 0, 0, 0.12);
      }

      .icon {
        width: 72px;
        height: 72px;
      }

      .text {
        color: var(--dark-grey);
        font-family: Inter;
        font-size: 14px;
        font-style: normal;
        font-weight: 500;
        line-height: normal;
      }

      .price {
        font-weight: 600;
      }

      .deal-price {
        color: var(--red);
      }
    `];renderCurrysLogo(){return v`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="72"
      height="72"
      viewBox="0 0 72 72"
      fill="none"
    >
      <g clip-path="url(#clip0_928_7021)">
        <path
          d="M72 36C72 55.8821 55.8821 72 36 72C16.1179 72 0 55.8821 0 36C0 16.1179 16.1179 7.20095e-09 36 7.20095e-09C40.7276 -9.45479e-05 45.409 0.931008 49.7767 2.74014C54.1445 4.54928 58.1131 7.20102 61.4561 10.5439C64.799 13.8869 67.4507 17.8555 69.2599 22.2233C71.069 26.591 72.0001 31.2724 72 36Z"
          fill="#4C12A1"
        />
        <path
          d="M62.2637 42.0712C64.6512 42.0712 66.8357 40.5649 66.8357 38.2026C66.8357 36.0916 65.7002 35.1873 63.6605 34.6084L62.6165 34.3081C61.6006 34.0288 60.9245 33.7523 60.9245 33.1245C60.9245 32.6399 61.3421 32.1978 62.1953 32.1978C62.5052 32.1795 62.8133 32.2563 63.0784 32.4179C63.3435 32.5795 63.5528 32.8182 63.6785 33.1021L65.8795 32.0113C65.0897 30.4878 63.492 29.9262 62.1233 29.9262C59.8754 29.9262 58.2547 31.318 58.2547 33.2281C58.2547 35.1383 59.6443 35.9159 61.1506 36.3573L62.5877 36.7741C63.7685 37.1219 64.1119 37.4704 64.1119 38.212C64.1119 39.0904 63.2537 39.5785 62.3033 39.5785C61.2881 39.5785 60.2714 39.022 60.2714 37.978C60.2686 37.8628 60.2772 37.7469 60.2966 37.6324H57.6067C57.5737 37.792 57.5585 37.9547 57.5614 38.1177C57.5614 40.4188 59.5068 42.0705 62.263 42.0705L62.2637 42.0712ZM51.2779 47.1004C52.1041 47.1117 52.9208 46.9239 53.6591 46.553C54.3973 46.182 55.0354 45.6388 55.5194 44.9692C56.14 44.0545 56.4557 42.9672 56.4216 41.8624V30.2063H53.7547V36.9045C53.7547 38.4561 52.7381 39.5461 51.2981 39.5461C49.8581 39.5461 48.8422 38.5302 48.8422 36.9037V30.2063H46.1825V37.0895C46.1825 40.2647 48.4303 42.0712 51.1886 42.0712C52.529 42.0922 53.8251 41.5913 54.803 40.6744V40.8594C54.5878 41.1496 54.3394 41.4138 54.0614 41.6464C54.0614 43.6631 52.8094 44.5674 51.4428 44.5674C50.005 44.5674 49.1719 43.8258 48.9408 42.7595H46.3222C46.3222 44.5984 48.1056 47.1004 51.2801 47.1004H51.2779ZM38.3467 41.794H41.0107V34.8316C41.0157 34.1837 41.2768 33.5641 41.7371 33.1081C42.1974 32.6521 42.8194 32.3968 43.4674 32.398C43.8922 32.3692 44.317 32.4577 44.6964 32.6521V30.0673C44.2935 29.9734 43.8811 29.9265 43.4674 29.9277C42.8196 29.9195 42.1767 30.0403 41.5762 30.2832C40.9756 30.5262 40.4295 30.8862 39.9696 31.3425V31.1567C40.1431 30.8759 40.3714 30.6311 40.6399 30.4381V30.207H38.3539L38.3467 41.794ZM30.3043 41.794H32.969V34.8316C32.974 34.1837 33.2351 33.5641 33.6954 33.1081C34.1557 32.6521 34.7778 32.3968 35.4257 32.398C35.8505 32.3692 36.2753 32.4577 36.6547 32.6521V30.0673C36.2518 29.9735 35.8394 29.9266 35.4257 29.9277C34.7779 29.9191 34.1349 30.0397 33.5343 30.2827C32.9337 30.5256 32.3876 30.8859 31.9279 31.3425V31.1567C32.1014 30.8759 32.3297 30.6311 32.5982 30.4381V30.207H30.3122L30.305 41.7947L30.3043 41.794ZM23.4895 42.0712C24.8058 42.0339 26.0581 41.4951 26.9902 40.5649V40.75C26.8102 41.0603 26.5834 41.3425 26.3191 41.5852V41.794H28.6051V30.2063H25.9411V36.9045C25.9411 38.4561 24.9252 39.5461 23.4823 39.5461C22.0927 39.5461 21.0034 38.5021 21.0034 36.9037V30.2063H18.3487V37.0895C18.3487 40.102 20.3532 42.0712 23.4924 42.0712H23.4895ZM11.8795 42.0712C13.009 42.0829 14.1182 41.7703 15.0754 41.1704C16.0325 40.5706 16.7975 39.7088 17.2795 38.6872L14.9143 37.461C14.3585 38.7102 13.3397 39.5231 11.8666 39.5231C9.94416 39.5231 8.56464 38.0399 8.56464 36.0001C8.56464 33.9604 9.93336 32.4772 11.8666 32.4772C13.3498 32.4772 14.3686 33.2872 14.9143 34.5393L17.2795 33.3102C16.7967 32.2892 16.0316 31.4279 15.0746 30.8282C14.1176 30.2285 13.0088 29.9155 11.8795 29.9262C10.7997 29.9045 9.73363 30.171 8.79111 30.6984C7.84859 31.2257 7.06371 31.9948 6.51732 32.9265C5.97094 33.8581 5.68281 34.9185 5.68262 35.9986C5.68243 37.0786 5.97018 38.1391 6.51624 39.0709C7.06271 40.0027 7.84777 40.7719 8.7905 41.2993C9.73323 41.8267 10.7995 42.0931 11.8795 42.0712Z"
          fill="white"
        />
      </g>
      <defs>
        <clipPath id="clip0_928_7021">
          <rect width="72" height="72" fill="white" />
        </clipPath>
      </defs>
    </svg>`}renderArgosLogo(){return v`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="72"
      height="72"
      viewBox="0 0 72 72"
      fill="none"
    >
      <path
        d="M54.1329 31.2041C53.4612 33.5882 52.1757 35.0482 49.908 35.0321H49.8488C47.3905 34.9677 47.9357 32.2464 48.7237 29.9C49.5966 27.3019 51.0405 26.3471 52.7581 26.3919C55.305 26.4598 54.8123 28.7841 54.1329 31.2041ZM53.6632 23.2018C50.3705 22.9601 46.2247 24.2624 44.4401 29.3829C42.0622 36.2033 46.5974 38.1134 49.3431 38.1945C50.7076 38.2342 55.9374 38.5765 58.1867 31.9847C60.1966 26.0886 56.821 23.4323 53.6632 23.2018ZM13.5684 30.2176H8.2653C11.3772 24.482 13.3575 21.9228 13.3575 21.9228C13.3575 21.9228 13.4646 26.1614 13.5684 30.2176ZM18.157 37.0252C18.157 36.1373 17.2841 18.6776 17.2446 17.9519C17.2053 17.2262 16.3806 17.2501 16.1897 17.2501H13.4894C12.8226 17.2501 11.775 17.6486 10.8771 18.9677C6.74142 25.0467 1.29647 34.6456 0.0862311 37.4278C-0.206785 38.1035 0.334006 38.0573 0.418952 38.0573H3.73357C4.11516 38.0573 4.21385 37.9845 4.3553 37.7098C4.62674 37.1841 5.59665 35.322 6.43543 33.7015H13.6578C13.7097 35.7208 13.75 37.2526 13.7572 37.4752C13.7809 38.2096 14.5563 38.0573 14.5563 38.0573H17.3547C17.6306 38.0573 18.157 37.9114 18.157 37.0252ZM19.7716 38.0573C19.7716 38.0573 18.8595 38.1547 18.9947 37.3667C19.1294 36.5807 21.5654 24.3633 21.5654 24.3633C21.5654 24.3633 21.6801 23.3959 22.4213 23.3959H24.9229C24.9229 23.3959 25.4763 23.444 25.3774 23.9031C25.2782 24.3633 25.1396 25.0692 25.1396 25.0692C25.1396 25.0692 26.6667 23.5162 28.6107 23.3957C30.5553 23.2744 31.3456 23.3957 31.3456 23.3957C31.3456 23.3957 32.1176 23.4558 31.5661 24.1006C31.0144 24.7463 29.9117 26.1049 29.7017 26.4678C29.4911 26.8308 29.197 27.2059 28.7495 27.2059C28.3007 27.2059 25.2782 26.8428 24.5644 30.4722C24.1253 32.703 23.6821 34.933 23.2349 37.1622C23.2349 37.1622 23.1624 38.0565 22.5273 38.0565H19.7712L19.7716 38.0573ZM38.1663 31.6211C37.6045 33.0813 36.4872 35.0513 34.4823 34.8181C31.8064 34.5069 33.2717 30.2906 33.2717 30.2906C33.2717 30.2906 34.3176 26.0217 37.2815 26.3843C39.8776 26.7025 38.6655 30.3203 38.1663 31.6211ZM43.3335 23.5156C43.3335 23.5156 41.9206 23.4981 41.1746 23.4981C40.5017 23.4981 40.2741 25.1288 40.2741 25.1288C40.2741 25.1288 39.7467 23.2567 36.5333 23.2391C33.3876 23.2214 31.3624 26.2047 30.906 27.0239C30.4486 27.8431 29.1483 30.2436 28.9675 33.1933C28.7839 36.2117 30.5151 38.1683 33.5244 38.1881C36.1877 38.2055 37.3182 36.6812 37.3182 36.6812C36.6524 39.3631 35.4118 40.7285 33.3715 41.0223C32.0744 41.208 31.0902 40.486 30.6174 40.1486C30.1673 39.8288 29.44 40.0841 29.2567 40.1486C29.0735 40.2143 27.8445 40.8731 27.5796 41.0747C27.3356 41.2576 27.1067 41.8789 27.4662 42.3411C29.4946 44.9458 32.8286 44.8647 33.6766 44.7867C35.2919 44.64 35.9932 44.36 37.0441 43.7172C39.1332 42.4401 40.2447 39.9939 40.7496 38.7583C41.3443 37.3027 42.4211 32.6079 42.5686 31.966C42.7179 31.3236 44.0423 25.499 44.253 24.6906C44.5562 23.5216 43.3335 23.5156 43.3335 23.5156ZM71.5034 27.0842C71.5034 27.0842 72.3038 26.6451 71.8723 26.0318C71.1227 24.9675 69.7684 23.2775 65.8872 23.3947C61.5547 23.5253 59.7919 26.564 59.864 28.3788C59.9316 30.1373 60.5667 30.8222 62.2446 31.4757C63.7061 32.0452 66.3388 32.2519 66.3388 33.7779C66.3388 34.8265 64.5889 35.2295 64.1161 35.2295C63.6438 35.2295 62.4704 34.9508 61.5376 33.7577C61.1207 33.2253 60.5854 33.2253 60.2678 33.3949C59.9505 33.5643 58.8086 34.0928 58.5221 34.322C58.2373 34.5521 58.1974 35.1084 58.4234 35.6125C58.6502 36.1168 60.1483 38.5354 64.176 38.3943C68.088 38.2583 71.0011 36.388 71.0784 32.9271C71.1221 30.9551 69.5549 29.8664 68.0043 29.322C66.4534 28.7773 64.6605 28.5538 64.6239 27.4106C64.6 26.6608 65.5243 26.2008 66.2791 26.2008C67.0323 26.2008 67.8322 26.7303 68.5514 27.3865C68.976 27.7736 69.2938 28.1727 69.9793 27.8458C70.3384 27.6762 71.5034 27.0842 71.5034 27.0842Z"
        fill="#ED1C24"
      />
      <path
        d="M0.892381 46.513C0.892381 46.513 -0.284266 45.7232 0.0646812 45.2803C0.614063 44.5837 1.47841 45.2446 1.86993 45.3833C2.26106 45.522 17.5201 53.1259 36.9429 52.5454C54.9154 52.007 67.8202 45.567 68.9346 45.2147C69.6609 44.9842 70.3035 44.5567 70.6009 45.021C70.8196 45.3625 70.723 45.7601 70.0656 46.1701C69.4504 46.5525 55.6049 56.6546 35.1936 56.5135C13.771 56.3655 0.892381 46.513 0.892381 46.513Z"
        fill="#ED1C24"
      />
    </svg>`}renderJohnLewisLogo(){return v`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="72"
      height="46"
      viewBox="0 0 72 46"
      fill="none"
    >
      <g clip-path="url(#clip0_890_14115)">
        <path d="M26.5946 45.5H72V0.5H26.5946V45.5Z" fill="black" />
        <path d="M17.5134 45.5H24.6486V0.5H17.5134V45.5Z" fill="black" />
        <path d="M9.08105 45.5H12.3243V0.5H9.08105V45.5Z" fill="black" />
        <path d="M0 45.5H1.94595V0.5H0V45.5Z" fill="black" />
        <path
          d="M37.2359 8.62561H38.0616V13.5184C38.0616 14.0674 38.0311 14.682 37.6328 15.1082C37.4376 15.3113 37.1982 15.4418 36.9161 15.4971C36.9018 15.4855 36.15 14.7379 36.15 14.7379C36.3732 14.7353 36.6067 14.752 36.8181 14.6659C36.966 14.6093 37.0705 14.509 37.1314 14.3657C37.208 14.223 37.2359 13.8938 37.2359 13.4245V8.62561Z"
          fill="white"
        />
        <path
          d="M43.6039 9.32342C42.9436 9.32342 42.4013 9.52785 41.9765 9.93735C41.5516 10.3468 41.3388 10.8695 41.3388 11.5053C41.3388 12.1224 41.5522 12.6348 41.9784 13.0443C42.4046 13.4538 42.9391 13.6582 43.5793 13.6582C44.2234 13.6582 44.7598 13.4493 45.1905 13.0321C45.6212 12.6148 45.8366 12.0948 45.8366 11.4725C45.8366 10.8663 45.6212 10.3571 45.1905 9.94378C44.7598 9.53042 44.2318 9.32342 43.6039 9.32342ZM43.5708 8.5462C44.4627 8.5462 45.2054 8.82585 45.7983 9.38513C46.3912 9.94442 46.6876 10.6458 46.6876 11.4892C46.6876 12.332 46.3879 13.0301 45.7899 13.5823C45.1912 14.1352 44.4368 14.4116 43.5261 14.4116C42.6562 14.4116 41.9317 14.1352 41.3525 13.5823C40.7739 13.0301 40.4833 12.3378 40.4833 11.5053C40.4833 10.6509 40.7758 9.94442 41.359 9.38513C41.9421 8.82585 42.6796 8.5462 43.5708 8.5462Z"
          fill="white"
        />
        <path
          d="M53.3077 11.8563H49.9328V14.3448H49.1064V8.62659H49.9328V11.1164H53.3077V8.62659H54.1335V14.3448H53.3077V11.8563Z"
          fill="white"
        />
        <path
          d="M57.8504 9.94059V14.3448H57.0746V8.62659H57.7433L61.8084 13.0681V8.62659H62.5933V14.3448H61.8824L57.8504 9.94059Z"
          fill="white"
        />
        <path
          d="M34.6837 25.9027V20.8942H33.8508V26.6445H37.4061V25.9027H34.6837Z"
          fill="white"
        />
        <path
          d="M41.0206 25.9027V24.1149H43.7689V23.373H41.0206V21.636H43.8546V20.8942H40.1877V26.6445H43.9311V25.9027H41.0206Z"
          fill="white"
        />
        <path
          d="M48.7468 24.8574L47.1466 20.8942H46.3137L48.6612 26.6953H48.8227L50.7453 21.9902L52.6523 26.6953H52.8138L55.1691 20.8942H54.3446L52.7613 24.8574L51.1442 20.8942H50.3542L48.7468 24.8574Z"
          fill="white"
        />
        <path
          d="M57.6816 26.6444H58.5158V20.8947H57.6816V26.6444Z"
          fill="white"
        />
        <path
          d="M63.2097 24.2491L62.5779 23.8692C62.1822 23.6294 61.9319 23.3902 61.7522 23.1678C61.5647 22.9377 61.4713 22.6548 61.4713 22.3527C61.4713 21.9001 61.6296 21.5317 61.9468 21.2495C62.264 20.9673 62.6862 20.8304 63.1935 20.8304C63.7273 20.8304 64.1217 20.9654 64.5258 21.2347V22.1695C64.1081 21.7709 63.6579 21.571 63.176 21.571C62.9048 21.571 62.6823 21.6333 62.5079 21.758C62.3334 21.8821 62.2464 22.0454 62.2464 22.2395C62.2464 22.4118 62.2886 22.5545 62.4164 22.705C62.5455 22.8554 62.7738 23.0309 63.0592 23.1967L63.7169 23.5683C64.4246 23.9875 64.7548 24.5204 64.7548 25.1677C64.7548 25.6293 64.5939 26.0092 64.2819 26.2966C63.9706 26.5846 63.571 26.7389 63.0728 26.7299C62.5007 26.719 61.9883 26.5615 61.507 26.2002V25.1549C61.9552 25.718 62.4748 25.9874 63.0637 25.9874C63.3245 25.9874 63.5412 25.9276 63.7137 25.7842C63.8869 25.6409 63.9809 25.4609 63.9809 25.2449C63.9809 24.8945 63.7189 24.5628 63.2097 24.2491Z"
          fill="white"
        />
        <path
          d="M34.4385 33.6568C34.4385 33.725 34.4658 33.8041 34.5216 33.8941C34.5773 33.9841 34.6409 34.0618 34.7149 34.1268C34.8245 34.0606 34.9114 33.9924 34.9756 33.9243C35.0405 33.8561 35.0729 33.7758 35.0729 33.6838C35.0729 33.599 35.0431 33.5283 34.9828 33.4717C34.9224 33.4151 34.8452 33.3868 34.7505 33.3868C34.6675 33.3868 34.5936 33.4119 34.5319 33.4627C34.4697 33.5128 34.4385 33.5778 34.4385 33.6568ZM34.0695 35.264C34.0695 35.3636 34.1077 35.4478 34.1849 35.5166C34.2628 35.5848 34.3542 35.6188 34.4606 35.6188C34.6409 35.6188 34.831 35.5327 35.032 35.3598L34.4924 34.7606C34.36 34.8436 34.2569 34.9252 34.1817 35.0049C34.1064 35.084 34.0695 35.1701 34.0695 35.264ZM34.7596 32.9343C34.9996 32.9343 35.2 33.0011 35.3596 33.1361C35.5192 33.2705 35.599 33.4428 35.599 33.6523C35.599 33.8041 35.5516 33.9448 35.4563 34.0753C35.3609 34.2065 35.215 34.3363 35.0191 34.4636L35.4511 34.9586C35.5782 34.8326 35.695 34.6674 35.802 34.4636H36.3728C36.223 34.821 36.031 35.1135 35.7975 35.3424L36.4292 36.0496H35.6437L35.3538 35.7217C35.1949 35.8522 35.0418 35.9467 34.8939 36.0033C34.746 36.0605 34.5696 36.0894 34.3639 36.0894C34.1103 36.0894 33.8969 36.0136 33.7224 35.8618C33.5486 35.7101 33.4617 35.5243 33.4617 35.3045C33.4617 35.1213 33.5246 34.9573 33.6498 34.8127C33.775 34.6674 33.9533 34.5337 34.1836 34.4103C34.074 34.274 33.9942 34.1499 33.943 34.0393C33.8924 33.9288 33.8664 33.8156 33.8664 33.7012C33.8664 33.4743 33.9501 33.2898 34.1181 33.1471C34.2855 33.005 34.4989 32.9343 34.7596 32.9343Z"
          fill="white"
        />
        <path
          d="M39.6081 34.2721C39.7703 34.2721 39.8961 34.2348 39.9876 34.1615C40.0784 34.0882 40.1238 33.9796 40.1238 33.8349C40.1238 33.5482 39.9376 33.4048 39.566 33.4048H39.1515V34.2721H39.6081ZM39.7586 32.9343C40.0531 32.9343 40.2918 33.0191 40.4754 33.1876C40.6589 33.356 40.7511 33.5733 40.7511 33.8394C40.7511 34.1088 40.6583 34.3261 40.4721 34.4932C40.286 34.6597 40.0408 34.742 39.7366 34.742H39.1515V36.0496H38.5437V32.9343H39.7586Z"
          fill="white"
        />
        <path
          d="M42.2876 34.834H43.302L42.7715 33.601L42.2876 34.834ZM43.0802 32.9343L44.4677 36.0496H43.8268L43.5005 35.291H42.1033L41.7998 36.0496H41.1635L42.4588 32.9343H43.0802Z"
          fill="white"
        />
        <path
          d="M46.2725 34.2633C46.4321 34.2633 46.5566 34.2234 46.6475 34.145C46.7383 34.0659 46.7837 33.9586 46.7837 33.8217C46.7837 33.6789 46.7389 33.5722 46.6488 33.5015C46.5586 33.4314 46.4302 33.3954 46.2641 33.3954H45.8859V34.2633H46.2725ZM46.4101 32.9345C46.7058 32.9345 46.9465 33.0155 47.132 33.1775C47.3182 33.3395 47.4109 33.551 47.4109 33.8107C47.4109 33.9875 47.3655 34.1418 47.2728 34.2736C47.1806 34.4047 47.0438 34.5082 46.8622 34.5841C46.9627 34.6374 47.0522 34.7107 47.1301 34.8027C47.2079 34.8946 47.3052 35.0508 47.4206 35.2687C47.612 35.6461 47.7547 35.9064 47.8481 36.0492H47.1709C47.1236 35.981 47.0613 35.8717 46.9815 35.7219C46.8077 35.3902 46.6799 35.1665 46.5988 35.0514C46.5184 34.9364 46.4405 34.8547 46.3653 34.8065C46.2901 34.7583 46.2044 34.7332 46.1065 34.7332H45.8859V36.0492H45.2788V32.9345H46.4101Z"
          fill="white"
        />
        <path
          d="M49.4414 36.0496V33.4048H48.3257V32.9343H51.1648V33.4048H50.0485V36.0496H49.4414Z"
          fill="white"
        />
        <path
          d="M55.1536 36.0496H54.6314L52.7536 33.8394V36.0496H52.1594V32.9343H52.6926L54.5601 35.1084V32.9343H55.1536V36.0496Z"
          fill="white"
        />
        <path
          d="M58.3959 34.2232V34.6931H57.0331V35.5783H58.4886V36.0496H56.4253V32.9343H58.4569V33.4048H57.0331V34.2232H58.3959Z"
          fill="white"
        />
        <path
          d="M60.655 34.2633C60.8139 34.2633 60.9385 34.2234 61.0293 34.145C61.1201 34.0659 61.1655 33.9586 61.1655 33.8217C61.1655 33.6789 61.1208 33.5722 61.0306 33.5015C60.9404 33.4314 60.812 33.3954 60.6459 33.3954H60.2678V34.2633H60.655ZM60.7919 32.9345C61.0877 32.9345 61.3283 33.0155 61.5145 33.1775C61.7 33.3395 61.7934 33.551 61.7934 33.8107C61.7934 33.9875 61.7473 34.1418 61.6546 34.2736C61.5625 34.4047 61.4256 34.5082 61.244 34.5841C61.3445 34.6374 61.4341 34.7107 61.5119 34.8027C61.5897 34.8946 61.687 35.0508 61.8025 35.2687C61.9938 35.6461 62.1365 35.9064 62.2299 36.0492H61.5528C61.506 35.981 61.4431 35.8717 61.3633 35.7219C61.1895 35.3902 61.0624 35.1665 60.9813 35.0514C60.9002 34.9364 60.8224 34.8547 60.7471 34.8065C60.6719 34.7583 60.5863 34.7332 60.4883 34.7332H60.2678V36.0492H59.6606V32.9345H60.7919Z"
          fill="white"
        />
        <path
          d="M64.0528 32.8941C64.359 32.8941 64.6535 32.97 64.9363 33.1217V33.6572C64.6113 33.4624 64.3227 33.3647 64.0704 33.3647C63.9179 33.3647 63.7979 33.3936 63.7123 33.4527C63.626 33.5119 63.5826 33.5897 63.5826 33.688C63.5826 33.8057 63.6624 33.9143 63.8232 34.0133C63.8686 34.0435 64.0412 34.1265 64.3428 34.2634C64.601 34.3836 64.7871 34.5173 64.9013 34.6645C65.0148 34.8117 65.0719 34.9885 65.0719 35.1949C65.0719 35.463 64.9746 35.6783 64.7806 35.8429C64.586 36.0075 64.335 36.0897 64.0256 36.0897C63.8245 36.0897 63.652 36.0679 63.5067 36.0235C63.3627 35.9798 63.2005 35.9046 63.0202 35.7972V35.2045C63.3562 35.4803 63.6727 35.6185 63.9692 35.6185C64.1184 35.6185 64.2377 35.5864 64.3298 35.5227C64.4206 35.4591 64.4667 35.3742 64.4667 35.2688C64.4667 35.1248 64.3875 35.0072 64.2286 34.9165C64.0963 34.8452 63.9264 34.7597 63.7175 34.66C63.4704 34.5482 63.2848 34.4183 63.1629 34.2698C63.0403 34.1213 62.98 33.949 62.98 33.753C62.98 33.4913 63.0779 33.2824 63.2745 33.1268C63.471 32.9719 63.7305 32.8941 64.0528 32.8941Z"
          fill="white"
        />
      </g>
      <defs>
        <clipPath id="clip0_890_14115">
          <rect
            width="72"
            height="45"
            fill="white"
            transform="translate(0 0.5)"
          />
        </clipPath>
      </defs>
    </svg>`}onClick(A,Q){if(this.onVisitSite)this.onVisitSite(A,Q)}render(){return v`<div
      class="absolute top-0 left-0 w-full h-full bg-white p-4 overflow-y-auto"
    >
      <div class="flex">
        <div class="grow mb-4">
          <div class="header mb-2.5">Where to buy</div>
          <div class="small-print">
            The price showing was checked recently but may be higher or lower on
            the retailer&apos;s website
          </div>
        </div>

        <ek-aips-button .onClick="${()=>this.onClose()}" rounded title="Back"
          >${X7}</ek-aips-button
        >
      </div>
      <div class="flex flex-col gap-3">
        ${this.options.map((A)=>{let Q=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency}),B=new URL(A.url),C=null;if(B.hostname==="www.currys.co.uk")C=this.renderCurrysLogo();else if(B.hostname==="www.argos.co.uk")C=this.renderArgosLogo();else if(B.hostname==="www.johnlewis.com")C=this.renderJohnLewisLogo();return v`<div class="p-3 flex card">
            <div class="icon flex justify-center items-center">
              ${C??null}
            </div>
            <div class="flex flex-col grow items-center justify-center price">
              <div class="text">List price</div>
              <div
                class="text price ${A.deal_price?"line-through":""}"
              >
                ${Q.format(A.price)}
              </div>
              ${A.deal_price?v`<div class="text price deal-price">
                    ${Q.format(A.deal_price)}
                  </div>`:null}
            </div>
            <div class="flex items-center">
              <ek-aips-button
                href="${A.url}"
                bold
                text="large"
                .onClick=${(J)=>this.onClick(J,A)}
                >Visit site</ek-aips-button
              >
            </div>
          </div>`})}
      </div>
    </div>`}}f([a({type:Function})],BZ.prototype,"onClose",void 0),f([a({type:Function})],BZ.prototype,"onVisitSite",void 0),f([a({type:Array})],BZ.prototype,"options",void 0),f([a({type:String})],BZ.prototype,"locale",void 0),f([a({type:String})],BZ.prototype,"currency",void 0),BZ=f([z0("ek-aips-where-to-buy")],BZ);var vz="eky-ai-shopper-state";class y9 extends M1{static styles=[r1,U0`
      .main-body {
        border-radius: 24px;
        border: 2px solid var(--brand-color);
      }
    `];sessionId=null;compactModeSettings={enabled:!0,compactWidth:250,width:450,prompts:["Need more info?","I'm here to help","Ask me anything!"]};compactPrompts=["Need more info?","I'm here to help","Ask me anything!"];constructor(A,Q,B,C,J,I,q,K,Y){super(A,Q,B,C,J,I,q,K,Y,!0,"aipsv1");this.compactMode=!0;this.chatHistory=[];this.showTransparencyStatement=!1;this.showWhereToBuy=[]}isComponentValidToRender(){return!0}getSessionId(){if(!this.sessionId)this.sessionId=d3(),this.saveState();return this.sessionId}getPrompts(){return(this.getLocalisations("AIPSV1Localisation").translation_prompts||[]).map((Q)=>Q.message)}getRecommendationsFromResponse(A){let Q=this.EKProps.clientName;if(Q==="amd")return A.map((B)=>({title:B.title,short_description:[B["Processor Tier (CPU)"]||null,B.RAM||null,B.Storage||null].filter(Boolean).map((C)=>C.trim()).join(" / "),image:B.image_url,products:B.products.map((C)=>({url:C.argos_product_url||C.currys_product_url||C.john_lewis_product_url,sku:C.product_code||C.product_code||C.lewis_product_code,price:(C.argos_price||C.currys_price||C.john_lewis_price).replace(",","")}))}));if(Q==="intel_harveyNorman"||Q==="intel_dell")return A.map((B)=>({title:B.title,short_description:"",image:(B.url_images||"").split(", ")[0],products:[{url:B.url,sku:"",price:B.price}]}));return[]}updateChatMessage(A,Q){this.chatHistory=this.chatHistory.map((B)=>B.id===A?{...B,...Q,updated_at:new Date().toISOString()}:B)}sendWelcomeMessages(){if(this.chatHistory.length||this.compactMode)return;let A=this.getLocalisations("AIPSV1Localisation");for(let Q=0;Q<(A.translation_introMessages||[]).length;Q++){let B=A.translation_introMessages[Q];this.chatHistory=[...this.chatHistory,{type:B.type,message:B.message,id:`welcome-${Q}`,show:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]}this.saveState()}async sendMessage(A,Q,B=!1){let C=new URLSearchParams(window.location.search),J=d3(),I=d3();if(typeof window.gtag_report_conversion==="function")window.gtag_report_conversion();if(this.chatHistory=[...this.chatHistory,{type:"HUMAN",message:Q,id:J,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}],this.logEventLegacy("human-message",""),this.triggerWOTWCommonInteraction("human-message"),B)this.logEventLegacy("prompt",Q),this.triggerWOTWCommonInteraction("prompt");this.saveState(),this.chatHistory=[...this.chatHistory,{type:"AI",id:I,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}];try{let q=await fetch(this.EKProps.apiEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:this.getSessionId(),text:Q,stream:!0,filter_sku:C.get("eky-aips-filter-sku")||"",client_name:this.EKProps.clientName||""})});if(!q.ok){this.updateChatMessage(J,{error:"Error connecting to the server",error_at:new Date().toISOString()}),this.saveState();return}if(!q.body){this.updateChatMessage(J,{error:"Error getting body of the response",error_at:new Date().toISOString()}),this.saveState();return}let K=q.body.getReader(),Y=new TextDecoder("utf-8"),Z="",H="";while(!0){let{value:F,done:z}=await K.read();if(z)break;let E=Y.decode(F,{stream:!0}).split("\n");for(let w=0;w<E.length;w++){let L=E[w].trim();if(H=H+L,L.startsWith("data:")){let X=L.substring(5);if(X.trim()==="[DONE]")break;if(X.trim()==="[CONT]"){this.saveState(),I=d3(),this.chatHistory=[...this.chatHistory,{type:"AI",id:I,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}],Z="";break}try{let V=JSON.parse(X);if(typeof V.chunk!=="undefined")Z=Z+V.chunk,this.updateChatMessage(I,{message:Z})}catch(V){j0("e","Error parsing chunk",X)}}}}let G=[],W=H.split("data:").filter((F)=>F.includes('"recommendations"'));if(W.length)for(let F=0;F<W.length;F++)try{let z=W[F],U=JSON.parse(z);if(U.recommendations&&U.recommendations.products_metadata&&U.recommendations.products_metadata.length)G=this.getRecommendationsFromResponse(U.recommendations.products_metadata),this.chatHistory=[...this.chatHistory,{id:d3(),type:"RECOMMENDATIONS",recommendations:G,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]}catch(z){j0("e","Error parsing response",W[0])}this.logEventLegacy("ai-message",G.map((F)=>F.products.map((z)=>`${z.sku}|${z.url}`)).join(",")),this.triggerWOTWCommonInteraction("ai-message")}catch(q){this.updateChatMessage(J,{error:`Unexpected error getting a response: ${q instanceof Error?q.message:"Unknown"}`,error_at:new Date().toISOString()}),j0("e",q)}this.saveState()}saveState(){let A=new Date().getTime()+3600000;localStorage.setItem(vz,JSON.stringify({session_id:this.getSessionId(),chat_history:this.chatHistory,expires_at:A}))}loadState(){let A=localStorage.getItem(vz);if(A)try{let Q=JSON.parse(A);if(Q.expires_at&&Q.expires_at>new Date().getTime())return this.chatHistory=Q.chat_history,this.sessionId=Q.session_id,!0}catch(Q){j0("e",Q)}return!1}refresh(){this.sessionId=null,this.chatHistory=[...[]],this.sendWelcomeMessages(),this.logEventLegacy("refresh",""),this.triggerWOTWCommonInteraction("refresh")}compact(){this.compactMode=!0}getWidth(){if(this.EKProps.compactModeSettings.enabled&&this.compactMode)return`${this.EKProps.compactModeSettings.compactWidth}px`;if(this.EKProps.compactModeSettings.enabled&&!this.compactMode)return`${this.EKProps.compactModeSettings.width}px`;return"100%"}getMinWidth(){return this.EKProps.compactModeSettings.enabled?`${this.EKProps.compactModeSettings.width}px`:"100%"}connectedCallback(){super.connectedCallback(),this.loadInterDisplayFont(),this.loadState(),this.compactMode=this.EKProps.compactModeSettings.enabled,this.sendWelcomeMessages()}handleClick(A){let B=A.composedPath()[0];if(this.compactMode)this.compactMode=!1,this.sendWelcomeMessages();if(this.logEventLegacy("interaction",""),this.triggerWOTWCommonInteraction("interaction"),B&&B.matches('[data-event="open-transparency-statement"]'))this.showTransparencyStatement=!0,this.logEventLegacy("transparency-statement",""),this.triggerWOTWCommonInteraction("transparency-statement")}render(){let A=this.chatHistory.filter((Q)=>Q.type==="HUMAN");return v`
      ${this.getHostStyleOverride()} ${this.getCustomCSSStyles()}
      <style>
        :host {
          --brand-color: ${this.EKProps.colours.brand};
          --white: ${this.EKProps.colours.white};
          --dark-grey: ${this.EKProps.colours.darkGrey};
          --light-grey: ${this.EKProps.colours.lightGrey};
          --red: ${this.EKProps.colours.red};
        }
      </style>
      <div
        class="flex flex-col h-full main-body relative overflow-hidden"
        style="width: ${this.getWidth()}"
        @click="${this.handleClick}"
      >
        ${!this.compactMode?v`
              <ek-aips-chat-window-header
                class="absolute top-0 left-0 right-0 z-10"
                .onRefresh="${()=>this.refresh()}"
                .onCompact="${()=>this.compact()}"
                .hasCompactMode=${this.EKProps.compactModeSettings.enabled}
              ></ek-aips-chat-window-header>
            `:null}

        <ek-aips-chat-window-history
          class="grow min-h-0 overflow-y-auto"
          style="width: ${this.getMinWidth()}"
          .history=${this.chatHistory}
          .minimised=${this.compactMode}
          .hasCompactMode=${this.EKProps.compactModeSettings.enabled}
          .locale=${this.EKProps.locale}
          .currency=${this.EKProps.currency}
          .onMoreInfo=${(Q,B)=>{if(this.EKProps.whereToBuy)this.showWhereToBuy=B.products,this.logEventLegacy("click",B.title),this.triggerWOTWCommonInteraction("click");else window.open(B.products[0].url,"_blank")}}
        ></ek-aips-chat-window-history>

        <ek-aips-chat-window-new-message
          .onSend=${this.sendMessage.bind(this)}
          .prompts=${this.getPrompts()}
          .includeSuggestions=${!A.length&&!this.compactMode}
          .suggestionsMinWidth=${this.getMinWidth()}
          .compactPrompts=${this.compactPrompts}
          .compactMode=${this.compactMode}
          class=${`grow-0 shrink-0 ${this.compactMode?"p-1.5":"p-4"}`}
        ></ek-aips-chat-window-new-message>

        ${this.showTransparencyStatement?v`<ek-aips-transparency-statement
              class="z-10"
              .onClose=${()=>this.showTransparencyStatement=!1}
            ></ek-aips-transparency-statement>`:null}
        ${this.showWhereToBuy.length?v`<ek-aips-where-to-buy
              class="z-10"
              .onClose=${()=>this.showWhereToBuy=[]}
              .options=${this.showWhereToBuy}
              .locale=${this.EKProps.locale}
              .currency=${this.EKProps.currency}
              .onVisitSite=${(Q,B)=>{this.logEventLegacy("add-to-cart",`${B.sku}|${B.url}`),this.triggerWOTWCommonInteraction("add-to-cart")}}
            ></ek-aips-where-to-buy>`:null}
      </div>
    `}}f([a({attribute:!1})],y9.prototype,"EKProps",void 0),f([K0()],y9.prototype,"compactMode",void 0),f([K0()],y9.prototype,"chatHistory",void 0),f([K0()],y9.prototype,"showTransparencyStatement",void 0),f([K0()],y9.prototype,"showWhereToBuy",void 0),f([X1("ek-aips-chat-window-history")],y9.prototype,"chatWindowHistory",void 0),y9=f([z0("ek-aips-v1")],y9);class c6{arid;environment;service;MODEL_CDN_BASE_URLS;THREE_DFW_PLAYER_BASE_URLS;SERVICE_AR_ASSISTANT;constructor(A,Q="dev",B){this.arid=A||null,this.environment="dev",this.MODEL_CDN_BASE_URLS={dev:"https://eyekandy-model-staging.s3.eu-west-2.amazonaws.com",prod:"https://d15mv1adrb1s6e.cloudfront.net/product_bundles"},this.THREE_DFW_PLAYER_BASE_URLS={dev:"https://3d-player-dev.pointandplace.com/view/",prod:"https://3d-player.pointandplace.com/view/"},this.SERVICE_AR_ASSISTANT="ar-assistant",this.service=B}launchAR(A){let Q=this.readPlatformFromUserAgent(navigator.userAgent),B=null;if(Q==="android")A.logEventLegacy("ar-start","android"),A.triggerWOTWCommonInteraction("ar-start","android"),B=this._renderAndroidSceneViewerIntentURL("ar-models",this.arid,this.environment,"android");if(Q==="ios")A.logEventLegacy("ar-start","ios"),A.triggerWOTWCommonInteraction("ar-start","ios"),B=this._renderIOSQuickLookURL("ar-moodels",this.arid,this.environment,"ios");if(!B)return!1;return this._click(B),!0}deliverQR(){return!0}_click(A){if(typeof document==="undefined")return!1;if(typeof A!=="string")return null;if(A.length===0)return null;let Q=document.createElement("a");if(A.includes(".usdz")){Q.setAttribute("rel","ar");let B=document.createElement("img");B.style.display="none",Q.appendChild(B)}return Q.setAttribute("href",A),this.safeAddToDOM(Q),Q.click(),!0}safeAddToDOM(A){let Q=document.getElementById("eyekandy-div");if(!Q)Q=document.createElement("div"),Q.setAttribute("id","eyekandy-div"),document.body.appendChild(Q);Q.appendChild(A)}readPlatformFromUserAgent(A){let Q=this._readPlatformBlockFromUserAgent(A),B={ios:!1,android:!1,linux:!1,windows:!1};if(Q.indexOf("iphone")>-1||Q.indexOf("ipad")>-1||Q.indexOf("macintosh")>-1)B.ios=!0;if(Q.indexOf("android")>-1)B.android=!0;if(Q.indexOf("linux")>-1&&!B.android)B.linux=!0;if(Q.startsWith("x11"))B.linux=!0;if(Q.startsWith("windows"))B.windows=!0;let C=null,J=0;for(let[I,q]of Object.entries(B))if(q===!0)J+=1,C=I;if(J!==1)console.error(`error, multiple platforms matched for: '${A}' -> '${JSON.stringify(B)}'`);return C}_readPlatformBlockFromUserAgent(A){let Q=A;if(typeof Q!=="string"){if(Q=navigator.userAgent||null,Q)return"windows"}let C=/\((.*?)\)/g.exec(Q);if(!C||C.length!==2)return null;let J=C[1];if(!J)throw new Error("error, unable to read the platformBlock from userAgent");return J=J.toLowerCase(),J}_renderAndroidSceneViewerIntentURL(A,Q,B,C,J={mode:"ar_preferred",version:"1.1",resizable:!1}){J.resizable=J.resizable??(A==="ar-models"?!1:!0);let I={model:this.renderModelURL(Q,B,C),sound:this.renderModelSoundURL(Q,B),currentPage:window.location.href,fallbackUrl:this.render3DFWUrl(Q,B)},q={prefix:`intent://arvr.google.com/scene-viewer/${J.version}?mode=${J.mode}&resizable=${J.resizable}`,suffix:`#Intent;scheme=https;package=com.google.android.googlequicksearchbox;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(I.fallbackUrl)};end;`};return`${q.prefix}&file=${encodeURIComponent(I.model)}${A===this.SERVICE_AR_ASSISTANT?`&sound=${encodeURIComponent(I.sound)}`:""}?link=${encodeURIComponent(I.currentPage)}&title=${q.suffix}`}renderModelURL(A,Q,B){if(!Q)Q=this.environment;return B==="ios"?`${this.MODEL_CDN_BASE_URLS[Q]}/USDZ/${A}.usdz`:`${this.MODEL_CDN_BASE_URLS[Q]}/GLB/${A}.glb`}renderModelSoundURL(A,Q){if(!Q)Q=this.environment;return`${this.MODEL_CDN_BASE_URLS[Q]}/MP3/${A}.mp3`}render3DFWUrl(A,Q){return`${this.THREE_DFW_PLAYER_BASE_URLS[Q]}${A}`}_getARLaunchOptions(A){let Q={allowsContentScaling:0,banner:{id:null,size:"small",config:null,options:null},callback:null,context:null};if(A==="ar-assistant")Q.allowsContentScaling=1;return Q}_renderIOSQuickLookURL(A,Q,B,C,J={allowsContentScaling:0,banner:{id:null,size:"small",config:null,options:null},callback:null,context:null}){if(A==="ar-assistant")J.allowsContentScaling=1;if(J.banner){if(J.banner.options);}let I=this.renderModelURL(Q,B,C),q=typeof J.allowsContentScaling!=="undefined",K=I;if(q)K+="#";if(q)K+=`allowsContentScaling=${J.allowsContentScaling}&`;return K=K.replace(/&$/,""),K}}class f9 extends M1{constructor(A,Q,B,C,J,I,q,K,Y,Z=void 0){super(A,Q,B,C,J,I,q,K,Y,!0,"ar-models");this.EKARID=Z}isComponentValidToRender(){return!0}onClickHandler(){if(this.logEventLegacy("click","button"),I3())new c6(this.EKIdentities?.arid||this.EKARID,"dev","ar-models").launchAR(this)}}f([a({attribute:!1})],f9.prototype,"EKARID",void 0),f9=f([z0("ek-all-in-one-default-service-button")],f9);class h9 extends y0{constructor(A,Q,B,C,J){super();this._popupTextColour=Q,this._props=A,this._qrContent=B,this.EKControlObject=C,this.EKARID=J}static styles=U0`
    .ek-need-help-container {
      container-type: inline-size;
      container-name: need-help-container;
      display: flow;
      gap: 5px;
      height: 100%;
      width: 314px;
      color: var(--popup-text-colour);
      font-family: "Open Sans Condensed", sans-serif;
      text-align: center;
    }
    .need-help-content {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    .need-help-step-one {
      position: relative;
      display: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 75%;
    }
    .need-help-step-one-mobile,
    .need-help-step-three,
    .need-help-step-two {
      position: relative;
      display: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 75%;
    }
    .absolute {
      position: absolute;
      top: 0px;
      left: 0px;
    }
    img {
      max-width: 231px;
      width: 100%;
      border-radius: 0.5rem;
    }
    .need-help-title {
      text-align: center;
    }
    h1 {
      font-size: 22px;
    }
    p {
      font-size: 16px;
    }
    @media (max-width: 600px) {
      .need-help-step-three-mobile {
        position: relative;
      }
    }

    @media (min-width: 600px) {
      .need-help-step-one-mobile {
        display: none;
      }
      .need-help-step-two-mobile {
        display: none;
      }
      .need-help-step-three-mobile {
        display: none;
      }
      .need-help-step-one,
      .need-help-step-two,
      .need-help-step-three {
        display: flex;
      }
    }
    .ek-qr-code > img {
      min-width: 231px;
      min-height: 237px;
    }
  `;getQRCode(){if(this._qrContent!==null)return v`<div class="ek-qr-code">
        <img src="${this._qrContent}" alt="QR Code" />
      </div>`;return null}render(){return v`
      <style>
        :host {
          --popup-text-colour: ${this._popupTextColour};
        }
      </style>
      <div class="ek-need-help-container">
        <h1 class="need-help-title">${this._props?.needHelpGroup.needHelpPopupTitle}</h1>
        <div class="need-help-content">
          <div class="need-help-step-one">
            ${this.getQRCode()}
            <p>1] ${this._props?.needHelpGroup.needHelpPopupStepOneText}</p>
          </div>
          <div class="need-help-step-one-mobile">
            <p>1] ${this._props?.needHelpGroup.needHelpPopupStepTwoText}</p>
          </div>
          <div class="need-help-step-two">
            <img src="https://cdn.pointandplace.com/images/all-in-one/help/bg-wall.png"></img>
            <img class="absolute" src="https://cdn.pointandplace.com/images/all-in-one/help/loading.gif"></img>
            <p>2] ${this._props?.needHelpGroup.needHelpPopupStepTwoText}</p>
          </div>
          <div class="need-help-step-two-mobile">
            <img src="https://cdn.pointandplace.com/images/all-in-one/help/bg-wall.png"></img>
            <img class="absolute" src="https://cdn.pointandplace.com/images/all-in-one/help/loading.gif"></img>
            <p>1] ${this._props?.needHelpGroup.needHelpPopupStepTwoText}</p>
          </div>
          <div class="need-help-step-three">
            <img src="https://cdn.pointandplace.com/images/all-in-one/help/bg-wall.png"></img>
            <img class="absolute" src="https://cdn.pointandplace.com/images/all-in-one/help/interaction.gif"></img>
            <p>3] ${this._props?.needHelpGroup.needHelpPopupStepThreeText}</p>
          </div>
          <div class="need-help-step-three-mobile">
            <img src="https://cdn.pointandplace.com/images/all-in-one/help/bg-wall.png"></img>
            <img class="absolute" src="https://cdn.pointandplace.com/images/all-in-one/help/interaction.gif"></img>
            <p>2] ${this._props?.needHelpGroup.needHelpPopupStepThreeText}</p>
          </div>  
        </div>
      </div>
    `}}f([a({attribute:!1})],h9.prototype,"_qrContent",void 0),f([a({attribute:!1})],h9.prototype,"_props",void 0),f([a({attribute:!1})],h9.prototype,"EKControlObject",void 0),f([a({attribute:!1})],h9.prototype,"EKARID",void 0),f([a({attribute:!1})],h9.prototype,"_popupTextColour",void 0),h9=f([z0("ek-all-in-one-need-help-content")],h9);class x9 extends M1{setPopupTextColour(A){this.popupTextColour=A}popupTextColour;constructor(A,Q,B,C,J,I,q,K,Y){super(A,Q,B,C,J,I,q,K,Y,!0);this.needHelpPopupIsVisible=!1}static styles=U0`
    .container {
      display: flow;
      gap: 5px;
      height: 100%;
    }
    .ek-all-in-one-content-container {
      container-type: inline-size;
      width: 314px;
    }
    .horizontal-align {
      display: flex;
      justify-content: center;
      gap: 5px;
    }
    .right-column {
      grid-template-columns: repeat(3, minmax(0, 1fr));
      display: grid;
      row-gap: 7px;
      column-gap: 0px;
      height: 100%;
      justify-items: center;
    }
    .left-column {
      width: 100%;
      text-align: center;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }
    .ek-qr-code,
    .ek-need-help-btn,
    .popup-title {
      display: none;
    }
    .ek-need-help-btn-mobile,
    .popup-title-mobile {
      display: flex;
    }
    .ek-need-help-btn-mobile {
      cursor: pointer;
      text-decoration: underline;
      font-size: 14px;
      font-family: "Open Sans Condensed", sans-serif;
      text-align: center;
      margin-top: 5px;
      color: var(--popup-text-colour);
      justify-content: center;
    }
    h1 {
      font-size: 20px;
      text-align: center;
      line-height: 26px;
      font-family: "Open Sans Condensed", sans-serif;
      margin-top: 0;
      color: var(--popup-text-colour);
    }
    .ek-brand-image {
      width: 100%;
      max-width: 215px;
    }

    .disclaimer-text {
      padding: 0px 0px 0.5rem;
      font-style: italic;
      margin: 0;
      font-size: 14px;
      text-align: left;
      color: var(--popup-text-colour);
      font-family: "Open Sans Condensed", sans-serif;
    }

    @media (min-width: 600px) {
      .container {
        grid-template-columns: 1fr auto;
        display: grid;
        gap: 5px;
        height: 100%;
      }
      .left-column {
        width: 215px;
        display: flex;
        flex-direction: column;
        gap: 5px;
        align-items: center;
        justify-content: space-around;
        color: var(--popup-text-colour);
        margin-right: 5px;
      }
      .right-column {
        display: flex;
        flex-direction: column;
        width: fit-content;
        height: 100%;
      }
      .ek-qr-code,
      .ek-qr-code > svg {
        width: 213px;
        height: 213px;
        border-radius: 0.5rem;
      }
      .ek-qr-code {
        display: flex;
      }
      .popup-title-mobile,
      .ek-need-help-btn-mobile {
        display: none;
      }
      .popup-title {
        display: block;
      }
      .ek-need-help-btn {
        cursor: pointer;
        text-decoration: underline;
        font-size: 14px;
        font-family: "Open Sans Condensed", sans-serif;
        color: var(--popup-text-colour);
        display: flex;
        margin-top: 5px;
      }
      .ek-qr-code > img {
        border-radius: 0.5rem;
      }
    }
  `;getQRCode(){if(this.EKResolvedData["datarequirement-arqrcode"])return v`<div class="ek-qr-code">
        <img
          src="${this.EKResolvedData["datarequirement-arqrcode"]}"
          alt="QR Code"
        />
      </div>`;return null}toggleNeedHelpPopoup(A){if(this.needHelpPopupIsVisible=!this.needHelpPopupIsVisible,this.needHelpPopupIsVisible===!0)this.dispatchEvent(new CustomEvent("ek-child-feature-selected",{bubbles:!0,composed:!0,detail:{children:new h9(A,this.EKProps.popupContentTextColour,this.EKResolvedData["datarequirement-arqrcode"],this.EKControlObject,this.EKIdentities?.arid)}}))}localisations(){return this.getLocalisations("AllInOneContentLocalisation")}isComponentValidToRender(){let A=this.localisations();if(A===null||!A)return!1;else if(!A.qrTitle||!A.qrTitleMobile)return!1;else if(!A.needHelpGroup||!A.needHelpGroup.needHelpPopupStepOneMobileText||!A.needHelpGroup.needHelpPopupStepOneText||!A.needHelpGroup.needHelpPopupStepThreeText||!A.needHelpGroup.needHelpPopupStepTwoText||!A.needHelpGroup.needHelpPopupTitle||!A.needHelpGroup.needHelpText||!A.needHelpGroup.needHelpTextMobile)return!1;return!0}getLeftColumn(A){if(this.getQRCode()===null)return null;return v`
      <div class="left-column">
        ${this.EKProps.showBrandImage===!0&&A.brandImage?v`
          <img class="ek-brand-image" src="${A.brandImage.url}"></img>
          `:""}
        <h1 class="popup-title">${A.qrTitle.toUpperCase()}</h1>
        <h1 class="popup-title-mobile">${A.qrTitleMobile.toUpperCase()}</h1>
        ${this.getQRCode()}
        ${A.disclaimer?v`<p class="disclaimer-text">${A.disclaimer}</p>`:v``}
        <div
          @click="${()=>this.toggleNeedHelpPopoup(A)}"
          class="ek-need-help-btn"
        >
          ${A.needHelpGroup.needHelpText}
        </div>
      </div>
    `}render(){if(!this.isComponentValidToRender())return this.nullifyComponent("Missing localisations"),null;let A=this.localisations(),Q=this.getLeftColumn(A);if(Q!==null)return v`
        <style>
          .ek-all-in-one-content-container {
            --popup-text-colour: ${this.EKProps.popupContentTextColour};
          }
        </style>
        <div class="container ek-all-in-one-content-container">
          ${Q}
          ${this.EKChildren?.length?v` <div class="right-column">${this.EKChildren}</div>`:v` <div class="right-column"></div>`}

          <div
            @click="${()=>this.toggleNeedHelpPopoup(A)}"
            class="ek-need-help-btn-mobile"
          >
            ${A.needHelpGroup.needHelpTextMobile}
          </div>
        </div>
      `;else return v`
        <style>
          .ek-all-in-one-content-container {
            --popup-text-colour: ${this.EKProps.popupContentTextColour};
          }
        </style>
        <div class="container ek-all-in-one-content-container">
          ${this.EKChildren?.length?v` <div class="horizontal-align">${this.EKChildren}</div>`:v``}
          </div>
        </div>
      `}}f([K0()],x9.prototype,"needHelpPopupIsVisible",void 0),f([a({attribute:!1})],x9.prototype,"EKProps",void 0),f([a({attribute:!1})],x9.prototype,"EKResolvedData",void 0),x9=f([z0("ek-all-in-one-content")],x9);class g9 extends M1{constructor(A,Q,B,C,J,I,q,K,Y){super(A,Q,B,C,J,I,q,K,Y,!0)}static styles=U0`
    .container {
      display: flow;
      gap: 5px;
      height: 100%;
    }
    .ek-all-in-one-content-container {
      container-type: inline-size;
      width: 314px;
    }
  `;isComponentValidToRender(){return!0}render(){return v`
      <div class="container ek-all-in-one-content-container">
        ${this.EKChildren}
      </div>
    `}}f([a({attribute:!1})],g9.prototype,"EKProps",void 0),g9=f([z0("ek-all-in-one-content-direct")],g9);class v9 extends M1{constructor(){super(...arguments);this.service=this.EKChildren?this.EKChildren[0]?.tagName:"";this.legacyServiceNameMapping={"EK-PC-ROOMS":"pc-rooms","EK-MODEL-VIEWER":"3dfw","EK-INTEL-12TH-GEN-CGI":"intel-12th-gen-cgi","EK-ALL-IN-ONE-DEFAULT-SERVICE-BUTTON":"ar-models"};this.legacyServiceName=this.legacyServiceNameMapping[this.service]||this.service}static styles=U0`
    button {
      min-width: auto;
      width: 100%;
      min-height: 115px;
      display: flex;
      flex-direction: column;
      text-align: center;
      justify-content: center;
      align-items: center;
      font-size: 14px;
      line-height: 16px;
      border: none;
      color: #000000;
      background-color: #ffffff;
      border-radius: 8px;
      cursor: pointer;
    }

    span {
      font-family: "Open Sans Condensed", sans-serif;
      font-weight: 400;
      font-size: 14px;
    }

    .ek-all-in-one-feature-button-mobile {
      width: 90px;
      height: 116px;
    }
    .ek-all-in-one-feature-button {
      width: 90px;
      height: 116px;
    }
    .ek-all-in-one-feature-button-mobile,
    .ek-all-in-one-feature-button {
      padding: 10px;
    }
    .ek-all-in-one-feature-button > img {
      width: -webkit-fill-available;
      width: -moz-available;
      width: fill-available;
      width: 100%;
      max-width: 70px;
      max-height: 70px;
    }
    .ek-all-in-one-feature-button-mobile > img {
      width: -webkit-fill-available;
      width: -moz-available;
      width: fill-available;
      width: 100%;
      max-width: 70px;
      max-height: 70px;
    }
  `;_wotwGetServiceName(){let A=null;if(this.EKChildren&&this.EKChildren.length===1)A=this.EKChildren[0];if(A&&A.EKBlockType==="ContainerElement"&&A.EKChildren?.length===1)A=A.EKChildren[0];if(A){if(A.EKBlockType==="ARModelsElement")return"ar-models";else if(A.EKBlockType==="CrossmarkElement")return"intel-crossmark";else if(A.EKBlockType==="ULElement")return"intel-ul";else if(A.EKBlockType==="PCRoomsElement")return"pc-rooms";else if(A.EKBlockType==="ModelViewerElement")return"3d-player"}return null}_onClick(){if(this.EKChildren&&this.EKChildren[0]){if(this.EKChildren[0].EKBlockType==="ModelViewerElement")this.EKChildren[0].logEventLegacy("click","button","3dfw"),this.EKChildren[0]._showModelViewer=!0;if(this.EKChildren[0].EKBlockType==="ContainerElement"){if(Array.isArray(this.EKChildren[0].EKChildren)&&this.EKChildren[0].EKChildren?.length)this.EKChildren[0].EKChildren[0]._showModelViewer=!0}}if(this.dispatchEvent(new CustomEvent("ek-child-feature-selected",{bubbles:!0,composed:!0,detail:{children:this.EKChildren}})),this.logEventLegacy("click","button",this._wotwGetServiceName()),this.triggerWOTWCommonInteraction("click",this._wotwGetServiceName()||""),this._wotwGetServiceName()==="3d-player")this.logEventLegacy("click","button","3dfw")}_onClickDefaultServiceButton(){this.logEventLegacy("click","button",this._wotwGetServiceName())}isMobileDevice(){let A=!1;try{let Q=navigator.userAgent;A=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(Q)}catch(Q){console.warn("[EKAllInOneContent] - isMobileDevice() ERROR:",Q)}return A}localisations(){return this.getLocalisations("AllInOneFeatureButtonLocalisation")}isComponentValidToRender(){let A=this.localisations();if(A===null||!A)return!1;else if(!A.buttonImage)return!1;return!0}render(){let A=null;if(this.EKChildren&&this.EKChildren.length===1)A=this.EKChildren[0];if(A&&A.EKBlockType==="ContainerElement"&&A.EKChildren?.length===1)A=A.EKChildren[0];if(this.EKChildren&&this.EKChildren[0]&&this.EKChildren[0].EKBlockType==="ARModelsElement"&&!I3())return this.nullifyComponent("Cannot show ARModelsElement on desktop"),null;if(!this.isComponentValidToRender())return this.nullifyComponent("Missing localisations"),null;let Q=this.localisations();return v`<button
      class="${this.isMobileDevice()===!0?"ek-all-in-one-feature-button-mobile":"ek-all-in-one-feature-button"}"
      @click="${this._onClick}"
    >
      <img
        src="${Q.buttonImage.url}"
        alt="${Q.buttonImage.altText}"
      />
      <span>${Q.title?Q.title:""}</span>
    </button>`}}f([a({attribute:!1})],v9.prototype,"EKProps",void 0),f([K0()],v9.prototype,"service",void 0),f([K0()],v9.prototype,"legacyServiceNameMapping",void 0),f([K0()],v9.prototype,"legacyServiceName",void 0),v9=f([z0("ek-all-in-one-feature-button")],v9);class CZ extends y0{constructor(){super(...arguments);this.visible=!1;this.zIndex=999}static styles=U0`
    .backdrop {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: none;
      opacity: 0;
    }

    .backdrop.visible {
      opacity: 1;
      display: inherit;
    }
  `;render(){return v`
      <style>
        .backdrop {
          z-index: ${this.zIndex} !important;
        }
      </style>
      <div
        class="backdrop${this.visible===!0?" visible":""}"
        @click="${()=>{this.dispatchEvent(new CustomEvent("ek-modal-close-backdrop",{bubbles:!0,composed:!0}))}}"
      ></div>
    `}}f([a({type:Boolean})],CZ.prototype,"visible",void 0),f([a({type:Number})],CZ.prototype,"zIndex",void 0),CZ=f([z0("ek-modal-backdrop")],CZ);class JZ extends y0{constructor(){super(...arguments);this.visible=!0;this.backgroundColour="#5E6DB3";this.foregroundColour="rgba(22,184,236,1)";this.popupCloseIconColour="white";this.noStyle=!1;this.maxWidth="none";this.zIndex=999}static styles=U0`
    :host {
      --modal-background-color: white;
      --modal-border: 1px solid rgba(0, 0, 0, 0.2);
      --modal-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      --modal-border-radius: 5px;
      --close-button-size: 25px;
      --modal-padding: 10px;
      max-width: 100vw;
    }

    .modal {
      background-color: var(--modal-background-color);
      background-color: #ffa33a;
      border: var(--modal-border);
      box-shadow: var(--modal-shadow);
      border-radius: var(--modal-border-radius);
      width: max-content;
      display: none;
      opacity: 0;
      transition: var(--modal-transition);
      padding: var(--modal-padding);
      padding-top: calc(var(--modal-padding) + var(--close-button-size));
    }

    .modal.visible {
      display: inherit;
      opacity: 1;
      border: 1px solid rgb(34, 34, 34);
      border-radius: 14px !important;
      max-width: 100%;
    }

    .close-button {
      position: absolute;
      top: 5px;
      right: 10px;
      background-color: transparent;
      border: none;
      cursor: pointer;
      font-size: var(--close-button-size);
      line-height: var(--close-button-size);
      width: var(--close-button-size);
      height: var(--close-button-size);
      text-align: center;
      transition: color 0.2s;
      z-index: 999999;
    }

    .close-button svg {
      width: 25px;
      height: 25px;
    }

    .close-button:hover {
      color: #f44336; /* Red color for hover effect */
    }
  `;render(){return v`
      <div class="modal ${this.visible===!0?"visible":""}">
        <style>
          :host {
            z-index: ${this.zIndex} !important;
          }
          .modal {
            background-color: ${this.backgroundColour} !important;
            background: ${this.backgroundColour} !important;
            background: linear-gradient(
              0deg,
              ${this.backgroundColour} 0%,
              ${this.foregroundColour} 100%
            ) !important;
            ${this.noStyle&&"padding: 0px !important;"}
            ${this.noStyle&&"padding-top: 0px !important;"}
            ${this.noStyle&&"border-radius: 0px !important;"}
            ${this.noStyle&&"border: 0px !important;"}
          }
        </style>
        ${!this.noStyle?v`<button
              class="close-button"
              @click="${()=>{this.dispatchEvent(new CustomEvent("ek-modal-close-button",{bubbles:!0,composed:!0}))}}"
              aria-label="Close"
            >
              <svg
                id="svg-close"
                data-name="Layer 1"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
              >
                <defs>
                  <style>
                    .cls-1 {
                      fill: ${this.popupCloseIconColour};
                    }
                  </style>
                </defs>
                <path
                  class="cls-1"
                  d="M13.63,11.85l3.23-3.23A1,1,0,0,0,15.4,7.16l-3.23,3.23L8.94,7.16A1,1,0,0,0,7.48,8.62l3.23,3.23L7.48,15.08a1,1,0,0,0,1.46,1.46l3.23-3.23,3.23,3.23a1,1,0,0,0,1.46-1.46Z"
                ></path>
                <path
                  class="cls-1"
                  d="M12.17.47A11.38,11.38,0,1,0,23.55,11.85,11.39,11.39,0,0,0,12.17.47Zm0,20.86a9.48,9.48,0,1,1,9.48-9.48A9.5,9.5,0,0,1,12.17,21.33Z"
                ></path>
              </svg>
            </button>`:R1}
        <slot></slot>
      </div>
    `}}f([a({type:Boolean})],JZ.prototype,"visible",void 0),f([a({type:String})],JZ.prototype,"backgroundColour",void 0),f([a({type:String})],JZ.prototype,"foregroundColour",void 0),f([a({type:String})],JZ.prototype,"popupCloseIconColour",void 0),f([a({type:Boolean})],JZ.prototype,"noStyle",void 0),f([a({type:String})],JZ.prototype,"maxWidth",void 0),f([a({type:Number})],JZ.prototype,"zIndex",void 0),JZ=f([z0("ek-modal-body")],JZ);class IZ extends y0{constructor(){super(...arguments);this.visible=!1;this.onMouseOutBody=()=>{};this.EKAPIComponentParent=null;this.placementStrategy=null;this.backgroundColour="#5E6DB3";this.foregroundColour="rgba(22,184,236,1)";this.popupCloseIconColour="white";this.noStyle=!1;this.maxWidth="none";this.backdropZIndex=999;this.bodyZIndex=999;this.modelContent=null}static styles=U0`
    :host {
      --transition: visibility 0.25s, opacity 0.25s ease-in-out;
      --backdrop-z-index: 999;
    }
  `;modalIdentifierWithParentEKAPIComponent="modal";updated(A){if(super.updated(A),A.has("visible")){if(A.get("visible")!==this.visible){if(this.visible===!1)this.cleanupPlacement();else this.doPlacement();let Q=Array.isArray(this.modelContent)?this.modelContent:[this.modelContent];for(let B=0;B<Q.length;B++)if(Q[B].onVisibilityChange)Q[B].onVisibilityChange(this.visible)}}}firstUpdated(){if(this.visible)this.doPlacement()}cleanupPlacement(){if(this.EKAPIComponentParent)this.EKAPIComponentParent.deregisterPlacementAndSelector(this.modalIdentifierWithParentEKAPIComponent)}doPlacement(){if(this.ekModalBody&&this.EKAPIComponentParent&&this.placementStrategy)this.EKAPIComponentParent.registerPlacementAndSelector(this.modalIdentifierWithParentEKAPIComponent,this.ekModalBody,this.EKAPIComponentParent,this.placementStrategy,!0)}render(){return v`
      <style>
        ek-modal-backdrop {
          --modal-backdrop-transition: var(--transition);
          --modal-backdrop-z-index: var(--backdrop-z-index);
        }
      </style>
      <ek-modal-backdrop
        .visible="${this.visible}"
        .zIndex="${this.backdropZIndex}"
      ></ek-modal-backdrop>
      <ek-modal-body
        .visible="${this.visible}"
        .backgroundColour="${this.backgroundColour}"
        .foregroundColour="${this.foregroundColour}"
        .popupCloseIconColour=${this.popupCloseIconColour}
        .noStyle=${this.noStyle}
        .maxWidth=${this.maxWidth}
        .zIndex="${this.bodyZIndex}"
        @mouseover="${()=>{this.dispatchEvent(new CustomEvent("ek-mouse-over-body",{bubbles:!0,composed:!0}))}}"
        @mouseout="${()=>{this.dispatchEvent(new CustomEvent("ek-mouse-out-body",{bubbles:!0,composed:!0}))}}"
      >
        ${this.modelContent}
      </ek-modal-body>
    `}}f([X1("ek-modal-body")],IZ.prototype,"ekModalBody",void 0),f([a({type:Boolean})],IZ.prototype,"visible",void 0),f([a({type:Function})],IZ.prototype,"onMouseOutBody",void 0),f([a({type:Object})],IZ.prototype,"EKAPIComponentParent",void 0),f([a({type:Object})],IZ.prototype,"placementStrategy",void 0),f([a({type:String})],IZ.prototype,"backgroundColour",void 0),f([a({type:String})],IZ.prototype,"foregroundColour",void 0),f([a({type:String})],IZ.prototype,"popupCloseIconColour",void 0),f([a({type:Boolean})],IZ.prototype,"noStyle",void 0),f([a({type:String})],IZ.prototype,"maxWidth",void 0),f([a({type:Number})],IZ.prototype,"backdropZIndex",void 0),f([a({type:Number})],IZ.prototype,"bodyZIndex",void 0),f([a({type:HTMLElement})],IZ.prototype,"modelContent",void 0),IZ=f([z0("ek-modal")],IZ);class b9 extends M1{static styles=U0`
    :host {
      --icon-size: 50px;
    }

    button {
      border: none;
      background-color: transparent;
      cursor: pointer;
      width: var(--icon-size);
      height: var(--icon-size);
      padding: 0;
      margin: 0;
    }
    img {
      width: 100%;
    }
  `;constructor(A,Q,B,C,J,I,q,K,Y){super(A,Q,B,C,J,I,q,K,Y,!0,"all-in-one");this._isVisible=!1;this._modalContent=null;this.addEventListener("ek-child-feature-selected",(Z)=>{let H=Z.detail.children;if(H&&H.length>0){if(H[0].tagName==="EK-ALL-IN-ONE-DEFAULT-SERVICE-BUTTON")return H[0].onClickHandler()}this._modalContent=H})}toggleVisible(){if(this._isVisible===!0)this.setHidden(),this.triggerWOTWCommonInteraction("close");else this.setVisible(),this.triggerWOTWCommonInteraction("open")}setVisible(){if(this._isVisible=!0,this.logEventLegacy("open","popup","all-in-one","meta"),this.logEventLegacy("click","button","ar-models"),this.logEventLegacy("open","popup","ar-models"),this.EKChildren&&this.EKChildren[0]){if(this.EKChildren[0].EKBlockType==="AllInOneContentElement")this.logEventLegacy("delivery","qr","ar-models")}this.triggerWOTWStartInteraction("modal","click")}setHidden(){this._isVisible=!1,this.logEventLegacy("close","popup","all-in-one","meta"),this.logEventLegacy("close","popup","ar-models"),this.triggerWOTWEndInteraction("modal")}_onButtonClicked(){this.toggleVisible(),this.logEventLegacy("click","button","all-in-one","meta")}_forceModelViewerToRerender(){if(this._modalContent!==null){if(Array.isArray(this._modalContent)&&this._modalContent[0].EKBlockType==="ModelViewerElement")this._modalContent[0]._showModelViewer=!1;if(Array.isArray(this._modalContent)&&this._modalContent[0].EKBlockType==="ContainerElement"){if(Array.isArray(this._modalContent[0].EKChildren)&&this._modalContent[0].EKChildren?.length)this._modalContent[0].EKChildren[0]._showModelViewer=!1}}}_onModalClosedButton(){if(this._modalContent!==null)this._forceModelViewerToRerender(),this._modalContent=null;else this.setHidden()}_onModalClosedBackdrop(){this.setHidden(),this._forceModelViewerToRerender(),this._modalContent=null}connectedCallback(){if(super.connectedCallback(),this.EKChildren){if(this.EKChildren&&this.EKChildren[0]&&this.EKChildren[0].EKChildren){for(let A of this.EKChildren[0].EKChildren)if(A.EKChildren&&A.EKChildren[0]&&A.EKChildren[0].EKBlockType==="ModelViewerElement")this.logEventLegacy("delivery","button","3dfw")}}window.addEventListener("ek-modal-close-button",()=>{this._onModalClosedButton()}),window.addEventListener("ek-child-feature-selected",(A)=>{let Q=A.detail.children;if(Q&&Q.length>0){if(Q[0].tagName==="EK-ALL-IN-ONE-DEFAULT-SERVICE-BUTTON")return Q[0].onClickHandler()}this._modalContent=Q})}localisations(){return this.getLocalisations("AllInOnePageButtonLocalisation")}isComponentValidToRender(){let A=this.localisations();if(A===null||!A)return!1;else if(!A.buttonImage)return!1;return!0}render(){if(!this.isComponentValidToRender())return this.nullifyComponent("Missing localisations"),null;let A=this.localisations();return v`
      ${this.getHostStyleOverride()} ${this.getCustomCSSStyles()}
      <style>
        button {
          ${this.EKProps.buttonSize?`--icon-size: ${this.EKProps.buttonSize}px;`:""}
        ek-modal {
          --background-color: #ffa33a;
        }
      </style>

      <ek-modal
        .placementStrategy="${this.EKProps.modal.modalPlacement}"
        .EKAPIComponentParent="${this}"
        .visible="${this._isVisible}"
        .backgroundColour=${this.EKProps.popupBackgroundColour||"#5E6DB3"}
        .foregroundColour=${this.EKProps.popupForegroundColour||"rgba(22,184,236,1)"}
        .popupCloseIconColour=${this.EKProps.popupCloseIconColour}
        @ek-modal-close-button="${this._onModalClosedButton}"
        @ek-modal-close-backdrop="${this._onModalClosedBackdrop}"
        .backdropZIndex=${this.EKProps.modal.modalBackdropZIndex}
        .bodyZIndex=${this.EKProps.modal.modalZIndex}
        .modelContent=${this._modalContent===null?this.EKChildren:this._modalContent}
      >
      </ek-modal>

      <button
        class="ek-all-in-one-button"
        style="${this.getElementStyleOverride()}"
        @click="${this._onButtonClicked}"
      >
        <img
          src="${A.buttonImage.url}"
          alt="${A.buttonImage.altText}"
        />
      </button>
    `}}f([a({attribute:!1})],b9.prototype,"EKProps",void 0),f([K0()],b9.prototype,"_isVisible",void 0),f([K0()],b9.prototype,"_modalContent",void 0),f([X1("ek-modal")],b9.prototype,"ekModal",void 0),b9=f([z0("ek-all-in-one-page-button")],b9);var qA0=v` <svg
  class="service-button"
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 101.89 101.89"
>
  <defs>
    <style>
        .cls-1-3dfw {
          fill: <!---->#ffffff !important;
        }
        .cls-2-3dfw {
          fill: #373a48 !important;
        }
        .cls-3-3dfw {
          fill: none !important;
        }
      <!---->
    </style>
  </defs>
  <rect
    class="cls-1-3dfw"
    x="5.05"
    y="5.35"
    width="90.71"
    height="90.71"
    rx="11.34"
  ></rect>
  <path
    class="cls-2-3dfw"
    d="M39.29,36c-3.29,1.21-6.75,5.21-3.47,8.4s9,4.9,15.83,4.9v2.93l9.22-5.13-9.08-5.21v2.83c-3.15,0-10.39-.72-12.89-3.28S37.94,37.1,39.29,36Z"
  ></path>
  <path
    class="cls-2-3dfw"
    d="M64.41,36c1.52,1.14,4.57,5.3-5.71,8C61.9,45.78,64,47,64,47,70.06,44.46,71.42,39.06,64.41,36Z"
  ></path>
  <path
    class="cls-2-3dfw"
    d="M47.23,36.88A2.79,2.79,0,0,1,47,38.17a2.63,2.63,0,0,1-.77.95A3.39,3.39,0,0,1,45,39.7a5.16,5.16,0,0,1-1.51.2,5.49,5.49,0,0,1-.93-.07,5.87,5.87,0,0,1-.77-.18,4,4,0,0,1-.55-.21,2,2,0,0,1-.29-.18.41.41,0,0,1-.1-.13,1.89,1.89,0,0,1-.06-.18,1.45,1.45,0,0,1,0-.25c0-.11,0-.23,0-.38a1.45,1.45,0,0,1,.06-.5.19.19,0,0,1,.18-.13.61.61,0,0,1,.26.1,4.51,4.51,0,0,0,.47.21,5.27,5.27,0,0,0,.67.22,3.35,3.35,0,0,0,.87.1,2.65,2.65,0,0,0,.73-.09,1.72,1.72,0,0,0,.54-.28,1.06,1.06,0,0,0,.33-.43A1.4,1.4,0,0,0,45,37a1.47,1.47,0,0,0-.13-.6,1.28,1.28,0,0,0-.4-.47,2.06,2.06,0,0,0-.65-.29,3.59,3.59,0,0,0-.93-.11H42l-.16,0a.25.25,0,0,1-.12-.11.7.7,0,0,1-.06-.23,3.79,3.79,0,0,1,0-.38,3.21,3.21,0,0,1,0-.36.53.53,0,0,1,.06-.21.23.23,0,0,1,.11-.11A.33.33,0,0,1,42,34h.85a2.57,2.57,0,0,0,.77-.1,1.53,1.53,0,0,0,.57-.29,1.28,1.28,0,0,0,.35-.45,1.45,1.45,0,0,0,.12-.59,1.4,1.4,0,0,0-.08-.47,1,1,0,0,0-.67-.64,1.79,1.79,0,0,0-.6-.1,2.19,2.19,0,0,0-.73.12,4,4,0,0,0-.62.26,4.71,4.71,0,0,0-.47.26.65.65,0,0,1-.28.12.17.17,0,0,1-.1,0A.16.16,0,0,1,41,32a.8.8,0,0,1,0-.22c0-.1,0-.22,0-.37a2.82,2.82,0,0,1,0-.31.66.66,0,0,1,0-.21.58.58,0,0,1,0-.14l.11-.13a2,2,0,0,1,.31-.21,3.27,3.27,0,0,1,.59-.28,4.65,4.65,0,0,1,.81-.23,5.21,5.21,0,0,1,1-.1,4.37,4.37,0,0,1,1.26.17,2.55,2.55,0,0,1,.91.48,2,2,0,0,1,.57.76,2.82,2.82,0,0,1,.19,1,2.71,2.71,0,0,1-.12.82,2,2,0,0,1-.33.69,1.88,1.88,0,0,1-.54.51,2.48,2.48,0,0,1-.76.31v0a2.66,2.66,0,0,1,.92.26,2.35,2.35,0,0,1,.69.5,2,2,0,0,1,.43.68A2.16,2.16,0,0,1,47.23,36.88Z"
  ></path>
  <path
    class="cls-2-3dfw"
    d="M55.22,36.48A4.06,4.06,0,0,1,55,37.85a3,3,0,0,1-.66,1.08,3,3,0,0,1-1.08.71,3.71,3.71,0,0,1-1.47.26,4.18,4.18,0,0,1-1.18-.15,2.57,2.57,0,0,1-.87-.45,2.13,2.13,0,0,1-.6-.7,3.54,3.54,0,0,1-.37-.93,5.55,5.55,0,0,1-.19-1.13q-.06-.6-.06-1.29c0-.38,0-.78.06-1.19a7.2,7.2,0,0,1,.22-1.23,5.11,5.11,0,0,1,.45-1.14,3.4,3.4,0,0,1,.76-1,3.51,3.51,0,0,1,1.12-.65,4.49,4.49,0,0,1,1.56-.24,3.64,3.64,0,0,1,.57,0l.54.08.42.12.23.12a.44.44,0,0,1,.08.11.5.5,0,0,1,0,.13.84.84,0,0,1,0,.18c0,.07,0,.15,0,.25s0,.29,0,.39a1.11,1.11,0,0,1,0,.24.21.21,0,0,1-.21.16.87.87,0,0,1-.23-.05l-.35-.11a3.8,3.8,0,0,0-.47-.1,4.06,4.06,0,0,0-.64,0,2.18,2.18,0,0,0-1,.23,1.9,1.9,0,0,0-.68.61,2.6,2.6,0,0,0-.38.9,4.7,4.7,0,0,0-.13,1.08l.38-.21a3.14,3.14,0,0,1,.46-.18l.55-.13a4,4,0,0,1,.62,0,3.4,3.4,0,0,1,1.26.2,2.15,2.15,0,0,1,.87.58,2.42,2.42,0,0,1,.49.91A4.33,4.33,0,0,1,55.22,36.48Zm-1.93.19a3.28,3.28,0,0,0-.07-.67,1.38,1.38,0,0,0-.22-.49.94.94,0,0,0-.4-.3,1.51,1.51,0,0,0-.6-.1,1.84,1.84,0,0,0-.41,0,2.6,2.6,0,0,0-.4.1l-.38.16-.33.2A8.29,8.29,0,0,0,50.57,37a2.93,2.93,0,0,0,.26.86,1,1,0,0,0,.45.44,1.32,1.32,0,0,0,.62.13,1.4,1.4,0,0,0,.6-.12,1.26,1.26,0,0,0,.43-.36,1.66,1.66,0,0,0,.27-.55A2.43,2.43,0,0,0,53.29,36.67Z"
  ></path>
  <path
    class="cls-2-3dfw"
    d="M63.07,34.83a10.3,10.3,0,0,1-.19,2.1,4.53,4.53,0,0,1-.61,1.6,2.79,2.79,0,0,1-1.11,1,3.61,3.61,0,0,1-1.66.35,3.48,3.48,0,0,1-1.65-.34,2.65,2.65,0,0,1-1-1A4.61,4.61,0,0,1,56.27,37a13.28,13.28,0,0,1-.15-2.1,10.3,10.3,0,0,1,.19-2.1,4.59,4.59,0,0,1,.62-1.61,2.81,2.81,0,0,1,1.1-1,4,4,0,0,1,3.31,0,2.54,2.54,0,0,1,1,1,4.53,4.53,0,0,1,.53,1.57A13.28,13.28,0,0,1,63.07,34.83Zm-2,.1c0-.46,0-.87,0-1.22a5.43,5.43,0,0,0-.12-.92,3.08,3.08,0,0,0-.19-.66,1.45,1.45,0,0,0-.28-.44,1.14,1.14,0,0,0-.38-.23,1.65,1.65,0,0,0-.46-.06,1.24,1.24,0,0,0-.74.21,1.51,1.51,0,0,0-.46.64,4.07,4.07,0,0,0-.23,1.07,13.07,13.07,0,0,0-.07,1.49,15.81,15.81,0,0,0,.08,1.71,4.05,4.05,0,0,0,.26,1.09,1.19,1.19,0,0,0,.46.56,1.26,1.26,0,0,0,.67.16,1.36,1.36,0,0,0,.51-.09,1.12,1.12,0,0,0,.4-.28,1.84,1.84,0,0,0,.28-.48,3.49,3.49,0,0,0,.18-.66,6.42,6.42,0,0,0,.1-.85C61.07,35.66,61.08,35.31,61.08,34.93Z"
  ></path>
  <path
    class="cls-2-3dfw"
    d="M68.2,31.26a1.88,1.88,0,0,1-.59,1.41,2,2,0,0,1-.67.43,2.34,2.34,0,0,1-.85.15,2.47,2.47,0,0,1-.84-.14,2.2,2.2,0,0,1-.65-.39,1.6,1.6,0,0,1-.41-.61,1.92,1.92,0,0,1-.14-.77,2,2,0,0,1,.15-.78,1.88,1.88,0,0,1,.44-.63,2.15,2.15,0,0,1,.66-.43,2.34,2.34,0,0,1,.85-.15,2.25,2.25,0,0,1,.84.14,1.91,1.91,0,0,1,.65.39,1.6,1.6,0,0,1,.41.61A1.92,1.92,0,0,1,68.2,31.26Zm-1.29,0a1,1,0,0,0-.06-.35,1,1,0,0,0-.17-.27.74.74,0,0,0-.25-.17.88.88,0,0,0-.33-.06.8.8,0,0,0-.3.06.64.64,0,0,0-.25.18.76.76,0,0,0-.16.26,1,1,0,0,0-.06.33.93.93,0,0,0,.06.34.88.88,0,0,0,.17.28.74.74,0,0,0,.25.17.71.71,0,0,0,.32.07.67.67,0,0,0,.31-.07.64.64,0,0,0,.25-.18.72.72,0,0,0,.16-.27A.87.87,0,0,0,66.91,31.31Z"
  ></path>
  <path
    class="cls-3-3dfw"
    d="M83.17,54.29V23.16a2.6,2.6,0,0,0-2.31-2.76H23.22a2.76,2.76,0,0,0-2.76,2.76V54.29Z"
  ></path>
  <path
    class="cls-3-3dfw"
    d="M45.3,68.2c1.45,2.77,3.07,6.93,1.84,10.1a.05.05,0,0,0,0,0h9.39s0,0,0,0c-1.24-3.16.38-7.33,1.83-10.1Z"
  ></path>
  <path
    class="cls-3-3dfw"
    d="M20.47,58v3.81a2.75,2.75,0,0,0,2.75,2.75h57.2a2.76,2.76,0,0,0,2.76-2.75V58Zm44.68,4.79a1.39,1.39,0,1,1,1.39-1.39A1.39,1.39,0,0,1,65.15,62.75Zm4.1,0a1.39,1.39,0,1,1,1.39-1.39A1.39,1.39,0,0,1,69.25,62.75Zm4.22,0a1.39,1.39,0,1,1,1.39-1.39A1.39,1.39,0,0,1,73.47,62.75Z"
  ></path>
  <path
    class="cls-2-3dfw"
    d="M80.86,16.73H23.22a6.44,6.44,0,0,0-6.43,6.43V61.77a6.44,6.44,0,0,0,6.43,6.43H41.09c1.46,2.37,3.46,6.62,2.62,8.77-.17.43-.57,1-1.89,1.37H35.38a1.84,1.84,0,0,0,0,3.68H68.24a1.84,1.84,0,1,0,0-3.68H61.81C60.49,78,60.09,77.4,59.92,77c-.82-2.09,1-6.17,2.63-8.76H80.41a6.45,6.45,0,0,0,6.44-6.43V23.16A6.23,6.23,0,0,0,80.86,16.73ZM23.22,20.4H80.86a2.6,2.6,0,0,1,2.31,2.76V54.29H20.47V23.16A2.75,2.75,0,0,1,23.22,20.4ZM56.5,78.3s0,0,0,0H47.12a.05.05,0,0,1,0,0c1.23-3.16-.39-7.33-1.84-10.1h13C56.89,71,55.26,75.13,56.5,78.3ZM80.41,64.52H23.22a2.76,2.76,0,0,1-2.76-2.75V58H83.17v3.81A2.75,2.75,0,0,1,80.41,64.52Z"
  ></path>
  <circle class="cls-2-3dfw" cx="73.47" cy="61.36" r="1.39"></circle>
  <circle class="cls-2-3dfw" cx="69.25" cy="61.36" r="1.39"></circle>
  <circle class="cls-2-3dfw" cx="65.15" cy="61.36" r="1.39"></circle>
</svg>`,KA0=v`<svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 500 500"
>
  <path
    d="M480,0H20A20,20,0,0,0,0,20V480a20,20,0,0,0,20,20H480a20,20,0,0,0,20-20V20A20,20,0,0,0,480,0Zm5,20V480a5.87,5.87,0,0,1-.09.94l-84.05-84.23V316.2c0-12.62-8.27-23.42-19.86-27.66V124.19L485,20ZM15,480V20L119,124.19V287.38c-13.65,3-23.86,14.79-23.86,28.82v84.51l-80,80.23A5.87,5.87,0,0,1,15,480ZM374,126V286.87a31.41,31.41,0,0,0-3.9-.25H126V126ZM95.14,410.63V432.1h15V316.2c0-8,7.07-14.58,15.76-14.58H370.1c8.69,0,15.76,6.54,15.76,14.58V432.65h15v-26L479.07,485H20.93ZM480,15h.07L376.29,119H123.71L19.94,15H480Z"
  ></path>
  <rect x="166" y="207" width="100" height="60" rx="6"></rect>
  <rect x="303" y="252" width="25" height="30" rx="4"></rect>
  <rect x="332" y="267" width="14" height="15" rx="4"></rect>
  <path d="M166,282H266a5,5,0,0,0,0-10H166a5,5,0,0,0,0,10Z"></path>
</svg>`,YA0=v`<svg
  xmlns="http://www.w3.org/2000/svg"
  id="Layer_2"
  data-name="Layer 2"
  viewBox="0 0 183.25 182.47"
>
  <defs>
    <style>
        #Layer_2 {
          padding: 0.25rem 0.75rem 0.25rem 0.75rem;
        }
        .eky-svg-intel-unison {
          fill: <!---->#000000;
        }
      <!---->
    </style>
  </defs>
  <g id="Layer_2-2" data-name="Layer 2">
    <path
      d="m90.03 181.57-83.8-48.15A12.391 12.391 0 0 1 0 122.67V58.02c0-4.25 4.6-6.92 8.31-4.83l84.97 47.96c4.15 2.34 6.71 6.73 6.71 11.48v63.19c0 5.1-5.54 8.29-9.97 5.74ZM142.21 109.74l-58.66-33.7a8.674 8.674 0 0 1-4.36-7.52V23.26c0-2.98 3.22-4.85 5.82-3.38l59.48 33.57c2.9 1.64 4.7 4.71 4.7 8.04v44.23c0 3.57-3.88 5.8-6.98 4.02ZM178.77 57.6l-37.71-21.48a5.517 5.517 0 0 1-2.8-4.8V2.48c0-1.9 2.07-3.09 3.74-2.15l38.24 21.4c1.87 1.05 3.02 3 3.02 5.12v28.19c0 2.27-2.49 3.7-4.49 2.56Z"
      class="eky-svg-intel-unison"
    ></path>
  </g>
</svg>`;var bz=(A,Q)=>{if(!A||!Q)A="#0CB7EB",Q="#9747FF";return v`
    <svg
      id="ek-spinning-cube"
      xmlns="http://www.w3.org/2000/svg"
      width="20"
      height="20"
      viewBox="0 0 17 19"
      fill="black"
    >
      <path
        d="M7.08823 18.4521L1.00535 14.9984C0.686823 14.8193 0.439555 14.5792 0.26355 14.278C0.0875248 13.9769 -0.000488281 13.6472 -0.000488281 13.2891V6.38858C-0.000488281 6.03044 0.0875248 5.70079 0.26355 5.39962C0.439555 5.09847 0.686823 4.85836 1.00535 4.67929L7.08823 1.22552C7.40799 1.04913 7.74457 0.960938 8.09799 0.960938C8.45142 0.960938 8.78539 1.04913 9.09991 1.22552L15.1828 4.67929C15.5013 4.85836 15.7486 5.09847 15.9246 5.39962C16.1006 5.70079 16.1886 6.03044 16.1886 6.38858V13.2891C16.1886 13.6472 16.1006 13.9769 15.9246 14.278C15.7486 14.5792 15.5013 14.8193 15.1828 14.9984L9.09991 18.4521C8.78016 18.6285 8.44357 18.7168 8.09015 18.7168C7.73673 18.7168 7.40276 18.6285 7.08823 18.4521ZM7.47141 17.2673V10.1678L1.24483 6.71173V13.2961C1.24483 13.421 1.27676 13.538 1.34062 13.6473C1.40449 13.7566 1.50029 13.8503 1.62801 13.9283L7.47141 17.2673ZM8.71673 17.2673L14.5601 13.9283C14.6879 13.8503 14.7837 13.7566 14.8475 13.6473C14.9114 13.538 14.9433 13.421 14.9433 13.2961V6.71173L8.71673 10.1678V17.2673ZM8.09407 9.11413L14.3207 5.6112L8.47726 2.31901C8.34953 2.24096 8.2218 2.20194 8.09407 2.20194C7.96634 2.20194 7.83862 2.24096 7.71089 2.31901L1.86749 5.6112L8.09407 9.11413Z"
        fill="url(#paint0_linear_2014_570)"
      />
      <defs>
        <linearGradient
          id="paint0_linear_2014_570"
          x1="8.09407"
          y1="0.960937"
          x2="8.09407"
          y2="18.7168"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="${A}" />
          <stop offset="1" stop-color="${Q}" />
        </linearGradient>
      </defs>
    </svg>
  `},uz=(A,Q)=>{if(!A||!Q)A="#0CB7EB",Q="#9747FF";return v`
    <svg
      id="ek-flipping-square"
      xmlns="http://www.w3.org/2000/svg"
      width="30"
      height="30"
      viewBox="0 0 26 27"
      fill="none"
    >
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M0 4.06862L0 6.16094H1.3V4.06095C1.3 3.55094 1.4725 3.12343 1.8175 2.77843C2.1625 2.43344 2.59 2.26094 3.10001 2.26094H5.2V0.960938L3.10001 0.960938C2.23889 0.960938 1.50694 1.26093 0.90415 1.86093C0.301383 2.46092 0 3.19682 0 4.06862ZM0.89999 26.0568C1.49998 26.6596 2.23588 26.9609 3.10768 26.9609H5.2V25.6609H3.10001C2.59 25.6609 2.1625 25.4884 1.8175 25.1434C1.4725 24.7984 1.3 24.3709 1.3 23.8609V21.7609H0L0 23.8609C0 24.722 0.299997 25.454 0.89999 26.0568ZM24.7 4.06095V6.16094H26V4.06095C26 3.19983 25.7 2.46788 25.1 1.86509C24.5 1.26232 23.7641 0.960938 22.8923 0.960938L20.8 0.960938V2.26094H22.9C23.41 2.26094 23.8375 2.43344 24.1825 2.77843C24.5275 3.12343 24.7 3.55094 24.7 4.06095ZM20.7998 26.961V25.661H22.8998C23.4098 25.661 23.8373 25.4885 24.1823 25.1435C24.5273 24.7985 24.6998 24.371 24.6998 23.8609V21.761H25.9998V23.8533C25.9998 24.725 25.6985 25.4609 25.0957 26.061C24.4929 26.661 23.761 26.961 22.8998 26.961H20.7998Z"
        fill="url(#paint0_linear_2014_565)"
      />
      <defs>
        <linearGradient
          id="paint0_linear_2014_565"
          x1="13"
          y1="0.960938"
          x2="13"
          y2="26.961"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="${A}" />
          <stop offset="1" stop-color="${Q}" />
        </linearGradient>
      </defs>
    </svg>
  `},pz=(A,Q)=>{if(!A||!Q)A="#0CB7EB",Q="#9747FF";return v`
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="20"
      height="20"
      viewBox="0 0 15 11"
      fill="none"
    >
      <path
        d="M7.59445 9.89184C7.42183 9.89184 7.27667 9.82955 7.15897 9.70497C7.04127 9.58039 6.98242 9.42674 6.98242 9.24402V0.809927C6.98242 0.618903 7.04127 0.465255 7.15897 0.34898C7.27667 0.224399 7.42183 0.162109 7.59445 0.162109H9.72479C10.3996 0.162109 11.0116 0.282537 11.5609 0.523392C12.118 0.755942 12.6006 1.09231 13.0086 1.53249C13.4166 1.96437 13.7305 2.47515 13.9502 3.06483C14.1699 3.65451 14.2797 4.30648 14.2797 5.02074C14.2797 5.73501 14.1699 6.39113 13.9502 6.98911C13.7305 7.5788 13.4166 8.09373 13.0086 8.53391C12.6006 8.96579 12.118 9.30216 11.5609 9.54301C11.0116 9.77557 10.3996 9.89184 9.72479 9.89184H7.59445ZM8.20648 8.7457H9.72479C10.3839 8.7457 10.9645 8.5879 11.4667 8.27229C11.9768 7.94838 12.3769 7.5082 12.6673 6.95174C12.9576 6.38698 13.1027 5.74331 13.1027 5.02074C13.1027 4.28987 12.9576 3.64621 12.6673 3.08975C12.3769 2.53329 11.9768 2.09726 11.4667 1.78165C10.9645 1.46605 10.3839 1.30825 9.72479 1.30825H8.20648V8.7457Z"
        fill="url(#paint0_linear_2014_390)"
      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M14.1022 7.04579C13.8754 7.65435 13.5507 8.18773 13.1276 8.64421L13.1265 8.64533C12.703 9.09356 12.2021 9.44252 11.6253 9.69191L11.6242 9.6924C11.0524 9.93446 10.4185 10.0541 9.72485 10.0541H7.59451C7.37764 10.0541 7.18973 9.97366 7.04115 9.81639C6.89301 9.65958 6.82031 9.4652 6.82031 9.24407V0.809979C6.82031 0.583868 6.89108 0.386892 7.04306 0.235653C7.19134 0.0797122 7.37857 0 7.59451 0H9.72485C10.4187 0 11.0529 0.123822 11.6247 0.374356C12.2023 0.615679 12.7036 0.965065 13.127 1.42176C13.5506 1.87022 13.8754 2.39972 14.1022 3.00827C14.3295 3.61834 14.4419 4.28979 14.4419 5.0208C14.4419 5.75185 14.3292 6.42785 14.1022 7.04579ZM13.0086 1.53255C12.6006 1.09236 12.118 0.755995 11.5609 0.523445C11.0117 0.282589 10.3996 0.162162 9.72485 0.162162H7.59451C7.42188 0.162162 7.27672 0.224452 7.15902 0.349032C7.04132 0.465307 6.98247 0.618956 6.98247 0.809979V9.24407C6.98247 9.42679 7.04132 9.58044 7.15902 9.70502C7.27672 9.8296 7.42188 9.89189 7.59451 9.89189H9.72485C10.3996 9.89189 11.0117 9.77562 11.5609 9.54307C12.118 9.30221 12.6006 8.96585 13.0086 8.53397C13.4167 8.09378 13.7305 7.57885 13.9502 6.98917C14.1699 6.39118 14.2798 5.73506 14.2798 5.0208C14.2798 4.30654 14.1699 3.65457 13.9502 3.06489C13.7305 2.4752 13.4167 1.96443 13.0086 1.53255ZM11.3805 1.91901C10.907 1.62142 10.3569 1.47046 9.72485 1.47046H8.3687V8.58359H9.72485C10.3568 8.58359 10.9067 8.43272 11.3801 8.13528C11.8649 7.82736 12.2457 7.40915 12.5233 6.87725C12.8001 6.33851 12.9406 5.72099 12.9406 5.0208C12.9406 4.31174 12.7999 3.69458 12.5235 3.16481C12.246 2.63293 11.8655 2.21915 11.3815 1.9196L11.3805 1.91901ZM8.20654 8.74575V1.3083H9.72485C10.384 1.3083 10.9646 1.4661 11.4668 1.78171C11.9768 2.09731 12.377 2.53334 12.6673 3.0898C12.9576 3.64626 13.1028 4.28993 13.1028 5.0208C13.1028 5.74336 12.9576 6.38703 12.6673 6.95179C12.377 7.50825 11.9768 7.94844 11.4668 8.27235C10.9646 8.58795 10.384 8.74575 9.72485 8.74575H8.20654Z"
        fill="url(#paint1_linear_2014_390)"
      />
      <path
        d="M3.41924 9.89184C2.85053 9.89184 2.34628 9.76327 1.90648 9.50613C1.46668 9.2407 1.12167 8.88403 0.871439 8.43611C0.621209 7.9799 0.496094 7.46978 0.496094 6.90573C0.496094 6.71495 0.545382 6.5615 0.643957 6.44537C0.750115 6.32095 0.87523 6.25874 1.0193 6.25874C1.17096 6.25874 1.29607 6.32095 1.39465 6.44537C1.49322 6.5615 1.54251 6.71495 1.54251 6.90573C1.54251 7.24582 1.62213 7.56102 1.78137 7.85133C1.9406 8.13335 2.15671 8.36146 2.42969 8.53565C2.70267 8.70154 3.00977 8.78449 3.35099 8.78449C3.85145 8.78449 4.25334 8.63519 4.55665 8.33658C4.86754 8.02967 5.02299 7.60249 5.02299 7.05504C5.02299 6.70666 4.95474 6.39561 4.81825 6.12188C4.68176 5.83986 4.49599 5.6159 4.26092 5.45001C4.02586 5.28411 3.76046 5.20116 3.46473 5.20116C3.29791 5.20116 3.15763 5.13895 3.04389 5.01453C2.93773 4.89011 2.88466 4.73666 2.88466 4.55417C2.88466 4.37169 2.93773 4.22238 3.04389 4.10626C3.15763 3.98184 3.29791 3.91963 3.46473 3.91963C3.67705 3.91963 3.88178 3.86156 4.07894 3.74544C4.27609 3.62102 4.43912 3.45927 4.56802 3.26019C4.69693 3.05283 4.76138 2.82057 4.76138 2.56344C4.76138 2.19847 4.64006 1.89156 4.39741 1.64272C4.15476 1.39388 3.84387 1.26946 3.46473 1.26946C3.17659 1.26946 2.91119 1.33167 2.66855 1.45609C2.43348 1.58051 2.24391 1.7464 2.09984 1.95377C1.96335 2.16114 1.89511 2.39339 1.89511 2.65053C1.89511 2.84131 1.84582 3.00306 1.74724 3.13577C1.64867 3.26019 1.52355 3.32241 1.3719 3.32241C1.22783 3.32241 1.10271 3.26434 0.996554 3.14822C0.897978 3.02379 0.848691 2.87034 0.848691 2.68786C0.848691 2.20676 0.962432 1.77544 1.18991 1.39388C1.4174 1.01232 1.72829 0.71371 2.12259 0.498046C2.51689 0.274088 2.95669 0.162109 3.44199 0.162109C3.88937 0.162109 4.29125 0.269941 4.64764 0.485604C5.01161 0.692973 5.29596 0.979141 5.5007 1.34411C5.71301 1.70078 5.81917 2.10723 5.81917 2.56344C5.81917 2.88693 5.75093 3.1731 5.61444 3.42194C5.48553 3.67078 5.31871 3.88645 5.11398 4.06893C4.90925 4.24312 4.69314 4.38828 4.46566 4.50441C4.86754 4.65371 5.1936 4.85693 5.44383 5.11407C5.69406 5.36291 5.87604 5.65323 5.98979 5.98502C6.11111 6.31681 6.17177 6.67763 6.17177 7.06748C6.17177 7.60664 6.04666 8.09188 5.79642 8.52321C5.54619 8.94624 5.21255 9.28218 4.7955 9.53102C4.37845 9.77157 3.9197 9.89184 3.41924 9.89184Z"
        fill="url(#paint2_linear_2014_390)"
      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M1.82225 9.64504L1.82226 9.64502C1.35836 9.36505 0.993424 8.9878 0.729435 8.51525L0.72882 8.51415C0.464398 8.03206 0.333496 7.49474 0.333496 6.90579C0.333496 6.68657 0.390655 6.49274 0.519895 6.34049L0.520159 6.34017L0.52016 6.34017C0.652471 6.1851 0.820593 6.09663 1.01887 6.09663C1.22177 6.09663 1.39214 6.18282 1.51962 6.3426C1.6476 6.49452 1.70424 6.68758 1.70424 6.90579C1.70424 7.21903 1.77719 7.50702 1.92263 7.77253C2.06847 8.0305 2.26538 8.23843 2.51496 8.39803C2.76045 8.54684 3.03756 8.62238 3.35056 8.62238C3.81642 8.62238 4.17465 8.48465 4.44233 8.22118C4.71495 7.95204 4.86039 7.57076 4.86039 7.05509C4.86039 6.72832 4.79651 6.4426 4.67269 6.1943L4.67184 6.19258L4.67185 6.19258C4.54623 5.93302 4.37764 5.73122 4.16698 5.58255C3.96008 5.43653 3.72754 5.36338 3.4643 5.36338C3.2514 5.36338 3.06786 5.28162 2.92377 5.124L2.92002 5.1199L2.9201 5.11984C2.78596 4.96263 2.72206 4.77052 2.72206 4.55423C2.72206 4.33815 2.78596 4.14765 2.92377 3.9969C3.06786 3.83927 3.2514 3.75752 3.4643 3.75752C3.64469 3.75752 3.82054 3.70878 3.99407 3.60702C4.16962 3.49581 4.31489 3.35177 4.43065 3.17337C4.5422 2.99341 4.59878 2.79152 4.59878 2.56349C4.59878 2.23847 4.49239 1.9729 4.28087 1.75598C4.07168 1.54145 3.80411 1.43167 3.4643 1.43167C3.20076 1.43167 2.96124 1.48826 2.74304 1.59996C2.53069 1.71253 2.36193 1.86075 2.23375 2.04467C2.11607 2.22415 2.05683 2.42465 2.05683 2.65058C2.05683 2.87062 1.99943 3.06768 1.87699 3.23252L1.87398 3.23658L1.87391 3.23653C1.74624 3.39767 1.57527 3.48462 1.37146 3.48462C1.17738 3.48462 1.01015 3.40396 0.876431 3.25768L0.868696 3.24922L0.869014 3.24897C0.744411 3.0917 0.686093 2.90122 0.686093 2.68791C0.686093 2.18009 0.806503 1.71963 1.05019 1.31089C1.29247 0.904516 1.62434 0.585796 2.0432 0.356451C2.46333 0.118084 2.93067 0 3.44155 0C3.9155 0 4.3462 0.114431 4.72933 0.345813C5.11738 0.567324 5.42193 0.873798 5.64067 1.26301C5.86866 1.64678 5.9809 2.08181 5.9809 2.56349C5.9809 2.90968 5.90782 3.22278 5.75711 3.49828C5.61943 3.76358 5.4408 3.99452 5.22144 4.19004L5.21865 4.19253L5.21862 4.19249C5.09275 4.29959 4.96247 4.39642 4.82778 4.48287C5.11307 4.62161 5.35748 4.79356 5.55869 5.00008C5.82555 5.26574 6.02046 5.57653 6.14221 5.93091C6.27032 6.28187 6.3335 6.66124 6.3335 7.06753C6.3335 7.63287 6.20198 8.14659 5.93626 8.60463L5.93557 8.60582C5.67171 9.05188 5.31877 9.40743 4.87816 9.67033L4.8761 9.67156L4.87609 9.67154C4.43341 9.92687 3.94653 10.0541 3.4188 10.0541C2.82476 10.0541 2.29163 9.91947 1.8242 9.64618L1.82225 9.64504ZM5.98935 5.98507C5.87561 5.65328 5.69362 5.36296 5.44339 5.11412C5.23495 4.89993 4.9739 4.72315 4.66024 4.58378C4.59735 4.55584 4.53234 4.5294 4.46522 4.50446C4.52745 4.47269 4.58884 4.43875 4.64937 4.40263C4.8101 4.30673 4.96482 4.19552 5.11354 4.06898C5.31828 3.8865 5.4851 3.67084 5.614 3.422C5.75049 3.17315 5.81874 2.88698 5.81874 2.56349C5.81874 2.10728 5.71258 1.70084 5.50026 1.34416C5.29553 0.979194 5.01118 0.693026 4.6472 0.485657C4.29082 0.269994 3.88893 0.162162 3.44155 0.162162C2.95626 0.162162 2.51646 0.274141 2.12215 0.498099C1.72785 0.713762 1.41696 1.01237 1.18948 1.39393C0.961996 1.77549 0.848255 2.20682 0.848255 2.68791C0.848255 2.87039 0.897543 3.02385 0.996119 3.14827C1.10228 3.26439 1.22739 3.32246 1.37146 3.32246C1.52312 3.32246 1.64823 3.26025 1.74681 3.13583C1.84538 3.00311 1.89467 2.84136 1.89467 2.65058C1.89467 2.39345 1.96292 2.16119 2.09941 1.95383C2.24348 1.74646 2.43305 1.58056 2.66811 1.45614C2.91076 1.33172 3.17615 1.26951 3.4643 1.26951C3.84344 1.26951 4.15433 1.39393 4.39697 1.64277C4.63962 1.89162 4.76095 2.19852 4.76095 2.56349C4.76095 2.82063 4.69649 3.05288 4.56759 3.26025C4.43868 3.45932 4.27565 3.62107 4.0785 3.74549C3.88135 3.86162 3.67662 3.91968 3.4643 3.91968C3.29748 3.91968 3.1572 3.98189 3.04346 4.10631C2.9373 4.22244 2.88422 4.37174 2.88422 4.55423C2.88422 4.73671 2.9373 4.89016 3.04346 5.01459C3.1572 5.13901 3.29748 5.20122 3.4643 5.20122C3.76003 5.20122 4.02542 5.28416 4.26049 5.45006C4.49555 5.61595 4.68133 5.83991 4.81782 6.12193C4.95431 6.39566 5.02255 6.70671 5.02255 7.05509C5.02255 7.60254 4.8671 8.02972 4.55621 8.33663C4.2529 8.63524 3.85102 8.78454 3.35056 8.78454C3.00933 8.78454 2.70223 8.7016 2.42926 8.5357C2.15628 8.36151 1.94017 8.13341 1.78093 7.85139C1.62169 7.56107 1.54208 7.24587 1.54208 6.90579C1.54208 6.71501 1.49279 6.56155 1.39421 6.44543C1.29564 6.32101 1.17052 6.2588 1.01887 6.2588C0.874794 6.2588 0.74968 6.32101 0.643522 6.44543C0.544946 6.56155 0.495658 6.71501 0.495658 6.90579C0.495658 7.46983 0.620774 7.97995 0.871004 8.43617C1.12123 8.88408 1.46625 9.24076 1.90605 9.50619C2.34585 9.76332 2.8501 9.89189 3.4188 9.89189C3.91926 9.89189 4.37802 9.77162 4.79507 9.53107C5.21212 9.28223 5.54576 8.94629 5.79599 8.52326C6.04622 8.09193 6.17133 7.60669 6.17133 7.06753C6.17133 6.67768 6.11067 6.31686 5.98935 5.98507Z"
        fill="url(#paint3_linear_2014_390)"
      />
      <defs>
        <linearGradient
          id="paint0_linear_2014_390"
          x1="10.6311"
          y1="0.162109"
          x2="10.6311"
          y2="9.89184"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="${A}" />
          <stop offset="1" stop-color="${Q}" />
        </linearGradient>
        <linearGradient
          id="paint1_linear_2014_390"
          x1="10.6311"
          y1="0"
          x2="10.6311"
          y2="10.0541"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="${A}" />
          <stop offset="1" stop-color="${Q}" />
        </linearGradient>
        <linearGradient
          id="paint2_linear_2014_390"
          x1="3.33393"
          y1="0.162109"
          x2="3.33393"
          y2="9.89184"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="${A}" />
          <stop offset="1" stop-color="${Q}" />
        </linearGradient>
        <linearGradient
          id="paint3_linear_2014_390"
          x1="3.3335"
          y1="0"
          x2="3.3335"
          y2="10.0541"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="${A}" />
          <stop offset="1" stop-color="${Q}" />
        </linearGradient>
      </defs>
    </svg>
  `},mz=(A,Q)=>{if(!A||!Q)A="#0CB7EB",Q="#9747FF";return v`
    <svg
      id="ek-model-viewer-border-icon"
      xmlns="http://www.w3.org/2000/svg"
      width="30"
      height="30"
      viewBox="0 0 30 30"
      fill="none"
    >
      <path
        d="M15 30C12.925 30 10.975 29.6063 9.15001 28.8188C7.32501 28.0313 5.73751 26.9625 4.3875 25.6125C3.0375 24.2625 1.96875 22.675 1.18125 20.85C0.393754 19.025 2.98549e-06 17.075 2.62268e-06 15L1.66667 15C1.66667 18.4722 2.82853 21.4733 5.15225 24.0032C7.47598 26.5331 10.3675 27.9573 13.8269 28.2756L11.218 25.6667L12.3974 24.4872L17.609 29.6987C17.1881 29.8056 16.7548 29.8825 16.3093 29.9295C15.8638 29.9765 15.4274 30 15 30ZM28.3333 15C28.3333 11.5278 27.1715 8.5267 24.8478 5.99679C22.524 3.46687 19.6325 2.04273 16.1731 1.72437L18.782 4.33333L17.6026 5.51283L12.391 0.301289C12.8119 0.194428 13.2452 0.117498 13.6907 0.0704977C14.1362 0.0234976 14.5726 -2.54796e-06 15 -2.62268e-06C17.075 -2.98549e-06 19.025 0.393747 20.85 1.18125C22.675 1.96875 24.2625 3.0375 25.6125 4.3875C26.9625 5.73749 28.0313 7.325 28.8188 9.15C29.6063 10.975 30 12.925 30 15L28.3333 15Z"
        fill="url(#paint0_linear_2014_389)"
      />
      <defs>
        <linearGradient
          id="paint0_linear_2014_389"
          x1="15"
          y1="-2.62268e-06"
          x2="15"
          y2="30"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="${A}" />
          <stop offset="1" stop-color="${Q}" />
        </linearGradient>
      </defs>
    </svg>
  `};var qZ=(A,Q)=>{if(!A||!Q)A="#0CB7EB",Q="#9747FF";return v`
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="20"
      height="30"
      viewBox="-1 8 15 8"
      fill="none"
    >
      <path
        d="M11.4782 7.647C12.5325 7.647 13.3899 6.74497 13.3899 5.63861V2.77304C13.3899 1.66543 12.5313 0.764648 11.4782 0.764648C10.425 0.764648 9.56641 1.66668 9.56641 2.77304V5.63861C9.56641 6.74622 10.425 7.647 11.4782 7.647ZM10.6314 2.77179C10.6314 2.27343 11.0026 1.88222 11.4782 1.88222C11.9537 1.88222 12.3249 2.27219 12.3249 2.77179V5.63736C12.3249 6.11953 11.9371 6.52694 11.4782 6.52694C11.0192 6.52694 10.6314 6.11953 10.6314 5.63736V2.77179Z"
        fill="url(#paint0_linear_2014_286)"
      />
      <path
        d="M2.30082 6.52818C1.82658 6.52818 1.45431 6.13822 1.45431 5.63861C1.45431 5.32963 1.216 5.0792 0.921978 5.0792C0.627952 5.0792 0.389648 5.32963 0.389648 5.63861C0.389648 6.74622 1.24802 7.647 2.30082 7.647C3.35363 7.647 4.21318 6.74497 4.21318 5.63861C4.21318 5.07173 3.98792 4.55966 3.62631 4.19337C3.98673 3.8333 4.21318 3.32996 4.21318 2.77304C4.21318 1.66543 3.35481 0.764648 2.30082 0.764648C1.24683 0.764648 0.389648 1.66668 0.389648 2.77304C0.389648 3.08202 0.627952 3.33245 0.921978 3.33245C1.216 3.33245 1.45431 3.08202 1.45431 2.77304C1.45431 2.27468 1.8254 1.88347 2.30082 1.88347C2.77624 1.88347 3.14733 2.27343 3.14733 2.77304C3.14733 3.24524 2.76794 3.62897 2.30082 3.62897C2.00679 3.62897 1.76849 3.8794 1.76849 4.18838C1.76849 4.49737 2.00679 4.74779 2.30082 4.74779C2.75964 4.74779 3.14733 5.1552 3.14733 5.63736C3.14733 6.11953 2.77506 6.52694 2.30082 6.52694V6.52818Z"
        fill="url(#paint1_linear_2014_286)"
      />
      <path
        d="M6.87425 7.647C7.95507 7.647 8.80156 6.7649 8.80156 5.63861C8.80156 4.51232 7.93594 3.62897 6.87425 3.62897C6.58013 3.62897 6.30156 3.70248 6.05287 3.83081V2.77304C6.05287 2.26596 6.40677 1.88347 6.87425 1.88347C7.36803 1.88347 7.72791 2.25724 7.72791 2.77304C7.72791 3.08202 7.96822 3.33245 8.26473 3.33245C8.56124 3.33245 8.80156 3.08202 8.80156 2.77304C8.80156 1.64675 7.95507 0.764648 6.87425 0.764648C5.79343 0.764648 4.97803 1.64675 4.97803 2.77304V5.63861C4.97803 6.7649 5.81136 7.647 6.87425 7.647ZM6.87425 4.74779C7.35249 4.74779 7.72791 5.139 7.72791 5.63736C7.72791 6.13572 7.36923 6.52694 6.87425 6.52694C6.40557 6.52694 6.05287 6.14445 6.05287 5.63736C6.05287 5.13028 6.42112 4.74779 6.87425 4.74779Z"
        fill="url(#paint2_linear_2014_286)"
      />
      <path
        d="M13.772 0.764706C13.9832 0.764706 14.1544 0.576216 14.1544 0.371192C14.1544 0.166168 13.9832 0 13.772 0C13.5608 0 13.3896 0.166168 13.3896 0.371192V0.415008C13.3896 0.620032 13.5608 0.764706 13.772 0.764706Z"
        fill="url(#paint3_linear_2014_286)"
      />
      <defs>
        <linearGradient
          id="paint0_linear_2014_286"
          x1="11.4782"
          y1="0.764648"
          x2="11.4782"
          y2="7.647"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="${A}" />
          <stop offset="1" stop-color="${Q}" />
        </linearGradient>
        <linearGradient
          id="paint1_linear_2014_286"
          x1="2.30141"
          y1="0.764648"
          x2="2.30141"
          y2="7.647"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="${A}" />
          <stop offset="1" stop-color="${Q}" />
        </linearGradient>
        <linearGradient
          id="paint2_linear_2014_286"
          x1="6.88979"
          y1="0.764648"
          x2="6.88979"
          y2="7.647"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="${A}" />
          <stop offset="1" stop-color="${Q}" />
        </linearGradient>
        <linearGradient
          id="paint3_linear_2014_286"
          x1="13.772"
          y1="0"
          x2="13.772"
          y2="0.764706"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="${A}" />
          <stop offset="1" stop-color="${Q}" />
        </linearGradient>
      </defs>
    </svg>
  `},KZ=(A,Q)=>{if(!A||!Q)A="#0CB7EB",Q="#9747FF";return v`
    <svg
      id="ek-pc-rooms-icon-border"
      xmlns="http://www.w3.org/2000/svg"
      width="30"
      height="30"
      viewBox="0 0 26 22"
      fill="none"
    >
      <path
        d="M20.8453 0.84059C20.5796 0.769368 20.3027 0.932827 20.2324 1.21421C20.1621 1.49443 20.3217 1.78165 20.5897 1.8552C23.2669 2.59661 24.9974 3.76534 24.9974 4.836C24.9974 5.90666 23.2669 7.07422 20.5897 7.81679C20.5785 7.82029 20.5696 7.82497 20.5595 7.82847C20.5428 7.83431 20.526 7.84014 20.5093 7.84832C20.4936 7.85532 20.4802 7.86466 20.4657 7.87284C20.4523 7.88101 20.4389 7.88918 20.4267 7.89852C20.4121 7.90903 20.3987 7.92187 20.3853 7.93355C20.3742 7.94406 20.3641 7.9534 20.3541 7.96391C20.3418 7.97675 20.3318 7.99193 20.3206 8.00594C20.3117 8.01878 20.3027 8.03046 20.2949 8.0433C20.286 8.05848 20.2782 8.07366 20.2704 8.09C20.2637 8.10401 20.257 8.11919 20.2514 8.13437C20.2447 8.15072 20.2402 8.16823 20.2357 8.18574C20.2313 8.20092 20.2279 8.2161 20.2246 8.23128C20.2212 8.24996 20.2201 8.26981 20.219 8.28966C20.219 8.30017 20.2156 8.31067 20.2156 8.32235V13.2763C15.8994 12.2722 10.1262 12.2652 5.78435 13.2763V8.32235C5.78435 8.31067 5.78212 8.30133 5.781 8.28966C5.77989 8.26981 5.77877 8.25113 5.77542 8.23128C5.77319 8.21493 5.76872 8.19975 5.76426 8.18458C5.75979 8.16706 5.75532 8.15072 5.74863 8.13437C5.74304 8.11919 5.73635 8.10401 5.72853 8.08884C5.72183 8.07366 5.71402 8.05848 5.70508 8.04447C5.69615 8.03046 5.68722 8.01761 5.67717 8.00477C5.66712 7.99076 5.65708 7.97792 5.64591 7.96507C5.63475 7.9534 5.62358 7.94289 5.61242 7.93121C5.60014 7.91954 5.58786 7.90903 5.57446 7.89852C5.56106 7.88801 5.54655 7.87984 5.53203 7.8705C5.51864 7.86233 5.50524 7.85415 5.49073 7.84715C5.47398 7.83898 5.45723 7.83314 5.43937 7.8273C5.42932 7.8238 5.42039 7.81796 5.40922 7.81562C2.73085 7.07422 1.00146 5.90432 1.00146 4.83483C1.00146 3.76534 2.73197 2.59544 5.40922 1.85404C5.67717 1.78048 5.83683 1.49209 5.76537 1.21304C5.69504 0.932828 5.41816 0.769368 5.15244 0.839422C1.87899 1.74779 0 3.20374 0 4.836V17.4585C0 19.0803 1.82875 20.4989 5.15021 21.4516C5.15691 21.454 5.1636 21.454 5.1703 21.4563C5.17812 21.4586 5.18593 21.4598 5.19375 21.461C5.22278 21.4668 5.25292 21.4703 5.28195 21.4703C5.31321 21.4703 5.34335 21.4668 5.3735 21.461C5.38466 21.4586 5.39471 21.4551 5.40476 21.4528C5.42374 21.4481 5.4416 21.4423 5.46058 21.4353C5.47175 21.4306 5.48403 21.4259 5.49519 21.4201C5.51194 21.4119 5.52645 21.4026 5.54208 21.3932C5.55213 21.3862 5.56218 21.3804 5.57223 21.3734C5.58897 21.3606 5.60349 21.3477 5.61912 21.3325C5.62582 21.3255 5.63363 21.3197 5.64033 21.3127C5.66154 21.2905 5.68052 21.2671 5.69727 21.2415C5.70062 21.2356 5.70397 21.2298 5.70732 21.2239C5.7196 21.2029 5.73076 21.1819 5.74081 21.1597C5.74528 21.1481 5.74863 21.1364 5.75309 21.1259C5.75756 21.113 5.76314 21.1002 5.76761 21.0862C5.76872 21.0803 5.76872 21.0757 5.76984 21.0698C5.77319 21.0535 5.77542 21.036 5.77765 21.0185C5.77989 20.9998 5.78212 20.9811 5.78324 20.9636C5.78324 20.9577 5.78435 20.9531 5.78435 20.9484V14.3552C10.0782 13.3067 15.9497 13.3137 20.2156 14.3552V20.9484C20.2156 20.9484 20.2168 20.9589 20.2168 20.9636C20.2168 20.9823 20.2201 20.9998 20.2223 21.0185C20.2246 21.036 20.2268 21.0535 20.2302 21.0698C20.2313 21.0757 20.2313 21.0803 20.2324 21.0862C20.2357 21.1002 20.2413 21.113 20.2469 21.1259C20.2514 21.1375 20.2547 21.1492 20.2592 21.1597C20.2692 21.1819 20.2804 21.2041 20.2927 21.2239C20.296 21.2298 20.2994 21.2368 20.3027 21.2415C20.3195 21.2671 20.3385 21.2905 20.3597 21.3127C20.3664 21.3197 20.3742 21.3255 20.3809 21.3325C20.3954 21.3465 20.411 21.3606 20.4278 21.3734C20.4378 21.3804 20.4479 21.3874 20.4579 21.3932C20.4735 21.4026 20.4892 21.4119 20.5048 21.4201C20.516 21.4259 20.5271 21.4306 20.5394 21.4353C20.5573 21.4423 20.5763 21.4481 20.5952 21.4528C20.6053 21.4551 20.6153 21.4586 20.6265 21.461C20.6566 21.4668 20.6868 21.4703 20.7181 21.4703C20.7471 21.4703 20.7772 21.4668 20.8063 21.461C20.8141 21.4598 20.8219 21.4575 20.8297 21.4563C20.8364 21.4551 20.8431 21.454 20.8498 21.4516C24.1712 20.4977 26 19.0791 26 17.4585V4.836C26 3.20374 24.121 1.74779 20.8453 0.841758V0.84059ZM1.00369 17.4585V6.81152C1.81424 7.56226 3.09816 8.21727 4.78178 8.72166V20.2444C2.43499 19.4749 1.00369 18.4311 1.00369 17.4585ZM21.2193 20.2455V8.72282C22.903 8.21844 24.1858 7.56343 24.9974 6.81269V17.4597C24.9974 18.4323 23.5661 19.4761 21.2193 20.2455Z"
        fill="url(#paint0_linear_2014_291)"
      />
      <defs>
        <linearGradient
          id="paint0_linear_2014_291"
          x1="13"
          y1="0.823242"
          x2="13"
          y2="21.4703"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="${A}" />
          <stop offset="1" stop-color="${Q}" />
        </linearGradient>
      </defs>
    </svg>
  `},YZ=(A,Q)=>{if(!A||!Q)A="#0CB7EB",Q="#9747FF";return v`
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="10"
      height="10"
      viewBox="0 0 8 8"
      fill="none"
    >
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M7.53557 7.53584C7.92609 7.14531 7.92609 6.51215 7.53557 6.12162L5.41419 4.00024L7.53535 1.87908C7.92587 1.48855 7.92587 0.855386 7.53535 0.464862C7.14482 0.0743378 6.51166 0.0743377 6.12113 0.464862L3.99997 2.58602L1.87871 0.464768C1.48819 0.0742437 0.855025 0.0742441 0.464501 0.464768C0.0739769 0.855293 0.0739771 1.48846 0.464501 1.87898L2.58576 4.00024L0.46428 6.12172C0.0737555 6.51224 0.0737558 7.1454 0.46428 7.53593C0.854804 7.92645 1.48797 7.92645 1.87849 7.53593L3.99997 5.41445L6.12136 7.53584C6.51188 7.92636 7.14504 7.92636 7.53557 7.53584Z"
        fill="url(#paint0_linear_2014_305)"
      />
      <defs>
        <linearGradient
          id="paint0_linear_2014_305"
          x1="3.99992"
          y1="0.171875"
          x2="3.99992"
          y2="7.82882"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="${A}" />
          <stop offset="1" stop-color="${Q}" />
        </linearGradient>
      </defs>
    </svg>
  `};var BJ=()=>{return v`
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="68"
      height="22"
      viewBox="0 0 68 22"
      fill="none"
    >
      <path
        d="M8.09876 14.6844C8.23206 14.5539 8.30013 14.3922 8.30013 14.1965C8.30013 13.4591 8.16116 12.7982 7.8832 12.231C7.60524 11.6609 7.19681 11.2071 6.66926 10.8837C6.14171 10.5604 5.50637 10.3959 4.77177 10.3959C4.03717 10.3959 3.36496 10.5661 2.79486 10.8979C2.22193 11.2297 1.76812 11.6977 1.44195 12.2849C1.11861 12.872 0.954102 13.5584 0.954102 14.3242C0.954102 15.09 1.12712 15.765 1.47031 16.3493C1.8135 16.9364 2.29284 17.4016 2.89981 17.7362C3.50394 18.0681 4.20451 18.2383 4.98166 18.2383C5.41277 18.2383 5.86942 18.1588 6.34308 18C6.81675 17.8412 7.21667 17.6313 7.53717 17.3789C7.71302 17.2456 7.79811 17.081 7.78676 16.891C7.77542 16.7067 7.68466 16.5365 7.51164 16.3833C7.37834 16.2699 7.22234 16.216 7.04081 16.2216C6.86496 16.2273 6.70046 16.284 6.55013 16.3947C6.37145 16.528 6.1332 16.6499 5.84106 16.752C5.54892 16.8541 5.25961 16.908 4.98166 16.908C4.46828 16.908 4.0088 16.7946 3.61456 16.5705C3.22031 16.3464 2.90548 16.0373 2.68141 15.6515C2.54811 15.4246 2.45451 15.1665 2.40062 14.8801H7.59106C7.79244 14.8801 7.96545 14.8148 8.09876 14.6872V14.6844ZM2.41764 13.6293C2.46585 13.3939 2.53676 13.1783 2.63036 12.9854C2.81755 12.5968 3.09551 12.2877 3.45856 12.0636C3.82161 11.8396 4.26407 11.7261 4.77461 11.7261C5.21991 11.7261 5.60564 11.831 5.9148 12.0353C6.22679 12.2395 6.47072 12.5231 6.6409 12.8748C6.74868 13.1017 6.82526 13.3541 6.87064 13.6293H2.41764Z"
        fill="white"
      />
      <path
        d="M16.3011 10.9146C16.2359 10.7501 16.0884 10.6197 15.8643 10.5232C15.4332 10.3446 15.1013 10.4693 14.9 10.892L12.7273 15.7959L10.2512 10.8749C10.1605 10.6849 10.0272 10.5516 9.85133 10.4864C9.67832 10.4211 9.49112 10.4268 9.30109 10.5091C9.10822 10.5913 8.97208 10.7218 8.8955 10.9005C8.81892 11.082 8.83026 11.272 8.93237 11.4677L12.0353 17.3616L10.6654 20.456C10.5661 20.6687 10.5462 20.8587 10.6058 21.0232C10.6654 21.1877 10.81 21.3239 11.0341 21.426C11.1702 21.4856 11.2922 21.5139 11.3943 21.5139C11.6751 21.5139 11.8793 21.3551 11.9984 21.0431L16.2444 11.4933C16.3436 11.2749 16.3635 11.0792 16.2983 10.9175L16.3011 10.9146Z"
        fill="white"
      />
      <path
        d="M67.9193 10.9146C67.854 10.7501 67.7065 10.6197 67.4825 10.5232C67.0513 10.3417 66.7195 10.4693 66.5181 10.892L64.3455 15.7959L61.8694 10.8749C61.7787 10.6849 61.6453 10.5516 61.4695 10.4864C61.2965 10.4211 61.1093 10.4268 60.9193 10.5091C60.7264 10.5913 60.5902 10.7218 60.5137 10.9005C60.4371 11.082 60.4484 11.272 60.5505 11.4677L63.6535 17.3616L62.2835 20.456C62.1842 20.6687 62.1644 20.8587 62.224 21.0232C62.2835 21.1877 62.4282 21.3239 62.6522 21.426C62.7912 21.4856 62.9103 21.5139 63.0124 21.5139C63.2932 21.5139 63.4975 21.3551 63.6166 21.0431L67.8625 11.4933C67.9618 11.2749 67.9817 11.0792 67.9164 10.9175L67.9193 10.9146Z"
        fill="white"
      />
      <path
        d="M59.0076 7.41478C58.8658 7.27297 58.6758 7.19922 58.446 7.19922C58.2163 7.19922 58.0376 7.27013 57.8901 7.41194C57.7426 7.55376 57.6689 7.74379 57.6689 7.97637V11.5359C57.3711 11.2069 57.0137 10.9403 56.6024 10.7389C56.1316 10.5092 55.6125 10.3929 55.0595 10.3929C54.3731 10.3929 53.7491 10.5659 53.2045 10.9091C52.66 11.2523 52.226 11.7231 51.9112 12.3102C51.5963 12.8974 51.4375 13.5667 51.4375 14.307C51.4375 15.0473 51.6105 15.7223 51.9537 16.3123C52.2969 16.9022 52.7677 17.3759 53.352 17.7191C53.9391 18.0623 54.6057 18.2353 55.3374 18.2353C56.0692 18.2353 56.7329 18.0623 57.3172 17.7191C57.8986 17.3759 58.3666 16.9022 58.7098 16.3123C59.053 15.7223 59.226 15.0473 59.226 14.307V7.9792C59.226 7.74946 59.1551 7.55943 59.0104 7.41762L59.0076 7.41478ZM57.7228 14.307C57.7228 14.7835 57.6178 15.2203 57.4108 15.606C57.2065 15.9918 56.9201 16.2981 56.5599 16.5165C56.2025 16.7349 55.7912 16.8455 55.3318 16.8455C54.8723 16.8455 54.4723 16.7349 54.1121 16.5165C53.7491 16.2981 53.4598 15.9918 53.2499 15.606C53.04 15.2203 52.9322 14.7835 52.9322 14.307C52.9322 13.8305 53.04 13.3852 53.2499 13.008C53.4598 12.6307 53.7519 12.3301 54.1121 12.1089C54.4752 11.8905 54.8836 11.7799 55.3318 11.7799C55.7799 11.7799 56.2025 11.8905 56.5599 12.1089C56.9172 12.3273 57.2037 12.6307 57.4108 13.0051C57.6178 13.3824 57.7228 13.8192 57.7228 14.3042V14.307Z"
        fill="white"
      />
      <path
        d="M23.9201 14.6844C24.0534 14.5539 24.1215 14.3922 24.1215 14.1965C24.1215 13.4591 23.9825 12.7982 23.7046 12.231C23.4266 11.6609 23.0182 11.2071 22.4906 10.8837C21.9631 10.5604 21.3278 10.3959 20.5932 10.3959C19.8585 10.3959 19.1863 10.5661 18.6162 10.8979C18.0433 11.2297 17.5895 11.6977 17.2662 12.2849C16.9428 12.872 16.7783 13.5584 16.7783 14.3242C16.7783 15.09 16.9513 15.765 17.2945 16.3493C17.6377 16.9364 18.1171 17.4016 18.724 17.7362C19.3282 18.0681 20.0287 18.2383 20.8059 18.2383C21.237 18.2383 21.6936 18.1588 22.1673 18C22.641 17.8412 23.0409 17.6313 23.3614 17.3789C23.5372 17.2456 23.6223 17.081 23.611 16.891C23.5996 16.7067 23.5089 16.5365 23.3359 16.3833C23.2026 16.2699 23.0494 16.2131 22.865 16.2216C22.6892 16.2273 22.5247 16.284 22.3744 16.3947C22.1957 16.528 21.9574 16.6499 21.6653 16.752C21.3731 16.8541 21.0838 16.908 20.8059 16.908C20.2925 16.908 19.833 16.7946 19.4388 16.5705C19.0445 16.3464 18.7325 16.0373 18.5056 15.6515C18.3723 15.4246 18.2787 15.1665 18.2248 14.8801H23.4153C23.6167 14.8801 23.7868 14.8148 23.923 14.6872L23.9201 14.6844ZM18.239 13.6293C18.2872 13.3939 18.3581 13.1783 18.4517 12.9854C18.6389 12.5968 18.9169 12.2877 19.2799 12.0636C19.643 11.8396 20.0855 11.7261 20.596 11.7261C21.0441 11.7261 21.427 11.831 21.7362 12.0353C22.0482 12.2395 22.2921 12.5231 22.4623 12.8748C22.5701 13.1017 22.6466 13.3541 22.692 13.6293H18.239Z"
        fill="white"
      />
      <path
        d="M39.8739 12.316C39.5308 11.726 39.0628 11.2523 38.4813 10.9091C37.8999 10.566 37.2333 10.3929 36.5044 10.3929C35.7755 10.3929 35.1061 10.566 34.519 10.9091C33.9319 11.2523 33.4611 11.726 33.1207 12.316C32.7775 12.9059 32.6045 13.5809 32.6045 14.3212C32.6045 15.0615 32.7633 15.7337 33.0782 16.318C33.393 16.9051 33.8269 17.3759 34.3715 17.7191C34.9161 18.0623 35.5401 18.2353 36.2265 18.2353C36.9128 18.2353 37.5368 18.0623 38.0814 17.7191C38.3537 17.5461 38.609 17.3305 38.8359 17.0781V17.4185C38.8359 17.6397 38.9096 17.8269 39.0571 17.9744C39.2046 18.1219 39.3889 18.1956 39.613 18.1956C39.8371 18.1956 40.0214 18.1219 40.1689 17.9744C40.3164 17.8269 40.3901 17.6397 40.3901 17.4185V14.3241C40.3901 13.5838 40.2171 12.9087 39.8739 12.3188V12.316ZM38.8897 14.3212C38.8897 14.7977 38.7848 15.2317 38.5778 15.6146C38.3707 15.9946 38.0842 16.2981 37.7269 16.5194C37.3695 16.7378 36.9582 16.8484 36.4987 16.8484C36.0393 16.8484 35.6393 16.7378 35.2791 16.5194C34.9161 16.301 34.6268 15.9946 34.4169 15.6146C34.207 15.2345 34.0992 14.7977 34.0992 14.3241C34.0992 13.8504 34.207 13.3994 34.4169 13.0165C34.6268 12.6365 34.9189 12.333 35.2791 12.1117C35.6422 11.8933 36.0506 11.7827 36.4987 11.7827C36.9469 11.7827 37.3666 11.8933 37.7269 12.1117C38.0842 12.3301 38.3707 12.6365 38.5778 13.0165C38.7848 13.3966 38.8897 13.8362 38.8897 14.3241V14.3212Z"
        fill="white"
      />
      <path
        d="M31.6433 17.0667L28.9999 13.8107L31.4986 11.5813C31.649 11.4395 31.7312 11.275 31.7426 11.0906C31.7539 10.9063 31.6858 10.7333 31.544 10.5829C31.4107 10.4298 31.249 10.3475 31.059 10.3362C30.869 10.3277 30.696 10.3929 30.5456 10.5347L27.2896 13.4419V7.948C27.2896 7.72677 27.2187 7.54525 27.0825 7.40627C26.9435 7.26729 26.762 7.19922 26.5408 7.19922C26.3195 7.19922 26.138 7.27013 25.999 7.40627C25.8601 7.54241 25.792 7.72677 25.792 7.948V17.4269C25.792 17.6482 25.8629 17.8297 25.999 17.9687C26.138 18.1077 26.3195 18.1757 26.5408 18.1757C26.762 18.1757 26.9435 18.1048 27.0825 17.9687C27.2215 17.8297 27.2896 17.6482 27.2896 17.4269V15.3366L27.9022 14.7892L30.4974 17.997C30.6307 18.1587 30.7981 18.2495 30.9966 18.2665C31.0165 18.2665 31.0363 18.2665 31.0562 18.2665C31.232 18.2665 31.3937 18.2069 31.5383 18.0878C31.7085 17.946 31.805 17.7786 31.8191 17.5886C31.8333 17.3986 31.7766 17.2227 31.6433 17.0611V17.0667Z"
        fill="white"
      />
      <path
        d="M49.1713 12.0236C48.8763 11.4875 48.4651 11.0734 47.9517 10.7955C47.4383 10.5175 46.8512 10.3785 46.2045 10.3785C45.5578 10.3785 45.0189 10.5175 44.5198 10.7898C44.3014 10.9089 44.1 11.0507 43.9156 11.2181C43.9156 10.9912 43.8419 10.804 43.7001 10.6622C43.5582 10.5204 43.3682 10.4466 43.1385 10.4466C42.9087 10.4466 42.73 10.5175 42.5826 10.6593C42.4351 10.8012 42.3613 10.9912 42.3613 11.2238V17.4126C42.3613 17.6338 42.4351 17.821 42.5826 17.9685C42.73 18.116 42.9172 18.1897 43.1385 18.1897C43.3597 18.1897 43.5583 18.116 43.7029 17.9685C43.8447 17.821 43.9156 17.6338 43.9156 17.4126V13.4985C43.9156 13.1723 44.0036 12.8802 44.1794 12.6306C44.3553 12.3781 44.5992 12.1739 44.9027 12.0208C45.2061 11.8676 45.5493 11.791 45.9266 11.791C46.3378 11.791 46.7094 11.8704 47.0271 12.0264C47.3419 12.1824 47.5943 12.4235 47.7815 12.7412C47.9687 13.0617 48.0651 13.4843 48.0651 13.9977V17.4126C48.0651 17.6338 48.1389 17.821 48.2864 17.9685C48.4339 18.116 48.6182 18.1897 48.8423 18.1897C49.0664 18.1897 49.2507 18.116 49.3982 17.9685C49.5457 17.821 49.6194 17.6338 49.6194 17.4126V13.9977C49.6194 13.2205 49.4691 12.5568 49.1741 12.0208L49.1713 12.0236Z"
        fill="white"
      />
      <path
        d="M37.6824 6.86803C37.6476 6.86803 37.6042 6.85718 37.5521 6.83546C37.3914 6.76164 37.348 6.64656 37.4218 6.49023L39.4867 1.89796C39.5605 1.74597 39.6756 1.70472 39.8319 1.7742C39.9926 1.83934 40.0382 1.95225 39.9687 2.11292L37.8908 6.69867C37.8474 6.81158 37.7779 6.86803 37.6824 6.86803ZM38.4184 5.18746C38.349 5.2222 38.2838 5.22871 38.223 5.207C38.1622 5.18529 38.1123 5.13752 38.0732 5.0637L36.6141 2.11292C36.5794 2.0391 36.5728 1.97179 36.5946 1.91099C36.6206 1.8502 36.6684 1.80243 36.7379 1.76769C36.8117 1.73729 36.879 1.73295 36.9398 1.75466C37.0006 1.77637 37.0484 1.82197 37.0831 1.89145L38.5096 4.84874C38.5444 4.91822 38.5552 4.98553 38.5422 5.05067C38.5335 5.11146 38.4923 5.15706 38.4184 5.18746Z"
        fill="white"
      />
      <path
        d="M34.459 5.34376C34.1202 5.34376 33.8163 5.2656 33.547 5.10927C33.2778 4.94859 33.0628 4.73363 32.9021 4.46439C32.7458 4.19081 32.6655 3.88466 32.6611 3.54594V0.503972C32.6611 0.417121 32.685 0.349811 32.7328 0.302043C32.7849 0.249932 32.8544 0.223877 32.9412 0.223877C33.0237 0.223877 33.0889 0.249932 33.1366 0.302043C33.1888 0.349811 33.2148 0.417121 33.2148 0.503972V2.36693C33.3581 2.17152 33.5448 2.01519 33.775 1.89794C34.0052 1.77634 34.2614 1.71555 34.5436 1.71555C34.8737 1.71555 35.169 1.79589 35.4295 1.95656C35.6901 2.11289 35.8942 2.32785 36.0418 2.60143C36.1938 2.87501 36.2698 3.18334 36.2698 3.5264C36.2698 3.87381 36.1895 4.1843 36.0288 4.45788C35.8725 4.73146 35.6575 4.94859 35.3839 5.10927C35.1147 5.2656 34.8064 5.34376 34.459 5.34376ZM34.459 4.84871C34.7021 4.84871 34.9193 4.79009 35.1103 4.67284C35.3058 4.55559 35.4577 4.39926 35.5663 4.20384C35.6792 4.00408 35.7357 3.77827 35.7357 3.5264C35.7357 3.27887 35.6792 3.05523 35.5663 2.85547C35.4577 2.65571 35.3058 2.49938 35.1103 2.38648C34.9193 2.26923 34.7021 2.2106 34.459 2.2106C34.2245 2.2106 34.0095 2.26923 33.8141 2.38648C33.623 2.49938 33.4732 2.65571 33.3646 2.85547C33.2561 3.05523 33.2018 3.27887 33.2018 3.5264C33.2018 3.77827 33.2561 4.00408 33.3646 4.20384C33.4732 4.39926 33.623 4.55559 33.8141 4.67284C34.0095 4.79009 34.2245 4.84871 34.459 4.84871Z"
        fill="white"
      />
      <path
        d="M27.7747 5.34376C27.4317 5.34376 27.1233 5.2656 26.8498 5.10927C26.5762 4.94859 26.359 4.73146 26.1984 4.45788C26.042 4.1843 25.9639 3.87381 25.9639 3.5264C25.9639 3.18334 26.0399 2.87501 26.1919 2.60143C26.3438 2.32785 26.5501 2.11289 26.8107 1.95656C27.0712 1.79589 27.3665 1.71555 27.6966 1.71555C27.9788 1.71555 28.2329 1.77634 28.4587 1.89794C28.6888 2.01519 28.8756 2.17152 29.0189 2.36693V0.503972C29.0189 0.417121 29.0449 0.349811 29.097 0.302043C29.1535 0.249932 29.2208 0.223877 29.299 0.223877C29.3815 0.223877 29.4488 0.249932 29.5009 0.302043C29.553 0.349811 29.5791 0.417121 29.5791 0.503972V3.54594C29.5704 3.88466 29.4857 4.19081 29.325 4.46439C29.1687 4.73363 28.9559 4.94859 28.6867 5.10927C28.4174 5.2656 28.1134 5.34376 27.7747 5.34376ZM27.7747 4.84871C28.0179 4.84871 28.2329 4.79009 28.4196 4.67284C28.6107 4.55559 28.7605 4.39926 28.869 4.20384C28.982 4.00408 29.0384 3.77827 29.0384 3.5264C29.0384 3.27887 28.982 3.05523 28.869 2.85547C28.7605 2.65571 28.6107 2.49938 28.4196 2.38648C28.2329 2.26923 28.0179 2.2106 27.7747 2.2106C27.5359 2.2106 27.3187 2.26923 27.1233 2.38648C26.9323 2.49938 26.7803 2.65571 26.6674 2.85547C26.5545 3.05523 26.498 3.27887 26.498 3.5264C26.498 3.77827 26.5545 4.00408 26.6674 4.20384C26.7803 4.39926 26.9323 4.55559 27.1233 4.67284C27.3187 4.79009 27.5359 4.84871 27.7747 4.84871Z"
        fill="white"
      />
      <path
        d="M23.901 5.34355C23.5449 5.34355 23.2301 5.26755 22.9565 5.11556C22.6829 4.95923 22.468 4.74427 22.3116 4.47069C22.1553 4.19711 22.0771 3.88444 22.0771 3.5327C22.0771 3.17661 22.151 2.86394 22.2986 2.5947C22.4463 2.32112 22.6482 2.10616 22.9044 1.94983C23.165 1.7935 23.4646 1.71533 23.8033 1.71533C24.1334 1.71533 24.42 1.79133 24.6631 1.94332C24.9107 2.09096 25.0996 2.29724 25.2299 2.56213C25.3645 2.82703 25.4318 3.12884 25.4318 3.46756C25.4318 3.54138 25.4079 3.60218 25.3601 3.64995C25.3124 3.69337 25.2516 3.71508 25.1777 3.71508H22.455V3.26563H25.2103L24.9302 3.46104C24.9346 3.2222 24.8911 3.00725 24.7999 2.81617C24.7087 2.6251 24.5785 2.47528 24.4091 2.36672C24.2397 2.25815 24.0378 2.20387 23.8033 2.20387C23.5558 2.20387 23.3387 2.26032 23.1519 2.37323C22.9695 2.48614 22.8284 2.64464 22.7285 2.84874C22.633 3.0485 22.5852 3.27649 22.5852 3.5327C22.5852 3.78891 22.6417 4.01689 22.7546 4.21665C22.8675 4.41641 23.0217 4.57274 23.2171 4.68565C23.4168 4.79856 23.6448 4.85501 23.901 4.85501C24.0487 4.85501 24.1985 4.82895 24.3505 4.77684C24.5068 4.72473 24.6306 4.65959 24.7218 4.58143C24.7739 4.54234 24.8325 4.5228 24.8976 4.5228C24.9671 4.51846 25.0236 4.53583 25.067 4.57491C25.1321 4.63137 25.1647 4.69216 25.1647 4.7573C25.1691 4.82244 25.1408 4.87889 25.08 4.92666C24.9367 5.04825 24.7543 5.14813 24.5329 5.2263C24.3114 5.30446 24.1008 5.34355 23.901 5.34355Z"
        fill="white"
      />
      <path
        d="M19.7283 3.10283C19.737 2.83793 19.8043 2.60126 19.9302 2.39282C20.0605 2.18003 20.2299 2.01284 20.4383 1.89125C20.6511 1.76966 20.8834 1.70886 21.1353 1.70886C21.3568 1.70886 21.524 1.74143 21.6369 1.80657C21.7541 1.87171 21.7976 1.96073 21.7672 2.07364C21.7541 2.13443 21.7259 2.17786 21.6825 2.20392C21.6434 2.22997 21.5956 2.243 21.5392 2.243C21.4871 2.243 21.4263 2.23866 21.3568 2.22997C21.1006 2.19957 20.8726 2.21694 20.6728 2.28208C20.4774 2.34288 20.3211 2.44493 20.2038 2.58823C20.0866 2.73154 20.028 2.90307 20.028 3.10283H19.7283ZM19.7609 5.31102C19.674 5.31102 19.6067 5.28714 19.559 5.23937C19.5112 5.1916 19.4873 5.12429 19.4873 5.03744V2.02153C19.4873 1.93468 19.5112 1.86737 19.559 1.8196C19.6067 1.77183 19.674 1.74795 19.7609 1.74795C19.8477 1.74795 19.9129 1.77183 19.9563 1.8196C20.0041 1.86737 20.028 1.93468 20.028 2.02153V5.03744C20.028 5.12429 20.0041 5.1916 19.9563 5.23937C19.9129 5.28714 19.8477 5.31102 19.7609 5.31102Z"
        fill="white"
      />
      <path
        d="M17.1071 5.34355C16.751 5.34355 16.4362 5.26755 16.1626 5.11556C15.889 4.95923 15.674 4.74427 15.5177 4.47069C15.3614 4.19711 15.2832 3.88444 15.2832 3.5327C15.2832 3.17661 15.357 2.86394 15.5047 2.5947C15.6523 2.32112 15.8542 2.10616 16.1105 1.94983C16.371 1.7935 16.6707 1.71533 17.0094 1.71533C17.3394 1.71533 17.626 1.79133 17.8692 1.94332C18.1167 2.09096 18.3056 2.29724 18.4359 2.56213C18.5705 2.82703 18.6378 3.12884 18.6378 3.46756C18.6378 3.54138 18.614 3.60218 18.5662 3.64995C18.5184 3.69337 18.4576 3.71508 18.3838 3.71508H15.661V3.26563H18.4164L18.1363 3.46104C18.1406 3.2222 18.0972 3.00725 18.006 2.81617C17.9148 2.6251 17.7845 2.47528 17.6152 2.36672C17.4458 2.25815 17.2439 2.20387 17.0094 2.20387C16.7618 2.20387 16.5447 2.26032 16.358 2.37323C16.1756 2.48614 16.0345 2.64464 15.9346 2.84874C15.8391 3.0485 15.7913 3.27649 15.7913 3.5327C15.7913 3.78891 15.8477 4.01689 15.9606 4.21665C16.0735 4.41641 16.2277 4.57274 16.4231 4.68565C16.6229 4.79856 16.8509 4.85501 17.1071 4.85501C17.2547 4.85501 17.4045 4.82895 17.5565 4.77684C17.7129 4.72473 17.8366 4.65959 17.9278 4.58143C17.9799 4.54234 18.0386 4.5228 18.1037 4.5228C18.1732 4.51846 18.2296 4.53583 18.2731 4.57491C18.3382 4.63137 18.3708 4.69216 18.3708 4.7573C18.3751 4.82244 18.3469 4.87889 18.2861 4.92666C18.1428 5.04825 17.9604 5.14813 17.7389 5.2263C17.5175 5.30446 17.3068 5.34355 17.1071 5.34355Z"
        fill="white"
      />
      <path
        d="M11.6175 5.31149C11.5567 5.31149 11.5025 5.29412 11.4547 5.25938C11.4069 5.22464 11.3722 5.18338 11.3505 5.13562L10.3539 2.13273C10.3235 2.01548 10.3235 1.92212 10.3539 1.85263C10.3886 1.78315 10.4559 1.74841 10.5558 1.74841C10.6209 1.74841 10.6774 1.76578 10.7251 1.80052C10.7729 1.83526 10.8098 1.89172 10.8359 1.96988L11.7152 4.67965H11.5459L12.3666 1.95686C12.384 1.89606 12.4144 1.84612 12.4578 1.80704C12.5056 1.76795 12.5642 1.74841 12.6337 1.74841C12.7075 1.74841 12.7661 1.76795 12.8096 1.80704C12.8573 1.84612 12.8899 1.89606 12.9073 1.95686L13.6564 4.58194H13.5456L14.399 1.96988C14.4467 1.82224 14.5357 1.74841 14.666 1.74841C14.7702 1.74841 14.8419 1.7875 14.881 1.86566C14.9201 1.93949 14.9201 2.02851 14.881 2.13273L13.8778 5.13562C13.8605 5.18338 13.8279 5.22464 13.7801 5.25938C13.7367 5.29412 13.6846 5.31149 13.6238 5.31149C13.563 5.31149 13.5066 5.29412 13.4544 5.25938C13.4067 5.22464 13.3741 5.18338 13.3567 5.13562L12.5816 2.48448H12.6598L11.8716 5.13562C11.8542 5.18773 11.8216 5.23115 11.7739 5.26589C11.7261 5.29629 11.674 5.31149 11.6175 5.31149Z"
        fill="white"
      />
      <path
        d="M8.22198 5.34355C7.87024 5.34355 7.55757 5.26538 7.28399 5.10905C7.01475 4.95272 6.80196 4.73776 6.64563 4.46418C6.4893 4.1906 6.41113 3.8801 6.41113 3.5327C6.41113 3.18095 6.4893 2.86828 6.64563 2.5947C6.80196 2.32112 7.01475 2.10616 7.28399 1.94983C7.55757 1.7935 7.87024 1.71533 8.22198 1.71533C8.56939 1.71533 8.87771 1.7935 9.14695 1.94983C9.41619 2.10616 9.62898 2.32112 9.78531 2.5947C9.94164 2.86828 10.022 3.18095 10.0263 3.5327C10.0263 3.8801 9.94815 4.1906 9.79182 4.46418C9.63549 4.73776 9.42053 4.95272 9.14695 5.10905C8.87771 5.26538 8.56939 5.34355 8.22198 5.34355ZM8.22198 4.8485C8.46517 4.8485 8.6823 4.79204 8.87337 4.67913C9.06444 4.56189 9.21426 4.40555 9.32282 4.21014C9.43139 4.01038 9.48567 3.78457 9.48567 3.5327C9.48567 3.28083 9.43139 3.05501 9.32282 2.85526C9.21426 2.6555 9.06444 2.49917 8.87337 2.38626C8.6823 2.26901 8.46517 2.21038 8.22198 2.21038C7.9788 2.21038 7.7595 2.26901 7.56408 2.38626C7.37301 2.49917 7.22102 2.6555 7.10811 2.85526C6.99955 3.05501 6.94527 3.28083 6.94527 3.5327C6.94527 3.78457 6.99955 4.01038 7.10811 4.21014C7.22102 4.40555 7.37301 4.56189 7.56408 4.67913C7.7595 4.79204 7.9788 4.8485 8.22198 4.8485Z"
        fill="white"
      />
      <path
        d="M2.2801 6.83522C2.19324 6.83522 2.12376 6.80916 2.07165 6.75705C2.02388 6.70928 2 6.64197 2 6.55512V3.51316C2.00434 3.17443 2.08468 2.87046 2.24101 2.60122C2.40169 2.32763 2.61664 2.11268 2.88588 1.95634C3.15512 1.79567 3.4591 1.71533 3.79782 1.71533C4.14523 1.71533 4.45355 1.79567 4.72279 1.95634C4.99637 2.11268 5.21133 2.32763 5.36766 2.60122C5.52834 2.8748 5.60867 3.18529 5.60867 3.5327C5.60867 3.87576 5.53268 4.18408 5.38069 4.45766C5.23304 4.73125 5.02894 4.94837 4.76839 5.10905C4.50783 5.26538 4.21254 5.34355 3.8825 5.34355C3.60024 5.34355 3.34402 5.28492 3.11387 5.16767C2.88371 5.04608 2.69698 4.88758 2.55368 4.69216V6.55512C2.55368 6.64197 2.52762 6.70928 2.47551 6.75705C2.4234 6.80916 2.35826 6.83522 2.2801 6.83522ZM3.79782 4.84849C4.04101 4.84849 4.25814 4.79204 4.44921 4.67913C4.64462 4.56189 4.79661 4.40338 4.90518 4.20362C5.01809 4.00387 5.07454 3.78022 5.07454 3.5327C5.07454 3.28083 5.01809 3.05719 4.90518 2.86177C4.79661 2.66201 4.64462 2.50351 4.44921 2.38626C4.25814 2.26901 4.04101 2.21038 3.79782 2.21038C3.56332 2.21038 3.34837 2.26901 3.15295 2.38626C2.96188 2.50351 2.81206 2.66201 2.7035 2.86177C2.59493 3.05719 2.54065 3.28083 2.54065 3.5327C2.54065 3.78022 2.59493 4.00387 2.7035 4.20362C2.81206 4.40338 2.96188 4.56189 3.15295 4.67913C3.34403 4.79204 3.55898 4.84849 3.79782 4.84849Z"
        fill="white"
      />
    </svg>
  `};var dz=U0`
  #ek-model-viewer-border-icon,
  #ek-pc-rooms-icon-border,
  #ek-spinning-cube,
  #ek-flipping-square,
  #ek-unison-icon,
  .service-button-container,
  .ek-service-buttons-and-close-icon,
  .ek-service-button-closed,
  .ek-content,
  .ek-content-title-container,
  .ek-content-container,
  .ek-backdrop,
  .ek-close-button,
  .ek-powered-by-eyekandy-icon {
    transition-property: all;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 600ms;
  }
  .service-button-container.closed > .ek-page-button-v2-container,
  .ek-service-button-open.not-selected.hovering,
  .service-button-container.open
    > .ek-page-button-v2-container.not-selected.hovering,
  .ek-button-text,
  .service-button-text {
    transition: width 0.6s
      linear(
        0,
        0.15,
        0.25,
        0.25,
        0.35,
        0.45,
        0.55,
        0.55,
        0.65,
        0.75,
        0.85,
        0.95,
        0.98,
        1,
        1.02,
        1.03,
        1.04,
        1.04,
        1.02,
        1,
        0.99,
        0.98,
        0.97,
        0.97,
        0.98,
        0.98,
        0.99,
        1
      );
  }
  .icon.selected > div > svg > defs > linearGradient > stop {
    stop-color: var(--svg-icon-top-colour);
  }

  .icon.selected > .ek-icon-container-open > #ek-spinning-cube {
    transform: rotate(60deg);
    scale: 1.2;
  }

  .icon.selected > .ek-icon-container-open > #ek-flipping-square {
    transform: rotate(-90deg);
    scale: 1.2;
  }

  .icon.selected
    > .service-selected-ARModelsElement.animated
    > #ek-spinning-cube {
    transform: rotate(60deg);
    scale: 1.2;
  }
  .icon.selected
    > .service-selected-ARModelsElement.animated.small
    > #ek-spinning-cube {
    transform: rotate(60deg);
    scale: 90%;
  }

  .icon.selected
    > .service-selected-ARModelsElement.animated
    > #ek-flipping-square {
    transform: rotate(-90deg);
    scale: 1.2;
  }
  .icon.selected
    > .service-selected-ARModelsElement.animated.small
    > #ek-flipping-square {
    transform: rotate(-90deg);
    scale: 90%;
  }

  .ek-page-button-v2-container.not-selected.notHovering
    > .ek-icon-container-open.small
    > svg {
    scale: 80%;
  }
  .ek-page-button-v2-container.not-selected.hovering
    > .ek-icon-container-open.small
    > svg {
    scale: 85%;
  }
  .ek-container-open.selected > .icon > #ek-pc-rooms-icon-border {
    transform: rotateX(0deg) rotateY(180deg);
    scale: 1.2;
  }
  .service-selected-ContainerElement.animated > #ek-pc-rooms-icon-border {
    transform: rotateX(0deg) rotateY(180deg);
    scale: 1.2;
  }
  .service-selected-ContainerElement.animated.small > #ek-pc-rooms-icon-border {
    transform: rotateX(0deg) rotateY(180deg);
    scale: 90%;
  }
  .ek-container-open.selected > .icon > #ek-model-viewer-border-icon {
    transform: rotate(180deg);
    scale: 1.2;
  }
  .ek-container-open.selected.small > .icon > #ek-model-viewer-border-icon {
    transform: rotate(180deg);
    scale: 95%;
  }
  .service-selected-ModelViewerElement.animated > #ek-model-viewer-border-icon {
    transform: rotate(180deg);
    scale: 1.2;
  }
  .ek-container-open.selected > .icon > #ek-unison-icon {
    transform: rotateX(360deg) rotateY(0deg);
    scale: 1.2;
  }
  .service-selected-UnisonElement.animated > #ek-unison-icon {
    transform: rotateX(360deg) rotateY(0deg);
    scale: 1.2;
  }
  .service-selected-UnisonElement.animated.small > #ek-unison-icon {
    transform: rotateX(360deg) rotateY(0deg);
    scale: 90%;
  }
  .ek-container-closed.not-selected.notHovering.animated
    > .ek-icon-container-closed
    > #ek-spinning-cube {
    animation: spin 4s linear infinite;
  }

  .ek-container-closed.not-selected.notHovering.animated
    > .ek-icon-container-closed
    > #ek-flipping-square {
    animation: flipSpin 4s linear infinite;
  }

  .ek-container-closed.not-selected.hovering.animated
    > .ek-icon-container-closed
    > #ek-flipping-square {
    animation: initialButtonIconHovering 0.2s linear forwards;
  }
  .ek-container-closed.not-selected.hovering.animated
    > .ek-icon-container-closed.small
    > #ek-flipping-square {
    animation: initialButtonIconHoveringXSmall 0.2s linear forwards;
  }
  .ek-container-closed.not-selected.hovering.animated
    > .ek-icon-container-closed
    > #ek-spinning-cube {
    animation: initialButtonIconSquareHovering 0.2s linear forwards;
  }

  @media (max-width: 640px) {
    .ek-service-button.not-selected,
    .ek-page-button-v2-container {
      transition-property: all;
      transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      transition-duration: 600ms;
    }
  }

  @media (min-width: 640px) {
    .ek-container-closed.hovering.left > .ek-initial-button-text-for-left {
      display: none;
    }
    .ek-container-open.left > .ek-initial-button-text-for-left {
      display: none;
    }

    .ek-page-button-v2-container.left {
      flex-direction: row-reverse;
    }

    .ek-service-buttons-and-close-icon.left > .ek-service-button.not-selected {
      right: -55px;
      left: unset;
      flex-direction: row-reverse;
    }

    .service-button-container.open
      > .ek-service-buttons-and-close-icon
      > .ek-service-button.notHovering.not-selected,
    .ek-page-button-v2-container.not-selected.notHovering,
    .ek-service-button-open.not-selected,
    .ek-powered-by-eyekandy-icon {
      transition: width 0.5s
        linear(
          0,
          0.15,
          0.25,
          0.25,
          0.35,
          0.45,
          0.55,
          0.55,
          0.65,
          0.75,
          0.85,
          0.95,
          0.98,
          1,
          1.02,
          1.03,
          1.04,
          1.04,
          1.02,
          1,
          0.99,
          0.98,
          0.97,
          0.97,
          0.98,
          0.98,
          0.99,
          1
        );
    }

    .ek-content-container.open.right.notReady > .ek-content {
      opacity: 0;
      scale: 20%;
      top: -125px;
      left: -325px;
    }
    .ek-content-container.open.right.notReady.small > .ek-content {
      opacity: 0;
      scale: 20%;
      top: -106px;
      left: -308px;
    }
    .ek-content-container.open.right.ready > .ek-content {
      top: 69px;
      left: 0;
      opacity: 1;
      scale: 100%;
    }

    .ek-content-container.open.left.notReady > .ek-content {
      opacity: 0;
      scale: 20%;
      top: -125px;
      left: 325px;
    }
    .ek-content-container.open.left.ready > .ek-content {
      scale: 100%;
      top: 69px;
      left: 0;
      opacity: 1;
    }
    .ek-icon-container-closed.medium > svg {
      scale: 88%;
    }

    .not-selected.hovering
      > .service-unselected-ARModelsElement.animated.large
      > #ek-flipping-square {
      transform: rotate(-90deg);
      scale: 110%;
    }
    .not-selected.hovering
      > .service-unselected-ARModelsElement.animated.large
      > #ek-spinning-cube {
      transform: rotate(90deg);
      scale: 110%;
    }
    .not-selected.hovering
      > .service-unselected-ARModelsElement.animated.medium
      > #ek-flipping-square {
      transform: rotate(-90deg);
      scale: 100%;
    }
    .not-selected.hovering
      > .service-unselected-ARModelsElement.animated.small
      > #ek-flipping-square {
      transform: rotate(-90deg);
      scale: 75%;
    }
    .not-selected.hovering
      > .service-unselected-ARModelsElement.animated.medium
      > #ek-spinning-cube {
      transform: rotate(90deg);
      scale: 100%;
    }
    .not-selected.hovering
      > .service-unselected-ARModelsElement.animated.small
      > #ek-spinning-cube {
      transform: rotate(90deg);
      scale: 80%;
    }
    .ek-service-button-open
      > .service-selected-ARModelsElement.animated
      > #ek-spinning-cube {
      transform: rotate(180deg) !important;
    }
    .ek-service-button-open
      > .service-selected-ARModelsElement.animated
      > #ek-flipping-square {
      transform: rotate(-180deg) !important;
    }

    .ek-container-open.not-selected.hovering
      > .icon
      > #ek-model-viewer-border-icon {
      transform: rotate(-180deg);
      scale: 120%;
    }
    .ek-container-open.not-selected.hovering.small
      > .icon
      > #ek-model-viewer-border-icon {
      transform: rotate(-180deg);
      scale: 90%;
    }
    .not-selected.hovering
      > .service-unselected-ModelViewerElement.animated
      > #ek-model-viewer-border-icon {
      transform: rotate(-180deg);
      scale: 120%;
    }
    .selected
      > .service-selected-ModelViewerElement.animated
      > #ek-model-viewer-border-icon {
      transform: rotate(180deg);
      scale: 120%;
    }

    .icon.selected > .ek-icon-container-open > #ek-flipping-square {
      animation: spinLeftAndScaleUp 0.3s forwards;
    }
    .icon.selected > .ek-icon-container-open > #ek-spinning-cube {
      animation: spinRightAndScaleUp 0.3s forwards;
    }
    .icon.not-selected > .ek-icon-container-open > #ek-flipping-square {
      animation: spinRightAndScaleDown 0.3s forwards;
    }
    .icon.not-selected > .ek-icon-container-open > #ek-spinning-cube {
      animation: spinLeftAndScaleDown 0.3s forwards;
    }

    .not-selected.hovering
      > .service-unselected-ContainerElement.animated
      > #ek-pc-rooms-icon-border {
      transform: rotateX(0deg) rotateY(180deg);
    }
    .not-selected.hovering
      > .service-unselected-PCRoomsElement.animated
      > #ek-pc-rooms-icon-border {
      transform: rotateX(0deg) rotateY(180deg);
    }
    .selected
      > .service-selected-ContainerElement.animated
      > #ek-pc-rooms-icon-border {
      transform: rotateX(0deg) rotateY(-180deg);
    }
    .selected
      > .service-selected-PCRoomsElement.animated
      > #ek-pc-rooms-icon-border {
      transform: rotateX(0deg) rotateY(-180deg);
    }

    .not-selected.hovering
      > .service-unselected-UnisonElement.animated
      > #ek-unison-icon {
      transform: rotateY(360deg);
    }
  }

  .ek-service-button-closed.hide {
    display: none;
  }

  @keyframes spin {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }
  @keyframes spinLeftAndScaleUp {
    from {
      scale: 100%;
      transform: rotate(0deg);
    }
    to {
      scale: 110%;
      transform: rotate(-180deg);
    }
  }
  @keyframes spinRightAndScaleUp {
    from {
      scale: 100%;
      transform: rotate(0deg);
    }
    to {
      scale: 110%;
      transform: rotate(180deg);
    }
  }
  @keyframes spinRightAndScaleDown {
    from {
      scale: 110%;
      transform: rotate(-180deg);
    }
    to {
      scale: 100%;
      transform: rotate(0deg);
    }
  }
  @keyframes spinLeftAndScaleDown {
    from {
      scale: 110%;
      transform: rotate(180deg);
    }
    to {
      scale: 100%;
      transform: rotate(0deg);
    }
  }

  @keyframes flipSpin {
    0% {
      transform: rotateX(0deg) rotateY(0deg);
    }
    50% {
      transform: rotateX(180deg) rotateY(180deg);
    }
    100% {
      transform: rotateX(0deg) rotateY(0deg);
    }
  }

  @keyframes initialButtonIconHovering {
    0% {
      scale: 100%;
      transform: rotateX(0deg) rotateY(0deg);
    }
    50% {
      scale: 113%;
      transform: rotate(40deg);
    }
    100% {
      scale: 100%;
      transform: rotateX(0deg) rotateY(0deg);
    }
  }
  @keyframes initialButtonIconHoveringXSmall {
    0% {
      scale: 70%;
      transform: rotateX(0deg) rotateY(0deg);
    }
    50% {
      scale: 80%;
      transform: rotate(40deg);
    }
    100% {
      scale: 70%;
      transform: rotateX(0deg) rotateY(0deg);
    }
  }

  @keyframes initialButtonIconSquareHovering {
    0% {
      transform: rotate(90deg);
    }
    100% {
      transform: rotate(0deg);
    }
  }

  @keyframe hideServiceButtons {
    0% {
      opacity: 1;
    }
    100% {
      opacity: 0;
    }
  }
`;class u9 extends M1{static styles=[r1,dz,U0`
      :host {
        color: var(--text-colour) !important;
      }

      .ek-powered-by-eyekandy-icon.bottom-right {
        position: absolute;
        bottom: -27px;
        right: 26px;
      }
      .ek-powered-by-eyekandy-icon.bottom-left {
        position: absolute;
        bottom: -27px;
        left: 26px;
      }
      .ek-powered-by-eyekandy-icon.top-left {
        position: absolute;
        bottom: -21px;
        right: 20px;
      }
      .ek-powered-by-eyekandy-icon.top-right {
        position: absolute;
        bottom: -21px;
        right: 20px;
      }
      .ek-content-container.ready > .ek-content-title-container {
        font-size: 14px;
        padding: 7px 25px 7px 25px;
      }
      .ek-content-container.notReady.large > .ek-content-title-container {
        font-size: 20px;
        padding: 12px;
      }
      .ek-content-container.notReady.medium > .ek-content-title-container {
        font-size: 20px;
        padding: 9px;
      }
      .small > .ek-first-button-text-container > .ek-button-text {
        font-size: 18px;
      }
      .small > .ek-service-text-container > .service-button-text {
        font-size: 18px;
      }
      .ek-page-button-v2-container {
        white-space: nowrap;
      }
      .ek-container-open > .ek-button-text {
        display: none;
      }
      .ek-page-button-v2-container.left {
        position: absolute;
        right: 0;
        flex-direction: row-reverse;
      }
      .ek-service-button {
        white-space: nowrap;
      }
      .ek-backdrop.active {
        z-index: 999999999;
      }
      .ek-open {
        z-index: 9999999999;
      }
      ek-pc-rooms {
        height: 100%;
        width: 100%;
      }
      .small > .ek-close-button {
        width: 22px;
        height: 22px;
      }
      .ek-service-button-open.notHovering > .ek-service-text-container {
        display: none;
      }
      .ek-container-open.notHovering > .ek-first-button-text-container {
        display: none;
      }
      .ek-content-title-container {
        border-radius: var(--title-border-radius);
      }
      .ek-content-title-container.small {
        padding: 5px 25px 5px 25px;
      }
      .ek-close-button {
        background-color: var(--icon-background-colour);
      }
      .ek-content-container.notReady.closed {
        height: 0px;
        width: 0px;
      }
      @media (max-width: 640px) {
        .ek-service-button.small {
          height: 39px !important;
          width: 39px !important;
        }
        .ek-service-button.medium {
          height: 49px !important;
          width: 49px !important;
        }
        .ek-service-button.large {
          height: 54px !important;
          width: 54px !important;
        }
        .service-button-container.closed
          > .ek-service-buttons-and-close-icon.left {
          left: unset;
          right: 81px;
        }
        .service-button-container.open
          > .ek-service-buttons-and-close-icon.left.large {
          left: unset;
          right: 116px;
        }
        .service-button-container.open
          > .ek-service-buttons-and-close-icon.left.medium {
          left: unset;
          right: 104px;
        }
        .service-button-container.open
          > .ek-service-buttons-and-close-icon.left.small {
          left: unset;
          right: 85px;
        }
        .ek-service-buttons-and-close-icon.left > .ek-close-button.open {
          top: -10px;
        }
        .ek-service-buttons-and-close-icon.left > .ek-close-button.closed {
          left: 0px;
          top: -10px;
        }
        .ek-content-container.left.open.large {
          right: 0px;
          top: 53px;
        }
        .ek-content-container.left.open.medium {
          right: 0px;
          top: 49px;
        }
        .ek-content-container.left.open.small {
          right: 0px;
          top: 40px;
        }
        .ek-content-container.open.left > .ek-content-title-container.active {
          right: 0px;
        }
        .ek-content-container.open.left > .ek-content-title-container.closed {
          right: 0px;
        }
        .ek-container-closed.left > .ek-initial-button-text-for-left {
          display: flex;
        }

        .ek-content-container.left.closed > .ek-content-title-container {
          right: 0;
        }
        .ek-content-container.left.closed > .ek-content-title-container {
          display: none;
        }
      }

      .ek-container-open > .ek-initial-button-text {
        display: none;
      }
      .ek-page-button-v2-container.large {
        height: 54px;
      }
      .ek-page-button-v2-container.medium {
        height: 49px;
      }
      @media (min-width: 640px) {
        .ek-container-open.not-selected.hovering > .ek-initial-button-text {
          display: flex;
          position: absolute;
        }
      }
      .ek-icon-container-closed {
        width: 45px;
        height: 45px;
        min-width: 45px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: var(--icon-background-colour);
        border-radius: 45px;
      }
      .ek-icon-container-closed.large {
        width: 48px;
        height: 48px;
        min-width: 48px;
      }
      .ek-icon-container-closed.medium {
        width: 43px;
        height: 43px;
        min-width: 43px;
      }
      .ek-icon-container-closed.small {
        width: 33px;
        height: 33px;
        min-width: 33px;
      }
      .ek-icon-container-closed.small > svg {
        scale: 70%;
      }
      .ek-icon-container-closed > svg {
        position: absolute;
      }
      .ek-icon-container-open {
        position: relative;
        width: 45px;
        height: 45px;
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: var(--icon-background-colour);
        border-radius: 50%;
      }
      .ek-icon-container-open.large {
        width: 48px;
        height: 48px;
        min-width: 48px;
      }
      .ek-icon-container-open.medium {
        width: 43px;
        height: 43px;
        min-width: 43px;
      }
      .ek-icon-container-open.small {
        width: 33px;
        height: 33px;
        min-width: 33px;
      }
      .ek-icon-container-open > svg {
        position: absolute;
      }
      .ek-initial-button-text {
        margin: 7px !important;
        font-size: 20px !important;
        white-space: nowrap;
      }
      .ek-service-buttons-container {
        display: flex;
      }
      .ek-service-button-open {
        display: flex;
      }
      .ek-service-button {
        background-image: linear-gradient(
          var(--foreground-colour),
          var(--background-colour)
        );
        padding: 3px;
        border-radius: 45px;
        color: white;
        align-items: center;
        height: 55px;
        overflow: hidden;
      }
      .ek-service-button.large {
        height: 54px;
      }
      .ek-service-button.medium {
        height: 49px;
      }
      .ek-service-button.small {
        height: 39px;
      }
      .ek-content-title-container,
      .ek-content,
      .ek-launch-btn,
      .ek-page-button-v2-container {
        background-image: linear-gradient(
          var(--foreground-colour),
          var(--background-colour)
        );
      }
      .ek-launch-text {
        background-color: blue;
        background-image: linear-gradient(
          45deg,
          var(--content-text-background-colour),
          var(--content-text-foreground-colour)
        );
        background-size: 100%;
        background-repeat: repeat;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        -moz-background-clip: text;
        -moz-text-fill-color: transparent;
      }

      .ek-service-button-closed.service-btn-1 {
        left: 0;
        height: 54px;
      }
      .ek-service-button-closed.service-btn-2 {
        left: 0;
        height: 54px;
      }
      .ek-service-button-closed.service-btn-3 {
        left: 0;
        height: 54px;
      }
      .ek-service-button-closed.service-btn-4 {
        left: 0;
        height: 54px;
      }
      .ek-service-button-closed.service-btn-1.medium {
        left: 0;
        height: 49px;
      }
      .ek-service-button-closed.service-btn-2.medium {
        left: 0;
        height: 49px;
      }
      .ek-service-button-closed.service-btn-3.medium {
        left: 0;
        height: 49px;
      }
      .ek-service-button-closed.service-btn-4.medium {
        left: 0;
        height: 49px;
      }
      .ek-service-button-closed.service-btn-1.small {
        left: 0;
        height: 39px;
      }
      .ek-service-button-closed.service-btn-2.small {
        left: 0;
        height: 39px;
      }
      .ek-service-button-closed.service-btn-3.small {
        left: 0;
        height: 39px;
      }
      .ek-service-button-closed.service-btn-4.small {
        left: 0;
        height: 39px;
      }
      @media (max-width: 640px) {
        .left > .ek-service-button-open.service-btn-1 {
          left: 0px;
        }
        .left > .ek-service-button-open.service-btn-2.large {
          left: -60px;
        }
        .left > .ek-service-button-open.service-btn-2.medium {
          left: -53px;
        }
        .left > .ek-service-button-open.service-btn-2.small {
          left: -45px;
        }
        .left > .ek-service-button-open.service-btn-3.large {
          left: -120px;
        }
        .left > .ek-service-button-open.service-btn-3.medium {
          left: -106px;
        }
        .left > .ek-service-button-open.service-btn-3.small {
          left: -90px;
        }
        .left > .ek-service-button-open.service-btn-4 {
          left: -180px;
        }

        .right > .ek-service-button-open.service-btn-1 {
          left: 0px;
        }
        .right > .ek-service-button-open.service-btn-2.large {
          left: 60px;
        }
        .right > .ek-service-button-open.service-btn-2.medium {
          left: 55px;
        }
        .right > .ek-service-button-open.service-btn-2.small {
          left: 45px;
        }
        .right > .ek-service-button-open.service-btn-3.large {
          left: 120px;
        }
        .right > .ek-service-button-open.service-btn-3.medium {
          left: 110px;
        }
        .right > .ek-service-button-open.service-btn-3.small {
          left: 90px;
        }
        .right > .ek-service-button-open.service-btn-4 {
          left: 180px;
        }
        .ek-content-container.open > .ek-content {
          opacity: 1;
          top: 73px;
        }
        .ek-container-open.large {
          width: 54px !important;
        }
        .ek-container-open.medium {
          width: 49px !important;
        }
        .ek-container-open.small {
          width: 39px !important;
        }
        .ek-content-container.open.ready.small > .ek-content {
          opacity: 1;
          top: 44px;
        }
        .ek-content-container.open.small > .ek-content-title-container.active {
          opacity: 1;
          top: -4px;
        }
        .ek-content-container.open.ready.medium > .ek-content {
          opacity: 1;
          top: 45px;
        }
      }

      .icon.selected > div {
        background-color: rgba(0, 0, 0, 0);
      }

      .service-button-container.open
        > .ek-service-buttons-and-close-icon.right.large {
        left: 60px;
      }
      .service-button-container.open
        > .ek-service-buttons-and-close-icon.right.medium {
        left: 55px;
      }
      .service-button-container.open
        > .ek-service-buttons-and-close-icon.right.small {
        left: 45px;
      }
      .service-button-container.closed
        > .ek-service-buttons-and-close-icon.right {
        left: 37px;
      }
      .ek-content-container.open.ready > .ek-content {
        opacity: 1;
        top: 45px;
      }

      .ek-content-container.open > .ek-content-title-container.active {
        opacity: 1;
        top: -3px;
      }
      .ek-content-container.closed > .ek-content-title-container.active {
        opacity: 0;
        top: 115px;
      }
      .ek-content-title-container {
        top: 115px;
      }
      .left > .ek-content-title-container {
        top: 115px;
      }

      .ek-initial-button-text {
        transform: translateX(-117px);
        background: linear-gradient(
          to right,
          rgba(255, 255, 255, 0) 60%,
          rgba(255, 255, 255, 1) 0%
        );
        -webkit-background-clip: text;
        color: transparent;
      }
      .ek-close {
        min-width: 95px;
      }
      .ek-close.large {
        height: 54px;
      }
      .ek-close.medium {
        height: 49px;
      }
      .ek-close.small {
        height: 39px;
      }
      .ek-initial-button-text-for-left {
        display: none;
      }

      .ek-backdrop.active {
        opacity: 40%;
      }

      @media (min-width: 640px) {
        .ek-container-closed.right.notHovering > .ek-button-text.slide {
          position: relative;
          left: -118px;
        }
        .ek-container-closed.right.hovering > .ek-button-text.slide {
          position: relative;
          left: 0px;
        }
        .ek-container-closed.right.notHovering > .ek-button-text.slide {
          mask-image: linear-gradient(90deg, transparent 112px, white 66px);
        }
        .ek-container-closed.right.hovering > .ek-button-text.slide {
          mask-image: linear-gradient(90deg, white -66px, white 66px);
        }
        .ek-content-container.closed.notReady.right > .ek-content {
          opacity: 0;
          scale: 20%;
          top: -151px;
          left: -386px;
        }
        .ek-content-container.ready.right.large {
          top: -125px !important;
        }
        .ek-content-container.ready.right.medium {
          top: -119px !important;
        }
        .ek-content-container.ready.right.small {
          top: -109px !important;
        }
        .ek-content-container.ready.left {
          top: -68px !important;
        }
        .ek-page-button-v2-container.right > .ek-initial-button-text-for-left {
          display: none;
        }
        .ek-container-closed.left > .ek-initial-button-text-for-left {
          display: flex;
        }
        .ek-service-button-closed.service-btn-1 {
          top: 0;
          height: 54px;
        }
        .ek-service-button-closed.service-btn-2 {
          top: 0;
          height: 54px;
        }
        .ek-service-button-closed.service-btn-3 {
          top: 0;
          height: 54px;
        }
        .ek-service-button-closed.service-btn-4 {
          top: 0;
          height: 54px;
        }
        .service-button-container.closed
          > .ek-service-buttons-and-close-icon.left.notReady {
          right: 55px;
          top: 0px;
        }
        .service-button-container.closed
          > .ek-service-buttons-and-close-icon.right.notReady {
          left: 0px;
          top: 0px;
        }
        .service-button-container.open.large
          > .ek-service-buttons-and-close-icon.right.ready {
          left: 0px;
          top: 59px;
        }
        .service-button-container.open.medium
          > .ek-service-buttons-and-close-icon.right.ready {
          left: 0px;
          top: 54px;
        }
        .service-button-container.open.small
          > .ek-service-buttons-and-close-icon.right.ready {
          left: 0px;
          top: 44px;
        }
        .service-button-container.open
          > .ek-service-buttons-and-close-icon.right.notReady {
          left: 0px;
          top: 0px;
        }
        .service-button-container.open
          > .ek-service-buttons-and-close-icon.left.ready.large {
          right: 54px;
          top: 60px;
          left: unset;
        }
        .service-button-container.open
          > .ek-service-buttons-and-close-icon.left.ready.medium {
          right: 54px;
          top: 55px;
          left: unset;
        }
        .service-button-container.open
          > .ek-service-buttons-and-close-icon.left.ready.small {
          right: 54px;
          top: 45px;
          left: unset;
        }
        .service-button-container.open
          > .ek-service-buttons-and-close-icon.left.notReady {
          right: 54px;
          top: 0px;
        }
        .ek-service-button-open.service-btn-2.ready.large {
          top: 59px;
        }
        .ek-service-button-open.service-btn-2.ready.medium {
          top: 54px;
        }
        .ek-service-button-open.service-btn-2.ready.small {
          top: 44px;
        }
        .ek-service-button-open.service-btn-3.ready.large {
          top: 118px;
        }
        .ek-service-button-open.service-btn-3.ready.medium {
          top: 108px;
        }
        .ek-service-button-open.service-btn-3.ready.small {
          top: 87px;
        }
        .ek-service-button-open.service-btn-4.ready {
          top: 180px;
        }
        .ek-content-container.right.large {
          left: 60px;
          top: -66px;
        }
        .ek-content-container.right.medium {
          left: 55px;
          top: -66px;
        }
        .ek-content-container.right.small {
          left: 43px;
          top: -66px;
        }
        .ek-content-container.left.large {
          right: 61px;
          top: -8px;
        }
        .ek-content-container.left.medium {
          right: 55px;
          top: -8px;
        }
        .ek-content-container.left.small {
          right: 45px;
          top: -8px;
        }
        .ek-close-button {
          z-index: 1;
        }
        .ek-close-button.closed {
          top: 15px;
          left: 15px;
        }
        .ek-service-buttons-and-close-icon.right.notReady > .ek-close-button {
          top: -81px !important;
          left: -25px !important;
        }
        .ek-service-buttons-and-close-icon.right.notReady > .ek-close-button {
          top: 16px !important;
          left: 13px !important;
        }
        .ek-service-buttons-and-close-icon.left.ready.large > .ek-close-button {
          top: -81px !important;
          left: unset !important;
          right: -75px;
        }
        .ek-service-buttons-and-close-icon.left.ready.medium
          > .ek-close-button {
          top: -75px !important;
          left: unset !important;
          right: -73px;
        }
        .ek-service-buttons-and-close-icon.left.ready.small > .ek-close-button {
          top: -64px !important;
          left: unset !important;
          right: -72px;
        }
        .ek-service-buttons-and-close-icon.right.ready.large
          > .ek-close-button {
          top: -77px !important;
          left: -20px !important;
        }
        .ek-service-buttons-and-close-icon.right.ready.medium
          > .ek-close-button {
          top: -74px !important;
          left: -19px !important;
        }
        .ek-service-buttons-and-close-icon.right.ready.small
          > .ek-close-button {
          top: -65px !important;
          left: -20px !important;
        }
        .ek-service-buttons-and-close-icon.left.notReady > .ek-close-button {
          top: 9px !important;
          left: unset !important;
          right: -39px;
        }
        .ek-content-container.open > .ek-content-title-container.active {
          opacity: 1;
          top: 0px;
        }
        .ek-content-container.open > .ek-content-title-container.closed {
          opacity: 1;
          top: 115px;
        }

        .ek-content-container.closed > .ek-content-title-container.active {
          opacity: 0;
          top: 0px;
        }
        .ek-close > .ek-content-container.closed > .ek-content-title-container {
          display: none;
        }
        .ek-open
          > .ek-content-container.open.left
          > .ek-content-title-container {
          opacity: 0;
          right: 0px;
        }
        .ek-open
          > .ek-content-container.open.right
          > .ek-content-title-container {
          opacity: 0;
          left: 0px;
        }
        .ek-open
          > .ek-content-container.open
          > .ek-content-title-container.active {
          opacity: 1;
        }
        .ek-content-container.open.right.ready
          > .ek-content-title-container.active.large {
          opacity: 1;
          top: 20px;
        }
        .ek-content-container.open.right.notReady
          > .ek-content-title-container.active.large {
          opacity: 1;
          top: 3px;
        }
        .ek-content-container.open.right.notReady
          > .ek-content-title-container.active.medium {
          opacity: 1;
          top: 8px;
        }
        .ek-content-container.open.right
          > .ek-content-title-container.active.medium {
          opacity: 1;
          top: 22px;
        }
        .ek-content-container.open.right
          > .ek-content-title-container.active.small {
          opacity: 1;
          top: 22px;
        }
        .ek-content-container.open.right.notReady
          > .ek-content-title-container.active.small {
          opacity: 1;
          top: 19px;
          font-size: 18px;
        }
        .ek-content-container.open.left
          > .ek-content-title-container.active.large {
          opacity: 1;
          top: 20px;
          right: 0px;
        }
        .ek-content-container.open.left.notReady
          > .ek-content-title-container.active.large {
          opacity: 1;
          top: 0px;
          right: 0px;
        }
        .ek-content-container.open.left
          > .ek-content-title-container.active.medium {
          opacity: 1;
          top: 20px;
          right: 0px;
        }
        .ek-content-container.open.left.notReady
          > .ek-content-title-container.active.medium {
          opacity: 1;
          top: -2px;
          right: 0px;
        }
        .ek-content-container.open.left
          > .ek-content-title-container.active.small {
          opacity: 1;
          top: 20px;
          right: 0px;
        }
        .ek-content-container.open.left.notReady
          > .ek-content-title-container.active.small {
          opacity: 1;
          top: 17px;
          right: 0px;
        }
        .ek-content-container.open.left.notReady
          > .ek-content-title-container.active.medium {
          top: -1px;
        }
        .ek-content-container.open.left.notReady
          > .ek-content-title-container.active.small {
          top: -1px;
        }
        .ek-service-buttons-and-close-icon.left > .ek-service-button {
          right: -55px;
          left: unset;
          flex-direction: row-reverse;
        }
        .ek-content-container.open.ready.medium > .ek-content {
          opacity: 1;
          top: 70px;
        }
        .ek-content-container.open.ready.small > .ek-content {
          opacity: 1;
          top: 70px;
        }
      }
    `];maxContentWidth=0;constructor(A,Q,B,C,J,I,q,K,Y){super(A,Q,B,C,J,I,q,K,Y,!0,"all-in-one-v2");this.isHovering=!1;this.contentOpen=!1;this.matchedServices={};this.currentService="";this.firstService="";this.fillGradientPrimary="#0CB7EB";this.fillGradientSecondary="#9747FF";this.contentTextBackgroundColour="#0CB7EB";this.contentTextForegroundColour="#9747FF";this.serviceTextColour="white";this.serviceClicked=!1;this.serviceCount=0;this.allInOneV2PageButtonLocalisations={blockType:"AllInOneV2PageButtonLocalisation"};this.contentTitles={};this.isHoveringButton=!1;this.isStillHoveringButton=!1;this.contentTransitionReady=!1;this.isFullscreen=!1;this.buttonSizeInPixels="54px";this.isMobileScreen=!1;this.buttonSizeToPixels={small:"39px",medium:"49px",large:"54px"};this.blockTypeToServiceMapping={AllInOneV2PageButtonElement:"all-in-one-v2",ARModelsElement:"ar-models",ModelViewerElement:"3d-player",ContainerElement:"pc-rooms",PCRoomsElement:"pc-rooms"};this.hovered=!1;this.hasHovered=!1;this.isHoveringFirstButton=!1;this.isFirstServiceSelected=!0;this.hoveringBlockType=null;this.contentHasBeenOpened=!1;this.EKComponentParentElement=null;this.EKPlacement=null;this.contentTextBackgroundColour=this.EKProps.contentTextBackgroundColour||this.EKControlObject._config.deploymentColours.textColourBackground,this.contentTextForegroundColour=this.EKProps.contentTextForegroundColour||this.EKControlObject._config.deploymentColours.textColourForeground,this.serviceTextColour=this.EKProps.textColour||this.EKControlObject._config.deploymentColours.textColourOther,this.fillGradientPrimary=this.EKProps.foregroundColour||this.EKControlObject._config.deploymentColours.primaryColour,this.fillGradientSecondary=this.EKProps.backgroundColour||this.EKControlObject._config.deploymentColours.secondaryColour}connectedCallback(){if(super.connectedCallback(),this.EKChildren){for(let A of this.EKChildren)if(A.EKBlockType!=="NullElement")this.matchedServices[A.EKBlockType]=A}this.firstService=Object.keys(this.matchedServices)[0],this.allInOneV2PageButtonLocalisations=this.localisations(),this.contentTitles={ARModelsElement:this.allInOneV2PageButtonLocalisations.ViewInARContentTitle,ModelViewerElement:this.allInOneV2PageButtonLocalisations.ModelViewerContentTitle,ContainerElement:this.allInOneV2PageButtonLocalisations.VirtualExperienceContentTitle,PCRoomsElement:this.allInOneV2PageButtonLocalisations.VirtualExperienceContentTitle},this.buttonSizeInPixels=this.buttonSizeToPixels[this.EKProps.buttonSize||"large"],window.addEventListener("resize",(A)=>{this.isMobileScreen=document.body.clientWidth<=640})}firstUpdated(A){super.firstUpdated(A),this.setUpObservationEvent(),this.EKComponentParentElement=this.parentElement,this.isMobileScreen=document.body.clientWidth<=640;for(let B of this.ekServiceButtons)B.style.width="54px";let Q=parseInt((this.EKProps.contentMaxWidth||"750px").replace("px",""),10);setTimeout(()=>{if(this.isMobileScreen)this.maxContentWidth=Q;else{let B=this.getBoundingClientRect();if(this.EKProps.contentDirection==="left")this.maxContentWidth=Math.min(B.x+B.width-55-30,Q);else this.maxContentWidth=Math.min(window.innerWidth-(B.x+55+30),Q)}},0)}setUpObservationEvent(){if(this.ekObserveElement)new IntersectionObserver((Q,B)=>{Q.forEach((C)=>{if(C.isIntersecting)this.logEventLegacy("view","button","all-in-one-v2"),B.unobserve(C.target)})},{root:null,rootMargin:"0px",threshold:1}).observe(this.ekObserveElement)}localisations(){return this.getLocalisations("AllInOneV2PageButtonLocalisation")}isComponentValidToRender(){if(!this.EKResolvedData["datarequirement-arqrcode"]&&this.matchedServices.ARModelsElement)return!1;return!0}serviceHasBeenSelected(A){if(this.contentOpen){if(this.serviceClicked){if(this.currentService===A)return!0}}return!1}getServiceIcons(A){let Q=this.fillGradientPrimary,B=this.fillGradientSecondary;if(this.EKProps.staticIconColour!=="default")Q=this.EKProps.staticIconColour,B=this.EKProps.staticIconColour;if(this.EKProps.buttonImage&&this.contentOpen===!1)return v`
        <img
          src="${this.EKProps.buttonImage.url}"
          alt="${this.EKProps.buttonImage.altText}"
        />
      `;if(this.EKProps.buttonImage&&this.contentOpen===!0&&A==="ModelViewerElement")return v`
        <img
          src="${this.EKProps.buttonImage.url}"
          alt="${this.EKProps.buttonImage.altText}"
        />
      `;return{ARModelsElement:[bz(Q,B),uz(Q,B)],ModelViewerElement:[pz(Q,B),mz(Q,B)],ContainerElement:[qZ(Q,B),KZ(Q,B)],PCRoomsElement:[qZ(Q,B),KZ(Q,B)]}[A]}calculateButtonTextWidth(A){if(!A)return 0;let Q=document.createElement("span");Q.style.visibility="hidden",Q.style.whiteSpace="nowrap",Q.style.fontSize=this.EKProps.buttonSize==="small"?"18px":"20px",Q.style.color="black",Q.style.fontFamily="inherit",Q.innerText=A,this.renderRoot.appendChild(Q);let B=Q.offsetWidth+70;if(this.EKProps.buttonSize==="medium")B-=5;if(this.EKProps.buttonSize==="small")B-=15;return this.renderRoot.removeChild(Q),B}getFirstButtonText(){let A=this.allInOneV2PageButtonLocalisations.buttonText;if(!this.isMobileScreen){if(this.contentOpen===!1&&this.isHoveringFirstButton===!0)A=this.allInOneV2PageButtonLocalisations.exploreIn3D;else A=this.allInOneV2PageButtonLocalisations.buttonText;if(this.contentOpen)if(this.isHoveringFirstButton&&this.isFirstServiceSelected===!1)A=this.contentTitles[this.firstService];else A=null}else return this.allInOneV2PageButtonLocalisations.buttonText;return A}getFirstButtonWidth(){let A=this.calculateButtonTextWidth(this.allInOneV2PageButtonLocalisations.buttonText);if(!this.isMobileScreen){if(this.contentOpen===!1&&this.isHoveringFirstButton===!0)A=this.calculateButtonTextWidth(this.allInOneV2PageButtonLocalisations.exploreIn3D);else A=this.calculateButtonTextWidth(this.allInOneV2PageButtonLocalisations.buttonText);if(this.contentOpen){if(this.isHoveringFirstButton&&this.isFirstServiceSelected===!1)A=this.calculateButtonTextWidth(this.contentTitles[this.firstService]);else if(this.EKProps.buttonSize==="large")A="54";else if(this.EKProps.buttonSize==="medium")A="49";else if(this.EKProps.buttonSize==="small")A="39"}}else return this.calculateButtonTextWidth(this.allInOneV2PageButtonLocalisations.buttonText);return A}getServiceButtonWidth(A){let Q=this.EKProps.buttonSize==="large"?"54":this.EKProps.buttonSize==="medium"?"49":this.EKProps.buttonSize==="small"?"39":"54";if(!this.isMobileScreen){if(this.contentOpen){if(this.hoveringBlockType&&this.hoveringBlockType===A&&this.currentService!==A)return this.calculateButtonTextWidth(this.contentTitles[A])}}if(this.isMobileScreen)return this.EKProps.buttonSize==="large"?"54":this.EKProps.buttonSize==="medium"?"49":this.EKProps.buttonSize==="small"?"39":"49";return Q}getServiceButtonText(A){if(!this.isMobileScreen){if(this.contentOpen){if(this.hoveringBlockType&&this.hoveringBlockType===A&&this.currentService!==A)return this.contentTitles[A]}}return null}getCloseButtonPostion(){if(this.contentOpen&&this.isMobileScreen){if(this.EKProps.contentDirection==="right")return this.EKProps.buttonSize==="large"?`left:${this.serviceCount*60}px`:this.EKProps.buttonSize==="medium"?`left:${this.serviceCount*54}px`:this.EKProps.buttonSize==="small"?`left:${this.serviceCount*45}px`:`left:${this.serviceCount*54}px`;else if(this.EKProps.contentDirection==="left"){let A="";if(this.EKProps.buttonSize==="small")switch(this.serviceCount){case 0:A="21px";break;case 1:A="-22px";break;case 2:A="-66px";break;case 3:A="-110px";break;default:A="21px";break}else switch(this.serviceCount){case 0:A="42px";break;case 1:A="-18px";break;case 2:A="-80px";break;case 3:A="-142px";break;default:A="42px";break}return`left:${A}`}}}scrollToOriginalPosition(){if(!this.EKProps.scrollToOriginalPosition)return;window.scrollTo({top:this.EKOriginalScrollPosition.top,behavior:"smooth"})}handleBackdropClick(){if(this.EKProps.moveButtonToBody)this.EKComponentParentElement?.appendChild(this),i5(this.EKComponentParentElement,this,this.EKPlacement[0],!0);if(this.logEventLegacy("close","popup","all-in-one-v2"),this.triggerWOTWCommonInteraction("close"),this.contentOpen=!1,this.matchedServices.ModelViewerElement._showModelViewer=!1,this.ekButtonContainerElement&&this.ekButtonTextElement)this.ekButtonContainerElement.style.width=`${this.calculateButtonTextWidth(this.allInOneV2PageButtonLocalisations.buttonText)}px`,this.ekButtonTextElement.style.display="flex";this.contentTransitionReady=!1,setTimeout(()=>{if(this.ekBackdropElement)this.ekBackdropElement.style.display="none"},400),setTimeout(()=>{if(this.ekServiceButtons)this.ekServiceButtons.forEach((A)=>{A.classList.toggle("hide")})},500),this.scrollToOriginalPosition()}handleLaunchIntoARButtonClick(){new c6(this.EKIdentities?.arid||this.EKID,this.EKEnvironment,"ar-models").launchAR(this)}handleCloseContent(){if(this.EKProps.moveButtonToBody)this.EKComponentParentElement?.appendChild(this),i5(this.EKComponentParentElement,this,this.EKPlacement[0],!0);if(this.logEventLegacy("close","popup","all-in-one-v2"),this.triggerWOTWCommonInteraction("close"),this.contentOpen=!1,this.serviceClicked=!1,this.matchedServices.ModelViewerElement._showModelViewer=!1,this.ekButtonContainerElement&&this.ekButtonTextElement)this.ekButtonContainerElement.style.width=`${this.calculateButtonTextWidth(this.allInOneV2PageButtonLocalisations.buttonText)}px`,this.ekButtonTextElement.style.display="flex";this.contentTransitionReady=!1,setTimeout(()=>{if(this.ekBackdropElement)this.ekBackdropElement.style.display="none"},400),setTimeout(()=>{if(this.ekServiceButtons)this.ekServiceButtons.forEach((A)=>{A.classList.toggle("hide")})},500),this.scrollToOriginalPosition()}handleServiceButtonClicked(A,Q){if(this.currentService=A,this.serviceClicked=!0,A==="ModelViewerElement")this.matchedServices.ModelViewerElement._showModelViewer=!0;else this.matchedServices.ModelViewerElement._showModelViewer=!1;if(Q?.currentTarget)Q.currentTarget.style.width="54px";this.isFirstServiceSelected=!1,this.logEventLegacy("click","service",this.blockTypeToServiceMapping[A]),this.triggerWOTWCommonInteraction("click",this.blockTypeToServiceMapping[A])}getScrollPosition(){return{top:window.scrollY}}handleOpenContent(A){if(!this.contentOpen){if(this.EKProps.moveButtonToBody)document.body.appendChild(this),i5(this.EKComponentParentElement,this,this.EKPlacement[0],!1)}if(this.isFirstServiceSelected=!0,this.currentService=this.firstService,this.matchedServices.ModelViewerElement)this.matchedServices.ModelViewerElement._showModelViewer=!0;if(!this.contentOpen){let Q=this.ekContent?.getBoundingClientRect();if(this.EKOriginalScrollPosition=this.getScrollPosition(),Q){if(this.EKProps.scrollToOnDesktop&&!this.isMobileScreen)window.scrollTo({top:Q.top+window.scrollY-78+(this.EKProps.scrollOffset||0),behavior:"smooth"});else if(this.isMobileScreen)window.scrollTo({top:Q.top+window.scrollY-78+(this.EKProps.scrollOffset||0),behavior:"smooth"})}this.logEventLegacy("click","button","all-in-one-v2"),this.triggerWOTWCommonInteraction("click","all-in-one-v2")}if(A?.currentTarget)A.currentTarget.style.width="54px";if(this.ekBackdropElement)this.ekBackdropElement.style.display="flex";if(!this.contentOpen)this.logEventLegacy("open","popup","all-in-one-v2"),this.triggerWOTWCommonInteraction("open");this.contentOpen=!0,setTimeout(()=>{if(this.contentTransitionReady=!0,this.EKProps.BETAOptions.modelViewerDismissPoster){if(this.firstService==="ModelViewerElement")setTimeout(()=>{this.matchedServices.ModelViewerElement.modelViewerDismissPoster()},600)}},700)}handleContainerMouseLeave(A,Q,B){if(this.isHoveringButton=!1,Q==="AllInOneV2PageButtonElement")this.isHoveringFirstButton=!1;if(A.currentTarget&&A.currentTarget.dataset)A.currentTarget.classList.remove("hovering"),A.currentTarget.classList.add("notHovering");if(B==="service")this.hoveringBlockType=null,A.currentTarget.childNodes[3].style.display="none",A.currentTarget.style.width="px";if(this.isStillHoveringButton)this.logEventLegacy("hover-end",B,this.blockTypeToServiceMapping[Q]),this.triggerWOTWCommonInteraction("hover-end",this.blockTypeToServiceMapping[Q]),this.isStillHoveringButton=!1}handleContainerMouseEnter(A,Q,B){if(this.isHoveringButton=!0,Q==="AllInOneV2PageButtonElement")this.isHoveringFirstButton=!0;if(A.currentTarget&&A.currentTarget.dataset)A.currentTarget.classList.remove("notHovering"),A.currentTarget.classList.add("hovering");if(B==="service"){if(this.hoveringBlockType=Q,A.currentTarget.classList.contains("not-selected")){if(!this.isMobileScreen){let C=this.calculateButtonTextWidth(this.contentTitles[Q]);A.currentTarget.style.width=`${C}px`,A.currentTarget.childNodes[3].style.display="flex"}}}setTimeout(()=>{if(this.isHoveringButton)this.isStillHoveringButton=!0,this.logEventLegacy("hover-start",B,this.blockTypeToServiceMapping[Q]),this.triggerWOTWCommonInteraction("hover-start",this.blockTypeToServiceMapping[Q])},400)}handleFullscreenClick(){this.isFullscreen=!this.isFullscreen}renderCloseIcon(){return v`
      <div
        @click=${()=>this.handleCloseContent()}
        class="ek-close-button ${this.contentOpen?"open":"closed"} cursor-pointer w-[24px] h-[24px] rounded-full absolute flex justify-center items-center z-[99] top-[2px] sm:top-[-77px] sm:left-[-20px]"
        style="${this.getCloseButtonPostion()};"
      >
        ${this.EKProps.staticIconColour&&this.EKProps.staticIconColour!=="default"?YZ(this.EKProps.staticIconColour,this.EKProps.staticIconColour):YZ(this.fillGradientPrimary,this.fillGradientSecondary)}
      </div>
    `}renderContentTitles(){let A=[];for(let[Q,B]of Object.entries(this.matchedServices))A.push(this.contentTitle(Q));return A}renderServiceButtons(){let A=[],Q=0;for(let[B,C]of Object.entries(this.matchedServices))if(B!==this.firstService)Q++,A.push(this.serviceButton(B,Q));return this.serviceCount=Q,A}contentTitle(A){return v`
      <div
        class="ek-content-title-container min-w-max text-[20px] opacity-0 w-fit text-[16px] my-2 absolute z-[2] sm:z-[1] title-${A} ${this.EKProps.buttonSize} ${this.currentService===A?"active":"closed"}"
      >
        <div><h2>${this.contentTitles[A]}</h2></div>
      </div>
    `}serviceButton(A,Q){return v`
      <div
        @click=${(B)=>this.handleServiceButtonClicked(A,B)}
        data-id="${A}"
        @mouseenter=${(B)=>{this.handleContainerMouseEnter(B,A,"service")}}
        @mouseleave=${(B)=>{this.handleContainerMouseLeave(B,A,"service")}}
        class="ek-service-button-${this.contentOpen?"open":"closed"} ek-service-button ${this.EKProps.buttonSize} ${this.contentTransitionReady===!0?"ready":"notReady"} ${A} cursor-pointer ${this.currentService===A&&this.contentOpen?"selected":"not-selected"} icon z-[2] service-btn-${Q} absolute top-0"
        style="width:${this.getServiceButtonWidth(A)}px;${!this.contentOpen?"pointer-events:none":""}"
      >
        <div
          class="ek-icon-container-closed ${this.EKProps.buttonSize} ${this.EKProps.staticButtonIcon?"":"animated"} ${this.serviceHasBeenSelected(A)?`service-selected-${A}`:`service-unselected-${A}`}"
        >
          ${this.getServiceIcons(A)}
        </div>
        <div
          class="ek-service-text-container whitespace-nowrap flex items-center justify-end relative h-full overflow-hidden"
          style="width:${this.getServiceButtonWidth(A)}px;"
        >
          <h2 class="service-button-text px-[8px] z-[1] text-[20px]">
            ${this.getServiceButtonText(A)}
          </h2>
        </div>
      </div>
    `}renderARModelsContent(){let A=this.localisations();return v`
      ${I3()===!0?v`<button
            @click=${()=>{this.handleLaunchIntoARButtonClick()}}
            class="ek-launch-btn ek-mobile-launch-btn w-fit text-[16px] py-[30px] px-[62px] rounded-[45px] my-2"
          >
            ${this.allInOneV2PageButtonLocalisations.LaunchIntoARButtonText}
          </button>`:v`<div class="ek-qr-code sm:flex">${this.getQRCode()}</div>`}
      ${I3()===!0?v`<p class="ek-launch-text max-w-[200px] text-center my-6">
            ${this.allInOneV2PageButtonLocalisations.LaunchIntoARButtonSubText}
          </p>`:v`<p
            class="ek-launch-text max-w-[400px] text-[17px] md:text-[21px] text-center flex mb-4"
          >
            ${this.allInOneV2PageButtonLocalisations.QRtext}
          </p>`}
      ${A?.disclaimer&&this.EKProps.showDisclaimerText===!0?v`<p
            class="ek-launch-text italic text-center mx-4 text-sm	md:text-base"
          >
            ${A.disclaimer}
          </p>`:v``}
    `}renderContent(){return v`
      <div
        class="ek-content opacity-0 w-full p-[3px] flex flex-col justify-center items-center rounded-[28px] relative z-[3] sm:z-[1] ${this.EKProps.buttonSize}"
      >
        <div
          class="bg-white flex flex-col justify-center items-center rounded-[25px] overflow-hidden relative pb-[142%] sm:pb-[56.25%] w-[90vw] sm:w-[80vw]"
          style="max-width:${this.maxContentWidth}px"
        >
          <div
            class="@container flex flex-col justify-center items-center ek-service-content absolute top-0 left-0 w-full h-full flex justify-center items-center box-border"
          >
            <div
              @click=${()=>this.handleFullscreenClick()}
              class="ek-fullscreen-icon cursor-pointer absolute top-[10px] right-[10px] z-[9]"
            ></div>
            <div
              class="@container flex flex-col justify-center items-center ek-service-content absolute top-0 left-0 w-full h-full flex justify-center items-center box-border ${this.currentService!=="ARModelsElement"?"hidden":""}"
            >
              ${this.renderARModelsContent()}
            </div>
            ${Object.keys(this.matchedServices).filter((A)=>A!=="ARModelsElement").map((A)=>v`<div
                    class="@container flex flex-col justify-center items-center ek-service-content absolute top-0 left-0 w-full h-full flex justify-center items-center box-border ${this.currentService!==A?"hidden":""}"
                  >
                    ${this.matchedServices[A]}
                  </div>`)}
          </div>
        </div>
        ${this.EKProps.poweredByEyekandyBadge?.enabled===!0?this.poweredByEyekandyBadge():R1}
      </div>
    `}getQRCode(){if(this.EKResolvedData["datarequirement-arqrcode"])return v` <img
        class="@2xl:w-[300px] @2xl:h-[300px] @xl:w-[250px] @xl:h-[250px] @lg:w-[200px] @lg:h-[200px]"
        src="${this.EKResolvedData["datarequirement-arqrcode"]}"
        alt="QR Code"
      />`;return null}renderButtonv1(){return v`
      <div
        class="${this.contentOpen?"relative ek-open":"ek-close"} ek-observe ${this.EKProps.buttonSize}"
      >
        <div
          class="service-button-container ${this.contentOpen?"open":"closed"} relative flex gap-[13px] ${this.EKProps.buttonSize}"
        >
          <div
            data-id="${this.firstService}"
            class="ek-page-button-v2-container ${this.EKProps.buttonSize} ${this.EKProps.contentDirection} ${this.firstService} z-[3] icon flex items-center rounded-[40px] overflow-hidden p-[3px] ${this.contentOpen?"ek-container-open":"ek-container-closed"} ${this.currentService===this.firstService&&this.contentOpen?"selected":"not-selected"} cursor-pointer notHovering ${this.EKProps.staticButtonIcon===!1?"animated":null}"
            style="width:${this.getFirstButtonWidth()}px;${this.EKProps.contentDirection==="left"?"flex-direction:row-reverse;":null}"
            @click=${(A)=>{this.handleOpenContent(A)}}
            @mouseenter=${(A)=>{this.handleContainerMouseEnter(A,"AllInOneV2PageButtonElement","button")}}
            @mouseleave=${(A)=>{this.handleContainerMouseLeave(A,"AllInOneV2PageButtonElement","button")}}
          >
            <div
              @click=${()=>this.currentService=Object.keys(this.matchedServices)[0]}
              class="ek-icon-container-${this.contentOpen?"open":"closed"} icon cursor-pointer z-[2] min-w-[45px] ${this.EKProps.buttonSize}"
            >
              ${this.contentOpen===!0?this.getServiceIcons(Object.keys(this.matchedServices)[0]):this.getServiceIcons("ARModelsElement")}
            </div>
            <div
              class="whitespace-nowrap flex items-center justify-end relative h-full overflow-hidden ek-first-button-text-container"
              style="width:${this.getFirstButtonWidth()}px;transition:width 0.6s linear"
            >
              <h2 class="ek-button-text text-[20px] px-[8px]">
                ${this.getFirstButtonText()}
              </h2>
            </div>
          </div>
          <div
            class="gap-[13px] flex sm:flex-col absolute ek-service-buttons-and-close-icon ${this.contentTransitionReady===!0?"ready":"notReady"} ${this.EKProps.contentDirection} left-[-136px] sm:left-[0px] ${this.EKProps.buttonSize}"
          >
            ${this.renderServiceButtons()}
            ${this.contentOpen?this.renderCloseIcon():null}
          </div>
        </div>
        <div
          class="ek-content-container ${this.EKProps.buttonSize} ${this.contentTransitionReady===!0?"ready":"notReady"} ${this.EKProps.contentDirection} min-h-[540px] relative ${this.contentOpen?"open":"closed"}"
        >
          ${this.renderContentTitles()} ${this.renderContent()}
        </div>
      </div>
    `}poweredByEyekandyBadge(){let A=()=>{if(this.logEventLegacy("click","button","powered-by-eyekandy-badge"),this.triggerWOTWCommonInteraction("click","powered-by-eyekandy-badge"),!this.EKProps.poweredByEyekandyBadge?.hyperLink)return;window.open(`https://eyekandy.com?utm_source=${window.location.href}&utm_medium=${this.blockTypeToServiceMapping[this.currentService]}&utm_campaign=aio-button&utm_content=powered-by-eyekandy`,"_blank")};return v`
      <div
        class="ek-powered-by-eyekandy-icon ${this.EKProps.poweredByEyekandyBadge?.hyperLink?"cursor-pointer":""} ${this.EKProps.poweredByEyekandyBadge?.position}"
        @click=${()=>{A()}}
      >
        ${BJ()}
      </div>
    `}render(){if(!this.isComponentValidToRender())return this.nullifyComponent("Component did not come with a QR");if(this.EKControlObject._config.deploymentColours.useTheseColours)this.fillGradientPrimary=this.EKControlObject._config.deploymentColours.primaryColour,this.fillGradientSecondary=this.EKControlObject._config.deploymentColours.secondaryColour,this.contentTextBackgroundColour=this.EKControlObject._config.deploymentColours.textColourBackground,this.contentTextForegroundColour=this.EKControlObject._config.deploymentColours.textColourForeground,this.serviceTextColour=this.EKControlObject._config.deploymentColours.textColourOther;return v`
      ${this.getHostStyleOverride()} ${this.getCustomCSSStyles()}
      <style>
        :host {
          --foreground-colour: ${this.fillGradientPrimary};
          --background-colour: ${this.fillGradientSecondary};
          --text-colour: ${this.serviceTextColour};
          --icon-background-colour: ${this.EKProps.iconShouldHaveWhiteBackground?"white":this.EKProps.backgroundColour};
          --title-border-radius: ${this.EKProps.titlesRounded?"40px":"2px"};
          --svg-icon-top-colour: ${this.EKProps.staticIconColour!=="default"?this.EKProps.staticIconColour:"white"};
          --content-text-background-colour: ${this.contentTextBackgroundColour};
          --content-text-foreground-colour: ${this.contentTextForegroundColour};
          line-height: 1.4;
          height: ${this.buttonSizeToPixels[this.EKProps.buttonSize||"large"]};
          ${this.contentOpen===!0?"z-index: 99999999999; !important;":null}
          ${this.EKProps.BETAOptions.directionLeftToRight===!0?"direction: ltr;":null}
        }
        .ek-initial-button-text,
        .service-button-text {
          color: ${this.serviceTextColour};
        }
      </style>
      <div
        @click=${()=>{this.handleBackdropClick()}}
        style="display: none;"
        class="ek-backdrop fixed bg-black top-0 left-0 h-full w-full opacity-0 ${this.contentOpen===!0?"active":"inactive"}"
      ></div>
      ${this.renderButtonv1()}
    `}}f([X1(".ek-observe")],u9.prototype,"ekObserveElement",void 0),f([X1(".ek-button-text")],u9.prototype,"ekButtonTextElement",void 0),f([X1(".ek-page-button-v2-container")],u9.prototype,"ekButtonContainerElement",void 0),f([X1(".ek-service-button.ARModelsElement")],u9.prototype,"ekARModelsServiceButtonElement",void 0),f([X1(".ek-service-button.ContainerElement")],u9.prototype,"ekContainerServiceButtonElement",void 0),f([ZC(".ek-service-button")],u9.prototype,"ekServiceButtons",void 0),f([X1(".ek-backdrop")],u9.prototype,"ekBackdropElement",void 0),f([X1(".ek-content-container")],u9.prototype,"ekContent",void 0),f([a({attribute:!1})],u9.prototype,"EKProps",void 0),f([a({attribute:!1})],u9.prototype,"EKResolvedData",void 0),f([a({type:Boolean})],u9.prototype,"isHovering",void 0),f([K0()],u9.prototype,"contentOpen",void 0),f([K0()],u9.prototype,"matchedServices",void 0),f([K0()],u9.prototype,"currentService",void 0),f([K0()],u9.prototype,"firstService",void 0),f([K0()],u9.prototype,"fillGradientPrimary",void 0),f([K0()],u9.prototype,"fillGradientSecondary",void 0),f([K0()],u9.prototype,"contentTextBackgroundColour",void 0),f([K0()],u9.prototype,"contentTextForegroundColour",void 0),f([K0()],u9.prototype,"serviceTextColour",void 0),f([K0()],u9.prototype,"serviceClicked",void 0),f([K0()],u9.prototype,"serviceCount",void 0),f([K0()],u9.prototype,"allInOneV2PageButtonLocalisations",void 0),f([K0()],u9.prototype,"contentTitles",void 0),f([K0()],u9.prototype,"isHoveringButton",void 0),f([K0()],u9.prototype,"isStillHoveringButton",void 0),f([K0()],u9.prototype,"contentTransitionReady",void 0),f([K0()],u9.prototype,"isFullscreen",void 0),f([K0()],u9.prototype,"buttonSizeInPixels",void 0),f([K0()],u9.prototype,"isMobileScreen",void 0),f([K0()],u9.prototype,"buttonSizeToPixels",void 0),f([K0()],u9.prototype,"blockTypeToServiceMapping",void 0),f([K0()],u9.prototype,"hovered",void 0),f([K0()],u9.prototype,"hasHovered",void 0),f([K0()],u9.prototype,"isHoveringFirstButton",void 0),f([K0()],u9.prototype,"isFirstServiceSelected",void 0),f([K0()],u9.prototype,"hoveringBlockType",void 0),f([K0()],u9.prototype,"contentHasBeenOpened",void 0),f([K0()],u9.prototype,"EKComponentParentElement",void 0),f([K0()],u9.prototype,"EKPlacement",void 0),f([K0()],u9.prototype,"EKOriginalScrollPosition",void 0),u9=f([z0("ek-all-in-one-v2-page-button")],u9);class p9 extends M1{_mouseOverBadge=!1;_mouseOverModal=!1;_mouseOverBadgeTimer=void 0;_mouseOverModalTimer=void 0;static styles=U0`
    :host {
      display: inline-block;
    }
    button {
      width: 100%;
      height: 100%;
      background: transparent;
      drop-shadow(rgba(0, 0, 0, 0.06) 0px 2px 2px);
      border: none;
      transition: opacity 250ms cubic-bezier(0.4, 0, 0.2, 1);
      opacity: 0;
      position: relative;
    }
    button.show { opacity: 1; }
    button > img {
      min-width: 100%;
      min-height: 100%;
    }
  `;constructor(A,Q,B,C,J,I,q,K,Y){super(A,Q,B,C,J,I,q,K,Y,!0,"badge");this._isVisible=!1;this._isError=!1}toggleVisible(){if(this._isVisible===!0)this.setHidden();else this.setVisible()}setVisible(){if(this._isVisible=!0,this.EKChildren&&this.EKChildren.length>0){this.logEventLegacy("click",this._wotwGetDetail());let A=this.getChildToDisplay();if(A){if(A.EKBlockType==="CrossmarkElement"||A.EKBlockType==="ULElement")A.logDeliveryEventLegacy()}if(this.EKProps?.modal?.modalActivator==="hover")this.triggerWOTWCommonInteraction("hover","modal");else this.triggerWOTWCommonInteraction("click","modal")}}setHidden(){this._isVisible=!1}_getBadgeImageProps(){let A=this.EKResolvedData["datarequirement-evo"],Q=this.EKResolvedData["datarequirement-processorspec"],B=null,C="";if(this.EKChildren&&this.EKChildren.length>0){if(A){if(Q.learnMoreImageEvo&&Q.learnMoreImageEvo.url)B=Q.learnMoreImageEvo.url,C=Q.learnMoreImageEvo.altText}else if(Q.learnMoreImageCore&&Q.learnMoreImageCore.url)B=Q.learnMoreImageCore.url,C=Q.learnMoreImageCore.altText}else if(A){if(Q.badgeImageEvo&&Q.badgeImageEvo.url)B=Q.badgeImageEvo.url,C=Q.badgeImageEvo.altText}else if(Q.badgeImageCore&&Q.badgeImageCore.url)B=Q.badgeImageCore.url,C=Q.badgeImageCore.altText;return{src:B,alt:C}}_onButtonClicked(){if(this.EKProps?.modal?.modalActivator==="click")this.toggleVisible()}_onModalHover(){if(this.EKProps?.modal?.modalActivator==="hover")clearTimeout(this._mouseOverModalTimer),this._mouseOverModal=!0}_onModalLeave(){if(this.EKProps?.modal?.modalActivator==="hover")clearTimeout(this._mouseOverModalTimer),this._mouseOverModal=!1,this._mouseOverModalTimer=setTimeout(()=>{if(!this._mouseOverBadge)this.setHidden()},100)}_onBadgeHover(){if(this.EKProps?.modal?.modalActivator==="hover")clearTimeout(this._mouseOverBadgeTimer),this._mouseOverBadge=!0,this._mouseOverBadgeTimer=setTimeout(()=>{if(this._mouseOverBadge)this.setVisible()},333)}_onBadgeLeave(){if(this.EKProps?.modal?.modalActivator==="hover")clearTimeout(this._mouseOverBadgeTimer),this._mouseOverBadge=!1,this._mouseOverBadgeTimer=setTimeout(()=>{if(!this._mouseOverModal)this.setHidden()},100)}_onImageError(){this._isError=!0}_wotwGetDetail(){let A=this.EKResolvedData["datarequirement-processorspec"],Q=this.EKResolvedData["datarequirement-evo"],B=null,C=this.getChildToDisplay();if(C)B=C.EKBlockType==="CrossmarkElement"?"crossmark":"ul";return`intel-core-${A.group}-${A.generation}:::nexus-unknown:::${document.title}:::${B}`}getChildToDisplay(){let A=null;if(this.EKChildren&&this.EKChildren.length>0)for(let Q of this.EKChildren){let B=Q;if(B.EKBlockType==="CrossmarkElement")A=B;if(B.EKBlockType==="ULElement"&&A===null)A=B}return A}isComponentValidToRender(){return!0}render(){let A=this._getBadgeImageProps();if(A.src===null||this._isError===!0)return this.nullifyComponent("Unable to find image src or in error state"),null;let Q="#f8f8f8",B=null;if(this.EKChildren&&this.EKChildren.length>0)B=v`<ek-modal
        .placementStrategy="${this.EKProps?.modal?.modalPlacement}"
        .EKAPIComponentParent="${this}"
        .visible="${this._isVisible}"
        .modelContent=${this.getChildToDisplay()}
        @ek-modal-close-button="${this.setHidden}"
        @ek-modal-close-backdrop="${this.setHidden}"
        @ek-mouse-over-body="${this._onModalHover}"
        @ek-mouse-out-body="${this._onModalLeave}"
        maxWidth="450px"
        noStyle
        .backdropZIndex=${this.EKProps?.modal?.modalBackdropZIndex}
        .bodyZIndex=${this.EKProps?.modal?.modalZIndex}
      >
      </ek-modal>`;return v`
      ${this.getHostStyleOverride()} ${this.getCustomCSSStyles()}
      <style>
        ek-modal {
          --modal-background-color: ${Q};
        }
        button {
          z-index: ${this.EKProps.modal?.modalBackdropZIndex||"auto"};
        }
        button > img {
          height: ${this.EKProps.badgeSize?`${this.EKProps.badgeSize}px`:"90px"};
        }
      </style>
      ${B}
      <button
        class="badge-button show"
        style="${this.getElementStyleOverride()}"
        @click="${this._onButtonClicked}"
        @mouseover="${this._onBadgeHover}"
        @mouseout="${this._onBadgeLeave}"
      >
        <img src="${A.src}" @error=${this._onImageError} />
      </button>
    `}}f([a({attribute:!1})],p9.prototype,"EKResolvedData",void 0),f([a({attribute:!1})],p9.prototype,"EKProps",void 0),f([K0()],p9.prototype,"_isVisible",void 0),f([K0()],p9.prototype,"_isError",void 0),f([X1("ek-modal")],p9.prototype,"ekModal",void 0),p9=f([z0("ek-badge")],p9);class m9 extends M1{constructor(A,Q,B,C,J,I,q,K,Y){super(A,Q,B,C,J,I,q,K,Y,!1)}isComponentValidToRender(){return!0}dataToCss(){return this.EKProps?.breakpoints?.map((A)=>`
        @media ${this.EKControlObject._breakpoints[A.breakpoint]} {
          .eky-container {
            ${A.widthGroup?.width?`width: ${A.widthGroup.width};`:""}
            ${A.widthGroup?.maxWidth100?`max-width: calc(100vw - ${(this.breadcrumbs||[]).includes("AllInOneContentElement")?22:0}px);`:""}
            ${A.heightGroup?.height?`height: ${A.heightGroup.height};`:""}
            ${A.backgroundColorGroup?.backgroundColor?`background-color: ${A.backgroundColorGroup.backgroundColor};`:""}
            ${A.boxShadowGroup?.boxShadow?`box-shadow: ${A.boxShadowGroup?.boxShadow==="yes"?"rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.1) 0px 4px 6px -4px;":"none"}`:""}
            ${A.borderRadiusGroup?.borderRadius?`border-radius: ${A.borderRadiusGroup.borderRadius};`:""} }
        }
      `)}render(){return v`
      ${this.getHostStyleOverride()}
      <style>
        ${this.dataToCss()}
      </style>
      <div class="eky-container" style="${this.getElementStyleOverride()}">
        ${this.EKChildren}
      </div>
    `}}f([a({attribute:!1})],m9.prototype,"EKProps",void 0),m9=f([z0("ek-container")],m9);class Z1 extends M1{hasDelivered=!1;static evoLogo="https://cdn.pointandplace.com/services/intel-crossmark/images/evo-logo.png";static crossmarkLogo="https://cdn.pointandplace.com/services/intel-crossmark/images/crossmark-logo-v2.png";static colours={textWhite:"#ffffff",textGreyDark:"#525252",textGreyLight:"#707070",textOrange:"#f0a10f",uiOrange:"#f0a10f",textBlue:"#00c7fd",uiBlue:"#00c7fd",textBlack:"#000000",textIntelTitleBlue:"#029acd"};static dynamic={introHeading:{default:"default-heading-intro",unison:"v2-heading-intro",evo:"v2-heading-intro"},introSubheading:{default:null,unison:"v2-subheading-intro",evo:"v2-subheading-intro"},featureOne:{default:null,unison:"v2-feature-one",evo:"v2-feature-one"},featureTwo:{default:null,unison:"v2-feature-two",evo:"v2-feature-two"},featureThree:{default:null,unison:"v2-feature-three",evo:"v2-feature-three"},featureFour:{default:null,unison:"v2-feature-four-unison",evo:"v2-feature-four-evo"},thisDevice:{default:"default-heading-device",unison:null,evo:null},evoImage:{default:null,unison:Z1.evoLogo,evo:Z1.evoLogo},evoHeading:{default:null,unison:"v2-heading-two",evo:"v2-heading-two"},evoSubheading:{default:null,unison:"v2-subheading-two",evo:"v2-subheading-two"},crossmarkImage:{default:Z1.crossmarkLogo,unison:Z1.crossmarkLogo,evo:Z1.crossmarkLogo},crossmarkDescription:{default:"default-text-crossmark",unison:"default-text-crossmark",evo:"default-text-crossmark"},legalHeading:{default:"default-heading-legal",unison:"default-heading-legal",evo:"default-heading-legal"},legalContent:{default:"default-text-legal",unison:"default-text-legal",evo:"default-text-legal"},scoreOverallHeading:{default:"default-heading-overall-score",unison:"default-heading-overall-score",evo:"default-heading-overall-score"},scoreOverallTooltip:{default:"default-tooltip-overall-score",unison:"default-tooltip-overall-score",evo:"default-tooltip-overall-score"},scoreProductivityHeading:{default:"default-heading-productivity",unison:"default-heading-productivity",evo:"default-heading-productivity"},scoreProductivityTooltip:{default:"default-tooltip-productivity",unison:"default-tooltip-productivity",evo:"default-tooltip-productivity"},scoreCreativityHeading:{default:"default-heading-creativity",unison:"default-heading-creativity",evo:"default-heading-creativity"},scoreCreativityTooltip:{default:"default-tooltip-creativity",unison:"default-tooltip-creativity",evo:"default-tooltip-creativity"}};static get styles(){return U0`
      :host {
        transition: transform 0.3s ease-in-out;
      }
      .smooth {
        transition: opacity 0.3s ease-in-out;
      }
      .opacity-0 {
        opacity: 0 !important;
      }
      .flex {
        display: flex;
      }
      .flex-col {
        flex-direction: column;
      }
      :host {
        display: flex;
        flex-direction: column;
        height: 100%;
        width: 100%;
        position: relative;
      }
      .eky-iframe {
        display: flex;
        width: 100%;
        height: 100%;
        border: none;
      }
      :host {
        font-size: 62.5%;
        max-width: 100%;
      }
      .container {
        font-size: 1.6rem;
        min-width: 400px;
        display: inline-flex;
        container-type: inline-size;
      }
      .container-default {
        background: #f8f8f8;
        padding: 18px;
      }
      .container-unison {
        background: url(https://cdn.pointandplace.com/services/intel-crossmark/images/bg-unison.jpg);
        background-size: cover;
        padding: 18px;
      }
      .container-evo {
        background: url(https://cdn.pointandplace.com/services/intel-crossmark/images/bg-evo.jpg);
        background-size: cover;
        padding: 18px;
        box-sizing: border-box;
        width: 100%;
      }
      .legal-button-unison,
      .legal-description-unison {
        background: #061939;
      }
      .legal-description-unison > p > a,
      .legal-description-unison > p > a:visited,
      .legal-description-evo > p > a,
      .legal-description-evo > p > a:visited {
        color: white;
      }
      .legal-button-evo,
      .legal-description-evo {
        background: #000000;
      }
      .crossmark-info-container-unison {
      }
      .crossmark-info-container-default {
        background: #ffffff;
        border: 2px solid #f0a10f;
        margin: 1rem 0;
        width: 100%;
        box-sizing: border-box;
      }
      .tooltip-popup-default {
        border: 1px solid #f0a10f;
      }
      .tooltip-popup-unison {
        color: #ffffff;
        background: black;
        border: 1px solid #00c7fd;
      }
      .tooltip-popup-unison > h3 {
        color: #00c7fd;
      }
      .tooltip-popup-evo > h3 {
        color: #00c7fd;
      }
      .tooltip-popup-evo {
        color: #ffffff;
        background: #000000;
        border: 1px solid #00c7fd;
      }
      .eky-ar {
        text-align: right;
        direction: rtl;
      }

      @container (min-width: 767px) {
        .container-default {
          background: #f8f8f8;
          padding: 50px;
        }
        .container-unison {
          background: url(https://cdn.pointandplace.com/services/intel-crossmark/images/bg-unison.jpg);
          background-size: cover;
          padding: 50px;
        }
        .container-evo {
          background: url(https://cdn.pointandplace.com/services/intel-crossmark/images/bg-evo.jpg);
          background-size: cover;
          padding: 50px;
        }
      }

      @container (min-width: 950px) {
        .container-default {
          background: #f8f8f8;
          padding: 50px;
        }
        .container-unison {
          background: url(https://cdn.pointandplace.com/services/intel-crossmark/images/bg-unison.jpg);
          background-size: cover;
          padding: 50px;
        }
        .container-evo {
          background: url(https://cdn.pointandplace.com/services/intel-crossmark/images/bg-evo.jpg);
          background-size: cover;
          padding: 50px;
        }
      }
    `}get localisations(){return{en:{"default-heading-creativity":"Q3JlYXRpdml0eQ==","default-heading-device":"VGhpcyBkZXZpY2U=","default-heading-intro":"Q2hlY2sgaG93IHRoaXMgc3lzdGVtIHBlcmZvcm1zCmFjY29yZGluZyB0byBDcm9zc21hcmvihKIgYmVuY2htYXJrLg==","default-heading-legal":"TGVnYWwgJiBkaXNjbGFpbWVycw==","default-heading-overall-score":"T3ZlcmFsbCBTY29yZQ==","default-heading-productivity":"UHJvZHVjdGl2aXR5","default-text-crossmark":"Q3Jvc3NtYXJr4oSiIGlzIGFuIGVhc3kgdG8gcnVuIG5hdGl2ZSBjcm9zcy1wbGF0Zm9ybSBiZW5jaG1hcmsgCnRoYXQgbWVhc3VyZXMgdGhlIG92ZXJhbGwgc3lzdGVtIHBlcmZvcm1hbmNlIGFuZCBzeXN0ZW0gCnJlc3BvbnNpdmVuZXNzIHVzaW5nIG1vZGVscyBvZiByZWFsLXdvcmxkIGFwcGxpY2F0aW9ucy4=","default-text-legal":"QmFzZWQgb24gYW5hbHlzaXMgbm9ybWFsaXplZCB0byBhIDUtcG9pbnQgc2NhbGUgb2YgcHVibGlzaGVkIG1vYmlsZSBDcm9zc21hcmsgZGF0YSBmcm9tIDx1cmwtMDAxPiBhcyBkb3dubG9hZGVkIG9uIDxkYXRlPi4gU2VlIGRldGFpbHMgYXQgPHVybC0wMDI+LiBQZXJmb3JtYW5jZSB2YXJpZXMgYnkgdXNlLCBjb25maWd1cmF0aW9ucyBhbmQgb3RoZXIgZmFjdG9ycy4gPHVybC0wMDM+Lg==","default-tooltip-creativity":"UGVyZm9ybWFuY2Ugb2YgCmNvbW1vbiBjb250ZW50IGNyZWF0aW9uIGFwcGxpY2F0aW9uIHVzYWdlcyBzdWNoIGFzIGVkaXRpbmcgcGhvdG9zLCBvcmdhbml6aW5nIHBob3RvIGFsYnVtcywgYW5kIGVkaXRpbmcvcmVuZGVyaW5nIHZpZGVvcy4=","default-tooltip-overall-score":"T3ZlcmFsbCBwZXJmb3JtYW5jZSBiYXNlZCBvbiByZWFsaXN0aWMgdXNhZ2VzIHN1Y2ggYXMgY3JlYXRpbmcgd29yZCBkb2N1bWVudHMgYW5kIHByZXNlbnRhdGlvbnMsIGVkaXRpbmcgc3ByZWFkc2hlZXRzLCBicm93c2luZyB0aGUgd2ViLCBhbmQgZWRpdGluZyBwaG90b3MgYW5kIHZpZGVvcy4=","default-tooltip-productivity":"UGVyZm9ybWFuY2Ugb2YgY29tbW9uIG9mZmljZSBwcm9kdWN0aXZpdHkgYXBwbGljYXRpb24gdXNhZ2VzCnN1Y2ggYXMgY3JlYXRpbmcgd29yZCBkb2N1bWVudHMsIHVzaW5nIGUtbWFpbCwgZWRpdGluZyBwcmVzZW50YXRpb25zLCBtb2RlbGxpbmcgd2l0aCBzcHJlYWRzaGVldHMsIAphbmQgYnJvd3NpbmcgdGhlIHdlYi4=","global-service-name":"SW50ZWzCriBDcm9zc21hcmvihKI=","v2-feature-four-evo":"SW5zdGFudCBXYWtl","v2-feature-four-unison":"U2VhbWxlc3NseSBDb25uZWN0IFRvIEFueQpTbWFydHBob25l","v2-feature-one":"VGhpbiBhbmQgTGlnaHQgRGVzaWducw==","v2-feature-three":"TG9vayBhbmQgU291bmQgWW91ciBCZXN0IE9uClZpZGVvIENoYXRz","v2-feature-two":"QWxsLWRheSBCYXR0ZXJ5IExpZmU=","v2-heading-intro":"SW50ZWzCriBFdm/ihKIgTGFwdG9wcw==","v2-heading-two":"U3VwZXJpb3IgcGVyZm9ybWFuY2UgcG93ZXJlZCBieSBJbnRlbMKuIENvcmXihKIgUHJvY2Vzc29ycw==","v2-subheading-intro":"VGhlIEJlc3QgT3ZlcmFsbCBMYXB0b3AgRXhwZXJpZW5jZQ==","v2-subheading-two":"VGhpcyBJbnRlbMKuIEV2b+KEoiBsYXB0b3AgaXMgcG93ZXJlZCBieSBhbiBJbnRlbMKuIENvcmXihKIgPGNwdT4="},br_pt:{"default-heading-creativity":"Q3JpYXRpdmlkYWRl","default-heading-device":"RXN0ZSBkaXNwb3NpdGl2bw==","default-heading-intro":"VmVyaWZpcXVlIG8gZGVzZW1wZW5obyBkZXNzZSBzaXN0ZW1hIGRlIGFjb3JkbyBjb20gbyBwYXLDom1ldHJvIGRlIHJlZmVyw6puY2lhIENyb3NzbWFya+KEoi4=","default-heading-legal":"SW5mb3JtYcOnw7VlcyBsZWdhaXMgZSBhdmlzb3MgZGUgaXNlbsOnw6NvIGRlIHJlc3BvbnNhYmlsaWRhZGU=","default-heading-overall-score":"UG9udHVhw6fDo28gZ2VyYWw=","default-heading-productivity":"UHJvZHV0aXZpZGFkZQ==","default-text-crossmark":"TyBDcm9zc21hcmvihKIgw6kgdW0gcGFyw6JtZXRybyBkZSByZWZlcsOqbmNpYSBuYXRpdm8gbXVsdGlwbGF0YWZvcm1hIGUgZGUgZsOhY2lsIGV4ZWN1w6fDo28gcXVlIG1lZGUgbyBkZXNlbXBlbmhvIGdlcmFsIGUgYSBjYXBhY2lkYWRlIGRlIHJlc3Bvc3RhIGRvIHNpc3RlbWEgdXNhbmRvIG1vZGVsb3MgZGUgYXBsaWNhdGl2b3MgZG8gbXVuZG8gcmVhbC4=","default-text-legal":"Q29tIGJhc2UgbmEgYW7DoWxpc2UsIG5vcm1hbGl6YWRhIHBhcmEgdW1hIGVzY2FsYSBkZSA1IHBvbnRvcywgZGUgZGFkb3MgQ3Jvc3NtYXJrIG3Ds3ZlaXMgcHVibGljYWRvcyBwcm92ZW5pZW50ZXMgZGUgPHVybC0wMDE+IGUgdHJhbnNmZXJpZG9zIGEgPGRhdGU+LiBDb25zdWx0ZSBvcyBkZXRhbGhlcyBlbSA8dXJsLTAwMj4uIE8gZGVzZW1wZW5obyB2YXJpYSBkZSBhY29yZG8gY29tIG8gdXNvLCBhIGNvbmZpZ3VyYcOnw6NvIGUgb3V0cm9zIGZhdG9yZXMuIDx1cmwtMDAzPi4=","default-tooltip-creativity":"RGVzZW1wZW5obyBkZSB1c29zIGNvbXVucyBkZSBhcGxpY2F0aXZvcyBkZSBjcmlhw6fDo28gZGUgY29udGXDumRvLCBjb21vIGVkacOnw6NvIGRlIGZvdG9zLCBvcmdhbml6YcOnw6NvIGRlIMOhbGJ1bnMgZGUgZm90b3MgZSBlZGnDp8Ojby9yZW5kZXJpemHDp8OjbyBkZSB2w61kZW9zLg==","default-tooltip-overall-score":"RGVzZW1wZW5obyBnZXJhbCBiYXNlYWRvIGVtIHVzb3MgcmVhbGlzdGFzLCBjb21vIGNyaWHDp8OjbyBkZSBkb2N1bWVudG9zIGRvIFdvcmQgZSBhcHJlc2VudGHDp8O1ZXMsIGVkacOnw6NvIGRlIHBsYW5pbGhhcywgbmF2ZWdhw6fDo28gbmEgV2ViIGUgZWRpw6fDo28gZGUgZm90b3MgZSB2w61kZW9zLg==","default-tooltip-productivity":"RGVzZW1wZW5obyBkZSB1c29zIGNvbXVucyBkZSBhcGxpY2F0aXZvcyBkZSBwcm9kdXRpdmlkYWRlIGRlIGVzY3JpdMOzcmlvLCBjb21vIGNyaWHDp8OjbyBkZSBkb2N1bWVudG9zIGRvIFdvcmQsIHVzbyBkZSBlLW1haWwsIGVkacOnw6NvIGRlIGFwcmVzZW50YcOnw7VlcywgbW9kZWxhZ2VtIGRlIHBsYW5pbGhhcyBlIG5hdmVnYcOnw6NvIG5hIFdlYi4=","global-service-name":"SW50ZWzCriBDcm9zc21hcmvihKI=","v2-feature-four-evo":"QXRpdmHDp8OjbyBpbnN0YW50w6JuZWE=","v2-feature-four-unison":"Q29uZWN0ZS1zZSBjb20gZmFjaWxpZGFkZSBhIHF1YWxxdWVyIHNtYXJ0cGhvbmU=","v2-feature-one":"RGVzaWducyBmaW5vcyBlIGxldmVz","v2-feature-three":"U3VhIG1lbGhvciBhcGFyw6puY2lhIGVtIGNoYXRzIHBvciB2w61kZW8=","v2-feature-two":"QSBiYXRlcmlhIGR1cmEgdW0gZGlhIGludGVpcm8=","v2-heading-intro":"Tm90ZWJvb2tzIEludGVswq4gRXZv4oSi","v2-heading-two":"RSBhaW5kYSBvYnRlbmhhIGRlc2VtcGVuaG8gc3VwZXJpb3IgY29tIG9zIHByb2Nlc3NhZG9yZXMgSW50ZWzCriBDb3Jl4oSi","v2-subheading-intro":"RXhwZXJpw6puY2lhIGNvbXBsZXRhCmVtIG5vdGVib29r","v2-subheading-two":"RXN0ZXMgc8OjbyBvcyBub3RlYm9va3MgSW50ZWzCriBFdm/ihKIgY29tIHByb2Nlc3NhZG9yIDxjcHU+"},ar:{"default-heading-creativity":"2KfZhNil2KjYr9in2Lk=","default-heading-device":"2YfYsNinINin2YTYrNmH2KfYsjo=","default-heading-intro":"2KrYudix2ZHZgSDYudmE2Ykg2KPYr9in2KEg2YfYsNinINin2YTZhti42KfZhSDZiNmB2YLZi9inINmE2YTYp9iu2KrYqNin2LEg2KfZhNmF2LnZitin2LHZiiBDcm9zc21hcmvihKLigI4u","default-heading-legal":"2KXYrtmE2KfYoSDYp9mE2YXYs9ik2YjZhNmK2Kkg2KfZhNmC2KfZhtmI2YbZitip","default-heading-overall-score":"2KfZhNmG2KrZitis2Kkg2KfZhNil2KzZhdin2YTZitip","default-heading-productivity":"2KfZhNil2YbYqtin2KzZitip","default-text-crossmark":"2KXZhiBDcm9zc21hcmvihKLigI4g2YfZiCDYp9iu2KrYqNin2LEg2YXYudmK2KfYsdmKINij2LXZhNmKINmI2LPZh9mEINin2YTYqti02LrZitmEINi52YTZiSDYo9mKINmF2YbYtdipINmK2YLZitizINij2K/Yp9ihINin2YTZhti42KfZhSDYp9mE2KXYrNmF2KfZhNmKINmI2LPYsdi52Kkg2KfYs9iq2KzYp9io2Kkg2KfZhNmG2LjYp9mFINio2KfYs9iq2K7Yr9in2YUg2YbZhdin2LDYrCDYqti32KjZitmC2KfYqiDZhdmGINin2YTYudin2YTZhSDYp9mE2YHYudmE2You","default-text-legal":"2KfYs9iq2YbYp9iv2YvYpyDYpdmE2Ykg2KrYrdmE2YrZhCDZhdi22KjZiNi3INi52YTZiSDZhdmC2YrYp9izINmF2YYg2K7ZhdizICg1KSDZhtmC2KfYtyDZhNio2YrYp9mG2KfYqiBDcm9zc21hcmsg2KfZhNmF2YbYtNmI2LHYqSDZhNmE2KPYrNmH2LLYqSDYp9mE2YXYrdmF2YjZhNipINin2YTZhdiz2KrZhdiv2Kkg2YXZhiA8dXJsLTAwMT4g2YjYqtmFINiq2YbYstmK2YTZh9inINi52YTZiSA8ZGF0ZT4uINin2LfZhNi5INi52YTZiSDYp9mE2KrZgdin2LXZitmEINi52KjYsSA8dXJsLTAwMj4uINmK2K7YqtmE2YEg2KfZhNij2K/Yp9ihINit2LPYqC4g2KfZhNin2LPYqtiu2K/Yp9mFINmI2KfZhNiq2YPZiNmK2YYg2YjYudmI2KfZhdmEINij2K7YsdmJLiA8dXJsLTAwMz4u","default-tooltip-creativity":"2KfZhNij2K/Yp9ihINi52YbYryDYp9iz2KrYrtiv2KfZhSDYqti32KjZitmC2KfYqiDYpdmG2LTYp9ihINmF2K3YqtmI2Ykg2LTYp9im2LnYqdiMINmF2KvZhCDYqtit2LHZitixINin2YTYtdmI2LHYjCDZiNiq2YbYuNmK2YUg2KPZhNio2YjZhdin2Kog2KfZhNi12YjYsdiMINmI2KrYrdix2YrYsS/Yudix2LYg2YXZgtin2LfYuSDYp9mE2YHZitiv2YrZiC4=","default-tooltip-overall-score":"2KfZhNij2K/Yp9ihINin2YTYpdis2YXYp9mE2Yog2KfYs9iq2YbYp9iv2YvYpyDYpdmE2Ykg2KfYs9iq2K7Yr9in2YXYp9iqINmI2KfZgti52YrYqdiMINmF2KvZhCDYpdmG2LTYp9ihINmF2LPYqtmG2K/Yp9iqIFdvcmQg2YjYudix2YjYtiDYqtmC2K/ZitmF2YrYqdiMINmI2KrYrdix2YrYsSDYrNiv2KfZiNmEINin2YTYqNmK2KfZhtin2KrYjCDZiNiq2LXZgditINin2YTYpdmG2KrYsdmG2KrYjCDZiNiq2K3YsdmK2LEg2KfZhNi12YjYsSDZiNmF2YLYp9i32Lkg2KfZhNmB2YrYr9mK2Ygu","default-tooltip-productivity":"2KfZhNij2K/Yp9ihINi52YbYryDYp9iz2KrYrtiv2KfZhSDYqti32KjZitmC2KfYqiDYpdmG2KrYp9is2YrYqSDZhdmD2KrYqNmK2Kkg2LTYp9im2LnYqdiMINmF2KvZhCDYpdmG2LTYp9ihINmF2LPYqtmG2K/Yp9iqIFdvcmTYjCDZiNin2LPYqtiu2K/Yp9mFINin2YTYqNix2YrYryDYp9mE2KXZhNmD2KrYsdmI2YbZitiMINmI2KrYrdix2YrYsSDYp9mE2LnYsdmI2LYg2KfZhNiq2YLYr9mK2YXZitip2Iwg2YjYp9mE2YbZhdiw2KzYqSDYqNin2LPYqtiu2K/Yp9mFINis2K/Yp9mI2YQg2KfZhNio2YrYp9mG2KfYqtiMINmI2KrYtdmB2K0g2KfZhNil2YbYqtix2YbYqi4=","global-service-name":"SW50ZWzCriBDcm9zc21hcmvihKLigI4=","v2-feature-four-evo":"2KjYr9ihINiq2LTYutmK2YQg2YHZiNix2Yog2KjYudivINmI2LbYuSDYp9mE2LPZg9mI2YY=","v2-feature-four-unison":"2KrZiNi12YrZhCDYqNiz2YTYp9iz2KkK2KjYo9mKINmH2KfYqtmBINiw2YPZig==","v2-feature-one":"2KrYtdin2YXZitmFINix2YHZiti52Kkg2K7ZgdmK2YHYqSDYp9mE2YjYstmG","v2-feature-three":"2KPZgdi22YQg2KXYt9mE2KfZhNipINmI2LXZiNiqCtmB2Yog2K/Ysdiv2LTYp9iqINin2YTZgdmK2K/ZitmI","v2-feature-two":"2KjYt9in2LHZitipINiq2K/ZiNmFINi32YjYp9mEINin2YTZitmI2YU=","v2-heading-intro":"2KPYrNmH2LLYqSDZhNin2KjYqtmI2KggSW50ZWzCriBFdm/ihKLigI4=","v2-heading-two":"2YjYp9it2LXZhCDYo9mK2LbZi9inINi52YTZiSDYo9iv2KfYoSDZgdin2KbZggrYqNiv2LnZhSDZhdmGINmF2LnYp9mE2KzYp9iqIEludGVswq4gQ29yZeKEog==","v2-subheading-intro":"2KfYrdi12YQg2LnZhNmJINij2YHYttmEINiq2KzYsdio2Kkg2YrZhdmD2YYg2KPZhiDZitmF2YbYrdmH2Kcg2YTZgyDZhNin2KjYqtmI2Kg=","v2-subheading-two":"2YfYsNinINin2YTZg9mF2KjZitmI2KrYsSDYp9mE2YXYrdmF2YjZhCDZhdmGINmG2YjYuSDihKJJbnRlbMKuIEV2byDZhdi02LrZkdmEINio2YjYp9iz2LfYqSDZhdi52KfZhNisIDxjcHU+"}}}renderTailwindStyles(){return v`<style class="eky-tailwind-styles">
      .hidden {
        overflow: hidden;
        opacity: 0;
      }
      .flex {
        display: flex;
      }
      .flex-col {
        flex-direction: column;
      }
      .flex-centered {
        justify-content: center;
        align-items: center;
        text-align: center;
      }
      .flex-1 {
        flex: 1;
      }
      .items-center {
        align-items: center;
      }
      .justify-center {
        justify-content: center;
      }
      .text-center {
        text-align: center;
      }
      .gap-4 {
        gap: 1rem;
      }
      .pr-4 {
        padding-right: 1rem;
      }
      .pr-8 {
        padding-right: 2rem;
      }
      .pl-4 {
        padding-left: 1rem;
      }
      .pl-8 {
        padding-left: 2rem;
      }
      .px-4 {
        padding-left: 1rem;
        padding-right: 1rem;
      }
      .py-2 {
        padding-top: 0.5rem;
        padding-bottom: 0.5rem;
      }
      .py-4 {
        padding-top: 1rem;
        padding-bottom: 1rem;
      }
      .py-6 {
        padding-top: 1.5rem;
        padding-bottom: 1.5rem;
      }
      .py-8 {
        padding-top: 2rem;
        padding-bottom: 2rem;
      }
      .m-0 {
        margin: 0;
      }
      .mb-1 {
        margin-bottom: 0.25rem;
      }
      .mb-2 {
        margin-bottom: 0.5rem;
      }
      .mb-4 {
        margin-bottom: 1rem;
      }
      .mb-8 {
        margin-bottom: 2rem;
      }
      .p-0 {
        padding: 0;
      }
      .zeroed {
        margin: 0;
        padding: 0;
      }

      .p-4 {
        padding: 1rem;
      }

      .text-xs {
        font-size: 12px;
      }
      .text-sm {
        font-size: 14px;
      }
      .text-md {
        font-size: 18px;
      }
      .text-lg {
        font-size: 20px;
      }
      .text-xl {
        font-size: 24px;
      }
      .bold {
        font-weight: 700;
      }
      .font-medium {
        font-weight: 500;
      }

      .mt-1 {
        margin-top: 0.25rem;
      }
      .mt-2 {
        margin-top: 0.5rem;
      }
      .-mx-2 {
        margin-left: -0.5rem;
        margin-right: -0.5rem;
      }
      .-mx-4 {
        margin-left: -1rem;
        margin-right: -1rem;
      }

      .w-8 {
        width: 2rem;
      }
      .h-8 {
        height: 2rem;
      }
      .w-12 {
        width: 3rem;
      }
      .h-12 {
        height: 3rem;
      }
      .h-16 {
        height: 4rem;
      }

      .max-w-xs {
        max-width: 20rem;
      }
      .max-w-xxs {
        max-width: 10rem;
      }

      .absolute {
        position: absolute;
      }
      .relative {
        position: relative;
      }
      .bottom-0 {
        bottom: 0;
      }
      .left-0 {
        left: 0;
      }
      .z-10 {
        z-index: 10;
      }
      .z-20 {
        z-index: 20;
      }
      .removed {
        display: none !important;
      }
      .box-shadow {
        box-shadow: 0px 0 8px 4px rgba(0, 0, 0, 0.15);
      }
      .pointer {
        cursor: pointer;
      }
      .opacity {
        opacity: 75;
      }
      .leading-relaxed {
        line-height: 1.5;
      }
    </style>`}renderTextStyles(){return v`<style class="intel-ul-embed-text-styles">
      @font-face {
        font-family: "IntelOneRegular";
        src: url("https://cdn.pointandplace.com/fonts/intelone-display/intelone-display-regular.ttf");
      }
      @font-face {
        font-family: "IntelOneLight";
        src: url("https://cdn.pointandplace.com/fonts/intelone-display/intelone-display-light.ttf");
      }
      @font-face {
        font-family: "IntelOneBold";
        src: url("https://cdn.pointandplace.com/fonts/intelone-display/intelone-display-bold.woff");
      }
      .text {
        font-family: "IntelOneRegular", sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      .text-light {
        font-family: "IntelOneLight", sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      .text-bold {
        font-family: "IntelOneBold", sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
    </style>`}renderCustomStyles(){let A=`
      .container {
        display: flex;
        position: relative;
        flex-direction: column;
      }
      .legal-disclaimer {
        margin: 0 -1rem -1rem -1rem;
      }
      .text-white {
        color: ${Z1.colours.textWhite}
        ;
      }
      .text-grey-dark {
        color: ${Z1.colours.textGreyDark}
        ;
      }
      .text-grey-light {
        color: ${Z1.colours.textGreyLight}
        ;
      }
      .text-orange {
        color: ${Z1.colours.textOrange}
        ;
      }
      .text-blue {
        color: ${Z1.colours.textBlue}
        ;
      }
      .text-intel-title-blue {
        color: ${Z1.colours.textIntelTitleBlue}
        ;
      }
      .hr-top-default {
        border: 1px solid ${Z1.colours.uiOrange}
        ;
        margin-right: 1rem;
        margin-left: 1rem;
      }
      .hr-bottom-default {
        border: 1px solid ${Z1.colours.uiOrange}
        ;
        margin-right: -1rem;
        margin-left: -1rem;
      }
      .hr-bottom-unison {
        border: 1px solid ${Z1.colours.uiBlue}
        ;
        margin-right: 1rem;
        margin-left: 1rem;
        margin-bottom: 1rem;
      }
      .hr-bottom-evo {
        border: 1px solid ${Z1.colours.uiBlue}
        ;
        margin-right: 1rem;
        margin-left: 1rem;
      }
      .feature-cell {
        border-right: 2px solid ${Z1.colours.uiBlue}
        ;
        padding-right: 1rem;
      }
      .feature-cell:last-child {
        border-right: none;
      }
      .legal-description {
        height: 0;
        overflow: hidden;
        position: absolute;
        bottom: 0;
        left: 0;
        background: white;
        transition-property: all;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        transition-duration: 333ms;
        padding: 0 2rem 0 2rem;
      }
      .legal-description-expanded {
        height: 275px;
        padding: 1rem 2rem 3rem 2rem;
        box-shadow: inset 0 2px 4px 0 rgb(0 0 0 / 0.05);
      }
      .tooltip:hover {
        z-index: 10;
      }
      .tooltip-popup {
        width: 250px;
        background: white;
        bottom: 1.75rem;
        padding: 0.5rem;
        border-radius: 0.5rem;
      }
      .tooltip-unison > i > svg {
        background: white;
        border-radius: 100%;
      }
      .tooltip-evo > i > svg {
        background: white;
        border-radius: 100%;
      }
      .h-16 {
        height: 75px;
      }
    `,Q=`
      .text-grey-light {
        color: ${Z1.colours.textGreyLight};
      }
      .text-center {
        text-align: center;
      }
      .mb-0 {
        margin-bottom: 0px;
      }
      .mb-1 {
        margin-bottom: 5px !important;
      }
      .m-0 {
        margin: 0;
      }
      .text-bold {
        font-weight: 600;
      }
      .relative {
        position: relative;
      }
      .absolute {
        position: absolute;
      }
      .removed {
        display: none !important;
      }
      .w-full {
        width: 100%;
      }
      .justify-around {
        justify-content: space-around;
      }
      .pointer {
        text-align: center;
        margin-top: 0.5rem;
      }
      .tooltip-popup {
        text-align: start;
        font-style: initial;
        width: 123px;
        font-size: 11px;
        bottom: 51px;
        padding: 10px;
      }
      .tooltip {
        align-items: center;
      }
      .crossmark-default-header {
        margin-top: 20px;
        line-height: initial;
      }
      .tooltip-popup-default-arrow {
        width: 20px;
        height: 20px;
        border-bottom: 1px solid rgb(240, 161, 15);
        border-right: 1px solid rgb(240, 161, 15);
        position: absolute;
        background: #fff;
        left: 62px;
        bottom: -12px;
        rotate: 45deg;
        overflow: hidden;
      }
      .hr-top-default {
        border: 1px solid #f0a10f;
        margin-right: 1rem;
        margin-left: 1rem;
      }
      .crossmark-default-heading {
        font-size: 21px;
      }
      .crossmark-default-device-info-heading {
        font-size: 21px;
        margin-top: 14px;
        margin-bottom: 0px;
        font-weight: 500;
      }
      .crossmark-default-device-info-sub-text {
        margin-top: 0px;
        margin-bottom: 10px;
        color: #525252;
      }
      .tooltip-popup-scoreOverall {
        left: -64px !important;
      }
      .tooltip-popup-scoreCreativity {
        left: -64px !important;
      }
      .tooltip-popup-scoreProductivity {
        left: -64px !important;
      }
      .score-and-tooltip-container {
        display: flex;
        flex-direction: column;
        width: 100%;
      }
      .tooltip-title {
        font-size: 15px;
      }
      .crossmark-info-container-default {
        font-size: 10px;
        justify-content: center;
        align-items: center;
        padding: 12px;
        margin-bottom: 1rem;
        background: rgb(255, 255, 255);
        border: 2px solid rgb(240, 161, 15);
        margin-top: 1rem;
        margin-bottom: 1rem;
        line-height: initial;
      }
      .crossmark-info-icon {
        width: 40px;
        margin-right: 12px;
      }
      .legal-disclaimer {
        position: relative;
      }
      .legal-disclaimer-default {
        background-color: white;
        margin: -18px;
      }
      .legal-button-default {
        font-size: 17px;
        text-transform: uppercase;
        cursor: pointer;
      }
      .legal-description {
        font-size: 10px;
      }
      .legal-description-expanded-default {
        height: 87px;
        bottom: 49px;
        padding: 20px 20px 20px 20px;
        font-size: 10px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        box-shadow: 0px -4px 12px rgba(0, 0, 0, 0.2);
      }
      .disclaimer-close-icon-default {
        position: absolute;
        top: 16px;
        right: 16px;
        z-index: 22;
        font-size: 16px;
        cursor: pointer;
        color: ${Z1.colours.textOrange};
      }
      .legal-description > p > a {
        color: ${Z1.colours.textOrange};
      }

      @container (min-width: 767px) {
        .hr-top-default {
          border: 1px solid #f0a10f;
          margin-right: 1rem;
          margin-left: 1rem;
        }
        .crossmark-default-heading {
          font-size: 37px;
          margin-bottom: 10px;
        }
        .crossmark-default-device-info-heading {
          font-size: 29px;
          margin-top: 30px;
          margin-bottom: 0px;
          font-weight: 500;
        }
        .crossmark-default-device-info-sub-text {
          margin-top: 5px;
          margin-bottom: 10px;
          color: #525252;
          font-size: 34px;
        }
        .score-and-tooltip-container {
          display: flex;
          flex-direction: column;
          width: 100%;
          max-width: 200px;
        }
        .tooltip-title {
          font-size: 24px;
        }
        .crossmark-info-container-default {
          font-size: 20px;
          justify-content: center;
          align-items: center;
          padding: 20px;
          margin-bottom: 1rem;
          background: rgb(255, 255, 255);
          border: 2px solid rgb(240, 161, 15);
          margin-top: 17px;
          margin-bottom: 24px;
          line-height: initial;
        }
        .crossmark-info-icon {
          width: 70px;
          margin-right: 12px;
        }
        .legal-disclaimer-default {
          background-color: white;
          padding: 0;
          margin: 0;
          box-shadow: none;
        }
        .legal-button-default {
          font-size: 23px;
          text-transform: uppercase;
          cursor: pointer;
        }
        .legal-description-expanded-default {
          height: 87px;
          bottom: 50px;
          padding: 40px 40px 40px 40px;
          font-size: 16px;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          box-shadow: 0px -4px 12px rgba(0, 0, 0, 0.2);
        }
        .disclaimer-close-icon-default {
          position: absolute;
          top: 16px;
          right: 16px;
          z-index: 22;
          font-size: 18px;
          cursor: pointer;
          color: ${Z1.colours.textOrange};
        }
        .score-default {
          justify-content: space-between;
        }
      }

      @container (min-width: 950px){
        .hr-top-default {
          border: 1px solid #f0a10f;
          margin-right: 19rem;
          margin-left: 19rem;
        }
        .crossmark-default-heading {
          font-size: 37px;
          margin-bottom: 10px;
          padding: 0px 100px 0px 100px;
        }
        .crossmark-default-device-info-heading {
          font-size: 29px;
          margin-top: 30px;
          margin-bottom: 0px;
          font-weight: 500;
        }
        .crossmark-default-device-info-sub-text {
          margin-top: 5px;
          margin-bottom: 10px;
          color: #525252;
          font-size: 34px;
        }
        .score-and-tooltip-container {
          display: flex;
          flex-direction: column;
          width: 100%;
          max-width: 200px;
        }
        .tooltip-title {
          font-size: 28px;
        }
        .crossmark-info-container-default {
          font-size: 22px;
          justify-content: center;
          align-items: center;
          padding: 16px;
          margin-bottom: 1rem;
          background: rgb(255, 255, 255);
          border: 2px solid rgb(240, 161, 15);
          margin-top: 56px;
          margin-bottom: 56px;
          max-width: 907px;
          line-height: initial;
        }
        .crossmark-info-icon {
          width: 60px;
          margin-right: 12px;
        }
        .legal-disclaimer-default {
          background-color: white;
          box-shadow: none;
        }
        .legal-button-default {
          font-size: 27px;
          text-transform: uppercase;
          cursor: pointer;
        }
        .legal-description-expanded-default {
          height: 53px;
          bottom: 50px;
          padding: 40px 40px 40px 40px;
          font-size: 18px;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          box-shadow: 0px -4px 12px rgba(0, 0, 0, 0.2);
        }
        .disclaimer-close-icon-default {
          position: absolute;
          top: 19px;
          right: 19px;
          z-index: 22;
          font-size: 23px;
          cursor: pointer;
          color: ${Z1.colours.textOrange};
        }
        .score-default {
          justify-content: space-evenly;
        }
        .tooltip-default {
          flex-direction: row !important;
          justify-content: center;
        }
        .tooltip-default > h3 {
          margin-right: 15px;
        }
        .crossmark-info {
          display: flex;
          justify-content: center;
        }
        .scores-and-tooltips-default {
          display: flex !important;
          justify-content: center;
        }
        .scores-and-tooltips-default > div {
          max-width: 916px;
          width: 100%;
        }
      }
    `,B=`
      :host {
        align-items: center;
      }
      .text-grey-light {
        color: ${Z1.colours.textGreyLight};
      }
      .text-center {
        text-align: center;
      }
      .mb-0 {
        margin-bottom: 0px;
      }
      .mb-1 {
        margin-bottom: 5px !important;
      }
      .m-0 {
        margin: 0;
      }
      .text-bold {
        font-weight: 600;
      }
      .relative {
        position: relative;
      }
      .absolute {
        position: absolute;
      }
      .removed {
        display: none !important;
      }
      .w-full {
        width: 100%;
      }
      .justify-around {
        justify-content: space-around;
      }
      .pointer {
        text-align: center;
        margin-top: 0.5rem;
      }
      .tooltip-popup {
        text-align: start;
        font-style: initial;
      }
      .tooltip-popup {
        width: 123px;
        font-size: 11px;
        bottom: 51px;
        padding: 10px;
      }
      .tooltip {
        align-items: center;
      }
      .crossmark-evo-header {
        margin-top: 20px;
      }
      .tooltip-popup-evo-arrow {
        width: 20px;
        height: 20px;
        border-bottom: 1px solid rgb(0, 199, 253);
        border-right: 1px solid rgb(0, 199, 253);
        position: absolute;
        background: black;
        left: 62px;
        bottom: -12px;
        rotate: 45deg;
        overflow: hidden;
      }
      .hr-top-evo {
        border: 1px solid #f0a10f;
        margin-right: 1rem;
        margin-left: 1rem;
      }
      .crossmark-evo-heading {
        font-size: 19px;
        margin-top: 20px;
        margin-bottom: 5px;
        color: rgb(0, 199, 253);
      }
      .crossmark-evo-sub-heading {
        margin-top: 0px;
        margin-bottom: 20px;
        font-size: 23px;
      }
      .features-evo {
        font-size: 11px;
      }
      .feature-cell {
        padding-right: 0px;
        max-width: 90px;
        align-items: center;
        justify-content: center;
        padding: 7px;
      }
      .device-info-evo-container {
        display: flex;
        justify-content: center;
        width: 100%;
        margin-top: 20px;
        margin-bottom: 8px;
      }
      .device-info-evo {
        display: flex;
        max-width: 283px;
      }
      .device-info-image-evo {
        margin-right: 10px;
      }
      .device-info-image-evo > img {
        height: 83px;
      }
      .device-info-leading-text-evo {
        margin-bottom: 10px;
        line-height: 1.4;
      }
      .device-info-sub-text-evo {
        line-height: 1.4;
      }
      .score-and-tooltip-container {
        display: flex;
        flex-direction: column;
        width: 100%;
      }
      .tooltip-title {
        font-size: 15px;
        color: white;
      }
      .scores-and-tooltips-evo{
        width: 100%;
      }
      .tooltip-evo{
        flex-direction: column!important;
        justify-content: center;
      }
      .crossmark-info {
        font-size: 10px;
        display: flex;
        width: 100%;
        justify-content: center;
        align-items: center;
      }
      .crossmark-info-icon {
        width: 40px;
        margin-right: 12px;
      }
      .crossmark-info-container-evo {
        font-size: 10px;
        padding: 12px;
        color: white;
        max-width: 326px;
        margin: 0px !important;
        display: flex;
        justify-content: center;
        align-items: center;
        line-height: initial;
      }
      .legal-disclaimer-evo {
        background: black;
        margin: -18px;
      }
      .legal-disclaimer {
        position: relative;
        margin: 0 -1.15rem -1.1rem -1.1rem;
      }
      .legal-button-evo {
        font-size: 17px;
        text-transform: uppercase;
        cursor: pointer;
        color: white;
      }
      .legal-description-expanded-evo{
        height: 87px;
        bottom: 49px;
        padding: 20px 20px 20px 20px;
        font-size: 10px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        box-shadow: 0px -4px 12px rgba(0, 0, 0, 0.2);
        background: black !important;
      }
      .legal-description {
        font-size: 10px;
      }
      .legal-description>p>a{
        color: rgb(0, 199, 253) !important;
      }
      .disclaimer-close-icon-evo{
        position: absolute;
        top: 16px;
        right: 16px;
        z-index: 22;
        font-size: 18px;
        cursor: pointer;
        color: rgb(0, 199, 253);
      }
      .tooltip-popup-default{
        border: 1px solid rgb(0, 199, 253);
      }
      .tooltip-popup-scoreOverall{
        left: -64px!important;
      }
      .tooltip-popup-scoreProductivity{
        left: -64px!important;
      }
      .tooltip-popup-scoreCreativity{
        left: -64px!important;
      }
      .crossmark-info-hr-evo{
        background: transparent;
        border-top-width: 2px;
        border-color: #00c7fd;
        border-top-style: solid;
        margin-top: 20px;
        width: 100%;
      }

      @container (min-width: 767px) {
        :host {
          align-items: stretch;
        }
        .tooltip-popup  {
          width: 186px;
          font-size: 11px;
          padding: 10px;
        }
        .tooltip-popup-evo-arrow  {
          width: 15px;
          height: 15px;
          border-bottom: 1px solid rgb(0, 199, 253);
          border-right: 1px solid rgb(0, 199, 253);
          position: absolute;
          background: black;
          left: 94px;
          bottom: -9px;
          overflow: hidden;
        }
        .hr-top-evo  {
          border: 1px solid #f0a10f;
          margin-right: 1rem;
          margin-left: 1rem;
        }
        .crossmark-evo-heading  {
          font-size: 34px;
          margin-bottom: 0px;
          color: rgb(0, 199, 253);
        }
        .crossmark-evo-sub-heading {
          margin-top: 0px;
          margin-bottom: 20px;
          font-size: 41px;
          ;
        }
        .features-evo {
          font-size: 18px;
          justify-content: center;
        }
        .feature-cell  {
          padding-right: 0px;
          max-width: 143px;
          align-items: center;
          justify-content: center;
          padding: 7px;
          margin-bottom: 7px;
        }
        .device-info-evo-container  {
          display: flex;
          justify-content: center;
          width: 100%;
          margin-top: 20px;
          margin-bottom: 8px;
        }
        .device-info-evo  {
          display: flex;
          max-width: 440px;
        }
        .device-info-image-evo  {
          margin-right: 15px;
        }
        .device-info-image-evo  > img {
          height: 126px;
        }
        .device-info-leading-text-evo  {
          margin-bottom: 10px;
          line-height: 1.4;
          font-size: 23px !important;
          color: rgb(0, 199, 253);
        }
        .device-info-sub-text-evo  {
          line-height: 1.4;
          font-size: 18px !important;
          font-weight: 500;
        }
        .score-and-tooltip-container  {
          display: flex;
          flex-direction: column;
          width: 100%;
          max-width: 200px;
        }
        .score-evo {
          justify-content: space-between;
        }
        .tooltip-title  {
          font-size: 24px;
          color: white;
        }
        .scores-and-tooltips-evo {
          width: 100%;
        }
        .tooltip-evo {
          flex-direction: column!important;
          justify-content: center;
        }
        .crossmark-info  {
          font-size: 10px;
          display: flex;
          width: 100%;
          justify-content: center;
          align-items: center;
        }
        .crossmark-info-icon  {
          width: 62px;
          margin-right: 12px;
        }
        .crossmark-info-container-evo  {
          font-size: 20px;
          padding: 12px;
          color: white;
          max-width: 597px;
          margin: 0px !important;
          display: flex;
          justify-content: center;
          align-items: center;
          line-height: initial;
        }
        .legal-disclaimer-evo  {
          padding: 0;
          margin: 0;
          box-shadow: none;
          background: black;
        }
        .legal-button-evo  {
          font-size: 23px;
          text-transform: uppercase;
          cursor: pointer;
          color: white;
        }
        .legal-description-expanded-evo {
          height: 87px;
          bottom: 50px;
          padding: 40px 40px 40px 40px;
          font-size: 16px !important;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          box-shadow: 0px -4px 12px rgba(0, 0, 0, 0.2);
          background: black !important;
        }
        .disclaimer-close-icon-evo {
          position: absolute;
          top: 16px;
          right: 16px;
          z-index: 22;
          font-size: 18px;
          cursor: pointer;
          color: rgb(0, 199, 253);
        }
        .tooltip-popup-scoreOverall {
          left: -94px!important;
        }
        .tooltip-popup-scoreProductivity {
          left: -94px!important;
        }
        .tooltip-popup-scoreCreativity {
          left: -94px!important;
        }
        .crossmark-info-hr-evo {
          background: transparent;
          border-top-width: 2px;
          border-color: #00c7fd;
          border-top-style: solid;
          margin-top: 40px;
          margin-left: 60px;
          margin-right: 60px;
        }
      }

      @container (min-width: 950px) {
        .hr-top-evo {
          border: 1px solid #f0a10f;
          margin-right: 19rem;
          margin-left: 19rem;
        }
        .crossmark-evo-heading {
          font-size: 39px;
          margin-bottom: 0px;
          color: rgb(0, 199, 253);
        }
        .crossmark-evo-sub-heading{
          margin-top: 0px;
          margin-bottom: 30px;
          font-size: 50px;
          ;
        }
        .features-evo{
          font-size: 24px;
          justify-content: center;
        }
        .feature-cell {
          padding-right: 0px;
          max-width: 190px;
          align-items: center;
          justify-content: center;
          padding: 7px;
          margin-bottom: 20px;
        }
        .device-info-evo-container {
          display: flex;
          justify-content: center;
          width: 100%;
          margin-top: 20px;
          margin-bottom: 20px;
        }
        .device-info-evo {
          display: flex;
          max-width: 535px;
        }
        .device-info-image-evo {
          margin-right: 15px;
        }
        .device-info-image-evo > img {
          height: 142px;
        }
        .device-info-leading-text-evo {
          margin-bottom: 10px;
          line-height: 1.4;
          font-size: 29px !important;
          color: rgb(0, 199, 253);
        }
        .device-info-sub-text-evo {
          line-height: 1.4;
          font-size: 20px !important;
          font-weight: 500;
        }
        .score-and-tooltip-container {
          display: flex;
          flex-direction: column;
          width: 100%;
          max-width: 200px;
        }
        .score-evo{
          justify-content: space-evenly;
        }
        .tooltip-title {
          font-size: 28px;
          color: white;
        }
        .scores-and-tooltips-evo{
          width: 100%;
        }
        .scores-and-tooltips-evo>div {
          max-width: 916px;
          width: 100%;
          display: flex;
        }
        .scores-and-tooltips-evo{
          display: flex!important;
          justify-content: center;
        }
        .tooltip-evo{
          flex-direction: row!important;
          justify-content: center;
        }
        .crossmark-info-icon {
          width: 55px;
          margin-right: 12px;
        }
        .crossmark-info-container-evo {
          font-size: 20px;
          padding: 16px;
          color: white;
          max-width: 858px;
          margin: 0px !important;
          display: flex;
          justify-content: center;
          align-items: center;
          line-height: initial;
        }
        .crossmark-info{
          display: flex;
          align-items: center;
          justify-content: center;
        }
        .legal-button-evo {
          font-size: 27px;
          text-transform: uppercase;
          cursor: pointer;
          color: white;
        }
        .legal-description-expanded-evo {
          height: 87px;
          bottom: 50px;
          padding: 40px 40px 40px 40px;
          font-size: 18px !important;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          box-shadow: 0px -4px 12px rgba(0, 0, 0, 0.2);
          height: 53px;
          background: black !important;
        }
        .disclaimer-close-icon-evo{
          position: absolute;
          top: 19px;
          right: 19px;
          z-index: 22;
          font-size: 23px;
          cursor: pointer;
          color: rgb(0, 199, 253);
        }
        .crossmark-info-hr-evo{
          background: transparent;
          border-top-width: 2px;
          border-color: #00c7fd;
          border-top-style: solid;
          margin-top: 40px;
          margin-left: 233px;
          margin-right: 233px;
        }
        .tooltip-evo>h3{
          margin-right: 15px;
          }
      }
    `,C=`
      .text-grey-light {
        color: ${Z1.colours.textGreyLight};
      }
      .text-center {
        text-align: center;
      }
      .mb-0 {
        margin-bottom: 0px;
      }
      .mb-1 {
        margin-bottom: 5px !important;
      }
      .m-0 {
        margin: 0;
      }
      .text-bold {
        font-weight: 600;
      }
      .relative {
        position: relative;
      }
      .absolute {
        position: absolute;
      }
      .removed {
        display: none !important;
      }
      .w-full {
        width: 100%;
      }
      .justify-around {
        justify-content: space-around;
      }
      .pointer {
        text-align: center;
        margin-top: 0.5rem;
      }
      .tooltip-popup {
        text-align: start;
        font-style: initial;
      }
      .tooltip-popup {
        width: 123px;
        font-size: 11px;
        bottom: 51px;
        padding: 10px;
      }
      .tooltip {
        align-items: center;
      }
      .crossmark-unison-header {
        margin-top: 20px;
      }
      .tooltip-popup-unison-arrow {
        width: 20px;
        height: 20px;
        border-bottom: 1px solid rgb(0, 199, 253);
        border-right: 1px solid rgb(0, 199, 253);
        position: absolute;
        background: black;
        left: 62px;
        bottom: -12px;
        rotate: 45deg;
        overflow: hidden;
      }
      .hr-top-unison {
        border: 1px solid #f0a10f;
        margin-right: 1rem;
        margin-left: 1rem;
      }
      .crossmark-unison-heading {
        font-size: 19px;
        margin-top: 20px;
        margin-bottom: 0px;
        color: rgb(0, 199, 253);
      }
      .crossmark-unison-sub-heading {
        margin-top: 0px;
        margin-bottom: 20px;
        font-size: 23px;
      }
      .features-unison {
        font-size: 11px;
      }
      .feature-cell {
        padding-right: 0px;
        max-width: 90px;
        align-items: center;
        justify-content: center;
        padding: 7px;
      }
      .device-info-unison-container {
        display: flex;
        justify-content: center;
        width: 100%;
        margin-top: 20px;
        margin-bottom: 8px;
      }
      .device-info-unison {
        display: flex;
        max-width: 283px;
      }
      .device-info-image-unison {
        margin-right: 10px;
      }
      .device-info-image-unison > img {
        height: 83px;
      }
      .device-info-leading-text-unison {
        margin-bottom: 10px;
        line-height: 1.4;
      }
      .device-info-sub-text-unison {
        line-height: 1.4;
      }
      .score-and-tooltip-container {
        display: flex;
        flex-direction: column;
        width: 100%;
      }
      .tooltip-title {
        font-size: 15px;
        color: white;
      }
      .tooltip-unison{
        flex-direction: column!important;
        justify-content: center;
      }
      .crossmark-info {
        font-size: 10px;
        display: flex;
        width: 100%;
        justify-content: center;
        align-items: center;
      }
      .crossmark-info-icon {
        width: 40px;
        margin-right: 12px;
      }
      .crossmark-info-container-unison {
        font-size: 10px;
        padding: 12px;
        color: white;
        max-width: 326px;
        margin: 0px !important;
        display: flex;
        justify-content: center;
        align-items: center;
        line-height: initial;
      }
      .legal-disclaimer-unison {
        margin: -18px;
        background: rgb(10, 40, 89);
      }
      .legal-disclaimer {
        position: relative;
        margin: 0 -1.15rem -1.1rem -1.1rem;
      }
      .legal-button-unison {
        font-size: 17px;
        text-transform: uppercase;
        cursor: pointer;
        color: white;
      }
      .legal-description-expanded-unison{
        height: 87px;
        bottom: 49px;
        padding: 20px 20px 20px 20px;
        font-size: 10px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        box-shadow: 0px -4px 12px rgba(0, 0, 0, 0.2);
        background: #0a2859 !important;
      }
      .legal-description {
        font-size: 10px;
      }
      .legal-description>p>a{
        color: rgb(0, 199, 253) !important;
      }
      .disclaimer-close-icon-unison{
        position: absolute;
        top: 16px;
        right: 16px;
        z-index: 22;
        font-size: 18px;
        cursor: pointer;
        color: rgb(0, 199, 253);
      }
      .tooltip-popup-default{
        border: 1px solid rgb(0, 199, 253);
      }
      .tooltip-popup-scoreOverall{
        left: -64px!important;
      }
      .tooltip-popup-scoreProductivity{
        left: -64px!important;
      }
      .tooltip-popup-scoreCreativity{
        left: -64px!important;
      }
      .crossmark-info-hr-unison{
        background: transparent;
        border-top-width: 2px;
        border-color: #00c7fd;
        border-top-style: solid;
        margin-top: 20px;
        width: 100%;
      }

      @container (min-width: 767px) {
        .tooltip-popup  {
          width: 186px;
          font-size: 11px;
          padding: 10px;
        }
        .tooltip-popup-unison-arrow {
          width: 15px;
          height: 15px;
          border-bottom: 1px solid rgb(0, 199, 253);
          border-right: 1px solid rgb(0, 199, 253);
          position: absolute;
          background: black;
          left: 94px;
          bottom: -9px;
          overflow: hidden;
        }
        .hr-top-unison {
          border: 1px solid #f0a10f;
          margin-right: 1rem;
          margin-left: 1rem;
        }
        .crossmark-unison-heading {
          font-size: 34px;
          margin-bottom: 0px;
          color: rgb(0, 199, 253);
        }
        .crossmark-unison-sub-heading{
          margin-top: 0px;
          margin-bottom: 20px;
          font-size: 41px;
          ;
        }
        .features-unison{
          font-size: 18px;
          justify-content: center;
        }
        .feature-cell {
          padding-right: 0px;
          max-width: 143px;
          align-items: center;
          justify-content: center;
          padding: 7px;
          margin-bottom: 7px;
        }
        .device-info-unison-container {
          display: flex;
          justify-content: center;
          width: 100%;
          margin-top: 20px;
          margin-bottom: 8px;
        }
        .device-info-unison {
          display: flex;
          max-width: 440px;
        }
        .device-info-image-unison {
          margin-right: 15px;
        }
        .device-info-image-unison > img {
          height: 126px;
        }
        .device-info-leading-text-unison {
          margin-bottom: 10px;
          line-height: 1.4;
          font-size: 23px !important;
          color: rgb(0, 199, 253);
        }
        .device-info-sub-text-unison {
          line-height: 1.4;
          font-size: 18px !important;
          font-weight: 500;
        }
        .crossmark-info-icon {
          width: 62px;
          margin-right: 12px;
        }
        .score-and-tooltip-container {
          display: flex;
          flex-direction: column;
          width: 100%;
          max-width: 200px;
        }
        .score-unison{
          justify-content: space-between;
        }
        .tooltip-title {
          font-size: 24px;
          color: white;
        }
        .tooltip-unison{
          flex-direction: column!important;
          justify-content: center;
        }
        .crossmark-info {
          font-size: 10px;
          display: flex;
          width: 100%;
          justify-content: center;
          align-items: center;
        }
        .crossmark-info-container-unison {
          font-size: 20px;
          padding: 12px;
          color: white;
          max-width: 597px;
          margin: 0px !important;
          display: flex;
          justify-content: center;
          align-items: center;
          line-height: initial;
        }
        .legal-disclaimer-unison {
          padding: 0;
          background: rgb(10, 40, 89);
          margin: 0;
          box-shadow: none;
        }
        .legal-button-unison {
          font-size: 23px;
          text-transform: uppercase;
          cursor: pointer;
          color: white;
        }
        .legal-description-expanded-unison{
          height: 87px;
          bottom: 50px;
          padding: 40px 40px 40px 40px;
          font-size: 16px !important;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          box-shadow: 0px -4px 12px rgba(0, 0, 0, 0.2);
          background: #0a2859 !important;
        }
        .disclaimer-close-icon-unison{
          position: absolute;
          top: 16px;
          right: 16px;
          z-index: 22;
          font-size: 18px;
          cursor: pointer;
          color: rgb(0, 199, 253);
        }
        .tooltip-popup-scoreOverall{
          left: -94px!important;
        }
        .tooltip-popup-scoreProductivity{
          left: -94px!important;
        }
        .tooltip-popup-scoreCreativity{
          left: -94px!important;
        }
        .crossmark-info-hr-unison{
          background: transparent;
          border-top-width: 2px;
          border-color: #00c7fd;
          border-top-style: solid;
          margin-top: 40px;
          margin-left: 60px;
          margin-right: 60px;
        }
      }

      @container (min-width: 950px) {
        .tooltip-popup {
          width: 278px;
          font-size: 16px;
          padding: 15px;
        }
        .tooltip-popup-unison-arrow {
          width: 15px;
          height: 15px;
          border-bottom: 1px solid rgb(0, 199, 253);
          border-right: 1px solid rgb(0, 199, 253);
          position: absolute;
          background: black;
          left: 148px;
          bottom: -9px;
          overflow: hidden;
        }
        .hr-top-unison {
          border: 1px solid #f0a10f;
          margin-right: 19rem;
          margin-left: 19rem;
        }
        .crossmark-unison-heading {
          font-size: 39px;
          margin-bottom: 0px;
          color: rgb(0, 199, 253);
        }
        .crossmark-unison-sub-heading{
          margin-top: 0px;
          margin-bottom: 30px;
          font-size: 50px;
          ;
        }
        .features-unison{
          font-size: 24px;
          justify-content: center;
        }
        .feature-cell {
          padding-right: 0px;
          max-width: 190px;
          align-items: center;
          justify-content: center;
          padding: 7px;
          margin-bottom: 20px;
        }
        .device-info-unison-container {
          display: flex;
          justify-content: center;
          width: 100%;
          margin-top: 20px;
          margin-bottom: 20px;
        }
        .device-info-unison {
          display: flex;
          max-width: 535px;
        }
        .device-info-image-unison {
          margin-right: 15px;
        }
        .device-info-image-unison > img {
          height: 142px;
        }
        .device-info-leading-text-unison {
          margin-bottom: 10px;
          line-height: 1.4;
          font-size: 29px !important;
          color: rgb(0, 199, 253);
        }
        .device-info-sub-text-unison {
          line-height: 1.4;
          font-size: 20px !important;
          font-weight: 500;
        }
        .score-and-tooltip-container {
          display: flex;
          flex-direction: column;
          width: 100%;
          max-width: 200px;
        }
        .score-unison{
          justify-content: space-evenly;
        }
        .tooltip-title {
          font-size: 28px;
          color: white;
        }
        .scores-and-tooltips-unison>div {
          max-width: 916px;
          width: 100%;
          display: flex;
        }
        .scores-and-tooltips-unison{
          display: flex!important;
          justify-content: center;
        }
        .tooltip-unison{
          flex-direction: row!important;
          justify-content: center;
        }
        .crossmark-info-icon {
          width: 55px;
          margin-right: 12px;
        }
        .crossmark-info-container-unison {
          font-size: 20px;
          padding: 16px;
          color: white;
          max-width: 858px;
          margin: 0px !important;
          display: flex;
          justify-content: center;
          align-items: center;
          line-height: initial;
        }
        .crossmark-info{
          display: flex;
          align-items: center;
          justify-content: center;
        }
        .legal-disclaimer-unison {
          padding: 0;
          background: #061939;
          margin: 0;
        }
        .legal-button-unison {
          font-size: 27px;
          text-transform: uppercase;
          cursor: pointer;
          color: white;
        }
        .legal-description-expanded-unison{
          height: 87px;
          bottom: 50px;
          padding: 40px 40px 40px 40px;
          font-size: 18px !important;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          box-shadow: 0px -4px 12px rgba(0, 0, 0, 0.2);
          height: 53px;
        }
        .disclaimer-close-icon-unison{
          position: absolute;
          top: 19px;
          right: 19px;
          z-index: 22;
          font-size: 23px;
          cursor: pointer;
          color: rgb(0, 199, 253);
        }
        .tooltip-popup-scoreOverall{
          left: -148px!important;
        }
        .tooltip-popup-scoreProductivity{
          left: -148px!important;
        }
        .tooltip-popup-scoreCreativity{
          left: -148px!important;
        }
        .tooltip-unison>h3{
          margin-right: 15px;
        }
        .crossmark-info-hr-unison{
          background: transparent;
          border-top-width: 2px;
          border-color: #00c7fd;
          border-top-style: solid;
          margin-top: 40px;
          margin-left: 233px;
          margin-right: 233px;
        }
      }
    `,J=[];if(J.push(v`${A}`),this.theme==="default")J.push(v`${Q}`);else if(this.theme==="evo")J.push(v`${B}`);else if(this.theme==="unison")J.push(v`${C}`);return v`<style>
      ${J}
    </style>`}constructor(A,Q,B,C,J,I,q,K,Y){super(A,Q,B,C,J,I,q,K,Y,!0,"intel-crossmark");this.theme="default";this.legalInfoOpen=!1}safeFromBase64(A){return decodeURIComponent(atob(A).split("").map(function(Q){return"%"+("00"+Q.charCodeAt(0).toString(16)).slice(-2)}).join(""))}getLocalisedString(A){let Q=Z1.dynamic[A];if(!Q)return`missing-${A}`;let B=Q[this.theme];if(!B)return null;let C=null,J=this.localisations[this.EKControlObject._config?.language||"dummy"];if(J){if(J[B])C=J[B]}let I=this.localisations.en;if(!C&&I){if(I[B])C=I[B]}if(!C)return null;return this.safeFromBase64(C)}swapLeftRightPaddingIfRequired(A){if(this.EKControlObject._config?.language==="ar"){if(A.includes("l"))return A.replace("l","r");return A.replace("r","l")}return A}infoIconSvg(A){if(!A)A="#b4b4b4";return v`<svg
      xmlns="http://www.w3.org/2000/svg"
      xml:space="preserve"
      width="19px"
      height="19px"
      viewBox="0 0 416.979 416.979"
      style="fill:${A};"
    >
      <path
        d="M356.004 61.156c-81.37-81.47-213.377-81.551-294.848-.182-81.47 81.371-81.552 213.379-.181 294.85 81.369 81.47 213.378 81.551 294.849.181 81.469-81.369 81.551-213.379.18-294.849zM237.6 340.786a5.821 5.821 0 0 1-5.822 5.822h-46.576a5.821 5.821 0 0 1-5.822-5.822V167.885a5.821 5.821 0 0 1 5.822-5.822h46.576a5.82 5.82 0 0 1 5.822 5.822v172.901zm-29.11-202.885c-18.618 0-33.766-15.146-33.766-33.765 0-18.617 15.147-33.766 33.766-33.766s33.766 15.148 33.766 33.766c0 18.619-15.149 33.765-33.766 33.765z"
      />
    </svg>`}renderScoreSVGv2(A){let Q=(A/20).toFixed(1),B={svg:{viewBox:{x:50,y:50}},outer:{colour:this.isDefaultTheme()?Z1.colours.textWhite:"rgba(0,0,0,0)",diameter:45,radius:22.5},strokeWidth:6,colour:this.isDefaultTheme()?Z1.colours.uiOrange:Z1.colours.uiBlue,text:this.isDefaultTheme()?Z1.colours.textGreyDark:Z1.colours.textWhite};return v`<style class="intel-crossmark-embed-svg-styles">
        .circular-chart {
          border-radius: ${this.isDefaultTheme()?"auto":"9999px"};
          border: ${this.isDefaultTheme()?"none":`1px solid ${B.colour}`};
          transform: ${this.isDefaultTheme()?"none":"scale(0.9)"};
        }
        .svg-score-background-circle {
          fill: none;
          stroke: ${B.outer.colour};
          stroke-width: ${B.strokeWidth};
        }
        .svg-score-readout-circle {
          fill: none;
          stroke-width: ${B.strokeWidth};
          animation: progress 1s ease-out forwards;
        }
        @keyframes progress {
          0% {
            stroke-dasharray: 0 100;
          }
        }
        .circular-chart.orange .svg-score-readout-circle {
          stroke: ${B.colour};
        }
        .score-text {
          fill: ${B.text};
          font-family: "IntelOneRegular";
          font-size: 10px;
          text-anchor: middle;
        }
        .score-actual {
          font-size: 10px;
          font-weight: 900;
        }
        .score-max {
          font-size: 0.325rem;
          letter-spacing: -0.5px;
        }
        .svg-score-text-background-circle {
        }
      </style>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 ${B.svg.viewBox.x} ${B.svg.viewBox.y}"
        class="circular-chart orange"
        style="filter: drop-shadow(3px 5px 6px rgb(128 128 128 / 0.25));margin: 0.5rem 0 0.5rem 0; "
      >
        <path
          class="svg-background-circle"
          shape-rendering="geometricPrecision"
          d="M${B.svg.viewBox.x/2} 2.5
        a ${B.outer.radius} ${B.outer.radius} 0 0 1 0 ${B.outer.diameter}
        a ${B.outer.radius} ${B.outer.radius} 0 0 1 0 ${B.outer.diameter*-1}"
          style="fill: ${B.outer.colour};"
        />

        <path
          class="svg-score-background-circle"
          shape-rendering="geometricPrecision"
          d="M${B.svg.viewBox.x/2} 9
        a 15.9155 15.9155 0 0 1 0 31.831
        a 15.9155 15.9155 0 0 1 0 -31.831"
        />
        <path
          class="svg-score-readout-circle"
          shape-rendering="geometricPrecision"
          stroke-dasharray="${A}, 100"
          d="M${B.svg.viewBox.x/2} 9
        a 15.9155 15.9155 0 0 1 0 31.831
        a 15.9155 15.9155 0 0 1 0 -31.831"
          stroke-dashoffset="-200"
        />

        <path
          class="svg-score-text-background-circle"
          shape-rendering="geometricPrecision"
          stroke-dasharray="${A}, 100"
          d="M${B.svg.viewBox.x/2} 12.25
        a 12.732 12.732 0 0 1 0 25.5
        a 12.732 12.732 0 0 1 0 -25.5"
          style="fill: ${B.outer.colour};filter: drop-shadow(3px 2px 2px rgb(128 128 128 / 0.25));"
        />

        <text
          x="${B.svg.viewBox.x/2-3}"
          y="${B.svg.viewBox.y/2+3}"
          class="score-text score-actual"
        >
          ${Q}
        </text>
        <text
          x="${B.svg.viewBox.x/2+6}"
          y="${B.svg.viewBox.y/2+3}"
          class="score-text score-max"
          style="direction: ltr;"
        >
          / 5
        </text>
      </svg>`}renderHeading(){let A=[];if(this.isDefaultTheme())A.push(v`<h1
            class="crossmark-default-header text-grey-light m-0 text-center crossmark-default-heading px-4"
          >
            ${this.getLocalisedString("introHeading")}
          </h1>
          <hr class="hr-top-${this.theme}" />`);else A.push(v`<h3 class="crossmark-${this.theme}-heading text-center">
            ${this.getLocalisedString("introHeading")}
          </h3>
          <h1
            class="text-white text-center crossmark-${this.theme}-sub-heading"
          >
            ${this.getLocalisedString("introSubheading")}
          </h1>`);return A}renderFeatures(){if(this.isDefaultTheme())return;let A=[];return A.push(v`<div class="feature-cell feature-cell flex flex-centered">
        <span class="text-white">${this.getLocalisedString("featureOne")}</span>
      </div>`),A.push(v`<div class="feature-cell feature-cell flex flex-centered">
        <span class="text-white">${this.getLocalisedString("featureTwo")}</span>
      </div>`),A.push(v`<div class="feature-cell feature-cell flex flex-centered">
        <span class="text-white"
          >${this.getLocalisedString("featureThree")}</span
        >
      </div>`),A.push(v`<div class="feature-cell feature-cell flex flex-centered">
        <span class="text-white"
          >${this.getLocalisedString("featureFour")}</span
        >
      </div>`),v`<div
      class="features features-${this.theme} features-${this.theme} flex gap-4 text-center text-sm mb-8"
    >
      ${A}
    </div>`}renderDeviceInfo(){let A=[];if(this.isDefaultTheme())A.push(v`<h6
            class="text-orange crossmark-default-device-info-heading text-center"
          >
            ${this.getLocalisedString("thisDevice")}
          </h6>
          <h2
            class="crossmark-default-device-info-sub-text text-grey-light text-xl text-center"
          >
            ${this.EKResolvedData["datarequirement-crossmark"].sku}
          </h2>`);else A.push(v`<div class="device-info-${this.theme}">
          <div class="device-info-image-${this.theme}">
            <img src="${Z1.dynamic.evoImage[this.theme]}" />
          </div>
          <div class="${this.swapLeftRightPaddingIfRequired("pl-4")}">
            <h4
              class="text-intel-title-blue m-0 text-md leading-relaxed device-info-leading-text-${this.theme}"
            >
              ${this.getLocalisedString("evoHeading")}
            </h4>
            <h6
              class="text-white m-0 mt-2 text-xs device-info-sub-text-${this.theme}"
            >
              ${this.getLocalisedString("evoSubheading").replace("<cpu>",this.EKResolvedData["datarequirement-crossmark"].sku)}
            </h6>
          </div>
        </div>`);return v`<div
      class="device-info ${this.isDefaultTheme()?"device-info-default":`device-info-${this.theme}-container`}"
    >
      ${A}
    </div>`}renderScoresAndTooltips(){return v`<div
      class="scores-and-tooltips scores-and-tooltips-${this.theme} -mx-2"
    >
      <div class="flex flex-col">${this.renderScoresWithTooltips()}</div>
    </div>`}renderScoresWithTooltips(){return v`<div
      class="score score-${this.theme} flex items-center text-grey-dark gap-2"
    >
      <div class="score-and-tooltip-container">
        ${this.renderScoreSVGv2(this.EKResolvedData["datarequirement-crossmark"].overallRating*100)}
        ${this.renderTooltip("scoreOverall")}
      </div>
      <div class="score-and-tooltip-container">
        ${this.renderScoreSVGv2(this.EKResolvedData["datarequirement-crossmark"].productivityRating*100)}
        ${this.renderTooltip("scoreProductivity")}
      </div>
      <div class="score-and-tooltip-container">
        ${this.renderScoreSVGv2(this.EKResolvedData["datarequirement-crossmark"].creativityRating*100)}
        ${this.renderTooltip("scoreCreativity")}
      </div>
    </div>`}onMouseEnter(A,Q){if(Q.target instanceof HTMLElement){let B=Q.target.dataset.id,C=this.shadowRoot?.querySelector(`.${B}`)?.querySelector(".tooltip-popup"),J=Q.target.children[0];C?.classList.remove("removed"),J.style.fill=A}}onMouseExit(A,Q){if(Q.target instanceof HTMLElement){let B=Q.target.dataset.id,C=this.shadowRoot?.querySelector(`.${B}`)?.querySelector(".tooltip-popup"),J=Q.target.children[0];C?.classList.add("removed"),J.style.fill=A}}renderTooltip(A){return v`<div
      class="tooltip tooltip-${this.theme} tooltip-${this.theme} ${A} flex items-center justify-center ${this.isDefaultTheme()?"flex-col text-grey-light":""}"
    >
      <h3 class="m-0 text-md text-center tooltip-title">
        ${this.getLocalisedString(`${A}Heading`)}
      </h3>
      <i
        data-id="${A}"
        class="pointer relative"
        @mouseenter=${this.onMouseEnter.bind(this,this.isDefaultTheme()?Z1.colours.textOrange:Z1.colours.uiBlue)}
        @mouseleave=${this.onMouseExit.bind(this,"#b4b4b4")}
        >${this.infoIconSvg()}
        <div
          class="tooltip-popup tooltip-popup tooltip-popup-${this.theme} absolute tooltip-popup-${A} z-20 removed"
        >
          <h3 class="m-0 text-md text-center mb-1">
            ${this.getLocalisedString(`${A}Heading`)}
          </h3>
          <p class="m-0 text-sm ">
            ${this.getLocalisedString(`${A}Tooltip`)}
          </p>
          <span
            class="tooltip-popup-${this.theme}-arrow tooltip-popup-${this.theme}-${A}-arrow"
          ></span>
        </div>
      </i>
    </div>`}renderCrossmarkInfo(){let A=[];return A.push(v` <div
        class="flex ${this.isDefaultTheme()?"items-center":""} px-4 crossmark-info-container-${this.theme}"
      >
        <img
          class="w-12 h-12"
          src="${Z1.dynamic.crossmarkImage[this.theme]}"
        />
        <p
          class="${this.isDefaultTheme()?"text-grey-light":"text-white"} m-0 ${this.swapLeftRightPaddingIfRequired("pl-4")} text-xs"
        >
          ${this.getLocalisedString("crossmarkDescription")}
        </p>
      </div>`),v`<div
      class="crossmark-info crossmark-info-${this.theme} crossmark-info mb-4"
    >
      ${A}
    </div>`}onClickLegalInfo(){this.legalInfoOpen=!this.legalInfoOpen}renderLegalDisclaimer(){let A=[];return A.push(v`<div class="flex flex-col">
        <div class="py-4 box-shadow z-10 legal-button-${this.theme}" @click=${this.onClickLegalInfo.bind(this)}>
          <h6 class="${this.isDefaultTheme()?"text-grey-light":""} m-0 ${this.swapLeftRightPaddingIfRequired("pl-8")} text-xs">
          ${this.getLocalisedString("legalHeading")} <span class="opacity-75">${this.legalInfoOpen?"\u25B2":"\u25BC"}
          </h6>
        </div>
        <div class="${this.legalInfoOpen?`legal-description-expanded-${this.theme}`:""} legal-description legal-description-${this.theme}">
        <div class="disclaimer-close-icon-${this.theme}" @click=${this.onClickLegalInfo.bind(this)}>
            X
        </div>
          <p class="${this.isDefaultTheme()?"text-grey-dark":"text-white"} text-sm m-0">
            ${this.renderLegalDisclaimerContent()}
          </p>
        </div>
      </div>`),v`<div class="legal-disclaimer legal-disclaimer-${this.theme}">
      ${A}
    </div>`}renderLegalDisclaimerContent(){let A=this.getLocalisedString("legalContent"),Q=new Date(this.EKResolvedData["datarequirement-crossmark"].dateCreated),B={en:"en-US",ar:"ar-AE",br_pt:"pt-BR"},C="en-US";if(this.EKControlObject._config?.language)C=B[this.EKControlObject._config?.language]||"en-US";let J=Q.toLocaleDateString(C,{year:"numeric",month:"long",day:"numeric"});A=A.replace("<date>",J);let I=A.split("<url-001>"),q=A.split(" "),K=[];for(let Y=0;Y<q.length;Y++){let Z=!1;if(!q[Y])continue;if(q[Y]==="<date>")K.push(J),Z=!0;if(q[Y]==="<url-001>")K.push(v`<a href="https://www.bapco.com" rel="noreferrer" target="_blank"
            >www.bapco.com</a
          >`," "),Z=!0;if(q[Y].includes("<url-002>"))K.push(v`<a
            href="https://www.intel.com/PerformanceIndex"
            rel="noreferrer"
            target="_blank"
            >www.intel.com/PerformanceIndex</a
          >`," "),Z=!0;if(q[Y].includes("<url-003>"))K.push(v`<a
            href="https://www.intel.com/PerformanceIndex"
            rel="noreferrer"
            target="_blank"
            >${this.getLocalisedString("legalHeading")}</a
          >`," "),Z=!0;if(!Z)K.push(q[Y]+" ")}return v`${K}`}isDefaultTheme(){return this.theme==="default"}setThemeFromChip(){if(!this.EKResolvedData["datarequirement-crossmark"].sku)return!1;if(!this.isDefaultTheme())return!1;let A="default";if(this.EKResolvedData["datarequirement-evo"]&&this.EKResolvedData["datarequirement-crossmark"].sku.includes("-13"))A="unison";if(this.EKResolvedData["datarequirement-evo"]&&this.EKResolvedData["datarequirement-crossmark"].sku.includes("-11")||this.EKResolvedData["datarequirement-evo"]&&this.EKResolvedData["datarequirement-crossmark"].sku.includes("-12"))A="evo";this.theme=A}addIntelFontToHead(){let A=document.createElement("style");A.appendChild(document.createTextNode("        @font-face {          font-family: "+"IntelOneRegular"+";          src: url('"+"https://cdn.pointandplace.com/fonts/intelone-display/intelone-display-regular.ttf"+"') format('truetype');        }      ")),A.appendChild(document.createTextNode("        @font-face {          font-family: "+"IntelOneLight"+";          src: url('"+"https://cdn.pointandplace.com/fonts/intelone-display/intelone-display-light.ttf"+"') format('truetype');        }      ")),A.appendChild(document.createTextNode("        @font-face {          font-family: "+"IntelOneBold"+";          src: url('"+"https://cdn.pointandplace.com/fonts/intelone-display/intelone-display-bold.woff"+"') format('woff');        }      "));let Q="eky-intel-font";if(A.id=Q,!document.getElementById(Q))document.head.appendChild(A)}async connectedCallback(){await super.connectedCallback(),this.addIntelFontToHead(),this.setThemeFromChip()}isComponentValidToRender(){return!0}logDeliveryEventLegacy(){if(!this.hasDelivered)this.hasDelivered=!0,this.logEventLegacy("delivery","embed")}render(){if(!this.EKResolvedData["datarequirement-crossmark"])return this.nullifyComponent("Missing crossmark data"),null;return[this.renderTailwindStyles(),this.renderTextStyles(),this.renderCustomStyles(),v`<div
        @click=${()=>{this.triggerWOTWCommonInteraction("click"),this.logEventLegacy("click","embed")}}
        class="container container-${this.theme} ${this.isDefaultTheme()?"text":"text-light"} eky-${this.EKControlObject._config?.language}"
      >
        ${this.renderHeading()} ${this.renderFeatures()}
        ${this.renderDeviceInfo()} ${this.renderScoresAndTooltips()}
        ${this.renderCrossmarkInfo()} ${this.renderLegalDisclaimer()}
      </div>`]}}f([a({attribute:!1})],Z1.prototype,"EKResolvedData",void 0),f([a({attribute:!1})],Z1.prototype,"EKProps",void 0),f([K0()],Z1.prototype,"theme",void 0),f([K0()],Z1.prototype,"legalInfoOpen",void 0),Z1=f([z0("ek-crossmark")],Z1);class d9 extends M1{_mouseOverBadge=!1;_mouseOverModal=!1;_mouseOverBadgeTimer=void 0;_mouseOverModalTimer=void 0;static styles=U0`
    :host {
      display: inline-block;
    }
    button {
      background: transparent;
      drop-shadow(rgba(0, 0, 0, 0.06) 0px 2px 2px);
      border: none;
      transition: opacity 250ms cubic-bezier(0.4, 0, 0.2, 1);
      opacity: 0;
      position: relative;
      width: var(--button-width);
      height: var(--button-height);
      padding: 0;
      cursor: pointer;
    }
    button.show { opacity: 1; }
    button > img {
      object-fit: cover;
      max-width: 100%;
      max-height: 100%;
    }
  `;constructor(A,Q,B,C,J,I,q,K,Y){super(A,Q,B,C,J,I,q,K,Y,!0,"custom-button");this._isVisible=!1;this._activeBreakpoint="sm"}toggleVisible(){if(this._isVisible===!0)this.setHidden();else this.setVisible()}replaceButtonWithChildren(){this.EKChildren?.forEach((A)=>{this.ekMainCustomButtonElement.parentNode.insertBefore(A,this.ekMainCustomButtonElement.nextSibling)}),this.ekMainCustomButtonElement.style.display="none"}setVisible(){if(this._isVisible=!0,this.logEventLegacy("click","button"),this.EKChildren&&this.EKChildren.length>0)if(this.EKProps.modal?.modalActivator==="hover")this.triggerWOTWCommonInteraction("hover","modal");else this.triggerWOTWCommonInteraction("click","modal")}setHidden(){this._isVisible=!1,this.triggerWOTWEndInteraction("modal")}_onButtonClicked(){if(this.EKProps.replaceButton===!0)this.replaceButtonWithChildren();else if(this.EKProps.modal?.modalActivator==="click")this.toggleVisible()}_onModalHover(){if(this.EKProps.modal?.modalActivator==="hover")clearTimeout(this._mouseOverModalTimer),this._mouseOverModal=!0}_onModalLeave(){if(this.EKProps.modal?.modalActivator==="hover")clearTimeout(this._mouseOverModalTimer),this._mouseOverModal=!1,this._mouseOverModalTimer=setTimeout(()=>{if(!this._mouseOverBadge)this.setHidden()},100)}_onBadgeHover(){if(this.EKProps.modal?.modalActivator==="hover"&&this.EKProps.replaceButton===!1)clearTimeout(this._mouseOverBadgeTimer),this._mouseOverBadge=!0,this._mouseOverBadgeTimer=setTimeout(()=>{if(this._mouseOverBadge)this.setVisible()},333)}_onBadgeLeave(){if(this.EKProps.modal?.modalActivator==="hover"&&this.EKProps.replaceButton===!1)clearTimeout(this._mouseOverBadgeTimer),this._mouseOverBadge=!1,this._mouseOverBadgeTimer=setTimeout(()=>{if(!this._mouseOverModal)this.setHidden()},100)}_onImageLoad(){this.renderRoot.querySelector(".custom-button")?.classList.add("show")}_onImageError(){let A=this.localisations();console.error(`Failed to load button image: ${A.buttonImage.url}`)}localisations(){return this.getLocalisations("CustomButtonLocalisation")}isComponentValidToRender(){let A=this.localisations();if(A===null||!A)return!1;else if(!A.buttonImage)return!1;return!0}render(){if(!this.isComponentValidToRender())return this.nullifyComponent("Missing localisations"),null;let A=this.localisations(),Q="#f8f8f8",B=null;if(this.EKChildren&&this.EKChildren.length>0)B=this.EKProps.replaceButton===!1?v`<ek-modal
              .placementStrategy="${this.EKProps.modal?.modalPlacement}"
              .EKAPIComponentParent="${this}"
              .visible="${this._isVisible}"
              .anchorElement="${this}"
              .modelContent=${this.EKChildren}
              @ek-modal-close-button="${this.setHidden}"
              @ek-modal-close-backdrop="${this.setHidden}"
              @ek-mouse-over-body="${this._onModalHover}"
              @ek-mouse-out-body="${this._onModalLeave}"
              maxWidth="400px"
              noStyle
              .backdropZIndex=${this.EKProps.modal?.modalBackdropZIndex}
              .bodyZIndex=${this.EKProps.modal?.modalZIndex}
            >
            </ek-modal>`:null;return v`
      ${this.getHostStyleOverride()}
      <style>
        ek-modal {
          --modal-background-color: ${Q};
        }
        button {
          --button-width: ${this.EKProps.width};
          --button-height: ${this.EKProps.height};
          z-index: ${this.EKProps.modal?.modalBackdropZIndex||"auto"};
        }
      </style>
      ${B}
      <button
        class="custom-button"
        id="main-custom-button"
        style="${this.getElementStyleOverride()}"
        @click="${this._onButtonClicked}"
        @mouseover="${this._onBadgeHover}"
        @mouseout="${this._onBadgeLeave}"
      >
        <img
          src="${A.buttonImage.url}"
          @load="${this._onImageLoad}"
          @error="${this._onImageError}"
          alt="${A.buttonImage.altText}"
        />
      </button>
    `}}f([a({attribute:!1})],d9.prototype,"EKResolvedData",void 0),f([a({attribute:!1})],d9.prototype,"EKProps",void 0),f([K0()],d9.prototype,"_isVisible",void 0),f([K0()],d9.prototype,"_activeBreakpoint",void 0),f([X1("ek-modal")],d9.prototype,"ekModal",void 0),f([X1("#main-custom-button")],d9.prototype,"ekMainCustomButtonElement",void 0),d9=f([z0("ek-custom-button")],d9);var Bj=(A,Q)=>Q.kind==="method"&&Q.descriptor&&!("value"in Q.descriptor)?{...Q,finisher(B){B.createProperty(Q.key,A)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:Q.key,initializer(){typeof Q.initializer=="function"&&(this[Q.key]=Q.initializer.call(this))},finisher(B){B.createProperty(Q.key,A)}},Cj=(A,Q,B)=>{Q.constructor.createProperty(B,A)};function f0(A){return(Q,B)=>B!==void 0?Cj(A,Q,B):Bj(A,Q)}var ZZ,K40=((ZZ=window.HTMLSlotElement)===null||ZZ===void 0?void 0:ZZ.prototype.assignedElements)!=null?(A,Q)=>A.assignedElements(Q):(A,Q)=>A.assignedNodes(Q).filter((B)=>B.nodeType===Node.ELEMENT_NODE);var e6={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},A5={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3};var h7=0,x7=1,bA=2,SJ=0;var rD=0;var g7=4,yJ=5,tD=6;var v7=300;var eD=303;var uA=1000,S2=1001,Q5=1002,h4=1003,B5=1004;var C5=1005;var c1=1006,J5=1007;var x4=1008,cZ=1008,y2=1009,AE=1010,QE=1011;var BE=1013,CE=1014,LA=1015,M2=1016;var X2=1023;var b7=1028;var u7=1030;var JE=33776;var IE=33779,qE=35840;var KE=35842;var YE=36196,ZE=37492,HE=37496,XE=37808;var lZ=37812;var GE=36492;var WE=2200,fJ=2201,hJ=2202,xJ=2300,BQ=2301;var FE=0,gJ=1,CQ=2;var I5="",g1="srgb",f1="srgb-linear",VE="display-p3",UE="display-p3-linear";class O2{addEventListener(A,Q){if(this._listeners===void 0)this._listeners={};let B=this._listeners;if(B[A]===void 0)B[A]=[];if(B[A].indexOf(Q)===-1)B[A].push(Q)}hasEventListener(A,Q){if(this._listeners===void 0)return!1;let B=this._listeners;return B[A]!==void 0&&B[A].indexOf(Q)!==-1}removeEventListener(A,Q){if(this._listeners===void 0)return;let C=this._listeners[A];if(C!==void 0){let J=C.indexOf(Q);if(J!==-1)C.splice(J,1)}}dispatchEvent(A){if(this._listeners===void 0)return;let B=this._listeners[A.type];if(B!==void 0){A.target=this;let C=B.slice(0);for(let J=0,I=C.length;J<I;J++)C[J].call(this,A);A.target=null}}}var g2=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],cz=1234567,t9=Math.PI/180,j7=180/Math.PI;function Y4(){let A=Math.random()*4294967295|0,Q=Math.random()*4294967295|0,B=Math.random()*4294967295|0,C=Math.random()*4294967295|0;return(g2[A&255]+g2[A>>8&255]+g2[A>>16&255]+g2[A>>24&255]+"-"+g2[Q&255]+g2[Q>>8&255]+"-"+g2[Q>>16&15|64]+g2[Q>>24&255]+"-"+g2[B&63|128]+g2[B>>8&255]+"-"+g2[B>>16&255]+g2[B>>24&255]+g2[C&255]+g2[C>>8&255]+g2[C>>16&255]+g2[C>>24&255]).toLowerCase()}function L2(A,Q,B){return Math.max(Q,Math.min(B,A))}function sZ(A,Q){return(A%Q+Q)%Q}function Jj(A,Q,B,C,J){return C+(A-Q)*(J-C)/(B-Q)}function Ij(A,Q,B){if(A!==Q)return(B-A)/(Q-A);else return 0}function e9(A,Q,B){return(1-B)*A+B*Q}function qj(A,Q,B,C){return e9(A,Q,1-Math.exp(-B*C))}function Kj(A,Q=1){return Q-Math.abs(sZ(A,Q*2)-Q)}function Yj(A,Q,B){if(A<=Q)return 0;if(A>=B)return 1;return A=(A-Q)/(B-Q),A*A*(3-2*A)}function Zj(A,Q,B){if(A<=Q)return 0;if(A>=B)return 1;return A=(A-Q)/(B-Q),A*A*A*(A*(A*6-15)+10)}function Hj(A,Q){return A+Math.floor(Math.random()*(Q-A+1))}function Xj(A,Q){return A+Math.random()*(Q-A)}function Gj(A){return A*(0.5-Math.random())}function Wj(A){if(A!==void 0)cz=A;let Q=cz+=1831565813;return Q=Math.imul(Q^Q>>>15,Q|1),Q^=Q+Math.imul(Q^Q>>>7,Q|61),((Q^Q>>>14)>>>0)/4294967296}function Fj(A){return A*t9}function Vj(A){return A*j7}function bZ(A){return(A&A-1)===0&&A!==0}function Uj(A){return Math.pow(2,Math.ceil(Math.log(A)/Math.LN2))}function jJ(A){return Math.pow(2,Math.floor(Math.log(A)/Math.LN2))}function zj(A,Q,B,C,J){let{cos:I,sin:q}=Math,K=I(B/2),Y=q(B/2),Z=I((Q+C)/2),H=q((Q+C)/2),G=I((Q-C)/2),W=q((Q-C)/2),F=I((C-Q)/2),z=q((C-Q)/2);switch(J){case"XYX":A.set(K*H,Y*G,Y*W,K*Z);break;case"YZY":A.set(Y*W,K*H,Y*G,K*Z);break;case"ZXZ":A.set(Y*G,Y*W,K*H,K*Z);break;case"XZX":A.set(K*H,Y*z,Y*F,K*Z);break;case"YXY":A.set(Y*F,K*H,Y*z,K*Z);break;case"ZYZ":A.set(Y*z,Y*F,K*H,K*Z);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+J)}}function K4(A,Q){switch(Q.constructor){case Float32Array:return A;case Uint32Array:return A/4294967295;case Uint16Array:return A/65535;case Uint8Array:return A/255;case Int32Array:return Math.max(A/2147483647,-1);case Int16Array:return Math.max(A/32767,-1);case Int8Array:return Math.max(A/127,-1);default:throw new Error("Invalid component type.")}}function j1(A,Q){switch(Q.constructor){case Float32Array:return A;case Uint32Array:return Math.round(A*4294967295);case Uint16Array:return Math.round(A*65535);case Uint8Array:return Math.round(A*255);case Int32Array:return Math.round(A*2147483647);case Int16Array:return Math.round(A*32767);case Int8Array:return Math.round(A*127);default:throw new Error("Invalid component type.")}}var J6={DEG2RAD:t9,RAD2DEG:j7,generateUUID:Y4,clamp:L2,euclideanModulo:sZ,mapLinear:Jj,inverseLerp:Ij,lerp:e9,damp:qj,pingpong:Kj,smoothstep:Yj,smootherstep:Zj,randInt:Hj,randFloat:Xj,randFloatSpread:Gj,seededRandom:Wj,degToRad:Fj,radToDeg:Vj,isPowerOfTwo:bZ,ceilPowerOfTwo:Uj,floorPowerOfTwo:jJ,setQuaternionFromProperEuler:zj,normalize:j1,denormalize:K4};class M0{constructor(A=0,Q=0){M0.prototype.isVector2=!0,this.x=A,this.y=Q}get width(){return this.x}set width(A){this.x=A}get height(){return this.y}set height(A){this.y=A}set(A,Q){return this.x=A,this.y=Q,this}setScalar(A){return this.x=A,this.y=A,this}setX(A){return this.x=A,this}setY(A){return this.y=A,this}setComponent(A,Q){switch(A){case 0:this.x=Q;break;case 1:this.y=Q;break;default:throw new Error("index is out of range: "+A)}return this}getComponent(A){switch(A){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+A)}}clone(){return new this.constructor(this.x,this.y)}copy(A){return this.x=A.x,this.y=A.y,this}add(A){return this.x+=A.x,this.y+=A.y,this}addScalar(A){return this.x+=A,this.y+=A,this}addVectors(A,Q){return this.x=A.x+Q.x,this.y=A.y+Q.y,this}addScaledVector(A,Q){return this.x+=A.x*Q,this.y+=A.y*Q,this}sub(A){return this.x-=A.x,this.y-=A.y,this}subScalar(A){return this.x-=A,this.y-=A,this}subVectors(A,Q){return this.x=A.x-Q.x,this.y=A.y-Q.y,this}multiply(A){return this.x*=A.x,this.y*=A.y,this}multiplyScalar(A){return this.x*=A,this.y*=A,this}divide(A){return this.x/=A.x,this.y/=A.y,this}divideScalar(A){return this.multiplyScalar(1/A)}applyMatrix3(A){let Q=this.x,B=this.y,C=A.elements;return this.x=C[0]*Q+C[3]*B+C[6],this.y=C[1]*Q+C[4]*B+C[7],this}min(A){return this.x=Math.min(this.x,A.x),this.y=Math.min(this.y,A.y),this}max(A){return this.x=Math.max(this.x,A.x),this.y=Math.max(this.y,A.y),this}clamp(A,Q){return this.x=Math.max(A.x,Math.min(Q.x,this.x)),this.y=Math.max(A.y,Math.min(Q.y,this.y)),this}clampScalar(A,Q){return this.x=Math.max(A,Math.min(Q,this.x)),this.y=Math.max(A,Math.min(Q,this.y)),this}clampLength(A,Q){let B=this.length();return this.divideScalar(B||1).multiplyScalar(Math.max(A,Math.min(Q,B)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(A){return this.x*A.x+this.y*A.y}cross(A){return this.x*A.y-this.y*A.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(A){let Q=Math.sqrt(this.lengthSq()*A.lengthSq());if(Q===0)return Math.PI/2;let B=this.dot(A)/Q;return Math.acos(L2(B,-1,1))}distanceTo(A){return Math.sqrt(this.distanceToSquared(A))}distanceToSquared(A){let Q=this.x-A.x,B=this.y-A.y;return Q*Q+B*B}manhattanDistanceTo(A){return Math.abs(this.x-A.x)+Math.abs(this.y-A.y)}setLength(A){return this.normalize().multiplyScalar(A)}lerp(A,Q){return this.x+=(A.x-this.x)*Q,this.y+=(A.y-this.y)*Q,this}lerpVectors(A,Q,B){return this.x=A.x+(Q.x-A.x)*B,this.y=A.y+(Q.y-A.y)*B,this}equals(A){return A.x===this.x&&A.y===this.y}fromArray(A,Q=0){return this.x=A[Q],this.y=A[Q+1],this}toArray(A=[],Q=0){return A[Q]=this.x,A[Q+1]=this.y,A}fromBufferAttribute(A,Q){return this.x=A.getX(Q),this.y=A.getY(Q),this}rotateAround(A,Q){let B=Math.cos(Q),C=Math.sin(Q),J=this.x-A.x,I=this.y-A.y;return this.x=J*B-I*C+A.x,this.y=J*C+I*B+A.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class n0{constructor(A,Q,B,C,J,I,q,K,Y){if(n0.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],A!==void 0)this.set(A,Q,B,C,J,I,q,K,Y)}set(A,Q,B,C,J,I,q,K,Y){let Z=this.elements;return Z[0]=A,Z[1]=C,Z[2]=q,Z[3]=Q,Z[4]=J,Z[5]=K,Z[6]=B,Z[7]=I,Z[8]=Y,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(A){let Q=this.elements,B=A.elements;return Q[0]=B[0],Q[1]=B[1],Q[2]=B[2],Q[3]=B[3],Q[4]=B[4],Q[5]=B[5],Q[6]=B[6],Q[7]=B[7],Q[8]=B[8],this}extractBasis(A,Q,B){return A.setFromMatrix3Column(this,0),Q.setFromMatrix3Column(this,1),B.setFromMatrix3Column(this,2),this}setFromMatrix4(A){let Q=A.elements;return this.set(Q[0],Q[4],Q[8],Q[1],Q[5],Q[9],Q[2],Q[6],Q[10]),this}multiply(A){return this.multiplyMatrices(this,A)}premultiply(A){return this.multiplyMatrices(A,this)}multiplyMatrices(A,Q){let B=A.elements,C=Q.elements,J=this.elements,I=B[0],q=B[3],K=B[6],Y=B[1],Z=B[4],H=B[7],G=B[2],W=B[5],F=B[8],z=C[0],U=C[3],E=C[6],w=C[1],L=C[4],X=C[7],V=C[2],D=C[5],N=C[8];return J[0]=I*z+q*w+K*V,J[3]=I*U+q*L+K*D,J[6]=I*E+q*X+K*N,J[1]=Y*z+Z*w+H*V,J[4]=Y*U+Z*L+H*D,J[7]=Y*E+Z*X+H*N,J[2]=G*z+W*w+F*V,J[5]=G*U+W*L+F*D,J[8]=G*E+W*X+F*N,this}multiplyScalar(A){let Q=this.elements;return Q[0]*=A,Q[3]*=A,Q[6]*=A,Q[1]*=A,Q[4]*=A,Q[7]*=A,Q[2]*=A,Q[5]*=A,Q[8]*=A,this}determinant(){let A=this.elements,Q=A[0],B=A[1],C=A[2],J=A[3],I=A[4],q=A[5],K=A[6],Y=A[7],Z=A[8];return Q*I*Z-Q*q*Y-B*J*Z+B*q*K+C*J*Y-C*I*K}invert(){let A=this.elements,Q=A[0],B=A[1],C=A[2],J=A[3],I=A[4],q=A[5],K=A[6],Y=A[7],Z=A[8],H=Z*I-q*Y,G=q*K-Z*J,W=Y*J-I*K,F=Q*H+B*G+C*W;if(F===0)return this.set(0,0,0,0,0,0,0,0,0);let z=1/F;return A[0]=H*z,A[1]=(C*Y-Z*B)*z,A[2]=(q*B-C*I)*z,A[3]=G*z,A[4]=(Z*Q-C*K)*z,A[5]=(C*J-q*Q)*z,A[6]=W*z,A[7]=(B*K-Y*Q)*z,A[8]=(I*Q-B*J)*z,this}transpose(){let A,Q=this.elements;return A=Q[1],Q[1]=Q[3],Q[3]=A,A=Q[2],Q[2]=Q[6],Q[6]=A,A=Q[5],Q[5]=Q[7],Q[7]=A,this}getNormalMatrix(A){return this.setFromMatrix4(A).invert().transpose()}transposeIntoArray(A){let Q=this.elements;return A[0]=Q[0],A[1]=Q[3],A[2]=Q[6],A[3]=Q[1],A[4]=Q[4],A[5]=Q[7],A[6]=Q[2],A[7]=Q[5],A[8]=Q[8],this}setUvTransform(A,Q,B,C,J,I,q){let K=Math.cos(J),Y=Math.sin(J);return this.set(B*K,B*Y,-B*(K*I+Y*q)+I+A,-C*Y,C*K,-C*(-Y*I+K*q)+q+Q,0,0,1),this}scale(A,Q){return this.premultiply(HZ.makeScale(A,Q)),this}rotate(A){return this.premultiply(HZ.makeRotation(-A)),this}translate(A,Q){return this.premultiply(HZ.makeTranslation(A,Q)),this}makeTranslation(A,Q){if(A.isVector2)this.set(1,0,A.x,0,1,A.y,0,0,1);else this.set(1,0,A,0,1,Q,0,0,1);return this}makeRotation(A){let Q=Math.cos(A),B=Math.sin(A);return this.set(Q,-B,0,B,Q,0,0,0,1),this}makeScale(A,Q){return this.set(A,0,0,0,Q,0,0,0,1),this}equals(A){let Q=this.elements,B=A.elements;for(let C=0;C<9;C++)if(Q[C]!==B[C])return!1;return!0}fromArray(A,Q=0){for(let B=0;B<9;B++)this.elements[B]=A[B+Q];return this}toArray(A=[],Q=0){let B=this.elements;return A[Q]=B[0],A[Q+1]=B[1],A[Q+2]=B[2],A[Q+3]=B[3],A[Q+4]=B[4],A[Q+5]=B[5],A[Q+6]=B[6],A[Q+7]=B[7],A[Q+8]=B[8],A}clone(){return new this.constructor().fromArray(this.elements)}}var HZ=new n0;function zE(A){for(let Q=A.length-1;Q>=0;--Q)if(A[Q]>=65535)return!0;return!1}function QQ(A){return document.createElementNS("http://www.w3.org/1999/xhtml",A)}function Dj(){let A=QQ("canvas");return A.style.display="block",A}var lz={};function DE(A){if(A in lz)return;lz[A]=!0,console.warn(A)}var sz=new n0().set(0.8224621,0.177538,0,0.0331941,0.9668058,0,0.0170827,0.0723974,0.9105199),iz=new n0().set(1.2249401,-0.2249404,0,-0.0420569,1.0420571,0,-0.0196376,-0.0786361,1.0982735),CJ={["srgb-linear"]:{transfer:"linear",primaries:"rec709",toReference:(A)=>A,fromReference:(A)=>A},["srgb"]:{transfer:"srgb",primaries:"rec709",toReference:(A)=>A.convertSRGBToLinear(),fromReference:(A)=>A.convertLinearToSRGB()},["display-p3-linear"]:{transfer:"linear",primaries:"p3",toReference:(A)=>A.applyMatrix3(iz),fromReference:(A)=>A.applyMatrix3(sz)},["display-p3"]:{transfer:"srgb",primaries:"p3",toReference:(A)=>A.convertSRGBToLinear().applyMatrix3(iz),fromReference:(A)=>A.applyMatrix3(sz).convertLinearToSRGB()}},Ej=new Set(["srgb-linear","display-p3-linear"]),O1={enabled:!0,_workingColorSpace:"srgb-linear",get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(A){if(!Ej.has(A))throw new Error(`Unsupported working color space, "${A}".`);this._workingColorSpace=A},convert:function(A,Q,B){if(this.enabled===!1||Q===B||!Q||!B)return A;let C=CJ[Q].toReference,J=CJ[B].fromReference;return J(C(A))},fromWorkingColorSpace:function(A,Q){return this.convert(A,this._workingColorSpace,Q)},toWorkingColorSpace:function(A,Q){return this.convert(A,Q,this._workingColorSpace)},getPrimaries:function(A){return CJ[A].primaries},getTransfer:function(A){if(A==="")return"linear";return CJ[A].transfer}};function T7(A){return A<0.04045?A*0.0773993808:Math.pow(A*0.9478672986+0.0521327014,2.4)}function XZ(A){return A<0.0031308?A*12.92:1.055*Math.pow(A,0.41666)-0.055}var G7;class iZ{static getDataURL(A){if(/^data:/i.test(A.src))return A.src;if(typeof HTMLCanvasElement==="undefined")return A.src;let Q;if(A instanceof HTMLCanvasElement)Q=A;else{if(G7===void 0)G7=QQ("canvas");G7.width=A.width,G7.height=A.height;let B=G7.getContext("2d");if(A instanceof ImageData)B.putImageData(A,0,0);else B.drawImage(A,0,0,A.width,A.height);Q=G7}if(Q.width>2048||Q.height>2048)return console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",A),Q.toDataURL("image/jpeg",0.6);else return Q.toDataURL("image/png")}static sRGBToLinear(A){if(typeof HTMLImageElement!=="undefined"&&A instanceof HTMLImageElement||typeof HTMLCanvasElement!=="undefined"&&A instanceof HTMLCanvasElement||typeof ImageBitmap!=="undefined"&&A instanceof ImageBitmap){let Q=QQ("canvas");Q.width=A.width,Q.height=A.height;let B=Q.getContext("2d");B.drawImage(A,0,0,A.width,A.height);let C=B.getImageData(0,0,A.width,A.height),J=C.data;for(let I=0;I<J.length;I++)J[I]=T7(J[I]/255)*255;return B.putImageData(C,0,0),Q}else if(A.data){let Q=A.data.slice(0);for(let B=0;B<Q.length;B++)if(Q instanceof Uint8Array||Q instanceof Uint8ClampedArray)Q[B]=Math.floor(T7(Q[B]/255)*255);else Q[B]=T7(Q[B]);return{data:Q,width:A.width,height:A.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),A}}var wj=0;class JQ{constructor(A=null){this.isSource=!0,Object.defineProperty(this,"id",{value:wj++}),this.uuid=Y4(),this.data=A,this.dataReady=!0,this.version=0}set needsUpdate(A){if(A===!0)this.version++}toJSON(A){let Q=A===void 0||typeof A==="string";if(!Q&&A.images[this.uuid]!==void 0)return A.images[this.uuid];let B={uuid:this.uuid,url:""},C=this.data;if(C!==null){let J;if(Array.isArray(C)){J=[];for(let I=0,q=C.length;I<q;I++)if(C[I].isDataTexture)J.push(GZ(C[I].image));else J.push(GZ(C[I]))}else J=GZ(C);B.url=J}if(!Q)A.images[this.uuid]=B;return B}}function GZ(A){if(typeof HTMLImageElement!=="undefined"&&A instanceof HTMLImageElement||typeof HTMLCanvasElement!=="undefined"&&A instanceof HTMLCanvasElement||typeof ImageBitmap!=="undefined"&&A instanceof ImageBitmap)return iZ.getDataURL(A);else if(A.data)return{data:Array.from(A.data),width:A.width,height:A.height,type:A.data.constructor.name};else return console.warn("THREE.Texture: Unable to serialize Texture."),{}}var Nj=0;class E1 extends O2{constructor(A=E1.DEFAULT_IMAGE,Q=E1.DEFAULT_MAPPING,B=1001,C=1001,J=1006,I=1008,q=1023,K=1009,Y=E1.DEFAULT_ANISOTROPY,Z=""){super();this.isTexture=!0,Object.defineProperty(this,"id",{value:Nj++}),this.uuid=Y4(),this.name="",this.source=new JQ(A),this.mipmaps=[],this.mapping=Q,this.channel=0,this.wrapS=B,this.wrapT=C,this.magFilter=J,this.minFilter=I,this.anisotropy=Y,this.format=q,this.internalFormat=null,this.type=K,this.offset=new M0(0,0),this.repeat=new M0(1,1),this.center=new M0(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new n0,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=Z,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(A=null){this.source.data=A}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(A){return this.name=A.name,this.source=A.source,this.mipmaps=A.mipmaps.slice(0),this.mapping=A.mapping,this.channel=A.channel,this.wrapS=A.wrapS,this.wrapT=A.wrapT,this.magFilter=A.magFilter,this.minFilter=A.minFilter,this.anisotropy=A.anisotropy,this.format=A.format,this.internalFormat=A.internalFormat,this.type=A.type,this.offset.copy(A.offset),this.repeat.copy(A.repeat),this.center.copy(A.center),this.rotation=A.rotation,this.matrixAutoUpdate=A.matrixAutoUpdate,this.matrix.copy(A.matrix),this.generateMipmaps=A.generateMipmaps,this.premultiplyAlpha=A.premultiplyAlpha,this.flipY=A.flipY,this.unpackAlignment=A.unpackAlignment,this.colorSpace=A.colorSpace,this.userData=JSON.parse(JSON.stringify(A.userData)),this.needsUpdate=!0,this}toJSON(A){let Q=A===void 0||typeof A==="string";if(!Q&&A.textures[this.uuid]!==void 0)return A.textures[this.uuid];let B={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(A).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(Object.keys(this.userData).length>0)B.userData=this.userData;if(!Q)A.textures[this.uuid]=B;return B}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(A){if(this.mapping!==300)return A;if(A.applyMatrix3(this.matrix),A.x<0||A.x>1)switch(this.wrapS){case 1000:A.x=A.x-Math.floor(A.x);break;case 1001:A.x=A.x<0?0:1;break;case 1002:if(Math.abs(Math.floor(A.x)%2)===1)A.x=Math.ceil(A.x)-A.x;else A.x=A.x-Math.floor(A.x);break}if(A.y<0||A.y>1)switch(this.wrapT){case 1000:A.y=A.y-Math.floor(A.y);break;case 1001:A.y=A.y<0?0:1;break;case 1002:if(Math.abs(Math.floor(A.y)%2)===1)A.y=Math.ceil(A.y)-A.y;else A.y=A.y-Math.floor(A.y);break}if(this.flipY)A.y=1-A.y;return A}set needsUpdate(A){if(A===!0)this.version++,this.source.needsUpdate=!0}}E1.DEFAULT_IMAGE=null;E1.DEFAULT_MAPPING=300;E1.DEFAULT_ANISOTROPY=1;class x1{constructor(A=0,Q=0,B=0,C=1){x1.prototype.isVector4=!0,this.x=A,this.y=Q,this.z=B,this.w=C}get width(){return this.z}set width(A){this.z=A}get height(){return this.w}set height(A){this.w=A}set(A,Q,B,C){return this.x=A,this.y=Q,this.z=B,this.w=C,this}setScalar(A){return this.x=A,this.y=A,this.z=A,this.w=A,this}setX(A){return this.x=A,this}setY(A){return this.y=A,this}setZ(A){return this.z=A,this}setW(A){return this.w=A,this}setComponent(A,Q){switch(A){case 0:this.x=Q;break;case 1:this.y=Q;break;case 2:this.z=Q;break;case 3:this.w=Q;break;default:throw new Error("index is out of range: "+A)}return this}getComponent(A){switch(A){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+A)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(A){return this.x=A.x,this.y=A.y,this.z=A.z,this.w=A.w!==void 0?A.w:1,this}add(A){return this.x+=A.x,this.y+=A.y,this.z+=A.z,this.w+=A.w,this}addScalar(A){return this.x+=A,this.y+=A,this.z+=A,this.w+=A,this}addVectors(A,Q){return this.x=A.x+Q.x,this.y=A.y+Q.y,this.z=A.z+Q.z,this.w=A.w+Q.w,this}addScaledVector(A,Q){return this.x+=A.x*Q,this.y+=A.y*Q,this.z+=A.z*Q,this.w+=A.w*Q,this}sub(A){return this.x-=A.x,this.y-=A.y,this.z-=A.z,this.w-=A.w,this}subScalar(A){return this.x-=A,this.y-=A,this.z-=A,this.w-=A,this}subVectors(A,Q){return this.x=A.x-Q.x,this.y=A.y-Q.y,this.z=A.z-Q.z,this.w=A.w-Q.w,this}multiply(A){return this.x*=A.x,this.y*=A.y,this.z*=A.z,this.w*=A.w,this}multiplyScalar(A){return this.x*=A,this.y*=A,this.z*=A,this.w*=A,this}applyMatrix4(A){let Q=this.x,B=this.y,C=this.z,J=this.w,I=A.elements;return this.x=I[0]*Q+I[4]*B+I[8]*C+I[12]*J,this.y=I[1]*Q+I[5]*B+I[9]*C+I[13]*J,this.z=I[2]*Q+I[6]*B+I[10]*C+I[14]*J,this.w=I[3]*Q+I[7]*B+I[11]*C+I[15]*J,this}divideScalar(A){return this.multiplyScalar(1/A)}setAxisAngleFromQuaternion(A){this.w=2*Math.acos(A.w);let Q=Math.sqrt(1-A.w*A.w);if(Q<0.0001)this.x=1,this.y=0,this.z=0;else this.x=A.x/Q,this.y=A.y/Q,this.z=A.z/Q;return this}setAxisAngleFromRotationMatrix(A){let Q,B,C,J,I=0.01,q=0.1,K=A.elements,Y=K[0],Z=K[4],H=K[8],G=K[1],W=K[5],F=K[9],z=K[2],U=K[6],E=K[10];if(Math.abs(Z-G)<0.01&&Math.abs(H-z)<0.01&&Math.abs(F-U)<0.01){if(Math.abs(Z+G)<0.1&&Math.abs(H+z)<0.1&&Math.abs(F+U)<0.1&&Math.abs(Y+W+E-3)<0.1)return this.set(1,0,0,0),this;Q=Math.PI;let L=(Y+1)/2,X=(W+1)/2,V=(E+1)/2,D=(Z+G)/4,N=(H+z)/4,R=(F+U)/4;if(L>X&&L>V)if(L<0.01)B=0,C=0.707106781,J=0.707106781;else B=Math.sqrt(L),C=D/B,J=N/B;else if(X>V)if(X<0.01)B=0.707106781,C=0,J=0.707106781;else C=Math.sqrt(X),B=D/C,J=R/C;else if(V<0.01)B=0.707106781,C=0.707106781,J=0;else J=Math.sqrt(V),B=N/J,C=R/J;return this.set(B,C,J,Q),this}let w=Math.sqrt((U-F)*(U-F)+(H-z)*(H-z)+(G-Z)*(G-Z));if(Math.abs(w)<0.001)w=1;return this.x=(U-F)/w,this.y=(H-z)/w,this.z=(G-Z)/w,this.w=Math.acos((Y+W+E-1)/2),this}min(A){return this.x=Math.min(this.x,A.x),this.y=Math.min(this.y,A.y),this.z=Math.min(this.z,A.z),this.w=Math.min(this.w,A.w),this}max(A){return this.x=Math.max(this.x,A.x),this.y=Math.max(this.y,A.y),this.z=Math.max(this.z,A.z),this.w=Math.max(this.w,A.w),this}clamp(A,Q){return this.x=Math.max(A.x,Math.min(Q.x,this.x)),this.y=Math.max(A.y,Math.min(Q.y,this.y)),this.z=Math.max(A.z,Math.min(Q.z,this.z)),this.w=Math.max(A.w,Math.min(Q.w,this.w)),this}clampScalar(A,Q){return this.x=Math.max(A,Math.min(Q,this.x)),this.y=Math.max(A,Math.min(Q,this.y)),this.z=Math.max(A,Math.min(Q,this.z)),this.w=Math.max(A,Math.min(Q,this.w)),this}clampLength(A,Q){let B=this.length();return this.divideScalar(B||1).multiplyScalar(Math.max(A,Math.min(Q,B)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(A){return this.x*A.x+this.y*A.y+this.z*A.z+this.w*A.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(A){return this.normalize().multiplyScalar(A)}lerp(A,Q){return this.x+=(A.x-this.x)*Q,this.y+=(A.y-this.y)*Q,this.z+=(A.z-this.z)*Q,this.w+=(A.w-this.w)*Q,this}lerpVectors(A,Q,B){return this.x=A.x+(Q.x-A.x)*B,this.y=A.y+(Q.y-A.y)*B,this.z=A.z+(Q.z-A.z)*B,this.w=A.w+(Q.w-A.w)*B,this}equals(A){return A.x===this.x&&A.y===this.y&&A.z===this.z&&A.w===this.w}fromArray(A,Q=0){return this.x=A[Q],this.y=A[Q+1],this.z=A[Q+2],this.w=A[Q+3],this}toArray(A=[],Q=0){return A[Q]=this.x,A[Q+1]=this.y,A[Q+2]=this.z,A[Q+3]=this.w,A}fromBufferAttribute(A,Q){return this.x=A.getX(Q),this.y=A.getY(Q),this.z=A.getZ(Q),this.w=A.getW(Q),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class EE extends O2{constructor(A=1,Q=1,B={}){super();this.isRenderTarget=!0,this.width=A,this.height=Q,this.depth=1,this.scissor=new x1(0,0,A,Q),this.scissorTest=!1,this.viewport=new x1(0,0,A,Q);let C={width:A,height:Q,depth:1};B=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:1006,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0,count:1},B);let J=new E1(C,B.mapping,B.wrapS,B.wrapT,B.magFilter,B.minFilter,B.format,B.type,B.anisotropy,B.colorSpace);J.flipY=!1,J.generateMipmaps=B.generateMipmaps,J.internalFormat=B.internalFormat,this.textures=[];let I=B.count;for(let q=0;q<I;q++)this.textures[q]=J.clone(),this.textures[q].isRenderTargetTexture=!0;this.depthBuffer=B.depthBuffer,this.stencilBuffer=B.stencilBuffer,this.depthTexture=B.depthTexture,this.samples=B.samples}get texture(){return this.textures[0]}set texture(A){this.textures[0]=A}setSize(A,Q,B=1){if(this.width!==A||this.height!==Q||this.depth!==B){this.width=A,this.height=Q,this.depth=B;for(let C=0,J=this.textures.length;C<J;C++)this.textures[C].image.width=A,this.textures[C].image.height=Q,this.textures[C].image.depth=B;this.dispose()}this.viewport.set(0,0,A,Q),this.scissor.set(0,0,A,Q)}clone(){return new this.constructor().copy(this)}copy(A){this.width=A.width,this.height=A.height,this.depth=A.depth,this.scissor.copy(A.scissor),this.scissorTest=A.scissorTest,this.viewport.copy(A.viewport),this.textures.length=0;for(let B=0,C=A.textures.length;B<C;B++)this.textures[B]=A.textures[B].clone(),this.textures[B].isRenderTargetTexture=!0;let Q=Object.assign({},A.texture.image);if(this.texture.source=new JQ(Q),this.depthBuffer=A.depthBuffer,this.stencilBuffer=A.stencilBuffer,A.depthTexture!==null)this.depthTexture=A.depthTexture.clone();return this.samples=A.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class u2 extends EE{constructor(A=1,Q=1,B={}){super(A,Q,B);this.isWebGLRenderTarget=!0}}class nZ extends E1{constructor(A=null,Q=1,B=1,C=1){super(null);this.isDataArrayTexture=!0,this.image={data:A,width:Q,height:B,depth:C},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class vJ extends E1{constructor(A=null,Q=1,B=1,C=1){super(null);this.isData3DTexture=!0,this.image={data:A,width:Q,height:B,depth:C},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class n1{constructor(A=0,Q=0,B=0,C=1){this.isQuaternion=!0,this._x=A,this._y=Q,this._z=B,this._w=C}static slerpFlat(A,Q,B,C,J,I,q){let K=B[C+0],Y=B[C+1],Z=B[C+2],H=B[C+3],G=J[I+0],W=J[I+1],F=J[I+2],z=J[I+3];if(q===0){A[Q+0]=K,A[Q+1]=Y,A[Q+2]=Z,A[Q+3]=H;return}if(q===1){A[Q+0]=G,A[Q+1]=W,A[Q+2]=F,A[Q+3]=z;return}if(H!==z||K!==G||Y!==W||Z!==F){let U=1-q,E=K*G+Y*W+Z*F+H*z,w=E>=0?1:-1,L=1-E*E;if(L>Number.EPSILON){let V=Math.sqrt(L),D=Math.atan2(V,E*w);U=Math.sin(U*D)/V,q=Math.sin(q*D)/V}let X=q*w;if(K=K*U+G*X,Y=Y*U+W*X,Z=Z*U+F*X,H=H*U+z*X,U===1-q){let V=1/Math.sqrt(K*K+Y*Y+Z*Z+H*H);K*=V,Y*=V,Z*=V,H*=V}}A[Q]=K,A[Q+1]=Y,A[Q+2]=Z,A[Q+3]=H}static multiplyQuaternionsFlat(A,Q,B,C,J,I){let q=B[C],K=B[C+1],Y=B[C+2],Z=B[C+3],H=J[I],G=J[I+1],W=J[I+2],F=J[I+3];return A[Q]=q*F+Z*H+K*W-Y*G,A[Q+1]=K*F+Z*G+Y*H-q*W,A[Q+2]=Y*F+Z*W+q*G-K*H,A[Q+3]=Z*F-q*H-K*G-Y*W,A}get x(){return this._x}set x(A){this._x=A,this._onChangeCallback()}get y(){return this._y}set y(A){this._y=A,this._onChangeCallback()}get z(){return this._z}set z(A){this._z=A,this._onChangeCallback()}get w(){return this._w}set w(A){this._w=A,this._onChangeCallback()}set(A,Q,B,C){return this._x=A,this._y=Q,this._z=B,this._w=C,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(A){return this._x=A.x,this._y=A.y,this._z=A.z,this._w=A.w,this._onChangeCallback(),this}setFromEuler(A,Q=!0){let{_x:B,_y:C,_z:J,_order:I}=A,q=Math.cos,K=Math.sin,Y=q(B/2),Z=q(C/2),H=q(J/2),G=K(B/2),W=K(C/2),F=K(J/2);switch(I){case"XYZ":this._x=G*Z*H+Y*W*F,this._y=Y*W*H-G*Z*F,this._z=Y*Z*F+G*W*H,this._w=Y*Z*H-G*W*F;break;case"YXZ":this._x=G*Z*H+Y*W*F,this._y=Y*W*H-G*Z*F,this._z=Y*Z*F-G*W*H,this._w=Y*Z*H+G*W*F;break;case"ZXY":this._x=G*Z*H-Y*W*F,this._y=Y*W*H+G*Z*F,this._z=Y*Z*F+G*W*H,this._w=Y*Z*H-G*W*F;break;case"ZYX":this._x=G*Z*H-Y*W*F,this._y=Y*W*H+G*Z*F,this._z=Y*Z*F-G*W*H,this._w=Y*Z*H+G*W*F;break;case"YZX":this._x=G*Z*H+Y*W*F,this._y=Y*W*H+G*Z*F,this._z=Y*Z*F-G*W*H,this._w=Y*Z*H-G*W*F;break;case"XZY":this._x=G*Z*H-Y*W*F,this._y=Y*W*H-G*Z*F,this._z=Y*Z*F+G*W*H,this._w=Y*Z*H+G*W*F;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+I)}if(Q===!0)this._onChangeCallback();return this}setFromAxisAngle(A,Q){let B=Q/2,C=Math.sin(B);return this._x=A.x*C,this._y=A.y*C,this._z=A.z*C,this._w=Math.cos(B),this._onChangeCallback(),this}setFromRotationMatrix(A){let Q=A.elements,B=Q[0],C=Q[4],J=Q[8],I=Q[1],q=Q[5],K=Q[9],Y=Q[2],Z=Q[6],H=Q[10],G=B+q+H;if(G>0){let W=0.5/Math.sqrt(G+1);this._w=0.25/W,this._x=(Z-K)*W,this._y=(J-Y)*W,this._z=(I-C)*W}else if(B>q&&B>H){let W=2*Math.sqrt(1+B-q-H);this._w=(Z-K)/W,this._x=0.25*W,this._y=(C+I)/W,this._z=(J+Y)/W}else if(q>H){let W=2*Math.sqrt(1+q-B-H);this._w=(J-Y)/W,this._x=(C+I)/W,this._y=0.25*W,this._z=(K+Z)/W}else{let W=2*Math.sqrt(1+H-B-q);this._w=(I-C)/W,this._x=(J+Y)/W,this._y=(K+Z)/W,this._z=0.25*W}return this._onChangeCallback(),this}setFromUnitVectors(A,Q){let B=A.dot(Q)+1;if(B<Number.EPSILON)if(B=0,Math.abs(A.x)>Math.abs(A.z))this._x=-A.y,this._y=A.x,this._z=0,this._w=B;else this._x=0,this._y=-A.z,this._z=A.y,this._w=B;else this._x=A.y*Q.z-A.z*Q.y,this._y=A.z*Q.x-A.x*Q.z,this._z=A.x*Q.y-A.y*Q.x,this._w=B;return this.normalize()}angleTo(A){return 2*Math.acos(Math.abs(L2(this.dot(A),-1,1)))}rotateTowards(A,Q){let B=this.angleTo(A);if(B===0)return this;let C=Math.min(1,Q/B);return this.slerp(A,C),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(A){return this._x*A._x+this._y*A._y+this._z*A._z+this._w*A._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let A=this.length();if(A===0)this._x=0,this._y=0,this._z=0,this._w=1;else A=1/A,this._x=this._x*A,this._y=this._y*A,this._z=this._z*A,this._w=this._w*A;return this._onChangeCallback(),this}multiply(A){return this.multiplyQuaternions(this,A)}premultiply(A){return this.multiplyQuaternions(A,this)}multiplyQuaternions(A,Q){let{_x:B,_y:C,_z:J,_w:I}=A,q=Q._x,K=Q._y,Y=Q._z,Z=Q._w;return this._x=B*Z+I*q+C*Y-J*K,this._y=C*Z+I*K+J*q-B*Y,this._z=J*Z+I*Y+B*K-C*q,this._w=I*Z-B*q-C*K-J*Y,this._onChangeCallback(),this}slerp(A,Q){if(Q===0)return this;if(Q===1)return this.copy(A);let B=this._x,C=this._y,J=this._z,I=this._w,q=I*A._w+B*A._x+C*A._y+J*A._z;if(q<0)this._w=-A._w,this._x=-A._x,this._y=-A._y,this._z=-A._z,q=-q;else this.copy(A);if(q>=1)return this._w=I,this._x=B,this._y=C,this._z=J,this;let K=1-q*q;if(K<=Number.EPSILON){let W=1-Q;return this._w=W*I+Q*this._w,this._x=W*B+Q*this._x,this._y=W*C+Q*this._y,this._z=W*J+Q*this._z,this.normalize(),this}let Y=Math.sqrt(K),Z=Math.atan2(Y,q),H=Math.sin((1-Q)*Z)/Y,G=Math.sin(Q*Z)/Y;return this._w=I*H+this._w*G,this._x=B*H+this._x*G,this._y=C*H+this._y*G,this._z=J*H+this._z*G,this._onChangeCallback(),this}slerpQuaternions(A,Q,B){return this.copy(A).slerp(Q,B)}random(){let A=2*Math.PI*Math.random(),Q=2*Math.PI*Math.random(),B=Math.random(),C=Math.sqrt(1-B),J=Math.sqrt(B);return this.set(C*Math.sin(A),C*Math.cos(A),J*Math.sin(Q),J*Math.cos(Q))}equals(A){return A._x===this._x&&A._y===this._y&&A._z===this._z&&A._w===this._w}fromArray(A,Q=0){return this._x=A[Q],this._y=A[Q+1],this._z=A[Q+2],this._w=A[Q+3],this._onChangeCallback(),this}toArray(A=[],Q=0){return A[Q]=this._x,A[Q+1]=this._y,A[Q+2]=this._z,A[Q+3]=this._w,A}fromBufferAttribute(A,Q){return this._x=A.getX(Q),this._y=A.getY(Q),this._z=A.getZ(Q),this._w=A.getW(Q),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(A){return this._onChangeCallback=A,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class p{constructor(A=0,Q=0,B=0){p.prototype.isVector3=!0,this.x=A,this.y=Q,this.z=B}set(A,Q,B){if(B===void 0)B=this.z;return this.x=A,this.y=Q,this.z=B,this}setScalar(A){return this.x=A,this.y=A,this.z=A,this}setX(A){return this.x=A,this}setY(A){return this.y=A,this}setZ(A){return this.z=A,this}setComponent(A,Q){switch(A){case 0:this.x=Q;break;case 1:this.y=Q;break;case 2:this.z=Q;break;default:throw new Error("index is out of range: "+A)}return this}getComponent(A){switch(A){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+A)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(A){return this.x=A.x,this.y=A.y,this.z=A.z,this}add(A){return this.x+=A.x,this.y+=A.y,this.z+=A.z,this}addScalar(A){return this.x+=A,this.y+=A,this.z+=A,this}addVectors(A,Q){return this.x=A.x+Q.x,this.y=A.y+Q.y,this.z=A.z+Q.z,this}addScaledVector(A,Q){return this.x+=A.x*Q,this.y+=A.y*Q,this.z+=A.z*Q,this}sub(A){return this.x-=A.x,this.y-=A.y,this.z-=A.z,this}subScalar(A){return this.x-=A,this.y-=A,this.z-=A,this}subVectors(A,Q){return this.x=A.x-Q.x,this.y=A.y-Q.y,this.z=A.z-Q.z,this}multiply(A){return this.x*=A.x,this.y*=A.y,this.z*=A.z,this}multiplyScalar(A){return this.x*=A,this.y*=A,this.z*=A,this}multiplyVectors(A,Q){return this.x=A.x*Q.x,this.y=A.y*Q.y,this.z=A.z*Q.z,this}applyEuler(A){return this.applyQuaternion(nz.setFromEuler(A))}applyAxisAngle(A,Q){return this.applyQuaternion(nz.setFromAxisAngle(A,Q))}applyMatrix3(A){let Q=this.x,B=this.y,C=this.z,J=A.elements;return this.x=J[0]*Q+J[3]*B+J[6]*C,this.y=J[1]*Q+J[4]*B+J[7]*C,this.z=J[2]*Q+J[5]*B+J[8]*C,this}applyNormalMatrix(A){return this.applyMatrix3(A).normalize()}applyMatrix4(A){let Q=this.x,B=this.y,C=this.z,J=A.elements,I=1/(J[3]*Q+J[7]*B+J[11]*C+J[15]);return this.x=(J[0]*Q+J[4]*B+J[8]*C+J[12])*I,this.y=(J[1]*Q+J[5]*B+J[9]*C+J[13])*I,this.z=(J[2]*Q+J[6]*B+J[10]*C+J[14])*I,this}applyQuaternion(A){let Q=this.x,B=this.y,C=this.z,J=A.x,I=A.y,q=A.z,K=A.w,Y=2*(I*C-q*B),Z=2*(q*Q-J*C),H=2*(J*B-I*Q);return this.x=Q+K*Y+I*H-q*Z,this.y=B+K*Z+q*Y-J*H,this.z=C+K*H+J*Z-I*Y,this}project(A){return this.applyMatrix4(A.matrixWorldInverse).applyMatrix4(A.projectionMatrix)}unproject(A){return this.applyMatrix4(A.projectionMatrixInverse).applyMatrix4(A.matrixWorld)}transformDirection(A){let Q=this.x,B=this.y,C=this.z,J=A.elements;return this.x=J[0]*Q+J[4]*B+J[8]*C,this.y=J[1]*Q+J[5]*B+J[9]*C,this.z=J[2]*Q+J[6]*B+J[10]*C,this.normalize()}divide(A){return this.x/=A.x,this.y/=A.y,this.z/=A.z,this}divideScalar(A){return this.multiplyScalar(1/A)}min(A){return this.x=Math.min(this.x,A.x),this.y=Math.min(this.y,A.y),this.z=Math.min(this.z,A.z),this}max(A){return this.x=Math.max(this.x,A.x),this.y=Math.max(this.y,A.y),this.z=Math.max(this.z,A.z),this}clamp(A,Q){return this.x=Math.max(A.x,Math.min(Q.x,this.x)),this.y=Math.max(A.y,Math.min(Q.y,this.y)),this.z=Math.max(A.z,Math.min(Q.z,this.z)),this}clampScalar(A,Q){return this.x=Math.max(A,Math.min(Q,this.x)),this.y=Math.max(A,Math.min(Q,this.y)),this.z=Math.max(A,Math.min(Q,this.z)),this}clampLength(A,Q){let B=this.length();return this.divideScalar(B||1).multiplyScalar(Math.max(A,Math.min(Q,B)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(A){return this.x*A.x+this.y*A.y+this.z*A.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(A){return this.normalize().multiplyScalar(A)}lerp(A,Q){return this.x+=(A.x-this.x)*Q,this.y+=(A.y-this.y)*Q,this.z+=(A.z-this.z)*Q,this}lerpVectors(A,Q,B){return this.x=A.x+(Q.x-A.x)*B,this.y=A.y+(Q.y-A.y)*B,this.z=A.z+(Q.z-A.z)*B,this}cross(A){return this.crossVectors(this,A)}crossVectors(A,Q){let{x:B,y:C,z:J}=A,I=Q.x,q=Q.y,K=Q.z;return this.x=C*K-J*q,this.y=J*I-B*K,this.z=B*q-C*I,this}projectOnVector(A){let Q=A.lengthSq();if(Q===0)return this.set(0,0,0);let B=A.dot(this)/Q;return this.copy(A).multiplyScalar(B)}projectOnPlane(A){return WZ.copy(this).projectOnVector(A),this.sub(WZ)}reflect(A){return this.sub(WZ.copy(A).multiplyScalar(2*this.dot(A)))}angleTo(A){let Q=Math.sqrt(this.lengthSq()*A.lengthSq());if(Q===0)return Math.PI/2;let B=this.dot(A)/Q;return Math.acos(L2(B,-1,1))}distanceTo(A){return Math.sqrt(this.distanceToSquared(A))}distanceToSquared(A){let Q=this.x-A.x,B=this.y-A.y,C=this.z-A.z;return Q*Q+B*B+C*C}manhattanDistanceTo(A){return Math.abs(this.x-A.x)+Math.abs(this.y-A.y)+Math.abs(this.z-A.z)}setFromSpherical(A){return this.setFromSphericalCoords(A.radius,A.phi,A.theta)}setFromSphericalCoords(A,Q,B){let C=Math.sin(Q)*A;return this.x=C*Math.sin(B),this.y=Math.cos(Q)*A,this.z=C*Math.cos(B),this}setFromCylindrical(A){return this.setFromCylindricalCoords(A.radius,A.theta,A.y)}setFromCylindricalCoords(A,Q,B){return this.x=A*Math.sin(Q),this.y=B,this.z=A*Math.cos(Q),this}setFromMatrixPosition(A){let Q=A.elements;return this.x=Q[12],this.y=Q[13],this.z=Q[14],this}setFromMatrixScale(A){let Q=this.setFromMatrixColumn(A,0).length(),B=this.setFromMatrixColumn(A,1).length(),C=this.setFromMatrixColumn(A,2).length();return this.x=Q,this.y=B,this.z=C,this}setFromMatrixColumn(A,Q){return this.fromArray(A.elements,Q*4)}setFromMatrix3Column(A,Q){return this.fromArray(A.elements,Q*3)}setFromEuler(A){return this.x=A._x,this.y=A._y,this.z=A._z,this}setFromColor(A){return this.x=A.r,this.y=A.g,this.z=A.b,this}equals(A){return A.x===this.x&&A.y===this.y&&A.z===this.z}fromArray(A,Q=0){return this.x=A[Q],this.y=A[Q+1],this.z=A[Q+2],this}toArray(A=[],Q=0){return A[Q]=this.x,A[Q+1]=this.y,A[Q+2]=this.z,A}fromBufferAttribute(A,Q){return this.x=A.getX(Q),this.y=A.getY(Q),this.z=A.getZ(Q),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let A=Math.random()*Math.PI*2,Q=Math.random()*2-1,B=Math.sqrt(1-Q*Q);return this.x=B*Math.cos(A),this.y=Q,this.z=B*Math.sin(A),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}var WZ=new p,nz=new n1;class G2{constructor(A=new p(1/0,1/0,1/0),Q=new p(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=A,this.max=Q}set(A,Q){return this.min.copy(A),this.max.copy(Q),this}setFromArray(A){this.makeEmpty();for(let Q=0,B=A.length;Q<B;Q+=3)this.expandByPoint(J4.fromArray(A,Q));return this}setFromBufferAttribute(A){this.makeEmpty();for(let Q=0,B=A.count;Q<B;Q++)this.expandByPoint(J4.fromBufferAttribute(A,Q));return this}setFromPoints(A){this.makeEmpty();for(let Q=0,B=A.length;Q<B;Q++)this.expandByPoint(A[Q]);return this}setFromCenterAndSize(A,Q){let B=J4.copy(Q).multiplyScalar(0.5);return this.min.copy(A).sub(B),this.max.copy(A).add(B),this}setFromObject(A,Q=!1){return this.makeEmpty(),this.expandByObject(A,Q)}clone(){return new this.constructor().copy(this)}copy(A){return this.min.copy(A.min),this.max.copy(A.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(A){return this.isEmpty()?A.set(0,0,0):A.addVectors(this.min,this.max).multiplyScalar(0.5)}getSize(A){return this.isEmpty()?A.set(0,0,0):A.subVectors(this.max,this.min)}expandByPoint(A){return this.min.min(A),this.max.max(A),this}expandByVector(A){return this.min.sub(A),this.max.add(A),this}expandByScalar(A){return this.min.addScalar(-A),this.max.addScalar(A),this}expandByObject(A,Q=!1){A.updateWorldMatrix(!1,!1);let B=A.geometry;if(B!==void 0){let J=B.getAttribute("position");if(Q===!0&&J!==void 0&&A.isInstancedMesh!==!0)for(let I=0,q=J.count;I<q;I++){if(A.isMesh===!0)A.getVertexPosition(I,J4);else J4.fromBufferAttribute(J,I);J4.applyMatrix4(A.matrixWorld),this.expandByPoint(J4)}else{if(A.boundingBox!==void 0){if(A.boundingBox===null)A.computeBoundingBox();JJ.copy(A.boundingBox)}else{if(B.boundingBox===null)B.computeBoundingBox();JJ.copy(B.boundingBox)}JJ.applyMatrix4(A.matrixWorld),this.union(JJ)}}let C=A.children;for(let J=0,I=C.length;J<I;J++)this.expandByObject(C[J],Q);return this}containsPoint(A){return A.x<this.min.x||A.x>this.max.x||A.y<this.min.y||A.y>this.max.y||A.z<this.min.z||A.z>this.max.z?!1:!0}containsBox(A){return this.min.x<=A.min.x&&A.max.x<=this.max.x&&this.min.y<=A.min.y&&A.max.y<=this.max.y&&this.min.z<=A.min.z&&A.max.z<=this.max.z}getParameter(A,Q){return Q.set((A.x-this.min.x)/(this.max.x-this.min.x),(A.y-this.min.y)/(this.max.y-this.min.y),(A.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(A){return A.max.x<this.min.x||A.min.x>this.max.x||A.max.y<this.min.y||A.min.y>this.max.y||A.max.z<this.min.z||A.min.z>this.max.z?!1:!0}intersectsSphere(A){return this.clampPoint(A.center,J4),J4.distanceToSquared(A.center)<=A.radius*A.radius}intersectsPlane(A){let Q,B;if(A.normal.x>0)Q=A.normal.x*this.min.x,B=A.normal.x*this.max.x;else Q=A.normal.x*this.max.x,B=A.normal.x*this.min.x;if(A.normal.y>0)Q+=A.normal.y*this.min.y,B+=A.normal.y*this.max.y;else Q+=A.normal.y*this.max.y,B+=A.normal.y*this.min.y;if(A.normal.z>0)Q+=A.normal.z*this.min.z,B+=A.normal.z*this.max.z;else Q+=A.normal.z*this.max.z,B+=A.normal.z*this.min.z;return Q<=-A.constant&&B>=-A.constant}intersectsTriangle(A){if(this.isEmpty())return!1;this.getCenter(l9),IJ.subVectors(this.max,l9),W7.subVectors(A.a,l9),F7.subVectors(A.b,l9),V7.subVectors(A.c,l9),a3.subVectors(F7,W7),r3.subVectors(V7,F7),l6.subVectors(W7,V7);let Q=[0,-a3.z,a3.y,0,-r3.z,r3.y,0,-l6.z,l6.y,a3.z,0,-a3.x,r3.z,0,-r3.x,l6.z,0,-l6.x,-a3.y,a3.x,0,-r3.y,r3.x,0,-l6.y,l6.x,0];if(!FZ(Q,W7,F7,V7,IJ))return!1;if(Q=[1,0,0,0,1,0,0,0,1],!FZ(Q,W7,F7,V7,IJ))return!1;return qJ.crossVectors(a3,r3),Q=[qJ.x,qJ.y,qJ.z],FZ(Q,W7,F7,V7,IJ)}clampPoint(A,Q){return Q.copy(A).clamp(this.min,this.max)}distanceToPoint(A){return this.clampPoint(A,J4).distanceTo(A)}getBoundingSphere(A){if(this.isEmpty())A.makeEmpty();else this.getCenter(A.center),A.radius=this.getSize(J4).length()*0.5;return A}intersect(A){if(this.min.max(A.min),this.max.min(A.max),this.isEmpty())this.makeEmpty();return this}union(A){return this.min.min(A.min),this.max.max(A.max),this}applyMatrix4(A){if(this.isEmpty())return this;return X3[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(A),X3[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(A),X3[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(A),X3[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(A),X3[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(A),X3[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(A),X3[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(A),X3[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(A),this.setFromPoints(X3),this}translate(A){return this.min.add(A),this.max.add(A),this}equals(A){return A.min.equals(this.min)&&A.max.equals(this.max)}}var X3=[new p,new p,new p,new p,new p,new p,new p,new p],J4=new p,JJ=new G2,W7=new p,F7=new p,V7=new p,a3=new p,r3=new p,l6=new p,l9=new p,IJ=new p,qJ=new p,s6=new p;function FZ(A,Q,B,C,J){for(let I=0,q=A.length-3;I<=q;I+=3){s6.fromArray(A,I);let K=J.x*Math.abs(s6.x)+J.y*Math.abs(s6.y)+J.z*Math.abs(s6.z),Y=Q.dot(s6),Z=B.dot(s6),H=C.dot(s6);if(Math.max(-Math.max(Y,Z,H),Math.min(Y,Z,H))>K)return!1}return!0}var $j=new G2,s9=new p,VZ=new p;class p2{constructor(A=new p,Q=-1){this.isSphere=!0,this.center=A,this.radius=Q}set(A,Q){return this.center.copy(A),this.radius=Q,this}setFromPoints(A,Q){let B=this.center;if(Q!==void 0)B.copy(Q);else $j.setFromPoints(A).getCenter(B);let C=0;for(let J=0,I=A.length;J<I;J++)C=Math.max(C,B.distanceToSquared(A[J]));return this.radius=Math.sqrt(C),this}copy(A){return this.center.copy(A.center),this.radius=A.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(A){return A.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(A){return A.distanceTo(this.center)-this.radius}intersectsSphere(A){let Q=this.radius+A.radius;return A.center.distanceToSquared(this.center)<=Q*Q}intersectsBox(A){return A.intersectsSphere(this)}intersectsPlane(A){return Math.abs(A.distanceToPoint(this.center))<=this.radius}clampPoint(A,Q){let B=this.center.distanceToSquared(A);if(Q.copy(A),B>this.radius*this.radius)Q.sub(this.center).normalize(),Q.multiplyScalar(this.radius).add(this.center);return Q}getBoundingBox(A){if(this.isEmpty())return A.makeEmpty(),A;return A.set(this.center,this.center),A.expandByScalar(this.radius),A}applyMatrix4(A){return this.center.applyMatrix4(A),this.radius=this.radius*A.getMaxScaleOnAxis(),this}translate(A){return this.center.add(A),this}expandByPoint(A){if(this.isEmpty())return this.center.copy(A),this.radius=0,this;s9.subVectors(A,this.center);let Q=s9.lengthSq();if(Q>this.radius*this.radius){let B=Math.sqrt(Q),C=(B-this.radius)*0.5;this.center.addScaledVector(s9,C/B),this.radius+=C}return this}union(A){if(A.isEmpty())return this;if(this.isEmpty())return this.copy(A),this;if(this.center.equals(A.center)===!0)this.radius=Math.max(this.radius,A.radius);else VZ.subVectors(A.center,this.center).setLength(A.radius),this.expandByPoint(s9.copy(A.center).add(VZ)),this.expandByPoint(s9.copy(A.center).sub(VZ));return this}equals(A){return A.center.equals(this.center)&&A.radius===this.radius}clone(){return new this.constructor().copy(this)}}var G3=new p,UZ=new p,KJ=new p,t3=new p,zZ=new p,YJ=new p,DZ=new p;class I6{constructor(A=new p,Q=new p(0,0,-1)){this.origin=A,this.direction=Q}set(A,Q){return this.origin.copy(A),this.direction.copy(Q),this}copy(A){return this.origin.copy(A.origin),this.direction.copy(A.direction),this}at(A,Q){return Q.copy(this.origin).addScaledVector(this.direction,A)}lookAt(A){return this.direction.copy(A).sub(this.origin).normalize(),this}recast(A){return this.origin.copy(this.at(A,G3)),this}closestPointToPoint(A,Q){Q.subVectors(A,this.origin);let B=Q.dot(this.direction);if(B<0)return Q.copy(this.origin);return Q.copy(this.origin).addScaledVector(this.direction,B)}distanceToPoint(A){return Math.sqrt(this.distanceSqToPoint(A))}distanceSqToPoint(A){let Q=G3.subVectors(A,this.origin).dot(this.direction);if(Q<0)return this.origin.distanceToSquared(A);return G3.copy(this.origin).addScaledVector(this.direction,Q),G3.distanceToSquared(A)}distanceSqToSegment(A,Q,B,C){UZ.copy(A).add(Q).multiplyScalar(0.5),KJ.copy(Q).sub(A).normalize(),t3.copy(this.origin).sub(UZ);let J=A.distanceTo(Q)*0.5,I=-this.direction.dot(KJ),q=t3.dot(this.direction),K=-t3.dot(KJ),Y=t3.lengthSq(),Z=Math.abs(1-I*I),H,G,W,F;if(Z>0)if(H=I*K-q,G=I*q-K,F=J*Z,H>=0)if(G>=-F)if(G<=F){let z=1/Z;H*=z,G*=z,W=H*(H+I*G+2*q)+G*(I*H+G+2*K)+Y}else G=J,H=Math.max(0,-(I*G+q)),W=-H*H+G*(G+2*K)+Y;else G=-J,H=Math.max(0,-(I*G+q)),W=-H*H+G*(G+2*K)+Y;else if(G<=-F)H=Math.max(0,-(-I*J+q)),G=H>0?-J:Math.min(Math.max(-J,-K),J),W=-H*H+G*(G+2*K)+Y;else if(G<=F)H=0,G=Math.min(Math.max(-J,-K),J),W=G*(G+2*K)+Y;else H=Math.max(0,-(I*J+q)),G=H>0?J:Math.min(Math.max(-J,-K),J),W=-H*H+G*(G+2*K)+Y;else G=I>0?-J:J,H=Math.max(0,-(I*G+q)),W=-H*H+G*(G+2*K)+Y;if(B)B.copy(this.origin).addScaledVector(this.direction,H);if(C)C.copy(UZ).addScaledVector(KJ,G);return W}intersectSphere(A,Q){G3.subVectors(A.center,this.origin);let B=G3.dot(this.direction),C=G3.dot(G3)-B*B,J=A.radius*A.radius;if(C>J)return null;let I=Math.sqrt(J-C),q=B-I,K=B+I;if(K<0)return null;if(q<0)return this.at(K,Q);return this.at(q,Q)}intersectsSphere(A){return this.distanceSqToPoint(A.center)<=A.radius*A.radius}distanceToPlane(A){let Q=A.normal.dot(this.direction);if(Q===0){if(A.distanceToPoint(this.origin)===0)return 0;return null}let B=-(this.origin.dot(A.normal)+A.constant)/Q;return B>=0?B:null}intersectPlane(A,Q){let B=this.distanceToPlane(A);if(B===null)return null;return this.at(B,Q)}intersectsPlane(A){let Q=A.distanceToPoint(this.origin);if(Q===0)return!0;if(A.normal.dot(this.direction)*Q<0)return!0;return!1}intersectBox(A,Q){let B,C,J,I,q,K,Y=1/this.direction.x,Z=1/this.direction.y,H=1/this.direction.z,G=this.origin;if(Y>=0)B=(A.min.x-G.x)*Y,C=(A.max.x-G.x)*Y;else B=(A.max.x-G.x)*Y,C=(A.min.x-G.x)*Y;if(Z>=0)J=(A.min.y-G.y)*Z,I=(A.max.y-G.y)*Z;else J=(A.max.y-G.y)*Z,I=(A.min.y-G.y)*Z;if(B>I||J>C)return null;if(J>B||isNaN(B))B=J;if(I<C||isNaN(C))C=I;if(H>=0)q=(A.min.z-G.z)*H,K=(A.max.z-G.z)*H;else q=(A.max.z-G.z)*H,K=(A.min.z-G.z)*H;if(B>K||q>C)return null;if(q>B||B!==B)B=q;if(K<C||C!==C)C=K;if(C<0)return null;return this.at(B>=0?B:C,Q)}intersectsBox(A){return this.intersectBox(A,G3)!==null}intersectTriangle(A,Q,B,C,J){zZ.subVectors(Q,A),YJ.subVectors(B,A),DZ.crossVectors(zZ,YJ);let I=this.direction.dot(DZ),q;if(I>0){if(C)return null;q=1}else if(I<0)q=-1,I=-I;else return null;t3.subVectors(this.origin,A);let K=q*this.direction.dot(YJ.crossVectors(t3,YJ));if(K<0)return null;let Y=q*this.direction.dot(zZ.cross(t3));if(Y<0)return null;if(K+Y>I)return null;let Z=-q*t3.dot(DZ);if(Z<0)return null;return this.at(Z/I,J)}applyMatrix4(A){return this.origin.applyMatrix4(A),this.direction.transformDirection(A),this}equals(A){return A.origin.equals(this.origin)&&A.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class h0{constructor(A,Q,B,C,J,I,q,K,Y,Z,H,G,W,F,z,U){if(h0.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],A!==void 0)this.set(A,Q,B,C,J,I,q,K,Y,Z,H,G,W,F,z,U)}set(A,Q,B,C,J,I,q,K,Y,Z,H,G,W,F,z,U){let E=this.elements;return E[0]=A,E[4]=Q,E[8]=B,E[12]=C,E[1]=J,E[5]=I,E[9]=q,E[13]=K,E[2]=Y,E[6]=Z,E[10]=H,E[14]=G,E[3]=W,E[7]=F,E[11]=z,E[15]=U,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new h0().fromArray(this.elements)}copy(A){let Q=this.elements,B=A.elements;return Q[0]=B[0],Q[1]=B[1],Q[2]=B[2],Q[3]=B[3],Q[4]=B[4],Q[5]=B[5],Q[6]=B[6],Q[7]=B[7],Q[8]=B[8],Q[9]=B[9],Q[10]=B[10],Q[11]=B[11],Q[12]=B[12],Q[13]=B[13],Q[14]=B[14],Q[15]=B[15],this}copyPosition(A){let Q=this.elements,B=A.elements;return Q[12]=B[12],Q[13]=B[13],Q[14]=B[14],this}setFromMatrix3(A){let Q=A.elements;return this.set(Q[0],Q[3],Q[6],0,Q[1],Q[4],Q[7],0,Q[2],Q[5],Q[8],0,0,0,0,1),this}extractBasis(A,Q,B){return A.setFromMatrixColumn(this,0),Q.setFromMatrixColumn(this,1),B.setFromMatrixColumn(this,2),this}makeBasis(A,Q,B){return this.set(A.x,Q.x,B.x,0,A.y,Q.y,B.y,0,A.z,Q.z,B.z,0,0,0,0,1),this}extractRotation(A){let Q=this.elements,B=A.elements,C=1/U7.setFromMatrixColumn(A,0).length(),J=1/U7.setFromMatrixColumn(A,1).length(),I=1/U7.setFromMatrixColumn(A,2).length();return Q[0]=B[0]*C,Q[1]=B[1]*C,Q[2]=B[2]*C,Q[3]=0,Q[4]=B[4]*J,Q[5]=B[5]*J,Q[6]=B[6]*J,Q[7]=0,Q[8]=B[8]*I,Q[9]=B[9]*I,Q[10]=B[10]*I,Q[11]=0,Q[12]=0,Q[13]=0,Q[14]=0,Q[15]=1,this}makeRotationFromEuler(A){let Q=this.elements,B=A.x,C=A.y,J=A.z,I=Math.cos(B),q=Math.sin(B),K=Math.cos(C),Y=Math.sin(C),Z=Math.cos(J),H=Math.sin(J);if(A.order==="XYZ"){let G=I*Z,W=I*H,F=q*Z,z=q*H;Q[0]=K*Z,Q[4]=-K*H,Q[8]=Y,Q[1]=W+F*Y,Q[5]=G-z*Y,Q[9]=-q*K,Q[2]=z-G*Y,Q[6]=F+W*Y,Q[10]=I*K}else if(A.order==="YXZ"){let G=K*Z,W=K*H,F=Y*Z,z=Y*H;Q[0]=G+z*q,Q[4]=F*q-W,Q[8]=I*Y,Q[1]=I*H,Q[5]=I*Z,Q[9]=-q,Q[2]=W*q-F,Q[6]=z+G*q,Q[10]=I*K}else if(A.order==="ZXY"){let G=K*Z,W=K*H,F=Y*Z,z=Y*H;Q[0]=G-z*q,Q[4]=-I*H,Q[8]=F+W*q,Q[1]=W+F*q,Q[5]=I*Z,Q[9]=z-G*q,Q[2]=-I*Y,Q[6]=q,Q[10]=I*K}else if(A.order==="ZYX"){let G=I*Z,W=I*H,F=q*Z,z=q*H;Q[0]=K*Z,Q[4]=F*Y-W,Q[8]=G*Y+z,Q[1]=K*H,Q[5]=z*Y+G,Q[9]=W*Y-F,Q[2]=-Y,Q[6]=q*K,Q[10]=I*K}else if(A.order==="YZX"){let G=I*K,W=I*Y,F=q*K,z=q*Y;Q[0]=K*Z,Q[4]=z-G*H,Q[8]=F*H+W,Q[1]=H,Q[5]=I*Z,Q[9]=-q*Z,Q[2]=-Y*Z,Q[6]=W*H+F,Q[10]=G-z*H}else if(A.order==="XZY"){let G=I*K,W=I*Y,F=q*K,z=q*Y;Q[0]=K*Z,Q[4]=-H,Q[8]=Y*Z,Q[1]=G*H+z,Q[5]=I*Z,Q[9]=W*H-F,Q[2]=F*H-W,Q[6]=q*Z,Q[10]=z*H+G}return Q[3]=0,Q[7]=0,Q[11]=0,Q[12]=0,Q[13]=0,Q[14]=0,Q[15]=1,this}makeRotationFromQuaternion(A){return this.compose(Rj,A,Lj)}lookAt(A,Q,B){let C=this.elements;if($A.subVectors(A,Q),$A.lengthSq()===0)$A.z=1;if($A.normalize(),e3.crossVectors(B,$A),e3.lengthSq()===0){if(Math.abs(B.z)===1)$A.x+=0.0001;else $A.z+=0.0001;$A.normalize(),e3.crossVectors(B,$A)}return e3.normalize(),ZJ.crossVectors($A,e3),C[0]=e3.x,C[4]=ZJ.x,C[8]=$A.x,C[1]=e3.y,C[5]=ZJ.y,C[9]=$A.y,C[2]=e3.z,C[6]=ZJ.z,C[10]=$A.z,this}multiply(A){return this.multiplyMatrices(this,A)}premultiply(A){return this.multiplyMatrices(A,this)}multiplyMatrices(A,Q){let B=A.elements,C=Q.elements,J=this.elements,I=B[0],q=B[4],K=B[8],Y=B[12],Z=B[1],H=B[5],G=B[9],W=B[13],F=B[2],z=B[6],U=B[10],E=B[14],w=B[3],L=B[7],X=B[11],V=B[15],D=C[0],N=C[4],R=C[8],k=C[12],P=C[1],$=C[5],_=C[9],h=C[13],S=C[2],O=C[6],M=C[10],y=C[14],u=C[3],T=C[7],d=C[11],g=C[15];return J[0]=I*D+q*P+K*S+Y*u,J[4]=I*N+q*$+K*O+Y*T,J[8]=I*R+q*_+K*M+Y*d,J[12]=I*k+q*h+K*y+Y*g,J[1]=Z*D+H*P+G*S+W*u,J[5]=Z*N+H*$+G*O+W*T,J[9]=Z*R+H*_+G*M+W*d,J[13]=Z*k+H*h+G*y+W*g,J[2]=F*D+z*P+U*S+E*u,J[6]=F*N+z*$+U*O+E*T,J[10]=F*R+z*_+U*M+E*d,J[14]=F*k+z*h+U*y+E*g,J[3]=w*D+L*P+X*S+V*u,J[7]=w*N+L*$+X*O+V*T,J[11]=w*R+L*_+X*M+V*d,J[15]=w*k+L*h+X*y+V*g,this}multiplyScalar(A){let Q=this.elements;return Q[0]*=A,Q[4]*=A,Q[8]*=A,Q[12]*=A,Q[1]*=A,Q[5]*=A,Q[9]*=A,Q[13]*=A,Q[2]*=A,Q[6]*=A,Q[10]*=A,Q[14]*=A,Q[3]*=A,Q[7]*=A,Q[11]*=A,Q[15]*=A,this}determinant(){let A=this.elements,Q=A[0],B=A[4],C=A[8],J=A[12],I=A[1],q=A[5],K=A[9],Y=A[13],Z=A[2],H=A[6],G=A[10],W=A[14],F=A[3],z=A[7],U=A[11],E=A[15];return F*(+J*K*H-C*Y*H-J*q*G+B*Y*G+C*q*W-B*K*W)+z*(+Q*K*W-Q*Y*G+J*I*G-C*I*W+C*Y*Z-J*K*Z)+U*(+Q*Y*H-Q*q*W-J*I*H+B*I*W+J*q*Z-B*Y*Z)+E*(-C*q*Z-Q*K*H+Q*q*G+C*I*H-B*I*G+B*K*Z)}transpose(){let A=this.elements,Q;return Q=A[1],A[1]=A[4],A[4]=Q,Q=A[2],A[2]=A[8],A[8]=Q,Q=A[6],A[6]=A[9],A[9]=Q,Q=A[3],A[3]=A[12],A[12]=Q,Q=A[7],A[7]=A[13],A[13]=Q,Q=A[11],A[11]=A[14],A[14]=Q,this}setPosition(A,Q,B){let C=this.elements;if(A.isVector3)C[12]=A.x,C[13]=A.y,C[14]=A.z;else C[12]=A,C[13]=Q,C[14]=B;return this}invert(){let A=this.elements,Q=A[0],B=A[1],C=A[2],J=A[3],I=A[4],q=A[5],K=A[6],Y=A[7],Z=A[8],H=A[9],G=A[10],W=A[11],F=A[12],z=A[13],U=A[14],E=A[15],w=H*U*Y-z*G*Y+z*K*W-q*U*W-H*K*E+q*G*E,L=F*G*Y-Z*U*Y-F*K*W+I*U*W+Z*K*E-I*G*E,X=Z*z*Y-F*H*Y+F*q*W-I*z*W-Z*q*E+I*H*E,V=F*H*K-Z*z*K-F*q*G+I*z*G+Z*q*U-I*H*U,D=Q*w+B*L+C*X+J*V;if(D===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let N=1/D;return A[0]=w*N,A[1]=(z*G*J-H*U*J-z*C*W+B*U*W+H*C*E-B*G*E)*N,A[2]=(q*U*J-z*K*J+z*C*Y-B*U*Y-q*C*E+B*K*E)*N,A[3]=(H*K*J-q*G*J-H*C*Y+B*G*Y+q*C*W-B*K*W)*N,A[4]=L*N,A[5]=(Z*U*J-F*G*J+F*C*W-Q*U*W-Z*C*E+Q*G*E)*N,A[6]=(F*K*J-I*U*J-F*C*Y+Q*U*Y+I*C*E-Q*K*E)*N,A[7]=(I*G*J-Z*K*J+Z*C*Y-Q*G*Y-I*C*W+Q*K*W)*N,A[8]=X*N,A[9]=(F*H*J-Z*z*J-F*B*W+Q*z*W+Z*B*E-Q*H*E)*N,A[10]=(I*z*J-F*q*J+F*B*Y-Q*z*Y-I*B*E+Q*q*E)*N,A[11]=(Z*q*J-I*H*J-Z*B*Y+Q*H*Y+I*B*W-Q*q*W)*N,A[12]=V*N,A[13]=(Z*z*C-F*H*C+F*B*G-Q*z*G-Z*B*U+Q*H*U)*N,A[14]=(F*q*C-I*z*C-F*B*K+Q*z*K+I*B*U-Q*q*U)*N,A[15]=(I*H*C-Z*q*C+Z*B*K-Q*H*K-I*B*G+Q*q*G)*N,this}scale(A){let Q=this.elements,B=A.x,C=A.y,J=A.z;return Q[0]*=B,Q[4]*=C,Q[8]*=J,Q[1]*=B,Q[5]*=C,Q[9]*=J,Q[2]*=B,Q[6]*=C,Q[10]*=J,Q[3]*=B,Q[7]*=C,Q[11]*=J,this}getMaxScaleOnAxis(){let A=this.elements,Q=A[0]*A[0]+A[1]*A[1]+A[2]*A[2],B=A[4]*A[4]+A[5]*A[5]+A[6]*A[6],C=A[8]*A[8]+A[9]*A[9]+A[10]*A[10];return Math.sqrt(Math.max(Q,B,C))}makeTranslation(A,Q,B){if(A.isVector3)this.set(1,0,0,A.x,0,1,0,A.y,0,0,1,A.z,0,0,0,1);else this.set(1,0,0,A,0,1,0,Q,0,0,1,B,0,0,0,1);return this}makeRotationX(A){let Q=Math.cos(A),B=Math.sin(A);return this.set(1,0,0,0,0,Q,-B,0,0,B,Q,0,0,0,0,1),this}makeRotationY(A){let Q=Math.cos(A),B=Math.sin(A);return this.set(Q,0,B,0,0,1,0,0,-B,0,Q,0,0,0,0,1),this}makeRotationZ(A){let Q=Math.cos(A),B=Math.sin(A);return this.set(Q,-B,0,0,B,Q,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(A,Q){let B=Math.cos(Q),C=Math.sin(Q),J=1-B,I=A.x,q=A.y,K=A.z,Y=J*I,Z=J*q;return this.set(Y*I+B,Y*q-C*K,Y*K+C*q,0,Y*q+C*K,Z*q+B,Z*K-C*I,0,Y*K-C*q,Z*K+C*I,J*K*K+B,0,0,0,0,1),this}makeScale(A,Q,B){return this.set(A,0,0,0,0,Q,0,0,0,0,B,0,0,0,0,1),this}makeShear(A,Q,B,C,J,I){return this.set(1,B,J,0,A,1,I,0,Q,C,1,0,0,0,0,1),this}compose(A,Q,B){let C=this.elements,J=Q._x,I=Q._y,q=Q._z,K=Q._w,Y=J+J,Z=I+I,H=q+q,G=J*Y,W=J*Z,F=J*H,z=I*Z,U=I*H,E=q*H,w=K*Y,L=K*Z,X=K*H,V=B.x,D=B.y,N=B.z;return C[0]=(1-(z+E))*V,C[1]=(W+X)*V,C[2]=(F-L)*V,C[3]=0,C[4]=(W-X)*D,C[5]=(1-(G+E))*D,C[6]=(U+w)*D,C[7]=0,C[8]=(F+L)*N,C[9]=(U-w)*N,C[10]=(1-(G+z))*N,C[11]=0,C[12]=A.x,C[13]=A.y,C[14]=A.z,C[15]=1,this}decompose(A,Q,B){let C=this.elements,J=U7.set(C[0],C[1],C[2]).length(),I=U7.set(C[4],C[5],C[6]).length(),q=U7.set(C[8],C[9],C[10]).length();if(this.determinant()<0)J=-J;A.x=C[12],A.y=C[13],A.z=C[14],I4.copy(this);let Y=1/J,Z=1/I,H=1/q;return I4.elements[0]*=Y,I4.elements[1]*=Y,I4.elements[2]*=Y,I4.elements[4]*=Z,I4.elements[5]*=Z,I4.elements[6]*=Z,I4.elements[8]*=H,I4.elements[9]*=H,I4.elements[10]*=H,Q.setFromRotationMatrix(I4),B.x=J,B.y=I,B.z=q,this}makePerspective(A,Q,B,C,J,I,q=2000){let K=this.elements,Y=2*J/(Q-A),Z=2*J/(B-C),H=(Q+A)/(Q-A),G=(B+C)/(B-C),W,F;if(q===2000)W=-(I+J)/(I-J),F=-2*I*J/(I-J);else if(q===2001)W=-I/(I-J),F=-I*J/(I-J);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+q);return K[0]=Y,K[4]=0,K[8]=H,K[12]=0,K[1]=0,K[5]=Z,K[9]=G,K[13]=0,K[2]=0,K[6]=0,K[10]=W,K[14]=F,K[3]=0,K[7]=0,K[11]=-1,K[15]=0,this}makeOrthographic(A,Q,B,C,J,I,q=2000){let K=this.elements,Y=1/(Q-A),Z=1/(B-C),H=1/(I-J),G=(Q+A)*Y,W=(B+C)*Z,F,z;if(q===2000)F=(I+J)*H,z=-2*H;else if(q===2001)F=J*H,z=-1*H;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+q);return K[0]=2*Y,K[4]=0,K[8]=0,K[12]=-G,K[1]=0,K[5]=2*Z,K[9]=0,K[13]=-W,K[2]=0,K[6]=0,K[10]=z,K[14]=-F,K[3]=0,K[7]=0,K[11]=0,K[15]=1,this}equals(A){let Q=this.elements,B=A.elements;for(let C=0;C<16;C++)if(Q[C]!==B[C])return!1;return!0}fromArray(A,Q=0){for(let B=0;B<16;B++)this.elements[B]=A[B+Q];return this}toArray(A=[],Q=0){let B=this.elements;return A[Q]=B[0],A[Q+1]=B[1],A[Q+2]=B[2],A[Q+3]=B[3],A[Q+4]=B[4],A[Q+5]=B[5],A[Q+6]=B[6],A[Q+7]=B[7],A[Q+8]=B[8],A[Q+9]=B[9],A[Q+10]=B[10],A[Q+11]=B[11],A[Q+12]=B[12],A[Q+13]=B[13],A[Q+14]=B[14],A[Q+15]=B[15],A}}var U7=new p,I4=new h0,Rj=new p(0,0,0),Lj=new p(1,1,1),e3=new p,ZJ=new p,$A=new p,oz=new h0,az=new n1;class VA{constructor(A=0,Q=0,B=0,C=VA.DEFAULT_ORDER){this.isEuler=!0,this._x=A,this._y=Q,this._z=B,this._order=C}get x(){return this._x}set x(A){this._x=A,this._onChangeCallback()}get y(){return this._y}set y(A){this._y=A,this._onChangeCallback()}get z(){return this._z}set z(A){this._z=A,this._onChangeCallback()}get order(){return this._order}set order(A){this._order=A,this._onChangeCallback()}set(A,Q,B,C=this._order){return this._x=A,this._y=Q,this._z=B,this._order=C,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(A){return this._x=A._x,this._y=A._y,this._z=A._z,this._order=A._order,this._onChangeCallback(),this}setFromRotationMatrix(A,Q=this._order,B=!0){let C=A.elements,J=C[0],I=C[4],q=C[8],K=C[1],Y=C[5],Z=C[9],H=C[2],G=C[6],W=C[10];switch(Q){case"XYZ":if(this._y=Math.asin(L2(q,-1,1)),Math.abs(q)<0.9999999)this._x=Math.atan2(-Z,W),this._z=Math.atan2(-I,J);else this._x=Math.atan2(G,Y),this._z=0;break;case"YXZ":if(this._x=Math.asin(-L2(Z,-1,1)),Math.abs(Z)<0.9999999)this._y=Math.atan2(q,W),this._z=Math.atan2(K,Y);else this._y=Math.atan2(-H,J),this._z=0;break;case"ZXY":if(this._x=Math.asin(L2(G,-1,1)),Math.abs(G)<0.9999999)this._y=Math.atan2(-H,W),this._z=Math.atan2(-I,Y);else this._y=0,this._z=Math.atan2(K,J);break;case"ZYX":if(this._y=Math.asin(-L2(H,-1,1)),Math.abs(H)<0.9999999)this._x=Math.atan2(G,W),this._z=Math.atan2(K,J);else this._x=0,this._z=Math.atan2(-I,Y);break;case"YZX":if(this._z=Math.asin(L2(K,-1,1)),Math.abs(K)<0.9999999)this._x=Math.atan2(-Z,Y),this._y=Math.atan2(-H,J);else this._x=0,this._y=Math.atan2(q,W);break;case"XZY":if(this._z=Math.asin(-L2(I,-1,1)),Math.abs(I)<0.9999999)this._x=Math.atan2(G,Y),this._y=Math.atan2(q,J);else this._x=Math.atan2(-Z,W),this._y=0;break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+Q)}if(this._order=Q,B===!0)this._onChangeCallback();return this}setFromQuaternion(A,Q,B){return oz.makeRotationFromQuaternion(A),this.setFromRotationMatrix(oz,Q,B)}setFromVector3(A,Q=this._order){return this.set(A.x,A.y,A.z,Q)}reorder(A){return az.setFromEuler(this),this.setFromQuaternion(az,A)}equals(A){return A._x===this._x&&A._y===this._y&&A._z===this._z&&A._order===this._order}fromArray(A){if(this._x=A[0],this._y=A[1],this._z=A[2],A[3]!==void 0)this._order=A[3];return this._onChangeCallback(),this}toArray(A=[],Q=0){return A[Q]=this._x,A[Q+1]=this._y,A[Q+2]=this._z,A[Q+3]=this._order,A}_onChange(A){return this._onChangeCallback=A,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}VA.DEFAULT_ORDER="XYZ";class bJ{constructor(){this.mask=1}set(A){this.mask=(1<<A|0)>>>0}enable(A){this.mask|=1<<A|0}enableAll(){this.mask=-1}toggle(A){this.mask^=1<<A|0}disable(A){this.mask&=~(1<<A|0)}disableAll(){this.mask=0}test(A){return(this.mask&A.mask)!==0}isEnabled(A){return(this.mask&(1<<A|0))!==0}}var Mj=0,rz=new p,z7=new n1,W3=new h0,HJ=new p,i9=new p,Oj=new p,kj=new n1,tz=new p(1,0,0),ez=new p(0,1,0),AD=new p(0,0,1),Pj={type:"added"},_j={type:"removed"},EZ={type:"childadded",child:null},wZ={type:"childremoved",child:null};class L1 extends O2{constructor(){super();this.isObject3D=!0,Object.defineProperty(this,"id",{value:Mj++}),this.uuid=Y4(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=L1.DEFAULT_UP.clone();let A=new p,Q=new VA,B=new n1,C=new p(1,1,1);function J(){B.setFromEuler(Q,!1)}function I(){Q.setFromQuaternion(B,void 0,!1)}Q._onChange(J),B._onChange(I),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:A},rotation:{configurable:!0,enumerable:!0,value:Q},quaternion:{configurable:!0,enumerable:!0,value:B},scale:{configurable:!0,enumerable:!0,value:C},modelViewMatrix:{value:new h0},normalMatrix:{value:new n0}}),this.matrix=new h0,this.matrixWorld=new h0,this.matrixAutoUpdate=L1.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=L1.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new bJ,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(A){if(this.matrixAutoUpdate)this.updateMatrix();this.matrix.premultiply(A),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(A){return this.quaternion.premultiply(A),this}setRotationFromAxisAngle(A,Q){this.quaternion.setFromAxisAngle(A,Q)}setRotationFromEuler(A){this.quaternion.setFromEuler(A,!0)}setRotationFromMatrix(A){this.quaternion.setFromRotationMatrix(A)}setRotationFromQuaternion(A){this.quaternion.copy(A)}rotateOnAxis(A,Q){return z7.setFromAxisAngle(A,Q),this.quaternion.multiply(z7),this}rotateOnWorldAxis(A,Q){return z7.setFromAxisAngle(A,Q),this.quaternion.premultiply(z7),this}rotateX(A){return this.rotateOnAxis(tz,A)}rotateY(A){return this.rotateOnAxis(ez,A)}rotateZ(A){return this.rotateOnAxis(AD,A)}translateOnAxis(A,Q){return rz.copy(A).applyQuaternion(this.quaternion),this.position.add(rz.multiplyScalar(Q)),this}translateX(A){return this.translateOnAxis(tz,A)}translateY(A){return this.translateOnAxis(ez,A)}translateZ(A){return this.translateOnAxis(AD,A)}localToWorld(A){return this.updateWorldMatrix(!0,!1),A.applyMatrix4(this.matrixWorld)}worldToLocal(A){return this.updateWorldMatrix(!0,!1),A.applyMatrix4(W3.copy(this.matrixWorld).invert())}lookAt(A,Q,B){if(A.isVector3)HJ.copy(A);else HJ.set(A,Q,B);let C=this.parent;if(this.updateWorldMatrix(!0,!1),i9.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight)W3.lookAt(i9,HJ,this.up);else W3.lookAt(HJ,i9,this.up);if(this.quaternion.setFromRotationMatrix(W3),C)W3.extractRotation(C.matrixWorld),z7.setFromRotationMatrix(W3),this.quaternion.premultiply(z7.invert())}add(A){if(arguments.length>1){for(let Q=0;Q<arguments.length;Q++)this.add(arguments[Q]);return this}if(A===this)return console.error("THREE.Object3D.add: object can\'t be added as a child of itself.",A),this;if(A&&A.isObject3D){if(A.parent!==null)A.parent.remove(A);A.parent=this,this.children.push(A),A.dispatchEvent(Pj),EZ.child=A,this.dispatchEvent(EZ),EZ.child=null}else console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",A);return this}remove(A){if(arguments.length>1){for(let B=0;B<arguments.length;B++)this.remove(arguments[B]);return this}let Q=this.children.indexOf(A);if(Q!==-1)A.parent=null,this.children.splice(Q,1),A.dispatchEvent(_j),wZ.child=A,this.dispatchEvent(wZ),wZ.child=null;return this}removeFromParent(){let A=this.parent;if(A!==null)A.remove(this);return this}clear(){return this.remove(...this.children)}attach(A){if(this.updateWorldMatrix(!0,!1),W3.copy(this.matrixWorld).invert(),A.parent!==null)A.parent.updateWorldMatrix(!0,!1),W3.multiply(A.parent.matrixWorld);return A.applyMatrix4(W3),this.add(A),A.updateWorldMatrix(!1,!0),this}getObjectById(A){return this.getObjectByProperty("id",A)}getObjectByName(A){return this.getObjectByProperty("name",A)}getObjectByProperty(A,Q){if(this[A]===Q)return this;for(let B=0,C=this.children.length;B<C;B++){let I=this.children[B].getObjectByProperty(A,Q);if(I!==void 0)return I}return}getObjectsByProperty(A,Q,B=[]){if(this[A]===Q)B.push(this);let C=this.children;for(let J=0,I=C.length;J<I;J++)C[J].getObjectsByProperty(A,Q,B);return B}getWorldPosition(A){return this.updateWorldMatrix(!0,!1),A.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(A){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(i9,A,Oj),A}getWorldScale(A){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(i9,kj,A),A}getWorldDirection(A){this.updateWorldMatrix(!0,!1);let Q=this.matrixWorld.elements;return A.set(Q[8],Q[9],Q[10]).normalize()}raycast(){}traverse(A){A(this);let Q=this.children;for(let B=0,C=Q.length;B<C;B++)Q[B].traverse(A)}traverseVisible(A){if(this.visible===!1)return;A(this);let Q=this.children;for(let B=0,C=Q.length;B<C;B++)Q[B].traverseVisible(A)}traverseAncestors(A){let Q=this.parent;if(Q!==null)A(Q),Q.traverseAncestors(A)}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(A){if(this.matrixAutoUpdate)this.updateMatrix();if(this.matrixWorldNeedsUpdate||A){if(this.parent===null)this.matrixWorld.copy(this.matrix);else this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix);this.matrixWorldNeedsUpdate=!1,A=!0}let Q=this.children;for(let B=0,C=Q.length;B<C;B++){let J=Q[B];if(J.matrixWorldAutoUpdate===!0||A===!0)J.updateMatrixWorld(A)}}updateWorldMatrix(A,Q){let B=this.parent;if(A===!0&&B!==null&&B.matrixWorldAutoUpdate===!0)B.updateWorldMatrix(!0,!1);if(this.matrixAutoUpdate)this.updateMatrix();if(this.parent===null)this.matrixWorld.copy(this.matrix);else this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix);if(Q===!0){let C=this.children;for(let J=0,I=C.length;J<I;J++){let q=C[J];if(q.matrixWorldAutoUpdate===!0)q.updateWorldMatrix(!1,!0)}}}toJSON(A){let Q=A===void 0||typeof A==="string",B={};if(Q)A={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},B.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"};let C={};if(C.uuid=this.uuid,C.type=this.type,this.name!=="")C.name=this.name;if(this.castShadow===!0)C.castShadow=!0;if(this.receiveShadow===!0)C.receiveShadow=!0;if(this.visible===!1)C.visible=!1;if(this.frustumCulled===!1)C.frustumCulled=!1;if(this.renderOrder!==0)C.renderOrder=this.renderOrder;if(Object.keys(this.userData).length>0)C.userData=this.userData;if(C.layers=this.layers.mask,C.matrix=this.matrix.toArray(),C.up=this.up.toArray(),this.matrixAutoUpdate===!1)C.matrixAutoUpdate=!1;if(this.isInstancedMesh){if(C.type="InstancedMesh",C.count=this.count,C.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null)C.instanceColor=this.instanceColor.toJSON()}if(this.isBatchedMesh){if(C.type="BatchedMesh",C.perObjectFrustumCulled=this.perObjectFrustumCulled,C.sortObjects=this.sortObjects,C.drawRanges=this._drawRanges,C.reservedRanges=this._reservedRanges,C.visibility=this._visibility,C.active=this._active,C.bounds=this._bounds.map((q)=>({boxInitialized:q.boxInitialized,boxMin:q.box.min.toArray(),boxMax:q.box.max.toArray(),sphereInitialized:q.sphereInitialized,sphereRadius:q.sphere.radius,sphereCenter:q.sphere.center.toArray()})),C.maxGeometryCount=this._maxGeometryCount,C.maxVertexCount=this._maxVertexCount,C.maxIndexCount=this._maxIndexCount,C.geometryInitialized=this._geometryInitialized,C.geometryCount=this._geometryCount,C.matricesTexture=this._matricesTexture.toJSON(A),this.boundingSphere!==null)C.boundingSphere={center:C.boundingSphere.center.toArray(),radius:C.boundingSphere.radius};if(this.boundingBox!==null)C.boundingBox={min:C.boundingBox.min.toArray(),max:C.boundingBox.max.toArray()}}function J(q,K){if(q[K.uuid]===void 0)q[K.uuid]=K.toJSON(A);return K.uuid}if(this.isScene){if(this.background){if(this.background.isColor)C.background=this.background.toJSON();else if(this.background.isTexture)C.background=this.background.toJSON(A).uuid}if(this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0)C.environment=this.environment.toJSON(A).uuid}else if(this.isMesh||this.isLine||this.isPoints){C.geometry=J(A.geometries,this.geometry);let q=this.geometry.parameters;if(q!==void 0&&q.shapes!==void 0){let K=q.shapes;if(Array.isArray(K))for(let Y=0,Z=K.length;Y<Z;Y++){let H=K[Y];J(A.shapes,H)}else J(A.shapes,K)}}if(this.isSkinnedMesh){if(C.bindMode=this.bindMode,C.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0)J(A.skeletons,this.skeleton),C.skeleton=this.skeleton.uuid}if(this.material!==void 0)if(Array.isArray(this.material)){let q=[];for(let K=0,Y=this.material.length;K<Y;K++)q.push(J(A.materials,this.material[K]));C.material=q}else C.material=J(A.materials,this.material);if(this.children.length>0){C.children=[];for(let q=0;q<this.children.length;q++)C.children.push(this.children[q].toJSON(A).object)}if(this.animations.length>0){C.animations=[];for(let q=0;q<this.animations.length;q++){let K=this.animations[q];C.animations.push(J(A.animations,K))}}if(Q){let q=I(A.geometries),K=I(A.materials),Y=I(A.textures),Z=I(A.images),H=I(A.shapes),G=I(A.skeletons),W=I(A.animations),F=I(A.nodes);if(q.length>0)B.geometries=q;if(K.length>0)B.materials=K;if(Y.length>0)B.textures=Y;if(Z.length>0)B.images=Z;if(H.length>0)B.shapes=H;if(G.length>0)B.skeletons=G;if(W.length>0)B.animations=W;if(F.length>0)B.nodes=F}return B.object=C,B;function I(q){let K=[];for(let Y in q){let Z=q[Y];delete Z.metadata,K.push(Z)}return K}}clone(A){return new this.constructor().copy(this,A)}copy(A,Q=!0){if(this.name=A.name,this.up.copy(A.up),this.position.copy(A.position),this.rotation.order=A.rotation.order,this.quaternion.copy(A.quaternion),this.scale.copy(A.scale),this.matrix.copy(A.matrix),this.matrixWorld.copy(A.matrixWorld),this.matrixAutoUpdate=A.matrixAutoUpdate,this.matrixWorldAutoUpdate=A.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=A.matrixWorldNeedsUpdate,this.layers.mask=A.layers.mask,this.visible=A.visible,this.castShadow=A.castShadow,this.receiveShadow=A.receiveShadow,this.frustumCulled=A.frustumCulled,this.renderOrder=A.renderOrder,this.animations=A.animations.slice(),this.userData=JSON.parse(JSON.stringify(A.userData)),Q===!0)for(let B=0;B<A.children.length;B++){let C=A.children[B];this.add(C.clone())}return this}}L1.DEFAULT_UP=new p(0,1,0);L1.DEFAULT_MATRIX_AUTO_UPDATE=!0;L1.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var q4=new p,F3=new p,NZ=new p,V3=new p,D7=new p,E7=new p,QD=new p,$Z=new p,RZ=new p,LZ=new p;class FA{constructor(A=new p,Q=new p,B=new p){this.a=A,this.b=Q,this.c=B}static getNormal(A,Q,B,C){C.subVectors(B,Q),q4.subVectors(A,Q),C.cross(q4);let J=C.lengthSq();if(J>0)return C.multiplyScalar(1/Math.sqrt(J));return C.set(0,0,0)}static getBarycoord(A,Q,B,C,J){q4.subVectors(C,Q),F3.subVectors(B,Q),NZ.subVectors(A,Q);let I=q4.dot(q4),q=q4.dot(F3),K=q4.dot(NZ),Y=F3.dot(F3),Z=F3.dot(NZ),H=I*Y-q*q;if(H===0)return J.set(0,0,0),null;let G=1/H,W=(Y*K-q*Z)*G,F=(I*Z-q*K)*G;return J.set(1-W-F,F,W)}static containsPoint(A,Q,B,C){if(this.getBarycoord(A,Q,B,C,V3)===null)return!1;return V3.x>=0&&V3.y>=0&&V3.x+V3.y<=1}static getInterpolation(A,Q,B,C,J,I,q,K){if(this.getBarycoord(A,Q,B,C,V3)===null){if(K.x=0,K.y=0,"z"in K)K.z=0;if("w"in K)K.w=0;return null}return K.setScalar(0),K.addScaledVector(J,V3.x),K.addScaledVector(I,V3.y),K.addScaledVector(q,V3.z),K}static isFrontFacing(A,Q,B,C){return q4.subVectors(B,Q),F3.subVectors(A,Q),q4.cross(F3).dot(C)<0?!0:!1}set(A,Q,B){return this.a.copy(A),this.b.copy(Q),this.c.copy(B),this}setFromPointsAndIndices(A,Q,B,C){return this.a.copy(A[Q]),this.b.copy(A[B]),this.c.copy(A[C]),this}setFromAttributeAndIndices(A,Q,B,C){return this.a.fromBufferAttribute(A,Q),this.b.fromBufferAttribute(A,B),this.c.fromBufferAttribute(A,C),this}clone(){return new this.constructor().copy(this)}copy(A){return this.a.copy(A.a),this.b.copy(A.b),this.c.copy(A.c),this}getArea(){return q4.subVectors(this.c,this.b),F3.subVectors(this.a,this.b),q4.cross(F3).length()*0.5}getMidpoint(A){return A.addVectors(this.a,this.b).add(this.c).multiplyScalar(0.3333333333333333)}getNormal(A){return FA.getNormal(this.a,this.b,this.c,A)}getPlane(A){return A.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(A,Q){return FA.getBarycoord(A,this.a,this.b,this.c,Q)}getInterpolation(A,Q,B,C,J){return FA.getInterpolation(A,this.a,this.b,this.c,Q,B,C,J)}containsPoint(A){return FA.containsPoint(A,this.a,this.b,this.c)}isFrontFacing(A){return FA.isFrontFacing(this.a,this.b,this.c,A)}intersectsBox(A){return A.intersectsTriangle(this)}closestPointToPoint(A,Q){let B=this.a,C=this.b,J=this.c,I,q;D7.subVectors(C,B),E7.subVectors(J,B),$Z.subVectors(A,B);let K=D7.dot($Z),Y=E7.dot($Z);if(K<=0&&Y<=0)return Q.copy(B);RZ.subVectors(A,C);let Z=D7.dot(RZ),H=E7.dot(RZ);if(Z>=0&&H<=Z)return Q.copy(C);let G=K*H-Z*Y;if(G<=0&&K>=0&&Z<=0)return I=K/(K-Z),Q.copy(B).addScaledVector(D7,I);LZ.subVectors(A,J);let W=D7.dot(LZ),F=E7.dot(LZ);if(F>=0&&W<=F)return Q.copy(J);let z=W*Y-K*F;if(z<=0&&Y>=0&&F<=0)return q=Y/(Y-F),Q.copy(B).addScaledVector(E7,q);let U=Z*F-W*H;if(U<=0&&H-Z>=0&&W-F>=0)return QD.subVectors(J,C),q=(H-Z)/(H-Z+(W-F)),Q.copy(C).addScaledVector(QD,q);let E=1/(U+z+G);return I=z*E,q=G*E,Q.copy(B).addScaledVector(D7,I).addScaledVector(E7,q)}equals(A){return A.a.equals(this.a)&&A.b.equals(this.b)&&A.c.equals(this.c)}}var wE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},A6={h:0,s:0,l:0},XJ={h:0,s:0,l:0};function MZ(A,Q,B){if(B<0)B+=1;if(B>1)B-=1;if(B<0.16666666666666666)return A+(Q-A)*6*B;if(B<0.5)return Q;if(B<0.6666666666666666)return A+(Q-A)*6*(0.6666666666666666-B);return A}class p0{constructor(A,Q,B){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(A,Q,B)}set(A,Q,B){if(Q===void 0&&B===void 0){let C=A;if(C&&C.isColor)this.copy(C);else if(typeof C==="number")this.setHex(C);else if(typeof C==="string")this.setStyle(C)}else this.setRGB(A,Q,B);return this}setScalar(A){return this.r=A,this.g=A,this.b=A,this}setHex(A,Q="srgb"){return A=Math.floor(A),this.r=(A>>16&255)/255,this.g=(A>>8&255)/255,this.b=(A&255)/255,O1.toWorkingColorSpace(this,Q),this}setRGB(A,Q,B,C=O1.workingColorSpace){return this.r=A,this.g=Q,this.b=B,O1.toWorkingColorSpace(this,C),this}setHSL(A,Q,B,C=O1.workingColorSpace){if(A=sZ(A,1),Q=L2(Q,0,1),B=L2(B,0,1),Q===0)this.r=this.g=this.b=B;else{let J=B<=0.5?B*(1+Q):B+Q-B*Q,I=2*B-J;this.r=MZ(I,J,A+0.3333333333333333),this.g=MZ(I,J,A),this.b=MZ(I,J,A-0.3333333333333333)}return O1.toWorkingColorSpace(this,C),this}setStyle(A,Q="srgb"){function B(J){if(J===void 0)return;if(parseFloat(J)<1)console.warn("THREE.Color: Alpha component of "+A+" will be ignored.")}let C;if(C=/^(\w+)\(([^\)]*)\)/.exec(A)){let J,I=C[1],q=C[2];switch(I){case"rgb":case"rgba":if(J=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(q))return B(J[4]),this.setRGB(Math.min(255,parseInt(J[1],10))/255,Math.min(255,parseInt(J[2],10))/255,Math.min(255,parseInt(J[3],10))/255,Q);if(J=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(q))return B(J[4]),this.setRGB(Math.min(100,parseInt(J[1],10))/100,Math.min(100,parseInt(J[2],10))/100,Math.min(100,parseInt(J[3],10))/100,Q);break;case"hsl":case"hsla":if(J=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(q))return B(J[4]),this.setHSL(parseFloat(J[1])/360,parseFloat(J[2])/100,parseFloat(J[3])/100,Q);break;default:console.warn("THREE.Color: Unknown color model "+A)}}else if(C=/^\#([A-Fa-f\d]+)$/.exec(A)){let J=C[1],I=J.length;if(I===3)return this.setRGB(parseInt(J.charAt(0),16)/15,parseInt(J.charAt(1),16)/15,parseInt(J.charAt(2),16)/15,Q);else if(I===6)return this.setHex(parseInt(J,16),Q);else console.warn("THREE.Color: Invalid hex color "+A)}else if(A&&A.length>0)return this.setColorName(A,Q);return this}setColorName(A,Q="srgb"){let B=wE[A.toLowerCase()];if(B!==void 0)this.setHex(B,Q);else console.warn("THREE.Color: Unknown color "+A);return this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(A){return this.r=A.r,this.g=A.g,this.b=A.b,this}copySRGBToLinear(A){return this.r=T7(A.r),this.g=T7(A.g),this.b=T7(A.b),this}copyLinearToSRGB(A){return this.r=XZ(A.r),this.g=XZ(A.g),this.b=XZ(A.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(A="srgb"){return O1.fromWorkingColorSpace(v2.copy(this),A),Math.round(L2(v2.r*255,0,255))*65536+Math.round(L2(v2.g*255,0,255))*256+Math.round(L2(v2.b*255,0,255))}getHexString(A="srgb"){return("000000"+this.getHex(A).toString(16)).slice(-6)}getHSL(A,Q=O1.workingColorSpace){O1.fromWorkingColorSpace(v2.copy(this),Q);let{r:B,g:C,b:J}=v2,I=Math.max(B,C,J),q=Math.min(B,C,J),K,Y,Z=(q+I)/2;if(q===I)K=0,Y=0;else{let H=I-q;switch(Y=Z<=0.5?H/(I+q):H/(2-I-q),I){case B:K=(C-J)/H+(C<J?6:0);break;case C:K=(J-B)/H+2;break;case J:K=(B-C)/H+4;break}K/=6}return A.h=K,A.s=Y,A.l=Z,A}getRGB(A,Q=O1.workingColorSpace){return O1.fromWorkingColorSpace(v2.copy(this),Q),A.r=v2.r,A.g=v2.g,A.b=v2.b,A}getStyle(A="srgb"){O1.fromWorkingColorSpace(v2.copy(this),A);let{r:Q,g:B,b:C}=v2;if(A!=="srgb")return`color(${A} ${Q.toFixed(3)} ${B.toFixed(3)} ${C.toFixed(3)})`;return`rgb(${Math.round(Q*255)},${Math.round(B*255)},${Math.round(C*255)})`}offsetHSL(A,Q,B){return this.getHSL(A6),this.setHSL(A6.h+A,A6.s+Q,A6.l+B)}add(A){return this.r+=A.r,this.g+=A.g,this.b+=A.b,this}addColors(A,Q){return this.r=A.r+Q.r,this.g=A.g+Q.g,this.b=A.b+Q.b,this}addScalar(A){return this.r+=A,this.g+=A,this.b+=A,this}sub(A){return this.r=Math.max(0,this.r-A.r),this.g=Math.max(0,this.g-A.g),this.b=Math.max(0,this.b-A.b),this}multiply(A){return this.r*=A.r,this.g*=A.g,this.b*=A.b,this}multiplyScalar(A){return this.r*=A,this.g*=A,this.b*=A,this}lerp(A,Q){return this.r+=(A.r-this.r)*Q,this.g+=(A.g-this.g)*Q,this.b+=(A.b-this.b)*Q,this}lerpColors(A,Q,B){return this.r=A.r+(Q.r-A.r)*B,this.g=A.g+(Q.g-A.g)*B,this.b=A.b+(Q.b-A.b)*B,this}lerpHSL(A,Q){this.getHSL(A6),A.getHSL(XJ);let B=e9(A6.h,XJ.h,Q),C=e9(A6.s,XJ.s,Q),J=e9(A6.l,XJ.l,Q);return this.setHSL(B,C,J),this}setFromVector3(A){return this.r=A.x,this.g=A.y,this.b=A.z,this}applyMatrix3(A){let Q=this.r,B=this.g,C=this.b,J=A.elements;return this.r=J[0]*Q+J[3]*B+J[6]*C,this.g=J[1]*Q+J[4]*B+J[7]*C,this.b=J[2]*Q+J[5]*B+J[8]*C,this}equals(A){return A.r===this.r&&A.g===this.g&&A.b===this.b}fromArray(A,Q=0){return this.r=A[Q],this.g=A[Q+1],this.b=A[Q+2],this}toArray(A=[],Q=0){return A[Q]=this.r,A[Q+1]=this.g,A[Q+2]=this.b,A}fromBufferAttribute(A,Q){return this.r=A.getX(Q),this.g=A.getY(Q),this.b=A.getZ(Q),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}var v2=new p0;p0.NAMES=wE;var Tj=0;class UA extends O2{constructor(){super();this.isMaterial=!0,Object.defineProperty(this,"id",{value:Tj++}),this.uuid=Y4(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new p0(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(A){if(this._alphaTest>0!==A>0)this.version++;this._alphaTest=A}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(A){if(A===void 0)return;for(let Q in A){let B=A[Q];if(B===void 0){console.warn(`THREE.Material: parameter '${Q}' has value of undefined.`);continue}let C=this[Q];if(C===void 0){console.warn(`THREE.Material: '${Q}' is not a property of THREE.${this.type}.`);continue}if(C&&C.isColor)C.set(B);else if(C&&C.isVector3&&(B&&B.isVector3))C.copy(B);else this[Q]=B}}toJSON(A){let Q=A===void 0||typeof A==="string";if(Q)A={textures:{},images:{}};let B={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};if(B.uuid=this.uuid,B.type=this.type,this.name!=="")B.name=this.name;if(this.color&&this.color.isColor)B.color=this.color.getHex();if(this.roughness!==void 0)B.roughness=this.roughness;if(this.metalness!==void 0)B.metalness=this.metalness;if(this.sheen!==void 0)B.sheen=this.sheen;if(this.sheenColor&&this.sheenColor.isColor)B.sheenColor=this.sheenColor.getHex();if(this.sheenRoughness!==void 0)B.sheenRoughness=this.sheenRoughness;if(this.emissive&&this.emissive.isColor)B.emissive=this.emissive.getHex();if(this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1)B.emissiveIntensity=this.emissiveIntensity;if(this.specular&&this.specular.isColor)B.specular=this.specular.getHex();if(this.specularIntensity!==void 0)B.specularIntensity=this.specularIntensity;if(this.specularColor&&this.specularColor.isColor)B.specularColor=this.specularColor.getHex();if(this.shininess!==void 0)B.shininess=this.shininess;if(this.clearcoat!==void 0)B.clearcoat=this.clearcoat;if(this.clearcoatRoughness!==void 0)B.clearcoatRoughness=this.clearcoatRoughness;if(this.clearcoatMap&&this.clearcoatMap.isTexture)B.clearcoatMap=this.clearcoatMap.toJSON(A).uuid;if(this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture)B.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(A).uuid;if(this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture)B.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(A).uuid,B.clearcoatNormalScale=this.clearcoatNormalScale.toArray();if(this.iridescence!==void 0)B.iridescence=this.iridescence;if(this.iridescenceIOR!==void 0)B.iridescenceIOR=this.iridescenceIOR;if(this.iridescenceThicknessRange!==void 0)B.iridescenceThicknessRange=this.iridescenceThicknessRange;if(this.iridescenceMap&&this.iridescenceMap.isTexture)B.iridescenceMap=this.iridescenceMap.toJSON(A).uuid;if(this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture)B.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(A).uuid;if(this.anisotropy!==void 0)B.anisotropy=this.anisotropy;if(this.anisotropyRotation!==void 0)B.anisotropyRotation=this.anisotropyRotation;if(this.anisotropyMap&&this.anisotropyMap.isTexture)B.anisotropyMap=this.anisotropyMap.toJSON(A).uuid;if(this.map&&this.map.isTexture)B.map=this.map.toJSON(A).uuid;if(this.matcap&&this.matcap.isTexture)B.matcap=this.matcap.toJSON(A).uuid;if(this.alphaMap&&this.alphaMap.isTexture)B.alphaMap=this.alphaMap.toJSON(A).uuid;if(this.lightMap&&this.lightMap.isTexture)B.lightMap=this.lightMap.toJSON(A).uuid,B.lightMapIntensity=this.lightMapIntensity;if(this.aoMap&&this.aoMap.isTexture)B.aoMap=this.aoMap.toJSON(A).uuid,B.aoMapIntensity=this.aoMapIntensity;if(this.bumpMap&&this.bumpMap.isTexture)B.bumpMap=this.bumpMap.toJSON(A).uuid,B.bumpScale=this.bumpScale;if(this.normalMap&&this.normalMap.isTexture)B.normalMap=this.normalMap.toJSON(A).uuid,B.normalMapType=this.normalMapType,B.normalScale=this.normalScale.toArray();if(this.displacementMap&&this.displacementMap.isTexture)B.displacementMap=this.displacementMap.toJSON(A).uuid,B.displacementScale=this.displacementScale,B.displacementBias=this.displacementBias;if(this.roughnessMap&&this.roughnessMap.isTexture)B.roughnessMap=this.roughnessMap.toJSON(A).uuid;if(this.metalnessMap&&this.metalnessMap.isTexture)B.metalnessMap=this.metalnessMap.toJSON(A).uuid;if(this.emissiveMap&&this.emissiveMap.isTexture)B.emissiveMap=this.emissiveMap.toJSON(A).uuid;if(this.specularMap&&this.specularMap.isTexture)B.specularMap=this.specularMap.toJSON(A).uuid;if(this.specularIntensityMap&&this.specularIntensityMap.isTexture)B.specularIntensityMap=this.specularIntensityMap.toJSON(A).uuid;if(this.specularColorMap&&this.specularColorMap.isTexture)B.specularColorMap=this.specularColorMap.toJSON(A).uuid;if(this.envMap&&this.envMap.isTexture){if(B.envMap=this.envMap.toJSON(A).uuid,this.combine!==void 0)B.combine=this.combine}if(this.envMapRotation!==void 0)B.envMapRotation=this.envMapRotation.toArray();if(this.envMapIntensity!==void 0)B.envMapIntensity=this.envMapIntensity;if(this.reflectivity!==void 0)B.reflectivity=this.reflectivity;if(this.refractionRatio!==void 0)B.refractionRatio=this.refractionRatio;if(this.gradientMap&&this.gradientMap.isTexture)B.gradientMap=this.gradientMap.toJSON(A).uuid;if(this.transmission!==void 0)B.transmission=this.transmission;if(this.transmissionMap&&this.transmissionMap.isTexture)B.transmissionMap=this.transmissionMap.toJSON(A).uuid;if(this.thickness!==void 0)B.thickness=this.thickness;if(this.thicknessMap&&this.thicknessMap.isTexture)B.thicknessMap=this.thicknessMap.toJSON(A).uuid;if(this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0)B.attenuationDistance=this.attenuationDistance;if(this.attenuationColor!==void 0)B.attenuationColor=this.attenuationColor.getHex();if(this.size!==void 0)B.size=this.size;if(this.shadowSide!==null)B.shadowSide=this.shadowSide;if(this.sizeAttenuation!==void 0)B.sizeAttenuation=this.sizeAttenuation;if(this.blending!==1)B.blending=this.blending;if(this.side!==0)B.side=this.side;if(this.vertexColors===!0)B.vertexColors=!0;if(this.opacity<1)B.opacity=this.opacity;if(this.transparent===!0)B.transparent=!0;if(this.blendSrc!==204)B.blendSrc=this.blendSrc;if(this.blendDst!==205)B.blendDst=this.blendDst;if(this.blendEquation!==100)B.blendEquation=this.blendEquation;if(this.blendSrcAlpha!==null)B.blendSrcAlpha=this.blendSrcAlpha;if(this.blendDstAlpha!==null)B.blendDstAlpha=this.blendDstAlpha;if(this.blendEquationAlpha!==null)B.blendEquationAlpha=this.blendEquationAlpha;if(this.blendColor&&this.blendColor.isColor)B.blendColor=this.blendColor.getHex();if(this.blendAlpha!==0)B.blendAlpha=this.blendAlpha;if(this.depthFunc!==3)B.depthFunc=this.depthFunc;if(this.depthTest===!1)B.depthTest=this.depthTest;if(this.depthWrite===!1)B.depthWrite=this.depthWrite;if(this.colorWrite===!1)B.colorWrite=this.colorWrite;if(this.stencilWriteMask!==255)B.stencilWriteMask=this.stencilWriteMask;if(this.stencilFunc!==519)B.stencilFunc=this.stencilFunc;if(this.stencilRef!==0)B.stencilRef=this.stencilRef;if(this.stencilFuncMask!==255)B.stencilFuncMask=this.stencilFuncMask;if(this.stencilFail!==7680)B.stencilFail=this.stencilFail;if(this.stencilZFail!==7680)B.stencilZFail=this.stencilZFail;if(this.stencilZPass!==7680)B.stencilZPass=this.stencilZPass;if(this.stencilWrite===!0)B.stencilWrite=this.stencilWrite;if(this.rotation!==void 0&&this.rotation!==0)B.rotation=this.rotation;if(this.polygonOffset===!0)B.polygonOffset=!0;if(this.polygonOffsetFactor!==0)B.polygonOffsetFactor=this.polygonOffsetFactor;if(this.polygonOffsetUnits!==0)B.polygonOffsetUnits=this.polygonOffsetUnits;if(this.linewidth!==void 0&&this.linewidth!==1)B.linewidth=this.linewidth;if(this.dashSize!==void 0)B.dashSize=this.dashSize;if(this.gapSize!==void 0)B.gapSize=this.gapSize;if(this.scale!==void 0)B.scale=this.scale;if(this.dithering===!0)B.dithering=!0;if(this.alphaTest>0)B.alphaTest=this.alphaTest;if(this.alphaHash===!0)B.alphaHash=!0;if(this.alphaToCoverage===!0)B.alphaToCoverage=!0;if(this.premultipliedAlpha===!0)B.premultipliedAlpha=!0;if(this.forceSinglePass===!0)B.forceSinglePass=!0;if(this.wireframe===!0)B.wireframe=!0;if(this.wireframeLinewidth>1)B.wireframeLinewidth=this.wireframeLinewidth;if(this.wireframeLinecap!=="round")B.wireframeLinecap=this.wireframeLinecap;if(this.wireframeLinejoin!=="round")B.wireframeLinejoin=this.wireframeLinejoin;if(this.flatShading===!0)B.flatShading=!0;if(this.visible===!1)B.visible=!1;if(this.toneMapped===!1)B.toneMapped=!1;if(this.fog===!1)B.fog=!1;if(Object.keys(this.userData).length>0)B.userData=this.userData;function C(J){let I=[];for(let q in J){let K=J[q];delete K.metadata,I.push(K)}return I}if(Q){let J=C(A.textures),I=C(A.images);if(J.length>0)B.textures=J;if(I.length>0)B.images=I}return B}clone(){return new this.constructor().copy(this)}copy(A){this.name=A.name,this.blending=A.blending,this.side=A.side,this.vertexColors=A.vertexColors,this.opacity=A.opacity,this.transparent=A.transparent,this.blendSrc=A.blendSrc,this.blendDst=A.blendDst,this.blendEquation=A.blendEquation,this.blendSrcAlpha=A.blendSrcAlpha,this.blendDstAlpha=A.blendDstAlpha,this.blendEquationAlpha=A.blendEquationAlpha,this.blendColor.copy(A.blendColor),this.blendAlpha=A.blendAlpha,this.depthFunc=A.depthFunc,this.depthTest=A.depthTest,this.depthWrite=A.depthWrite,this.stencilWriteMask=A.stencilWriteMask,this.stencilFunc=A.stencilFunc,this.stencilRef=A.stencilRef,this.stencilFuncMask=A.stencilFuncMask,this.stencilFail=A.stencilFail,this.stencilZFail=A.stencilZFail,this.stencilZPass=A.stencilZPass,this.stencilWrite=A.stencilWrite;let Q=A.clippingPlanes,B=null;if(Q!==null){let C=Q.length;B=new Array(C);for(let J=0;J!==C;++J)B[J]=Q[J].clone()}return this.clippingPlanes=B,this.clipIntersection=A.clipIntersection,this.clipShadows=A.clipShadows,this.shadowSide=A.shadowSide,this.colorWrite=A.colorWrite,this.precision=A.precision,this.polygonOffset=A.polygonOffset,this.polygonOffsetFactor=A.polygonOffsetFactor,this.polygonOffsetUnits=A.polygonOffsetUnits,this.dithering=A.dithering,this.alphaTest=A.alphaTest,this.alphaHash=A.alphaHash,this.alphaToCoverage=A.alphaToCoverage,this.premultipliedAlpha=A.premultipliedAlpha,this.forceSinglePass=A.forceSinglePass,this.visible=A.visible,this.toneMapped=A.toneMapped,this.userData=JSON.parse(JSON.stringify(A.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(A){if(A===!0)this.version++}}class t1 extends UA{constructor(A){super();this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new p0(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new VA,this.combine=0,this.reflectivity=1,this.refractionRatio=0.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(A)}copy(A){return super.copy(A),this.color.copy(A.color),this.map=A.map,this.lightMap=A.lightMap,this.lightMapIntensity=A.lightMapIntensity,this.aoMap=A.aoMap,this.aoMapIntensity=A.aoMapIntensity,this.specularMap=A.specularMap,this.alphaMap=A.alphaMap,this.envMap=A.envMap,this.envMapRotation.copy(A.envMapRotation),this.combine=A.combine,this.reflectivity=A.reflectivity,this.refractionRatio=A.refractionRatio,this.wireframe=A.wireframe,this.wireframeLinewidth=A.wireframeLinewidth,this.wireframeLinecap=A.wireframeLinecap,this.wireframeLinejoin=A.wireframeLinejoin,this.fog=A.fog,this}}var z3=jj();function jj(){let A=new ArrayBuffer(4),Q=new Float32Array(A),B=new Uint32Array(A),C=new Uint32Array(512),J=new Uint32Array(512);for(let Y=0;Y<256;++Y){let Z=Y-127;if(Z<-27)C[Y]=0,C[Y|256]=32768,J[Y]=24,J[Y|256]=24;else if(Z<-14)C[Y]=1024>>-Z-14,C[Y|256]=1024>>-Z-14|32768,J[Y]=-Z-1,J[Y|256]=-Z-1;else if(Z<=15)C[Y]=Z+15<<10,C[Y|256]=Z+15<<10|32768,J[Y]=13,J[Y|256]=13;else if(Z<128)C[Y]=31744,C[Y|256]=64512,J[Y]=24,J[Y|256]=24;else C[Y]=31744,C[Y|256]=64512,J[Y]=13,J[Y|256]=13}let I=new Uint32Array(2048),q=new Uint32Array(64),K=new Uint32Array(64);for(let Y=1;Y<1024;++Y){let Z=Y<<13,H=0;while((Z&8388608)===0)Z<<=1,H-=8388608;Z&=-8388609,H+=947912704,I[Y]=Z|H}for(let Y=1024;Y<2048;++Y)I[Y]=939524096+(Y-1024<<13);for(let Y=1;Y<31;++Y)q[Y]=Y<<23;q[31]=1199570944,q[32]=2147483648;for(let Y=33;Y<63;++Y)q[Y]=2147483648+(Y-32<<23);q[63]=3347054592;for(let Y=1;Y<64;++Y)if(Y!==32)K[Y]=1024;return{floatView:Q,uint32View:B,baseTable:C,shiftTable:J,mantissaTable:I,exponentTable:q,offsetTable:K}}function Sj(A){if(Math.abs(A)>65504)console.warn("THREE.DataUtils.toHalfFloat(): Value out of range.");A=L2(A,-65504,65504),z3.floatView[0]=A;let Q=z3.uint32View[0],B=Q>>23&511;return z3.baseTable[B]+((Q&8388607)>>z3.shiftTable[B])}function yj(A){let Q=A>>10;return z3.uint32View[0]=z3.mantissaTable[z3.offsetTable[Q]+(A&1023)]+z3.exponentTable[Q],z3.floatView[0]}var IQ={toHalfFloat:Sj,fromHalfFloat:yj},B2=new p,GJ=new M0;class T1{constructor(A,Q,B=!1){if(Array.isArray(A))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=A,this.itemSize=Q,this.count=A!==void 0?A.length/Q:0,this.normalized=B,this.usage=35044,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=1015,this.version=0}onUploadCallback(){}set needsUpdate(A){if(A===!0)this.version++}get updateRange(){return DE("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(A){return this.usage=A,this}addUpdateRange(A,Q){this.updateRanges.push({start:A,count:Q})}clearUpdateRanges(){this.updateRanges.length=0}copy(A){return this.name=A.name,this.array=new A.array.constructor(A.array),this.itemSize=A.itemSize,this.count=A.count,this.normalized=A.normalized,this.usage=A.usage,this.gpuType=A.gpuType,this}copyAt(A,Q,B){A*=this.itemSize,B*=Q.itemSize;for(let C=0,J=this.itemSize;C<J;C++)this.array[A+C]=Q.array[B+C];return this}copyArray(A){return this.array.set(A),this}applyMatrix3(A){if(this.itemSize===2)for(let Q=0,B=this.count;Q<B;Q++)GJ.fromBufferAttribute(this,Q),GJ.applyMatrix3(A),this.setXY(Q,GJ.x,GJ.y);else if(this.itemSize===3)for(let Q=0,B=this.count;Q<B;Q++)B2.fromBufferAttribute(this,Q),B2.applyMatrix3(A),this.setXYZ(Q,B2.x,B2.y,B2.z);return this}applyMatrix4(A){for(let Q=0,B=this.count;Q<B;Q++)B2.fromBufferAttribute(this,Q),B2.applyMatrix4(A),this.setXYZ(Q,B2.x,B2.y,B2.z);return this}applyNormalMatrix(A){for(let Q=0,B=this.count;Q<B;Q++)B2.fromBufferAttribute(this,Q),B2.applyNormalMatrix(A),this.setXYZ(Q,B2.x,B2.y,B2.z);return this}transformDirection(A){for(let Q=0,B=this.count;Q<B;Q++)B2.fromBufferAttribute(this,Q),B2.transformDirection(A),this.setXYZ(Q,B2.x,B2.y,B2.z);return this}set(A,Q=0){return this.array.set(A,Q),this}getComponent(A,Q){let B=this.array[A*this.itemSize+Q];if(this.normalized)B=K4(B,this.array);return B}setComponent(A,Q,B){if(this.normalized)B=j1(B,this.array);return this.array[A*this.itemSize+Q]=B,this}getX(A){let Q=this.array[A*this.itemSize];if(this.normalized)Q=K4(Q,this.array);return Q}setX(A,Q){if(this.normalized)Q=j1(Q,this.array);return this.array[A*this.itemSize]=Q,this}getY(A){let Q=this.array[A*this.itemSize+1];if(this.normalized)Q=K4(Q,this.array);return Q}setY(A,Q){if(this.normalized)Q=j1(Q,this.array);return this.array[A*this.itemSize+1]=Q,this}getZ(A){let Q=this.array[A*this.itemSize+2];if(this.normalized)Q=K4(Q,this.array);return Q}setZ(A,Q){if(this.normalized)Q=j1(Q,this.array);return this.array[A*this.itemSize+2]=Q,this}getW(A){let Q=this.array[A*this.itemSize+3];if(this.normalized)Q=K4(Q,this.array);return Q}setW(A,Q){if(this.normalized)Q=j1(Q,this.array);return this.array[A*this.itemSize+3]=Q,this}setXY(A,Q,B){if(A*=this.itemSize,this.normalized)Q=j1(Q,this.array),B=j1(B,this.array);return this.array[A+0]=Q,this.array[A+1]=B,this}setXYZ(A,Q,B,C){if(A*=this.itemSize,this.normalized)Q=j1(Q,this.array),B=j1(B,this.array),C=j1(C,this.array);return this.array[A+0]=Q,this.array[A+1]=B,this.array[A+2]=C,this}setXYZW(A,Q,B,C,J){if(A*=this.itemSize,this.normalized)Q=j1(Q,this.array),B=j1(B,this.array),C=j1(C,this.array),J=j1(J,this.array);return this.array[A+0]=Q,this.array[A+1]=B,this.array[A+2]=C,this.array[A+3]=J,this}onUpload(A){return this.onUploadCallback=A,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let A={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};if(this.name!=="")A.name=this.name;if(this.usage!==35044)A.usage=this.usage;return A}}class oZ extends T1{constructor(A,Q,B){super(new Uint16Array(A),Q,B)}}class aZ extends T1{constructor(A,Q,B){super(new Uint32Array(A),Q,B)}}class b2 extends T1{constructor(A,Q,B){super(new Float32Array(A),Q,B)}}var fj=0,gA=new h0,OZ=new L1,w7=new p,RA=new G2,n9=new G2,R2=new p;class k2 extends O2{constructor(){super();this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:fj++}),this.uuid=Y4(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(A){if(Array.isArray(A))this.index=new((zE(A))?aZ:oZ)(A,1);else this.index=A;return this}getAttribute(A){return this.attributes[A]}setAttribute(A,Q){return this.attributes[A]=Q,this}deleteAttribute(A){return delete this.attributes[A],this}hasAttribute(A){return this.attributes[A]!==void 0}addGroup(A,Q,B=0){this.groups.push({start:A,count:Q,materialIndex:B})}clearGroups(){this.groups=[]}setDrawRange(A,Q){this.drawRange.start=A,this.drawRange.count=Q}applyMatrix4(A){let Q=this.attributes.position;if(Q!==void 0)Q.applyMatrix4(A),Q.needsUpdate=!0;let B=this.attributes.normal;if(B!==void 0){let J=new n0().getNormalMatrix(A);B.applyNormalMatrix(J),B.needsUpdate=!0}let C=this.attributes.tangent;if(C!==void 0)C.transformDirection(A),C.needsUpdate=!0;if(this.boundingBox!==null)this.computeBoundingBox();if(this.boundingSphere!==null)this.computeBoundingSphere();return this}applyQuaternion(A){return gA.makeRotationFromQuaternion(A),this.applyMatrix4(gA),this}rotateX(A){return gA.makeRotationX(A),this.applyMatrix4(gA),this}rotateY(A){return gA.makeRotationY(A),this.applyMatrix4(gA),this}rotateZ(A){return gA.makeRotationZ(A),this.applyMatrix4(gA),this}translate(A,Q,B){return gA.makeTranslation(A,Q,B),this.applyMatrix4(gA),this}scale(A,Q,B){return gA.makeScale(A,Q,B),this.applyMatrix4(gA),this}lookAt(A){return OZ.lookAt(A),OZ.updateMatrix(),this.applyMatrix4(OZ.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(w7).negate(),this.translate(w7.x,w7.y,w7.z),this}setFromPoints(A){let Q=[];for(let B=0,C=A.length;B<C;B++){let J=A[B];Q.push(J.x,J.y,J.z||0)}return this.setAttribute("position",new b2(Q,3)),this}computeBoundingBox(){if(this.boundingBox===null)this.boundingBox=new G2;let A=this.attributes.position,Q=this.morphAttributes.position;if(A&&A.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new p(-1/0,-1/0,-1/0),new p(1/0,1/0,1/0));return}if(A!==void 0){if(this.boundingBox.setFromBufferAttribute(A),Q)for(let B=0,C=Q.length;B<C;B++){let J=Q[B];if(RA.setFromBufferAttribute(J),this.morphTargetsRelative)R2.addVectors(this.boundingBox.min,RA.min),this.boundingBox.expandByPoint(R2),R2.addVectors(this.boundingBox.max,RA.max),this.boundingBox.expandByPoint(R2);else this.boundingBox.expandByPoint(RA.min),this.boundingBox.expandByPoint(RA.max)}}else this.boundingBox.makeEmpty();if(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){if(this.boundingSphere===null)this.boundingSphere=new p2;let A=this.attributes.position,Q=this.morphAttributes.position;if(A&&A.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new p,1/0);return}if(A){let B=this.boundingSphere.center;if(RA.setFromBufferAttribute(A),Q)for(let J=0,I=Q.length;J<I;J++){let q=Q[J];if(n9.setFromBufferAttribute(q),this.morphTargetsRelative)R2.addVectors(RA.min,n9.min),RA.expandByPoint(R2),R2.addVectors(RA.max,n9.max),RA.expandByPoint(R2);else RA.expandByPoint(n9.min),RA.expandByPoint(n9.max)}RA.getCenter(B);let C=0;for(let J=0,I=A.count;J<I;J++)R2.fromBufferAttribute(A,J),C=Math.max(C,B.distanceToSquared(R2));if(Q)for(let J=0,I=Q.length;J<I;J++){let q=Q[J],K=this.morphTargetsRelative;for(let Y=0,Z=q.count;Y<Z;Y++){if(R2.fromBufferAttribute(q,Y),K)w7.fromBufferAttribute(A,Y),R2.add(w7);C=Math.max(C,B.distanceToSquared(R2))}}if(this.boundingSphere.radius=Math.sqrt(C),isNaN(this.boundingSphere.radius))console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let A=this.index,Q=this.attributes;if(A===null||Q.position===void 0||Q.normal===void 0||Q.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let{position:B,normal:C,uv:J}=Q;if(this.hasAttribute("tangent")===!1)this.setAttribute("tangent",new T1(new Float32Array(4*B.count),4));let I=this.getAttribute("tangent"),q=[],K=[];for(let R=0;R<B.count;R++)q[R]=new p,K[R]=new p;let Y=new p,Z=new p,H=new p,G=new M0,W=new M0,F=new M0,z=new p,U=new p;function E(R,k,P){Y.fromBufferAttribute(B,R),Z.fromBufferAttribute(B,k),H.fromBufferAttribute(B,P),G.fromBufferAttribute(J,R),W.fromBufferAttribute(J,k),F.fromBufferAttribute(J,P),Z.sub(Y),H.sub(Y),W.sub(G),F.sub(G);let $=1/(W.x*F.y-F.x*W.y);if(!isFinite($))return;z.copy(Z).multiplyScalar(F.y).addScaledVector(H,-W.y).multiplyScalar($),U.copy(H).multiplyScalar(W.x).addScaledVector(Z,-F.x).multiplyScalar($),q[R].add(z),q[k].add(z),q[P].add(z),K[R].add(U),K[k].add(U),K[P].add(U)}let w=this.groups;if(w.length===0)w=[{start:0,count:A.count}];for(let R=0,k=w.length;R<k;++R){let P=w[R],$=P.start,_=P.count;for(let h=$,S=$+_;h<S;h+=3)E(A.getX(h+0),A.getX(h+1),A.getX(h+2))}let L=new p,X=new p,V=new p,D=new p;function N(R){V.fromBufferAttribute(C,R),D.copy(V);let k=q[R];L.copy(k),L.sub(V.multiplyScalar(V.dot(k))).normalize(),X.crossVectors(D,k);let $=X.dot(K[R])<0?-1:1;I.setXYZW(R,L.x,L.y,L.z,$)}for(let R=0,k=w.length;R<k;++R){let P=w[R],$=P.start,_=P.count;for(let h=$,S=$+_;h<S;h+=3)N(A.getX(h+0)),N(A.getX(h+1)),N(A.getX(h+2))}}computeVertexNormals(){let A=this.index,Q=this.getAttribute("position");if(Q!==void 0){let B=this.getAttribute("normal");if(B===void 0)B=new T1(new Float32Array(Q.count*3),3),this.setAttribute("normal",B);else for(let G=0,W=B.count;G<W;G++)B.setXYZ(G,0,0,0);let C=new p,J=new p,I=new p,q=new p,K=new p,Y=new p,Z=new p,H=new p;if(A)for(let G=0,W=A.count;G<W;G+=3){let F=A.getX(G+0),z=A.getX(G+1),U=A.getX(G+2);C.fromBufferAttribute(Q,F),J.fromBufferAttribute(Q,z),I.fromBufferAttribute(Q,U),Z.subVectors(I,J),H.subVectors(C,J),Z.cross(H),q.fromBufferAttribute(B,F),K.fromBufferAttribute(B,z),Y.fromBufferAttribute(B,U),q.add(Z),K.add(Z),Y.add(Z),B.setXYZ(F,q.x,q.y,q.z),B.setXYZ(z,K.x,K.y,K.z),B.setXYZ(U,Y.x,Y.y,Y.z)}else for(let G=0,W=Q.count;G<W;G+=3)C.fromBufferAttribute(Q,G+0),J.fromBufferAttribute(Q,G+1),I.fromBufferAttribute(Q,G+2),Z.subVectors(I,J),H.subVectors(C,J),Z.cross(H),B.setXYZ(G+0,Z.x,Z.y,Z.z),B.setXYZ(G+1,Z.x,Z.y,Z.z),B.setXYZ(G+2,Z.x,Z.y,Z.z);this.normalizeNormals(),B.needsUpdate=!0}}normalizeNormals(){let A=this.attributes.normal;for(let Q=0,B=A.count;Q<B;Q++)R2.fromBufferAttribute(A,Q),R2.normalize(),A.setXYZ(Q,R2.x,R2.y,R2.z)}toNonIndexed(){function A(q,K){let{array:Y,itemSize:Z,normalized:H}=q,G=new Y.constructor(K.length*Z),W=0,F=0;for(let z=0,U=K.length;z<U;z++){if(q.isInterleavedBufferAttribute)W=K[z]*q.data.stride+q.offset;else W=K[z]*Z;for(let E=0;E<Z;E++)G[F++]=Y[W++]}return new T1(G,Z,H)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let Q=new k2,B=this.index.array,C=this.attributes;for(let q in C){let K=C[q],Y=A(K,B);Q.setAttribute(q,Y)}let J=this.morphAttributes;for(let q in J){let K=[],Y=J[q];for(let Z=0,H=Y.length;Z<H;Z++){let G=Y[Z],W=A(G,B);K.push(W)}Q.morphAttributes[q]=K}Q.morphTargetsRelative=this.morphTargetsRelative;let I=this.groups;for(let q=0,K=I.length;q<K;q++){let Y=I[q];Q.addGroup(Y.start,Y.count,Y.materialIndex)}return Q}toJSON(){let A={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(A.uuid=this.uuid,A.type=this.type,this.name!=="")A.name=this.name;if(Object.keys(this.userData).length>0)A.userData=this.userData;if(this.parameters!==void 0){let K=this.parameters;for(let Y in K)if(K[Y]!==void 0)A[Y]=K[Y];return A}A.data={attributes:{}};let Q=this.index;if(Q!==null)A.data.index={type:Q.array.constructor.name,array:Array.prototype.slice.call(Q.array)};let B=this.attributes;for(let K in B){let Y=B[K];A.data.attributes[K]=Y.toJSON(A.data)}let C={},J=!1;for(let K in this.morphAttributes){let Y=this.morphAttributes[K],Z=[];for(let H=0,G=Y.length;H<G;H++){let W=Y[H];Z.push(W.toJSON(A.data))}if(Z.length>0)C[K]=Z,J=!0}if(J)A.data.morphAttributes=C,A.data.morphTargetsRelative=this.morphTargetsRelative;let I=this.groups;if(I.length>0)A.data.groups=JSON.parse(JSON.stringify(I));let q=this.boundingSphere;if(q!==null)A.data.boundingSphere={center:q.center.toArray(),radius:q.radius};return A}clone(){return new this.constructor().copy(this)}copy(A){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let Q={};this.name=A.name;let B=A.index;if(B!==null)this.setIndex(B.clone(Q));let C=A.attributes;for(let Y in C){let Z=C[Y];this.setAttribute(Y,Z.clone(Q))}let J=A.morphAttributes;for(let Y in J){let Z=[],H=J[Y];for(let G=0,W=H.length;G<W;G++)Z.push(H[G].clone(Q));this.morphAttributes[Y]=Z}this.morphTargetsRelative=A.morphTargetsRelative;let I=A.groups;for(let Y=0,Z=I.length;Y<Z;Y++){let H=I[Y];this.addGroup(H.start,H.count,H.materialIndex)}let q=A.boundingBox;if(q!==null)this.boundingBox=q.clone();let K=A.boundingSphere;if(K!==null)this.boundingSphere=K.clone();return this.drawRange.start=A.drawRange.start,this.drawRange.count=A.drawRange.count,this.userData=A.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}var BD=new h0,i6=new I6,WJ=new p2,CD=new p,N7=new p,$7=new p,R7=new p,kZ=new p,FJ=new p,VJ=new M0,UJ=new M0,zJ=new M0,JD=new p,ID=new p,qD=new p,DJ=new p,EJ=new p;class A1 extends L1{constructor(A=new k2,Q=new t1){super();this.isMesh=!0,this.type="Mesh",this.geometry=A,this.material=Q,this.updateMorphTargets()}copy(A,Q){if(super.copy(A,Q),A.morphTargetInfluences!==void 0)this.morphTargetInfluences=A.morphTargetInfluences.slice();if(A.morphTargetDictionary!==void 0)this.morphTargetDictionary=Object.assign({},A.morphTargetDictionary);return this.material=Array.isArray(A.material)?A.material.slice():A.material,this.geometry=A.geometry,this}updateMorphTargets(){let Q=this.geometry.morphAttributes,B=Object.keys(Q);if(B.length>0){let C=Q[B[0]];if(C!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let J=0,I=C.length;J<I;J++){let q=C[J].name||String(J);this.morphTargetInfluences.push(0),this.morphTargetDictionary[q]=J}}}}getVertexPosition(A,Q){let B=this.geometry,C=B.attributes.position,J=B.morphAttributes.position,I=B.morphTargetsRelative;Q.fromBufferAttribute(C,A);let q=this.morphTargetInfluences;if(J&&q){FJ.set(0,0,0);for(let K=0,Y=J.length;K<Y;K++){let Z=q[K],H=J[K];if(Z===0)continue;if(kZ.fromBufferAttribute(H,A),I)FJ.addScaledVector(kZ,Z);else FJ.addScaledVector(kZ.sub(Q),Z)}Q.add(FJ)}return Q}raycast(A,Q){let B=this.geometry,C=this.material,J=this.matrixWorld;if(C===void 0)return;if(B.boundingSphere===null)B.computeBoundingSphere();if(WJ.copy(B.boundingSphere),WJ.applyMatrix4(J),i6.copy(A.ray).recast(A.near),WJ.containsPoint(i6.origin)===!1){if(i6.intersectSphere(WJ,CD)===null)return;if(i6.origin.distanceToSquared(CD)>(A.far-A.near)**2)return}if(BD.copy(J).invert(),i6.copy(A.ray).applyMatrix4(BD),B.boundingBox!==null){if(i6.intersectsBox(B.boundingBox)===!1)return}this._computeIntersections(A,Q,i6)}_computeIntersections(A,Q,B){let C,J=this.geometry,I=this.material,q=J.index,K=J.attributes.position,Y=J.attributes.uv,Z=J.attributes.uv1,H=J.attributes.normal,G=J.groups,W=J.drawRange;if(q!==null)if(Array.isArray(I))for(let F=0,z=G.length;F<z;F++){let U=G[F],E=I[U.materialIndex],w=Math.max(U.start,W.start),L=Math.min(q.count,Math.min(U.start+U.count,W.start+W.count));for(let X=w,V=L;X<V;X+=3){let D=q.getX(X),N=q.getX(X+1),R=q.getX(X+2);if(C=wJ(this,E,A,B,Y,Z,H,D,N,R),C)C.faceIndex=Math.floor(X/3),C.face.materialIndex=U.materialIndex,Q.push(C)}}else{let F=Math.max(0,W.start),z=Math.min(q.count,W.start+W.count);for(let U=F,E=z;U<E;U+=3){let w=q.getX(U),L=q.getX(U+1),X=q.getX(U+2);if(C=wJ(this,I,A,B,Y,Z,H,w,L,X),C)C.faceIndex=Math.floor(U/3),Q.push(C)}}else if(K!==void 0)if(Array.isArray(I))for(let F=0,z=G.length;F<z;F++){let U=G[F],E=I[U.materialIndex],w=Math.max(U.start,W.start),L=Math.min(K.count,Math.min(U.start+U.count,W.start+W.count));for(let X=w,V=L;X<V;X+=3){let D=X,N=X+1,R=X+2;if(C=wJ(this,E,A,B,Y,Z,H,D,N,R),C)C.faceIndex=Math.floor(X/3),C.face.materialIndex=U.materialIndex,Q.push(C)}}else{let F=Math.max(0,W.start),z=Math.min(K.count,W.start+W.count);for(let U=F,E=z;U<E;U+=3){let w=U,L=U+1,X=U+2;if(C=wJ(this,I,A,B,Y,Z,H,w,L,X),C)C.faceIndex=Math.floor(U/3),Q.push(C)}}}}function hj(A,Q,B,C,J,I,q,K){let Y;if(Q.side===1)Y=C.intersectTriangle(q,I,J,!0,K);else Y=C.intersectTriangle(J,I,q,Q.side===0,K);if(Y===null)return null;EJ.copy(K),EJ.applyMatrix4(A.matrixWorld);let Z=B.ray.origin.distanceTo(EJ);if(Z<B.near||Z>B.far)return null;return{distance:Z,point:EJ.clone(),object:A}}function wJ(A,Q,B,C,J,I,q,K,Y,Z){A.getVertexPosition(K,N7),A.getVertexPosition(Y,$7),A.getVertexPosition(Z,R7);let H=hj(A,Q,B,C,N7,$7,R7,DJ);if(H){if(J)VJ.fromBufferAttribute(J,K),UJ.fromBufferAttribute(J,Y),zJ.fromBufferAttribute(J,Z),H.uv=FA.getInterpolation(DJ,N7,$7,R7,VJ,UJ,zJ,new M0);if(I)VJ.fromBufferAttribute(I,K),UJ.fromBufferAttribute(I,Y),zJ.fromBufferAttribute(I,Z),H.uv1=FA.getInterpolation(DJ,N7,$7,R7,VJ,UJ,zJ,new M0);if(q){if(JD.fromBufferAttribute(q,K),ID.fromBufferAttribute(q,Y),qD.fromBufferAttribute(q,Z),H.normal=FA.getInterpolation(DJ,N7,$7,R7,JD,ID,qD,new p),H.normal.dot(C.direction)>0)H.normal.multiplyScalar(-1)}let G={a:K,b:Y,c:Z,normal:new p,materialIndex:0};FA.getNormal(N7,$7,R7,G.normal),H.face=G}return H}class E3 extends k2{constructor(A=1,Q=1,B=1,C=1,J=1,I=1){super();this.type="BoxGeometry",this.parameters={width:A,height:Q,depth:B,widthSegments:C,heightSegments:J,depthSegments:I};let q=this;C=Math.floor(C),J=Math.floor(J),I=Math.floor(I);let K=[],Y=[],Z=[],H=[],G=0,W=0;F("z","y","x",-1,-1,B,Q,A,I,J,0),F("z","y","x",1,-1,B,Q,-A,I,J,1),F("x","z","y",1,1,A,B,Q,C,I,2),F("x","z","y",1,-1,A,B,-Q,C,I,3),F("x","y","z",1,-1,A,Q,B,C,J,4),F("x","y","z",-1,-1,A,Q,-B,C,J,5),this.setIndex(K),this.setAttribute("position",new b2(Y,3)),this.setAttribute("normal",new b2(Z,3)),this.setAttribute("uv",new b2(H,2));function F(z,U,E,w,L,X,V,D,N,R,k){let P=X/N,$=V/R,_=X/2,h=V/2,S=D/2,O=N+1,M=R+1,y=0,u=0,T=new p;for(let d=0;d<M;d++){let g=d*$-h;for(let l=0;l<O;l++){let t=l*P-_;T[z]=t*w,T[U]=g*L,T[E]=S,Y.push(T.x,T.y,T.z),T[z]=0,T[U]=0,T[E]=D>0?1:-1,Z.push(T.x,T.y,T.z),H.push(l/N),H.push(1-d/R),y+=1}}for(let d=0;d<R;d++)for(let g=0;g<N;g++){let l=G+g+O*d,t=G+g+O*(d+1),i=G+(g+1)+O*(d+1),n=G+(g+1)+O*d;K.push(l,t,n),K.push(t,i,n),u+=6}q.addGroup(W,u,k),W+=u,G+=y}}copy(A){return super.copy(A),this.parameters=Object.assign({},A.parameters),this}static fromJSON(A){return new E3(A.width,A.height,A.depth,A.widthSegments,A.heightSegments,A.depthSegments)}}function S7(A){let Q={};for(let B in A){Q[B]={};for(let C in A[B]){let J=A[B][C];if(J&&(J.isColor||J.isMatrix3||J.isMatrix4||J.isVector2||J.isVector3||J.isVector4||J.isTexture||J.isQuaternion))if(J.isRenderTargetTexture)console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),Q[B][C]=null;else Q[B][C]=J.clone();else if(Array.isArray(J))Q[B][C]=J.slice();else Q[B][C]=J}}return Q}function e2(A){let Q={};for(let B=0;B<A.length;B++){let C=S7(A[B]);for(let J in C)Q[J]=C[J]}return Q}function xj(A){let Q=[];for(let B=0;B<A.length;B++)Q.push(A[B].clone());return Q}function NE(A){if(A.getRenderTarget()===null)return A.outputColorSpace;return O1.workingColorSpace}var gj={clone:S7,merge:e2},vj="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",bj="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";class C2 extends UA{constructor(A){super();if(this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=vj,this.fragmentShader=bj,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,A!==void 0)this.setValues(A)}copy(A){return super.copy(A),this.fragmentShader=A.fragmentShader,this.vertexShader=A.vertexShader,this.uniforms=S7(A.uniforms),this.uniformsGroups=xj(A.uniformsGroups),this.defines=Object.assign({},A.defines),this.wireframe=A.wireframe,this.wireframeLinewidth=A.wireframeLinewidth,this.fog=A.fog,this.lights=A.lights,this.clipping=A.clipping,this.extensions=Object.assign({},A.extensions),this.glslVersion=A.glslVersion,this}toJSON(A){let Q=super.toJSON(A);Q.glslVersion=this.glslVersion,Q.uniforms={};for(let C in this.uniforms){let I=this.uniforms[C].value;if(I&&I.isTexture)Q.uniforms[C]={type:"t",value:I.toJSON(A).uuid};else if(I&&I.isColor)Q.uniforms[C]={type:"c",value:I.getHex()};else if(I&&I.isVector2)Q.uniforms[C]={type:"v2",value:I.toArray()};else if(I&&I.isVector3)Q.uniforms[C]={type:"v3",value:I.toArray()};else if(I&&I.isVector4)Q.uniforms[C]={type:"v4",value:I.toArray()};else if(I&&I.isMatrix3)Q.uniforms[C]={type:"m3",value:I.toArray()};else if(I&&I.isMatrix4)Q.uniforms[C]={type:"m4",value:I.toArray()};else Q.uniforms[C]={value:I}}if(Object.keys(this.defines).length>0)Q.defines=this.defines;Q.vertexShader=this.vertexShader,Q.fragmentShader=this.fragmentShader,Q.lights=this.lights,Q.clipping=this.clipping;let B={};for(let C in this.extensions)if(this.extensions[C]===!0)B[C]=!0;if(Object.keys(B).length>0)Q.extensions=B;return Q}}class rZ extends L1{constructor(){super();this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new h0,this.projectionMatrix=new h0,this.projectionMatrixInverse=new h0,this.coordinateSystem=2000}copy(A,Q){return super.copy(A,Q),this.matrixWorldInverse.copy(A.matrixWorldInverse),this.projectionMatrix.copy(A.projectionMatrix),this.projectionMatrixInverse.copy(A.projectionMatrixInverse),this.coordinateSystem=A.coordinateSystem,this}getWorldDirection(A){return super.getWorldDirection(A).negate()}updateMatrixWorld(A){super.updateMatrixWorld(A),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(A,Q){super.updateWorldMatrix(A,Q),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}var Q6=new p,KD=new M0,YD=new M0;class b1 extends rZ{constructor(A=50,Q=1,B=0.1,C=2000){super();this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=A,this.zoom=1,this.near=B,this.far=C,this.focus=10,this.aspect=Q,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(A,Q){return super.copy(A,Q),this.fov=A.fov,this.zoom=A.zoom,this.near=A.near,this.far=A.far,this.focus=A.focus,this.aspect=A.aspect,this.view=A.view===null?null:Object.assign({},A.view),this.filmGauge=A.filmGauge,this.filmOffset=A.filmOffset,this}setFocalLength(A){let Q=0.5*this.getFilmHeight()/A;this.fov=j7*2*Math.atan(Q),this.updateProjectionMatrix()}getFocalLength(){let A=Math.tan(t9*0.5*this.fov);return 0.5*this.getFilmHeight()/A}getEffectiveFOV(){return j7*2*Math.atan(Math.tan(t9*0.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(A,Q,B){Q6.set(-1,-1,0.5).applyMatrix4(this.projectionMatrixInverse),Q.set(Q6.x,Q6.y).multiplyScalar(-A/Q6.z),Q6.set(1,1,0.5).applyMatrix4(this.projectionMatrixInverse),B.set(Q6.x,Q6.y).multiplyScalar(-A/Q6.z)}getViewSize(A,Q){return this.getViewBounds(A,KD,YD),Q.subVectors(YD,KD)}setViewOffset(A,Q,B,C,J,I){if(this.aspect=A/Q,this.view===null)this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1};this.view.enabled=!0,this.view.fullWidth=A,this.view.fullHeight=Q,this.view.offsetX=B,this.view.offsetY=C,this.view.width=J,this.view.height=I,this.updateProjectionMatrix()}clearViewOffset(){if(this.view!==null)this.view.enabled=!1;this.updateProjectionMatrix()}updateProjectionMatrix(){let A=this.near,Q=A*Math.tan(t9*0.5*this.fov)/this.zoom,B=2*Q,C=this.aspect*B,J=-0.5*C,I=this.view;if(this.view!==null&&this.view.enabled){let{fullWidth:K,fullHeight:Y}=I;J+=I.offsetX*C/K,Q-=I.offsetY*B/Y,C*=I.width/K,B*=I.height/Y}let q=this.filmOffset;if(q!==0)J+=A*q/this.getFilmWidth();this.projectionMatrix.makePerspective(J,J+C,Q,Q-B,A,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(A){let Q=super.toJSON(A);if(Q.object.fov=this.fov,Q.object.zoom=this.zoom,Q.object.near=this.near,Q.object.far=this.far,Q.object.focus=this.focus,Q.object.aspect=this.aspect,this.view!==null)Q.object.view=Object.assign({},this.view);return Q.object.filmGauge=this.filmGauge,Q.object.filmOffset=this.filmOffset,Q}}var L7=-90,M7=1;class qQ extends L1{constructor(A,Q,B){super();this.type="CubeCamera",this.renderTarget=B,this.coordinateSystem=null,this.activeMipmapLevel=0;let C=new b1(L7,M7,A,Q);C.layers=this.layers,this.add(C);let J=new b1(L7,M7,A,Q);J.layers=this.layers,this.add(J);let I=new b1(L7,M7,A,Q);I.layers=this.layers,this.add(I);let q=new b1(L7,M7,A,Q);q.layers=this.layers,this.add(q);let K=new b1(L7,M7,A,Q);K.layers=this.layers,this.add(K);let Y=new b1(L7,M7,A,Q);Y.layers=this.layers,this.add(Y)}updateCoordinateSystem(){let A=this.coordinateSystem,Q=this.children.concat(),[B,C,J,I,q,K]=Q;for(let Y of Q)this.remove(Y);if(A===2000)B.up.set(0,1,0),B.lookAt(1,0,0),C.up.set(0,1,0),C.lookAt(-1,0,0),J.up.set(0,0,-1),J.lookAt(0,1,0),I.up.set(0,0,1),I.lookAt(0,-1,0),q.up.set(0,1,0),q.lookAt(0,0,1),K.up.set(0,1,0),K.lookAt(0,0,-1);else if(A===2001)B.up.set(0,-1,0),B.lookAt(-1,0,0),C.up.set(0,-1,0),C.lookAt(1,0,0),J.up.set(0,0,1),J.lookAt(0,1,0),I.up.set(0,0,-1),I.lookAt(0,-1,0),q.up.set(0,-1,0),q.lookAt(0,0,1),K.up.set(0,-1,0),K.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+A);for(let Y of Q)this.add(Y),Y.updateMatrixWorld()}update(A,Q){if(this.parent===null)this.updateMatrixWorld();let{renderTarget:B,activeMipmapLevel:C}=this;if(this.coordinateSystem!==A.coordinateSystem)this.coordinateSystem=A.coordinateSystem,this.updateCoordinateSystem();let[J,I,q,K,Y,Z]=this.children,H=A.getRenderTarget(),G=A.getActiveCubeFace(),W=A.getActiveMipmapLevel(),F=A.xr.enabled;A.xr.enabled=!1;let z=B.texture.generateMipmaps;B.texture.generateMipmaps=!1,A.setRenderTarget(B,0,C),A.render(Q,J),A.setRenderTarget(B,1,C),A.render(Q,I),A.setRenderTarget(B,2,C),A.render(Q,q),A.setRenderTarget(B,3,C),A.render(Q,K),A.setRenderTarget(B,4,C),A.render(Q,Y),B.texture.generateMipmaps=z,A.setRenderTarget(B,5,C),A.render(Q,Z),A.setRenderTarget(H,G,W),A.xr.enabled=F,B.texture.needsPMREMUpdate=!0}}class KQ extends E1{constructor(A,Q,B,C,J,I,q,K,Y,Z){A=A!==void 0?A:[],Q=Q!==void 0?Q:301;super(A,Q,B,C,J,I,q,K,Y,Z);this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(A){this.image=A}}class p7 extends u2{constructor(A=1,Q={}){super(A,A,Q);this.isWebGLCubeRenderTarget=!0;let B={width:A,height:A,depth:1},C=[B,B,B,B,B,B];this.texture=new KQ(C,Q.mapping,Q.wrapS,Q.wrapT,Q.magFilter,Q.minFilter,Q.format,Q.type,Q.anisotropy,Q.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=Q.generateMipmaps!==void 0?Q.generateMipmaps:!1,this.texture.minFilter=Q.minFilter!==void 0?Q.minFilter:1006}fromEquirectangularTexture(A,Q){this.texture.type=Q.type,this.texture.colorSpace=Q.colorSpace,this.texture.generateMipmaps=Q.generateMipmaps,this.texture.minFilter=Q.minFilter,this.texture.magFilter=Q.magFilter;let B={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},C=new E3(5,5,5),J=new C2({name:"CubemapFromEquirect",uniforms:S7(B.uniforms),vertexShader:B.vertexShader,fragmentShader:B.fragmentShader,side:1,blending:0});J.uniforms.tEquirect.value=Q;let I=new A1(C,J),q=Q.minFilter;if(Q.minFilter===1008)Q.minFilter=1006;return new qQ(1,10,this).update(A,I),Q.minFilter=q,I.geometry.dispose(),I.material.dispose(),this}clear(A,Q,B,C){let J=A.getRenderTarget();for(let I=0;I<6;I++)A.setRenderTarget(this,I),A.clear(Q,B,C);A.setRenderTarget(J)}}var PZ=new p,uj=new p,pj=new n0;class y4{constructor(A=new p(1,0,0),Q=0){this.isPlane=!0,this.normal=A,this.constant=Q}set(A,Q){return this.normal.copy(A),this.constant=Q,this}setComponents(A,Q,B,C){return this.normal.set(A,Q,B),this.constant=C,this}setFromNormalAndCoplanarPoint(A,Q){return this.normal.copy(A),this.constant=-Q.dot(this.normal),this}setFromCoplanarPoints(A,Q,B){let C=PZ.subVectors(B,Q).cross(uj.subVectors(A,Q)).normalize();return this.setFromNormalAndCoplanarPoint(C,A),this}copy(A){return this.normal.copy(A.normal),this.constant=A.constant,this}normalize(){let A=1/this.normal.length();return this.normal.multiplyScalar(A),this.constant*=A,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(A){return this.normal.dot(A)+this.constant}distanceToSphere(A){return this.distanceToPoint(A.center)-A.radius}projectPoint(A,Q){return Q.copy(A).addScaledVector(this.normal,-this.distanceToPoint(A))}intersectLine(A,Q){let B=A.delta(PZ),C=this.normal.dot(B);if(C===0){if(this.distanceToPoint(A.start)===0)return Q.copy(A.start);return null}let J=-(A.start.dot(this.normal)+this.constant)/C;if(J<0||J>1)return null;return Q.copy(A.start).addScaledVector(B,J)}intersectsLine(A){let Q=this.distanceToPoint(A.start),B=this.distanceToPoint(A.end);return Q<0&&B>0||B<0&&Q>0}intersectsBox(A){return A.intersectsPlane(this)}intersectsSphere(A){return A.intersectsPlane(this)}coplanarPoint(A){return A.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(A,Q){let B=Q||pj.getNormalMatrix(A),C=this.coplanarPoint(PZ).applyMatrix4(A),J=this.normal.applyMatrix3(B).normalize();return this.constant=-C.dot(J),this}translate(A){return this.constant-=A.dot(this.normal),this}equals(A){return A.normal.equals(this.normal)&&A.constant===this.constant}clone(){return new this.constructor().copy(this)}}var n6=new p2,NJ=new p;class uJ{constructor(A=new y4,Q=new y4,B=new y4,C=new y4,J=new y4,I=new y4){this.planes=[A,Q,B,C,J,I]}set(A,Q,B,C,J,I){let q=this.planes;return q[0].copy(A),q[1].copy(Q),q[2].copy(B),q[3].copy(C),q[4].copy(J),q[5].copy(I),this}copy(A){let Q=this.planes;for(let B=0;B<6;B++)Q[B].copy(A.planes[B]);return this}setFromProjectionMatrix(A,Q=2000){let B=this.planes,C=A.elements,J=C[0],I=C[1],q=C[2],K=C[3],Y=C[4],Z=C[5],H=C[6],G=C[7],W=C[8],F=C[9],z=C[10],U=C[11],E=C[12],w=C[13],L=C[14],X=C[15];if(B[0].setComponents(K-J,G-Y,U-W,X-E).normalize(),B[1].setComponents(K+J,G+Y,U+W,X+E).normalize(),B[2].setComponents(K+I,G+Z,U+F,X+w).normalize(),B[3].setComponents(K-I,G-Z,U-F,X-w).normalize(),B[4].setComponents(K-q,G-H,U-z,X-L).normalize(),Q===2000)B[5].setComponents(K+q,G+H,U+z,X+L).normalize();else if(Q===2001)B[5].setComponents(q,H,z,L).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+Q);return this}intersectsObject(A){if(A.boundingSphere!==void 0){if(A.boundingSphere===null)A.computeBoundingSphere();n6.copy(A.boundingSphere).applyMatrix4(A.matrixWorld)}else{let Q=A.geometry;if(Q.boundingSphere===null)Q.computeBoundingSphere();n6.copy(Q.boundingSphere).applyMatrix4(A.matrixWorld)}return this.intersectsSphere(n6)}intersectsSprite(A){return n6.center.set(0,0,0),n6.radius=0.7071067811865476,n6.applyMatrix4(A.matrixWorld),this.intersectsSphere(n6)}intersectsSphere(A){let Q=this.planes,B=A.center,C=-A.radius;for(let J=0;J<6;J++)if(Q[J].distanceToPoint(B)<C)return!1;return!0}intersectsBox(A){let Q=this.planes;for(let B=0;B<6;B++){let C=Q[B];if(NJ.x=C.normal.x>0?A.max.x:A.min.x,NJ.y=C.normal.y>0?A.max.y:A.min.y,NJ.z=C.normal.z>0?A.max.z:A.min.z,C.distanceToPoint(NJ)<0)return!1}return!0}containsPoint(A){let Q=this.planes;for(let B=0;B<6;B++)if(Q[B].distanceToPoint(A)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function $E(){let A=null,Q=!1,B=null,C=null;function J(I,q){B(I,q),C=A.requestAnimationFrame(J)}return{start:function(){if(Q===!0)return;if(B===null)return;C=A.requestAnimationFrame(J),Q=!0},stop:function(){A.cancelAnimationFrame(C),Q=!1},setAnimationLoop:function(I){B=I},setContext:function(I){A=I}}}function mj(A,Q){let B=Q.isWebGL2,C=new WeakMap;function J(Z,H){let{array:G,usage:W}=Z,F=G.byteLength,z=A.createBuffer();A.bindBuffer(H,z),A.bufferData(H,G,W),Z.onUploadCallback();let U;if(G instanceof Float32Array)U=A.FLOAT;else if(G instanceof Uint16Array)if(Z.isFloat16BufferAttribute)if(B)U=A.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else U=A.UNSIGNED_SHORT;else if(G instanceof Int16Array)U=A.SHORT;else if(G instanceof Uint32Array)U=A.UNSIGNED_INT;else if(G instanceof Int32Array)U=A.INT;else if(G instanceof Int8Array)U=A.BYTE;else if(G instanceof Uint8Array)U=A.UNSIGNED_BYTE;else if(G instanceof Uint8ClampedArray)U=A.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+G);return{buffer:z,type:U,bytesPerElement:G.BYTES_PER_ELEMENT,version:Z.version,size:F}}function I(Z,H,G){let{array:W,_updateRange:F,updateRanges:z}=H;if(A.bindBuffer(G,Z),F.count===-1&&z.length===0)A.bufferSubData(G,0,W);if(z.length!==0){for(let U=0,E=z.length;U<E;U++){let w=z[U];if(B)A.bufferSubData(G,w.start*W.BYTES_PER_ELEMENT,W,w.start,w.count);else A.bufferSubData(G,w.start*W.BYTES_PER_ELEMENT,W.subarray(w.start,w.start+w.count))}H.clearUpdateRanges()}if(F.count!==-1){if(B)A.bufferSubData(G,F.offset*W.BYTES_PER_ELEMENT,W,F.offset,F.count);else A.bufferSubData(G,F.offset*W.BYTES_PER_ELEMENT,W.subarray(F.offset,F.offset+F.count));F.count=-1}H.onUploadCallback()}function q(Z){if(Z.isInterleavedBufferAttribute)Z=Z.data;return C.get(Z)}function K(Z){if(Z.isInterleavedBufferAttribute)Z=Z.data;let H=C.get(Z);if(H)A.deleteBuffer(H.buffer),C.delete(Z)}function Y(Z,H){if(Z.isGLBufferAttribute){let W=C.get(Z);if(!W||W.version<Z.version)C.set(Z,{buffer:Z.buffer,type:Z.type,bytesPerElement:Z.elementSize,version:Z.version});return}if(Z.isInterleavedBufferAttribute)Z=Z.data;let G=C.get(Z);if(G===void 0)C.set(Z,J(Z,H));else if(G.version<Z.version){if(G.size!==Z.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute\'s array buffer does not match the original size. Resizing buffer attributes is not supported.");I(G.buffer,Z,H),G.version=Z.version}}return{get:q,remove:K,update:Y}}class P2 extends k2{constructor(A=1,Q=1,B=1,C=1){super();this.type="PlaneGeometry",this.parameters={width:A,height:Q,widthSegments:B,heightSegments:C};let J=A/2,I=Q/2,q=Math.floor(B),K=Math.floor(C),Y=q+1,Z=K+1,H=A/q,G=Q/K,W=[],F=[],z=[],U=[];for(let E=0;E<Z;E++){let w=E*G-I;for(let L=0;L<Y;L++){let X=L*H-J;F.push(X,-w,0),z.push(0,0,1),U.push(L/q),U.push(1-E/K)}}for(let E=0;E<K;E++)for(let w=0;w<q;w++){let L=w+Y*E,X=w+Y*(E+1),V=w+1+Y*(E+1),D=w+1+Y*E;W.push(L,X,D),W.push(X,V,D)}this.setIndex(W),this.setAttribute("position",new b2(F,3)),this.setAttribute("normal",new b2(z,3)),this.setAttribute("uv",new b2(U,2))}copy(A){return super.copy(A),this.parameters=Object.assign({},A.parameters),this}static fromJSON(A){return new P2(A.width,A.height,A.widthSegments,A.heightSegments)}}var dj="#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",cj="#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",lj="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",sj="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",ij="#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",nj="#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",oj="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aj="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",rj="#ifdef USE_BATCHING\n\tattribute float batchId;\n\tuniform highp sampler2D batchingTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",tj="#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( batchId );\n#endif",ej="vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",AS="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",QS="float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",BS="#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",CS="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",JS="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",IS="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",qS="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",KS="#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",YS="#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",ZS="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",HS="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",XS="#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",GS="#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",WS="#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",FS="vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",VS="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",US="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",zS="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",DS="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",ES="gl_FragColor = linearToOutputTexel( gl_FragColor );",wS="\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",NS="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",$S="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",RS="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",LS="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",MS="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",OS="#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",kS="#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",PS="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",_S="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",TS="#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",jS="#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",SS="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",yS="LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",fS="varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",hS="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",xS="#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",gS="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",vS="varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",bS="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",uS="varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",pS="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",mS="struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",dS="\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",cS="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lS="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",sS="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",iS="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",nS="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",oS="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",aS="#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",rS="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",tS="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",eS="#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",Ay="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",Qy="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",By="#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[MORPHTARGETS_COUNT];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",Cy="#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",Jy="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",Iy="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t#endif\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\t#ifndef USE_INSTANCING_MORPH\n\t\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\t#endif\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",qy="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",Ky="float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",Yy="#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",Zy="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",Hy="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",Xy="#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",Gy="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",Wy="#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",Fy="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",Vy="#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",Uy="#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",zy="#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",Dy="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",Ey="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",wy="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",Ny="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",$y="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",Ry="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",Ly="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",My="#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",Oy="#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",ky="#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",Py="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",_y="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",Ty="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",jy="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",Sy="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",yy="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",fy="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",hy="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",xy="#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tfloat startCompression = 0.8 - 0.04;\n\tfloat desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min(color.r, min(color.g, color.b));\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max(color.r, max(color.g, color.b));\n\tif (peak < startCompression) return color;\n\tfloat d = 1. - startCompression;\n\tfloat newPeak = 1. - d * d / (peak + d - startCompression);\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / (desaturation * (peak - newPeak) + 1.);\n\treturn mix(color, vec3(1, 1, 1), g);\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",gy="#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",vy="#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",by="#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uy="#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",py="#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",my="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",dy="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cy="uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",ly="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",sy="#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",iy="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",ny="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",oy="#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",ay="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",ry="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",ty="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",ey="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",Af="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",Qf="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",Bf="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",Cf="#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",Jf="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",If="#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",qf="#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Kf="#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",Yf="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Zf="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",Hf="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",Xf="#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Gf="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Wf="#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",Ff="#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Vf="#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Uf="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",zf="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",Df="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",Ef="#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",wf="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",Nf="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",$f="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",r0={alphahash_fragment:dj,alphahash_pars_fragment:cj,alphamap_fragment:lj,alphamap_pars_fragment:sj,alphatest_fragment:ij,alphatest_pars_fragment:nj,aomap_fragment:oj,aomap_pars_fragment:aj,batching_pars_vertex:rj,batching_vertex:tj,begin_vertex:ej,beginnormal_vertex:AS,bsdfs:QS,iridescence_fragment:BS,bumpmap_pars_fragment:CS,clipping_planes_fragment:JS,clipping_planes_pars_fragment:IS,clipping_planes_pars_vertex:qS,clipping_planes_vertex:KS,color_fragment:YS,color_pars_fragment:ZS,color_pars_vertex:HS,color_vertex:XS,common:GS,cube_uv_reflection_fragment:WS,defaultnormal_vertex:FS,displacementmap_pars_vertex:VS,displacementmap_vertex:US,emissivemap_fragment:zS,emissivemap_pars_fragment:DS,colorspace_fragment:ES,colorspace_pars_fragment:wS,envmap_fragment:NS,envmap_common_pars_fragment:$S,envmap_pars_fragment:RS,envmap_pars_vertex:LS,envmap_physical_pars_fragment:xS,envmap_vertex:MS,fog_vertex:OS,fog_pars_vertex:kS,fog_fragment:PS,fog_pars_fragment:_S,gradientmap_pars_fragment:TS,lightmap_fragment:jS,lightmap_pars_fragment:SS,lights_lambert_fragment:yS,lights_lambert_pars_fragment:fS,lights_pars_begin:hS,lights_toon_fragment:gS,lights_toon_pars_fragment:vS,lights_phong_fragment:bS,lights_phong_pars_fragment:uS,lights_physical_fragment:pS,lights_physical_pars_fragment:mS,lights_fragment_begin:dS,lights_fragment_maps:cS,lights_fragment_end:lS,logdepthbuf_fragment:sS,logdepthbuf_pars_fragment:iS,logdepthbuf_pars_vertex:nS,logdepthbuf_vertex:oS,map_fragment:aS,map_pars_fragment:rS,map_particle_fragment:tS,map_particle_pars_fragment:eS,metalnessmap_fragment:Ay,metalnessmap_pars_fragment:Qy,morphinstance_vertex:By,morphcolor_vertex:Cy,morphnormal_vertex:Jy,morphtarget_pars_vertex:Iy,morphtarget_vertex:qy,normal_fragment_begin:Ky,normal_fragment_maps:Yy,normal_pars_fragment:Zy,normal_pars_vertex:Hy,normal_vertex:Xy,normalmap_pars_fragment:Gy,clearcoat_normal_fragment_begin:Wy,clearcoat_normal_fragment_maps:Fy,clearcoat_pars_fragment:Vy,iridescence_pars_fragment:Uy,opaque_fragment:zy,packing:Dy,premultiplied_alpha_fragment:Ey,project_vertex:wy,dithering_fragment:Ny,dithering_pars_fragment:$y,roughnessmap_fragment:Ry,roughnessmap_pars_fragment:Ly,shadowmap_pars_fragment:My,shadowmap_pars_vertex:Oy,shadowmap_vertex:ky,shadowmask_pars_fragment:Py,skinbase_vertex:_y,skinning_pars_vertex:Ty,skinning_vertex:jy,skinnormal_vertex:Sy,specularmap_fragment:yy,specularmap_pars_fragment:fy,tonemapping_fragment:hy,tonemapping_pars_fragment:xy,transmission_fragment:gy,transmission_pars_fragment:vy,uv_pars_fragment:by,uv_pars_vertex:uy,uv_vertex:py,worldpos_vertex:my,background_vert:dy,background_frag:cy,backgroundCube_vert:ly,backgroundCube_frag:sy,cube_vert:iy,cube_frag:ny,depth_vert:oy,depth_frag:ay,distanceRGBA_vert:ry,distanceRGBA_frag:ty,equirect_vert:ey,equirect_frag:Af,linedashed_vert:Qf,linedashed_frag:Bf,meshbasic_vert:Cf,meshbasic_frag:Jf,meshlambert_vert:If,meshlambert_frag:qf,meshmatcap_vert:Kf,meshmatcap_frag:Yf,meshnormal_vert:Zf,meshnormal_frag:Hf,meshphong_vert:Xf,meshphong_frag:Gf,meshphysical_vert:Wf,meshphysical_frag:Ff,meshtoon_vert:Vf,meshtoon_frag:Uf,points_vert:zf,points_frag:Df,shadow_vert:Ef,shadow_frag:wf,sprite_vert:Nf,sprite_frag:$f},N0={common:{diffuse:{value:new p0(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new n0},alphaMap:{value:null},alphaMapTransform:{value:new n0},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new n0}},envmap:{envMap:{value:null},envMapRotation:{value:new n0},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:0.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new n0}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new n0}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new n0},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new n0},normalScale:{value:new M0(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new n0},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new n0}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new n0}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new n0}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:0.00025},fogNear:{value:1},fogFar:{value:2000},fogColor:{value:new p0(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new p0(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new n0},alphaTest:{value:0},uvTransform:{value:new n0}},sprite:{diffuse:{value:new p0(16777215)},opacity:{value:1},center:{value:new M0(0.5,0.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new n0},alphaMap:{value:null},alphaMapTransform:{value:new n0},alphaTest:{value:0}}},f4={basic:{uniforms:e2([N0.common,N0.specularmap,N0.envmap,N0.aomap,N0.lightmap,N0.fog]),vertexShader:r0.meshbasic_vert,fragmentShader:r0.meshbasic_frag},lambert:{uniforms:e2([N0.common,N0.specularmap,N0.envmap,N0.aomap,N0.lightmap,N0.emissivemap,N0.bumpmap,N0.normalmap,N0.displacementmap,N0.fog,N0.lights,{emissive:{value:new p0(0)}}]),vertexShader:r0.meshlambert_vert,fragmentShader:r0.meshlambert_frag},phong:{uniforms:e2([N0.common,N0.specularmap,N0.envmap,N0.aomap,N0.lightmap,N0.emissivemap,N0.bumpmap,N0.normalmap,N0.displacementmap,N0.fog,N0.lights,{emissive:{value:new p0(0)},specular:{value:new p0(1118481)},shininess:{value:30}}]),vertexShader:r0.meshphong_vert,fragmentShader:r0.meshphong_frag},standard:{uniforms:e2([N0.common,N0.envmap,N0.aomap,N0.lightmap,N0.emissivemap,N0.bumpmap,N0.normalmap,N0.displacementmap,N0.roughnessmap,N0.metalnessmap,N0.fog,N0.lights,{emissive:{value:new p0(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:r0.meshphysical_vert,fragmentShader:r0.meshphysical_frag},toon:{uniforms:e2([N0.common,N0.aomap,N0.lightmap,N0.emissivemap,N0.bumpmap,N0.normalmap,N0.displacementmap,N0.gradientmap,N0.fog,N0.lights,{emissive:{value:new p0(0)}}]),vertexShader:r0.meshtoon_vert,fragmentShader:r0.meshtoon_frag},matcap:{uniforms:e2([N0.common,N0.bumpmap,N0.normalmap,N0.displacementmap,N0.fog,{matcap:{value:null}}]),vertexShader:r0.meshmatcap_vert,fragmentShader:r0.meshmatcap_frag},points:{uniforms:e2([N0.points,N0.fog]),vertexShader:r0.points_vert,fragmentShader:r0.points_frag},dashed:{uniforms:e2([N0.common,N0.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:r0.linedashed_vert,fragmentShader:r0.linedashed_frag},depth:{uniforms:e2([N0.common,N0.displacementmap]),vertexShader:r0.depth_vert,fragmentShader:r0.depth_frag},normal:{uniforms:e2([N0.common,N0.bumpmap,N0.normalmap,N0.displacementmap,{opacity:{value:1}}]),vertexShader:r0.meshnormal_vert,fragmentShader:r0.meshnormal_frag},sprite:{uniforms:e2([N0.sprite,N0.fog]),vertexShader:r0.sprite_vert,fragmentShader:r0.sprite_frag},background:{uniforms:{uvTransform:{value:new n0},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:r0.background_vert,fragmentShader:r0.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new n0}},vertexShader:r0.backgroundCube_vert,fragmentShader:r0.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:r0.cube_vert,fragmentShader:r0.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:r0.equirect_vert,fragmentShader:r0.equirect_frag},distanceRGBA:{uniforms:e2([N0.common,N0.displacementmap,{referencePosition:{value:new p},nearDistance:{value:1},farDistance:{value:1000}}]),vertexShader:r0.distanceRGBA_vert,fragmentShader:r0.distanceRGBA_frag},shadow:{uniforms:e2([N0.lights,N0.fog,{color:{value:new p0(0)},opacity:{value:1}}]),vertexShader:r0.shadow_vert,fragmentShader:r0.shadow_frag}};f4.physical={uniforms:e2([f4.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new n0},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new n0},clearcoatNormalScale:{value:new M0(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new n0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new n0},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new n0},sheen:{value:0},sheenColor:{value:new p0(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new n0},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new n0},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new n0},transmissionSamplerSize:{value:new M0},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new n0},attenuationDistance:{value:0},attenuationColor:{value:new p0(0)},specularColor:{value:new p0(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new n0},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new n0},anisotropyVector:{value:new M0},anisotropyMap:{value:null},anisotropyMapTransform:{value:new n0}}]),vertexShader:r0.meshphysical_vert,fragmentShader:r0.meshphysical_frag};var $J={r:0,b:0,g:0},o6=new VA,Rf=new h0;function Lf(A,Q,B,C,J,I,q){let K=new p0(0),Y=I===!0?0:1,Z,H,G=null,W=0,F=null;function z(E,w){let L=!1,X=w.isScene===!0?w.background:null;if(X&&X.isTexture)X=(w.backgroundBlurriness>0?B:Q).get(X);if(X===null)U(K,Y);else if(X&&X.isColor)U(X,1),L=!0;let V=A.xr.getEnvironmentBlendMode();if(V==="additive")C.buffers.color.setClear(0,0,0,1,q);else if(V==="alpha-blend")C.buffers.color.setClear(0,0,0,0,q);if(A.autoClear||L)A.clear(A.autoClearColor,A.autoClearDepth,A.autoClearStencil);if(X&&(X.isCubeTexture||X.mapping===306)){if(H===void 0)H=new A1(new E3(1,1,1),new C2({name:"BackgroundCubeMaterial",uniforms:S7(f4.backgroundCube.uniforms),vertexShader:f4.backgroundCube.vertexShader,fragmentShader:f4.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),H.geometry.deleteAttribute("normal"),H.geometry.deleteAttribute("uv"),H.onBeforeRender=function(D,N,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(H.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),J.update(H);if(o6.copy(w.backgroundRotation),o6.x*=-1,o6.y*=-1,o6.z*=-1,X.isCubeTexture&&X.isRenderTargetTexture===!1)o6.y*=-1,o6.z*=-1;if(H.material.uniforms.envMap.value=X,H.material.uniforms.flipEnvMap.value=X.isCubeTexture&&X.isRenderTargetTexture===!1?-1:1,H.material.uniforms.backgroundBlurriness.value=w.backgroundBlurriness,H.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,H.material.uniforms.backgroundRotation.value.setFromMatrix4(Rf.makeRotationFromEuler(o6)),H.material.toneMapped=O1.getTransfer(X.colorSpace)!=="srgb",G!==X||W!==X.version||F!==A.toneMapping)H.material.needsUpdate=!0,G=X,W=X.version,F=A.toneMapping;H.layers.enableAll(),E.unshift(H,H.geometry,H.material,0,0,null)}else if(X&&X.isTexture){if(Z===void 0)Z=new A1(new P2(2,2),new C2({name:"BackgroundMaterial",uniforms:S7(f4.background.uniforms),vertexShader:f4.background.vertexShader,fragmentShader:f4.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),Z.geometry.deleteAttribute("normal"),Object.defineProperty(Z.material,"map",{get:function(){return this.uniforms.t2D.value}}),J.update(Z);if(Z.material.uniforms.t2D.value=X,Z.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,Z.material.toneMapped=O1.getTransfer(X.colorSpace)!=="srgb",X.matrixAutoUpdate===!0)X.updateMatrix();if(Z.material.uniforms.uvTransform.value.copy(X.matrix),G!==X||W!==X.version||F!==A.toneMapping)Z.material.needsUpdate=!0,G=X,W=X.version,F=A.toneMapping;Z.layers.enableAll(),E.unshift(Z,Z.geometry,Z.material,0,0,null)}}function U(E,w){E.getRGB($J,NE(A)),C.buffers.color.setClear($J.r,$J.g,$J.b,w,q)}return{getClearColor:function(){return K},setClearColor:function(E,w=1){K.set(E),Y=w,U(K,Y)},getClearAlpha:function(){return Y},setClearAlpha:function(E){Y=E,U(K,Y)},render:z}}function Mf(A,Q,B,C){let J=A.getParameter(A.MAX_VERTEX_ATTRIBS),I=C.isWebGL2?null:Q.get("OES_vertex_array_object"),q=C.isWebGL2||I!==null,K={},Y=E(null),Z=Y,H=!1;function G(O,M,y,u,T){let d=!1;if(q){let g=U(u,y,M);if(Z!==g)Z=g,F(Z.object);if(d=w(O,u,y,T),d)L(O,u,y,T)}else{let g=M.wireframe===!0;if(Z.geometry!==u.id||Z.program!==y.id||Z.wireframe!==g)Z.geometry=u.id,Z.program=y.id,Z.wireframe=g,d=!0}if(T!==null)B.update(T,A.ELEMENT_ARRAY_BUFFER);if(d||H){if(H=!1,k(O,M,y,u),T!==null)A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,B.get(T).buffer)}}function W(){if(C.isWebGL2)return A.createVertexArray();return I.createVertexArrayOES()}function F(O){if(C.isWebGL2)return A.bindVertexArray(O);return I.bindVertexArrayOES(O)}function z(O){if(C.isWebGL2)return A.deleteVertexArray(O);return I.deleteVertexArrayOES(O)}function U(O,M,y){let u=y.wireframe===!0,T=K[O.id];if(T===void 0)T={},K[O.id]=T;let d=T[M.id];if(d===void 0)d={},T[M.id]=d;let g=d[u];if(g===void 0)g=E(W()),d[u]=g;return g}function E(O){let M=[],y=[],u=[];for(let T=0;T<J;T++)M[T]=0,y[T]=0,u[T]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:M,enabledAttributes:y,attributeDivisors:u,object:O,attributes:{},index:null}}function w(O,M,y,u){let T=Z.attributes,d=M.attributes,g=0,l=y.getAttributes();for(let t in l)if(l[t].location>=0){let n=T[t],J0=d[t];if(J0===void 0){if(t==="instanceMatrix"&&O.instanceMatrix)J0=O.instanceMatrix;if(t==="instanceColor"&&O.instanceColor)J0=O.instanceColor}if(n===void 0)return!0;if(n.attribute!==J0)return!0;if(J0&&n.data!==J0.data)return!0;g++}if(Z.attributesNum!==g)return!0;if(Z.index!==u)return!0;return!1}function L(O,M,y,u){let T={},d=M.attributes,g=0,l=y.getAttributes();for(let t in l)if(l[t].location>=0){let n=d[t];if(n===void 0){if(t==="instanceMatrix"&&O.instanceMatrix)n=O.instanceMatrix;if(t==="instanceColor"&&O.instanceColor)n=O.instanceColor}let J0={};if(J0.attribute=n,n&&n.data)J0.data=n.data;T[t]=J0,g++}Z.attributes=T,Z.attributesNum=g,Z.index=u}function X(){let O=Z.newAttributes;for(let M=0,y=O.length;M<y;M++)O[M]=0}function V(O){D(O,0)}function D(O,M){let{newAttributes:y,enabledAttributes:u,attributeDivisors:T}=Z;if(y[O]=1,u[O]===0)A.enableVertexAttribArray(O),u[O]=1;if(T[O]!==M)(C.isWebGL2?A:Q.get("ANGLE_instanced_arrays"))[C.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](O,M),T[O]=M}function N(){let{newAttributes:O,enabledAttributes:M}=Z;for(let y=0,u=M.length;y<u;y++)if(M[y]!==O[y])A.disableVertexAttribArray(y),M[y]=0}function R(O,M,y,u,T,d,g){if(g===!0)A.vertexAttribIPointer(O,M,y,T,d);else A.vertexAttribPointer(O,M,y,u,T,d)}function k(O,M,y,u){if(C.isWebGL2===!1&&(O.isInstancedMesh||u.isInstancedBufferGeometry)){if(Q.get("ANGLE_instanced_arrays")===null)return}X();let T=u.attributes,d=y.getAttributes(),g=M.defaultAttributeValues;for(let l in d){let t=d[l];if(t.location>=0){let i=T[l];if(i===void 0){if(l==="instanceMatrix"&&O.instanceMatrix)i=O.instanceMatrix;if(l==="instanceColor"&&O.instanceColor)i=O.instanceColor}if(i!==void 0){let{normalized:n,itemSize:J0}=i,e=B.get(i);if(e===void 0)continue;let{buffer:H0,type:X0,bytesPerElement:L0}=e,T0=C.isWebGL2===!0&&(X0===A.INT||X0===A.UNSIGNED_INT||i.gpuType===1013);if(i.isInterleavedBufferAttribute){let s=i.data,P1=s.stride,Z0=i.offset;if(s.isInstancedInterleavedBuffer){for(let G0=0;G0<t.locationSize;G0++)D(t.location+G0,s.meshPerAttribute);if(O.isInstancedMesh!==!0&&u._maxInstanceCount===void 0)u._maxInstanceCount=s.meshPerAttribute*s.count}else for(let G0=0;G0<t.locationSize;G0++)V(t.location+G0);A.bindBuffer(A.ARRAY_BUFFER,H0);for(let G0=0;G0<t.locationSize;G0++)R(t.location+G0,J0/t.locationSize,X0,n,P1*L0,(Z0+J0/t.locationSize*G0)*L0,T0)}else{if(i.isInstancedBufferAttribute){for(let s=0;s<t.locationSize;s++)D(t.location+s,i.meshPerAttribute);if(O.isInstancedMesh!==!0&&u._maxInstanceCount===void 0)u._maxInstanceCount=i.meshPerAttribute*i.count}else for(let s=0;s<t.locationSize;s++)V(t.location+s);A.bindBuffer(A.ARRAY_BUFFER,H0);for(let s=0;s<t.locationSize;s++)R(t.location+s,J0/t.locationSize,X0,n,J0*L0,J0/t.locationSize*s*L0,T0)}}else if(g!==void 0){let n=g[l];if(n!==void 0)switch(n.length){case 2:A.vertexAttrib2fv(t.location,n);break;case 3:A.vertexAttrib3fv(t.location,n);break;case 4:A.vertexAttrib4fv(t.location,n);break;default:A.vertexAttrib1fv(t.location,n)}}}}N()}function P(){h();for(let O in K){let M=K[O];for(let y in M){let u=M[y];for(let T in u)z(u[T].object),delete u[T];delete M[y]}delete K[O]}}function $(O){if(K[O.id]===void 0)return;let M=K[O.id];for(let y in M){let u=M[y];for(let T in u)z(u[T].object),delete u[T];delete M[y]}delete K[O.id]}function _(O){for(let M in K){let y=K[M];if(y[O.id]===void 0)continue;let u=y[O.id];for(let T in u)z(u[T].object),delete u[T];delete y[O.id]}}function h(){if(S(),H=!0,Z===Y)return;Z=Y,F(Z.object)}function S(){Y.geometry=null,Y.program=null,Y.wireframe=!1}return{setup:G,reset:h,resetDefaultState:S,dispose:P,releaseStatesOfGeometry:$,releaseStatesOfProgram:_,initAttributes:X,enableAttribute:V,disableUnusedAttributes:N}}function Of(A,Q,B,C){let J=C.isWebGL2,I;function q(H){I=H}function K(H,G){A.drawArrays(I,H,G),B.update(G,I,1)}function Y(H,G,W){if(W===0)return;let F,z;if(J)F=A,z="drawArraysInstanced";else if(F=Q.get("ANGLE_instanced_arrays"),z="drawArraysInstancedANGLE",F===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}F[z](I,H,G,W),B.update(G,I,W)}function Z(H,G,W){if(W===0)return;let F=Q.get("WEBGL_multi_draw");if(F===null)for(let z=0;z<W;z++)this.render(H[z],G[z]);else{F.multiDrawArraysWEBGL(I,H,0,G,0,W);let z=0;for(let U=0;U<W;U++)z+=G[U];B.update(z,I,1)}}this.setMode=q,this.render=K,this.renderInstances=Y,this.renderMultiDraw=Z}function kf(A,Q,B){let C;function J(){if(C!==void 0)return C;if(Q.has("EXT_texture_filter_anisotropic")===!0){let R=Q.get("EXT_texture_filter_anisotropic");C=A.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else C=0;return C}function I(R){if(R==="highp"){if(A.getShaderPrecisionFormat(A.VERTEX_SHADER,A.HIGH_FLOAT).precision>0&&A.getShaderPrecisionFormat(A.FRAGMENT_SHADER,A.HIGH_FLOAT).precision>0)return"highp";R="mediump"}if(R==="mediump"){if(A.getShaderPrecisionFormat(A.VERTEX_SHADER,A.MEDIUM_FLOAT).precision>0&&A.getShaderPrecisionFormat(A.FRAGMENT_SHADER,A.MEDIUM_FLOAT).precision>0)return"mediump"}return"lowp"}let q=typeof WebGL2RenderingContext!=="undefined"&&A.constructor.name==="WebGL2RenderingContext",K=B.precision!==void 0?B.precision:"highp",Y=I(K);if(Y!==K)console.warn("THREE.WebGLRenderer:",K,"not supported, using",Y,"instead."),K=Y;let Z=q||Q.has("WEBGL_draw_buffers"),H=B.logarithmicDepthBuffer===!0,G=A.getParameter(A.MAX_TEXTURE_IMAGE_UNITS),W=A.getParameter(A.MAX_VERTEX_TEXTURE_IMAGE_UNITS),F=A.getParameter(A.MAX_TEXTURE_SIZE),z=A.getParameter(A.MAX_CUBE_MAP_TEXTURE_SIZE),U=A.getParameter(A.MAX_VERTEX_ATTRIBS),E=A.getParameter(A.MAX_VERTEX_UNIFORM_VECTORS),w=A.getParameter(A.MAX_VARYING_VECTORS),L=A.getParameter(A.MAX_FRAGMENT_UNIFORM_VECTORS),X=W>0,V=q||Q.has("OES_texture_float"),D=X&&V,N=q?A.getParameter(A.MAX_SAMPLES):0;return{isWebGL2:q,drawBuffers:Z,getMaxAnisotropy:J,getMaxPrecision:I,precision:K,logarithmicDepthBuffer:H,maxTextures:G,maxVertexTextures:W,maxTextureSize:F,maxCubemapSize:z,maxAttributes:U,maxVertexUniforms:E,maxVaryings:w,maxFragmentUniforms:L,vertexTextures:X,floatFragmentTextures:V,floatVertexTextures:D,maxSamples:N}}function Pf(A){let Q=this,B=null,C=0,J=!1,I=!1,q=new y4,K=new n0,Y={value:null,needsUpdate:!1};this.uniform=Y,this.numPlanes=0,this.numIntersection=0,this.init=function(G,W){let F=G.length!==0||W||C!==0||J;return J=W,C=G.length,F},this.beginShadows=function(){I=!0,H(null)},this.endShadows=function(){I=!1},this.setGlobalState=function(G,W){B=H(G,W,0)},this.setState=function(G,W,F){let{clippingPlanes:z,clipIntersection:U,clipShadows:E}=G,w=A.get(G);if(!J||z===null||z.length===0||I&&!E)if(I)H(null);else Z();else{let L=I?0:C,X=L*4,V=w.clippingState||null;Y.value=V,V=H(z,W,X,F);for(let D=0;D!==X;++D)V[D]=B[D];w.clippingState=V,this.numIntersection=U?this.numPlanes:0,this.numPlanes+=L}};function Z(){if(Y.value!==B)Y.value=B,Y.needsUpdate=C>0;Q.numPlanes=C,Q.numIntersection=0}function H(G,W,F,z){let U=G!==null?G.length:0,E=null;if(U!==0){if(E=Y.value,z!==!0||E===null){let w=F+U*4,L=W.matrixWorldInverse;if(K.getNormalMatrix(L),E===null||E.length<w)E=new Float32Array(w);for(let X=0,V=F;X!==U;++X,V+=4)q.copy(G[X]).applyMatrix4(L,K),q.normal.toArray(E,V),E[V+3]=q.constant}Y.value=E,Y.needsUpdate=!0}return Q.numPlanes=U,Q.numIntersection=0,E}}function _f(A){let Q=new WeakMap;function B(q,K){if(K===303)q.mapping=301;else if(K===304)q.mapping=302;return q}function C(q){if(q&&q.isTexture){let K=q.mapping;if(K===303||K===304)if(Q.has(q)){let Y=Q.get(q).texture;return B(Y,q.mapping)}else{let Y=q.image;if(Y&&Y.height>0){let Z=new p7(Y.height);return Z.fromEquirectangularTexture(A,q),Q.set(q,Z),q.addEventListener("dispose",J),B(Z.texture,q.mapping)}else return null}}return q}function J(q){let K=q.target;K.removeEventListener("dispose",J);let Y=Q.get(K);if(Y!==void 0)Q.delete(K),Y.dispose()}function I(){Q=new WeakMap}return{get:C,dispose:I}}class Z4 extends rZ{constructor(A=-1,Q=1,B=1,C=-1,J=0.1,I=2000){super();this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=A,this.right=Q,this.top=B,this.bottom=C,this.near=J,this.far=I,this.updateProjectionMatrix()}copy(A,Q){return super.copy(A,Q),this.left=A.left,this.right=A.right,this.top=A.top,this.bottom=A.bottom,this.near=A.near,this.far=A.far,this.zoom=A.zoom,this.view=A.view===null?null:Object.assign({},A.view),this}setViewOffset(A,Q,B,C,J,I){if(this.view===null)this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1};this.view.enabled=!0,this.view.fullWidth=A,this.view.fullHeight=Q,this.view.offsetX=B,this.view.offsetY=C,this.view.width=J,this.view.height=I,this.updateProjectionMatrix()}clearViewOffset(){if(this.view!==null)this.view.enabled=!1;this.updateProjectionMatrix()}updateProjectionMatrix(){let A=(this.right-this.left)/(2*this.zoom),Q=(this.top-this.bottom)/(2*this.zoom),B=(this.right+this.left)/2,C=(this.top+this.bottom)/2,J=B-A,I=B+A,q=C+Q,K=C-Q;if(this.view!==null&&this.view.enabled){let Y=(this.right-this.left)/this.view.fullWidth/this.zoom,Z=(this.top-this.bottom)/this.view.fullHeight/this.zoom;J+=Y*this.view.offsetX,I=J+Y*this.view.width,q-=Z*this.view.offsetY,K=q-Z*this.view.height}this.projectionMatrix.makeOrthographic(J,I,q,K,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(A){let Q=super.toJSON(A);if(Q.object.zoom=this.zoom,Q.object.left=this.left,Q.object.right=this.right,Q.object.top=this.top,Q.object.bottom=this.bottom,Q.object.near=this.near,Q.object.far=this.far,this.view!==null)Q.object.view=Object.assign({},this.view);return Q}}var P7=4,ZD=[0.125,0.215,0.35,0.446,0.526,0.582],t6=20,_Z=new Z4,HD=new p0,TZ=null,jZ=0,SZ=0,r6=(1+Math.sqrt(5))/2,O7=1/r6,XD=[new p(1,1,1),new p(-1,1,1),new p(1,1,-1),new p(-1,1,-1),new p(0,r6,O7),new p(0,r6,-O7),new p(O7,0,r6),new p(-O7,0,r6),new p(r6,O7,0),new p(-r6,O7,0)];class uZ{constructor(A){this._renderer=A,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(A,Q=0,B=0.1,C=100){TZ=this._renderer.getRenderTarget(),jZ=this._renderer.getActiveCubeFace(),SZ=this._renderer.getActiveMipmapLevel(),this._setSize(256);let J=this._allocateTargets();if(J.depthBuffer=!0,this._sceneToCubeUV(A,B,C,J),Q>0)this._blur(J,0,0,Q);return this._applyPMREM(J),this._cleanup(J),J}fromEquirectangular(A,Q=null){return this._fromTexture(A,Q)}fromCubemap(A,Q=null){return this._fromTexture(A,Q)}compileCubemapShader(){if(this._cubemapMaterial===null)this._cubemapMaterial=FD(),this._compileMaterial(this._cubemapMaterial)}compileEquirectangularShader(){if(this._equirectMaterial===null)this._equirectMaterial=WD(),this._compileMaterial(this._equirectMaterial)}dispose(){if(this._dispose(),this._cubemapMaterial!==null)this._cubemapMaterial.dispose();if(this._equirectMaterial!==null)this._equirectMaterial.dispose()}_setSize(A){this._lodMax=Math.floor(Math.log2(A)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){if(this._blurMaterial!==null)this._blurMaterial.dispose();if(this._pingPongRenderTarget!==null)this._pingPongRenderTarget.dispose();for(let A=0;A<this._lodPlanes.length;A++)this._lodPlanes[A].dispose()}_cleanup(A){this._renderer.setRenderTarget(TZ,jZ,SZ),A.scissorTest=!1,RJ(A,0,0,A.width,A.height)}_fromTexture(A,Q){if(A.mapping===301||A.mapping===302)this._setSize(A.image.length===0?16:A.image[0].width||A.image[0].image.width);else this._setSize(A.image.width/4);TZ=this._renderer.getRenderTarget(),jZ=this._renderer.getActiveCubeFace(),SZ=this._renderer.getActiveMipmapLevel();let B=Q||this._allocateTargets();return this._textureToCubeUV(A,B),this._applyPMREM(B),this._cleanup(B),B}_allocateTargets(){let A=3*Math.max(this._cubeSize,112),Q=4*this._cubeSize,B={magFilter:1006,minFilter:1006,generateMipmaps:!1,type:1016,format:1023,colorSpace:"srgb-linear",depthBuffer:!1},C=GD(A,Q,B);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==A||this._pingPongRenderTarget.height!==Q){if(this._pingPongRenderTarget!==null)this._dispose();this._pingPongRenderTarget=GD(A,Q,B);let{_lodMax:J}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Tf(J)),this._blurMaterial=jf(J,A,Q)}return C}_compileMaterial(A){let Q=new A1(this._lodPlanes[0],A);this._renderer.compile(Q,_Z)}_sceneToCubeUV(A,Q,B,C){let q=new b1(90,1,Q,B),K=[1,-1,1,1,1,1],Y=[1,1,1,-1,-1,-1],Z=this._renderer,H=Z.autoClear,G=Z.toneMapping;Z.getClearColor(HD),Z.toneMapping=0,Z.autoClear=!1;let W=new t1({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),F=new A1(new E3,W),z=!1,U=A.background;if(U){if(U.isColor)W.color.copy(U),A.background=null,z=!0}else W.color.copy(HD),z=!0;for(let E=0;E<6;E++){let w=E%3;if(w===0)q.up.set(0,K[E],0),q.lookAt(Y[E],0,0);else if(w===1)q.up.set(0,0,K[E]),q.lookAt(0,Y[E],0);else q.up.set(0,K[E],0),q.lookAt(0,0,Y[E]);let L=this._cubeSize;if(RJ(C,w*L,E>2?L:0,L,L),Z.setRenderTarget(C),z)Z.render(F,q);Z.render(A,q)}F.geometry.dispose(),F.material.dispose(),Z.toneMapping=G,Z.autoClear=H,A.background=U}_textureToCubeUV(A,Q){let B=this._renderer,C=A.mapping===301||A.mapping===302;if(C){if(this._cubemapMaterial===null)this._cubemapMaterial=FD();this._cubemapMaterial.uniforms.flipEnvMap.value=A.isRenderTargetTexture===!1?-1:1}else if(this._equirectMaterial===null)this._equirectMaterial=WD();let J=C?this._cubemapMaterial:this._equirectMaterial,I=new A1(this._lodPlanes[0],J),q=J.uniforms;q.envMap.value=A;let K=this._cubeSize;RJ(Q,0,0,3*K,2*K),B.setRenderTarget(Q),B.render(I,_Z)}_applyPMREM(A){let Q=this._renderer,B=Q.autoClear;Q.autoClear=!1;for(let C=1;C<this._lodPlanes.length;C++){let J=Math.sqrt(this._sigmas[C]*this._sigmas[C]-this._sigmas[C-1]*this._sigmas[C-1]),I=XD[(C-1)%XD.length];this._blur(A,C-1,C,J,I)}Q.autoClear=B}_blur(A,Q,B,C,J){let I=this._pingPongRenderTarget;this._halfBlur(A,I,Q,B,C,"latitudinal",J),this._halfBlur(I,A,B,B,C,"longitudinal",J)}_halfBlur(A,Q,B,C,J,I,q){let K=this._renderer,Y=this._blurMaterial;if(I!=="latitudinal"&&I!=="longitudinal")console.error("blur direction must be either latitudinal or longitudinal!");let Z=3,H=new A1(this._lodPlanes[C],Y),G=Y.uniforms,W=this._sizeLods[B]-1,F=isFinite(J)?Math.PI/(2*W):2*Math.PI/(2*t6-1),z=J/F,U=isFinite(J)?1+Math.floor(Z*z):t6;if(U>t6)console.warn(`sigmaRadians, ${J}, is too large and will clip, as it requested ${U} samples when the maximum is set to ${t6}`);let E=[],w=0;for(let N=0;N<t6;++N){let R=N/z,k=Math.exp(-R*R/2);if(E.push(k),N===0)w+=k;else if(N<U)w+=2*k}for(let N=0;N<E.length;N++)E[N]=E[N]/w;if(G.envMap.value=A.texture,G.samples.value=U,G.weights.value=E,G.latitudinal.value=I==="latitudinal",q)G.poleAxis.value=q;let{_lodMax:L}=this;G.dTheta.value=F,G.mipInt.value=L-B;let X=this._sizeLods[C],V=3*X*(C>L-P7?C-L+P7:0),D=4*(this._cubeSize-X);RJ(Q,V,D,3*X,2*X),K.setRenderTarget(Q),K.render(H,_Z)}}function Tf(A){let Q=[],B=[],C=[],J=A,I=A-P7+1+ZD.length;for(let q=0;q<I;q++){let K=Math.pow(2,J);B.push(K);let Y=1/K;if(q>A-P7)Y=ZD[q-A+P7-1];else if(q===0)Y=0;C.push(Y);let Z=1/(K-2),H=-Z,G=1+Z,W=[H,H,G,H,G,G,H,H,G,G,H,G],F=6,z=6,U=3,E=2,w=1,L=new Float32Array(U*z*F),X=new Float32Array(E*z*F),V=new Float32Array(w*z*F);for(let N=0;N<F;N++){let R=N%3*2/3-1,k=N>2?0:-1,P=[R,k,0,R+0.6666666666666666,k,0,R+0.6666666666666666,k+1,0,R,k,0,R+0.6666666666666666,k+1,0,R,k+1,0];L.set(P,U*z*N),X.set(W,E*z*N);let $=[N,N,N,N,N,N];V.set($,w*z*N)}let D=new k2;if(D.setAttribute("position",new T1(L,U)),D.setAttribute("uv",new T1(X,E)),D.setAttribute("faceIndex",new T1(V,w)),Q.push(D),J>P7)J--}return{lodPlanes:Q,sizeLods:B,sigmas:C}}function GD(A,Q,B){let C=new u2(A,Q,B);return C.texture.mapping=306,C.texture.name="PMREM.cubeUv",C.scissorTest=!0,C}function RJ(A,Q,B,C,J){A.viewport.set(Q,B,C,J),A.scissor.set(Q,B,C,J)}function jf(A,Q,B){let C=new Float32Array(t6),J=new p(0,1,0);return new C2({name:"SphericalGaussianBlur",defines:{n:t6,CUBEUV_TEXEL_WIDTH:1/Q,CUBEUV_TEXEL_HEIGHT:1/B,CUBEUV_MAX_MIP:`${A}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:C},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:J}},vertexShader:tZ(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:0,depthTest:!1,depthWrite:!1})}function WD(){return new C2({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:tZ(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:0,depthTest:!1,depthWrite:!1})}function FD(){return new C2({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:tZ(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:0,depthTest:!1,depthWrite:!1})}function tZ(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Sf(A){let Q=new WeakMap,B=null;function C(K){if(K&&K.isTexture){let Y=K.mapping,Z=Y===303||Y===304,H=Y===301||Y===302;if(Z||H)if(K.isRenderTargetTexture&&K.needsPMREMUpdate===!0){K.needsPMREMUpdate=!1;let G=Q.get(K);if(B===null)B=new uZ(A);return G=Z?B.fromEquirectangular(K,G):B.fromCubemap(K,G),Q.set(K,G),G.texture}else if(Q.has(K))return Q.get(K).texture;else{let G=K.image;if(Z&&G&&G.height>0||H&&G&&J(G)){if(B===null)B=new uZ(A);let W=Z?B.fromEquirectangular(K):B.fromCubemap(K);return Q.set(K,W),K.addEventListener("dispose",I),W.texture}else return null}}return K}function J(K){let Y=0,Z=6;for(let H=0;H<Z;H++)if(K[H]!==void 0)Y++;return Y===Z}function I(K){let Y=K.target;Y.removeEventListener("dispose",I);let Z=Q.get(Y);if(Z!==void 0)Q.delete(Y),Z.dispose()}function q(){if(Q=new WeakMap,B!==null)B.dispose(),B=null}return{get:C,dispose:q}}function yf(A){let Q={};function B(C){if(Q[C]!==void 0)return Q[C];let J;switch(C){case"WEBGL_depth_texture":J=A.getExtension("WEBGL_depth_texture")||A.getExtension("MOZ_WEBGL_depth_texture")||A.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":J=A.getExtension("EXT_texture_filter_anisotropic")||A.getExtension("MOZ_EXT_texture_filter_anisotropic")||A.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":J=A.getExtension("WEBGL_compressed_texture_s3tc")||A.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||A.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":J=A.getExtension("WEBGL_compressed_texture_pvrtc")||A.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:J=A.getExtension(C)}return Q[C]=J,J}return{has:function(C){return B(C)!==null},init:function(C){if(C.isWebGL2)B("EXT_color_buffer_float"),B("WEBGL_clip_cull_distance");else B("WEBGL_depth_texture"),B("OES_texture_float"),B("OES_texture_half_float"),B("OES_texture_half_float_linear"),B("OES_standard_derivatives"),B("OES_element_index_uint"),B("OES_vertex_array_object"),B("ANGLE_instanced_arrays");B("OES_texture_float_linear"),B("EXT_color_buffer_half_float"),B("WEBGL_multisampled_render_to_texture")},get:function(C){let J=B(C);if(J===null)console.warn("THREE.WebGLRenderer: "+C+" extension not supported.");return J}}}function ff(A,Q,B,C){let J={},I=new WeakMap;function q(G){let W=G.target;if(W.index!==null)Q.remove(W.index);for(let z in W.attributes)Q.remove(W.attributes[z]);for(let z in W.morphAttributes){let U=W.morphAttributes[z];for(let E=0,w=U.length;E<w;E++)Q.remove(U[E])}W.removeEventListener("dispose",q),delete J[W.id];let F=I.get(W);if(F)Q.remove(F),I.delete(W);if(C.releaseStatesOfGeometry(W),W.isInstancedBufferGeometry===!0)delete W._maxInstanceCount;B.memory.geometries--}function K(G,W){if(J[W.id]===!0)return W;return W.addEventListener("dispose",q),J[W.id]=!0,B.memory.geometries++,W}function Y(G){let W=G.attributes;for(let z in W)Q.update(W[z],A.ARRAY_BUFFER);let F=G.morphAttributes;for(let z in F){let U=F[z];for(let E=0,w=U.length;E<w;E++)Q.update(U[E],A.ARRAY_BUFFER)}}function Z(G){let W=[],F=G.index,z=G.attributes.position,U=0;if(F!==null){let L=F.array;U=F.version;for(let X=0,V=L.length;X<V;X+=3){let D=L[X+0],N=L[X+1],R=L[X+2];W.push(D,N,N,R,R,D)}}else if(z!==void 0){let L=z.array;U=z.version;for(let X=0,V=L.length/3-1;X<V;X+=3){let D=X+0,N=X+1,R=X+2;W.push(D,N,N,R,R,D)}}else return;let E=new((zE(W))?aZ:oZ)(W,1);E.version=U;let w=I.get(G);if(w)Q.remove(w);I.set(G,E)}function H(G){let W=I.get(G);if(W){let F=G.index;if(F!==null){if(W.version<F.version)Z(G)}}else Z(G);return I.get(G)}return{get:K,update:Y,getWireframeAttribute:H}}function hf(A,Q,B,C){let J=C.isWebGL2,I;function q(F){I=F}let K,Y;function Z(F){K=F.type,Y=F.bytesPerElement}function H(F,z){A.drawElements(I,z,K,F*Y),B.update(z,I,1)}function G(F,z,U){if(U===0)return;let E,w;if(J)E=A,w="drawElementsInstanced";else if(E=Q.get("ANGLE_instanced_arrays"),w="drawElementsInstancedANGLE",E===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}E[w](I,z,K,F*Y,U),B.update(z,I,U)}function W(F,z,U){if(U===0)return;let E=Q.get("WEBGL_multi_draw");if(E===null)for(let w=0;w<U;w++)this.render(F[w]/Y,z[w]);else{E.multiDrawElementsWEBGL(I,z,0,K,F,0,U);let w=0;for(let L=0;L<U;L++)w+=z[L];B.update(w,I,1)}}this.setMode=q,this.setIndex=Z,this.render=H,this.renderInstances=G,this.renderMultiDraw=W}function xf(A){let Q={geometries:0,textures:0},B={frame:0,calls:0,triangles:0,points:0,lines:0};function C(I,q,K){switch(B.calls++,q){case A.TRIANGLES:B.triangles+=K*(I/3);break;case A.LINES:B.lines+=K*(I/2);break;case A.LINE_STRIP:B.lines+=K*(I-1);break;case A.LINE_LOOP:B.lines+=K*I;break;case A.POINTS:B.points+=K*I;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",q);break}}function J(){B.calls=0,B.triangles=0,B.points=0,B.lines=0}return{memory:Q,render:B,programs:null,autoReset:!0,reset:J,update:C}}function gf(A,Q){return A[0]-Q[0]}function vf(A,Q){return Math.abs(Q[1])-Math.abs(A[1])}function bf(A,Q,B){let C={},J=new Float32Array(8),I=new WeakMap,q=new x1,K=[];for(let Z=0;Z<8;Z++)K[Z]=[Z,0];function Y(Z,H,G){let W=Z.morphTargetInfluences;if(Q.isWebGL2===!0){let F=H.morphAttributes.position||H.morphAttributes.normal||H.morphAttributes.color,z=F!==void 0?F.length:0,U=I.get(H);if(U===void 0||U.count!==z){let h=function(){$.dispose(),I.delete(H),H.removeEventListener("dispose",h)};if(U!==void 0)U.texture.dispose();let E=H.morphAttributes.position!==void 0,w=H.morphAttributes.normal!==void 0,L=H.morphAttributes.color!==void 0,X=H.morphAttributes.position||[],V=H.morphAttributes.normal||[],D=H.morphAttributes.color||[],N=0;if(E===!0)N=1;if(w===!0)N=2;if(L===!0)N=3;let R=H.attributes.position.count*N,k=1;if(R>Q.maxTextureSize)k=Math.ceil(R/Q.maxTextureSize),R=Q.maxTextureSize;let P=new Float32Array(R*k*4*z),$=new nZ(P,R,k,z);$.type=1015,$.needsUpdate=!0;let _=N*4;for(let S=0;S<z;S++){let O=X[S],M=V[S],y=D[S],u=R*k*4*S;for(let T=0;T<O.count;T++){let d=T*_;if(E===!0)q.fromBufferAttribute(O,T),P[u+d+0]=q.x,P[u+d+1]=q.y,P[u+d+2]=q.z,P[u+d+3]=0;if(w===!0)q.fromBufferAttribute(M,T),P[u+d+4]=q.x,P[u+d+5]=q.y,P[u+d+6]=q.z,P[u+d+7]=0;if(L===!0)q.fromBufferAttribute(y,T),P[u+d+8]=q.x,P[u+d+9]=q.y,P[u+d+10]=q.z,P[u+d+11]=y.itemSize===4?q.w:1}}U={count:z,texture:$,size:new M0(R,k)},I.set(H,U),H.addEventListener("dispose",h)}if(Z.isInstancedMesh===!0&&Z.morphTexture!==null)G.getUniforms().setValue(A,"morphTexture",Z.morphTexture,B);else{let E=0;for(let L=0;L<W.length;L++)E+=W[L];let w=H.morphTargetsRelative?1:1-E;G.getUniforms().setValue(A,"morphTargetBaseInfluence",w),G.getUniforms().setValue(A,"morphTargetInfluences",W)}G.getUniforms().setValue(A,"morphTargetsTexture",U.texture,B),G.getUniforms().setValue(A,"morphTargetsTextureSize",U.size)}else{let F=W===void 0?0:W.length,z=C[H.id];if(z===void 0||z.length!==F){z=[];for(let X=0;X<F;X++)z[X]=[X,0];C[H.id]=z}for(let X=0;X<F;X++){let V=z[X];V[0]=X,V[1]=W[X]}z.sort(vf);for(let X=0;X<8;X++)if(X<F&&z[X][1])K[X][0]=z[X][0],K[X][1]=z[X][1];else K[X][0]=Number.MAX_SAFE_INTEGER,K[X][1]=0;K.sort(gf);let U=H.morphAttributes.position,E=H.morphAttributes.normal,w=0;for(let X=0;X<8;X++){let V=K[X],D=V[0],N=V[1];if(D!==Number.MAX_SAFE_INTEGER&&N){if(U&&H.getAttribute("morphTarget"+X)!==U[D])H.setAttribute("morphTarget"+X,U[D]);if(E&&H.getAttribute("morphNormal"+X)!==E[D])H.setAttribute("morphNormal"+X,E[D]);J[X]=N,w+=N}else{if(U&&H.hasAttribute("morphTarget"+X)===!0)H.deleteAttribute("morphTarget"+X);if(E&&H.hasAttribute("morphNormal"+X)===!0)H.deleteAttribute("morphNormal"+X);J[X]=0}}let L=H.morphTargetsRelative?1:1-w;G.getUniforms().setValue(A,"morphTargetBaseInfluence",L),G.getUniforms().setValue(A,"morphTargetInfluences",J)}}return{update:Y}}function uf(A,Q,B,C){let J=new WeakMap;function I(Y){let Z=C.render.frame,H=Y.geometry,G=Q.get(Y,H);if(J.get(G)!==Z)Q.update(G),J.set(G,Z);if(Y.isInstancedMesh){if(Y.hasEventListener("dispose",K)===!1)Y.addEventListener("dispose",K);if(J.get(Y)!==Z){if(B.update(Y.instanceMatrix,A.ARRAY_BUFFER),Y.instanceColor!==null)B.update(Y.instanceColor,A.ARRAY_BUFFER);J.set(Y,Z)}}if(Y.isSkinnedMesh){let W=Y.skeleton;if(J.get(W)!==Z)W.update(),J.set(W,Z)}return G}function q(){J=new WeakMap}function K(Y){let Z=Y.target;if(Z.removeEventListener("dispose",K),B.remove(Z.instanceMatrix),Z.instanceColor!==null)B.remove(Z.instanceColor)}return{update:I,dispose:q}}class eZ extends E1{constructor(A,Q,B,C,J,I,q,K,Y,Z){if(Z=Z!==void 0?Z:1026,Z!==1026&&Z!==1027)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");if(B===void 0&&Z===1026)B=1014;if(B===void 0&&Z===1027)B=1020;super(null,C,J,I,q,K,Z,B,Y);this.isDepthTexture=!0,this.image={width:A,height:Q},this.magFilter=q!==void 0?q:1003,this.minFilter=K!==void 0?K:1003,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(A){return super.copy(A),this.compareFunction=A.compareFunction,this}toJSON(A){let Q=super.toJSON(A);if(this.compareFunction!==null)Q.compareFunction=this.compareFunction;return Q}}var RE=new E1,LE=new eZ(1,1);LE.compareFunction=515;var ME=new nZ,OE=new vJ,kE=new KQ,VD=[],UD=[],zD=new Float32Array(16),DD=new Float32Array(9),ED=new Float32Array(4);function m7(A,Q,B){let C=A[0];if(C<=0||C>0)return A;let J=Q*B,I=VD[J];if(I===void 0)I=new Float32Array(J),VD[J]=I;if(Q!==0){C.toArray(I,0);for(let q=1,K=0;q!==Q;++q)K+=B,A[q].toArray(I,K)}return I}function Z2(A,Q){if(A.length!==Q.length)return!1;for(let B=0,C=A.length;B<C;B++)if(A[B]!==Q[B])return!1;return!0}function H2(A,Q){for(let B=0,C=Q.length;B<C;B++)A[B]=Q[B]}function pJ(A,Q){let B=UD[Q];if(B===void 0)B=new Int32Array(Q),UD[Q]=B;for(let C=0;C!==Q;++C)B[C]=A.allocateTextureUnit();return B}function pf(A,Q){let B=this.cache;if(B[0]===Q)return;A.uniform1f(this.addr,Q),B[0]=Q}function mf(A,Q){let B=this.cache;if(Q.x!==void 0){if(B[0]!==Q.x||B[1]!==Q.y)A.uniform2f(this.addr,Q.x,Q.y),B[0]=Q.x,B[1]=Q.y}else{if(Z2(B,Q))return;A.uniform2fv(this.addr,Q),H2(B,Q)}}function df(A,Q){let B=this.cache;if(Q.x!==void 0){if(B[0]!==Q.x||B[1]!==Q.y||B[2]!==Q.z)A.uniform3f(this.addr,Q.x,Q.y,Q.z),B[0]=Q.x,B[1]=Q.y,B[2]=Q.z}else if(Q.r!==void 0){if(B[0]!==Q.r||B[1]!==Q.g||B[2]!==Q.b)A.uniform3f(this.addr,Q.r,Q.g,Q.b),B[0]=Q.r,B[1]=Q.g,B[2]=Q.b}else{if(Z2(B,Q))return;A.uniform3fv(this.addr,Q),H2(B,Q)}}function cf(A,Q){let B=this.cache;if(Q.x!==void 0){if(B[0]!==Q.x||B[1]!==Q.y||B[2]!==Q.z||B[3]!==Q.w)A.uniform4f(this.addr,Q.x,Q.y,Q.z,Q.w),B[0]=Q.x,B[1]=Q.y,B[2]=Q.z,B[3]=Q.w}else{if(Z2(B,Q))return;A.uniform4fv(this.addr,Q),H2(B,Q)}}function lf(A,Q){let B=this.cache,C=Q.elements;if(C===void 0){if(Z2(B,Q))return;A.uniformMatrix2fv(this.addr,!1,Q),H2(B,Q)}else{if(Z2(B,C))return;ED.set(C),A.uniformMatrix2fv(this.addr,!1,ED),H2(B,C)}}function sf(A,Q){let B=this.cache,C=Q.elements;if(C===void 0){if(Z2(B,Q))return;A.uniformMatrix3fv(this.addr,!1,Q),H2(B,Q)}else{if(Z2(B,C))return;DD.set(C),A.uniformMatrix3fv(this.addr,!1,DD),H2(B,C)}}function nf(A,Q){let B=this.cache,C=Q.elements;if(C===void 0){if(Z2(B,Q))return;A.uniformMatrix4fv(this.addr,!1,Q),H2(B,Q)}else{if(Z2(B,C))return;zD.set(C),A.uniformMatrix4fv(this.addr,!1,zD),H2(B,C)}}function of(A,Q){let B=this.cache;if(B[0]===Q)return;A.uniform1i(this.addr,Q),B[0]=Q}function af(A,Q){let B=this.cache;if(Q.x!==void 0){if(B[0]!==Q.x||B[1]!==Q.y)A.uniform2i(this.addr,Q.x,Q.y),B[0]=Q.x,B[1]=Q.y}else{if(Z2(B,Q))return;A.uniform2iv(this.addr,Q),H2(B,Q)}}function rf(A,Q){let B=this.cache;if(Q.x!==void 0){if(B[0]!==Q.x||B[1]!==Q.y||B[2]!==Q.z)A.uniform3i(this.addr,Q.x,Q.y,Q.z),B[0]=Q.x,B[1]=Q.y,B[2]=Q.z}else{if(Z2(B,Q))return;A.uniform3iv(this.addr,Q),H2(B,Q)}}function tf(A,Q){let B=this.cache;if(Q.x!==void 0){if(B[0]!==Q.x||B[1]!==Q.y||B[2]!==Q.z||B[3]!==Q.w)A.uniform4i(this.addr,Q.x,Q.y,Q.z,Q.w),B[0]=Q.x,B[1]=Q.y,B[2]=Q.z,B[3]=Q.w}else{if(Z2(B,Q))return;A.uniform4iv(this.addr,Q),H2(B,Q)}}function ef(A,Q){let B=this.cache;if(B[0]===Q)return;A.uniform1ui(this.addr,Q),B[0]=Q}function Ah(A,Q){let B=this.cache;if(Q.x!==void 0){if(B[0]!==Q.x||B[1]!==Q.y)A.uniform2ui(this.addr,Q.x,Q.y),B[0]=Q.x,B[1]=Q.y}else{if(Z2(B,Q))return;A.uniform2uiv(this.addr,Q),H2(B,Q)}}function Qh(A,Q){let B=this.cache;if(Q.x!==void 0){if(B[0]!==Q.x||B[1]!==Q.y||B[2]!==Q.z)A.uniform3ui(this.addr,Q.x,Q.y,Q.z),B[0]=Q.x,B[1]=Q.y,B[2]=Q.z}else{if(Z2(B,Q))return;A.uniform3uiv(this.addr,Q),H2(B,Q)}}function Bh(A,Q){let B=this.cache;if(Q.x!==void 0){if(B[0]!==Q.x||B[1]!==Q.y||B[2]!==Q.z||B[3]!==Q.w)A.uniform4ui(this.addr,Q.x,Q.y,Q.z,Q.w),B[0]=Q.x,B[1]=Q.y,B[2]=Q.z,B[3]=Q.w}else{if(Z2(B,Q))return;A.uniform4uiv(this.addr,Q),H2(B,Q)}}function Ch(A,Q,B){let C=this.cache,J=B.allocateTextureUnit();if(C[0]!==J)A.uniform1i(this.addr,J),C[0]=J;let I=this.type===A.SAMPLER_2D_SHADOW?LE:RE;B.setTexture2D(Q||I,J)}function Jh(A,Q,B){let C=this.cache,J=B.allocateTextureUnit();if(C[0]!==J)A.uniform1i(this.addr,J),C[0]=J;B.setTexture3D(Q||OE,J)}function Ih(A,Q,B){let C=this.cache,J=B.allocateTextureUnit();if(C[0]!==J)A.uniform1i(this.addr,J),C[0]=J;B.setTextureCube(Q||kE,J)}function qh(A,Q,B){let C=this.cache,J=B.allocateTextureUnit();if(C[0]!==J)A.uniform1i(this.addr,J),C[0]=J;B.setTexture2DArray(Q||ME,J)}function Kh(A){switch(A){case 5126:return pf;case 35664:return mf;case 35665:return df;case 35666:return cf;case 35674:return lf;case 35675:return sf;case 35676:return nf;case 5124:case 35670:return of;case 35667:case 35671:return af;case 35668:case 35672:return rf;case 35669:case 35673:return tf;case 5125:return ef;case 36294:return Ah;case 36295:return Qh;case 36296:return Bh;case 35678:case 36198:case 36298:case 36306:case 35682:return Ch;case 35679:case 36299:case 36307:return Jh;case 35680:case 36300:case 36308:case 36293:return Ih;case 36289:case 36303:case 36311:case 36292:return qh}}function Yh(A,Q){A.uniform1fv(this.addr,Q)}function Zh(A,Q){let B=m7(Q,this.size,2);A.uniform2fv(this.addr,B)}function Hh(A,Q){let B=m7(Q,this.size,3);A.uniform3fv(this.addr,B)}function Xh(A,Q){let B=m7(Q,this.size,4);A.uniform4fv(this.addr,B)}function Gh(A,Q){let B=m7(Q,this.size,4);A.uniformMatrix2fv(this.addr,!1,B)}function Wh(A,Q){let B=m7(Q,this.size,9);A.uniformMatrix3fv(this.addr,!1,B)}function Fh(A,Q){let B=m7(Q,this.size,16);A.uniformMatrix4fv(this.addr,!1,B)}function Vh(A,Q){A.uniform1iv(this.addr,Q)}function Uh(A,Q){A.uniform2iv(this.addr,Q)}function zh(A,Q){A.uniform3iv(this.addr,Q)}function Dh(A,Q){A.uniform4iv(this.addr,Q)}function Eh(A,Q){A.uniform1uiv(this.addr,Q)}function wh(A,Q){A.uniform2uiv(this.addr,Q)}function Nh(A,Q){A.uniform3uiv(this.addr,Q)}function $h(A,Q){A.uniform4uiv(this.addr,Q)}function Rh(A,Q,B){let C=this.cache,J=Q.length,I=pJ(B,J);if(!Z2(C,I))A.uniform1iv(this.addr,I),H2(C,I);for(let q=0;q!==J;++q)B.setTexture2D(Q[q]||RE,I[q])}function Lh(A,Q,B){let C=this.cache,J=Q.length,I=pJ(B,J);if(!Z2(C,I))A.uniform1iv(this.addr,I),H2(C,I);for(let q=0;q!==J;++q)B.setTexture3D(Q[q]||OE,I[q])}function Mh(A,Q,B){let C=this.cache,J=Q.length,I=pJ(B,J);if(!Z2(C,I))A.uniform1iv(this.addr,I),H2(C,I);for(let q=0;q!==J;++q)B.setTextureCube(Q[q]||kE,I[q])}function Oh(A,Q,B){let C=this.cache,J=Q.length,I=pJ(B,J);if(!Z2(C,I))A.uniform1iv(this.addr,I),H2(C,I);for(let q=0;q!==J;++q)B.setTexture2DArray(Q[q]||ME,I[q])}function kh(A){switch(A){case 5126:return Yh;case 35664:return Zh;case 35665:return Hh;case 35666:return Xh;case 35674:return Gh;case 35675:return Wh;case 35676:return Fh;case 5124:case 35670:return Vh;case 35667:case 35671:return Uh;case 35668:case 35672:return zh;case 35669:case 35673:return Dh;case 5125:return Eh;case 36294:return wh;case 36295:return Nh;case 36296:return $h;case 35678:case 36198:case 36298:case 36306:case 35682:return Rh;case 35679:case 36299:case 36307:return Lh;case 35680:case 36300:case 36308:case 36293:return Mh;case 36289:case 36303:case 36311:case 36292:return Oh}}class PE{constructor(A,Q,B){this.id=A,this.addr=B,this.cache=[],this.type=Q.type,this.setValue=Kh(Q.type)}}class _E{constructor(A,Q,B){this.id=A,this.addr=B,this.cache=[],this.type=Q.type,this.size=Q.size,this.setValue=kh(Q.type)}}class TE{constructor(A){this.id=A,this.seq=[],this.map={}}setValue(A,Q,B){let C=this.seq;for(let J=0,I=C.length;J!==I;++J){let q=C[J];q.setValue(A,Q[q.id],B)}}}var yZ=/(\w+)(\])?(\[|\.)?/g;function wD(A,Q){A.seq.push(Q),A.map[Q.id]=Q}function Ph(A,Q,B){let C=A.name,J=C.length;yZ.lastIndex=0;while(!0){let I=yZ.exec(C),q=yZ.lastIndex,K=I[1],Y=I[2]==="]",Z=I[3];if(Y)K=K|0;if(Z===void 0||Z==="["&&q+2===J){wD(B,Z===void 0?new PE(K,A,Q):new _E(K,A,Q));break}else{let G=B.map[K];if(G===void 0)G=new TE(K),wD(B,G);B=G}}}class AQ{constructor(A,Q){this.seq=[],this.map={};let B=A.getProgramParameter(Q,A.ACTIVE_UNIFORMS);for(let C=0;C<B;++C){let J=A.getActiveUniform(Q,C),I=A.getUniformLocation(Q,J.name);Ph(J,I,this)}}setValue(A,Q,B,C){let J=this.map[Q];if(J!==void 0)J.setValue(A,B,C)}setOptional(A,Q,B){let C=Q[B];if(C!==void 0)this.setValue(A,B,C)}static upload(A,Q,B,C){for(let J=0,I=Q.length;J!==I;++J){let q=Q[J],K=B[q.id];if(K.needsUpdate!==!1)q.setValue(A,K.value,C)}}static seqWithValue(A,Q){let B=[];for(let C=0,J=A.length;C!==J;++C){let I=A[C];if(I.id in Q)B.push(I)}return B}}function ND(A,Q,B){let C=A.createShader(Q);return A.shaderSource(C,B),A.compileShader(C),C}var _h=37297,Th=0;function jh(A,Q){let B=A.split("\n"),C=[],J=Math.max(Q-6,0),I=Math.min(Q+6,B.length);for(let q=J;q<I;q++){let K=q+1;C.push(`${K===Q?">":" "} ${K}: ${B[q]}`)}return C.join("\n")}function Sh(A){let Q=O1.getPrimaries(O1.workingColorSpace),B=O1.getPrimaries(A),C;if(Q===B)C="";else if(Q==="p3"&&B==="rec709")C="LinearDisplayP3ToLinearSRGB";else if(Q==="rec709"&&B==="p3")C="LinearSRGBToLinearDisplayP3";switch(A){case"srgb-linear":case"display-p3-linear":return[C,"LinearTransferOETF"];case"srgb":case"display-p3":return[C,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",A),[C,"LinearTransferOETF"]}}function $D(A,Q,B){let C=A.getShaderParameter(Q,A.COMPILE_STATUS),J=A.getShaderInfoLog(Q).trim();if(C&&J==="")return"";let I=/ERROR: 0:(\d+)/.exec(J);if(I){let q=parseInt(I[1]);return B.toUpperCase()+"\n\n"+J+"\n\n"+jh(A.getShaderSource(Q),q)}else return J}function yh(A,Q){let B=Sh(Q);return`vec4 ${A}( vec4 value ) { return ${B[0]}( ${B[1]}( value ) ); }`}function fh(A,Q){let B;switch(Q){case 1:B="Linear";break;case 2:B="Reinhard";break;case 3:B="OptimizedCineon";break;case 4:B="ACESFilmic";break;case 6:B="AgX";break;case 7:B="Neutral";break;case 5:B="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",Q),B="Linear"}return"vec3 "+A+"( vec3 color ) { return "+B+"ToneMapping( color ); }"}function hh(A){return[A.extensionDerivatives||!!A.envMapCubeUVHeight||A.bumpMap||A.normalMapTangentSpace||A.clearcoatNormalMap||A.flatShading||A.alphaToCoverage||A.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(A.extensionFragDepth||A.logarithmicDepthBuffer)&&A.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",A.extensionDrawBuffers&&A.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(A.extensionShaderTextureLOD||A.envMap||A.transmission)&&A.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(_7).join("\n")}function xh(A){return[A.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",A.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(_7).join("\n")}function gh(A){let Q=[];for(let B in A){let C=A[B];if(C===!1)continue;Q.push("#define "+B+" "+C)}return Q.join("\n")}function vh(A,Q){let B={},C=A.getProgramParameter(Q,A.ACTIVE_ATTRIBUTES);for(let J=0;J<C;J++){let I=A.getActiveAttrib(Q,J),q=I.name,K=1;if(I.type===A.FLOAT_MAT2)K=2;if(I.type===A.FLOAT_MAT3)K=3;if(I.type===A.FLOAT_MAT4)K=4;B[q]={type:I.type,location:A.getAttribLocation(Q,q),locationSize:K}}return B}function _7(A){return A!==""}function RD(A,Q){let B=Q.numSpotLightShadows+Q.numSpotLightMaps-Q.numSpotLightShadowsWithMaps;return A.replace(/NUM_DIR_LIGHTS/g,Q.numDirLights).replace(/NUM_SPOT_LIGHTS/g,Q.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,Q.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,B).replace(/NUM_RECT_AREA_LIGHTS/g,Q.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,Q.numPointLights).replace(/NUM_HEMI_LIGHTS/g,Q.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,Q.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,Q.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,Q.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,Q.numPointLightShadows)}function LD(A,Q){return A.replace(/NUM_CLIPPING_PLANES/g,Q.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,Q.numClippingPlanes-Q.numClipIntersection)}var bh=/^[ \t]*#include +<([\w\d./]+)>/gm;function pZ(A){return A.replace(bh,ph)}var uh=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function ph(A,Q){let B=r0[Q];if(B===void 0){let C=uh.get(Q);if(C!==void 0)B=r0[C],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',Q,C);else throw new Error("Can not resolve #include <"+Q+">")}return pZ(B)}var mh=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function MD(A){return A.replace(mh,dh)}function dh(A,Q,B,C){let J="";for(let I=parseInt(Q);I<parseInt(B);I++)J+=C.replace(/\[\s*i\s*\]/g,"[ "+I+" ]").replace(/UNROLLED_LOOP_INDEX/g,I);return J}function OD(A){let Q=`precision ${A.precision} float;
	precision ${A.precision} int;
	precision ${A.precision} sampler2D;
	precision ${A.precision} samplerCube;
	`;if(A.isWebGL2)Q+=`precision ${A.precision} sampler3D;
		precision ${A.precision} sampler2DArray;
		precision ${A.precision} sampler2DShadow;
		precision ${A.precision} samplerCubeShadow;
		precision ${A.precision} sampler2DArrayShadow;
		precision ${A.precision} isampler2D;
		precision ${A.precision} isampler3D;
		precision ${A.precision} isamplerCube;
		precision ${A.precision} isampler2DArray;
		precision ${A.precision} usampler2D;
		precision ${A.precision} usampler3D;
		precision ${A.precision} usamplerCube;
		precision ${A.precision} usampler2DArray;
		`;if(A.precision==="highp")Q+="\n#define HIGH_PRECISION";else if(A.precision==="mediump")Q+="\n#define MEDIUM_PRECISION";else if(A.precision==="lowp")Q+="\n#define LOW_PRECISION";return Q}function ch(A){let Q="SHADOWMAP_TYPE_BASIC";if(A.shadowMapType===1)Q="SHADOWMAP_TYPE_PCF";else if(A.shadowMapType===2)Q="SHADOWMAP_TYPE_PCF_SOFT";else if(A.shadowMapType===3)Q="SHADOWMAP_TYPE_VSM";return Q}function lh(A){let Q="ENVMAP_TYPE_CUBE";if(A.envMap)switch(A.envMapMode){case 301:case 302:Q="ENVMAP_TYPE_CUBE";break;case 306:Q="ENVMAP_TYPE_CUBE_UV";break}return Q}function sh(A){let Q="ENVMAP_MODE_REFLECTION";if(A.envMap)switch(A.envMapMode){case 302:Q="ENVMAP_MODE_REFRACTION";break}return Q}function ih(A){let Q="ENVMAP_BLENDING_NONE";if(A.envMap)switch(A.combine){case 0:Q="ENVMAP_BLENDING_MULTIPLY";break;case 1:Q="ENVMAP_BLENDING_MIX";break;case 2:Q="ENVMAP_BLENDING_ADD";break}return Q}function nh(A){let Q=A.envMapCubeUVHeight;if(Q===null)return null;let B=Math.log2(Q)-2,C=1/Q;return{texelWidth:1/(3*Math.max(Math.pow(2,B),112)),texelHeight:C,maxMip:B}}function oh(A,Q,B,C){let J=A.getContext(),I=B.defines,q=B.vertexShader,K=B.fragmentShader,Y=ch(B),Z=lh(B),H=sh(B),G=ih(B),W=nh(B),F=B.isWebGL2?"":hh(B),z=xh(B),U=gh(I),E=J.createProgram(),w,L,X=B.glslVersion?"#version "+B.glslVersion+"\n":"";if(B.isRawShaderMaterial){if(w=["#define SHADER_TYPE "+B.shaderType,"#define SHADER_NAME "+B.shaderName,U].filter(_7).join("\n"),w.length>0)w+="\n";if(L=[F,"#define SHADER_TYPE "+B.shaderType,"#define SHADER_NAME "+B.shaderName,U].filter(_7).join("\n"),L.length>0)L+="\n"}else w=[OD(B),"#define SHADER_TYPE "+B.shaderType,"#define SHADER_NAME "+B.shaderName,U,B.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",B.batching?"#define USE_BATCHING":"",B.instancing?"#define USE_INSTANCING":"",B.instancingColor?"#define USE_INSTANCING_COLOR":"",B.instancingMorph?"#define USE_INSTANCING_MORPH":"",B.useFog&&B.fog?"#define USE_FOG":"",B.useFog&&B.fogExp2?"#define FOG_EXP2":"",B.map?"#define USE_MAP":"",B.envMap?"#define USE_ENVMAP":"",B.envMap?"#define "+H:"",B.lightMap?"#define USE_LIGHTMAP":"",B.aoMap?"#define USE_AOMAP":"",B.bumpMap?"#define USE_BUMPMAP":"",B.normalMap?"#define USE_NORMALMAP":"",B.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",B.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",B.displacementMap?"#define USE_DISPLACEMENTMAP":"",B.emissiveMap?"#define USE_EMISSIVEMAP":"",B.anisotropy?"#define USE_ANISOTROPY":"",B.anisotropyMap?"#define USE_ANISOTROPYMAP":"",B.clearcoatMap?"#define USE_CLEARCOATMAP":"",B.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",B.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",B.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",B.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",B.specularMap?"#define USE_SPECULARMAP":"",B.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",B.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",B.roughnessMap?"#define USE_ROUGHNESSMAP":"",B.metalnessMap?"#define USE_METALNESSMAP":"",B.alphaMap?"#define USE_ALPHAMAP":"",B.alphaHash?"#define USE_ALPHAHASH":"",B.transmission?"#define USE_TRANSMISSION":"",B.transmissionMap?"#define USE_TRANSMISSIONMAP":"",B.thicknessMap?"#define USE_THICKNESSMAP":"",B.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",B.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",B.mapUv?"#define MAP_UV "+B.mapUv:"",B.alphaMapUv?"#define ALPHAMAP_UV "+B.alphaMapUv:"",B.lightMapUv?"#define LIGHTMAP_UV "+B.lightMapUv:"",B.aoMapUv?"#define AOMAP_UV "+B.aoMapUv:"",B.emissiveMapUv?"#define EMISSIVEMAP_UV "+B.emissiveMapUv:"",B.bumpMapUv?"#define BUMPMAP_UV "+B.bumpMapUv:"",B.normalMapUv?"#define NORMALMAP_UV "+B.normalMapUv:"",B.displacementMapUv?"#define DISPLACEMENTMAP_UV "+B.displacementMapUv:"",B.metalnessMapUv?"#define METALNESSMAP_UV "+B.metalnessMapUv:"",B.roughnessMapUv?"#define ROUGHNESSMAP_UV "+B.roughnessMapUv:"",B.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+B.anisotropyMapUv:"",B.clearcoatMapUv?"#define CLEARCOATMAP_UV "+B.clearcoatMapUv:"",B.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+B.clearcoatNormalMapUv:"",B.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+B.clearcoatRoughnessMapUv:"",B.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+B.iridescenceMapUv:"",B.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+B.iridescenceThicknessMapUv:"",B.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+B.sheenColorMapUv:"",B.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+B.sheenRoughnessMapUv:"",B.specularMapUv?"#define SPECULARMAP_UV "+B.specularMapUv:"",B.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+B.specularColorMapUv:"",B.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+B.specularIntensityMapUv:"",B.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+B.transmissionMapUv:"",B.thicknessMapUv?"#define THICKNESSMAP_UV "+B.thicknessMapUv:"",B.vertexTangents&&B.flatShading===!1?"#define USE_TANGENT":"",B.vertexColors?"#define USE_COLOR":"",B.vertexAlphas?"#define USE_COLOR_ALPHA":"",B.vertexUv1s?"#define USE_UV1":"",B.vertexUv2s?"#define USE_UV2":"",B.vertexUv3s?"#define USE_UV3":"",B.pointsUvs?"#define USE_POINTS_UV":"",B.flatShading?"#define FLAT_SHADED":"",B.skinning?"#define USE_SKINNING":"",B.morphTargets?"#define USE_MORPHTARGETS":"",B.morphNormals&&B.flatShading===!1?"#define USE_MORPHNORMALS":"",B.morphColors&&B.isWebGL2?"#define USE_MORPHCOLORS":"",B.morphTargetsCount>0&&B.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",B.morphTargetsCount>0&&B.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+B.morphTextureStride:"",B.morphTargetsCount>0&&B.isWebGL2?"#define MORPHTARGETS_COUNT "+B.morphTargetsCount:"",B.doubleSided?"#define DOUBLE_SIDED":"",B.flipSided?"#define FLIP_SIDED":"",B.shadowMapEnabled?"#define USE_SHADOWMAP":"",B.shadowMapEnabled?"#define "+Y:"",B.sizeAttenuation?"#define USE_SIZEATTENUATION":"",B.numLightProbes>0?"#define USE_LIGHT_PROBES":"",B.useLegacyLights?"#define LEGACY_LIGHTS":"",B.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",B.logarithmicDepthBuffer&&B.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif","\n"].filter(_7).join("\n"),L=[F,OD(B),"#define SHADER_TYPE "+B.shaderType,"#define SHADER_NAME "+B.shaderName,U,B.useFog&&B.fog?"#define USE_FOG":"",B.useFog&&B.fogExp2?"#define FOG_EXP2":"",B.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",B.map?"#define USE_MAP":"",B.matcap?"#define USE_MATCAP":"",B.envMap?"#define USE_ENVMAP":"",B.envMap?"#define "+Z:"",B.envMap?"#define "+H:"",B.envMap?"#define "+G:"",W?"#define CUBEUV_TEXEL_WIDTH "+W.texelWidth:"",W?"#define CUBEUV_TEXEL_HEIGHT "+W.texelHeight:"",W?"#define CUBEUV_MAX_MIP "+W.maxMip+".0":"",B.lightMap?"#define USE_LIGHTMAP":"",B.aoMap?"#define USE_AOMAP":"",B.bumpMap?"#define USE_BUMPMAP":"",B.normalMap?"#define USE_NORMALMAP":"",B.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",B.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",B.emissiveMap?"#define USE_EMISSIVEMAP":"",B.anisotropy?"#define USE_ANISOTROPY":"",B.anisotropyMap?"#define USE_ANISOTROPYMAP":"",B.clearcoat?"#define USE_CLEARCOAT":"",B.clearcoatMap?"#define USE_CLEARCOATMAP":"",B.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",B.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",B.iridescence?"#define USE_IRIDESCENCE":"",B.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",B.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",B.specularMap?"#define USE_SPECULARMAP":"",B.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",B.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",B.roughnessMap?"#define USE_ROUGHNESSMAP":"",B.metalnessMap?"#define USE_METALNESSMAP":"",B.alphaMap?"#define USE_ALPHAMAP":"",B.alphaTest?"#define USE_ALPHATEST":"",B.alphaHash?"#define USE_ALPHAHASH":"",B.sheen?"#define USE_SHEEN":"",B.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",B.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",B.transmission?"#define USE_TRANSMISSION":"",B.transmissionMap?"#define USE_TRANSMISSIONMAP":"",B.thicknessMap?"#define USE_THICKNESSMAP":"",B.vertexTangents&&B.flatShading===!1?"#define USE_TANGENT":"",B.vertexColors||B.instancingColor?"#define USE_COLOR":"",B.vertexAlphas?"#define USE_COLOR_ALPHA":"",B.vertexUv1s?"#define USE_UV1":"",B.vertexUv2s?"#define USE_UV2":"",B.vertexUv3s?"#define USE_UV3":"",B.pointsUvs?"#define USE_POINTS_UV":"",B.gradientMap?"#define USE_GRADIENTMAP":"",B.flatShading?"#define FLAT_SHADED":"",B.doubleSided?"#define DOUBLE_SIDED":"",B.flipSided?"#define FLIP_SIDED":"",B.shadowMapEnabled?"#define USE_SHADOWMAP":"",B.shadowMapEnabled?"#define "+Y:"",B.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",B.numLightProbes>0?"#define USE_LIGHT_PROBES":"",B.useLegacyLights?"#define LEGACY_LIGHTS":"",B.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",B.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",B.logarithmicDepthBuffer&&B.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",B.toneMapping!==0?"#define TONE_MAPPING":"",B.toneMapping!==0?r0.tonemapping_pars_fragment:"",B.toneMapping!==0?fh("toneMapping",B.toneMapping):"",B.dithering?"#define DITHERING":"",B.opaque?"#define OPAQUE":"",r0.colorspace_pars_fragment,yh("linearToOutputTexel",B.outputColorSpace),B.useDepthPacking?"#define DEPTH_PACKING "+B.depthPacking:"","\n"].filter(_7).join("\n");if(q=pZ(q),q=RD(q,B),q=LD(q,B),K=pZ(K),K=RD(K,B),K=LD(K,B),q=MD(q),K=MD(K),B.isWebGL2&&B.isRawShaderMaterial!==!0)X="#version 300 es\n",w=[z,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+w,L=["precision mediump sampler2DArray;","#define varying in",B.glslVersion==="300 es"?"":"layout(location = 0) out highp vec4 pc_fragColor;",B.glslVersion==="300 es"?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+L;let V=X+w+q,D=X+L+K,N=ND(J,J.VERTEX_SHADER,V),R=ND(J,J.FRAGMENT_SHADER,D);if(J.attachShader(E,N),J.attachShader(E,R),B.index0AttributeName!==void 0)J.bindAttribLocation(E,0,B.index0AttributeName);else if(B.morphTargets===!0)J.bindAttribLocation(E,0,"position");J.linkProgram(E);function k(h){if(A.debug.checkShaderErrors){let S=J.getProgramInfoLog(E).trim(),O=J.getShaderInfoLog(N).trim(),M=J.getShaderInfoLog(R).trim(),y=!0,u=!0;if(J.getProgramParameter(E,J.LINK_STATUS)===!1)if(y=!1,typeof A.debug.onShaderError==="function")A.debug.onShaderError(J,E,N,R);else{let T=$D(J,N,"vertex"),d=$D(J,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+J.getError()+" - VALIDATE_STATUS "+J.getProgramParameter(E,J.VALIDATE_STATUS)+"\n\nMaterial Name: "+h.name+"\nMaterial Type: "+h.type+"\n\nProgram Info Log: "+S+"\n"+T+"\n"+d)}else if(S!=="")console.warn("THREE.WebGLProgram: Program Info Log:",S);else if(O===""||M==="")u=!1;if(u)h.diagnostics={runnable:y,programLog:S,vertexShader:{log:O,prefix:w},fragmentShader:{log:M,prefix:L}}}J.deleteShader(N),J.deleteShader(R),P=new AQ(J,E),$=vh(J,E)}let P;this.getUniforms=function(){if(P===void 0)k(this);return P};let $;this.getAttributes=function(){if($===void 0)k(this);return $};let _=B.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){if(_===!1)_=J.getProgramParameter(E,_h);return _},this.destroy=function(){C.releaseStatesOfProgram(this),J.deleteProgram(E),this.program=void 0},this.type=B.shaderType,this.name=B.shaderName,this.id=Th++,this.cacheKey=Q,this.usedTimes=1,this.program=E,this.vertexShader=N,this.fragmentShader=R,this}var ah=0;class jE{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(A){let{vertexShader:Q,fragmentShader:B}=A,C=this._getShaderStage(Q),J=this._getShaderStage(B),I=this._getShaderCacheForMaterial(A);if(I.has(C)===!1)I.add(C),C.usedTimes++;if(I.has(J)===!1)I.add(J),J.usedTimes++;return this}remove(A){let Q=this.materialCache.get(A);for(let B of Q)if(B.usedTimes--,B.usedTimes===0)this.shaderCache.delete(B.code);return this.materialCache.delete(A),this}getVertexShaderID(A){return this._getShaderStage(A.vertexShader).id}getFragmentShaderID(A){return this._getShaderStage(A.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(A){let Q=this.materialCache,B=Q.get(A);if(B===void 0)B=new Set,Q.set(A,B);return B}_getShaderStage(A){let Q=this.shaderCache,B=Q.get(A);if(B===void 0)B=new SE(A),Q.set(A,B);return B}}class SE{constructor(A){this.id=ah++,this.code=A,this.usedTimes=0}}function rh(A,Q,B,C,J,I,q){let K=new bJ,Y=new jE,Z=new Set,H=[],G=J.isWebGL2,W=J.logarithmicDepthBuffer,F=J.vertexTextures,z=J.precision,U={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function E($){if(Z.add($),$===0)return"uv";return`uv${$}`}function w($,_,h,S,O){let M=S.fog,y=O.geometry,u=$.isMeshStandardMaterial?S.environment:null,T=($.isMeshStandardMaterial?B:Q).get($.envMap||u),d=!!T&&T.mapping===306?T.image.height:null,g=U[$.type];if($.precision!==null){if(z=J.getMaxPrecision($.precision),z!==$.precision)console.warn("THREE.WebGLProgram.getParameters:",$.precision,"not supported, using",z,"instead.")}let l=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,t=l!==void 0?l.length:0,i=0;if(y.morphAttributes.position!==void 0)i=1;if(y.morphAttributes.normal!==void 0)i=2;if(y.morphAttributes.color!==void 0)i=3;let n,J0,e,H0;if(g){let D1=f4[g];n=D1.vertexShader,J0=D1.fragmentShader}else n=$.vertexShader,J0=$.fragmentShader,Y.update($),e=Y.getVertexShaderID($),H0=Y.getFragmentShaderID($);let X0=A.getRenderTarget(),L0=O.isInstancedMesh===!0,T0=O.isBatchedMesh===!0,s=!!$.map,P1=!!$.matcap,Z0=!!T,G0=!!$.aoMap,x0=!!$.lightMap,J1=!!$.bumpMap,S0=!!$.normalMap,t0=!!$.displacementMap,h1=!!$.emissiveMap,$1=!!$.metalnessMap,m=!!$.roughnessMap,j=$.anisotropy>0,C0=$.clearcoat>0,I0=$.iridescence>0,F0=$.sheen>0,Y0=$.transmission>0,i0=j&&!!$.anisotropyMap,g0=C0&&!!$.clearcoatMap,w0=C0&&!!$.clearcoatNormalMap,$0=C0&&!!$.clearcoatRoughnessMap,z1=I0&&!!$.iridescenceMap,V0=I0&&!!$.iridescenceThicknessMap,o1=F0&&!!$.sheenColorMap,c0=F0&&!!$.sheenRoughnessMap,v0=!!$.specularMap,u0=!!$.specularColorMap,b=!!$.specularIntensityMap,q0=Y0&&!!$.transmissionMap,P0=Y0&&!!$.thicknessMap,m0=!!$.gradientMap,c=!!$.alphaMap,D0=$.alphaTest>0,r=!!$.alphaHash,E0=!!$.extensions,R0=0;if($.toneMapped){if(X0===null||X0.isXRRenderTarget===!0)R0=A.toneMapping}let I1={isWebGL2:G,shaderID:g,shaderType:$.type,shaderName:$.name,vertexShader:n,fragmentShader:J0,defines:$.defines,customVertexShaderID:e,customFragmentShaderID:H0,isRawShaderMaterial:$.isRawShaderMaterial===!0,glslVersion:$.glslVersion,precision:z,batching:T0,instancing:L0,instancingColor:L0&&O.instanceColor!==null,instancingMorph:L0&&O.morphTexture!==null,supportsVertexTextures:F,outputColorSpace:X0===null?A.outputColorSpace:X0.isXRRenderTarget===!0?X0.texture.colorSpace:"srgb-linear",alphaToCoverage:!!$.alphaToCoverage,map:s,matcap:P1,envMap:Z0,envMapMode:Z0&&T.mapping,envMapCubeUVHeight:d,aoMap:G0,lightMap:x0,bumpMap:J1,normalMap:S0,displacementMap:F&&t0,emissiveMap:h1,normalMapObjectSpace:S0&&$.normalMapType===1,normalMapTangentSpace:S0&&$.normalMapType===0,metalnessMap:$1,roughnessMap:m,anisotropy:j,anisotropyMap:i0,clearcoat:C0,clearcoatMap:g0,clearcoatNormalMap:w0,clearcoatRoughnessMap:$0,iridescence:I0,iridescenceMap:z1,iridescenceThicknessMap:V0,sheen:F0,sheenColorMap:o1,sheenRoughnessMap:c0,specularMap:v0,specularColorMap:u0,specularIntensityMap:b,transmission:Y0,transmissionMap:q0,thicknessMap:P0,gradientMap:m0,opaque:$.transparent===!1&&$.blending===1&&$.alphaToCoverage===!1,alphaMap:c,alphaTest:D0,alphaHash:r,combine:$.combine,mapUv:s&&E($.map.channel),aoMapUv:G0&&E($.aoMap.channel),lightMapUv:x0&&E($.lightMap.channel),bumpMapUv:J1&&E($.bumpMap.channel),normalMapUv:S0&&E($.normalMap.channel),displacementMapUv:t0&&E($.displacementMap.channel),emissiveMapUv:h1&&E($.emissiveMap.channel),metalnessMapUv:$1&&E($.metalnessMap.channel),roughnessMapUv:m&&E($.roughnessMap.channel),anisotropyMapUv:i0&&E($.anisotropyMap.channel),clearcoatMapUv:g0&&E($.clearcoatMap.channel),clearcoatNormalMapUv:w0&&E($.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:$0&&E($.clearcoatRoughnessMap.channel),iridescenceMapUv:z1&&E($.iridescenceMap.channel),iridescenceThicknessMapUv:V0&&E($.iridescenceThicknessMap.channel),sheenColorMapUv:o1&&E($.sheenColorMap.channel),sheenRoughnessMapUv:c0&&E($.sheenRoughnessMap.channel),specularMapUv:v0&&E($.specularMap.channel),specularColorMapUv:u0&&E($.specularColorMap.channel),specularIntensityMapUv:b&&E($.specularIntensityMap.channel),transmissionMapUv:q0&&E($.transmissionMap.channel),thicknessMapUv:P0&&E($.thicknessMap.channel),alphaMapUv:c&&E($.alphaMap.channel),vertexTangents:!!y.attributes.tangent&&(S0||j),vertexColors:$.vertexColors,vertexAlphas:$.vertexColors===!0&&!!y.attributes.color&&y.attributes.color.itemSize===4,pointsUvs:O.isPoints===!0&&!!y.attributes.uv&&(s||c),fog:!!M,useFog:$.fog===!0,fogExp2:!!M&&M.isFogExp2,flatShading:$.flatShading===!0,sizeAttenuation:$.sizeAttenuation===!0,logarithmicDepthBuffer:W,skinning:O.isSkinnedMesh===!0,morphTargets:y.morphAttributes.position!==void 0,morphNormals:y.morphAttributes.normal!==void 0,morphColors:y.morphAttributes.color!==void 0,morphTargetsCount:t,morphTextureStride:i,numDirLights:_.directional.length,numPointLights:_.point.length,numSpotLights:_.spot.length,numSpotLightMaps:_.spotLightMap.length,numRectAreaLights:_.rectArea.length,numHemiLights:_.hemi.length,numDirLightShadows:_.directionalShadowMap.length,numPointLightShadows:_.pointShadowMap.length,numSpotLightShadows:_.spotShadowMap.length,numSpotLightShadowsWithMaps:_.numSpotLightShadowsWithMaps,numLightProbes:_.numLightProbes,numClippingPlanes:q.numPlanes,numClipIntersection:q.numIntersection,dithering:$.dithering,shadowMapEnabled:A.shadowMap.enabled&&h.length>0,shadowMapType:A.shadowMap.type,toneMapping:R0,useLegacyLights:A._useLegacyLights,decodeVideoTexture:s&&$.map.isVideoTexture===!0&&O1.getTransfer($.map.colorSpace)==="srgb",premultipliedAlpha:$.premultipliedAlpha,doubleSided:$.side===2,flipSided:$.side===1,useDepthPacking:$.depthPacking>=0,depthPacking:$.depthPacking||0,index0AttributeName:$.index0AttributeName,extensionDerivatives:E0&&$.extensions.derivatives===!0,extensionFragDepth:E0&&$.extensions.fragDepth===!0,extensionDrawBuffers:E0&&$.extensions.drawBuffers===!0,extensionShaderTextureLOD:E0&&$.extensions.shaderTextureLOD===!0,extensionClipCullDistance:E0&&$.extensions.clipCullDistance===!0&&C.has("WEBGL_clip_cull_distance"),extensionMultiDraw:E0&&$.extensions.multiDraw===!0&&C.has("WEBGL_multi_draw"),rendererExtensionFragDepth:G||C.has("EXT_frag_depth"),rendererExtensionDrawBuffers:G||C.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:G||C.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:C.has("KHR_parallel_shader_compile"),customProgramCacheKey:$.customProgramCacheKey()};return I1.vertexUv1s=Z.has(1),I1.vertexUv2s=Z.has(2),I1.vertexUv3s=Z.has(3),Z.clear(),I1}function L($){let _=[];if($.shaderID)_.push($.shaderID);else _.push($.customVertexShaderID),_.push($.customFragmentShaderID);if($.defines!==void 0)for(let h in $.defines)_.push(h),_.push($.defines[h]);if($.isRawShaderMaterial===!1)X(_,$),V(_,$),_.push(A.outputColorSpace);return _.push($.customProgramCacheKey),_.join()}function X($,_){$.push(_.precision),$.push(_.outputColorSpace),$.push(_.envMapMode),$.push(_.envMapCubeUVHeight),$.push(_.mapUv),$.push(_.alphaMapUv),$.push(_.lightMapUv),$.push(_.aoMapUv),$.push(_.bumpMapUv),$.push(_.normalMapUv),$.push(_.displacementMapUv),$.push(_.emissiveMapUv),$.push(_.metalnessMapUv),$.push(_.roughnessMapUv),$.push(_.anisotropyMapUv),$.push(_.clearcoatMapUv),$.push(_.clearcoatNormalMapUv),$.push(_.clearcoatRoughnessMapUv),$.push(_.iridescenceMapUv),$.push(_.iridescenceThicknessMapUv),$.push(_.sheenColorMapUv),$.push(_.sheenRoughnessMapUv),$.push(_.specularMapUv),$.push(_.specularColorMapUv),$.push(_.specularIntensityMapUv),$.push(_.transmissionMapUv),$.push(_.thicknessMapUv),$.push(_.combine),$.push(_.fogExp2),$.push(_.sizeAttenuation),$.push(_.morphTargetsCount),$.push(_.morphAttributeCount),$.push(_.numDirLights),$.push(_.numPointLights),$.push(_.numSpotLights),$.push(_.numSpotLightMaps),$.push(_.numHemiLights),$.push(_.numRectAreaLights),$.push(_.numDirLightShadows),$.push(_.numPointLightShadows),$.push(_.numSpotLightShadows),$.push(_.numSpotLightShadowsWithMaps),$.push(_.numLightProbes),$.push(_.shadowMapType),$.push(_.toneMapping),$.push(_.numClippingPlanes),$.push(_.numClipIntersection),$.push(_.depthPacking)}function V($,_){if(K.disableAll(),_.isWebGL2)K.enable(0);if(_.supportsVertexTextures)K.enable(1);if(_.instancing)K.enable(2);if(_.instancingColor)K.enable(3);if(_.instancingMorph)K.enable(4);if(_.matcap)K.enable(5);if(_.envMap)K.enable(6);if(_.normalMapObjectSpace)K.enable(7);if(_.normalMapTangentSpace)K.enable(8);if(_.clearcoat)K.enable(9);if(_.iridescence)K.enable(10);if(_.alphaTest)K.enable(11);if(_.vertexColors)K.enable(12);if(_.vertexAlphas)K.enable(13);if(_.vertexUv1s)K.enable(14);if(_.vertexUv2s)K.enable(15);if(_.vertexUv3s)K.enable(16);if(_.vertexTangents)K.enable(17);if(_.anisotropy)K.enable(18);if(_.alphaHash)K.enable(19);if(_.batching)K.enable(20);if($.push(K.mask),K.disableAll(),_.fog)K.enable(0);if(_.useFog)K.enable(1);if(_.flatShading)K.enable(2);if(_.logarithmicDepthBuffer)K.enable(3);if(_.skinning)K.enable(4);if(_.morphTargets)K.enable(5);if(_.morphNormals)K.enable(6);if(_.morphColors)K.enable(7);if(_.premultipliedAlpha)K.enable(8);if(_.shadowMapEnabled)K.enable(9);if(_.useLegacyLights)K.enable(10);if(_.doubleSided)K.enable(11);if(_.flipSided)K.enable(12);if(_.useDepthPacking)K.enable(13);if(_.dithering)K.enable(14);if(_.transmission)K.enable(15);if(_.sheen)K.enable(16);if(_.opaque)K.enable(17);if(_.pointsUvs)K.enable(18);if(_.decodeVideoTexture)K.enable(19);if(_.alphaToCoverage)K.enable(20);$.push(K.mask)}function D($){let _=U[$.type],h;if(_){let S=f4[_];h=gj.clone(S.uniforms)}else h=$.uniforms;return h}function N($,_){let h;for(let S=0,O=H.length;S<O;S++){let M=H[S];if(M.cacheKey===_){h=M,++h.usedTimes;break}}if(h===void 0)h=new oh(A,_,$,I),H.push(h);return h}function R($){if(--$.usedTimes===0){let _=H.indexOf($);H[_]=H[H.length-1],H.pop(),$.destroy()}}function k($){Y.remove($)}function P(){Y.dispose()}return{getParameters:w,getProgramCacheKey:L,getUniforms:D,acquireProgram:N,releaseProgram:R,releaseShaderCache:k,programs:H,dispose:P}}function th(){let A=new WeakMap;function Q(I){let q=A.get(I);if(q===void 0)q={},A.set(I,q);return q}function B(I){A.delete(I)}function C(I,q,K){A.get(I)[q]=K}function J(){A=new WeakMap}return{get:Q,remove:B,update:C,dispose:J}}function eh(A,Q){if(A.groupOrder!==Q.groupOrder)return A.groupOrder-Q.groupOrder;else if(A.renderOrder!==Q.renderOrder)return A.renderOrder-Q.renderOrder;else if(A.material.id!==Q.material.id)return A.material.id-Q.material.id;else if(A.z!==Q.z)return A.z-Q.z;else return A.id-Q.id}function kD(A,Q){if(A.groupOrder!==Q.groupOrder)return A.groupOrder-Q.groupOrder;else if(A.renderOrder!==Q.renderOrder)return A.renderOrder-Q.renderOrder;else if(A.z!==Q.z)return Q.z-A.z;else return A.id-Q.id}function PD(){let A=[],Q=0,B=[],C=[],J=[];function I(){Q=0,B.length=0,C.length=0,J.length=0}function q(G,W,F,z,U,E){let w=A[Q];if(w===void 0)w={id:G.id,object:G,geometry:W,material:F,groupOrder:z,renderOrder:G.renderOrder,z:U,group:E},A[Q]=w;else w.id=G.id,w.object=G,w.geometry=W,w.material=F,w.groupOrder=z,w.renderOrder=G.renderOrder,w.z=U,w.group=E;return Q++,w}function K(G,W,F,z,U,E){let w=q(G,W,F,z,U,E);if(F.transmission>0)C.push(w);else if(F.transparent===!0)J.push(w);else B.push(w)}function Y(G,W,F,z,U,E){let w=q(G,W,F,z,U,E);if(F.transmission>0)C.unshift(w);else if(F.transparent===!0)J.unshift(w);else B.unshift(w)}function Z(G,W){if(B.length>1)B.sort(G||eh);if(C.length>1)C.sort(W||kD);if(J.length>1)J.sort(W||kD)}function H(){for(let G=Q,W=A.length;G<W;G++){let F=A[G];if(F.id===null)break;F.id=null,F.object=null,F.geometry=null,F.material=null,F.group=null}}return{opaque:B,transmissive:C,transparent:J,init:I,push:K,unshift:Y,finish:H,sort:Z}}function Ax(){let A=new WeakMap;function Q(C,J){let I=A.get(C),q;if(I===void 0)q=new PD,A.set(C,[q]);else if(J>=I.length)q=new PD,I.push(q);else q=I[J];return q}function B(){A=new WeakMap}return{get:Q,dispose:B}}function Qx(){let A={};return{get:function(Q){if(A[Q.id]!==void 0)return A[Q.id];let B;switch(Q.type){case"DirectionalLight":B={direction:new p,color:new p0};break;case"SpotLight":B={position:new p,direction:new p,color:new p0,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":B={position:new p,color:new p0,distance:0,decay:0};break;case"HemisphereLight":B={direction:new p,skyColor:new p0,groundColor:new p0};break;case"RectAreaLight":B={color:new p0,position:new p,halfWidth:new p,halfHeight:new p};break}return A[Q.id]=B,B}}}function Bx(){let A={};return{get:function(Q){if(A[Q.id]!==void 0)return A[Q.id];let B;switch(Q.type){case"DirectionalLight":B={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new M0};break;case"SpotLight":B={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new M0};break;case"PointLight":B={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new M0,shadowCameraNear:1,shadowCameraFar:1000};break}return A[Q.id]=B,B}}}var Cx=0;function Jx(A,Q){return(Q.castShadow?2:0)-(A.castShadow?2:0)+(Q.map?1:0)-(A.map?1:0)}function Ix(A,Q){let B=new Qx,C=Bx(),J={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let H=0;H<9;H++)J.probe.push(new p);let I=new p,q=new h0,K=new h0;function Y(H,G){let W=0,F=0,z=0;for(let h=0;h<9;h++)J.probe[h].set(0,0,0);let U=0,E=0,w=0,L=0,X=0,V=0,D=0,N=0,R=0,k=0,P=0;H.sort(Jx);let $=G===!0?Math.PI:1;for(let h=0,S=H.length;h<S;h++){let O=H[h],M=O.color,y=O.intensity,u=O.distance,T=O.shadow&&O.shadow.map?O.shadow.map.texture:null;if(O.isAmbientLight)W+=M.r*y*$,F+=M.g*y*$,z+=M.b*y*$;else if(O.isLightProbe){for(let d=0;d<9;d++)J.probe[d].addScaledVector(O.sh.coefficients[d],y);P++}else if(O.isDirectionalLight){let d=B.get(O);if(d.color.copy(O.color).multiplyScalar(O.intensity*$),O.castShadow){let g=O.shadow,l=C.get(O);l.shadowBias=g.bias,l.shadowNormalBias=g.normalBias,l.shadowRadius=g.radius,l.shadowMapSize=g.mapSize,J.directionalShadow[U]=l,J.directionalShadowMap[U]=T,J.directionalShadowMatrix[U]=O.shadow.matrix,V++}J.directional[U]=d,U++}else if(O.isSpotLight){let d=B.get(O);d.position.setFromMatrixPosition(O.matrixWorld),d.color.copy(M).multiplyScalar(y*$),d.distance=u,d.coneCos=Math.cos(O.angle),d.penumbraCos=Math.cos(O.angle*(1-O.penumbra)),d.decay=O.decay,J.spot[w]=d;let g=O.shadow;if(O.map){if(J.spotLightMap[R]=O.map,R++,g.updateMatrices(O),O.castShadow)k++}if(J.spotLightMatrix[w]=g.matrix,O.castShadow){let l=C.get(O);l.shadowBias=g.bias,l.shadowNormalBias=g.normalBias,l.shadowRadius=g.radius,l.shadowMapSize=g.mapSize,J.spotShadow[w]=l,J.spotShadowMap[w]=T,N++}w++}else if(O.isRectAreaLight){let d=B.get(O);d.color.copy(M).multiplyScalar(y),d.halfWidth.set(O.width*0.5,0,0),d.halfHeight.set(0,O.height*0.5,0),J.rectArea[L]=d,L++}else if(O.isPointLight){let d=B.get(O);if(d.color.copy(O.color).multiplyScalar(O.intensity*$),d.distance=O.distance,d.decay=O.decay,O.castShadow){let g=O.shadow,l=C.get(O);l.shadowBias=g.bias,l.shadowNormalBias=g.normalBias,l.shadowRadius=g.radius,l.shadowMapSize=g.mapSize,l.shadowCameraNear=g.camera.near,l.shadowCameraFar=g.camera.far,J.pointShadow[E]=l,J.pointShadowMap[E]=T,J.pointShadowMatrix[E]=O.shadow.matrix,D++}J.point[E]=d,E++}else if(O.isHemisphereLight){let d=B.get(O);d.skyColor.copy(O.color).multiplyScalar(y*$),d.groundColor.copy(O.groundColor).multiplyScalar(y*$),J.hemi[X]=d,X++}}if(L>0)if(Q.isWebGL2)if(A.has("OES_texture_float_linear")===!0)J.rectAreaLTC1=N0.LTC_FLOAT_1,J.rectAreaLTC2=N0.LTC_FLOAT_2;else J.rectAreaLTC1=N0.LTC_HALF_1,J.rectAreaLTC2=N0.LTC_HALF_2;else if(A.has("OES_texture_float_linear")===!0)J.rectAreaLTC1=N0.LTC_FLOAT_1,J.rectAreaLTC2=N0.LTC_FLOAT_2;else if(A.has("OES_texture_half_float_linear")===!0)J.rectAreaLTC1=N0.LTC_HALF_1,J.rectAreaLTC2=N0.LTC_HALF_2;else console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.");J.ambient[0]=W,J.ambient[1]=F,J.ambient[2]=z;let _=J.hash;if(_.directionalLength!==U||_.pointLength!==E||_.spotLength!==w||_.rectAreaLength!==L||_.hemiLength!==X||_.numDirectionalShadows!==V||_.numPointShadows!==D||_.numSpotShadows!==N||_.numSpotMaps!==R||_.numLightProbes!==P)J.directional.length=U,J.spot.length=w,J.rectArea.length=L,J.point.length=E,J.hemi.length=X,J.directionalShadow.length=V,J.directionalShadowMap.length=V,J.pointShadow.length=D,J.pointShadowMap.length=D,J.spotShadow.length=N,J.spotShadowMap.length=N,J.directionalShadowMatrix.length=V,J.pointShadowMatrix.length=D,J.spotLightMatrix.length=N+R-k,J.spotLightMap.length=R,J.numSpotLightShadowsWithMaps=k,J.numLightProbes=P,_.directionalLength=U,_.pointLength=E,_.spotLength=w,_.rectAreaLength=L,_.hemiLength=X,_.numDirectionalShadows=V,_.numPointShadows=D,_.numSpotShadows=N,_.numSpotMaps=R,_.numLightProbes=P,J.version=Cx++}function Z(H,G){let W=0,F=0,z=0,U=0,E=0,w=G.matrixWorldInverse;for(let L=0,X=H.length;L<X;L++){let V=H[L];if(V.isDirectionalLight){let D=J.directional[W];D.direction.setFromMatrixPosition(V.matrixWorld),I.setFromMatrixPosition(V.target.matrixWorld),D.direction.sub(I),D.direction.transformDirection(w),W++}else if(V.isSpotLight){let D=J.spot[z];D.position.setFromMatrixPosition(V.matrixWorld),D.position.applyMatrix4(w),D.direction.setFromMatrixPosition(V.matrixWorld),I.setFromMatrixPosition(V.target.matrixWorld),D.direction.sub(I),D.direction.transformDirection(w),z++}else if(V.isRectAreaLight){let D=J.rectArea[U];D.position.setFromMatrixPosition(V.matrixWorld),D.position.applyMatrix4(w),K.identity(),q.copy(V.matrixWorld),q.premultiply(w),K.extractRotation(q),D.halfWidth.set(V.width*0.5,0,0),D.halfHeight.set(0,V.height*0.5,0),D.halfWidth.applyMatrix4(K),D.halfHeight.applyMatrix4(K),U++}else if(V.isPointLight){let D=J.point[F];D.position.setFromMatrixPosition(V.matrixWorld),D.position.applyMatrix4(w),F++}else if(V.isHemisphereLight){let D=J.hemi[E];D.direction.setFromMatrixPosition(V.matrixWorld),D.direction.transformDirection(w),E++}}}return{setup:Y,setupView:Z,state:J}}function _D(A,Q){let B=new Ix(A,Q),C=[],J=[];function I(){C.length=0,J.length=0}function q(G){C.push(G)}function K(G){J.push(G)}function Y(G){B.setup(C,G)}function Z(G){B.setupView(C,G)}return{init:I,state:{lightsArray:C,shadowsArray:J,lights:B},setupLights:Y,setupLightsView:Z,pushLight:q,pushShadow:K}}function qx(A,Q){let B=new WeakMap;function C(I,q=0){let K=B.get(I),Y;if(K===void 0)Y=new _D(A,Q),B.set(I,[Y]);else if(q>=K.length)Y=new _D(A,Q),K.push(Y);else Y=K[q];return Y}function J(){B=new WeakMap}return{get:C,dispose:J}}class mJ extends UA{constructor(A){super();this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(A)}copy(A){return super.copy(A),this.depthPacking=A.depthPacking,this.map=A.map,this.alphaMap=A.alphaMap,this.displacementMap=A.displacementMap,this.displacementScale=A.displacementScale,this.displacementBias=A.displacementBias,this.wireframe=A.wireframe,this.wireframeLinewidth=A.wireframeLinewidth,this}}class yE extends UA{constructor(A){super();this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(A)}copy(A){return super.copy(A),this.map=A.map,this.alphaMap=A.alphaMap,this.displacementMap=A.displacementMap,this.displacementScale=A.displacementScale,this.displacementBias=A.displacementBias,this}}var Kx="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",Yx="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function Zx(A,Q,B){let C=new uJ,J=new M0,I=new M0,q=new x1,K=new mJ({depthPacking:3201}),Y=new yE,Z={},H=B.maxTextureSize,G={[0]:1,[1]:0,[2]:2},W=new C2({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new M0},radius:{value:4}},vertexShader:Kx,fragmentShader:Yx}),F=W.clone();F.defines.HORIZONTAL_PASS=1;let z=new k2;z.setAttribute("position",new T1(new Float32Array([-1,-1,0.5,3,-1,0.5,-1,3,0.5]),3));let U=new A1(z,W),E=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1;let w=this.type;this.render=function(N,R,k){if(E.enabled===!1)return;if(E.autoUpdate===!1&&E.needsUpdate===!1)return;if(N.length===0)return;let P=A.getRenderTarget(),$=A.getActiveCubeFace(),_=A.getActiveMipmapLevel(),h=A.state;h.setBlending(0),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);let S=w!==3&&this.type===3,O=w===3&&this.type!==3;for(let M=0,y=N.length;M<y;M++){let u=N[M],T=u.shadow;if(T===void 0){console.warn("THREE.WebGLShadowMap:",u,"has no shadow.");continue}if(T.autoUpdate===!1&&T.needsUpdate===!1)continue;J.copy(T.mapSize);let d=T.getFrameExtents();if(J.multiply(d),I.copy(T.mapSize),J.x>H||J.y>H){if(J.x>H)I.x=Math.floor(H/d.x),J.x=I.x*d.x,T.mapSize.x=I.x;if(J.y>H)I.y=Math.floor(H/d.y),J.y=I.y*d.y,T.mapSize.y=I.y}if(T.map===null||S===!0||O===!0){let l=this.type!==3?{minFilter:1003,magFilter:1003}:{};if(T.map!==null)T.map.dispose();T.map=new u2(J.x,J.y,l),T.map.texture.name=u.name+".shadowMap",T.camera.updateProjectionMatrix()}A.setRenderTarget(T.map),A.clear();let g=T.getViewportCount();for(let l=0;l<g;l++){let t=T.getViewport(l);q.set(I.x*t.x,I.y*t.y,I.x*t.z,I.y*t.w),h.viewport(q),T.updateMatrices(u,l),C=T.getFrustum(),V(R,k,T.camera,u,this.type)}if(T.isPointLightShadow!==!0&&this.type===3)L(T,k);T.needsUpdate=!1}w=this.type,E.needsUpdate=!1,A.setRenderTarget(P,$,_)};function L(N,R){let k=Q.update(U);if(W.defines.VSM_SAMPLES!==N.blurSamples)W.defines.VSM_SAMPLES=N.blurSamples,F.defines.VSM_SAMPLES=N.blurSamples,W.needsUpdate=!0,F.needsUpdate=!0;if(N.mapPass===null)N.mapPass=new u2(J.x,J.y);W.uniforms.shadow_pass.value=N.map.texture,W.uniforms.resolution.value=N.mapSize,W.uniforms.radius.value=N.radius,A.setRenderTarget(N.mapPass),A.clear(),A.renderBufferDirect(R,null,k,W,U,null),F.uniforms.shadow_pass.value=N.mapPass.texture,F.uniforms.resolution.value=N.mapSize,F.uniforms.radius.value=N.radius,A.setRenderTarget(N.map),A.clear(),A.renderBufferDirect(R,null,k,F,U,null)}function X(N,R,k,P){let $=null,_=k.isPointLight===!0?N.customDistanceMaterial:N.customDepthMaterial;if(_!==void 0)$=_;else if($=k.isPointLight===!0?Y:K,A.localClippingEnabled&&R.clipShadows===!0&&Array.isArray(R.clippingPlanes)&&R.clippingPlanes.length!==0||R.displacementMap&&R.displacementScale!==0||R.alphaMap&&R.alphaTest>0||R.map&&R.alphaTest>0){let h=$.uuid,S=R.uuid,O=Z[h];if(O===void 0)O={},Z[h]=O;let M=O[S];if(M===void 0)M=$.clone(),O[S]=M,R.addEventListener("dispose",D);$=M}if($.visible=R.visible,$.wireframe=R.wireframe,P===3)$.side=R.shadowSide!==null?R.shadowSide:R.side;else $.side=R.shadowSide!==null?R.shadowSide:G[R.side];if($.alphaMap=R.alphaMap,$.alphaTest=R.alphaTest,$.map=R.map,$.clipShadows=R.clipShadows,$.clippingPlanes=R.clippingPlanes,$.clipIntersection=R.clipIntersection,$.displacementMap=R.displacementMap,$.displacementScale=R.displacementScale,$.displacementBias=R.displacementBias,$.wireframeLinewidth=R.wireframeLinewidth,$.linewidth=R.linewidth,k.isPointLight===!0&&$.isMeshDistanceMaterial===!0){let h=A.properties.get($);h.light=k}return $}function V(N,R,k,P,$){if(N.visible===!1)return;if(N.layers.test(R.layers)&&(N.isMesh||N.isLine||N.isPoints)){if((N.castShadow||N.receiveShadow&&$===3)&&(!N.frustumCulled||C.intersectsObject(N))){N.modelViewMatrix.multiplyMatrices(k.matrixWorldInverse,N.matrixWorld);let S=Q.update(N),O=N.material;if(Array.isArray(O)){let M=S.groups;for(let y=0,u=M.length;y<u;y++){let T=M[y],d=O[T.materialIndex];if(d&&d.visible){let g=X(N,d,P,$);N.onBeforeShadow(A,N,R,k,S,g,T),A.renderBufferDirect(k,null,S,g,N,T),N.onAfterShadow(A,N,R,k,S,g,T)}}}else if(O.visible){let M=X(N,O,P,$);N.onBeforeShadow(A,N,R,k,S,M,null),A.renderBufferDirect(k,null,S,M,N,null),N.onAfterShadow(A,N,R,k,S,M,null)}}}let h=N.children;for(let S=0,O=h.length;S<O;S++)V(h[S],R,k,P,$)}function D(N){N.target.removeEventListener("dispose",D);for(let k in Z){let P=Z[k],$=N.target.uuid;if($ in P)P[$].dispose(),delete P[$]}}}function Hx(A,Q,B){let C=B.isWebGL2;function J(){let c=!1,D0=new x1,r=null,E0=new x1(0,0,0,0);return{setMask:function(R0){if(r!==R0&&!c)A.colorMask(R0,R0,R0,R0),r=R0},setLocked:function(R0){c=R0},setClear:function(R0,I1,D1,y1,z2){if(z2===!0)R0*=y1,I1*=y1,D1*=y1;if(D0.set(R0,I1,D1,y1),E0.equals(D0)===!1)A.clearColor(R0,I1,D1,y1),E0.copy(D0)},reset:function(){c=!1,r=null,E0.set(-1,0,0,0)}}}function I(){let c=!1,D0=null,r=null,E0=null;return{setTest:function(R0){if(R0)L0(A.DEPTH_TEST);else T0(A.DEPTH_TEST)},setMask:function(R0){if(D0!==R0&&!c)A.depthMask(R0),D0=R0},setFunc:function(R0){if(r!==R0){switch(R0){case 0:A.depthFunc(A.NEVER);break;case 1:A.depthFunc(A.ALWAYS);break;case 2:A.depthFunc(A.LESS);break;case 3:A.depthFunc(A.LEQUAL);break;case 4:A.depthFunc(A.EQUAL);break;case 5:A.depthFunc(A.GEQUAL);break;case 6:A.depthFunc(A.GREATER);break;case 7:A.depthFunc(A.NOTEQUAL);break;default:A.depthFunc(A.LEQUAL)}r=R0}},setLocked:function(R0){c=R0},setClear:function(R0){if(E0!==R0)A.clearDepth(R0),E0=R0},reset:function(){c=!1,D0=null,r=null,E0=null}}}function q(){let c=!1,D0=null,r=null,E0=null,R0=null,I1=null,D1=null,y1=null,z2=null;return{setTest:function(Q1){if(!c)if(Q1)L0(A.STENCIL_TEST);else T0(A.STENCIL_TEST)},setMask:function(Q1){if(D0!==Q1&&!c)A.stencilMask(Q1),D0=Q1},setFunc:function(Q1,h2,i2){if(r!==Q1||E0!==h2||R0!==i2)A.stencilFunc(Q1,h2,i2),r=Q1,E0=h2,R0=i2},setOp:function(Q1,h2,i2){if(I1!==Q1||D1!==h2||y1!==i2)A.stencilOp(Q1,h2,i2),I1=Q1,D1=h2,y1=i2},setLocked:function(Q1){c=Q1},setClear:function(Q1){if(z2!==Q1)A.clearStencil(Q1),z2=Q1},reset:function(){c=!1,D0=null,r=null,E0=null,R0=null,I1=null,D1=null,y1=null,z2=null}}}let K=new J,Y=new I,Z=new q,H=new WeakMap,G=new WeakMap,W={},F={},z=new WeakMap,U=[],E=null,w=!1,L=null,X=null,V=null,D=null,N=null,R=null,k=null,P=new p0(0,0,0),$=0,_=!1,h=null,S=null,O=null,M=null,y=null,u=A.getParameter(A.MAX_COMBINED_TEXTURE_IMAGE_UNITS),T=!1,d=0,g=A.getParameter(A.VERSION);if(g.indexOf("WebGL")!==-1)d=parseFloat(/^WebGL (\d)/.exec(g)[1]),T=d>=1;else if(g.indexOf("OpenGL ES")!==-1)d=parseFloat(/^OpenGL ES (\d)/.exec(g)[1]),T=d>=2;let l=null,t={},i=A.getParameter(A.SCISSOR_BOX),n=A.getParameter(A.VIEWPORT),J0=new x1().fromArray(i),e=new x1().fromArray(n);function H0(c,D0,r,E0){let R0=new Uint8Array(4),I1=A.createTexture();A.bindTexture(c,I1),A.texParameteri(c,A.TEXTURE_MIN_FILTER,A.NEAREST),A.texParameteri(c,A.TEXTURE_MAG_FILTER,A.NEAREST);for(let D1=0;D1<r;D1++)if(C&&(c===A.TEXTURE_3D||c===A.TEXTURE_2D_ARRAY))A.texImage3D(D0,0,A.RGBA,1,1,E0,0,A.RGBA,A.UNSIGNED_BYTE,R0);else A.texImage2D(D0+D1,0,A.RGBA,1,1,0,A.RGBA,A.UNSIGNED_BYTE,R0);return I1}let X0={};if(X0[A.TEXTURE_2D]=H0(A.TEXTURE_2D,A.TEXTURE_2D,1),X0[A.TEXTURE_CUBE_MAP]=H0(A.TEXTURE_CUBE_MAP,A.TEXTURE_CUBE_MAP_POSITIVE_X,6),C)X0[A.TEXTURE_2D_ARRAY]=H0(A.TEXTURE_2D_ARRAY,A.TEXTURE_2D_ARRAY,1,1),X0[A.TEXTURE_3D]=H0(A.TEXTURE_3D,A.TEXTURE_3D,1,1);K.setClear(0,0,0,1),Y.setClear(1),Z.setClear(0),L0(A.DEPTH_TEST),Y.setFunc(3),t0(!1),h1(1),L0(A.CULL_FACE),J1(0);function L0(c){if(W[c]!==!0)A.enable(c),W[c]=!0}function T0(c){if(W[c]!==!1)A.disable(c),W[c]=!1}function s(c,D0){if(F[c]!==D0){if(A.bindFramebuffer(c,D0),F[c]=D0,C){if(c===A.DRAW_FRAMEBUFFER)F[A.FRAMEBUFFER]=D0;if(c===A.FRAMEBUFFER)F[A.DRAW_FRAMEBUFFER]=D0}return!0}return!1}function P1(c,D0){let r=U,E0=!1;if(c){if(r=z.get(D0),r===void 0)r=[],z.set(D0,r);let R0=c.textures;if(r.length!==R0.length||r[0]!==A.COLOR_ATTACHMENT0){for(let I1=0,D1=R0.length;I1<D1;I1++)r[I1]=A.COLOR_ATTACHMENT0+I1;r.length=R0.length,E0=!0}}else if(r[0]!==A.BACK)r[0]=A.BACK,E0=!0;if(E0)if(B.isWebGL2)A.drawBuffers(r);else if(Q.has("WEBGL_draw_buffers")===!0)Q.get("WEBGL_draw_buffers").drawBuffersWEBGL(r);else throw new Error("THREE.WebGLState: Usage of gl.drawBuffers() require WebGL2 or WEBGL_draw_buffers extension")}function Z0(c){if(E!==c)return A.useProgram(c),E=c,!0;return!1}let G0={[100]:A.FUNC_ADD,[101]:A.FUNC_SUBTRACT,[102]:A.FUNC_REVERSE_SUBTRACT};if(C)G0[103]=A.MIN,G0[104]=A.MAX;else{let c=Q.get("EXT_blend_minmax");if(c!==null)G0[103]=c.MIN_EXT,G0[104]=c.MAX_EXT}let x0={[200]:A.ZERO,[201]:A.ONE,[202]:A.SRC_COLOR,[204]:A.SRC_ALPHA,[210]:A.SRC_ALPHA_SATURATE,[208]:A.DST_COLOR,[206]:A.DST_ALPHA,[203]:A.ONE_MINUS_SRC_COLOR,[205]:A.ONE_MINUS_SRC_ALPHA,[209]:A.ONE_MINUS_DST_COLOR,[207]:A.ONE_MINUS_DST_ALPHA,[211]:A.CONSTANT_COLOR,[212]:A.ONE_MINUS_CONSTANT_COLOR,[213]:A.CONSTANT_ALPHA,[214]:A.ONE_MINUS_CONSTANT_ALPHA};function J1(c,D0,r,E0,R0,I1,D1,y1,z2,Q1){if(c===0){if(w===!0)T0(A.BLEND),w=!1;return}if(w===!1)L0(A.BLEND),w=!0;if(c!==5){if(c!==L||Q1!==_){if(X!==100||N!==100)A.blendEquation(A.FUNC_ADD),X=100,N=100;if(Q1)switch(c){case 1:A.blendFuncSeparate(A.ONE,A.ONE_MINUS_SRC_ALPHA,A.ONE,A.ONE_MINUS_SRC_ALPHA);break;case 2:A.blendFunc(A.ONE,A.ONE);break;case 3:A.blendFuncSeparate(A.ZERO,A.ONE_MINUS_SRC_COLOR,A.ZERO,A.ONE);break;case 4:A.blendFuncSeparate(A.ZERO,A.SRC_COLOR,A.ZERO,A.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",c);break}else switch(c){case 1:A.blendFuncSeparate(A.SRC_ALPHA,A.ONE_MINUS_SRC_ALPHA,A.ONE,A.ONE_MINUS_SRC_ALPHA);break;case 2:A.blendFunc(A.SRC_ALPHA,A.ONE);break;case 3:A.blendFuncSeparate(A.ZERO,A.ONE_MINUS_SRC_COLOR,A.ZERO,A.ONE);break;case 4:A.blendFunc(A.ZERO,A.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",c);break}V=null,D=null,R=null,k=null,P.set(0,0,0),$=0,L=c,_=Q1}return}if(R0=R0||D0,I1=I1||r,D1=D1||E0,D0!==X||R0!==N)A.blendEquationSeparate(G0[D0],G0[R0]),X=D0,N=R0;if(r!==V||E0!==D||I1!==R||D1!==k)A.blendFuncSeparate(x0[r],x0[E0],x0[I1],x0[D1]),V=r,D=E0,R=I1,k=D1;if(y1.equals(P)===!1||z2!==$)A.blendColor(y1.r,y1.g,y1.b,z2),P.copy(y1),$=z2;L=c,_=!1}function S0(c,D0){c.side===2?T0(A.CULL_FACE):L0(A.CULL_FACE);let r=c.side===1;if(D0)r=!r;t0(r),c.blending===1&&c.transparent===!1?J1(0):J1(c.blending,c.blendEquation,c.blendSrc,c.blendDst,c.blendEquationAlpha,c.blendSrcAlpha,c.blendDstAlpha,c.blendColor,c.blendAlpha,c.premultipliedAlpha),Y.setFunc(c.depthFunc),Y.setTest(c.depthTest),Y.setMask(c.depthWrite),K.setMask(c.colorWrite);let E0=c.stencilWrite;if(Z.setTest(E0),E0)Z.setMask(c.stencilWriteMask),Z.setFunc(c.stencilFunc,c.stencilRef,c.stencilFuncMask),Z.setOp(c.stencilFail,c.stencilZFail,c.stencilZPass);m(c.polygonOffset,c.polygonOffsetFactor,c.polygonOffsetUnits),c.alphaToCoverage===!0?L0(A.SAMPLE_ALPHA_TO_COVERAGE):T0(A.SAMPLE_ALPHA_TO_COVERAGE)}function t0(c){if(h!==c){if(c)A.frontFace(A.CW);else A.frontFace(A.CCW);h=c}}function h1(c){if(c!==0){if(L0(A.CULL_FACE),c!==S)if(c===1)A.cullFace(A.BACK);else if(c===2)A.cullFace(A.FRONT);else A.cullFace(A.FRONT_AND_BACK)}else T0(A.CULL_FACE);S=c}function $1(c){if(c!==O){if(T)A.lineWidth(c);O=c}}function m(c,D0,r){if(c){if(L0(A.POLYGON_OFFSET_FILL),M!==D0||y!==r)A.polygonOffset(D0,r),M=D0,y=r}else T0(A.POLYGON_OFFSET_FILL)}function j(c){if(c)L0(A.SCISSOR_TEST);else T0(A.SCISSOR_TEST)}function C0(c){if(c===void 0)c=A.TEXTURE0+u-1;if(l!==c)A.activeTexture(c),l=c}function I0(c,D0,r){if(r===void 0)if(l===null)r=A.TEXTURE0+u-1;else r=l;let E0=t[r];if(E0===void 0)E0={type:void 0,texture:void 0},t[r]=E0;if(E0.type!==c||E0.texture!==D0){if(l!==r)A.activeTexture(r),l=r;A.bindTexture(c,D0||X0[c]),E0.type=c,E0.texture=D0}}function F0(){let c=t[l];if(c!==void 0&&c.type!==void 0)A.bindTexture(c.type,null),c.type=void 0,c.texture=void 0}function Y0(){try{A.compressedTexImage2D.apply(A,arguments)}catch(c){console.error("THREE.WebGLState:",c)}}function i0(){try{A.compressedTexImage3D.apply(A,arguments)}catch(c){console.error("THREE.WebGLState:",c)}}function g0(){try{A.texSubImage2D.apply(A,arguments)}catch(c){console.error("THREE.WebGLState:",c)}}function w0(){try{A.texSubImage3D.apply(A,arguments)}catch(c){console.error("THREE.WebGLState:",c)}}function $0(){try{A.compressedTexSubImage2D.apply(A,arguments)}catch(c){console.error("THREE.WebGLState:",c)}}function z1(){try{A.compressedTexSubImage3D.apply(A,arguments)}catch(c){console.error("THREE.WebGLState:",c)}}function V0(){try{A.texStorage2D.apply(A,arguments)}catch(c){console.error("THREE.WebGLState:",c)}}function o1(){try{A.texStorage3D.apply(A,arguments)}catch(c){console.error("THREE.WebGLState:",c)}}function c0(){try{A.texImage2D.apply(A,arguments)}catch(c){console.error("THREE.WebGLState:",c)}}function v0(){try{A.texImage3D.apply(A,arguments)}catch(c){console.error("THREE.WebGLState:",c)}}function u0(c){if(J0.equals(c)===!1)A.scissor(c.x,c.y,c.z,c.w),J0.copy(c)}function b(c){if(e.equals(c)===!1)A.viewport(c.x,c.y,c.z,c.w),e.copy(c)}function q0(c,D0){let r=G.get(D0);if(r===void 0)r=new WeakMap,G.set(D0,r);let E0=r.get(c);if(E0===void 0)E0=A.getUniformBlockIndex(D0,c.name),r.set(c,E0)}function P0(c,D0){let E0=G.get(D0).get(c);if(H.get(D0)!==E0)A.uniformBlockBinding(D0,E0,c.__bindingPointIndex),H.set(D0,E0)}function m0(){if(A.disable(A.BLEND),A.disable(A.CULL_FACE),A.disable(A.DEPTH_TEST),A.disable(A.POLYGON_OFFSET_FILL),A.disable(A.SCISSOR_TEST),A.disable(A.STENCIL_TEST),A.disable(A.SAMPLE_ALPHA_TO_COVERAGE),A.blendEquation(A.FUNC_ADD),A.blendFunc(A.ONE,A.ZERO),A.blendFuncSeparate(A.ONE,A.ZERO,A.ONE,A.ZERO),A.blendColor(0,0,0,0),A.colorMask(!0,!0,!0,!0),A.clearColor(0,0,0,0),A.depthMask(!0),A.depthFunc(A.LESS),A.clearDepth(1),A.stencilMask(4294967295),A.stencilFunc(A.ALWAYS,0,4294967295),A.stencilOp(A.KEEP,A.KEEP,A.KEEP),A.clearStencil(0),A.cullFace(A.BACK),A.frontFace(A.CCW),A.polygonOffset(0,0),A.activeTexture(A.TEXTURE0),A.bindFramebuffer(A.FRAMEBUFFER,null),C===!0)A.bindFramebuffer(A.DRAW_FRAMEBUFFER,null),A.bindFramebuffer(A.READ_FRAMEBUFFER,null);A.useProgram(null),A.lineWidth(1),A.scissor(0,0,A.canvas.width,A.canvas.height),A.viewport(0,0,A.canvas.width,A.canvas.height),W={},l=null,t={},F={},z=new WeakMap,U=[],E=null,w=!1,L=null,X=null,V=null,D=null,N=null,R=null,k=null,P=new p0(0,0,0),$=0,_=!1,h=null,S=null,O=null,M=null,y=null,J0.set(0,0,A.canvas.width,A.canvas.height),e.set(0,0,A.canvas.width,A.canvas.height),K.reset(),Y.reset(),Z.reset()}return{buffers:{color:K,depth:Y,stencil:Z},enable:L0,disable:T0,bindFramebuffer:s,drawBuffers:P1,useProgram:Z0,setBlending:J1,setMaterial:S0,setFlipSided:t0,setCullFace:h1,setLineWidth:$1,setPolygonOffset:m,setScissorTest:j,activeTexture:C0,bindTexture:I0,unbindTexture:F0,compressedTexImage2D:Y0,compressedTexImage3D:i0,texImage2D:c0,texImage3D:v0,updateUBOMapping:q0,uniformBlockBinding:P0,texStorage2D:V0,texStorage3D:o1,texSubImage2D:g0,texSubImage3D:w0,compressedTexSubImage2D:$0,compressedTexSubImage3D:z1,scissor:u0,viewport:b,reset:m0}}function Xx(A,Q,B,C,J,I,q){let K=J.isWebGL2,Y=Q.has("WEBGL_multisampled_render_to_texture")?Q.get("WEBGL_multisampled_render_to_texture"):null,Z=typeof navigator==="undefined"?!1:/OculusBrowser/g.test(navigator.userAgent),H=new M0,G=new WeakMap,W,F=new WeakMap,z=!1;try{z=typeof OffscreenCanvas!=="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(m){}function U(m,j){return z?new OffscreenCanvas(m,j):QQ("canvas")}function E(m,j,C0,I0){let F0=1,Y0=$1(m);if(Y0.width>I0||Y0.height>I0)F0=I0/Math.max(Y0.width,Y0.height);if(F0<1||j===!0)if(typeof HTMLImageElement!=="undefined"&&m instanceof HTMLImageElement||typeof HTMLCanvasElement!=="undefined"&&m instanceof HTMLCanvasElement||typeof ImageBitmap!=="undefined"&&m instanceof ImageBitmap||typeof VideoFrame!=="undefined"&&m instanceof VideoFrame){let i0=j?jJ:Math.floor,g0=i0(F0*Y0.width),w0=i0(F0*Y0.height);if(W===void 0)W=U(g0,w0);let $0=C0?U(g0,w0):W;return $0.width=g0,$0.height=w0,$0.getContext("2d").drawImage(m,0,0,g0,w0),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Y0.width+"x"+Y0.height+") to ("+g0+"x"+w0+")."),$0}else{if("data"in m)console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Y0.width+"x"+Y0.height+").");return m}return m}function w(m){let j=$1(m);return bZ(j.width)&&bZ(j.height)}function L(m){if(K)return!1;return m.wrapS!==1001||m.wrapT!==1001||m.minFilter!==1003&&m.minFilter!==1006}function X(m,j){return m.generateMipmaps&&j&&m.minFilter!==1003&&m.minFilter!==1006}function V(m){A.generateMipmap(m)}function D(m,j,C0,I0,F0=!1){if(K===!1)return j;if(m!==null){if(A[m]!==void 0)return A[m];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format \'"+m+"\'")}let Y0=j;if(j===A.RED){if(C0===A.FLOAT)Y0=A.R32F;if(C0===A.HALF_FLOAT)Y0=A.R16F;if(C0===A.UNSIGNED_BYTE)Y0=A.R8}if(j===A.RED_INTEGER){if(C0===A.UNSIGNED_BYTE)Y0=A.R8UI;if(C0===A.UNSIGNED_SHORT)Y0=A.R16UI;if(C0===A.UNSIGNED_INT)Y0=A.R32UI;if(C0===A.BYTE)Y0=A.R8I;if(C0===A.SHORT)Y0=A.R16I;if(C0===A.INT)Y0=A.R32I}if(j===A.RG){if(C0===A.FLOAT)Y0=A.RG32F;if(C0===A.HALF_FLOAT)Y0=A.RG16F;if(C0===A.UNSIGNED_BYTE)Y0=A.RG8}if(j===A.RG_INTEGER){if(C0===A.UNSIGNED_BYTE)Y0=A.RG8UI;if(C0===A.UNSIGNED_SHORT)Y0=A.RG16UI;if(C0===A.UNSIGNED_INT)Y0=A.RG32UI;if(C0===A.BYTE)Y0=A.RG8I;if(C0===A.SHORT)Y0=A.RG16I;if(C0===A.INT)Y0=A.RG32I}if(j===A.RGBA){let i0=F0?"linear":O1.getTransfer(I0);if(C0===A.FLOAT)Y0=A.RGBA32F;if(C0===A.HALF_FLOAT)Y0=A.RGBA16F;if(C0===A.UNSIGNED_BYTE)Y0=i0==="srgb"?A.SRGB8_ALPHA8:A.RGBA8;if(C0===A.UNSIGNED_SHORT_4_4_4_4)Y0=A.RGBA4;if(C0===A.UNSIGNED_SHORT_5_5_5_1)Y0=A.RGB5_A1}if(Y0===A.R16F||Y0===A.R32F||Y0===A.RG16F||Y0===A.RG32F||Y0===A.RGBA16F||Y0===A.RGBA32F)Q.get("EXT_color_buffer_float");return Y0}function N(m,j,C0){if(X(m,C0)===!0||m.isFramebufferTexture&&m.minFilter!==1003&&m.minFilter!==1006)return Math.log2(Math.max(j.width,j.height))+1;else if(m.mipmaps!==void 0&&m.mipmaps.length>0)return m.mipmaps.length;else if(m.isCompressedTexture&&Array.isArray(m.image))return j.mipmaps.length;else return 1}function R(m){if(m===1003||m===1004||m===1005)return A.NEAREST;return A.LINEAR}function k(m){let j=m.target;if(j.removeEventListener("dispose",k),$(j),j.isVideoTexture)G.delete(j)}function P(m){let j=m.target;j.removeEventListener("dispose",P),h(j)}function $(m){let j=C.get(m);if(j.__webglInit===void 0)return;let C0=m.source,I0=F.get(C0);if(I0){let F0=I0[j.__cacheKey];if(F0.usedTimes--,F0.usedTimes===0)_(m);if(Object.keys(I0).length===0)F.delete(C0)}C.remove(m)}function _(m){let j=C.get(m);A.deleteTexture(j.__webglTexture);let C0=m.source,I0=F.get(C0);delete I0[j.__cacheKey],q.memory.textures--}function h(m){let j=C.get(m);if(m.depthTexture)m.depthTexture.dispose();if(m.isWebGLCubeRenderTarget)for(let I0=0;I0<6;I0++){if(Array.isArray(j.__webglFramebuffer[I0]))for(let F0=0;F0<j.__webglFramebuffer[I0].length;F0++)A.deleteFramebuffer(j.__webglFramebuffer[I0][F0]);else A.deleteFramebuffer(j.__webglFramebuffer[I0]);if(j.__webglDepthbuffer)A.deleteRenderbuffer(j.__webglDepthbuffer[I0])}else{if(Array.isArray(j.__webglFramebuffer))for(let I0=0;I0<j.__webglFramebuffer.length;I0++)A.deleteFramebuffer(j.__webglFramebuffer[I0]);else A.deleteFramebuffer(j.__webglFramebuffer);if(j.__webglDepthbuffer)A.deleteRenderbuffer(j.__webglDepthbuffer);if(j.__webglMultisampledFramebuffer)A.deleteFramebuffer(j.__webglMultisampledFramebuffer);if(j.__webglColorRenderbuffer){for(let I0=0;I0<j.__webglColorRenderbuffer.length;I0++)if(j.__webglColorRenderbuffer[I0])A.deleteRenderbuffer(j.__webglColorRenderbuffer[I0])}if(j.__webglDepthRenderbuffer)A.deleteRenderbuffer(j.__webglDepthRenderbuffer)}let C0=m.textures;for(let I0=0,F0=C0.length;I0<F0;I0++){let Y0=C.get(C0[I0]);if(Y0.__webglTexture)A.deleteTexture(Y0.__webglTexture),q.memory.textures--;C.remove(C0[I0])}C.remove(m)}let S=0;function O(){S=0}function M(){let m=S;if(m>=J.maxTextures)console.warn("THREE.WebGLTextures: Trying to use "+m+" texture units while this GPU supports only "+J.maxTextures);return S+=1,m}function y(m){let j=[];return j.push(m.wrapS),j.push(m.wrapT),j.push(m.wrapR||0),j.push(m.magFilter),j.push(m.minFilter),j.push(m.anisotropy),j.push(m.internalFormat),j.push(m.format),j.push(m.type),j.push(m.generateMipmaps),j.push(m.premultiplyAlpha),j.push(m.flipY),j.push(m.unpackAlignment),j.push(m.colorSpace),j.join()}function u(m,j){let C0=C.get(m);if(m.isVideoTexture)t0(m);if(m.isRenderTargetTexture===!1&&m.version>0&&C0.__version!==m.version){let I0=m.image;if(I0===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(I0.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{e(C0,m,j);return}}B.bindTexture(A.TEXTURE_2D,C0.__webglTexture,A.TEXTURE0+j)}function T(m,j){let C0=C.get(m);if(m.version>0&&C0.__version!==m.version){e(C0,m,j);return}B.bindTexture(A.TEXTURE_2D_ARRAY,C0.__webglTexture,A.TEXTURE0+j)}function d(m,j){let C0=C.get(m);if(m.version>0&&C0.__version!==m.version){e(C0,m,j);return}B.bindTexture(A.TEXTURE_3D,C0.__webglTexture,A.TEXTURE0+j)}function g(m,j){let C0=C.get(m);if(m.version>0&&C0.__version!==m.version){H0(C0,m,j);return}B.bindTexture(A.TEXTURE_CUBE_MAP,C0.__webglTexture,A.TEXTURE0+j)}let l={[1000]:A.REPEAT,[1001]:A.CLAMP_TO_EDGE,[1002]:A.MIRRORED_REPEAT},t={[1003]:A.NEAREST,[1004]:A.NEAREST_MIPMAP_NEAREST,[1005]:A.NEAREST_MIPMAP_LINEAR,[1006]:A.LINEAR,[1007]:A.LINEAR_MIPMAP_NEAREST,[1008]:A.LINEAR_MIPMAP_LINEAR},i={[512]:A.NEVER,[519]:A.ALWAYS,[513]:A.LESS,[515]:A.LEQUAL,[514]:A.EQUAL,[518]:A.GEQUAL,[516]:A.GREATER,[517]:A.NOTEQUAL};function n(m,j,C0){if(j.type===1015&&Q.has("OES_texture_float_linear")===!1&&(j.magFilter===1006||j.magFilter===1007||j.magFilter===1005||j.magFilter===1008||j.minFilter===1006||j.minFilter===1007||j.minFilter===1005||j.minFilter===1008))console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device.");if(C0){if(A.texParameteri(m,A.TEXTURE_WRAP_S,l[j.wrapS]),A.texParameteri(m,A.TEXTURE_WRAP_T,l[j.wrapT]),m===A.TEXTURE_3D||m===A.TEXTURE_2D_ARRAY)A.texParameteri(m,A.TEXTURE_WRAP_R,l[j.wrapR]);A.texParameteri(m,A.TEXTURE_MAG_FILTER,t[j.magFilter]),A.texParameteri(m,A.TEXTURE_MIN_FILTER,t[j.minFilter])}else{if(A.texParameteri(m,A.TEXTURE_WRAP_S,A.CLAMP_TO_EDGE),A.texParameteri(m,A.TEXTURE_WRAP_T,A.CLAMP_TO_EDGE),m===A.TEXTURE_3D||m===A.TEXTURE_2D_ARRAY)A.texParameteri(m,A.TEXTURE_WRAP_R,A.CLAMP_TO_EDGE);if(j.wrapS!==1001||j.wrapT!==1001)console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.");if(A.texParameteri(m,A.TEXTURE_MAG_FILTER,R(j.magFilter)),A.texParameteri(m,A.TEXTURE_MIN_FILTER,R(j.minFilter)),j.minFilter!==1003&&j.minFilter!==1006)console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")}if(j.compareFunction)A.texParameteri(m,A.TEXTURE_COMPARE_MODE,A.COMPARE_REF_TO_TEXTURE),A.texParameteri(m,A.TEXTURE_COMPARE_FUNC,i[j.compareFunction]);if(Q.has("EXT_texture_filter_anisotropic")===!0){if(j.magFilter===1003)return;if(j.minFilter!==1005&&j.minFilter!==1008)return;if(j.type===1015&&Q.has("OES_texture_float_linear")===!1)return;if(K===!1&&(j.type===1016&&Q.has("OES_texture_half_float_linear")===!1))return;if(j.anisotropy>1||C.get(j).__currentAnisotropy){let I0=Q.get("EXT_texture_filter_anisotropic");A.texParameterf(m,I0.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(j.anisotropy,J.getMaxAnisotropy())),C.get(j).__currentAnisotropy=j.anisotropy}}}function J0(m,j){let C0=!1;if(m.__webglInit===void 0)m.__webglInit=!0,j.addEventListener("dispose",k);let I0=j.source,F0=F.get(I0);if(F0===void 0)F0={},F.set(I0,F0);let Y0=y(j);if(Y0!==m.__cacheKey){if(F0[Y0]===void 0)F0[Y0]={texture:A.createTexture(),usedTimes:0},q.memory.textures++,C0=!0;F0[Y0].usedTimes++;let i0=F0[m.__cacheKey];if(i0!==void 0){if(F0[m.__cacheKey].usedTimes--,i0.usedTimes===0)_(j)}m.__cacheKey=Y0,m.__webglTexture=F0[Y0].texture}return C0}function e(m,j,C0){let I0=A.TEXTURE_2D;if(j.isDataArrayTexture||j.isCompressedArrayTexture)I0=A.TEXTURE_2D_ARRAY;if(j.isData3DTexture)I0=A.TEXTURE_3D;let F0=J0(m,j),Y0=j.source;B.bindTexture(I0,m.__webglTexture,A.TEXTURE0+C0);let i0=C.get(Y0);if(Y0.version!==i0.__version||F0===!0){B.activeTexture(A.TEXTURE0+C0);let g0=O1.getPrimaries(O1.workingColorSpace),w0=j.colorSpace===""?null:O1.getPrimaries(j.colorSpace),$0=j.colorSpace===""||g0===w0?A.NONE:A.BROWSER_DEFAULT_WEBGL;A.pixelStorei(A.UNPACK_FLIP_Y_WEBGL,j.flipY),A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j.premultiplyAlpha),A.pixelStorei(A.UNPACK_ALIGNMENT,j.unpackAlignment),A.pixelStorei(A.UNPACK_COLORSPACE_CONVERSION_WEBGL,$0);let z1=L(j)&&w(j.image)===!1,V0=E(j.image,z1,!1,J.maxTextureSize);V0=h1(j,V0);let o1=w(V0)||K,c0=I.convert(j.format,j.colorSpace),v0=I.convert(j.type),u0=D(j.internalFormat,c0,v0,j.colorSpace,j.isVideoTexture);n(I0,j,o1);let b,q0=j.mipmaps,P0=K&&j.isVideoTexture!==!0&&u0!==36196,m0=i0.__version===void 0||F0===!0,c=Y0.dataReady,D0=N(j,V0,o1);if(j.isDepthTexture){if(u0=A.DEPTH_COMPONENT,K)if(j.type===1015)u0=A.DEPTH_COMPONENT32F;else if(j.type===1014)u0=A.DEPTH_COMPONENT24;else if(j.type===1020)u0=A.DEPTH24_STENCIL8;else u0=A.DEPTH_COMPONENT16;else if(j.type===1015)console.error("WebGLRenderer: Floating point depth texture requires WebGL2.");if(j.format===1026&&u0===A.DEPTH_COMPONENT){if(j.type!==1012&&j.type!==1014)console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),j.type=1014,v0=I.convert(j.type)}if(j.format===1027&&u0===A.DEPTH_COMPONENT){if(u0=A.DEPTH_STENCIL,j.type!==1020)console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),j.type=1020,v0=I.convert(j.type)}if(m0)if(P0)B.texStorage2D(A.TEXTURE_2D,1,u0,V0.width,V0.height);else B.texImage2D(A.TEXTURE_2D,0,u0,V0.width,V0.height,0,c0,v0,null)}else if(j.isDataTexture)if(q0.length>0&&o1){if(P0&&m0)B.texStorage2D(A.TEXTURE_2D,D0,u0,q0[0].width,q0[0].height);for(let r=0,E0=q0.length;r<E0;r++)if(b=q0[r],P0){if(c)B.texSubImage2D(A.TEXTURE_2D,r,0,0,b.width,b.height,c0,v0,b.data)}else B.texImage2D(A.TEXTURE_2D,r,u0,b.width,b.height,0,c0,v0,b.data);j.generateMipmaps=!1}else if(P0){if(m0)B.texStorage2D(A.TEXTURE_2D,D0,u0,V0.width,V0.height);if(c)B.texSubImage2D(A.TEXTURE_2D,0,0,0,V0.width,V0.height,c0,v0,V0.data)}else B.texImage2D(A.TEXTURE_2D,0,u0,V0.width,V0.height,0,c0,v0,V0.data);else if(j.isCompressedTexture)if(j.isCompressedArrayTexture){if(P0&&m0)B.texStorage3D(A.TEXTURE_2D_ARRAY,D0,u0,q0[0].width,q0[0].height,V0.depth);for(let r=0,E0=q0.length;r<E0;r++)if(b=q0[r],j.format!==1023)if(c0!==null)if(P0){if(c)B.compressedTexSubImage3D(A.TEXTURE_2D_ARRAY,r,0,0,0,b.width,b.height,V0.depth,c0,b.data,0,0)}else B.compressedTexImage3D(A.TEXTURE_2D_ARRAY,r,u0,b.width,b.height,V0.depth,0,b.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else if(P0){if(c)B.texSubImage3D(A.TEXTURE_2D_ARRAY,r,0,0,0,b.width,b.height,V0.depth,c0,v0,b.data)}else B.texImage3D(A.TEXTURE_2D_ARRAY,r,u0,b.width,b.height,V0.depth,0,c0,v0,b.data)}else{if(P0&&m0)B.texStorage2D(A.TEXTURE_2D,D0,u0,q0[0].width,q0[0].height);for(let r=0,E0=q0.length;r<E0;r++)if(b=q0[r],j.format!==1023)if(c0!==null)if(P0){if(c)B.compressedTexSubImage2D(A.TEXTURE_2D,r,0,0,b.width,b.height,c0,b.data)}else B.compressedTexImage2D(A.TEXTURE_2D,r,u0,b.width,b.height,0,b.data);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else if(P0){if(c)B.texSubImage2D(A.TEXTURE_2D,r,0,0,b.width,b.height,c0,v0,b.data)}else B.texImage2D(A.TEXTURE_2D,r,u0,b.width,b.height,0,c0,v0,b.data)}else if(j.isDataArrayTexture)if(P0){if(m0)B.texStorage3D(A.TEXTURE_2D_ARRAY,D0,u0,V0.width,V0.height,V0.depth);if(c)B.texSubImage3D(A.TEXTURE_2D_ARRAY,0,0,0,0,V0.width,V0.height,V0.depth,c0,v0,V0.data)}else B.texImage3D(A.TEXTURE_2D_ARRAY,0,u0,V0.width,V0.height,V0.depth,0,c0,v0,V0.data);else if(j.isData3DTexture)if(P0){if(m0)B.texStorage3D(A.TEXTURE_3D,D0,u0,V0.width,V0.height,V0.depth);if(c)B.texSubImage3D(A.TEXTURE_3D,0,0,0,0,V0.width,V0.height,V0.depth,c0,v0,V0.data)}else B.texImage3D(A.TEXTURE_3D,0,u0,V0.width,V0.height,V0.depth,0,c0,v0,V0.data);else if(j.isFramebufferTexture){if(m0)if(P0)B.texStorage2D(A.TEXTURE_2D,D0,u0,V0.width,V0.height);else{let{width:r,height:E0}=V0;for(let R0=0;R0<D0;R0++)B.texImage2D(A.TEXTURE_2D,R0,u0,r,E0,0,c0,v0,null),r>>=1,E0>>=1}}else if(q0.length>0&&o1){if(P0&&m0){let r=$1(q0[0]);B.texStorage2D(A.TEXTURE_2D,D0,u0,r.width,r.height)}for(let r=0,E0=q0.length;r<E0;r++)if(b=q0[r],P0){if(c)B.texSubImage2D(A.TEXTURE_2D,r,0,0,c0,v0,b)}else B.texImage2D(A.TEXTURE_2D,r,u0,c0,v0,b);j.generateMipmaps=!1}else if(P0){if(m0){let r=$1(V0);B.texStorage2D(A.TEXTURE_2D,D0,u0,r.width,r.height)}if(c)B.texSubImage2D(A.TEXTURE_2D,0,0,0,c0,v0,V0)}else B.texImage2D(A.TEXTURE_2D,0,u0,c0,v0,V0);if(X(j,o1))V(I0);if(i0.__version=Y0.version,j.onUpdate)j.onUpdate(j)}m.__version=j.version}function H0(m,j,C0){if(j.image.length!==6)return;let I0=J0(m,j),F0=j.source;B.bindTexture(A.TEXTURE_CUBE_MAP,m.__webglTexture,A.TEXTURE0+C0);let Y0=C.get(F0);if(F0.version!==Y0.__version||I0===!0){B.activeTexture(A.TEXTURE0+C0);let i0=O1.getPrimaries(O1.workingColorSpace),g0=j.colorSpace===""?null:O1.getPrimaries(j.colorSpace),w0=j.colorSpace===""||i0===g0?A.NONE:A.BROWSER_DEFAULT_WEBGL;A.pixelStorei(A.UNPACK_FLIP_Y_WEBGL,j.flipY),A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j.premultiplyAlpha),A.pixelStorei(A.UNPACK_ALIGNMENT,j.unpackAlignment),A.pixelStorei(A.UNPACK_COLORSPACE_CONVERSION_WEBGL,w0);let $0=j.isCompressedTexture||j.image[0].isCompressedTexture,z1=j.image[0]&&j.image[0].isDataTexture,V0=[];for(let r=0;r<6;r++){if(!$0&&!z1)V0[r]=E(j.image[r],!1,!0,J.maxCubemapSize);else V0[r]=z1?j.image[r].image:j.image[r];V0[r]=h1(j,V0[r])}let o1=V0[0],c0=w(o1)||K,v0=I.convert(j.format,j.colorSpace),u0=I.convert(j.type),b=D(j.internalFormat,v0,u0,j.colorSpace),q0=K&&j.isVideoTexture!==!0,P0=Y0.__version===void 0||I0===!0,m0=F0.dataReady,c=N(j,o1,c0);n(A.TEXTURE_CUBE_MAP,j,c0);let D0;if($0){if(q0&&P0)B.texStorage2D(A.TEXTURE_CUBE_MAP,c,b,o1.width,o1.height);for(let r=0;r<6;r++){D0=V0[r].mipmaps;for(let E0=0;E0<D0.length;E0++){let R0=D0[E0];if(j.format!==1023)if(v0!==null)if(q0){if(m0)B.compressedTexSubImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+r,E0,0,0,R0.width,R0.height,v0,R0.data)}else B.compressedTexImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+r,E0,b,R0.width,R0.height,0,R0.data);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()");else if(q0){if(m0)B.texSubImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+r,E0,0,0,R0.width,R0.height,v0,u0,R0.data)}else B.texImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+r,E0,b,R0.width,R0.height,0,v0,u0,R0.data)}}}else{if(D0=j.mipmaps,q0&&P0){if(D0.length>0)c++;let r=$1(V0[0]);B.texStorage2D(A.TEXTURE_CUBE_MAP,c,b,r.width,r.height)}for(let r=0;r<6;r++)if(z1){if(q0){if(m0)B.texSubImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,0,0,V0[r].width,V0[r].height,v0,u0,V0[r].data)}else B.texImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,b,V0[r].width,V0[r].height,0,v0,u0,V0[r].data);for(let E0=0;E0<D0.length;E0++){let I1=D0[E0].image[r].image;if(q0){if(m0)B.texSubImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+r,E0+1,0,0,I1.width,I1.height,v0,u0,I1.data)}else B.texImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+r,E0+1,b,I1.width,I1.height,0,v0,u0,I1.data)}}else{if(q0){if(m0)B.texSubImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,0,0,v0,u0,V0[r])}else B.texImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,b,v0,u0,V0[r]);for(let E0=0;E0<D0.length;E0++){let R0=D0[E0];if(q0){if(m0)B.texSubImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+r,E0+1,0,0,v0,u0,R0.image[r])}else B.texImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+r,E0+1,b,v0,u0,R0.image[r])}}}if(X(j,c0))V(A.TEXTURE_CUBE_MAP);if(Y0.__version=F0.version,j.onUpdate)j.onUpdate(j)}m.__version=j.version}function X0(m,j,C0,I0,F0,Y0){let i0=I.convert(C0.format,C0.colorSpace),g0=I.convert(C0.type),w0=D(C0.internalFormat,i0,g0,C0.colorSpace);if(!C.get(j).__hasExternalTextures){let z1=Math.max(1,j.width>>Y0),V0=Math.max(1,j.height>>Y0);if(F0===A.TEXTURE_3D||F0===A.TEXTURE_2D_ARRAY)B.texImage3D(F0,Y0,w0,z1,V0,j.depth,0,i0,g0,null);else B.texImage2D(F0,Y0,w0,z1,V0,0,i0,g0,null)}if(B.bindFramebuffer(A.FRAMEBUFFER,m),S0(j))Y.framebufferTexture2DMultisampleEXT(A.FRAMEBUFFER,I0,F0,C.get(C0).__webglTexture,0,J1(j));else if(F0===A.TEXTURE_2D||F0>=A.TEXTURE_CUBE_MAP_POSITIVE_X&&F0<=A.TEXTURE_CUBE_MAP_NEGATIVE_Z)A.framebufferTexture2D(A.FRAMEBUFFER,I0,F0,C.get(C0).__webglTexture,Y0);B.bindFramebuffer(A.FRAMEBUFFER,null)}function L0(m,j,C0){if(A.bindRenderbuffer(A.RENDERBUFFER,m),j.depthBuffer&&!j.stencilBuffer){let I0=K===!0?A.DEPTH_COMPONENT24:A.DEPTH_COMPONENT16;if(C0||S0(j)){let F0=j.depthTexture;if(F0&&F0.isDepthTexture){if(F0.type===1015)I0=A.DEPTH_COMPONENT32F;else if(F0.type===1014)I0=A.DEPTH_COMPONENT24}let Y0=J1(j);if(S0(j))Y.renderbufferStorageMultisampleEXT(A.RENDERBUFFER,Y0,I0,j.width,j.height);else A.renderbufferStorageMultisample(A.RENDERBUFFER,Y0,I0,j.width,j.height)}else A.renderbufferStorage(A.RENDERBUFFER,I0,j.width,j.height);A.framebufferRenderbuffer(A.FRAMEBUFFER,A.DEPTH_ATTACHMENT,A.RENDERBUFFER,m)}else if(j.depthBuffer&&j.stencilBuffer){let I0=J1(j);if(C0&&S0(j)===!1)A.renderbufferStorageMultisample(A.RENDERBUFFER,I0,A.DEPTH24_STENCIL8,j.width,j.height);else if(S0(j))Y.renderbufferStorageMultisampleEXT(A.RENDERBUFFER,I0,A.DEPTH24_STENCIL8,j.width,j.height);else A.renderbufferStorage(A.RENDERBUFFER,A.DEPTH_STENCIL,j.width,j.height);A.framebufferRenderbuffer(A.FRAMEBUFFER,A.DEPTH_STENCIL_ATTACHMENT,A.RENDERBUFFER,m)}else{let I0=j.textures;for(let F0=0;F0<I0.length;F0++){let Y0=I0[F0],i0=I.convert(Y0.format,Y0.colorSpace),g0=I.convert(Y0.type),w0=D(Y0.internalFormat,i0,g0,Y0.colorSpace),$0=J1(j);if(C0&&S0(j)===!1)A.renderbufferStorageMultisample(A.RENDERBUFFER,$0,w0,j.width,j.height);else if(S0(j))Y.renderbufferStorageMultisampleEXT(A.RENDERBUFFER,$0,w0,j.width,j.height);else A.renderbufferStorage(A.RENDERBUFFER,w0,j.width,j.height)}}A.bindRenderbuffer(A.RENDERBUFFER,null)}function T0(m,j){if(j&&j.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(B.bindFramebuffer(A.FRAMEBUFFER,m),!(j.depthTexture&&j.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(!C.get(j.depthTexture).__webglTexture||j.depthTexture.image.width!==j.width||j.depthTexture.image.height!==j.height)j.depthTexture.image.width=j.width,j.depthTexture.image.height=j.height,j.depthTexture.needsUpdate=!0;u(j.depthTexture,0);let I0=C.get(j.depthTexture).__webglTexture,F0=J1(j);if(j.depthTexture.format===1026)if(S0(j))Y.framebufferTexture2DMultisampleEXT(A.FRAMEBUFFER,A.DEPTH_ATTACHMENT,A.TEXTURE_2D,I0,0,F0);else A.framebufferTexture2D(A.FRAMEBUFFER,A.DEPTH_ATTACHMENT,A.TEXTURE_2D,I0,0);else if(j.depthTexture.format===1027)if(S0(j))Y.framebufferTexture2DMultisampleEXT(A.FRAMEBUFFER,A.DEPTH_STENCIL_ATTACHMENT,A.TEXTURE_2D,I0,0,F0);else A.framebufferTexture2D(A.FRAMEBUFFER,A.DEPTH_STENCIL_ATTACHMENT,A.TEXTURE_2D,I0,0);else throw new Error("Unknown depthTexture format")}function s(m){let j=C.get(m),C0=m.isWebGLCubeRenderTarget===!0;if(m.depthTexture&&!j.__autoAllocateDepthBuffer){if(C0)throw new Error("target.depthTexture not supported in Cube render targets");T0(j.__webglFramebuffer,m)}else if(C0){j.__webglDepthbuffer=[];for(let I0=0;I0<6;I0++)B.bindFramebuffer(A.FRAMEBUFFER,j.__webglFramebuffer[I0]),j.__webglDepthbuffer[I0]=A.createRenderbuffer(),L0(j.__webglDepthbuffer[I0],m,!1)}else B.bindFramebuffer(A.FRAMEBUFFER,j.__webglFramebuffer),j.__webglDepthbuffer=A.createRenderbuffer(),L0(j.__webglDepthbuffer,m,!1);B.bindFramebuffer(A.FRAMEBUFFER,null)}function P1(m,j,C0){let I0=C.get(m);if(j!==void 0)X0(I0.__webglFramebuffer,m,m.texture,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,0);if(C0!==void 0)s(m)}function Z0(m){let j=m.texture,C0=C.get(m),I0=C.get(j);m.addEventListener("dispose",P);let F0=m.textures,Y0=m.isWebGLCubeRenderTarget===!0,i0=F0.length>1,g0=w(m)||K;if(!i0){if(I0.__webglTexture===void 0)I0.__webglTexture=A.createTexture();I0.__version=j.version,q.memory.textures++}if(Y0){C0.__webglFramebuffer=[];for(let w0=0;w0<6;w0++)if(K&&j.mipmaps&&j.mipmaps.length>0){C0.__webglFramebuffer[w0]=[];for(let $0=0;$0<j.mipmaps.length;$0++)C0.__webglFramebuffer[w0][$0]=A.createFramebuffer()}else C0.__webglFramebuffer[w0]=A.createFramebuffer()}else{if(K&&j.mipmaps&&j.mipmaps.length>0){C0.__webglFramebuffer=[];for(let w0=0;w0<j.mipmaps.length;w0++)C0.__webglFramebuffer[w0]=A.createFramebuffer()}else C0.__webglFramebuffer=A.createFramebuffer();if(i0)if(J.drawBuffers)for(let w0=0,$0=F0.length;w0<$0;w0++){let z1=C.get(F0[w0]);if(z1.__webglTexture===void 0)z1.__webglTexture=A.createTexture(),q.memory.textures++}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(K&&m.samples>0&&S0(m)===!1){C0.__webglMultisampledFramebuffer=A.createFramebuffer(),C0.__webglColorRenderbuffer=[],B.bindFramebuffer(A.FRAMEBUFFER,C0.__webglMultisampledFramebuffer);for(let w0=0;w0<F0.length;w0++){let $0=F0[w0];C0.__webglColorRenderbuffer[w0]=A.createRenderbuffer(),A.bindRenderbuffer(A.RENDERBUFFER,C0.__webglColorRenderbuffer[w0]);let z1=I.convert($0.format,$0.colorSpace),V0=I.convert($0.type),o1=D($0.internalFormat,z1,V0,$0.colorSpace,m.isXRRenderTarget===!0),c0=J1(m);A.renderbufferStorageMultisample(A.RENDERBUFFER,c0,o1,m.width,m.height),A.framebufferRenderbuffer(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0+w0,A.RENDERBUFFER,C0.__webglColorRenderbuffer[w0])}if(A.bindRenderbuffer(A.RENDERBUFFER,null),m.depthBuffer)C0.__webglDepthRenderbuffer=A.createRenderbuffer(),L0(C0.__webglDepthRenderbuffer,m,!0);B.bindFramebuffer(A.FRAMEBUFFER,null)}}if(Y0){B.bindTexture(A.TEXTURE_CUBE_MAP,I0.__webglTexture),n(A.TEXTURE_CUBE_MAP,j,g0);for(let w0=0;w0<6;w0++)if(K&&j.mipmaps&&j.mipmaps.length>0)for(let $0=0;$0<j.mipmaps.length;$0++)X0(C0.__webglFramebuffer[w0][$0],m,j,A.COLOR_ATTACHMENT0,A.TEXTURE_CUBE_MAP_POSITIVE_X+w0,$0);else X0(C0.__webglFramebuffer[w0],m,j,A.COLOR_ATTACHMENT0,A.TEXTURE_CUBE_MAP_POSITIVE_X+w0,0);if(X(j,g0))V(A.TEXTURE_CUBE_MAP);B.unbindTexture()}else if(i0){for(let w0=0,$0=F0.length;w0<$0;w0++){let z1=F0[w0],V0=C.get(z1);if(B.bindTexture(A.TEXTURE_2D,V0.__webglTexture),n(A.TEXTURE_2D,z1,g0),X0(C0.__webglFramebuffer,m,z1,A.COLOR_ATTACHMENT0+w0,A.TEXTURE_2D,0),X(z1,g0))V(A.TEXTURE_2D)}B.unbindTexture()}else{let w0=A.TEXTURE_2D;if(m.isWebGL3DRenderTarget||m.isWebGLArrayRenderTarget)if(K)w0=m.isWebGL3DRenderTarget?A.TEXTURE_3D:A.TEXTURE_2D_ARRAY;else console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.");if(B.bindTexture(w0,I0.__webglTexture),n(w0,j,g0),K&&j.mipmaps&&j.mipmaps.length>0)for(let $0=0;$0<j.mipmaps.length;$0++)X0(C0.__webglFramebuffer[$0],m,j,A.COLOR_ATTACHMENT0,w0,$0);else X0(C0.__webglFramebuffer,m,j,A.COLOR_ATTACHMENT0,w0,0);if(X(j,g0))V(w0);B.unbindTexture()}if(m.depthBuffer)s(m)}function G0(m){let j=w(m)||K,C0=m.textures;for(let I0=0,F0=C0.length;I0<F0;I0++){let Y0=C0[I0];if(X(Y0,j)){let i0=m.isWebGLCubeRenderTarget?A.TEXTURE_CUBE_MAP:A.TEXTURE_2D,g0=C.get(Y0).__webglTexture;B.bindTexture(i0,g0),V(i0),B.unbindTexture()}}}function x0(m){if(K&&m.samples>0&&S0(m)===!1){let{textures:j,width:C0,height:I0}=m,F0=A.COLOR_BUFFER_BIT,Y0=[],i0=m.stencilBuffer?A.DEPTH_STENCIL_ATTACHMENT:A.DEPTH_ATTACHMENT,g0=C.get(m),w0=j.length>1;if(w0)for(let $0=0;$0<j.length;$0++)B.bindFramebuffer(A.FRAMEBUFFER,g0.__webglMultisampledFramebuffer),A.framebufferRenderbuffer(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0+$0,A.RENDERBUFFER,null),B.bindFramebuffer(A.FRAMEBUFFER,g0.__webglFramebuffer),A.framebufferTexture2D(A.DRAW_FRAMEBUFFER,A.COLOR_ATTACHMENT0+$0,A.TEXTURE_2D,null,0);B.bindFramebuffer(A.READ_FRAMEBUFFER,g0.__webglMultisampledFramebuffer),B.bindFramebuffer(A.DRAW_FRAMEBUFFER,g0.__webglFramebuffer);for(let $0=0;$0<j.length;$0++){if(Y0.push(A.COLOR_ATTACHMENT0+$0),m.depthBuffer)Y0.push(i0);let z1=g0.__ignoreDepthValues!==void 0?g0.__ignoreDepthValues:!1;if(z1===!1){if(m.depthBuffer)F0|=A.DEPTH_BUFFER_BIT;if(m.stencilBuffer)F0|=A.STENCIL_BUFFER_BIT}if(w0)A.framebufferRenderbuffer(A.READ_FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.RENDERBUFFER,g0.__webglColorRenderbuffer[$0]);if(z1===!0)A.invalidateFramebuffer(A.READ_FRAMEBUFFER,[i0]),A.invalidateFramebuffer(A.DRAW_FRAMEBUFFER,[i0]);if(w0){let V0=C.get(j[$0]).__webglTexture;A.framebufferTexture2D(A.DRAW_FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,V0,0)}if(A.blitFramebuffer(0,0,C0,I0,0,0,C0,I0,F0,A.NEAREST),Z)A.invalidateFramebuffer(A.READ_FRAMEBUFFER,Y0)}if(B.bindFramebuffer(A.READ_FRAMEBUFFER,null),B.bindFramebuffer(A.DRAW_FRAMEBUFFER,null),w0)for(let $0=0;$0<j.length;$0++){B.bindFramebuffer(A.FRAMEBUFFER,g0.__webglMultisampledFramebuffer),A.framebufferRenderbuffer(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0+$0,A.RENDERBUFFER,g0.__webglColorRenderbuffer[$0]);let z1=C.get(j[$0]).__webglTexture;B.bindFramebuffer(A.FRAMEBUFFER,g0.__webglFramebuffer),A.framebufferTexture2D(A.DRAW_FRAMEBUFFER,A.COLOR_ATTACHMENT0+$0,A.TEXTURE_2D,z1,0)}B.bindFramebuffer(A.DRAW_FRAMEBUFFER,g0.__webglMultisampledFramebuffer)}}function J1(m){return Math.min(J.maxSamples,m.samples)}function S0(m){let j=C.get(m);return K&&m.samples>0&&Q.has("WEBGL_multisampled_render_to_texture")===!0&&j.__useRenderToTexture!==!1}function t0(m){let j=q.render.frame;if(G.get(m)!==j)G.set(m,j),m.update()}function h1(m,j){let{colorSpace:C0,format:I0,type:F0}=m;if(m.isCompressedTexture===!0||m.isVideoTexture===!0||m.format===1035)return j;if(C0!=="srgb-linear"&&C0!=="")if(O1.getTransfer(C0)==="srgb"){if(K===!1)if(Q.has("EXT_sRGB")===!0&&I0===1023)m.format=1035,m.minFilter=1006,m.generateMipmaps=!1;else j=iZ.sRGBToLinear(j);else if(I0!==1023||F0!==1009)console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType.")}else console.error("THREE.WebGLTextures: Unsupported texture color space:",C0);return j}function $1(m){if(typeof HTMLImageElement!=="undefined"&&m instanceof HTMLImageElement)H.width=m.naturalWidth||m.width,H.height=m.naturalHeight||m.height;else if(typeof VideoFrame!=="undefined"&&m instanceof VideoFrame)H.width=m.displayWidth,H.height=m.displayHeight;else H.width=m.width,H.height=m.height;return H}this.allocateTextureUnit=M,this.resetTextureUnits=O,this.setTexture2D=u,this.setTexture2DArray=T,this.setTexture3D=d,this.setTextureCube=g,this.rebindTextures=P1,this.setupRenderTarget=Z0,this.updateRenderTargetMipmap=G0,this.updateMultisampleRenderTarget=x0,this.setupDepthRenderbuffer=s,this.setupFrameBufferTexture=X0,this.useMultisampledRTT=S0}function Gx(A,Q,B){let C=B.isWebGL2;function J(I,q=""){let K,Y=O1.getTransfer(q);if(I===1009)return A.UNSIGNED_BYTE;if(I===1017)return A.UNSIGNED_SHORT_4_4_4_4;if(I===1018)return A.UNSIGNED_SHORT_5_5_5_1;if(I===1010)return A.BYTE;if(I===1011)return A.SHORT;if(I===1012)return A.UNSIGNED_SHORT;if(I===1013)return A.INT;if(I===1014)return A.UNSIGNED_INT;if(I===1015)return A.FLOAT;if(I===1016){if(C)return A.HALF_FLOAT;if(K=Q.get("OES_texture_half_float"),K!==null)return K.HALF_FLOAT_OES;else return null}if(I===1021)return A.ALPHA;if(I===1023)return A.RGBA;if(I===1024)return A.LUMINANCE;if(I===1025)return A.LUMINANCE_ALPHA;if(I===1026)return A.DEPTH_COMPONENT;if(I===1027)return A.DEPTH_STENCIL;if(I===1035)if(K=Q.get("EXT_sRGB"),K!==null)return K.SRGB_ALPHA_EXT;else return null;if(I===1028)return A.RED;if(I===1029)return A.RED_INTEGER;if(I===1030)return A.RG;if(I===1031)return A.RG_INTEGER;if(I===1033)return A.RGBA_INTEGER;if(I===33776||I===33777||I===33778||I===33779)if(Y==="srgb")if(K=Q.get("WEBGL_compressed_texture_s3tc_srgb"),K!==null){if(I===33776)return K.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(I===33777)return K.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(I===33778)return K.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(I===33779)return K.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(K=Q.get("WEBGL_compressed_texture_s3tc"),K!==null){if(I===33776)return K.COMPRESSED_RGB_S3TC_DXT1_EXT;if(I===33777)return K.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(I===33778)return K.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(I===33779)return K.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(I===35840||I===35841||I===35842||I===35843)if(K=Q.get("WEBGL_compressed_texture_pvrtc"),K!==null){if(I===35840)return K.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(I===35841)return K.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(I===35842)return K.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(I===35843)return K.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(I===36196)if(K=Q.get("WEBGL_compressed_texture_etc1"),K!==null)return K.COMPRESSED_RGB_ETC1_WEBGL;else return null;if(I===37492||I===37496)if(K=Q.get("WEBGL_compressed_texture_etc"),K!==null){if(I===37492)return Y==="srgb"?K.COMPRESSED_SRGB8_ETC2:K.COMPRESSED_RGB8_ETC2;if(I===37496)return Y==="srgb"?K.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:K.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(I===37808||I===37809||I===37810||I===37811||I===37812||I===37813||I===37814||I===37815||I===37816||I===37817||I===37818||I===37819||I===37820||I===37821)if(K=Q.get("WEBGL_compressed_texture_astc"),K!==null){if(I===37808)return Y==="srgb"?K.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:K.COMPRESSED_RGBA_ASTC_4x4_KHR;if(I===37809)return Y==="srgb"?K.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:K.COMPRESSED_RGBA_ASTC_5x4_KHR;if(I===37810)return Y==="srgb"?K.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:K.COMPRESSED_RGBA_ASTC_5x5_KHR;if(I===37811)return Y==="srgb"?K.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:K.COMPRESSED_RGBA_ASTC_6x5_KHR;if(I===37812)return Y==="srgb"?K.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:K.COMPRESSED_RGBA_ASTC_6x6_KHR;if(I===37813)return Y==="srgb"?K.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:K.COMPRESSED_RGBA_ASTC_8x5_KHR;if(I===37814)return Y==="srgb"?K.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:K.COMPRESSED_RGBA_ASTC_8x6_KHR;if(I===37815)return Y==="srgb"?K.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:K.COMPRESSED_RGBA_ASTC_8x8_KHR;if(I===37816)return Y==="srgb"?K.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:K.COMPRESSED_RGBA_ASTC_10x5_KHR;if(I===37817)return Y==="srgb"?K.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:K.COMPRESSED_RGBA_ASTC_10x6_KHR;if(I===37818)return Y==="srgb"?K.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:K.COMPRESSED_RGBA_ASTC_10x8_KHR;if(I===37819)return Y==="srgb"?K.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:K.COMPRESSED_RGBA_ASTC_10x10_KHR;if(I===37820)return Y==="srgb"?K.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:K.COMPRESSED_RGBA_ASTC_12x10_KHR;if(I===37821)return Y==="srgb"?K.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:K.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(I===36492||I===36494||I===36495)if(K=Q.get("EXT_texture_compression_bptc"),K!==null){if(I===36492)return Y==="srgb"?K.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:K.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(I===36494)return K.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(I===36495)return K.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(I===36283||I===36284||I===36285||I===36286)if(K=Q.get("EXT_texture_compression_rgtc"),K!==null){if(I===36492)return K.COMPRESSED_RED_RGTC1_EXT;if(I===36284)return K.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(I===36285)return K.COMPRESSED_RED_GREEN_RGTC2_EXT;if(I===36286)return K.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;if(I===1020){if(C)return A.UNSIGNED_INT_24_8;if(K=Q.get("WEBGL_depth_texture"),K!==null)return K.UNSIGNED_INT_24_8_WEBGL;else return null}return A[I]!==void 0?A[I]:null}return{convert:J}}class fE extends b1{constructor(A=[]){super();this.isArrayCamera=!0,this.cameras=A}}class vA extends L1{constructor(){super();this.isGroup=!0,this.type="Group"}}var Wx={type:"move"};class TJ{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){if(this._hand===null)this._hand=new vA,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1};return this._hand}getTargetRaySpace(){if(this._targetRay===null)this._targetRay=new vA,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new p,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new p;return this._targetRay}getGripSpace(){if(this._grip===null)this._grip=new vA,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new p,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new p;return this._grip}dispatchEvent(A){if(this._targetRay!==null)this._targetRay.dispatchEvent(A);if(this._grip!==null)this._grip.dispatchEvent(A);if(this._hand!==null)this._hand.dispatchEvent(A);return this}connect(A){if(A&&A.hand){let Q=this._hand;if(Q)for(let B of A.hand.values())this._getHandJoint(Q,B)}return this.dispatchEvent({type:"connected",data:A}),this}disconnect(A){if(this.dispatchEvent({type:"disconnected",data:A}),this._targetRay!==null)this._targetRay.visible=!1;if(this._grip!==null)this._grip.visible=!1;if(this._hand!==null)this._hand.visible=!1;return this}update(A,Q,B){let C=null,J=null,I=null,q=this._targetRay,K=this._grip,Y=this._hand;if(A&&Q.session.visibilityState!=="visible-blurred"){if(Y&&A.hand){I=!0;for(let z of A.hand.values()){let U=Q.getJointPose(z,B),E=this._getHandJoint(Y,z);if(U!==null)E.matrix.fromArray(U.transform.matrix),E.matrix.decompose(E.position,E.rotation,E.scale),E.matrixWorldNeedsUpdate=!0,E.jointRadius=U.radius;E.visible=U!==null}let Z=Y.joints["index-finger-tip"],H=Y.joints["thumb-tip"],G=Z.position.distanceTo(H.position),W=0.02,F=0.005;if(Y.inputState.pinching&&G>W+F)Y.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:A.handedness,target:this});else if(!Y.inputState.pinching&&G<=W-F)Y.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:A.handedness,target:this})}else if(K!==null&&A.gripSpace){if(J=Q.getPose(A.gripSpace,B),J!==null){if(K.matrix.fromArray(J.transform.matrix),K.matrix.decompose(K.position,K.rotation,K.scale),K.matrixWorldNeedsUpdate=!0,J.linearVelocity)K.hasLinearVelocity=!0,K.linearVelocity.copy(J.linearVelocity);else K.hasLinearVelocity=!1;if(J.angularVelocity)K.hasAngularVelocity=!0,K.angularVelocity.copy(J.angularVelocity);else K.hasAngularVelocity=!1}}if(q!==null){if(C=Q.getPose(A.targetRaySpace,B),C===null&&J!==null)C=J;if(C!==null){if(q.matrix.fromArray(C.transform.matrix),q.matrix.decompose(q.position,q.rotation,q.scale),q.matrixWorldNeedsUpdate=!0,C.linearVelocity)q.hasLinearVelocity=!0,q.linearVelocity.copy(C.linearVelocity);else q.hasLinearVelocity=!1;if(C.angularVelocity)q.hasAngularVelocity=!0,q.angularVelocity.copy(C.angularVelocity);else q.hasAngularVelocity=!1;this.dispatchEvent(Wx)}}}if(q!==null)q.visible=C!==null;if(K!==null)K.visible=J!==null;if(Y!==null)Y.visible=I!==null;return this}_getHandJoint(A,Q){if(A.joints[Q.jointName]===void 0){let B=new vA;B.matrixAutoUpdate=!1,B.visible=!1,A.joints[Q.jointName]=B,A.add(B)}return A.joints[Q.jointName]}}var Fx=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Vx=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class hE{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(A,Q,B){if(this.texture===null){let C=new E1,J=A.properties.get(C);if(J.__webglTexture=Q.texture,Q.depthNear!=B.depthNear||Q.depthFar!=B.depthFar)this.depthNear=Q.depthNear,this.depthFar=Q.depthFar;this.texture=C}}render(A,Q){if(this.texture!==null){if(this.mesh===null){let B=Q.cameras[0].viewport,C=new C2({extensions:{fragDepth:!0},vertexShader:Fx,fragmentShader:Vx,uniforms:{depthColor:{value:this.texture},depthWidth:{value:B.z},depthHeight:{value:B.w}}});this.mesh=new A1(new P2(20,20),C)}A.render(this.mesh,Q)}}reset(){this.texture=null,this.mesh=null}}class xE extends O2{constructor(A,Q){super();let B=this,C=null,J=1,I=null,q="local-floor",K=1,Y=null,Z=null,H=null,G=null,W=null,F=null,z=new hE,U=Q.getContextAttributes(),E=null,w=null,L=[],X=[],V=new M0,D=null,N=new b1;N.layers.enable(1),N.viewport=new x1;let R=new b1;R.layers.enable(2),R.viewport=new x1;let k=[N,R],P=new fE;P.layers.enable(1),P.layers.enable(2);let $=null,_=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(i){let n=L[i];if(n===void 0)n=new TJ,L[i]=n;return n.getTargetRaySpace()},this.getControllerGrip=function(i){let n=L[i];if(n===void 0)n=new TJ,L[i]=n;return n.getGripSpace()},this.getHand=function(i){let n=L[i];if(n===void 0)n=new TJ,L[i]=n;return n.getHandSpace()};function h(i){let n=X.indexOf(i.inputSource);if(n===-1)return;let J0=L[n];if(J0!==void 0)J0.update(i.inputSource,i.frame,Y||I),J0.dispatchEvent({type:i.type,data:i.inputSource})}function S(){C.removeEventListener("select",h),C.removeEventListener("selectstart",h),C.removeEventListener("selectend",h),C.removeEventListener("squeeze",h),C.removeEventListener("squeezestart",h),C.removeEventListener("squeezeend",h),C.removeEventListener("end",S),C.removeEventListener("inputsourceschange",O);for(let i=0;i<L.length;i++){let n=X[i];if(n===null)continue;X[i]=null,L[i].disconnect(n)}$=null,_=null,z.reset(),A.setRenderTarget(E),W=null,G=null,H=null,C=null,w=null,t.stop(),B.isPresenting=!1,A.setPixelRatio(D),A.setSize(V.width,V.height,!1),B.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(i){if(J=i,B.isPresenting===!0)console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(i){if(q=i,B.isPresenting===!0)console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return Y||I},this.setReferenceSpace=function(i){Y=i},this.getBaseLayer=function(){return G!==null?G:W},this.getBinding=function(){return H},this.getFrame=function(){return F},this.getSession=function(){return C},this.setSession=async function(i){if(C=i,C!==null){if(E=A.getRenderTarget(),C.addEventListener("select",h),C.addEventListener("selectstart",h),C.addEventListener("selectend",h),C.addEventListener("squeeze",h),C.addEventListener("squeezestart",h),C.addEventListener("squeezeend",h),C.addEventListener("end",S),C.addEventListener("inputsourceschange",O),U.xrCompatible!==!0)await Q.makeXRCompatible();if(D=A.getPixelRatio(),A.getSize(V),C.renderState.layers===void 0||A.capabilities.isWebGL2===!1){let n={antialias:C.renderState.layers===void 0?U.antialias:!0,alpha:!0,depth:U.depth,stencil:U.stencil,framebufferScaleFactor:J};W=new XRWebGLLayer(C,Q,n),C.updateRenderState({baseLayer:W}),A.setPixelRatio(1),A.setSize(W.framebufferWidth,W.framebufferHeight,!1),w=new u2(W.framebufferWidth,W.framebufferHeight,{format:1023,type:1009,colorSpace:A.outputColorSpace,stencilBuffer:U.stencil})}else{let n=null,J0=null,e=null;if(U.depth)e=U.stencil?Q.DEPTH24_STENCIL8:Q.DEPTH_COMPONENT24,n=U.stencil?1027:1026,J0=U.stencil?1020:1014;let H0={colorFormat:Q.RGBA8,depthFormat:e,scaleFactor:J};H=new XRWebGLBinding(C,Q),G=H.createProjectionLayer(H0),C.updateRenderState({layers:[G]}),A.setPixelRatio(1),A.setSize(G.textureWidth,G.textureHeight,!1),w=new u2(G.textureWidth,G.textureHeight,{format:1023,type:1009,depthTexture:new eZ(G.textureWidth,G.textureHeight,J0,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:U.stencil,colorSpace:A.outputColorSpace,samples:U.antialias?4:0});let X0=A.properties.get(w);X0.__ignoreDepthValues=G.ignoreDepthValues}w.isXRRenderTarget=!0,this.setFoveation(K),Y=null,I=await C.requestReferenceSpace(q),t.setContext(C),t.start(),B.isPresenting=!0,B.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(C!==null)return C.environmentBlendMode};function O(i){for(let n=0;n<i.removed.length;n++){let J0=i.removed[n],e=X.indexOf(J0);if(e>=0)X[e]=null,L[e].disconnect(J0)}for(let n=0;n<i.added.length;n++){let J0=i.added[n],e=X.indexOf(J0);if(e===-1){for(let X0=0;X0<L.length;X0++)if(X0>=X.length){X.push(J0),e=X0;break}else if(X[X0]===null){X[X0]=J0,e=X0;break}if(e===-1)break}let H0=L[e];if(H0)H0.connect(J0)}}let M=new p,y=new p;function u(i,n,J0){M.setFromMatrixPosition(n.matrixWorld),y.setFromMatrixPosition(J0.matrixWorld);let e=M.distanceTo(y),H0=n.projectionMatrix.elements,X0=J0.projectionMatrix.elements,L0=H0[14]/(H0[10]-1),T0=H0[14]/(H0[10]+1),s=(H0[9]+1)/H0[5],P1=(H0[9]-1)/H0[5],Z0=(H0[8]-1)/H0[0],G0=(X0[8]+1)/X0[0],x0=L0*Z0,J1=L0*G0,S0=e/(-Z0+G0),t0=S0*-Z0;n.matrixWorld.decompose(i.position,i.quaternion,i.scale),i.translateX(t0),i.translateZ(S0),i.matrixWorld.compose(i.position,i.quaternion,i.scale),i.matrixWorldInverse.copy(i.matrixWorld).invert();let h1=L0+S0,$1=T0+S0,m=x0-t0,j=J1+(e-t0),C0=s*T0/$1*h1,I0=P1*T0/$1*h1;i.projectionMatrix.makePerspective(m,j,C0,I0,h1,$1),i.projectionMatrixInverse.copy(i.projectionMatrix).invert()}function T(i,n){if(n===null)i.matrixWorld.copy(i.matrix);else i.matrixWorld.multiplyMatrices(n.matrixWorld,i.matrix);i.matrixWorldInverse.copy(i.matrixWorld).invert()}this.updateCamera=function(i){if(C===null)return;if(z.texture!==null)i.near=z.depthNear,i.far=z.depthFar;if(P.near=R.near=N.near=i.near,P.far=R.far=N.far=i.far,$!==P.near||_!==P.far)C.updateRenderState({depthNear:P.near,depthFar:P.far}),$=P.near,_=P.far,N.near=$,N.far=_,R.near=$,R.far=_,N.updateProjectionMatrix(),R.updateProjectionMatrix(),i.updateProjectionMatrix();let n=i.parent,J0=P.cameras;T(P,n);for(let e=0;e<J0.length;e++)T(J0[e],n);if(J0.length===2)u(P,N,R);else P.projectionMatrix.copy(N.projectionMatrix);d(i,P,n)};function d(i,n,J0){if(J0===null)i.matrix.copy(n.matrixWorld);else i.matrix.copy(J0.matrixWorld),i.matrix.invert(),i.matrix.multiply(n.matrixWorld);if(i.matrix.decompose(i.position,i.quaternion,i.scale),i.updateMatrixWorld(!0),i.projectionMatrix.copy(n.projectionMatrix),i.projectionMatrixInverse.copy(n.projectionMatrixInverse),i.isPerspectiveCamera)i.fov=j7*2*Math.atan(1/i.projectionMatrix.elements[5]),i.zoom=1}this.getCamera=function(){return P},this.getFoveation=function(){if(G===null&&W===null)return;return K},this.setFoveation=function(i){if(K=i,G!==null)G.fixedFoveation=i;if(W!==null&&W.fixedFoveation!==void 0)W.fixedFoveation=i},this.hasDepthSensing=function(){return z.texture!==null};let g=null;function l(i,n){if(Z=n.getViewerPose(Y||I),F=n,Z!==null){let J0=Z.views;if(W!==null)A.setRenderTargetFramebuffer(w,W.framebuffer),A.setRenderTarget(w);let e=!1;if(J0.length!==P.cameras.length)P.cameras.length=0,e=!0;for(let X0=0;X0<J0.length;X0++){let L0=J0[X0],T0=null;if(W!==null)T0=W.getViewport(L0);else{let P1=H.getViewSubImage(G,L0);if(T0=P1.viewport,X0===0)A.setRenderTargetTextures(w,P1.colorTexture,G.ignoreDepthValues?void 0:P1.depthStencilTexture),A.setRenderTarget(w)}let s=k[X0];if(s===void 0)s=new b1,s.layers.enable(X0),s.viewport=new x1,k[X0]=s;if(s.matrix.fromArray(L0.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(L0.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(T0.x,T0.y,T0.width,T0.height),X0===0)P.matrix.copy(s.matrix),P.matrix.decompose(P.position,P.quaternion,P.scale);if(e===!0)P.cameras.push(s)}let H0=C.enabledFeatures;if(H0&&H0.includes("depth-sensing")){let X0=H.getDepthInformation(J0[0]);if(X0&&X0.isValid&&X0.texture)z.init(A,X0,C.renderState)}}for(let J0=0;J0<L.length;J0++){let e=X[J0],H0=L[J0];if(e!==null&&H0!==void 0)H0.update(e,n,Y||I)}if(z.render(A,P),g)g(i,n);if(n.detectedPlanes)B.dispatchEvent({type:"planesdetected",data:n});F=null}let t=new $E;t.setAnimationLoop(l),this.setAnimationLoop=function(i){g=i},this.dispose=function(){}}}var a6=new VA,Ux=new h0;function zx(A,Q){function B(E,w){if(E.matrixAutoUpdate===!0)E.updateMatrix();w.value.copy(E.matrix)}function C(E,w){if(w.color.getRGB(E.fogColor.value,NE(A)),w.isFog)E.fogNear.value=w.near,E.fogFar.value=w.far;else if(w.isFogExp2)E.fogDensity.value=w.density}function J(E,w,L,X,V){if(w.isMeshBasicMaterial)I(E,w);else if(w.isMeshLambertMaterial)I(E,w);else if(w.isMeshToonMaterial)I(E,w),G(E,w);else if(w.isMeshPhongMaterial)I(E,w),H(E,w);else if(w.isMeshStandardMaterial){if(I(E,w),W(E,w),w.isMeshPhysicalMaterial)F(E,w,V)}else if(w.isMeshMatcapMaterial)I(E,w),z(E,w);else if(w.isMeshDepthMaterial)I(E,w);else if(w.isMeshDistanceMaterial)I(E,w),U(E,w);else if(w.isMeshNormalMaterial)I(E,w);else if(w.isLineBasicMaterial){if(q(E,w),w.isLineDashedMaterial)K(E,w)}else if(w.isPointsMaterial)Y(E,w,L,X);else if(w.isSpriteMaterial)Z(E,w);else if(w.isShadowMaterial)E.color.value.copy(w.color),E.opacity.value=w.opacity;else if(w.isShaderMaterial)w.uniformsNeedUpdate=!1}function I(E,w){if(E.opacity.value=w.opacity,w.color)E.diffuse.value.copy(w.color);if(w.emissive)E.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity);if(w.map)E.map.value=w.map,B(w.map,E.mapTransform);if(w.alphaMap)E.alphaMap.value=w.alphaMap,B(w.alphaMap,E.alphaMapTransform);if(w.bumpMap){if(E.bumpMap.value=w.bumpMap,B(w.bumpMap,E.bumpMapTransform),E.bumpScale.value=w.bumpScale,w.side===1)E.bumpScale.value*=-1}if(w.normalMap){if(E.normalMap.value=w.normalMap,B(w.normalMap,E.normalMapTransform),E.normalScale.value.copy(w.normalScale),w.side===1)E.normalScale.value.negate()}if(w.displacementMap)E.displacementMap.value=w.displacementMap,B(w.displacementMap,E.displacementMapTransform),E.displacementScale.value=w.displacementScale,E.displacementBias.value=w.displacementBias;if(w.emissiveMap)E.emissiveMap.value=w.emissiveMap,B(w.emissiveMap,E.emissiveMapTransform);if(w.specularMap)E.specularMap.value=w.specularMap,B(w.specularMap,E.specularMapTransform);if(w.alphaTest>0)E.alphaTest.value=w.alphaTest;let L=Q.get(w),X=L.envMap,V=L.envMapRotation;if(X){if(E.envMap.value=X,a6.copy(V),a6.x*=-1,a6.y*=-1,a6.z*=-1,X.isCubeTexture&&X.isRenderTargetTexture===!1)a6.y*=-1,a6.z*=-1;E.envMapRotation.value.setFromMatrix4(Ux.makeRotationFromEuler(a6)),E.flipEnvMap.value=X.isCubeTexture&&X.isRenderTargetTexture===!1?-1:1,E.reflectivity.value=w.reflectivity,E.ior.value=w.ior,E.refractionRatio.value=w.refractionRatio}if(w.lightMap){E.lightMap.value=w.lightMap;let D=A._useLegacyLights===!0?Math.PI:1;E.lightMapIntensity.value=w.lightMapIntensity*D,B(w.lightMap,E.lightMapTransform)}if(w.aoMap)E.aoMap.value=w.aoMap,E.aoMapIntensity.value=w.aoMapIntensity,B(w.aoMap,E.aoMapTransform)}function q(E,w){if(E.diffuse.value.copy(w.color),E.opacity.value=w.opacity,w.map)E.map.value=w.map,B(w.map,E.mapTransform)}function K(E,w){E.dashSize.value=w.dashSize,E.totalSize.value=w.dashSize+w.gapSize,E.scale.value=w.scale}function Y(E,w,L,X){if(E.diffuse.value.copy(w.color),E.opacity.value=w.opacity,E.size.value=w.size*L,E.scale.value=X*0.5,w.map)E.map.value=w.map,B(w.map,E.uvTransform);if(w.alphaMap)E.alphaMap.value=w.alphaMap,B(w.alphaMap,E.alphaMapTransform);if(w.alphaTest>0)E.alphaTest.value=w.alphaTest}function Z(E,w){if(E.diffuse.value.copy(w.color),E.opacity.value=w.opacity,E.rotation.value=w.rotation,w.map)E.map.value=w.map,B(w.map,E.mapTransform);if(w.alphaMap)E.alphaMap.value=w.alphaMap,B(w.alphaMap,E.alphaMapTransform);if(w.alphaTest>0)E.alphaTest.value=w.alphaTest}function H(E,w){E.specular.value.copy(w.specular),E.shininess.value=Math.max(w.shininess,0.0001)}function G(E,w){if(w.gradientMap)E.gradientMap.value=w.gradientMap}function W(E,w){if(E.metalness.value=w.metalness,w.metalnessMap)E.metalnessMap.value=w.metalnessMap,B(w.metalnessMap,E.metalnessMapTransform);if(E.roughness.value=w.roughness,w.roughnessMap)E.roughnessMap.value=w.roughnessMap,B(w.roughnessMap,E.roughnessMapTransform);if(Q.get(w).envMap)E.envMapIntensity.value=w.envMapIntensity}function F(E,w,L){if(E.ior.value=w.ior,w.sheen>0){if(E.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),E.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap)E.sheenColorMap.value=w.sheenColorMap,B(w.sheenColorMap,E.sheenColorMapTransform);if(w.sheenRoughnessMap)E.sheenRoughnessMap.value=w.sheenRoughnessMap,B(w.sheenRoughnessMap,E.sheenRoughnessMapTransform)}if(w.clearcoat>0){if(E.clearcoat.value=w.clearcoat,E.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap)E.clearcoatMap.value=w.clearcoatMap,B(w.clearcoatMap,E.clearcoatMapTransform);if(w.clearcoatRoughnessMap)E.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap,B(w.clearcoatRoughnessMap,E.clearcoatRoughnessMapTransform);if(w.clearcoatNormalMap){if(E.clearcoatNormalMap.value=w.clearcoatNormalMap,B(w.clearcoatNormalMap,E.clearcoatNormalMapTransform),E.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),w.side===1)E.clearcoatNormalScale.value.negate()}}if(w.iridescence>0){if(E.iridescence.value=w.iridescence,E.iridescenceIOR.value=w.iridescenceIOR,E.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],E.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap)E.iridescenceMap.value=w.iridescenceMap,B(w.iridescenceMap,E.iridescenceMapTransform);if(w.iridescenceThicknessMap)E.iridescenceThicknessMap.value=w.iridescenceThicknessMap,B(w.iridescenceThicknessMap,E.iridescenceThicknessMapTransform)}if(w.transmission>0){if(E.transmission.value=w.transmission,E.transmissionSamplerMap.value=L.texture,E.transmissionSamplerSize.value.set(L.width,L.height),w.transmissionMap)E.transmissionMap.value=w.transmissionMap,B(w.transmissionMap,E.transmissionMapTransform);if(E.thickness.value=w.thickness,w.thicknessMap)E.thicknessMap.value=w.thicknessMap,B(w.thicknessMap,E.thicknessMapTransform);E.attenuationDistance.value=w.attenuationDistance,E.attenuationColor.value.copy(w.attenuationColor)}if(w.anisotropy>0){if(E.anisotropyVector.value.set(w.anisotropy*Math.cos(w.anisotropyRotation),w.anisotropy*Math.sin(w.anisotropyRotation)),w.anisotropyMap)E.anisotropyMap.value=w.anisotropyMap,B(w.anisotropyMap,E.anisotropyMapTransform)}if(E.specularIntensity.value=w.specularIntensity,E.specularColor.value.copy(w.specularColor),w.specularColorMap)E.specularColorMap.value=w.specularColorMap,B(w.specularColorMap,E.specularColorMapTransform);if(w.specularIntensityMap)E.specularIntensityMap.value=w.specularIntensityMap,B(w.specularIntensityMap,E.specularIntensityMapTransform)}function z(E,w){if(w.matcap)E.matcap.value=w.matcap}function U(E,w){let L=Q.get(w).light;E.referencePosition.value.setFromMatrixPosition(L.matrixWorld),E.nearDistance.value=L.shadow.camera.near,E.farDistance.value=L.shadow.camera.far}return{refreshFogUniforms:C,refreshMaterialUniforms:J}}function Dx(A,Q,B,C){let J={},I={},q=[],K=B.isWebGL2?A.getParameter(A.MAX_UNIFORM_BUFFER_BINDINGS):0;function Y(L,X){let V=X.program;C.uniformBlockBinding(L,V)}function Z(L,X){let V=J[L.id];if(V===void 0)z(L),V=H(L),J[L.id]=V,L.addEventListener("dispose",E);let D=X.program;C.updateUBOMapping(L,D);let N=Q.render.frame;if(I[L.id]!==N)W(L),I[L.id]=N}function H(L){let X=G();L.__bindingPointIndex=X;let V=A.createBuffer(),D=L.__size,N=L.usage;return A.bindBuffer(A.UNIFORM_BUFFER,V),A.bufferData(A.UNIFORM_BUFFER,D,N),A.bindBuffer(A.UNIFORM_BUFFER,null),A.bindBufferBase(A.UNIFORM_BUFFER,X,V),V}function G(){for(let L=0;L<K;L++)if(q.indexOf(L)===-1)return q.push(L),L;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function W(L){let X=J[L.id],V=L.uniforms,D=L.__cache;A.bindBuffer(A.UNIFORM_BUFFER,X);for(let N=0,R=V.length;N<R;N++){let k=Array.isArray(V[N])?V[N]:[V[N]];for(let P=0,$=k.length;P<$;P++){let _=k[P];if(F(_,N,P,D)===!0){let h=_.__offset,S=Array.isArray(_.value)?_.value:[_.value],O=0;for(let M=0;M<S.length;M++){let y=S[M],u=U(y);if(typeof y==="number"||typeof y==="boolean")_.__data[0]=y,A.bufferSubData(A.UNIFORM_BUFFER,h+O,_.__data);else if(y.isMatrix3)_.__data[0]=y.elements[0],_.__data[1]=y.elements[1],_.__data[2]=y.elements[2],_.__data[3]=0,_.__data[4]=y.elements[3],_.__data[5]=y.elements[4],_.__data[6]=y.elements[5],_.__data[7]=0,_.__data[8]=y.elements[6],_.__data[9]=y.elements[7],_.__data[10]=y.elements[8],_.__data[11]=0;else y.toArray(_.__data,O),O+=u.storage/Float32Array.BYTES_PER_ELEMENT}A.bufferSubData(A.UNIFORM_BUFFER,h,_.__data)}}}A.bindBuffer(A.UNIFORM_BUFFER,null)}function F(L,X,V,D){let N=L.value,R=X+"_"+V;if(D[R]===void 0){if(typeof N==="number"||typeof N==="boolean")D[R]=N;else D[R]=N.clone();return!0}else{let k=D[R];if(typeof N==="number"||typeof N==="boolean"){if(k!==N)return D[R]=N,!0}else if(k.equals(N)===!1)return k.copy(N),!0}return!1}function z(L){let X=L.uniforms,V=0,D=16;for(let R=0,k=X.length;R<k;R++){let P=Array.isArray(X[R])?X[R]:[X[R]];for(let $=0,_=P.length;$<_;$++){let h=P[$],S=Array.isArray(h.value)?h.value:[h.value];for(let O=0,M=S.length;O<M;O++){let y=S[O],u=U(y),T=V%D;if(T!==0&&D-T<u.boundary)V+=D-T;h.__data=new Float32Array(u.storage/Float32Array.BYTES_PER_ELEMENT),h.__offset=V,V+=u.storage}}}let N=V%D;if(N>0)V+=D-N;return L.__size=V,L.__cache={},this}function U(L){let X={boundary:0,storage:0};if(typeof L==="number"||typeof L==="boolean")X.boundary=4,X.storage=4;else if(L.isVector2)X.boundary=8,X.storage=8;else if(L.isVector3||L.isColor)X.boundary=16,X.storage=12;else if(L.isVector4)X.boundary=16,X.storage=16;else if(L.isMatrix3)X.boundary=48,X.storage=48;else if(L.isMatrix4)X.boundary=64,X.storage=64;else if(L.isTexture)console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group.");else console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",L);return X}function E(L){let X=L.target;X.removeEventListener("dispose",E);let V=q.indexOf(X.__bindingPointIndex);q.splice(V,1),A.deleteBuffer(J[X.id]),delete J[X.id],delete I[X.id]}function w(){for(let L in J)A.deleteBuffer(J[L]);q=[],J={},I={}}return{bind:Y,update:Z,dispose:w}}class g4{constructor(A={}){let{canvas:Q=Dj(),context:B=null,depth:C=!0,stencil:J=!0,alpha:I=!1,antialias:q=!1,premultipliedAlpha:K=!0,preserveDrawingBuffer:Y=!1,powerPreference:Z="default",failIfMajorPerformanceCaveat:H=!1}=A;this.isWebGLRenderer=!0;let G;if(B!==null)G=B.getContextAttributes().alpha;else G=I;let W=new Uint32Array(4),F=new Int32Array(4),z=null,U=null,E=[],w=[];this.domElement=Q,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace="srgb",this._useLegacyLights=!1,this.toneMapping=0,this.toneMappingExposure=1;let L=this,X=!1,V=0,D=0,N=null,R=-1,k=null,P=new x1,$=new x1,_=null,h=new p0(0),S=0,O=Q.width,M=Q.height,y=1,u=null,T=null,d=new x1(0,0,O,M),g=new x1(0,0,O,M),l=!1,t=new uJ,i=!1,n=!1,J0=null,e=new h0,H0=new M0,X0=new p,L0={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function T0(){return N===null?y:1}let s=B;function P1(x,o){for(let Q0=0;Q0<x.length;Q0++){let B0=x[Q0],A0=Q.getContext(B0,o);if(A0!==null)return A0}return null}try{let x={alpha:!0,depth:C,stencil:J,antialias:q,premultipliedAlpha:K,preserveDrawingBuffer:Y,powerPreference:Z,failIfMajorPerformanceCaveat:H};if("setAttribute"in Q)Q.setAttribute("data-engine","three.js r162");if(Q.addEventListener("webglcontextlost",P0,!1),Q.addEventListener("webglcontextrestored",m0,!1),Q.addEventListener("webglcontextcreationerror",c,!1),s===null){let o=["webgl2","webgl","experimental-webgl"];if(L.isWebGL1Renderer===!0)o.shift();if(s=P1(o,x),s===null)if(P1(o))throw new Error("Error creating WebGL context with your selected attributes.");else throw new Error("Error creating WebGL context.")}if(typeof WebGLRenderingContext!=="undefined"&&s instanceof WebGLRenderingContext)console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163.");if(s.getShaderPrecisionFormat===void 0)s.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}}catch(x){throw console.error("THREE.WebGLRenderer: "+x.message),x}let Z0,G0,x0,J1,S0,t0,h1,$1,m,j,C0,I0,F0,Y0,i0,g0,w0,$0,z1,V0,o1,c0,v0,u0;function b(){Z0=new yf(s),G0=new kf(s,Z0,A),Z0.init(G0),c0=new Gx(s,Z0,G0),x0=new Hx(s,Z0,G0),J1=new xf(s),S0=new th,t0=new Xx(s,Z0,x0,S0,G0,c0,J1),h1=new _f(L),$1=new Sf(L),m=new mj(s,G0),v0=new Mf(s,Z0,m,G0),j=new ff(s,m,J1,v0),C0=new uf(s,j,m,J1),z1=new bf(s,G0,t0),g0=new Pf(S0),I0=new rh(L,h1,$1,Z0,G0,v0,g0),F0=new zx(L,S0),Y0=new Ax,i0=new qx(Z0,G0),$0=new Lf(L,h1,$1,x0,C0,G,K),w0=new Zx(L,C0,G0),u0=new Dx(s,J1,G0,x0),V0=new Of(s,Z0,J1,G0),o1=new hf(s,Z0,J1,G0),J1.programs=I0.programs,L.capabilities=G0,L.extensions=Z0,L.properties=S0,L.renderLists=Y0,L.shadowMap=w0,L.state=x0,L.info=J1}b();let q0=new xE(L,s);this.xr=q0,this.getContext=function(){return s},this.getContextAttributes=function(){return s.getContextAttributes()},this.forceContextLoss=function(){let x=Z0.get("WEBGL_lose_context");if(x)x.loseContext()},this.forceContextRestore=function(){let x=Z0.get("WEBGL_lose_context");if(x)x.restoreContext()},this.getPixelRatio=function(){return y},this.setPixelRatio=function(x){if(x===void 0)return;y=x,this.setSize(O,M,!1)},this.getSize=function(x){return x.set(O,M)},this.setSize=function(x,o,Q0=!0){if(q0.isPresenting){console.warn("THREE.WebGLRenderer: Can\'t change size while VR device is presenting.");return}if(O=x,M=o,Q.width=Math.floor(x*y),Q.height=Math.floor(o*y),Q0===!0)Q.style.width=x+"px",Q.style.height=o+"px";this.setViewport(0,0,x,o)},this.getDrawingBufferSize=function(x){return x.set(O*y,M*y).floor()},this.setDrawingBufferSize=function(x,o,Q0){O=x,M=o,y=Q0,Q.width=Math.floor(x*Q0),Q.height=Math.floor(o*Q0),this.setViewport(0,0,x,o)},this.getCurrentViewport=function(x){return x.copy(P)},this.getViewport=function(x){return x.copy(d)},this.setViewport=function(x,o,Q0,B0){if(x.isVector4)d.set(x.x,x.y,x.z,x.w);else d.set(x,o,Q0,B0);x0.viewport(P.copy(d).multiplyScalar(y).round())},this.getScissor=function(x){return x.copy(g)},this.setScissor=function(x,o,Q0,B0){if(x.isVector4)g.set(x.x,x.y,x.z,x.w);else g.set(x,o,Q0,B0);x0.scissor($.copy(g).multiplyScalar(y).round())},this.getScissorTest=function(){return l},this.setScissorTest=function(x){x0.setScissorTest(l=x)},this.setOpaqueSort=function(x){u=x},this.setTransparentSort=function(x){T=x},this.getClearColor=function(x){return x.copy($0.getClearColor())},this.setClearColor=function(){$0.setClearColor.apply($0,arguments)},this.getClearAlpha=function(){return $0.getClearAlpha()},this.setClearAlpha=function(){$0.setClearAlpha.apply($0,arguments)},this.clear=function(x=!0,o=!0,Q0=!0){let B0=0;if(x){let A0=!1;if(N!==null){let O0=N.texture.format;A0=O0===1033||O0===1031||O0===1029}if(A0){let O0=N.texture.type,b0=O0===1009||O0===1014||O0===1012||O0===1020||O0===1017||O0===1018,l0=$0.getClearColor(),o0=$0.getClearAlpha(),Y1=l0.r,e0=l0.g,B1=l0.b;if(b0)W[0]=Y1,W[1]=e0,W[2]=B1,W[3]=o0,s.clearBufferuiv(s.COLOR,0,W);else F[0]=Y1,F[1]=e0,F[2]=B1,F[3]=o0,s.clearBufferiv(s.COLOR,0,F)}else B0|=s.COLOR_BUFFER_BIT}if(o)B0|=s.DEPTH_BUFFER_BIT;if(Q0)B0|=s.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295);s.clear(B0)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){if(Q.removeEventListener("webglcontextlost",P0,!1),Q.removeEventListener("webglcontextrestored",m0,!1),Q.removeEventListener("webglcontextcreationerror",c,!1),Y0.dispose(),i0.dispose(),S0.dispose(),h1.dispose(),$1.dispose(),C0.dispose(),v0.dispose(),u0.dispose(),I0.dispose(),q0.dispose(),q0.removeEventListener("sessionstart",y1),q0.removeEventListener("sessionend",z2),J0)J0.dispose(),J0=null;Q1.stop()};function P0(x){x.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),X=!0}function m0(){console.log("THREE.WebGLRenderer: Context Restored."),X=!1;let x=J1.autoReset,o=w0.enabled,Q0=w0.autoUpdate,B0=w0.needsUpdate,A0=w0.type;b(),J1.autoReset=x,w0.enabled=o,w0.autoUpdate=Q0,w0.needsUpdate=B0,w0.type=A0}function c(x){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",x.statusMessage)}function D0(x){let o=x.target;o.removeEventListener("dispose",D0),r(o)}function r(x){E0(x),S0.remove(x)}function E0(x){let o=S0.get(x).programs;if(o!==void 0){if(o.forEach(function(Q0){I0.releaseProgram(Q0)}),x.isShaderMaterial)I0.releaseShaderCache(x)}}this.renderBufferDirect=function(x,o,Q0,B0,A0,O0){if(o===null)o=L0;let b0=A0.isMesh&&A0.matrixWorld.determinant()<0,l0=DM(x,o,Q0,B0,A0);x0.setMaterial(B0,b0);let o0=Q0.index,Y1=1;if(B0.wireframe===!0){if(o0=j.getWireframeAttribute(Q0),o0===void 0)return;Y1=2}let e0=Q0.drawRange,B1=Q0.attributes.position,A2=e0.start*Y1,wA=(e0.start+e0.count)*Y1;if(O0!==null)A2=Math.max(A2,O0.start*Y1),wA=Math.min(wA,(O0.start+O0.count)*Y1);if(o0!==null)A2=Math.max(A2,0),wA=Math.min(wA,o0.count);else if(B1!==void 0&&B1!==null)A2=Math.max(A2,0),wA=Math.min(wA,B1.count);let D2=wA-A2;if(D2<0||D2===1/0)return;v0.setup(A0,B0,l0,Q0,o0);let i4,s1=V0;if(o0!==null)i4=m.get(o0),s1=o1,s1.setIndex(i4);if(A0.isMesh)if(B0.wireframe===!0)x0.setLineWidth(B0.wireframeLinewidth*T0()),s1.setMode(s.LINES);else s1.setMode(s.TRIANGLES);else if(A0.isLine){let q1=B0.linewidth;if(q1===void 0)q1=1;if(x0.setLineWidth(q1*T0()),A0.isLineSegments)s1.setMode(s.LINES);else if(A0.isLineLoop)s1.setMode(s.LINE_LOOP);else s1.setMode(s.LINE_STRIP)}else if(A0.isPoints)s1.setMode(s.POINTS);else if(A0.isSprite)s1.setMode(s.TRIANGLES);if(A0.isBatchedMesh)s1.renderMultiDraw(A0._multiDrawStarts,A0._multiDrawCounts,A0._multiDrawCount);else if(A0.isInstancedMesh)s1.renderInstances(A2,D2,A0.count);else if(Q0.isInstancedBufferGeometry){let q1=Q0._maxInstanceCount!==void 0?Q0._maxInstanceCount:1/0,Iq=Math.min(Q0.instanceCount,q1);s1.renderInstances(A2,D2,Iq)}else s1.render(A2,D2)};function R0(x,o,Q0){if(x.transparent===!0&&x.side===2&&x.forceSinglePass===!1)x.side=1,x.needsUpdate=!0,UB(x,o,Q0),x.side=0,x.needsUpdate=!0,UB(x,o,Q0),x.side=2;else UB(x,o,Q0)}this.compile=function(x,o,Q0=null){if(Q0===null)Q0=x;if(U=i0.get(Q0),U.init(),w.push(U),Q0.traverseVisible(function(A0){if(A0.isLight&&A0.layers.test(o.layers)){if(U.pushLight(A0),A0.castShadow)U.pushShadow(A0)}}),x!==Q0)x.traverseVisible(function(A0){if(A0.isLight&&A0.layers.test(o.layers)){if(U.pushLight(A0),A0.castShadow)U.pushShadow(A0)}});U.setupLights(L._useLegacyLights);let B0=new Set;return x.traverse(function(A0){let O0=A0.material;if(O0)if(Array.isArray(O0))for(let b0=0;b0<O0.length;b0++){let l0=O0[b0];R0(l0,Q0,A0),B0.add(l0)}else R0(O0,Q0,A0),B0.add(O0)}),w.pop(),U=null,B0},this.compileAsync=function(x,o,Q0=null){let B0=this.compile(x,o,Q0);return new Promise((A0)=>{function O0(){if(B0.forEach(function(b0){if(S0.get(b0).currentProgram.isReady())B0.delete(b0)}),B0.size===0){A0(x);return}setTimeout(O0,10)}if(Z0.get("KHR_parallel_shader_compile")!==null)O0();else setTimeout(O0,10)})};let I1=null;function D1(x){if(I1)I1(x)}function y1(){Q1.stop()}function z2(){Q1.start()}let Q1=new $E;if(Q1.setAnimationLoop(D1),typeof self!=="undefined")Q1.setContext(self);this.setAnimationLoop=function(x){I1=x,q0.setAnimationLoop(x),x===null?Q1.stop():Q1.start()},q0.addEventListener("sessionstart",y1),q0.addEventListener("sessionend",z2),this.render=function(x,o){if(o!==void 0&&o.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(X===!0)return;if(x.matrixWorldAutoUpdate===!0)x.updateMatrixWorld();if(o.parent===null&&o.matrixWorldAutoUpdate===!0)o.updateMatrixWorld();if(q0.enabled===!0&&q0.isPresenting===!0){if(q0.cameraAutoUpdate===!0)q0.updateCamera(o);o=q0.getCamera()}if(x.isScene===!0)x.onBeforeRender(L,x,o,N);if(U=i0.get(x,w.length),U.init(),w.push(U),e.multiplyMatrices(o.projectionMatrix,o.matrixWorldInverse),t.setFromProjectionMatrix(e),n=this.localClippingEnabled,i=g0.init(this.clippingPlanes,n),z=Y0.get(x,E.length),z.init(),E.push(z),h2(x,o,0,L.sortObjects),z.finish(),L.sortObjects===!0)z.sort(u,T);if(this.info.render.frame++,i===!0)g0.beginShadows();let Q0=U.state.shadowsArray;if(w0.render(Q0,x,o),i===!0)g0.endShadows();if(this.info.autoReset===!0)this.info.reset();if(q0.enabled===!1||q0.isPresenting===!1||q0.hasDepthSensing()===!1)$0.render(z,x);if(U.setupLights(L._useLegacyLights),o.isArrayCamera){let B0=o.cameras;for(let A0=0,O0=B0.length;A0<O0;A0++){let b0=B0[A0];i2(z,x,b0,b0.viewport)}}else i2(z,x,o);if(N!==null)t0.updateMultisampleRenderTarget(N),t0.updateRenderTargetMipmap(N);if(x.isScene===!0)x.onAfterRender(L,x,o);if(v0.resetDefaultState(),R=-1,k=null,w.pop(),w.length>0)U=w[w.length-1];else U=null;if(E.pop(),E.length>0)z=E[E.length-1];else z=null};function h2(x,o,Q0,B0){if(x.visible===!1)return;if(x.layers.test(o.layers)){if(x.isGroup)Q0=x.renderOrder;else if(x.isLOD){if(x.autoUpdate===!0)x.update(o)}else if(x.isLight){if(U.pushLight(x),x.castShadow)U.pushShadow(x)}else if(x.isSprite){if(!x.frustumCulled||t.intersectsSprite(x)){if(B0)X0.setFromMatrixPosition(x.matrixWorld).applyMatrix4(e);let b0=C0.update(x),l0=x.material;if(l0.visible)z.push(x,b0,l0,Q0,X0.z,null)}}else if(x.isMesh||x.isLine||x.isPoints){if(!x.frustumCulled||t.intersectsObject(x)){let b0=C0.update(x),l0=x.material;if(B0){if(x.boundingSphere!==void 0){if(x.boundingSphere===null)x.computeBoundingSphere();X0.copy(x.boundingSphere.center)}else{if(b0.boundingSphere===null)b0.computeBoundingSphere();X0.copy(b0.boundingSphere.center)}X0.applyMatrix4(x.matrixWorld).applyMatrix4(e)}if(Array.isArray(l0)){let o0=b0.groups;for(let Y1=0,e0=o0.length;Y1<e0;Y1++){let B1=o0[Y1],A2=l0[B1.materialIndex];if(A2&&A2.visible)z.push(x,b0,A2,Q0,X0.z,B1)}}else if(l0.visible)z.push(x,b0,l0,Q0,X0.z,null)}}}let O0=x.children;for(let b0=0,l0=O0.length;b0<l0;b0++)h2(O0[b0],o,Q0,B0)}function i2(x,o,Q0,B0){let{opaque:A0,transmissive:O0,transparent:b0}=x;if(U.setupLightsView(Q0),i===!0)g0.setGlobalState(L.clippingPlanes,Q0);if(O0.length>0)FB(A0,O0,o,Q0);if(B0)x0.viewport(P.copy(B0));if(A0.length>0)VB(A0,o,Q0);if(O0.length>0)VB(O0,o,Q0);if(b0.length>0)VB(b0,o,Q0);x0.buffers.depth.setTest(!0),x0.buffers.depth.setMask(!0),x0.buffers.color.setMask(!0),x0.setPolygonOffset(!1)}function FB(x,o,Q0,B0){if((Q0.isScene===!0?Q0.overrideMaterial:null)!==null)return;let O0=G0.isWebGL2;if(J0===null)J0=new u2(1,1,{generateMipmaps:!0,type:Z0.has("EXT_color_buffer_half_float")?1016:1009,minFilter:1008,samples:O0?4:0});if(L.getDrawingBufferSize(H0),O0)J0.setSize(H0.x,H0.y);else J0.setSize(jJ(H0.x),jJ(H0.y));let b0=L.getRenderTarget();if(L.setRenderTarget(J0),L.getClearColor(h),S=L.getClearAlpha(),S<1)L.setClearColor(16777215,0.5);L.clear();let l0=L.toneMapping;L.toneMapping=0,VB(x,Q0,B0),t0.updateMultisampleRenderTarget(J0),t0.updateRenderTargetMipmap(J0);let o0=!1;for(let Y1=0,e0=o.length;Y1<e0;Y1++){let B1=o[Y1],A2=B1.object,wA=B1.geometry,D2=B1.material,i4=B1.group;if(D2.side===2&&A2.layers.test(B0.layers)){let s1=D2.side;D2.side=1,D2.needsUpdate=!0,YW(A2,Q0,B0,wA,D2,i4),D2.side=s1,D2.needsUpdate=!0,o0=!0}}if(o0===!0)t0.updateMultisampleRenderTarget(J0),t0.updateRenderTargetMipmap(J0);L.setRenderTarget(b0),L.setClearColor(h,S),L.toneMapping=l0}function VB(x,o,Q0){let B0=o.isScene===!0?o.overrideMaterial:null;for(let A0=0,O0=x.length;A0<O0;A0++){let b0=x[A0],l0=b0.object,o0=b0.geometry,Y1=B0===null?b0.material:B0,e0=b0.group;if(l0.layers.test(Q0.layers))YW(l0,o,Q0,o0,Y1,e0)}}function YW(x,o,Q0,B0,A0,O0){if(x.onBeforeRender(L,o,Q0,B0,A0,O0),x.modelViewMatrix.multiplyMatrices(Q0.matrixWorldInverse,x.matrixWorld),x.normalMatrix.getNormalMatrix(x.modelViewMatrix),A0.onBeforeRender(L,o,Q0,B0,x,O0),A0.transparent===!0&&A0.side===2&&A0.forceSinglePass===!1)A0.side=1,A0.needsUpdate=!0,L.renderBufferDirect(Q0,o,B0,A0,x,O0),A0.side=0,A0.needsUpdate=!0,L.renderBufferDirect(Q0,o,B0,A0,x,O0),A0.side=2;else L.renderBufferDirect(Q0,o,B0,A0,x,O0);x.onAfterRender(L,o,Q0,B0,A0,O0)}function UB(x,o,Q0){if(o.isScene!==!0)o=L0;let B0=S0.get(x),A0=U.state.lights,O0=U.state.shadowsArray,b0=A0.state.version,l0=I0.getParameters(x,A0.state,O0,o,Q0),o0=I0.getProgramCacheKey(l0),Y1=B0.programs;if(B0.environment=x.isMeshStandardMaterial?o.environment:null,B0.fog=o.fog,B0.envMap=(x.isMeshStandardMaterial?$1:h1).get(x.envMap||B0.environment),B0.envMapRotation=B0.environment!==null&&x.envMap===null?o.environmentRotation:x.envMapRotation,Y1===void 0)x.addEventListener("dispose",D0),Y1=new Map,B0.programs=Y1;let e0=Y1.get(o0);if(e0!==void 0){if(B0.currentProgram===e0&&B0.lightsStateVersion===b0)return HW(x,l0),e0}else l0.uniforms=I0.getUniforms(x),x.onBuild(Q0,l0,L),x.onBeforeCompile(l0,L),e0=I0.acquireProgram(l0,o0),Y1.set(o0,e0),B0.uniforms=l0.uniforms;let B1=B0.uniforms;if(!x.isShaderMaterial&&!x.isRawShaderMaterial||x.clipping===!0)B1.clippingPlanes=g0.uniform;if(HW(x,l0),B0.needsLights=wM(x),B0.lightsStateVersion=b0,B0.needsLights)B1.ambientLightColor.value=A0.state.ambient,B1.lightProbe.value=A0.state.probe,B1.directionalLights.value=A0.state.directional,B1.directionalLightShadows.value=A0.state.directionalShadow,B1.spotLights.value=A0.state.spot,B1.spotLightShadows.value=A0.state.spotShadow,B1.rectAreaLights.value=A0.state.rectArea,B1.ltc_1.value=A0.state.rectAreaLTC1,B1.ltc_2.value=A0.state.rectAreaLTC2,B1.pointLights.value=A0.state.point,B1.pointLightShadows.value=A0.state.pointShadow,B1.hemisphereLights.value=A0.state.hemi,B1.directionalShadowMap.value=A0.state.directionalShadowMap,B1.directionalShadowMatrix.value=A0.state.directionalShadowMatrix,B1.spotShadowMap.value=A0.state.spotShadowMap,B1.spotLightMatrix.value=A0.state.spotLightMatrix,B1.spotLightMap.value=A0.state.spotLightMap,B1.pointShadowMap.value=A0.state.pointShadowMap,B1.pointShadowMatrix.value=A0.state.pointShadowMatrix;return B0.currentProgram=e0,B0.uniformsList=null,e0}function ZW(x){if(x.uniformsList===null){let o=x.currentProgram.getUniforms();x.uniformsList=AQ.seqWithValue(o.seq,x.uniforms)}return x.uniformsList}function HW(x,o){let Q0=S0.get(x);Q0.outputColorSpace=o.outputColorSpace,Q0.batching=o.batching,Q0.instancing=o.instancing,Q0.instancingColor=o.instancingColor,Q0.instancingMorph=o.instancingMorph,Q0.skinning=o.skinning,Q0.morphTargets=o.morphTargets,Q0.morphNormals=o.morphNormals,Q0.morphColors=o.morphColors,Q0.morphTargetsCount=o.morphTargetsCount,Q0.numClippingPlanes=o.numClippingPlanes,Q0.numIntersection=o.numClipIntersection,Q0.vertexAlphas=o.vertexAlphas,Q0.vertexTangents=o.vertexTangents,Q0.toneMapping=o.toneMapping}function DM(x,o,Q0,B0,A0){if(o.isScene!==!0)o=L0;t0.resetTextureUnits();let O0=o.fog,b0=B0.isMeshStandardMaterial?o.environment:null,l0=N===null?L.outputColorSpace:N.isXRRenderTarget===!0?N.texture.colorSpace:"srgb-linear",o0=(B0.isMeshStandardMaterial?$1:h1).get(B0.envMap||b0),Y1=B0.vertexColors===!0&&!!Q0.attributes.color&&Q0.attributes.color.itemSize===4,e0=!!Q0.attributes.tangent&&(!!B0.normalMap||B0.anisotropy>0),B1=!!Q0.morphAttributes.position,A2=!!Q0.morphAttributes.normal,wA=!!Q0.morphAttributes.color,D2=0;if(B0.toneMapped){if(N===null||N.isXRRenderTarget===!0)D2=L.toneMapping}let i4=Q0.morphAttributes.position||Q0.morphAttributes.normal||Q0.morphAttributes.color,s1=i4!==void 0?i4.length:0,q1=S0.get(B0),Iq=U.state.lights;if(i===!0){if(n===!0||x!==k){let OA=x===k&&B0.id===R;g0.setState(B0,x,OA)}}let m1=!1;if(B0.version===q1.__version){if(q1.needsLights&&q1.lightsStateVersion!==Iq.state.version)m1=!0;else if(q1.outputColorSpace!==l0)m1=!0;else if(A0.isBatchedMesh&&q1.batching===!1)m1=!0;else if(!A0.isBatchedMesh&&q1.batching===!0)m1=!0;else if(A0.isInstancedMesh&&q1.instancing===!1)m1=!0;else if(!A0.isInstancedMesh&&q1.instancing===!0)m1=!0;else if(A0.isSkinnedMesh&&q1.skinning===!1)m1=!0;else if(!A0.isSkinnedMesh&&q1.skinning===!0)m1=!0;else if(A0.isInstancedMesh&&q1.instancingColor===!0&&A0.instanceColor===null)m1=!0;else if(A0.isInstancedMesh&&q1.instancingColor===!1&&A0.instanceColor!==null)m1=!0;else if(A0.isInstancedMesh&&q1.instancingMorph===!0&&A0.morphTexture===null)m1=!0;else if(A0.isInstancedMesh&&q1.instancingMorph===!1&&A0.morphTexture!==null)m1=!0;else if(q1.envMap!==o0)m1=!0;else if(B0.fog===!0&&q1.fog!==O0)m1=!0;else if(q1.numClippingPlanes!==void 0&&(q1.numClippingPlanes!==g0.numPlanes||q1.numIntersection!==g0.numIntersection))m1=!0;else if(q1.vertexAlphas!==Y1)m1=!0;else if(q1.vertexTangents!==e0)m1=!0;else if(q1.morphTargets!==B1)m1=!0;else if(q1.morphNormals!==A2)m1=!0;else if(q1.morphColors!==wA)m1=!0;else if(q1.toneMapping!==D2)m1=!0;else if(G0.isWebGL2===!0&&q1.morphTargetsCount!==s1)m1=!0}else m1=!0,q1.__version=B0.version;let E6=q1.currentProgram;if(m1===!0)E6=UB(B0,o,A0);let XW=!1,L8=!1,qq=!1,x2=E6.getUniforms(),w6=q1.uniforms;if(x0.useProgram(E6.program))XW=!0,L8=!0,qq=!0;if(B0.id!==R)R=B0.id,L8=!0;if(XW||k!==x){x2.setValue(s,"projectionMatrix",x.projectionMatrix),x2.setValue(s,"viewMatrix",x.matrixWorldInverse);let OA=x2.map.cameraPosition;if(OA!==void 0)OA.setValue(s,X0.setFromMatrixPosition(x.matrixWorld));if(G0.logarithmicDepthBuffer)x2.setValue(s,"logDepthBufFC",2/(Math.log(x.far+1)/Math.LN2));if(B0.isMeshPhongMaterial||B0.isMeshToonMaterial||B0.isMeshLambertMaterial||B0.isMeshBasicMaterial||B0.isMeshStandardMaterial||B0.isShaderMaterial)x2.setValue(s,"isOrthographic",x.isOrthographicCamera===!0);if(k!==x)k=x,L8=!0,qq=!0}if(A0.isSkinnedMesh){x2.setOptional(s,A0,"bindMatrix"),x2.setOptional(s,A0,"bindMatrixInverse");let OA=A0.skeleton;if(OA)if(G0.floatVertexTextures){if(OA.boneTexture===null)OA.computeBoneTexture();x2.setValue(s,"boneTexture",OA.boneTexture,t0)}else console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required.")}if(A0.isBatchedMesh)x2.setOptional(s,A0,"batchingTexture"),x2.setValue(s,"batchingTexture",A0._matricesTexture,t0);let Kq=Q0.morphAttributes;if(Kq.position!==void 0||Kq.normal!==void 0||Kq.color!==void 0&&G0.isWebGL2===!0)z1.update(A0,Q0,E6);if(L8||q1.receiveShadow!==A0.receiveShadow)q1.receiveShadow=A0.receiveShadow,x2.setValue(s,"receiveShadow",A0.receiveShadow);if(B0.isMeshGouraudMaterial&&B0.envMap!==null)w6.envMap.value=o0,w6.flipEnvMap.value=o0.isCubeTexture&&o0.isRenderTargetTexture===!1?-1:1;if(L8){if(x2.setValue(s,"toneMappingExposure",L.toneMappingExposure),q1.needsLights)EM(w6,qq);if(O0&&B0.fog===!0)F0.refreshFogUniforms(w6,O0);F0.refreshMaterialUniforms(w6,B0,y,M,J0),AQ.upload(s,ZW(q1),w6,t0)}if(B0.isShaderMaterial&&B0.uniformsNeedUpdate===!0)AQ.upload(s,ZW(q1),w6,t0),B0.uniformsNeedUpdate=!1;if(B0.isSpriteMaterial)x2.setValue(s,"center",A0.center);if(x2.setValue(s,"modelViewMatrix",A0.modelViewMatrix),x2.setValue(s,"normalMatrix",A0.normalMatrix),x2.setValue(s,"modelMatrix",A0.matrixWorld),B0.isShaderMaterial||B0.isRawShaderMaterial){let OA=B0.uniformsGroups;for(let Yq=0,NM=OA.length;Yq<NM;Yq++)if(G0.isWebGL2){let GW=OA[Yq];u0.update(GW,E6),u0.bind(GW,E6)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return E6}function EM(x,o){x.ambientLightColor.needsUpdate=o,x.lightProbe.needsUpdate=o,x.directionalLights.needsUpdate=o,x.directionalLightShadows.needsUpdate=o,x.pointLights.needsUpdate=o,x.pointLightShadows.needsUpdate=o,x.spotLights.needsUpdate=o,x.spotLightShadows.needsUpdate=o,x.rectAreaLights.needsUpdate=o,x.hemisphereLights.needsUpdate=o}function wM(x){return x.isMeshLambertMaterial||x.isMeshToonMaterial||x.isMeshPhongMaterial||x.isMeshStandardMaterial||x.isShadowMaterial||x.isShaderMaterial&&x.lights===!0}if(this.getActiveCubeFace=function(){return V},this.getActiveMipmapLevel=function(){return D},this.getRenderTarget=function(){return N},this.setRenderTargetTextures=function(x,o,Q0){S0.get(x.texture).__webglTexture=o,S0.get(x.depthTexture).__webglTexture=Q0;let B0=S0.get(x);if(B0.__hasExternalTextures=!0,B0.__autoAllocateDepthBuffer=Q0===void 0,!B0.__autoAllocateDepthBuffer){if(Z0.has("WEBGL_multisampled_render_to_texture")===!0)console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),B0.__useRenderToTexture=!1}},this.setRenderTargetFramebuffer=function(x,o){let Q0=S0.get(x);Q0.__webglFramebuffer=o,Q0.__useDefaultFramebuffer=o===void 0},this.setRenderTarget=function(x,o=0,Q0=0){N=x,V=o,D=Q0;let B0=!0,A0=null,O0=!1,b0=!1;if(x){let o0=S0.get(x);if(o0.__useDefaultFramebuffer!==void 0)x0.bindFramebuffer(s.FRAMEBUFFER,null),B0=!1;else if(o0.__webglFramebuffer===void 0)t0.setupRenderTarget(x);else if(o0.__hasExternalTextures)t0.rebindTextures(x,S0.get(x.texture).__webglTexture,S0.get(x.depthTexture).__webglTexture);let Y1=x.texture;if(Y1.isData3DTexture||Y1.isDataArrayTexture||Y1.isCompressedArrayTexture)b0=!0;let e0=S0.get(x).__webglFramebuffer;if(x.isWebGLCubeRenderTarget){if(Array.isArray(e0[o]))A0=e0[o][Q0];else A0=e0[o];O0=!0}else if(G0.isWebGL2&&x.samples>0&&t0.useMultisampledRTT(x)===!1)A0=S0.get(x).__webglMultisampledFramebuffer;else if(Array.isArray(e0))A0=e0[Q0];else A0=e0;P.copy(x.viewport),$.copy(x.scissor),_=x.scissorTest}else P.copy(d).multiplyScalar(y).floor(),$.copy(g).multiplyScalar(y).floor(),_=l;if(x0.bindFramebuffer(s.FRAMEBUFFER,A0)&&G0.drawBuffers&&B0)x0.drawBuffers(x,A0);if(x0.viewport(P),x0.scissor($),x0.setScissorTest(_),O0){let o0=S0.get(x.texture);s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+o,o0.__webglTexture,Q0)}else if(b0){let o0=S0.get(x.texture),Y1=o||0;s.framebufferTextureLayer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,o0.__webglTexture,Q0||0,Y1)}R=-1},this.readRenderTargetPixels=function(x,o,Q0,B0,A0,O0,b0){if(!(x&&x.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let l0=S0.get(x).__webglFramebuffer;if(x.isWebGLCubeRenderTarget&&b0!==void 0)l0=l0[b0];if(l0){x0.bindFramebuffer(s.FRAMEBUFFER,l0);try{let o0=x.texture,Y1=o0.format,e0=o0.type;if(Y1!==1023&&c0.convert(Y1)!==s.getParameter(s.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let B1=e0===1016&&(Z0.has("EXT_color_buffer_half_float")||G0.isWebGL2&&Z0.has("EXT_color_buffer_float"));if(e0!==1009&&c0.convert(e0)!==s.getParameter(s.IMPLEMENTATION_COLOR_READ_TYPE)&&!(e0===1015&&(G0.isWebGL2||Z0.has("OES_texture_float")||Z0.has("WEBGL_color_buffer_float")))&&!B1){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}if(o>=0&&o<=x.width-B0&&(Q0>=0&&Q0<=x.height-A0))s.readPixels(o,Q0,B0,A0,c0.convert(Y1),c0.convert(e0),O0)}finally{let o0=N!==null?S0.get(N).__webglFramebuffer:null;x0.bindFramebuffer(s.FRAMEBUFFER,o0)}}},this.copyFramebufferToTexture=function(x,o,Q0=0){let B0=Math.pow(2,-Q0),A0=Math.floor(o.image.width*B0),O0=Math.floor(o.image.height*B0);t0.setTexture2D(o,0),s.copyTexSubImage2D(s.TEXTURE_2D,Q0,0,0,x.x,x.y,A0,O0),x0.unbindTexture()},this.copyTextureToTexture=function(x,o,Q0,B0=0){let A0=o.image.width,O0=o.image.height,b0=c0.convert(Q0.format),l0=c0.convert(Q0.type);if(t0.setTexture2D(Q0,0),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,Q0.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q0.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,Q0.unpackAlignment),o.isDataTexture)s.texSubImage2D(s.TEXTURE_2D,B0,x.x,x.y,A0,O0,b0,l0,o.image.data);else if(o.isCompressedTexture)s.compressedTexSubImage2D(s.TEXTURE_2D,B0,x.x,x.y,o.mipmaps[0].width,o.mipmaps[0].height,b0,o.mipmaps[0].data);else s.texSubImage2D(s.TEXTURE_2D,B0,x.x,x.y,b0,l0,o.image);if(B0===0&&Q0.generateMipmaps)s.generateMipmap(s.TEXTURE_2D);x0.unbindTexture()},this.copyTextureToTexture3D=function(x,o,Q0,B0,A0=0){if(L.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let O0=Math.round(x.max.x-x.min.x),b0=Math.round(x.max.y-x.min.y),l0=x.max.z-x.min.z+1,o0=c0.convert(B0.format),Y1=c0.convert(B0.type),e0;if(B0.isData3DTexture)t0.setTexture3D(B0,0),e0=s.TEXTURE_3D;else if(B0.isDataArrayTexture||B0.isCompressedArrayTexture)t0.setTexture2DArray(B0,0),e0=s.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,B0.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B0.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,B0.unpackAlignment);let B1=s.getParameter(s.UNPACK_ROW_LENGTH),A2=s.getParameter(s.UNPACK_IMAGE_HEIGHT),wA=s.getParameter(s.UNPACK_SKIP_PIXELS),D2=s.getParameter(s.UNPACK_SKIP_ROWS),i4=s.getParameter(s.UNPACK_SKIP_IMAGES),s1=Q0.isCompressedTexture?Q0.mipmaps[A0]:Q0.image;if(s.pixelStorei(s.UNPACK_ROW_LENGTH,s1.width),s.pixelStorei(s.UNPACK_IMAGE_HEIGHT,s1.height),s.pixelStorei(s.UNPACK_SKIP_PIXELS,x.min.x),s.pixelStorei(s.UNPACK_SKIP_ROWS,x.min.y),s.pixelStorei(s.UNPACK_SKIP_IMAGES,x.min.z),Q0.isDataTexture||Q0.isData3DTexture)s.texSubImage3D(e0,A0,o.x,o.y,o.z,O0,b0,l0,o0,Y1,s1.data);else if(B0.isCompressedArrayTexture)s.compressedTexSubImage3D(e0,A0,o.x,o.y,o.z,O0,b0,l0,o0,s1.data);else s.texSubImage3D(e0,A0,o.x,o.y,o.z,O0,b0,l0,o0,Y1,s1);if(s.pixelStorei(s.UNPACK_ROW_LENGTH,B1),s.pixelStorei(s.UNPACK_IMAGE_HEIGHT,A2),s.pixelStorei(s.UNPACK_SKIP_PIXELS,wA),s.pixelStorei(s.UNPACK_SKIP_ROWS,D2),s.pixelStorei(s.UNPACK_SKIP_IMAGES,i4),A0===0&&B0.generateMipmaps)s.generateMipmap(e0);x0.unbindTexture()},this.initTexture=function(x){if(x.isCubeTexture)t0.setTextureCube(x,0);else if(x.isData3DTexture)t0.setTexture3D(x,0);else if(x.isDataArrayTexture||x.isCompressedArrayTexture)t0.setTexture2DArray(x,0);else t0.setTexture2D(x,0);x0.unbindTexture()},this.resetState=function(){V=0,D=0,N=null,x0.reset(),v0.reset()},typeof __THREE_DEVTOOLS__!=="undefined")__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return 2000}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(A){this._outputColorSpace=A;let Q=this.getContext();Q.drawingBufferColorSpace=A==="display-p3"?"display-p3":"srgb",Q.unpackColorSpace=O1.workingColorSpace==="display-p3-linear"?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(A){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=A}}class gE extends g4{}gE.prototype.isWebGL1Renderer=!0;class W2 extends L1{constructor(){super();if(this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new VA,this.environmentRotation=new VA,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__!=="undefined")__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(A,Q){if(super.copy(A,Q),A.background!==null)this.background=A.background.clone();if(A.environment!==null)this.environment=A.environment.clone();if(A.fog!==null)this.fog=A.fog.clone();if(this.backgroundBlurriness=A.backgroundBlurriness,this.backgroundIntensity=A.backgroundIntensity,this.backgroundRotation.copy(A.backgroundRotation),this.environmentRotation.copy(A.environmentRotation),A.overrideMaterial!==null)this.overrideMaterial=A.overrideMaterial.clone();return this.matrixAutoUpdate=A.matrixAutoUpdate,this}toJSON(A){let Q=super.toJSON(A);if(this.fog!==null)Q.object.fog=this.fog.toJSON();if(this.backgroundBlurriness>0)Q.object.backgroundBlurriness=this.backgroundBlurriness;if(this.backgroundIntensity!==1)Q.object.backgroundIntensity=this.backgroundIntensity;return Q.object.backgroundRotation=this.backgroundRotation.toArray(),Q.object.environmentRotation=this.environmentRotation.toArray(),Q}}class dJ{constructor(A,Q){this.isInterleavedBuffer=!0,this.array=A,this.stride=Q,this.count=A!==void 0?A.length/Q:0,this.usage=35044,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Y4()}onUploadCallback(){}set needsUpdate(A){if(A===!0)this.version++}get updateRange(){return DE("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(A){return this.usage=A,this}addUpdateRange(A,Q){this.updateRanges.push({start:A,count:Q})}clearUpdateRanges(){this.updateRanges.length=0}copy(A){return this.array=new A.array.constructor(A.array),this.count=A.count,this.stride=A.stride,this.usage=A.usage,this}copyAt(A,Q,B){A*=this.stride,B*=Q.stride;for(let C=0,J=this.stride;C<J;C++)this.array[A+C]=Q.array[B+C];return this}set(A,Q=0){return this.array.set(A,Q),this}clone(A){if(A.arrayBuffers===void 0)A.arrayBuffers={};if(this.array.buffer._uuid===void 0)this.array.buffer._uuid=Y4();if(A.arrayBuffers[this.array.buffer._uuid]===void 0)A.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer;let Q=new this.array.constructor(A.arrayBuffers[this.array.buffer._uuid]),B=new this.constructor(Q,this.stride);return B.setUsage(this.usage),B}onUpload(A){return this.onUploadCallback=A,this}toJSON(A){if(A.arrayBuffers===void 0)A.arrayBuffers={};if(this.array.buffer._uuid===void 0)this.array.buffer._uuid=Y4();if(A.arrayBuffers[this.array.buffer._uuid]===void 0)A.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer));return{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}var t2=new p;class YQ{constructor(A,Q,B,C=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=A,this.itemSize=Q,this.offset=B,this.normalized=C}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(A){this.data.needsUpdate=A}applyMatrix4(A){for(let Q=0,B=this.data.count;Q<B;Q++)t2.fromBufferAttribute(this,Q),t2.applyMatrix4(A),this.setXYZ(Q,t2.x,t2.y,t2.z);return this}applyNormalMatrix(A){for(let Q=0,B=this.count;Q<B;Q++)t2.fromBufferAttribute(this,Q),t2.applyNormalMatrix(A),this.setXYZ(Q,t2.x,t2.y,t2.z);return this}transformDirection(A){for(let Q=0,B=this.count;Q<B;Q++)t2.fromBufferAttribute(this,Q),t2.transformDirection(A),this.setXYZ(Q,t2.x,t2.y,t2.z);return this}getComponent(A,Q){let B=this.array[A*this.data.stride+this.offset+Q];if(this.normalized)B=K4(B,this.array);return B}setComponent(A,Q,B){if(this.normalized)B=j1(B,this.array);return this.data.array[A*this.data.stride+this.offset+Q]=B,this}setX(A,Q){if(this.normalized)Q=j1(Q,this.array);return this.data.array[A*this.data.stride+this.offset]=Q,this}setY(A,Q){if(this.normalized)Q=j1(Q,this.array);return this.data.array[A*this.data.stride+this.offset+1]=Q,this}setZ(A,Q){if(this.normalized)Q=j1(Q,this.array);return this.data.array[A*this.data.stride+this.offset+2]=Q,this}setW(A,Q){if(this.normalized)Q=j1(Q,this.array);return this.data.array[A*this.data.stride+this.offset+3]=Q,this}getX(A){let Q=this.data.array[A*this.data.stride+this.offset];if(this.normalized)Q=K4(Q,this.array);return Q}getY(A){let Q=this.data.array[A*this.data.stride+this.offset+1];if(this.normalized)Q=K4(Q,this.array);return Q}getZ(A){let Q=this.data.array[A*this.data.stride+this.offset+2];if(this.normalized)Q=K4(Q,this.array);return Q}getW(A){let Q=this.data.array[A*this.data.stride+this.offset+3];if(this.normalized)Q=K4(Q,this.array);return Q}setXY(A,Q,B){if(A=A*this.data.stride+this.offset,this.normalized)Q=j1(Q,this.array),B=j1(B,this.array);return this.data.array[A+0]=Q,this.data.array[A+1]=B,this}setXYZ(A,Q,B,C){if(A=A*this.data.stride+this.offset,this.normalized)Q=j1(Q,this.array),B=j1(B,this.array),C=j1(C,this.array);return this.data.array[A+0]=Q,this.data.array[A+1]=B,this.data.array[A+2]=C,this}setXYZW(A,Q,B,C,J){if(A=A*this.data.stride+this.offset,this.normalized)Q=j1(Q,this.array),B=j1(B,this.array),C=j1(C,this.array),J=j1(J,this.array);return this.data.array[A+0]=Q,this.data.array[A+1]=B,this.data.array[A+2]=C,this.data.array[A+3]=J,this}clone(A){if(A===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let Q=[];for(let B=0;B<this.count;B++){let C=B*this.data.stride+this.offset;for(let J=0;J<this.itemSize;J++)Q.push(this.data.array[C+J])}return new T1(new this.array.constructor(Q),this.itemSize,this.normalized)}else{if(A.interleavedBuffers===void 0)A.interleavedBuffers={};if(A.interleavedBuffers[this.data.uuid]===void 0)A.interleavedBuffers[this.data.uuid]=this.data.clone(A);return new YQ(A.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}}toJSON(A){if(A===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let Q=[];for(let B=0;B<this.count;B++){let C=B*this.data.stride+this.offset;for(let J=0;J<this.itemSize;J++)Q.push(this.data.array[C+J])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:Q,normalized:this.normalized}}else{if(A.interleavedBuffers===void 0)A.interleavedBuffers={};if(A.interleavedBuffers[this.data.uuid]===void 0)A.interleavedBuffers[this.data.uuid]=this.data.toJSON(A);return{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}}var TD=new p,jD=new x1,SD=new x1,Ex=new p,yD=new h0,LJ=new p,fZ=new p2,fD=new h0,hZ=new I6;class AH extends A1{constructor(A,Q){super(A,Q);this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new h0,this.bindMatrixInverse=new h0,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let A=this.geometry;if(this.boundingBox===null)this.boundingBox=new G2;this.boundingBox.makeEmpty();let Q=A.getAttribute("position");for(let B=0;B<Q.count;B++)this.getVertexPosition(B,LJ),this.boundingBox.expandByPoint(LJ)}computeBoundingSphere(){let A=this.geometry;if(this.boundingSphere===null)this.boundingSphere=new p2;this.boundingSphere.makeEmpty();let Q=A.getAttribute("position");for(let B=0;B<Q.count;B++)this.getVertexPosition(B,LJ),this.boundingSphere.expandByPoint(LJ)}copy(A,Q){if(super.copy(A,Q),this.bindMode=A.bindMode,this.bindMatrix.copy(A.bindMatrix),this.bindMatrixInverse.copy(A.bindMatrixInverse),this.skeleton=A.skeleton,A.boundingBox!==null)this.boundingBox=A.boundingBox.clone();if(A.boundingSphere!==null)this.boundingSphere=A.boundingSphere.clone();return this}raycast(A,Q){let B=this.material,C=this.matrixWorld;if(B===void 0)return;if(this.boundingSphere===null)this.computeBoundingSphere();if(fZ.copy(this.boundingSphere),fZ.applyMatrix4(C),A.ray.intersectsSphere(fZ)===!1)return;if(fD.copy(C).invert(),hZ.copy(A.ray).applyMatrix4(fD),this.boundingBox!==null){if(hZ.intersectsBox(this.boundingBox)===!1)return}this._computeIntersections(A,Q,hZ)}getVertexPosition(A,Q){return super.getVertexPosition(A,Q),this.applyBoneTransform(A,Q),Q}bind(A,Q){if(this.skeleton=A,Q===void 0)this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),Q=this.matrixWorld;this.bindMatrix.copy(Q),this.bindMatrixInverse.copy(Q).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let A=new x1,Q=this.geometry.attributes.skinWeight;for(let B=0,C=Q.count;B<C;B++){A.fromBufferAttribute(Q,B);let J=1/A.manhattanLength();if(J!==1/0)A.multiplyScalar(J);else A.set(1,0,0,0);Q.setXYZW(B,A.x,A.y,A.z,A.w)}}updateMatrixWorld(A){if(super.updateMatrixWorld(A),this.bindMode==="attached")this.bindMatrixInverse.copy(this.matrixWorld).invert();else if(this.bindMode==="detached")this.bindMatrixInverse.copy(this.bindMatrix).invert();else console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(A,Q){let B=this.skeleton,C=this.geometry;jD.fromBufferAttribute(C.attributes.skinIndex,A),SD.fromBufferAttribute(C.attributes.skinWeight,A),TD.copy(Q).applyMatrix4(this.bindMatrix),Q.set(0,0,0);for(let J=0;J<4;J++){let I=SD.getComponent(J);if(I!==0){let q=jD.getComponent(J);yD.multiplyMatrices(B.bones[q].matrixWorld,B.boneInverses[q]),Q.addScaledVector(Ex.copy(TD).applyMatrix4(yD),I)}}return Q.applyMatrix4(this.bindMatrixInverse)}}class cJ extends L1{constructor(){super();this.isBone=!0,this.type="Bone"}}class q6 extends E1{constructor(A=null,Q=1,B=1,C,J,I,q,K,Y=1003,Z=1003,H,G){super(null,I,q,K,Y,Z,C,J,H,G);this.isDataTexture=!0,this.image={data:A,width:Q,height:B},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}var hD=new h0,wx=new h0;class lJ{constructor(A=[],Q=[]){this.uuid=Y4(),this.bones=A.slice(0),this.boneInverses=Q,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let A=this.bones,Q=this.boneInverses;if(this.boneMatrices=new Float32Array(A.length*16),Q.length===0)this.calculateInverses();else if(A.length!==Q.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let B=0,C=this.bones.length;B<C;B++)this.boneInverses.push(new h0)}}calculateInverses(){this.boneInverses.length=0;for(let A=0,Q=this.bones.length;A<Q;A++){let B=new h0;if(this.bones[A])B.copy(this.bones[A].matrixWorld).invert();this.boneInverses.push(B)}}pose(){for(let A=0,Q=this.bones.length;A<Q;A++){let B=this.bones[A];if(B)B.matrixWorld.copy(this.boneInverses[A]).invert()}for(let A=0,Q=this.bones.length;A<Q;A++){let B=this.bones[A];if(B){if(B.parent&&B.parent.isBone)B.matrix.copy(B.parent.matrixWorld).invert(),B.matrix.multiply(B.matrixWorld);else B.matrix.copy(B.matrixWorld);B.matrix.decompose(B.position,B.quaternion,B.scale)}}}update(){let A=this.bones,Q=this.boneInverses,B=this.boneMatrices,C=this.boneTexture;for(let J=0,I=A.length;J<I;J++){let q=A[J]?A[J].matrixWorld:wx;hD.multiplyMatrices(q,Q[J]),hD.toArray(B,J*16)}if(C!==null)C.needsUpdate=!0}clone(){return new lJ(this.bones,this.boneInverses)}computeBoneTexture(){let A=Math.sqrt(this.bones.length*4);A=Math.ceil(A/4)*4,A=Math.max(A,4);let Q=new Float32Array(A*A*4);Q.set(this.boneMatrices);let B=new q6(Q,A,A,1023,1015);return B.needsUpdate=!0,this.boneMatrices=Q,this.boneTexture=B,this}getBoneByName(A){for(let Q=0,B=this.bones.length;Q<B;Q++){let C=this.bones[Q];if(C.name===A)return C}return}dispose(){if(this.boneTexture!==null)this.boneTexture.dispose(),this.boneTexture=null}fromJSON(A,Q){this.uuid=A.uuid;for(let B=0,C=A.bones.length;B<C;B++){let J=A.bones[B],I=Q[J];if(I===void 0)console.warn("THREE.Skeleton: No bone found with UUID:",J),I=new cJ;this.bones.push(I),this.boneInverses.push(new h0().fromArray(A.boneInverses[B]))}return this.init(),this}toJSON(){let A={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};A.uuid=this.uuid;let Q=this.bones,B=this.boneInverses;for(let C=0,J=Q.length;C<J;C++){let I=Q[C];A.bones.push(I.uuid);let q=B[C];A.boneInverses.push(q.toArray())}return A}}class y7 extends T1{constructor(A,Q,B,C=1){super(A,Q,B);this.isInstancedBufferAttribute=!0,this.meshPerAttribute=C}copy(A){return super.copy(A),this.meshPerAttribute=A.meshPerAttribute,this}toJSON(){let A=super.toJSON();return A.meshPerAttribute=this.meshPerAttribute,A.isInstancedBufferAttribute=!0,A}}var k7=new h0,xD=new h0,MJ=[],gD=new G2,Nx=new h0,o9=new A1,a9=new p2;class QH extends A1{constructor(A,Q,B){super(A,Q);this.isInstancedMesh=!0,this.instanceMatrix=new y7(new Float32Array(B*16),16),this.instanceColor=null,this.morphTexture=null,this.count=B,this.boundingBox=null,this.boundingSphere=null;for(let C=0;C<B;C++)this.setMatrixAt(C,Nx)}computeBoundingBox(){let A=this.geometry,Q=this.count;if(this.boundingBox===null)this.boundingBox=new G2;if(A.boundingBox===null)A.computeBoundingBox();this.boundingBox.makeEmpty();for(let B=0;B<Q;B++)this.getMatrixAt(B,k7),gD.copy(A.boundingBox).applyMatrix4(k7),this.boundingBox.union(gD)}computeBoundingSphere(){let A=this.geometry,Q=this.count;if(this.boundingSphere===null)this.boundingSphere=new p2;if(A.boundingSphere===null)A.computeBoundingSphere();this.boundingSphere.makeEmpty();for(let B=0;B<Q;B++)this.getMatrixAt(B,k7),a9.copy(A.boundingSphere).applyMatrix4(k7),this.boundingSphere.union(a9)}copy(A,Q){if(super.copy(A,Q),this.instanceMatrix.copy(A.instanceMatrix),A.instanceColor!==null)this.instanceColor=A.instanceColor.clone();if(this.count=A.count,A.boundingBox!==null)this.boundingBox=A.boundingBox.clone();if(A.boundingSphere!==null)this.boundingSphere=A.boundingSphere.clone();return this}getColorAt(A,Q){Q.fromArray(this.instanceColor.array,A*3)}getMatrixAt(A,Q){Q.fromArray(this.instanceMatrix.array,A*16)}getMorphAt(A,Q){let B=Q.morphTargetInfluences,C=this.morphTexture.source.data.data,J=B.length+1,I=A*J+1;for(let q=0;q<B.length;q++)B[q]=C[I+q]}raycast(A,Q){let B=this.matrixWorld,C=this.count;if(o9.geometry=this.geometry,o9.material=this.material,o9.material===void 0)return;if(this.boundingSphere===null)this.computeBoundingSphere();if(a9.copy(this.boundingSphere),a9.applyMatrix4(B),A.ray.intersectsSphere(a9)===!1)return;for(let J=0;J<C;J++){this.getMatrixAt(J,k7),xD.multiplyMatrices(B,k7),o9.matrixWorld=xD,o9.raycast(A,MJ);for(let I=0,q=MJ.length;I<q;I++){let K=MJ[I];K.instanceId=J,K.object=this,Q.push(K)}MJ.length=0}}setColorAt(A,Q){if(this.instanceColor===null)this.instanceColor=new y7(new Float32Array(this.instanceMatrix.count*3),3);Q.toArray(this.instanceColor.array,A*3)}setMatrixAt(A,Q){Q.toArray(this.instanceMatrix.array,A*16)}setMorphAt(A,Q){let B=Q.morphTargetInfluences,C=B.length+1;if(this.morphTexture===null)this.morphTexture=new q6(new Float32Array(C*this.count),C,this.count,1028,1015);let J=this.morphTexture.source.data.data,I=0;for(let Y=0;Y<B.length;Y++)I+=B[Y];let q=this.geometry.morphTargetsRelative?1:1-I,K=C*A;J[K]=q,J.set(B,K+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class sJ extends UA{constructor(A){super();this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new p0(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(A)}copy(A){return super.copy(A),this.color.copy(A.color),this.map=A.map,this.linewidth=A.linewidth,this.linecap=A.linecap,this.linejoin=A.linejoin,this.fog=A.fog,this}}var vD=new p,bD=new p,uD=new h0,xZ=new I6,OJ=new p2;class ZQ extends L1{constructor(A=new k2,Q=new sJ){super();this.isLine=!0,this.type="Line",this.geometry=A,this.material=Q,this.updateMorphTargets()}copy(A,Q){return super.copy(A,Q),this.material=Array.isArray(A.material)?A.material.slice():A.material,this.geometry=A.geometry,this}computeLineDistances(){let A=this.geometry;if(A.index===null){let Q=A.attributes.position,B=[0];for(let C=1,J=Q.count;C<J;C++)vD.fromBufferAttribute(Q,C-1),bD.fromBufferAttribute(Q,C),B[C]=B[C-1],B[C]+=vD.distanceTo(bD);A.setAttribute("lineDistance",new b2(B,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(A,Q){let B=this.geometry,C=this.matrixWorld,J=A.params.Line.threshold,I=B.drawRange;if(B.boundingSphere===null)B.computeBoundingSphere();if(OJ.copy(B.boundingSphere),OJ.applyMatrix4(C),OJ.radius+=J,A.ray.intersectsSphere(OJ)===!1)return;uD.copy(C).invert(),xZ.copy(A.ray).applyMatrix4(uD);let q=J/((this.scale.x+this.scale.y+this.scale.z)/3),K=q*q,Y=new p,Z=new p,H=new p,G=new p,W=this.isLineSegments?2:1,F=B.index,U=B.attributes.position;if(F!==null){let E=Math.max(0,I.start),w=Math.min(F.count,I.start+I.count);for(let L=E,X=w-1;L<X;L+=W){let V=F.getX(L),D=F.getX(L+1);if(Y.fromBufferAttribute(U,V),Z.fromBufferAttribute(U,D),xZ.distanceSqToSegment(Y,Z,G,H)>K)continue;G.applyMatrix4(this.matrixWorld);let R=A.ray.origin.distanceTo(G);if(R<A.near||R>A.far)continue;Q.push({distance:R,point:H.clone().applyMatrix4(this.matrixWorld),index:L,face:null,faceIndex:null,object:this})}}else{let E=Math.max(0,I.start),w=Math.min(U.count,I.start+I.count);for(let L=E,X=w-1;L<X;L+=W){if(Y.fromBufferAttribute(U,L),Z.fromBufferAttribute(U,L+1),xZ.distanceSqToSegment(Y,Z,G,H)>K)continue;G.applyMatrix4(this.matrixWorld);let D=A.ray.origin.distanceTo(G);if(D<A.near||D>A.far)continue;Q.push({distance:D,point:H.clone().applyMatrix4(this.matrixWorld),index:L,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let Q=this.geometry.morphAttributes,B=Object.keys(Q);if(B.length>0){let C=Q[B[0]];if(C!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let J=0,I=C.length;J<I;J++){let q=C[J].name||String(J);this.morphTargetInfluences.push(0),this.morphTargetDictionary[q]=J}}}}}var pD=new p,mD=new p;class BH extends ZQ{constructor(A,Q){super(A,Q);this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let A=this.geometry;if(A.index===null){let Q=A.attributes.position,B=[];for(let C=0,J=Q.count;C<J;C+=2)pD.fromBufferAttribute(Q,C),mD.fromBufferAttribute(Q,C+1),B[C]=C===0?0:B[C-1],B[C+1]=B[C]+pD.distanceTo(mD);A.setAttribute("lineDistance",new b2(B,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class CH extends ZQ{constructor(A,Q){super(A,Q);this.isLineLoop=!0,this.type="LineLoop"}}class iJ extends UA{constructor(A){super();this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new p0(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(A)}copy(A){return super.copy(A),this.color.copy(A.color),this.map=A.map,this.alphaMap=A.alphaMap,this.size=A.size,this.sizeAttenuation=A.sizeAttenuation,this.fog=A.fog,this}}var dD=new h0,mZ=new I6,kJ=new p2,PJ=new p;class JH extends L1{constructor(A=new k2,Q=new iJ){super();this.isPoints=!0,this.type="Points",this.geometry=A,this.material=Q,this.updateMorphTargets()}copy(A,Q){return super.copy(A,Q),this.material=Array.isArray(A.material)?A.material.slice():A.material,this.geometry=A.geometry,this}raycast(A,Q){let B=this.geometry,C=this.matrixWorld,J=A.params.Points.threshold,I=B.drawRange;if(B.boundingSphere===null)B.computeBoundingSphere();if(kJ.copy(B.boundingSphere),kJ.applyMatrix4(C),kJ.radius+=J,A.ray.intersectsSphere(kJ)===!1)return;dD.copy(C).invert(),mZ.copy(A.ray).applyMatrix4(dD);let q=J/((this.scale.x+this.scale.y+this.scale.z)/3),K=q*q,Y=B.index,H=B.attributes.position;if(Y!==null){let G=Math.max(0,I.start),W=Math.min(Y.count,I.start+I.count);for(let F=G,z=W;F<z;F++){let U=Y.getX(F);PJ.fromBufferAttribute(H,U),cD(PJ,U,K,C,A,Q,this)}}else{let G=Math.max(0,I.start),W=Math.min(H.count,I.start+I.count);for(let F=G,z=W;F<z;F++)PJ.fromBufferAttribute(H,F),cD(PJ,F,K,C,A,Q,this)}}updateMorphTargets(){let Q=this.geometry.morphAttributes,B=Object.keys(Q);if(B.length>0){let C=Q[B[0]];if(C!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let J=0,I=C.length;J<I;J++){let q=C[J].name||String(J);this.morphTargetInfluences.push(0),this.morphTargetDictionary[q]=J}}}}}function cD(A,Q,B,C,J,I,q){let K=mZ.distanceSqToPoint(A);if(K<B){let Y=new p;mZ.closestPointToPoint(A,Y),Y.applyMatrix4(C);let Z=J.ray.origin.distanceTo(Y);if(Z<J.near||Z>J.far)return;I.push({distance:Z,distanceToRay:Math.sqrt(K),point:Y,index:Q,face:null,object:q})}}class IH extends E1{constructor(A,Q,B,C,J,I,q,K,Y){super(A,Q,B,C,J,I,q,K,Y);this.isVideoTexture=!0,this.minFilter=I!==void 0?I:1006,this.magFilter=J!==void 0?J:1006,this.generateMipmaps=!1;let Z=this;function H(){Z.needsUpdate=!0,A.requestVideoFrameCallback(H)}if("requestVideoFrameCallback"in A)A.requestVideoFrameCallback(H)}clone(){return new this.constructor(this.image).copy(this)}update(){let A=this.image;if("requestVideoFrameCallback"in A===!1&&A.readyState>=A.HAVE_CURRENT_DATA)this.needsUpdate=!0}}class v4 extends E1{constructor(A,Q,B,C,J,I,q,K,Y,Z,H,G){super(null,I,q,K,Y,Z,C,J,H,G);this.isCompressedTexture=!0,this.image={width:Q,height:B},this.mipmaps=A,this.flipY=!1,this.generateMipmaps=!1}}class qH extends v4{constructor(A,Q,B,C,J,I){super(A,Q,B,J,I);this.isCompressedArrayTexture=!0,this.image.depth=C,this.wrapR=1001}}class KH extends v4{constructor(A,Q,B){super(void 0,A[0].width,A[0].height,Q,B,301);this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=A}}class d7 extends E1{constructor(A,Q,B,C,J,I,q,K,Y){super(A,Q,B,C,J,I,q,K,Y);this.isCanvasTexture=!0,this.needsUpdate=!0}}class nJ extends k2{constructor(A=1,Q=32,B=16,C=0,J=Math.PI*2,I=0,q=Math.PI){super();this.type="SphereGeometry",this.parameters={radius:A,widthSegments:Q,heightSegments:B,phiStart:C,phiLength:J,thetaStart:I,thetaLength:q},Q=Math.max(3,Math.floor(Q)),B=Math.max(2,Math.floor(B));let K=Math.min(I+q,Math.PI),Y=0,Z=[],H=new p,G=new p,W=[],F=[],z=[],U=[];for(let E=0;E<=B;E++){let w=[],L=E/B,X=0;if(E===0&&I===0)X=0.5/Q;else if(E===B&&K===Math.PI)X=-0.5/Q;for(let V=0;V<=Q;V++){let D=V/Q;H.x=-A*Math.cos(C+D*J)*Math.sin(I+L*q),H.y=A*Math.cos(I+L*q),H.z=A*Math.sin(C+D*J)*Math.sin(I+L*q),F.push(H.x,H.y,H.z),G.copy(H).normalize(),z.push(G.x,G.y,G.z),U.push(D+X,1-L),w.push(Y++)}Z.push(w)}for(let E=0;E<B;E++)for(let w=0;w<Q;w++){let L=Z[E][w+1],X=Z[E][w],V=Z[E+1][w],D=Z[E+1][w+1];if(E!==0||I>0)W.push(L,X,D);if(E!==B-1||K<Math.PI)W.push(X,V,D)}this.setIndex(W),this.setAttribute("position",new b2(F,3)),this.setAttribute("normal",new b2(z,3)),this.setAttribute("uv",new b2(U,2))}copy(A){return super.copy(A),this.parameters=Object.assign({},A.parameters),this}static fromJSON(A){return new nJ(A.radius,A.widthSegments,A.heightSegments,A.phiStart,A.phiLength,A.thetaStart,A.thetaLength)}}class K6 extends UA{constructor(A){super();this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new p0(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new p0(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new M0(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new VA,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(A)}copy(A){return super.copy(A),this.defines={STANDARD:""},this.color.copy(A.color),this.roughness=A.roughness,this.metalness=A.metalness,this.map=A.map,this.lightMap=A.lightMap,this.lightMapIntensity=A.lightMapIntensity,this.aoMap=A.aoMap,this.aoMapIntensity=A.aoMapIntensity,this.emissive.copy(A.emissive),this.emissiveMap=A.emissiveMap,this.emissiveIntensity=A.emissiveIntensity,this.bumpMap=A.bumpMap,this.bumpScale=A.bumpScale,this.normalMap=A.normalMap,this.normalMapType=A.normalMapType,this.normalScale.copy(A.normalScale),this.displacementMap=A.displacementMap,this.displacementScale=A.displacementScale,this.displacementBias=A.displacementBias,this.roughnessMap=A.roughnessMap,this.metalnessMap=A.metalnessMap,this.alphaMap=A.alphaMap,this.envMap=A.envMap,this.envMapRotation.copy(A.envMapRotation),this.envMapIntensity=A.envMapIntensity,this.wireframe=A.wireframe,this.wireframeLinewidth=A.wireframeLinewidth,this.wireframeLinecap=A.wireframeLinecap,this.wireframeLinejoin=A.wireframeLinejoin,this.flatShading=A.flatShading,this.fog=A.fog,this}}class H4 extends K6{constructor(A){super();this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new M0(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return L2(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(Q){this.ior=(1+0.4*Q)/(1-0.4*Q)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new p0(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new p0(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new p0(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(A)}get anisotropy(){return this._anisotropy}set anisotropy(A){if(this._anisotropy>0!==A>0)this.version++;this._anisotropy=A}get clearcoat(){return this._clearcoat}set clearcoat(A){if(this._clearcoat>0!==A>0)this.version++;this._clearcoat=A}get iridescence(){return this._iridescence}set iridescence(A){if(this._iridescence>0!==A>0)this.version++;this._iridescence=A}get sheen(){return this._sheen}set sheen(A){if(this._sheen>0!==A>0)this.version++;this._sheen=A}get transmission(){return this._transmission}set transmission(A){if(this._transmission>0!==A>0)this.version++;this._transmission=A}copy(A){return super.copy(A),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=A.anisotropy,this.anisotropyRotation=A.anisotropyRotation,this.anisotropyMap=A.anisotropyMap,this.clearcoat=A.clearcoat,this.clearcoatMap=A.clearcoatMap,this.clearcoatRoughness=A.clearcoatRoughness,this.clearcoatRoughnessMap=A.clearcoatRoughnessMap,this.clearcoatNormalMap=A.clearcoatNormalMap,this.clearcoatNormalScale.copy(A.clearcoatNormalScale),this.ior=A.ior,this.iridescence=A.iridescence,this.iridescenceMap=A.iridescenceMap,this.iridescenceIOR=A.iridescenceIOR,this.iridescenceThicknessRange=[...A.iridescenceThicknessRange],this.iridescenceThicknessMap=A.iridescenceThicknessMap,this.sheen=A.sheen,this.sheenColor.copy(A.sheenColor),this.sheenColorMap=A.sheenColorMap,this.sheenRoughness=A.sheenRoughness,this.sheenRoughnessMap=A.sheenRoughnessMap,this.transmission=A.transmission,this.transmissionMap=A.transmissionMap,this.thickness=A.thickness,this.thicknessMap=A.thicknessMap,this.attenuationDistance=A.attenuationDistance,this.attenuationColor.copy(A.attenuationColor),this.specularIntensity=A.specularIntensity,this.specularIntensityMap=A.specularIntensityMap,this.specularColor.copy(A.specularColor),this.specularColorMap=A.specularColorMap,this}}function _J(A,Q,B){if(!A||!B&&A.constructor===Q)return A;if(typeof Q.BYTES_PER_ELEMENT==="number")return new Q(A);return Array.prototype.slice.call(A)}function $x(A){return ArrayBuffer.isView(A)&&!(A instanceof DataView)}function Rx(A){function Q(J,I){return A[J]-A[I]}let B=A.length,C=new Array(B);for(let J=0;J!==B;++J)C[J]=J;return C.sort(Q),C}function lD(A,Q,B){let C=A.length,J=new A.constructor(C);for(let I=0,q=0;q!==C;++I){let K=B[I]*Q;for(let Y=0;Y!==Q;++Y)J[q++]=A[K+Y]}return J}function vE(A,Q,B,C){let J=1,I=A[0];while(I!==void 0&&I[C]===void 0)I=A[J++];if(I===void 0)return;let q=I[C];if(q===void 0)return;if(Array.isArray(q))do{if(q=I[C],q!==void 0)Q.push(I.time),B.push.apply(B,q);I=A[J++]}while(I!==void 0);else if(q.toArray!==void 0)do{if(q=I[C],q!==void 0)Q.push(I.time),q.toArray(B,B.length);I=A[J++]}while(I!==void 0);else do{if(q=I[C],q!==void 0)Q.push(I.time),B.push(q);I=A[J++]}while(I!==void 0)}class q5{constructor(A,Q,B,C){this.parameterPositions=A,this._cachedIndex=0,this.resultBuffer=C!==void 0?C:new Q.constructor(B),this.sampleValues=Q,this.valueSize=B,this.settings=null,this.DefaultSettings_={}}evaluate(A){let Q=this.parameterPositions,B=this._cachedIndex,C=Q[B],J=Q[B-1];A:{Q:{let I;B:{C:if(!(A<C)){for(let q=B+2;;){if(C===void 0){if(A<J)break C;return B=Q.length,this._cachedIndex=B,this.copySampleValue_(B-1)}if(B===q)break;if(J=C,C=Q[++B],A<C)break Q}I=Q.length;break B}if(!(A>=J)){let q=Q[1];if(A<q)B=2,J=q;for(let K=B-2;;){if(J===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(B===K)break;if(C=J,J=Q[--B-1],A>=J)break Q}I=B,B=0;break B}break A}while(B<I){let q=B+I>>>1;if(A<Q[q])I=q;else B=q+1}if(C=Q[B],J=Q[B-1],J===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(C===void 0)return B=Q.length,this._cachedIndex=B,this.copySampleValue_(B-1)}this._cachedIndex=B,this.intervalChanged_(B,J,C)}return this.interpolate_(B,J,A,C)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(A){let Q=this.resultBuffer,B=this.sampleValues,C=this.valueSize,J=A*C;for(let I=0;I!==C;++I)Q[I]=B[J+I];return Q}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class bE extends q5{constructor(A,Q,B,C){super(A,Q,B,C);this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(A,Q,B){let C=this.parameterPositions,J=A-2,I=A+1,q=C[J],K=C[I];if(q===void 0)switch(this.getSettings_().endingStart){case 2401:J=A,q=2*Q-B;break;case 2402:J=C.length-2,q=Q+C[J]-C[J+1];break;default:J=A,q=B}if(K===void 0)switch(this.getSettings_().endingEnd){case 2401:I=A,K=2*B-Q;break;case 2402:I=1,K=B+C[1]-C[0];break;default:I=A-1,K=Q}let Y=(B-Q)*0.5,Z=this.valueSize;this._weightPrev=Y/(Q-q),this._weightNext=Y/(K-B),this._offsetPrev=J*Z,this._offsetNext=I*Z}interpolate_(A,Q,B,C){let J=this.resultBuffer,I=this.sampleValues,q=this.valueSize,K=A*q,Y=K-q,Z=this._offsetPrev,H=this._offsetNext,G=this._weightPrev,W=this._weightNext,F=(B-Q)/(C-Q),z=F*F,U=z*F,E=-G*U+2*G*z-G*F,w=(1+G)*U+(-1.5-2*G)*z+(-0.5+G)*F+1,L=(-1-W)*U+(1.5+W)*z+0.5*F,X=W*U-W*z;for(let V=0;V!==q;++V)J[V]=E*I[Z+V]+w*I[Y+V]+L*I[K+V]+X*I[H+V];return J}}class YH extends q5{constructor(A,Q,B,C){super(A,Q,B,C)}interpolate_(A,Q,B,C){let J=this.resultBuffer,I=this.sampleValues,q=this.valueSize,K=A*q,Y=K-q,Z=(B-Q)/(C-Q),H=1-Z;for(let G=0;G!==q;++G)J[G]=I[Y+G]*H+I[K+G]*Z;return J}}class uE extends q5{constructor(A,Q,B,C){super(A,Q,B,C)}interpolate_(A){return this.copySampleValue_(A-1)}}class X4{constructor(A,Q,B,C){if(A===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(Q===void 0||Q.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+A);this.name=A,this.times=_J(Q,this.TimeBufferType),this.values=_J(B,this.ValueBufferType),this.setInterpolation(C||this.DefaultInterpolation)}static toJSON(A){let Q=A.constructor,B;if(Q.toJSON!==this.toJSON)B=Q.toJSON(A);else{B={name:A.name,times:_J(A.times,Array),values:_J(A.values,Array)};let C=A.getInterpolation();if(C!==A.DefaultInterpolation)B.interpolation=C}return B.type=A.ValueTypeName,B}InterpolantFactoryMethodDiscrete(A){return new uE(this.times,this.values,this.getValueSize(),A)}InterpolantFactoryMethodLinear(A){return new YH(this.times,this.values,this.getValueSize(),A)}InterpolantFactoryMethodSmooth(A){return new bE(this.times,this.values,this.getValueSize(),A)}setInterpolation(A){let Q;switch(A){case 2300:Q=this.InterpolantFactoryMethodDiscrete;break;case 2301:Q=this.InterpolantFactoryMethodLinear;break;case 2302:Q=this.InterpolantFactoryMethodSmooth;break}if(Q===void 0){let B="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(A!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(B);return console.warn("THREE.KeyframeTrack:",B),this}return this.createInterpolant=Q,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(A){if(A!==0){let Q=this.times;for(let B=0,C=Q.length;B!==C;++B)Q[B]+=A}return this}scale(A){if(A!==1){let Q=this.times;for(let B=0,C=Q.length;B!==C;++B)Q[B]*=A}return this}trim(A,Q){let B=this.times,C=B.length,J=0,I=C-1;while(J!==C&&B[J]<A)++J;while(I!==-1&&B[I]>Q)--I;if(++I,J!==0||I!==C){if(J>=I)I=Math.max(I,1),J=I-1;let q=this.getValueSize();this.times=B.slice(J,I),this.values=this.values.slice(J*q,I*q)}return this}validate(){let A=!0,Q=this.getValueSize();if(Q-Math.floor(Q)!==0)console.error("THREE.KeyframeTrack: Invalid value size in track.",this),A=!1;let B=this.times,C=this.values,J=B.length;if(J===0)console.error("THREE.KeyframeTrack: Track is empty.",this),A=!1;let I=null;for(let q=0;q!==J;q++){let K=B[q];if(typeof K==="number"&&isNaN(K)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,q,K),A=!1;break}if(I!==null&&I>K){console.error("THREE.KeyframeTrack: Out of order keys.",this,q,K,I),A=!1;break}I=K}if(C!==void 0){if($x(C))for(let q=0,K=C.length;q!==K;++q){let Y=C[q];if(isNaN(Y)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,q,Y),A=!1;break}}}return A}optimize(){let A=this.times.slice(),Q=this.values.slice(),B=this.getValueSize(),C=this.getInterpolation()===2302,J=A.length-1,I=1;for(let q=1;q<J;++q){let K=!1,Y=A[q],Z=A[q+1];if(Y!==Z&&(q!==1||Y!==A[0]))if(!C){let H=q*B,G=H-B,W=H+B;for(let F=0;F!==B;++F){let z=Q[H+F];if(z!==Q[G+F]||z!==Q[W+F]){K=!0;break}}}else K=!0;if(K){if(q!==I){A[I]=A[q];let H=q*B,G=I*B;for(let W=0;W!==B;++W)Q[G+W]=Q[H+W]}++I}}if(J>0){A[I]=A[J];for(let q=J*B,K=I*B,Y=0;Y!==B;++Y)Q[K+Y]=Q[q+Y];++I}if(I!==A.length)this.times=A.slice(0,I),this.values=Q.slice(0,I*B);else this.times=A,this.values=Q;return this}clone(){let A=this.times.slice(),Q=this.values.slice(),C=new this.constructor(this.name,A,Q);return C.createInterpolant=this.createInterpolant,C}}X4.prototype.TimeBufferType=Float32Array;X4.prototype.ValueBufferType=Float32Array;X4.prototype.DefaultInterpolation=2301;class K5 extends X4{}K5.prototype.ValueTypeName="bool";K5.prototype.ValueBufferType=Array;K5.prototype.DefaultInterpolation=2300;K5.prototype.InterpolantFactoryMethodLinear=void 0;K5.prototype.InterpolantFactoryMethodSmooth=void 0;class ZH extends X4{}ZH.prototype.ValueTypeName="color";class C6 extends X4{}C6.prototype.ValueTypeName="number";class pE extends q5{constructor(A,Q,B,C){super(A,Q,B,C)}interpolate_(A,Q,B,C){let J=this.resultBuffer,I=this.sampleValues,q=this.valueSize,K=(B-Q)/(C-Q),Y=A*q;for(let Z=Y+q;Y!==Z;Y+=4)n1.slerpFlat(J,0,I,Y-q,I,Y,K);return J}}class b4 extends X4{InterpolantFactoryMethodLinear(A){return new pE(this.times,this.values,this.getValueSize(),A)}}b4.prototype.ValueTypeName="quaternion";b4.prototype.DefaultInterpolation=2301;b4.prototype.InterpolantFactoryMethodSmooth=void 0;class Y5 extends X4{}Y5.prototype.ValueTypeName="string";Y5.prototype.ValueBufferType=Array;Y5.prototype.DefaultInterpolation=2300;Y5.prototype.InterpolantFactoryMethodLinear=void 0;Y5.prototype.InterpolantFactoryMethodSmooth=void 0;class D3 extends X4{}D3.prototype.ValueTypeName="vector";class f7{constructor(A,Q=-1,B,C=2500){if(this.name=A,this.tracks=B,this.duration=Q,this.blendMode=C,this.uuid=Y4(),this.duration<0)this.resetDuration()}static parse(A){let Q=[],B=A.tracks,C=1/(A.fps||1);for(let I=0,q=B.length;I!==q;++I)Q.push(Mx(B[I]).scale(C));let J=new this(A.name,A.duration,Q,A.blendMode);return J.uuid=A.uuid,J}static toJSON(A){let Q=[],B=A.tracks,C={name:A.name,duration:A.duration,tracks:Q,uuid:A.uuid,blendMode:A.blendMode};for(let J=0,I=B.length;J!==I;++J)Q.push(X4.toJSON(B[J]));return C}static CreateFromMorphTargetSequence(A,Q,B,C){let J=Q.length,I=[];for(let q=0;q<J;q++){let K=[],Y=[];K.push((q+J-1)%J,q,(q+1)%J),Y.push(0,1,0);let Z=Rx(K);if(K=lD(K,1,Z),Y=lD(Y,1,Z),!C&&K[0]===0)K.push(J),Y.push(Y[0]);I.push(new C6(".morphTargetInfluences["+Q[q].name+"]",K,Y).scale(1/B))}return new this(A,-1,I)}static findByName(A,Q){let B=A;if(!Array.isArray(A)){let C=A;B=C.geometry&&C.geometry.animations||C.animations}for(let C=0;C<B.length;C++)if(B[C].name===Q)return B[C];return null}static CreateClipsFromMorphTargetSequences(A,Q,B){let C={},J=/^([\w-]*?)([\d]+)$/;for(let q=0,K=A.length;q<K;q++){let Y=A[q],Z=Y.name.match(J);if(Z&&Z.length>1){let H=Z[1],G=C[H];if(!G)C[H]=G=[];G.push(Y)}}let I=[];for(let q in C)I.push(this.CreateFromMorphTargetSequence(q,C[q],Q,B));return I}static parseAnimation(A,Q){if(!A)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let B=function(H,G,W,F,z){if(W.length!==0){let U=[],E=[];if(vE(W,U,E,F),U.length!==0)z.push(new H(G,U,E))}},C=[],J=A.name||"default",I=A.fps||30,q=A.blendMode,K=A.length||-1,Y=A.hierarchy||[];for(let H=0;H<Y.length;H++){let G=Y[H].keys;if(!G||G.length===0)continue;if(G[0].morphTargets){let W={},F;for(F=0;F<G.length;F++)if(G[F].morphTargets)for(let z=0;z<G[F].morphTargets.length;z++)W[G[F].morphTargets[z]]=-1;for(let z in W){let U=[],E=[];for(let w=0;w!==G[F].morphTargets.length;++w){let L=G[F];U.push(L.time),E.push(L.morphTarget===z?1:0)}C.push(new C6(".morphTargetInfluence["+z+"]",U,E))}K=W.length*I}else{let W=".bones["+Q[H].name+"]";B(D3,W+".position",G,"pos",C),B(b4,W+".quaternion",G,"rot",C),B(D3,W+".scale",G,"scl",C)}}if(C.length===0)return null;return new this(J,K,C,q)}resetDuration(){let A=this.tracks,Q=0;for(let B=0,C=A.length;B!==C;++B){let J=this.tracks[B];Q=Math.max(Q,J.times[J.times.length-1])}return this.duration=Q,this}trim(){for(let A=0;A<this.tracks.length;A++)this.tracks[A].trim(0,this.duration);return this}validate(){let A=!0;for(let Q=0;Q<this.tracks.length;Q++)A=A&&this.tracks[Q].validate();return A}optimize(){for(let A=0;A<this.tracks.length;A++)this.tracks[A].optimize();return this}clone(){let A=[];for(let Q=0;Q<this.tracks.length;Q++)A.push(this.tracks[Q].clone());return new this.constructor(this.name,this.duration,A,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Lx(A){switch(A.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return C6;case"vector":case"vector2":case"vector3":case"vector4":return D3;case"color":return ZH;case"quaternion":return b4;case"bool":case"boolean":return K5;case"string":return Y5}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+A)}function Mx(A){if(A.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let Q=Lx(A.type);if(A.times===void 0){let B=[],C=[];vE(A.keys,B,C,"value"),A.times=B,A.values=C}if(Q.parse!==void 0)return Q.parse(A);else return new Q(A.name,A.times,A.values,A.interpolation)}var B6={enabled:!1,files:{},add:function(A,Q){if(this.enabled===!1)return;this.files[A]=Q},get:function(A){if(this.enabled===!1)return;return this.files[A]},remove:function(A){delete this.files[A]},clear:function(){this.files={}}};class oJ{constructor(A,Q,B){let C=this,J=!1,I=0,q=0,K=void 0,Y=[];this.onStart=void 0,this.onLoad=A,this.onProgress=Q,this.onError=B,this.itemStart=function(Z){if(q++,J===!1){if(C.onStart!==void 0)C.onStart(Z,I,q)}J=!0},this.itemEnd=function(Z){if(I++,C.onProgress!==void 0)C.onProgress(Z,I,q);if(I===q){if(J=!1,C.onLoad!==void 0)C.onLoad()}},this.itemError=function(Z){if(C.onError!==void 0)C.onError(Z)},this.resolveURL=function(Z){if(K)return K(Z);return Z},this.setURLModifier=function(Z){return K=Z,this},this.addHandler=function(Z,H){return Y.push(Z,H),this},this.removeHandler=function(Z){let H=Y.indexOf(Z);if(H!==-1)Y.splice(H,2);return this},this.getHandler=function(Z){for(let H=0,G=Y.length;H<G;H+=2){let W=Y[H],F=Y[H+1];if(W.global)W.lastIndex=0;if(W.test(Z))return F}return null}}}var Ox=new oJ;class m2{constructor(A){this.manager=A!==void 0?A:Ox,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(A,Q){let B=this;return new Promise(function(C,J){B.load(A,C,Q,J)})}parse(){}setCrossOrigin(A){return this.crossOrigin=A,this}setWithCredentials(A){return this.withCredentials=A,this}setPath(A){return this.path=A,this}setResourcePath(A){return this.resourcePath=A,this}setRequestHeader(A){return this.requestHeader=A,this}}m2.DEFAULT_MATERIAL_NAME="__DEFAULT";var U3={};class mE extends Error{constructor(A,Q){super(A);this.response=Q}}class AA extends m2{constructor(A){super(A)}load(A,Q,B,C){if(A===void 0)A="";if(this.path!==void 0)A=this.path+A;A=this.manager.resolveURL(A);let J=B6.get(A);if(J!==void 0)return this.manager.itemStart(A),setTimeout(()=>{if(Q)Q(J);this.manager.itemEnd(A)},0),J;if(U3[A]!==void 0){U3[A].push({onLoad:Q,onProgress:B,onError:C});return}U3[A]=[],U3[A].push({onLoad:Q,onProgress:B,onError:C});let I=new Request(A,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),q=this.mimeType,K=this.responseType;fetch(I).then((Y)=>{if(Y.status===200||Y.status===0){if(Y.status===0)console.warn("THREE.FileLoader: HTTP Status 0 received.");if(typeof ReadableStream==="undefined"||Y.body===void 0||Y.body.getReader===void 0)return Y;let Z=U3[A],H=Y.body.getReader(),G=Y.headers.get("Content-Length")||Y.headers.get("X-File-Size"),W=G?parseInt(G):0,F=W!==0,z=0,U=new ReadableStream({start(E){w();function w(){H.read().then(({done:L,value:X})=>{if(L)E.close();else{z+=X.byteLength;let V=new ProgressEvent("progress",{lengthComputable:F,loaded:z,total:W});for(let D=0,N=Z.length;D<N;D++){let R=Z[D];if(R.onProgress)R.onProgress(V)}E.enqueue(X),w()}})}}});return new Response(U)}else throw new mE(`fetch for "${Y.url}" responded with ${Y.status}: ${Y.statusText}`,Y)}).then((Y)=>{switch(K){case"arraybuffer":return Y.arrayBuffer();case"blob":return Y.blob();case"document":return Y.text().then((Z)=>{return new DOMParser().parseFromString(Z,q)});case"json":return Y.json();default:if(q===void 0)return Y.text();else{let H=/charset="?([^;"\s]*)"?/i.exec(q),G=H&&H[1]?H[1].toLowerCase():void 0,W=new TextDecoder(G);return Y.arrayBuffer().then((F)=>W.decode(F))}}}).then((Y)=>{B6.add(A,Y);let Z=U3[A];delete U3[A];for(let H=0,G=Z.length;H<G;H++){let W=Z[H];if(W.onLoad)W.onLoad(Y)}}).catch((Y)=>{let Z=U3[A];if(Z===void 0)throw this.manager.itemError(A),Y;delete U3[A];for(let H=0,G=Z.length;H<G;H++){let W=Z[H];if(W.onError)W.onError(Y)}this.manager.itemError(A)}).finally(()=>{this.manager.itemEnd(A)}),this.manager.itemStart(A)}setResponseType(A){return this.responseType=A,this}setMimeType(A){return this.mimeType=A,this}}class dE extends m2{constructor(A){super(A)}load(A,Q,B,C){if(this.path!==void 0)A=this.path+A;A=this.manager.resolveURL(A);let J=this,I=B6.get(A);if(I!==void 0)return J.manager.itemStart(A),setTimeout(function(){if(Q)Q(I);J.manager.itemEnd(A)},0),I;let q=QQ("img");function K(){if(Z(),B6.add(A,this),Q)Q(this);J.manager.itemEnd(A)}function Y(H){if(Z(),C)C(H);J.manager.itemError(A),J.manager.itemEnd(A)}function Z(){q.removeEventListener("load",K,!1),q.removeEventListener("error",Y,!1)}if(q.addEventListener("load",K,!1),q.addEventListener("error",Y,!1),A.slice(0,5)!=="data:"){if(this.crossOrigin!==void 0)q.crossOrigin=this.crossOrigin}return J.manager.itemStart(A),q.src=A,q}}class HH extends m2{constructor(A){super(A)}load(A,Q,B,C){let J=this,I=new q6,q=new AA(this.manager);return q.setResponseType("arraybuffer"),q.setRequestHeader(this.requestHeader),q.setPath(this.path),q.setWithCredentials(J.withCredentials),q.load(A,function(K){let Y;try{Y=J.parse(K)}catch(Z){if(C!==void 0)C(Z);else{console.error(Z);return}}if(Y.image!==void 0)I.image=Y.image;else if(Y.data!==void 0)I.image.width=Y.width,I.image.height=Y.height,I.image.data=Y.data;if(I.wrapS=Y.wrapS!==void 0?Y.wrapS:1001,I.wrapT=Y.wrapT!==void 0?Y.wrapT:1001,I.magFilter=Y.magFilter!==void 0?Y.magFilter:1006,I.minFilter=Y.minFilter!==void 0?Y.minFilter:1006,I.anisotropy=Y.anisotropy!==void 0?Y.anisotropy:1,Y.colorSpace!==void 0)I.colorSpace=Y.colorSpace;if(Y.flipY!==void 0)I.flipY=Y.flipY;if(Y.format!==void 0)I.format=Y.format;if(Y.type!==void 0)I.type=Y.type;if(Y.mipmaps!==void 0)I.mipmaps=Y.mipmaps,I.minFilter=1008;if(Y.mipmapCount===1)I.minFilter=1006;if(Y.generateMipmaps!==void 0)I.generateMipmaps=Y.generateMipmaps;if(I.needsUpdate=!0,Q)Q(I,Y)},B,C),I}}class Z5 extends m2{constructor(A){super(A)}load(A,Q,B,C){let J=new E1,I=new dE(this.manager);return I.setCrossOrigin(this.crossOrigin),I.setPath(this.path),I.load(A,function(q){if(J.image=q,J.needsUpdate=!0,Q!==void 0)Q(J)},B,C),J}}class HQ extends L1{constructor(A,Q=1){super();this.isLight=!0,this.type="Light",this.color=new p0(A),this.intensity=Q}dispose(){}copy(A,Q){return super.copy(A,Q),this.color.copy(A.color),this.intensity=A.intensity,this}toJSON(A){let Q=super.toJSON(A);if(Q.object.color=this.color.getHex(),Q.object.intensity=this.intensity,this.groundColor!==void 0)Q.object.groundColor=this.groundColor.getHex();if(this.distance!==void 0)Q.object.distance=this.distance;if(this.angle!==void 0)Q.object.angle=this.angle;if(this.decay!==void 0)Q.object.decay=this.decay;if(this.penumbra!==void 0)Q.object.penumbra=this.penumbra;if(this.shadow!==void 0)Q.object.shadow=this.shadow.toJSON();return Q}}var gZ=new h0,sD=new p,iD=new p;class aJ{constructor(A){this.camera=A,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new M0(512,512),this.map=null,this.mapPass=null,this.matrix=new h0,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new uJ,this._frameExtents=new M0(1,1),this._viewportCount=1,this._viewports=[new x1(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(A){let Q=this.camera,B=this.matrix;sD.setFromMatrixPosition(A.matrixWorld),Q.position.copy(sD),iD.setFromMatrixPosition(A.target.matrixWorld),Q.lookAt(iD),Q.updateMatrixWorld(),gZ.multiplyMatrices(Q.projectionMatrix,Q.matrixWorldInverse),this._frustum.setFromProjectionMatrix(gZ),B.set(0.5,0,0,0.5,0,0.5,0,0.5,0,0,0.5,0.5,0,0,0,1),B.multiply(gZ)}getViewport(A){return this._viewports[A]}getFrameExtents(){return this._frameExtents}dispose(){if(this.map)this.map.dispose();if(this.mapPass)this.mapPass.dispose()}copy(A){return this.camera=A.camera.clone(),this.bias=A.bias,this.radius=A.radius,this.mapSize.copy(A.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let A={};if(this.bias!==0)A.bias=this.bias;if(this.normalBias!==0)A.normalBias=this.normalBias;if(this.radius!==1)A.radius=this.radius;if(this.mapSize.x!==512||this.mapSize.y!==512)A.mapSize=this.mapSize.toArray();return A.camera=this.camera.toJSON(!1).object,delete A.camera.matrix,A}}class cE extends aJ{constructor(){super(new b1(50,1,0.5,500));this.isSpotLightShadow=!0,this.focus=1}updateMatrices(A){let Q=this.camera,B=j7*2*A.angle*this.focus,C=this.mapSize.width/this.mapSize.height,J=A.distance||Q.far;if(B!==Q.fov||C!==Q.aspect||J!==Q.far)Q.fov=B,Q.aspect=C,Q.far=J,Q.updateProjectionMatrix();super.updateMatrices(A)}copy(A){return super.copy(A),this.focus=A.focus,this}}class XH extends HQ{constructor(A,Q,B=0,C=Math.PI/3,J=0,I=2){super(A,Q);this.isSpotLight=!0,this.type="SpotLight",this.position.copy(L1.DEFAULT_UP),this.updateMatrix(),this.target=new L1,this.distance=B,this.angle=C,this.penumbra=J,this.decay=I,this.map=null,this.shadow=new cE}get power(){return this.intensity*Math.PI}set power(A){this.intensity=A/Math.PI}dispose(){this.shadow.dispose()}copy(A,Q){return super.copy(A,Q),this.distance=A.distance,this.angle=A.angle,this.penumbra=A.penumbra,this.decay=A.decay,this.target=A.target.clone(),this.shadow=A.shadow.clone(),this}}var nD=new h0,r9=new p,vZ=new p;class lE extends aJ{constructor(){super(new b1(90,1,0.5,500));this.isPointLightShadow=!0,this._frameExtents=new M0(4,2),this._viewportCount=6,this._viewports=[new x1(2,1,1,1),new x1(0,1,1,1),new x1(3,1,1,1),new x1(1,1,1,1),new x1(3,0,1,1),new x1(1,0,1,1)],this._cubeDirections=[new p(1,0,0),new p(-1,0,0),new p(0,0,1),new p(0,0,-1),new p(0,1,0),new p(0,-1,0)],this._cubeUps=[new p(0,1,0),new p(0,1,0),new p(0,1,0),new p(0,1,0),new p(0,0,1),new p(0,0,-1)]}updateMatrices(A,Q=0){let B=this.camera,C=this.matrix,J=A.distance||B.far;if(J!==B.far)B.far=J,B.updateProjectionMatrix();r9.setFromMatrixPosition(A.matrixWorld),B.position.copy(r9),vZ.copy(B.position),vZ.add(this._cubeDirections[Q]),B.up.copy(this._cubeUps[Q]),B.lookAt(vZ),B.updateMatrixWorld(),C.makeTranslation(-r9.x,-r9.y,-r9.z),nD.multiplyMatrices(B.projectionMatrix,B.matrixWorldInverse),this._frustum.setFromProjectionMatrix(nD)}}class XQ extends HQ{constructor(A,Q,B=0,C=2){super(A,Q);this.isPointLight=!0,this.type="PointLight",this.distance=B,this.decay=C,this.shadow=new lE}get power(){return this.intensity*4*Math.PI}set power(A){this.intensity=A/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(A,Q){return super.copy(A,Q),this.distance=A.distance,this.decay=A.decay,this.shadow=A.shadow.clone(),this}}class sE extends aJ{constructor(){super(new Z4(-5,5,5,-5,0.5,500));this.isDirectionalLightShadow=!0}}class GQ extends HQ{constructor(A,Q){super(A,Q);this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(L1.DEFAULT_UP),this.updateMatrix(),this.target=new L1,this.shadow=new sE}dispose(){this.shadow.dispose()}copy(A){return super.copy(A),this.target=A.target.clone(),this.shadow=A.shadow.clone(),this}}class iE{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let A=0;A<9;A++)this.coefficients.push(new p)}set(A){for(let Q=0;Q<9;Q++)this.coefficients[Q].copy(A[Q]);return this}zero(){for(let A=0;A<9;A++)this.coefficients[A].set(0,0,0);return this}getAt(A,Q){let{x:B,y:C,z:J}=A,I=this.coefficients;return Q.copy(I[0]).multiplyScalar(0.282095),Q.addScaledVector(I[1],0.488603*C),Q.addScaledVector(I[2],0.488603*J),Q.addScaledVector(I[3],0.488603*B),Q.addScaledVector(I[4],1.092548*(B*C)),Q.addScaledVector(I[5],1.092548*(C*J)),Q.addScaledVector(I[6],0.315392*(3*J*J-1)),Q.addScaledVector(I[7],1.092548*(B*J)),Q.addScaledVector(I[8],0.546274*(B*B-C*C)),Q}getIrradianceAt(A,Q){let{x:B,y:C,z:J}=A,I=this.coefficients;return Q.copy(I[0]).multiplyScalar(0.886227),Q.addScaledVector(I[1],1.023328*C),Q.addScaledVector(I[2],1.023328*J),Q.addScaledVector(I[3],1.023328*B),Q.addScaledVector(I[4],0.858086*B*C),Q.addScaledVector(I[5],0.858086*C*J),Q.addScaledVector(I[6],0.743125*J*J-0.247708),Q.addScaledVector(I[7],0.858086*B*J),Q.addScaledVector(I[8],0.429043*(B*B-C*C)),Q}add(A){for(let Q=0;Q<9;Q++)this.coefficients[Q].add(A.coefficients[Q]);return this}addScaledSH(A,Q){for(let B=0;B<9;B++)this.coefficients[B].addScaledVector(A.coefficients[B],Q);return this}scale(A){for(let Q=0;Q<9;Q++)this.coefficients[Q].multiplyScalar(A);return this}lerp(A,Q){for(let B=0;B<9;B++)this.coefficients[B].lerp(A.coefficients[B],Q);return this}equals(A){for(let Q=0;Q<9;Q++)if(!this.coefficients[Q].equals(A.coefficients[Q]))return!1;return!0}copy(A){return this.set(A.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(A,Q=0){let B=this.coefficients;for(let C=0;C<9;C++)B[C].fromArray(A,Q+C*3);return this}toArray(A=[],Q=0){let B=this.coefficients;for(let C=0;C<9;C++)B[C].toArray(A,Q+C*3);return A}static getBasisAt(A,Q){let{x:B,y:C,z:J}=A;Q[0]=0.282095,Q[1]=0.488603*C,Q[2]=0.488603*J,Q[3]=0.488603*B,Q[4]=1.092548*B*C,Q[5]=1.092548*C*J,Q[6]=0.315392*(3*J*J-1),Q[7]=1.092548*B*J,Q[8]=0.546274*(B*B-C*C)}}class GH extends HQ{constructor(A=new iE,Q=1){super(void 0,Q);this.isLightProbe=!0,this.sh=A}copy(A){return super.copy(A),this.sh.copy(A.sh),this}fromJSON(A){return this.intensity=A.intensity,this.sh.fromArray(A.sh),this}toJSON(A){let Q=super.toJSON(A);return Q.object.sh=this.sh.toArray(),Q}}class H5{static decodeText(A){if(typeof TextDecoder!=="undefined")return new TextDecoder().decode(A);let Q="";for(let B=0,C=A.length;B<C;B++)Q+=String.fromCharCode(A[B]);try{return decodeURIComponent(escape(Q))}catch(B){return Q}}static extractUrlBase(A){let Q=A.lastIndexOf("/");if(Q===-1)return"./";return A.slice(0,Q+1)}static resolveURL(A,Q){if(typeof A!=="string"||A==="")return"";if(/^https?:\/\//i.test(Q)&&/^\//.test(A))Q=Q.replace(/(^https?:\/\/[^\/]+).*/i,"$1");if(/^(https?:)?\/\//i.test(A))return A;if(/^data:.*,.*$/i.test(A))return A;if(/^blob:.*$/i.test(A))return A;return Q+A}}class WH extends m2{constructor(A){super(A);if(this.isImageBitmapLoader=!0,typeof createImageBitmap==="undefined")console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported.");if(typeof fetch==="undefined")console.warn("THREE.ImageBitmapLoader: fetch() not supported.");this.options={premultiplyAlpha:"none"}}setOptions(A){return this.options=A,this}load(A,Q,B,C){if(A===void 0)A="";if(this.path!==void 0)A=this.path+A;A=this.manager.resolveURL(A);let J=this,I=B6.get(A);if(I!==void 0){if(J.manager.itemStart(A),I.then){I.then((Y)=>{if(Q)Q(Y);J.manager.itemEnd(A)}).catch((Y)=>{if(C)C(Y)});return}return setTimeout(function(){if(Q)Q(I);J.manager.itemEnd(A)},0),I}let q={};q.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",q.headers=this.requestHeader;let K=fetch(A,q).then(function(Y){return Y.blob()}).then(function(Y){return createImageBitmap(Y,Object.assign(J.options,{colorSpaceConversion:"none"}))}).then(function(Y){if(B6.add(A,Y),Q)Q(Y);return J.manager.itemEnd(A),Y}).catch(function(Y){if(C)C(Y);B6.remove(A),J.manager.itemError(A),J.manager.itemEnd(A)});B6.add(A,K),J.manager.itemStart(A)}}class nE{constructor(A,Q,B){this.binding=A,this.valueSize=B;let C,J,I;switch(Q){case"quaternion":C=this._slerp,J=this._slerpAdditive,I=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(B*6),this._workIndex=5;break;case"string":case"bool":C=this._select,J=this._select,I=this._setAdditiveIdentityOther,this.buffer=new Array(B*5);break;default:C=this._lerp,J=this._lerpAdditive,I=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(B*5)}this._mixBufferRegion=C,this._mixBufferRegionAdditive=J,this._setIdentity=I,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(A,Q){let B=this.buffer,C=this.valueSize,J=A*C+C,I=this.cumulativeWeight;if(I===0){for(let q=0;q!==C;++q)B[J+q]=B[q];I=Q}else{I+=Q;let q=Q/I;this._mixBufferRegion(B,J,0,q,C)}this.cumulativeWeight=I}accumulateAdditive(A){let Q=this.buffer,B=this.valueSize,C=B*this._addIndex;if(this.cumulativeWeightAdditive===0)this._setIdentity();this._mixBufferRegionAdditive(Q,C,0,A,B),this.cumulativeWeightAdditive+=A}apply(A){let Q=this.valueSize,B=this.buffer,C=A*Q+Q,J=this.cumulativeWeight,I=this.cumulativeWeightAdditive,q=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,J<1){let K=Q*this._origIndex;this._mixBufferRegion(B,C,K,1-J,Q)}if(I>0)this._mixBufferRegionAdditive(B,C,this._addIndex*Q,1,Q);for(let K=Q,Y=Q+Q;K!==Y;++K)if(B[K]!==B[K+Q]){q.setValue(B,C);break}}saveOriginalState(){let A=this.binding,Q=this.buffer,B=this.valueSize,C=B*this._origIndex;A.getValue(Q,C);for(let J=B,I=C;J!==I;++J)Q[J]=Q[C+J%B];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let A=this.valueSize*3;this.binding.setValue(this.buffer,A)}_setAdditiveIdentityNumeric(){let A=this._addIndex*this.valueSize,Q=A+this.valueSize;for(let B=A;B<Q;B++)this.buffer[B]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let A=this._origIndex*this.valueSize,Q=this._addIndex*this.valueSize;for(let B=0;B<this.valueSize;B++)this.buffer[Q+B]=this.buffer[A+B]}_select(A,Q,B,C,J){if(C>=0.5)for(let I=0;I!==J;++I)A[Q+I]=A[B+I]}_slerp(A,Q,B,C){n1.slerpFlat(A,Q,A,Q,A,B,C)}_slerpAdditive(A,Q,B,C,J){let I=this._workIndex*J;n1.multiplyQuaternionsFlat(A,I,A,Q,A,B),n1.slerpFlat(A,Q,A,Q,A,I,C)}_lerp(A,Q,B,C,J){let I=1-C;for(let q=0;q!==J;++q){let K=Q+q;A[K]=A[K]*I+A[B+q]*C}}_lerpAdditive(A,Q,B,C,J){for(let I=0;I!==J;++I){let q=Q+I;A[q]=A[q]+A[B+I]*C}}}var FH="\\[\\]\\.:\\/",kx=new RegExp("["+FH+"]","g"),VH="[^"+FH+"]",Px="[^"+FH.replace("\\.","")+"]",_x=/((?:WC+[\/:])*)/.source.replace("WC",VH),Tx=/(WCOD+)?/.source.replace("WCOD",Px),jx=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",VH),Sx=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",VH),yx=new RegExp("^"+_x+Tx+jx+Sx+"$"),fx=["material","materials","bones","map"];class oE{constructor(A,Q,B){let C=B||W1.parseTrackName(Q);this._targetGroup=A,this._bindings=A.subscribe_(Q,C)}getValue(A,Q){this.bind();let B=this._targetGroup.nCachedObjects_,C=this._bindings[B];if(C!==void 0)C.getValue(A,Q)}setValue(A,Q){let B=this._bindings;for(let C=this._targetGroup.nCachedObjects_,J=B.length;C!==J;++C)B[C].setValue(A,Q)}bind(){let A=this._bindings;for(let Q=this._targetGroup.nCachedObjects_,B=A.length;Q!==B;++Q)A[Q].bind()}unbind(){let A=this._bindings;for(let Q=this._targetGroup.nCachedObjects_,B=A.length;Q!==B;++Q)A[Q].unbind()}}class W1{constructor(A,Q,B){this.path=Q,this.parsedPath=B||W1.parseTrackName(Q),this.node=W1.findNode(A,this.parsedPath.nodeName),this.rootNode=A,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(A,Q,B){if(!(A&&A.isAnimationObjectGroup))return new W1(A,Q,B);else return new W1.Composite(A,Q,B)}static sanitizeNodeName(A){return A.replace(/\s/g,"_").replace(kx,"")}static parseTrackName(A){let Q=yx.exec(A);if(Q===null)throw new Error("PropertyBinding: Cannot parse trackName: "+A);let B={nodeName:Q[2],objectName:Q[3],objectIndex:Q[4],propertyName:Q[5],propertyIndex:Q[6]},C=B.nodeName&&B.nodeName.lastIndexOf(".");if(C!==void 0&&C!==-1){let J=B.nodeName.substring(C+1);if(fx.indexOf(J)!==-1)B.nodeName=B.nodeName.substring(0,C),B.objectName=J}if(B.propertyName===null||B.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+A);return B}static findNode(A,Q){if(Q===void 0||Q===""||Q==="."||Q===-1||Q===A.name||Q===A.uuid)return A;if(A.skeleton){let B=A.skeleton.getBoneByName(Q);if(B!==void 0)return B}if(A.children){let B=function(J){for(let I=0;I<J.length;I++){let q=J[I];if(q.name===Q||q.uuid===Q)return q;let K=B(q.children);if(K)return K}return null},C=B(A.children);if(C)return C}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(A,Q){A[Q]=this.targetObject[this.propertyName]}_getValue_array(A,Q){let B=this.resolvedProperty;for(let C=0,J=B.length;C!==J;++C)A[Q++]=B[C]}_getValue_arrayElement(A,Q){A[Q]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(A,Q){this.resolvedProperty.toArray(A,Q)}_setValue_direct(A,Q){this.targetObject[this.propertyName]=A[Q]}_setValue_direct_setNeedsUpdate(A,Q){this.targetObject[this.propertyName]=A[Q],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(A,Q){this.targetObject[this.propertyName]=A[Q],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(A,Q){let B=this.resolvedProperty;for(let C=0,J=B.length;C!==J;++C)B[C]=A[Q++]}_setValue_array_setNeedsUpdate(A,Q){let B=this.resolvedProperty;for(let C=0,J=B.length;C!==J;++C)B[C]=A[Q++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(A,Q){let B=this.resolvedProperty;for(let C=0,J=B.length;C!==J;++C)B[C]=A[Q++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(A,Q){this.resolvedProperty[this.propertyIndex]=A[Q]}_setValue_arrayElement_setNeedsUpdate(A,Q){this.resolvedProperty[this.propertyIndex]=A[Q],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(A,Q){this.resolvedProperty[this.propertyIndex]=A[Q],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(A,Q){this.resolvedProperty.fromArray(A,Q)}_setValue_fromArray_setNeedsUpdate(A,Q){this.resolvedProperty.fromArray(A,Q),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(A,Q){this.resolvedProperty.fromArray(A,Q),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(A,Q){this.bind(),this.getValue(A,Q)}_setValue_unbound(A,Q){this.bind(),this.setValue(A,Q)}bind(){let A=this.node,Q=this.parsedPath,B=Q.objectName,C=Q.propertyName,J=Q.propertyIndex;if(!A)A=W1.findNode(this.rootNode,Q.nodeName),this.node=A;if(this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!A){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(B){let Y=Q.objectIndex;switch(B){case"materials":if(!A.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!A.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}A=A.material.materials;break;case"bones":if(!A.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}A=A.skeleton.bones;for(let Z=0;Z<A.length;Z++)if(A[Z].name===Y){Y=Z;break}break;case"map":if("map"in A){A=A.map;break}if(!A.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!A.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}A=A.material.map;break;default:if(A[B]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}A=A[B]}if(Y!==void 0){if(A[Y]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,A);return}A=A[Y]}}let I=A[C];if(I===void 0){let Y=Q.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+Y+"."+C+" but it wasn\'t found.",A);return}let q=this.Versioning.None;if(this.targetObject=A,A.needsUpdate!==void 0)q=this.Versioning.NeedsUpdate;else if(A.matrixWorldNeedsUpdate!==void 0)q=this.Versioning.MatrixWorldNeedsUpdate;let K=this.BindingType.Direct;if(J!==void 0){if(C==="morphTargetInfluences"){if(!A.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!A.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}if(A.morphTargetDictionary[J]!==void 0)J=A.morphTargetDictionary[J]}K=this.BindingType.ArrayElement,this.resolvedProperty=I,this.propertyIndex=J}else if(I.fromArray!==void 0&&I.toArray!==void 0)K=this.BindingType.HasFromToArray,this.resolvedProperty=I;else if(Array.isArray(I))K=this.BindingType.EntireArray,this.resolvedProperty=I;else this.propertyName=C;this.getValue=this.GetterByBindingType[K],this.setValue=this.SetterByBindingTypeAndVersioning[K][q]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}W1.Composite=oE;W1.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};W1.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};W1.prototype.GetterByBindingType=[W1.prototype._getValue_direct,W1.prototype._getValue_array,W1.prototype._getValue_arrayElement,W1.prototype._getValue_toArray];W1.prototype.SetterByBindingTypeAndVersioning=[[W1.prototype._setValue_direct,W1.prototype._setValue_direct_setNeedsUpdate,W1.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[W1.prototype._setValue_array,W1.prototype._setValue_array_setNeedsUpdate,W1.prototype._setValue_array_setMatrixWorldNeedsUpdate],[W1.prototype._setValue_arrayElement,W1.prototype._setValue_arrayElement_setNeedsUpdate,W1.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[W1.prototype._setValue_fromArray,W1.prototype._setValue_fromArray_setNeedsUpdate,W1.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class aE{constructor(A,Q,B=null,C=Q.blendMode){this._mixer=A,this._clip=Q,this._localRoot=B,this.blendMode=C;let J=Q.tracks,I=J.length,q=new Array(I),K={endingStart:2400,endingEnd:2400};for(let Y=0;Y!==I;++Y){let Z=J[Y].createInterpolant(null);q[Y]=Z,Z.settings=K}this._interpolantSettings=K,this._interpolants=q,this._propertyBindings=new Array(I),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(A){return this._startTime=A,this}setLoop(A,Q){return this.loop=A,this.repetitions=Q,this}setEffectiveWeight(A){return this.weight=A,this._effectiveWeight=this.enabled?A:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(A){return this._scheduleFading(A,0,1)}fadeOut(A){return this._scheduleFading(A,1,0)}crossFadeFrom(A,Q,B){if(A.fadeOut(Q),this.fadeIn(Q),B){let C=this._clip.duration,J=A._clip.duration,I=J/C,q=C/J;A.warp(1,I,Q),this.warp(q,1,Q)}return this}crossFadeTo(A,Q,B){return A.crossFadeFrom(this,Q,B)}stopFading(){let A=this._weightInterpolant;if(A!==null)this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(A);return this}setEffectiveTimeScale(A){return this.timeScale=A,this._effectiveTimeScale=this.paused?0:A,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(A){return this.timeScale=this._clip.duration/A,this.stopWarping()}syncWith(A){return this.time=A.time,this.timeScale=A.timeScale,this.stopWarping()}halt(A){return this.warp(this._effectiveTimeScale,0,A)}warp(A,Q,B){let C=this._mixer,J=C.time,I=this.timeScale,q=this._timeScaleInterpolant;if(q===null)q=C._lendControlInterpolant(),this._timeScaleInterpolant=q;let{parameterPositions:K,sampleValues:Y}=q;return K[0]=J,K[1]=J+B,Y[0]=A/I,Y[1]=Q/I,this}stopWarping(){let A=this._timeScaleInterpolant;if(A!==null)this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(A);return this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(A,Q,B,C){if(!this.enabled){this._updateWeight(A);return}let J=this._startTime;if(J!==null){let K=(A-J)*B;if(K<0||B===0)Q=0;else this._startTime=null,Q=B*K}Q*=this._updateTimeScale(A);let I=this._updateTime(Q),q=this._updateWeight(A);if(q>0){let K=this._interpolants,Y=this._propertyBindings;switch(this.blendMode){case 2501:for(let Z=0,H=K.length;Z!==H;++Z)K[Z].evaluate(I),Y[Z].accumulateAdditive(q);break;case 2500:default:for(let Z=0,H=K.length;Z!==H;++Z)K[Z].evaluate(I),Y[Z].accumulate(C,q)}}}_updateWeight(A){let Q=0;if(this.enabled){Q=this.weight;let B=this._weightInterpolant;if(B!==null){let C=B.evaluate(A)[0];if(Q*=C,A>B.parameterPositions[1]){if(this.stopFading(),C===0)this.enabled=!1}}}return this._effectiveWeight=Q,Q}_updateTimeScale(A){let Q=0;if(!this.paused){Q=this.timeScale;let B=this._timeScaleInterpolant;if(B!==null){let C=B.evaluate(A)[0];if(Q*=C,A>B.parameterPositions[1])if(this.stopWarping(),Q===0)this.paused=!0;else this.timeScale=Q}}return this._effectiveTimeScale=Q,Q}_updateTime(A){let Q=this._clip.duration,B=this.loop,C=this.time+A,J=this._loopCount,I=B===2202;if(A===0){if(J===-1)return C;return I&&(J&1)===1?Q-C:C}if(B===2200){if(J===-1)this._loopCount=0,this._setEndings(!0,!0,!1);A:{if(C>=Q)C=Q;else if(C<0)C=0;else{this.time=C;break A}if(this.clampWhenFinished)this.paused=!0;else this.enabled=!1;this.time=C,this._mixer.dispatchEvent({type:"finished",action:this,direction:A<0?-1:1})}}else{if(J===-1)if(A>=0)J=0,this._setEndings(!0,this.repetitions===0,I);else this._setEndings(this.repetitions===0,!0,I);if(C>=Q||C<0){let q=Math.floor(C/Q);C-=Q*q,J+=Math.abs(q);let K=this.repetitions-J;if(K<=0){if(this.clampWhenFinished)this.paused=!0;else this.enabled=!1;C=A>0?Q:0,this.time=C,this._mixer.dispatchEvent({type:"finished",action:this,direction:A>0?1:-1})}else{if(K===1){let Y=A<0;this._setEndings(Y,!Y,I)}else this._setEndings(!1,!1,I);this._loopCount=J,this.time=C,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:q})}}else this.time=C;if(I&&(J&1)===1)return Q-C}return C}_setEndings(A,Q,B){let C=this._interpolantSettings;if(B)C.endingStart=2401,C.endingEnd=2401;else{if(A)C.endingStart=this.zeroSlopeAtStart?2401:2400;else C.endingStart=2402;if(Q)C.endingEnd=this.zeroSlopeAtEnd?2401:2400;else C.endingEnd=2402}}_scheduleFading(A,Q,B){let C=this._mixer,J=C.time,I=this._weightInterpolant;if(I===null)I=C._lendControlInterpolant(),this._weightInterpolant=I;let{parameterPositions:q,sampleValues:K}=I;return q[0]=J,K[0]=Q,q[1]=J+A,K[1]=B,this}}var hx=new Float32Array(1);class rJ extends O2{constructor(A){super();this._root=A,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(A,Q){let B=A._localRoot||this._root,C=A._clip.tracks,J=C.length,I=A._propertyBindings,q=A._interpolants,K=B.uuid,Y=this._bindingsByRootAndName,Z=Y[K];if(Z===void 0)Z={},Y[K]=Z;for(let H=0;H!==J;++H){let G=C[H],W=G.name,F=Z[W];if(F!==void 0)++F.referenceCount,I[H]=F;else{if(F=I[H],F!==void 0){if(F._cacheIndex===null)++F.referenceCount,this._addInactiveBinding(F,K,W);continue}let z=Q&&Q._propertyBindings[H].binding.parsedPath;F=new nE(W1.create(B,W,z),G.ValueTypeName,G.getValueSize()),++F.referenceCount,this._addInactiveBinding(F,K,W),I[H]=F}q[H].resultBuffer=F.buffer}}_activateAction(A){if(!this._isActiveAction(A)){if(A._cacheIndex===null){let B=(A._localRoot||this._root).uuid,C=A._clip.uuid,J=this._actionsByClip[C];this._bindAction(A,J&&J.knownActions[0]),this._addInactiveAction(A,C,B)}let Q=A._propertyBindings;for(let B=0,C=Q.length;B!==C;++B){let J=Q[B];if(J.useCount++===0)this._lendBinding(J),J.saveOriginalState()}this._lendAction(A)}}_deactivateAction(A){if(this._isActiveAction(A)){let Q=A._propertyBindings;for(let B=0,C=Q.length;B!==C;++B){let J=Q[B];if(--J.useCount===0)J.restoreOriginalState(),this._takeBackBinding(J)}this._takeBackAction(A)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let A=this;this.stats={actions:{get total(){return A._actions.length},get inUse(){return A._nActiveActions}},bindings:{get total(){return A._bindings.length},get inUse(){return A._nActiveBindings}},controlInterpolants:{get total(){return A._controlInterpolants.length},get inUse(){return A._nActiveControlInterpolants}}}}_isActiveAction(A){let Q=A._cacheIndex;return Q!==null&&Q<this._nActiveActions}_addInactiveAction(A,Q,B){let C=this._actions,J=this._actionsByClip,I=J[Q];if(I===void 0)I={knownActions:[A],actionByRoot:{}},A._byClipCacheIndex=0,J[Q]=I;else{let q=I.knownActions;A._byClipCacheIndex=q.length,q.push(A)}A._cacheIndex=C.length,C.push(A),I.actionByRoot[B]=A}_removeInactiveAction(A){let Q=this._actions,B=Q[Q.length-1],C=A._cacheIndex;B._cacheIndex=C,Q[C]=B,Q.pop(),A._cacheIndex=null;let J=A._clip.uuid,I=this._actionsByClip,q=I[J],K=q.knownActions,Y=K[K.length-1],Z=A._byClipCacheIndex;Y._byClipCacheIndex=Z,K[Z]=Y,K.pop(),A._byClipCacheIndex=null;let H=q.actionByRoot,G=(A._localRoot||this._root).uuid;if(delete H[G],K.length===0)delete I[J];this._removeInactiveBindingsForAction(A)}_removeInactiveBindingsForAction(A){let Q=A._propertyBindings;for(let B=0,C=Q.length;B!==C;++B){let J=Q[B];if(--J.referenceCount===0)this._removeInactiveBinding(J)}}_lendAction(A){let Q=this._actions,B=A._cacheIndex,C=this._nActiveActions++,J=Q[C];A._cacheIndex=C,Q[C]=A,J._cacheIndex=B,Q[B]=J}_takeBackAction(A){let Q=this._actions,B=A._cacheIndex,C=--this._nActiveActions,J=Q[C];A._cacheIndex=C,Q[C]=A,J._cacheIndex=B,Q[B]=J}_addInactiveBinding(A,Q,B){let C=this._bindingsByRootAndName,J=this._bindings,I=C[Q];if(I===void 0)I={},C[Q]=I;I[B]=A,A._cacheIndex=J.length,J.push(A)}_removeInactiveBinding(A){let Q=this._bindings,B=A.binding,C=B.rootNode.uuid,J=B.path,I=this._bindingsByRootAndName,q=I[C],K=Q[Q.length-1],Y=A._cacheIndex;if(K._cacheIndex=Y,Q[Y]=K,Q.pop(),delete q[J],Object.keys(q).length===0)delete I[C]}_lendBinding(A){let Q=this._bindings,B=A._cacheIndex,C=this._nActiveBindings++,J=Q[C];A._cacheIndex=C,Q[C]=A,J._cacheIndex=B,Q[B]=J}_takeBackBinding(A){let Q=this._bindings,B=A._cacheIndex,C=--this._nActiveBindings,J=Q[C];A._cacheIndex=C,Q[C]=A,J._cacheIndex=B,Q[B]=J}_lendControlInterpolant(){let A=this._controlInterpolants,Q=this._nActiveControlInterpolants++,B=A[Q];if(B===void 0)B=new YH(new Float32Array(2),new Float32Array(2),1,hx),B.__cacheIndex=Q,A[Q]=B;return B}_takeBackControlInterpolant(A){let Q=this._controlInterpolants,B=A.__cacheIndex,C=--this._nActiveControlInterpolants,J=Q[C];A.__cacheIndex=C,Q[C]=A,J.__cacheIndex=B,Q[B]=J}clipAction(A,Q,B){let C=Q||this._root,J=C.uuid,I=typeof A==="string"?f7.findByName(C,A):A,q=I!==null?I.uuid:A,K=this._actionsByClip[q],Y=null;if(B===void 0)if(I!==null)B=I.blendMode;else B=2500;if(K!==void 0){let H=K.actionByRoot[J];if(H!==void 0&&H.blendMode===B)return H;if(Y=K.knownActions[0],I===null)I=Y._clip}if(I===null)return null;let Z=new aE(this,I,Q,B);return this._bindAction(Z,Y),this._addInactiveAction(Z,q,J),Z}existingAction(A,Q){let B=Q||this._root,C=B.uuid,J=typeof A==="string"?f7.findByName(B,A):A,I=J?J.uuid:A,q=this._actionsByClip[I];if(q!==void 0)return q.actionByRoot[C]||null;return null}stopAllAction(){let A=this._actions,Q=this._nActiveActions;for(let B=Q-1;B>=0;--B)A[B].stop();return this}update(A){A*=this.timeScale;let Q=this._actions,B=this._nActiveActions,C=this.time+=A,J=Math.sign(A),I=this._accuIndex^=1;for(let Y=0;Y!==B;++Y)Q[Y]._update(C,A,J,I);let q=this._bindings,K=this._nActiveBindings;for(let Y=0;Y!==K;++Y)q[Y].apply(I);return this}setTime(A){this.time=0;for(let Q=0;Q<this._actions.length;Q++)this._actions[Q].time=0;return this.update(A)}getRoot(){return this._root}uncacheClip(A){let Q=this._actions,B=A.uuid,C=this._actionsByClip,J=C[B];if(J!==void 0){let I=J.knownActions;for(let q=0,K=I.length;q!==K;++q){let Y=I[q];this._deactivateAction(Y);let Z=Y._cacheIndex,H=Q[Q.length-1];Y._cacheIndex=null,Y._byClipCacheIndex=null,H._cacheIndex=Z,Q[Z]=H,Q.pop(),this._removeInactiveBindingsForAction(Y)}delete C[B]}}uncacheRoot(A){let Q=A.uuid,B=this._actionsByClip;for(let I in B){let q=B[I].actionByRoot,K=q[Q];if(K!==void 0)this._deactivateAction(K),this._removeInactiveAction(K)}let C=this._bindingsByRootAndName,J=C[Q];if(J!==void 0)for(let I in J){let q=J[I];q.restoreOriginalState(),this._removeInactiveBinding(q)}}uncacheAction(A,Q){let B=this.existingAction(A,Q);if(B!==null)this._deactivateAction(B),this._removeInactiveAction(B)}}class tJ{constructor(A){this.value=A}clone(){return new tJ(this.value.clone===void 0?this.value:this.value.clone())}}var oD=new h0;class UH{constructor(A,Q,B=0,C=1/0){this.ray=new I6(A,Q),this.near=B,this.far=C,this.camera=null,this.layers=new bJ,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(A,Q){this.ray.set(A,Q)}setFromCamera(A,Q){if(Q.isPerspectiveCamera)this.ray.origin.setFromMatrixPosition(Q.matrixWorld),this.ray.direction.set(A.x,A.y,0.5).unproject(Q).sub(this.ray.origin).normalize(),this.camera=Q;else if(Q.isOrthographicCamera)this.ray.origin.set(A.x,A.y,(Q.near+Q.far)/(Q.near-Q.far)).unproject(Q),this.ray.direction.set(0,0,-1).transformDirection(Q.matrixWorld),this.camera=Q;else console.error("THREE.Raycaster: Unsupported camera type: "+Q.type)}setFromXRController(A){return oD.identity().extractRotation(A.matrixWorld),this.ray.origin.setFromMatrixPosition(A.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(oD),this}intersectObject(A,Q=!0,B=[]){return dZ(A,this,B,Q),B.sort(aD),B}intersectObjects(A,Q=!0,B=[]){for(let C=0,J=A.length;C<J;C++)dZ(A[C],this,B,Q);return B.sort(aD),B}}function aD(A,Q){return A.distance-Q.distance}function dZ(A,Q,B,C){if(A.layers.test(Q.layers))A.raycast(Q,B);if(C===!0){let J=A.children;for(let I=0,q=J.length;I<q;I++)dZ(J[I],Q,B,!0)}}class u4{constructor(A=1,Q=0,B=0){return this.radius=A,this.phi=Q,this.theta=B,this}set(A,Q,B){return this.radius=A,this.phi=Q,this.theta=B,this}copy(A){return this.radius=A.radius,this.phi=A.phi,this.theta=A.theta,this}makeSafe(){return this.phi=Math.max(0.000001,Math.min(Math.PI-0.000001,this.phi)),this}setFromVector3(A){return this.setFromCartesianCoords(A.x,A.y,A.z)}setFromCartesianCoords(A,Q,B){if(this.radius=Math.sqrt(A*A+Q*Q+B*B),this.radius===0)this.theta=0,this.phi=0;else this.theta=Math.atan2(A,B),this.phi=Math.acos(L2(Q/this.radius,-1,1));return this}clone(){return new this.constructor().copy(this)}}if(typeof __THREE_DEVTOOLS__!=="undefined")__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"162"}}));if(typeof window!=="undefined")if(window.__THREE__)console.warn("WARNING: Multiple instances of Three.js being imported.");else window.__THREE__="162";var eJ=window,AI=eJ.ShadowRoot&&(eJ.ShadyCSS===void 0||eJ.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,tE=Symbol(),rE=new WeakMap;class zH{constructor(A,Q,B){if(this._$cssResult$=!0,B!==tE)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=A,this.t=Q}get styleSheet(){let A=this.o,Q=this.t;if(AI&&A===void 0){let B=Q!==void 0&&Q.length===1;B&&(A=rE.get(Q)),A===void 0&&((this.o=A=new CSSStyleSheet).replaceSync(this.cssText),B&&rE.set(Q,A))}return A}toString(){return this.cssText}}var eE=(A)=>new zH(typeof A=="string"?A:A+"",void 0,tE);var DH=(A,Q)=>{AI?A.adoptedStyleSheets=Q.map((B)=>B instanceof CSSStyleSheet?B:B.styleSheet):Q.forEach((B)=>{let C=document.createElement("style"),J=eJ.litNonce;J!==void 0&&C.setAttribute("nonce",J),C.textContent=B.cssText,A.appendChild(C)})},QI=AI?(A)=>A:(A)=>A instanceof CSSStyleSheet?((Q)=>{let B="";for(let C of Q.cssRules)B+=C.cssText;return eE(B)})(A):A;var EH,BI=window,Aw=BI.trustedTypes,gx=Aw?Aw.emptyScript:"",Qw=BI.reactiveElementPolyfillSupport,NH={toAttribute(A,Q){switch(Q){case Boolean:A=A?gx:null;break;case Object:case Array:A=A==null?A:JSON.stringify(A)}return A},fromAttribute(A,Q){let B=A;switch(Q){case Boolean:B=A!==null;break;case Number:B=A===null?null:Number(A);break;case Object:case Array:try{B=JSON.parse(A)}catch(C){B=null}}return B}},Bw=(A,Q)=>Q!==A&&(Q==Q||A==A),wH={attribute:!0,type:String,converter:NH,reflect:!1,hasChanged:Bw},$H="finalized";class p4 extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(A){var Q;this.finalize(),((Q=this.h)!==null&&Q!==void 0?Q:this.h=[]).push(A)}static get observedAttributes(){this.finalize();let A=[];return this.elementProperties.forEach((Q,B)=>{let C=this._$Ep(B,Q);C!==void 0&&(this._$Ev.set(C,B),A.push(C))}),A}static createProperty(A,Q=wH){if(Q.state&&(Q.attribute=!1),this.finalize(),this.elementProperties.set(A,Q),!Q.noAccessor&&!this.prototype.hasOwnProperty(A)){let B=typeof A=="symbol"?Symbol():"__"+A,C=this.getPropertyDescriptor(A,B,Q);C!==void 0&&Object.defineProperty(this.prototype,A,C)}}static getPropertyDescriptor(A,Q,B){return{get(){return this[Q]},set(C){let J=this[A];this[Q]=C,this.requestUpdate(A,J,B)},configurable:!0,enumerable:!0}}static getPropertyOptions(A){return this.elementProperties.get(A)||wH}static finalize(){if(this.hasOwnProperty($H))return!1;this[$H]=!0;let A=Object.getPrototypeOf(this);if(A.finalize(),A.h!==void 0&&(this.h=[...A.h]),this.elementProperties=new Map(A.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){let Q=this.properties,B=[...Object.getOwnPropertyNames(Q),...Object.getOwnPropertySymbols(Q)];for(let C of B)this.createProperty(C,Q[C])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(A){let Q=[];if(Array.isArray(A)){let B=new Set(A.flat(1/0).reverse());for(let C of B)Q.unshift(QI(C))}else A!==void 0&&Q.push(QI(A));return Q}static _$Ep(A,Q){let B=Q.attribute;return B===!1?void 0:typeof B=="string"?B:typeof A=="string"?A.toLowerCase():void 0}_$Eu(){var A;this._$E_=new Promise((Q)=>this.enableUpdating=Q),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(A=this.constructor.h)===null||A===void 0||A.forEach((Q)=>Q(this))}addController(A){var Q,B;((Q=this._$ES)!==null&&Q!==void 0?Q:this._$ES=[]).push(A),this.renderRoot!==void 0&&this.isConnected&&((B=A.hostConnected)===null||B===void 0||B.call(A))}removeController(A){var Q;(Q=this._$ES)===null||Q===void 0||Q.splice(this._$ES.indexOf(A)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((A,Q)=>{this.hasOwnProperty(Q)&&(this._$Ei.set(Q,this[Q]),delete this[Q])})}createRenderRoot(){var A;let Q=(A=this.shadowRoot)!==null&&A!==void 0?A:this.attachShadow(this.constructor.shadowRootOptions);return DH(Q,this.constructor.elementStyles),Q}connectedCallback(){var A;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(A=this._$ES)===null||A===void 0||A.forEach((Q)=>{var B;return(B=Q.hostConnected)===null||B===void 0?void 0:B.call(Q)})}enableUpdating(A){}disconnectedCallback(){var A;(A=this._$ES)===null||A===void 0||A.forEach((Q)=>{var B;return(B=Q.hostDisconnected)===null||B===void 0?void 0:B.call(Q)})}attributeChangedCallback(A,Q,B){this._$AK(A,B)}_$EO(A,Q,B=wH){var C;let J=this.constructor._$Ep(A,B);if(J!==void 0&&B.reflect===!0){let I=(((C=B.converter)===null||C===void 0?void 0:C.toAttribute)!==void 0?B.converter:NH).toAttribute(Q,B.type);this._$El=A,I==null?this.removeAttribute(J):this.setAttribute(J,I),this._$El=null}}_$AK(A,Q){var B;let C=this.constructor,J=C._$Ev.get(A);if(J!==void 0&&this._$El!==J){let I=C.getPropertyOptions(J),q=typeof I.converter=="function"?{fromAttribute:I.converter}:((B=I.converter)===null||B===void 0?void 0:B.fromAttribute)!==void 0?I.converter:NH;this._$El=J,this[J]=q.fromAttribute(Q,I.type),this._$El=null}}requestUpdate(A,Q,B){let C=!0;A!==void 0&&(((B=B||this.constructor.getPropertyOptions(A)).hasChanged||Bw)(this[A],Q)?(this._$AL.has(A)||this._$AL.set(A,Q),B.reflect===!0&&this._$El!==A&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(A,B))):C=!1),!this.isUpdatePending&&C&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(Q){Promise.reject(Q)}let A=this.scheduleUpdate();return A!=null&&await A,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var A;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((C,J)=>this[J]=C),this._$Ei=void 0);let Q=!1,B=this._$AL;try{Q=this.shouldUpdate(B),Q?(this.willUpdate(B),(A=this._$ES)===null||A===void 0||A.forEach((C)=>{var J;return(J=C.hostUpdate)===null||J===void 0?void 0:J.call(C)}),this.update(B)):this._$Ek()}catch(C){throw Q=!1,this._$Ek(),C}Q&&this._$AE(B)}willUpdate(A){}_$AE(A){var Q;(Q=this._$ES)===null||Q===void 0||Q.forEach((B)=>{var C;return(C=B.hostUpdated)===null||C===void 0?void 0:C.call(B)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(A)),this.updated(A)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(A){return!0}update(A){this._$EC!==void 0&&(this._$EC.forEach((Q,B)=>this._$EO(B,this[B],Q)),this._$EC=void 0),this._$Ek()}updated(A){}firstUpdated(A){}}p4[$H]=!0,p4.elementProperties=new Map,p4.elementStyles=[],p4.shadowRootOptions={mode:"open"},Qw==null||Qw({ReactiveElement:p4}),((EH=BI.reactiveElementVersions)!==null&&EH!==void 0?EH:BI.reactiveElementVersions=[]).push("1.6.3");var RH,CI=window,c7=CI.trustedTypes,Cw=c7?c7.createPolicy("lit-html",{createHTML:(A)=>A}):void 0;var Y6=`lit\$${(Math.random()+"").slice(9)}\$`,Hw="?"+Y6,vx=`<${Hw}>`,W5=document,FQ=()=>W5.createComment(""),VQ=(A)=>A===null||typeof A!="object"&&typeof A!="function",Xw=Array.isArray,bx=(A)=>Xw(A)||typeof(A==null?void 0:A[Symbol.iterator])=="function";var WQ=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Jw=/-->/g,Iw=/>/g,X5=RegExp(`>|[ \t\n\f\r](?:([^\\s"'>=/]+)([ \t\n\f\r]*=[ \t\n\f\r]*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|\$)`,"g"),qw=/'/g,Kw=/"/g,Gw=/^(?:script|style|textarea|title)$/i,Ww=(A)=>(Q,...B)=>({_$litType$:A,strings:Q,values:B}),Z6=Ww(1),P40=Ww(2),F5=Symbol.for("lit-noChange"),_2=Symbol.for("lit-nothing"),Yw=new WeakMap,G5=W5.createTreeWalker(W5,129,null,!1);function Fw(A,Q){if(!Array.isArray(A)||!A.hasOwnProperty("raw"))throw Error("invalid template strings array");return Cw!==void 0?Cw.createHTML(Q):Q}var ux=(A,Q)=>{let B=A.length-1,C=[],J,I=Q===2?"<svg>":"",q=WQ;for(let K=0;K<B;K++){let Y=A[K],Z,H,G=-1,W=0;for(;W<Y.length&&(q.lastIndex=W,H=q.exec(Y),H!==null);)W=q.lastIndex,q===WQ?H[1]==="!--"?q=Jw:H[1]!==void 0?q=Iw:H[2]!==void 0?(Gw.test(H[2])&&(J=RegExp("</"+H[2],"g")),q=X5):H[3]!==void 0&&(q=X5):q===X5?H[0]===">"?(q=J!=null?J:WQ,G=-1):H[1]===void 0?G=-2:(G=q.lastIndex-H[2].length,Z=H[1],q=H[3]===void 0?X5:H[3]==='"'?Kw:qw):q===Kw||q===qw?q=X5:q===Jw||q===Iw?q=WQ:(q=X5,J=void 0);let F=q===X5&&A[K+1].startsWith("/>")?" ":"";I+=q===WQ?Y+vx:G>=0?(C.push(Z),Y.slice(0,G)+"$lit$"+Y.slice(G)+Y6+F):Y+Y6+(G===-2?(C.push(void 0),K):F)}return[Fw(A,I+(A[B]||"<?>")+(Q===2?"</svg>":"")),C]};class UQ{constructor({strings:A,_$litType$:Q},B){let C;this.parts=[];let J=0,I=0,q=A.length-1,K=this.parts,[Y,Z]=ux(A,Q);if(this.el=UQ.createElement(Y,B),G5.currentNode=this.el.content,Q===2){let H=this.el.content,G=H.firstChild;G.remove(),H.append(...G.childNodes)}for(;(C=G5.nextNode())!==null&&K.length<q;){if(C.nodeType===1){if(C.hasAttributes()){let H=[];for(let G of C.getAttributeNames())if(G.endsWith("$lit$")||G.startsWith(Y6)){let W=Z[I++];if(H.push(G),W!==void 0){let F=C.getAttribute(W.toLowerCase()+"$lit$").split(Y6),z=/([.?@])?(.*)/.exec(W);K.push({type:1,index:J,name:z[2],strings:F,ctor:z[1]==="."?Uw:z[1]==="?"?zw:z[1]==="@"?Dw:DQ})}else K.push({type:6,index:J})}for(let G of H)C.removeAttribute(G)}if(Gw.test(C.tagName)){let H=C.textContent.split(Y6),G=H.length-1;if(G>0){C.textContent=c7?c7.emptyScript:"";for(let W=0;W<G;W++)C.append(H[W],FQ()),G5.nextNode(),K.push({type:2,index:++J});C.append(H[G],FQ())}}}else if(C.nodeType===8)if(C.data===Hw)K.push({type:2,index:J});else{let H=-1;for(;(H=C.data.indexOf(Y6,H+1))!==-1;)K.push({type:7,index:J}),H+=Y6.length-1}J++}}static createElement(A,Q){let B=W5.createElement("template");return B.innerHTML=A,B}}function l7(A,Q,B=A,C){var J,I,q,K;if(Q===F5)return Q;let Y=C!==void 0?(J=B._$Co)===null||J===void 0?void 0:J[C]:B._$Cl,Z=VQ(Q)?void 0:Q._$litDirective$;return(Y==null?void 0:Y.constructor)!==Z&&((I=Y==null?void 0:Y._$AO)===null||I===void 0||I.call(Y,!1),Z===void 0?Y=void 0:(Y=new Z(A),Y._$AT(A,B,C)),C!==void 0?((q=(K=B)._$Co)!==null&&q!==void 0?q:K._$Co=[])[C]=Y:B._$Cl=Y),Y!==void 0&&(Q=l7(A,Y._$AS(A,Q.values),Y,C)),Q}class Vw{constructor(A,Q){this._$AV=[],this._$AN=void 0,this._$AD=A,this._$AM=Q}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(A){var Q;let{el:{content:B},parts:C}=this._$AD,J=((Q=A==null?void 0:A.creationScope)!==null&&Q!==void 0?Q:W5).importNode(B,!0);G5.currentNode=J;let I=G5.nextNode(),q=0,K=0,Y=C[0];for(;Y!==void 0;){if(q===Y.index){let Z;Y.type===2?Z=new zQ(I,I.nextSibling,this,A):Y.type===1?Z=new Y.ctor(I,Y.name,Y.strings,this,A):Y.type===6&&(Z=new Ew(I,this,A)),this._$AV.push(Z),Y=C[++K]}q!==(Y==null?void 0:Y.index)&&(I=G5.nextNode(),q++)}return G5.currentNode=W5,J}v(A){let Q=0;for(let B of this._$AV)B!==void 0&&(B.strings!==void 0?(B._$AI(A,B,Q),Q+=B.strings.length-2):B._$AI(A[Q])),Q++}}class zQ{constructor(A,Q,B,C){var J;this.type=2,this._$AH=_2,this._$AN=void 0,this._$AA=A,this._$AB=Q,this._$AM=B,this.options=C,this._$Cp=(J=C==null?void 0:C.isConnected)===null||J===void 0||J}get _$AU(){var A,Q;return(Q=(A=this._$AM)===null||A===void 0?void 0:A._$AU)!==null&&Q!==void 0?Q:this._$Cp}get parentNode(){let A=this._$AA.parentNode,Q=this._$AM;return Q!==void 0&&(A==null?void 0:A.nodeType)===11&&(A=Q.parentNode),A}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(A,Q=this){A=l7(this,A,Q),VQ(A)?A===_2||A==null||A===""?(this._$AH!==_2&&this._$AR(),this._$AH=_2):A!==this._$AH&&A!==F5&&this._(A):A._$litType$!==void 0?this.g(A):A.nodeType!==void 0?this.$(A):bx(A)?this.T(A):this._(A)}k(A){return this._$AA.parentNode.insertBefore(A,this._$AB)}$(A){this._$AH!==A&&(this._$AR(),this._$AH=this.k(A))}_(A){this._$AH!==_2&&VQ(this._$AH)?this._$AA.nextSibling.data=A:this.$(W5.createTextNode(A)),this._$AH=A}g(A){var Q;let{values:B,_$litType$:C}=A,J=typeof C=="number"?this._$AC(A):(C.el===void 0&&(C.el=UQ.createElement(Fw(C.h,C.h[0]),this.options)),C);if(((Q=this._$AH)===null||Q===void 0?void 0:Q._$AD)===J)this._$AH.v(B);else{let I=new Vw(J,this),q=I.u(this.options);I.v(B),this.$(q),this._$AH=I}}_$AC(A){let Q=Yw.get(A.strings);return Q===void 0&&Yw.set(A.strings,Q=new UQ(A)),Q}T(A){Xw(this._$AH)||(this._$AH=[],this._$AR());let Q=this._$AH,B,C=0;for(let J of A)C===Q.length?Q.push(B=new zQ(this.k(FQ()),this.k(FQ()),this,this.options)):B=Q[C],B._$AI(J),C++;C<Q.length&&(this._$AR(B&&B._$AB.nextSibling,C),Q.length=C)}_$AR(A=this._$AA.nextSibling,Q){var B;for((B=this._$AP)===null||B===void 0||B.call(this,!1,!0,Q);A&&A!==this._$AB;){let C=A.nextSibling;A.remove(),A=C}}setConnected(A){var Q;this._$AM===void 0&&(this._$Cp=A,(Q=this._$AP)===null||Q===void 0||Q.call(this,A))}}class DQ{constructor(A,Q,B,C,J){this.type=1,this._$AH=_2,this._$AN=void 0,this.element=A,this.name=Q,this._$AM=C,this.options=J,B.length>2||B[0]!==""||B[1]!==""?(this._$AH=Array(B.length-1).fill(new String),this.strings=B):this._$AH=_2}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(A,Q=this,B,C){let J=this.strings,I=!1;if(J===void 0)A=l7(this,A,Q,0),I=!VQ(A)||A!==this._$AH&&A!==F5,I&&(this._$AH=A);else{let q=A,K,Y;for(A=J[0],K=0;K<J.length-1;K++)Y=l7(this,q[B+K],Q,K),Y===F5&&(Y=this._$AH[K]),I||(I=!VQ(Y)||Y!==this._$AH[K]),Y===_2?A=_2:A!==_2&&(A+=(Y!=null?Y:"")+J[K+1]),this._$AH[K]=Y}I&&!C&&this.j(A)}j(A){A===_2?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,A!=null?A:"")}}class Uw extends DQ{constructor(){super(...arguments),this.type=3}j(A){this.element[this.name]=A===_2?void 0:A}}var px=c7?c7.emptyScript:"";class zw extends DQ{constructor(){super(...arguments),this.type=4}j(A){A&&A!==_2?this.element.setAttribute(this.name,px):this.element.removeAttribute(this.name)}}class Dw extends DQ{constructor(A,Q,B,C,J){super(A,Q,B,C,J),this.type=5}_$AI(A,Q=this){var B;if((A=(B=l7(this,A,Q,0))!==null&&B!==void 0?B:_2)===F5)return;let C=this._$AH,J=A===_2&&C!==_2||A.capture!==C.capture||A.once!==C.once||A.passive!==C.passive,I=A!==_2&&(C===_2||J);J&&this.element.removeEventListener(this.name,this,C),I&&this.element.addEventListener(this.name,this,A),this._$AH=A}handleEvent(A){var Q,B;typeof this._$AH=="function"?this._$AH.call((B=(Q=this.options)===null||Q===void 0?void 0:Q.host)!==null&&B!==void 0?B:this.element,A):this._$AH.handleEvent(A)}}class Ew{constructor(A,Q,B){this.element=A,this.type=6,this._$AN=void 0,this._$AM=Q,this.options=B}get _$AU(){return this._$AM._$AU}_$AI(A){l7(this,A)}}var Zw=CI.litHtmlPolyfillSupport;Zw==null||Zw(UQ,zQ),((RH=CI.litHtmlVersions)!==null&&RH!==void 0?RH:CI.litHtmlVersions=[]).push("2.8.0");var JI=(A,Q,B)=>{var C,J;let I=(C=B==null?void 0:B.renderBefore)!==null&&C!==void 0?C:Q,q=I._$litPart$;if(q===void 0){let K=(J=B==null?void 0:B.renderBefore)!==null&&J!==void 0?J:null;I._$litPart$=q=new zQ(Q.insertBefore(FQ(),K),K,void 0,B!=null?B:{})}return q._$AI(A),q};var LH,MH;class EQ extends p4{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var A,Q;let B=super.createRenderRoot();return(A=(Q=this.renderOptions).renderBefore)!==null&&A!==void 0||(Q.renderBefore=B.firstChild),B}update(A){let Q=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(A),this._$Do=JI(Q,this.renderRoot,this.renderOptions)}connectedCallback(){var A;super.connectedCallback(),(A=this._$Do)===null||A===void 0||A.setConnected(!0)}disconnectedCallback(){var A;super.disconnectedCallback(),(A=this._$Do)===null||A===void 0||A.setConnected(!1)}render(){return F5}}EQ.finalized=!0,EQ._$litElement$=!0,(LH=globalThis.litElementHydrateSupport)===null||LH===void 0||LH.call(globalThis,{LitElement:EQ});var ww=globalThis.litElementPolyfillSupport;ww==null||ww({LitElement:EQ});((MH=globalThis.litElementVersions)!==null&&MH!==void 0?MH:globalThis.litElementVersions=[]).push("3.3.3");var OH=navigator.xr!=null&&self.XRSession!=null&&navigator.xr.isSessionSupported!=null,kH=OH&&self.XRSession.prototype.requestHitTestSource!=null,II=self.ResizeObserver!=null,qI=self.IntersectionObserver!=null,KI=kH,p40=(()=>{let A=navigator.userAgent||navigator.vendor||self.opera,Q=!1;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(A)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(A.substr(0,4)))Q=!0;return Q})(),m40=/\bCrOS\b/.test(navigator.userAgent),mx=/android/i.test(navigator.userAgent),Nw=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,d40=/Safari\//.test(navigator.userAgent),dx=/firefox/i.test(navigator.userAgent),cx=/OculusBrowser/.test(navigator.userAgent),c40=Nw&&/CriOS\//.test(navigator.userAgent);var $w=mx&&!dx&&!cx,lx=Boolean(window.webkit&&window.webkit.messageHandlers),PH=(()=>{if(Nw)if(!lx){let A=document.createElement("a");return Boolean(A.relList&&A.relList.supports&&A.relList.supports("ar"))}else return Boolean(/CriOS\/|EdgiOS\/|FxiOS\/|GSA\/|DuckDuckGo\//.test(navigator.userAgent));else return!1})();var YI=(A)=>!!A&&A!=="null"?sx(A):null,_H=()=>{if(KI)return;let A=[];if(!OH)A.push("WebXR Device API");if(!kH)A.push("WebXR Hit Test API");throw new Error(`The following APIs are required for AR, but are missing in this browser: ${A.join(", ")}`)},sx=(A)=>{return new URL(A,window.location.toString()).toString()},Rw=(A,Q)=>{let B=null,C=(...J)=>{if(B!=null)return;A(...J),B=self.setTimeout(()=>B=null,Q)};return C.flush=()=>{if(B!=null)self.clearTimeout(B),B=null},C},TH=(A,Q)=>{let B=null;return(...C)=>{if(B!=null)self.clearTimeout(B);B=self.setTimeout(()=>{B=null,A(...C)},Q)}};var d2=(A,Q,B)=>Math.max(Q,Math.min(B,A)),ix=1,wQ=(()=>{let A=(()=>{var Q;if((Q=document.documentElement.getAttribute("itemtype"))===null||Q===void 0?void 0:Q.includes("schema.org/SearchResultsPage"))return!0;let B=document.head!=null?Array.from(document.head.querySelectorAll("meta")):[];for(let C of B)if(C.name==="viewport")return!0;return!1})();if(!A)console.warn('No <meta name="viewport"> detected; <model-viewer> will cap pixel density at 1.');return()=>A?window.devicePixelRatio:ix})(),jH=(()=>{let Q=new RegExp("[?&]model-viewer-debug-mode(&|$)");return()=>self.ModelViewerElement&&self.ModelViewerElement.debugMode||self.location&&self.location.search&&self.location.search.match(Q)})(),Lw=(A=0)=>new Promise((Q)=>setTimeout(Q,A)),Mw=(A,Q,B=null)=>new Promise((C)=>{function J(I){if(!B||B(I))C(I),A.removeEventListener(Q,J)}A.addEventListener(Q,J)});var V5=function(A,Q,B,C){var J=arguments.length,I=J<3?Q:C===null?C=Object.getOwnPropertyDescriptor(Q,B):C,q;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")I=Reflect.decorate(A,Q,B,C);else for(var K=A.length-1;K>=0;K--)if(q=A[K])I=(J<3?q(I):J>3?q(Q,B,I):q(Q,B))||I;return J>3&&I&&Object.defineProperty(Q,B,I),I},nx=0.5,ox=0,ax=1,rx=1,s7=Symbol("currentEnvironmentMap"),i7=Symbol("currentBackground"),n7=Symbol("updateEnvironment"),ZI=Symbol("cancelEnvironmentUpdate"),Ow=(A)=>{var Q,B,C;class J extends A{constructor(){super(...arguments);this.environmentImage=null,this.skyboxImage=null,this.shadowIntensity=ox,this.shadowSoftness=ax,this.exposure=rx,this.toneMapping="auto",this.skyboxHeight="0",this[Q]=null,this[B]=null,this[C]=null}updated(I){if(super.updated(I),I.has("shadowIntensity"))this[W0].setShadowIntensity(this.shadowIntensity*nx),this[e1]();if(I.has("shadowSoftness"))this[W0].setShadowSoftness(this.shadowSoftness),this[e1]();if(I.has("exposure"))this[W0].exposure=this.exposure,this[e1]();if(I.has("toneMapping"))this[W0].toneMapping=this.toneMapping==="commerce"?yJ:this.toneMapping==="agx"?tD:g7,this[e1]();if((I.has("environmentImage")||I.has("skyboxImage"))&&this[w3]())this[n7]();if(I.has("skyboxHeight"))this[W0].setGroundedSkybox(),this[e1]()}hasBakedShadow(){return this[W0].bakedShadows.size>0}async[(Q=s7,B=i7,C=ZI,n7)](){let{skyboxImage:I,environmentImage:q}=this;if(this[ZI]!=null)this[ZI](),this[ZI]=null;let{textureUtils:K}=this[G1];if(K==null)return;let Y=this[G4].beginActivity("environment-update");try{let{environmentMap:Z,skybox:H}=await K.generateEnvironmentMapAndSkybox(YI(I),q,(G)=>Y(d2(G,0,1)));if(this[s7]!==Z)this[s7]=Z,this.dispatchEvent(new CustomEvent("environment-change"));if(H!=null)this[i7]=H.name===Z.name?Z:H;else this[i7]=null;this[W0].setEnvironmentAndSkybox(this[s7],this[i7])}catch(Z){if(Z instanceof Error)throw this[W0].setEnvironmentAndSkybox(null,null),Z}finally{Y(1)}}}return V5([f0({type:String,attribute:"environment-image"})],J.prototype,"environmentImage",void 0),V5([f0({type:String,attribute:"skybox-image"})],J.prototype,"skyboxImage",void 0),V5([f0({type:Number,attribute:"shadow-intensity"})],J.prototype,"shadowIntensity",void 0),V5([f0({type:Number,attribute:"shadow-softness"})],J.prototype,"shadowSoftness",void 0),V5([f0({type:Number})],J.prototype,"exposure",void 0),V5([f0({type:String,attribute:"tone-mapping"})],J.prototype,"toneMapping",void 0),V5([f0({type:String,attribute:"skybox-height"})],J.prototype,"skyboxHeight",void 0),J};var kw=Z6`
<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000">
    <!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement
         support for dynamic re-coloring of UI components -->
    <defs>
      <filter id="drop-shadow" x="-100%" y="-100%" width="300%" height="300%">
        <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>
        <feOffset dx="0" dy="0" result="offsetblur"/>
        <feFlood flood-color="#000000"/>
        <feComposite in2="offsetblur" operator="in"/>
        <feMerge>
          <feMergeNode/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>
    <path filter="url(#drop-shadow)" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`;var Pw=Z6`
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="36">
    <defs>
        <path id="A" d="M.001.232h24.997V36H.001z" />
    </defs>
    <g transform="translate(-11 -4)" fill="none" fill-rule="evenodd">
        <path fill-opacity="0" fill="#fff" d="M0 0h44v44H0z" />
        <g transform="translate(11 3)">
            <path d="M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z" fill-opacity=".5" fill="#e4e4e4" />
            <path d="M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91" fill-opacity=".6" fill="#000" />
            <path d="M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z" fill="#fff" />
            <g transform="translate(0 .769)">
                <mask id="B" fill="#fff">
                    <use xlink:href="#A" />
                </mask>
                <path d="M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325" fill-opacity=".05" fill="#000" mask="url(#B)" />
            </g>
        </g>
    </g>
</svg>`;var _w=Z6`
<svg version="1.1" id="view_x5F_in_x5F_AR_x5F_icon"
	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px"
	 viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
<rect id="Bounding_Box" x="0" y="0" fill="none" width="24" height="24"/>
<g id="Art_layer">
	<path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z"/>
	<path d="M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z"/>
	<path d="M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z"/>
	<path d="M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z"/>
	<g>
		<path d="M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3
			l5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62
			l4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z"/>
	</g>
</g>
</svg>`;var tx=Z6`
<style>
:host {
  display: block;
  position: relative;
  contain: strict;
  width: 300px;
  height: 150px;
}

.container {
  position: relative;
  overflow: hidden;
}

.userInput {
  width: 100%;
  height: 100%;
  display: none;
  position: relative;
  outline-offset: -1px;
  outline-width: 1px;
}

canvas {
  position: absolute;
  display: none;
  pointer-events: none;
  /* NOTE(cdata): Chrome 76 and below apparently have a bug
   * that causes our canvas not to display pixels unless it is
   * on its own render layer
   * @see https://github.com/google/model-viewer/pull/755#issuecomment-536597893
   */
  transform: translateZ(0);
}

.show {
  display: block;
}

/* Adapted from HTML5 Boilerplate
 *
 * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */
.screen-reader-only {
  border: 0;
  left: 0;
  top: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  white-space: nowrap;
  width: 1px;
  pointer-events: none;
}

.slot {
  position: absolute;
  pointer-events: none;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.slot > * {
  pointer-events: initial;
}

.annotation-wrapper ::slotted(*) {
  opacity: var(--max-hotspot-opacity, 1);
  transition: opacity 0.3s;
}

.pointer-tumbling .annotation-wrapper ::slotted(*) {
  pointer-events: none;
}

.annotation-wrapper ::slotted(*) {
  pointer-events: initial;
}

.annotation-wrapper.hide ::slotted(*) {
  opacity: var(--min-hotspot-opacity, 0.25);
}

.slot.poster {
  display: none;
  background-color: inherit;
}

.slot.poster.show {
  display: inherit;
}

.slot.poster > * {
  pointer-events: initial;
}

.slot.poster:not(.show) > * {
  pointer-events: none;
}

#default-poster {
  width: 100%;
  height: 100%;
  /* The default poster is a <button> so we need to set display
   * to prevent it from being affected by text-align: */
  display: block;
  position: absolute;
  border: none;
  padding: 0;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-color: #fff0;
}

#default-progress-bar {
  display: block;
  position: relative;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
}

#default-progress-bar > .bar {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--progress-bar-height, 5px);
  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));
  transition: transform 0.09s;
  transform-origin: top left;
  transform: scaleX(0);
  overflow: hidden;
}

#default-progress-bar > .bar.hide {
  transition: opacity 0.3s 1s;
  opacity: 0;
}

.centered {
  align-items: center;
  justify-content: center;
}

.cover {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.slot.interaction-prompt {
  display: var(--interaction-prompt-display, flex);
  overflow: hidden;
  opacity: 0;
  will-change: opacity;
  transition: opacity 0.3s;
}

.slot.interaction-prompt.visible {
  opacity: 1;
}

.animated-container {
  will-change: transform, opacity;
  opacity: 0;
  transition: opacity 0.3s;
}

.slot.interaction-prompt > * {
  pointer-events: none;
}

.slot.ar-button {
  -moz-user-select: none;
  -webkit-tap-highlight-color: transparent;
  user-select: none;

  display: var(--ar-button-display, block);
}

.slot.ar-button:not(.enabled) {
  display: none;
}

.fab {
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: 40px;
  height: 40px;
  cursor: pointer;
  background-color: #fff;
  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);
  border-radius: 100px;
}

.fab > * {
  opacity: 0.87;
}

#default-ar-button {
  position: absolute;
  bottom: 16px;
  right: 16px;
  transform: scale(var(--ar-button-scale, 1));
  transform-origin: bottom right;
}

.slot.pan-target {
  display: block;
  position: absolute;
  width: 0;
  height: 0;
  left: 50%;
  top: 50%;
  transform: translate3d(-50%, -50%, 0);
  background-color: transparent;
  opacity: 0;
  transition: opacity 0.3s;
}

#default-pan-target {
  width: 6px;
  height: 6px;
  border-radius: 6px;
  border: 1px solid white;
  box-shadow: 0px 0px 2px 1px rgba(0, 0, 0, 0.8);
}

.slot.default {
  pointer-events: none;
}

.slot.progress-bar {
  pointer-events: none;
}

.slot.exit-webxr-ar-button {
  pointer-events: none;
}

.slot.exit-webxr-ar-button:not(.enabled) {
  display: none;
}

#default-exit-webxr-ar-button {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: env(safe-area-inset-top, 16px);
  right: 16px;
  width: 40px;
  height: 40px;
  box-sizing: border-box;
}

#default-exit-webxr-ar-button > svg {
  fill: #fff;
}
</style>
<div class="container">
  <div class="userInput" tabindex="0" role="img"
      aria-label="3D model">
      <div class="slot canvas">
        <slot name="canvas">
          <canvas></canvas>
        </slot>
      </div>

  </div>

  <!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM
        will have their <slot> elements removed by ShadyCSS -->
  <div class="slot poster">
    <slot name="poster">
      <button type="button" id="default-poster" aria-hidden="true" aria-label="Loading 3D model"></button>
    </slot>
  </div>

  <div class="slot ar-button">
    <slot name="ar-button">
      <a id="default-ar-button" part="default-ar-button" class="fab"
          tabindex="2"
          role="button"
          href="javascript:void(0);"
          aria-label="View in your space">
        ${_w}
      </a>
    </slot>
  </div>

  <div class="slot pan-target">
    <slot name="pan-target">
      <div id="default-pan-target">
      </div>
    </slot>
  </div>

  <div class="slot interaction-prompt cover centered">
    <div id="prompt" class="animated-container">
      <slot name="interaction-prompt" aria-hidden="true">
        ${Pw}
      </slot>
    </div>
  </div>

  <div id="finger0" class="animated-container cover">
    <slot name="finger0" aria-hidden="true">
    </slot>
  </div>
  <div id="finger1" class="animated-container cover">
    <slot name="finger1" aria-hidden="true">
    </slot>
  </div>

  <div class="slot default">
    <slot></slot>

    <div class="slot progress-bar">
      <slot name="progress-bar">
        <div id="default-progress-bar" aria-hidden="true">
          <div class="bar" part="default-progress-bar"></div>
        </div>
      </slot>
    </div>

    <div class="slot exit-webxr-ar-button">
      <slot name="exit-webxr-ar-button">
        <a id="default-exit-webxr-ar-button" part="default-exit-webxr-ar-button"
            tabindex="3"
            aria-label="Exit AR"
            aria-hidden="true">
          ${kw}
        </a>
      </slot>
    </div>
  </div>
</div>
<div class="screen-reader-only" role="region" aria-label="Live announcements">
  <span id="status" role="status"></span>
</div>`,Tw=(A)=>{JI(tx,A)};var SH=new WeakMap;class yH extends m2{constructor(A){super(A);this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(A){return this.decoderPath=A,this}setDecoderConfig(A){return this.decoderConfig=A,this}setWorkerLimit(A){return this.workerLimit=A,this}load(A,Q,B,C){let J=new AA(this.manager);J.setPath(this.path),J.setResponseType("arraybuffer"),J.setRequestHeader(this.requestHeader),J.setWithCredentials(this.withCredentials),J.load(A,(I)=>{this.parse(I,Q,C)},B,C)}parse(A,Q,B=()=>{}){this.decodeDracoFile(A,Q,null,null,g1).catch(B)}decodeDracoFile(A,Q,B,C,J=f1,I=()=>{}){let q={attributeIDs:B||this.defaultAttributeIDs,attributeTypes:C||this.defaultAttributeTypes,useUniqueIDs:!!B,vertexColorSpace:J};return this.decodeGeometry(A,q).then(Q).catch(I)}decodeGeometry(A,Q){let B=JSON.stringify(Q);if(SH.has(A)){let K=SH.get(A);if(K.key===B)return K.promise;else if(A.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let C,J=this.workerNextTaskID++,I=A.byteLength,q=this._getWorker(J,I).then((K)=>{return C=K,new Promise((Y,Z)=>{C._callbacks[J]={resolve:Y,reject:Z},C.postMessage({type:"decode",id:J,taskConfig:Q,buffer:A},[A])})}).then((K)=>this._createGeometry(K.geometry));return q.catch(()=>!0).then(()=>{if(C&&J)this._releaseTask(C,J)}),SH.set(A,{key:B,promise:q}),q}_createGeometry(A){let Q=new k2;if(A.index)Q.setIndex(new T1(A.index.array,1));for(let B=0;B<A.attributes.length;B++){let C=A.attributes[B],J=C.name,I=C.array,q=C.itemSize,K=new T1(I,q);if(J==="color")this._assignVertexColorSpace(K,C.vertexColorSpace),K.normalized=I instanceof Float32Array===!1;Q.setAttribute(J,K)}return Q}_assignVertexColorSpace(A,Q){if(Q!==g1)return;let B=new p0;for(let C=0,J=A.count;C<J;C++)B.fromBufferAttribute(A,C).convertSRGBToLinear(),A.setXYZ(C,B.r,B.g,B.b)}_loadLibrary(A,Q){let B=new AA(this.manager);return B.setPath(this.decoderPath),B.setResponseType(Q),B.setWithCredentials(this.withCredentials),new Promise((C,J)=>{B.load(A,C,void 0,J)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let A=typeof WebAssembly!=="object"||this.decoderConfig.type==="js",Q=[];if(A)Q.push(this._loadLibrary("draco_decoder.js","text"));else Q.push(this._loadLibrary("draco_wasm_wrapper.js","text")),Q.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"));return this.decoderPending=Promise.all(Q).then((B)=>{let C=B[0];if(!A)this.decoderConfig.wasmBinary=B[1];let J=ex.toString(),I=["/* draco decoder */",C,"","/* worker */",J.substring(J.indexOf("{")+1,J.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([I]))}),this.decoderPending}_getWorker(A,Q){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let C=new Worker(this.workerSourceURL);C._callbacks={},C._taskCosts={},C._taskLoad=0,C.postMessage({type:"init",decoderConfig:this.decoderConfig}),C.onmessage=function(J){let I=J.data;switch(I.type){case"decode":C._callbacks[I.id].resolve(I);break;case"error":C._callbacks[I.id].reject(I);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+I.type+'"')}},this.workerPool.push(C)}else this.workerPool.sort(function(C,J){return C._taskLoad>J._taskLoad?-1:1});let B=this.workerPool[this.workerPool.length-1];return B._taskCosts[A]=Q,B._taskLoad+=Q,B})}_releaseTask(A,Q){A._taskLoad-=A._taskCosts[Q],delete A._callbacks[Q],delete A._taskCosts[Q]}debug(){console.log("Task load: ",this.workerPool.map((A)=>A._taskLoad))}dispose(){for(let A=0;A<this.workerPool.length;++A)this.workerPool[A].terminate();if(this.workerPool.length=0,this.workerSourceURL!=="")URL.revokeObjectURL(this.workerSourceURL);return this}}function ex(){let A,Q;onmessage=function(q){let K=q.data;switch(K.type){case"init":A=K.decoderConfig,Q=new Promise(function(H){A.onModuleLoaded=function(G){H({draco:G})},DracoDecoderModule(A)});break;case"decode":let{buffer:Y,taskConfig:Z}=K;Q.then((H)=>{let G=H.draco,W=new G.Decoder;try{let F=B(G,W,new Int8Array(Y),Z),z=F.attributes.map((U)=>U.array.buffer);if(F.index)z.push(F.index.array.buffer);self.postMessage({type:"decode",id:K.id,geometry:F},z)}catch(F){console.error(F),self.postMessage({type:"error",id:K.id,error:F.message})}finally{G.destroy(W)}});break}};function B(q,K,Y,Z){let{attributeIDs:H,attributeTypes:G}=Z,W,F,z=K.GetEncodedGeometryType(Y);if(z===q.TRIANGULAR_MESH)W=new q.Mesh,F=K.DecodeArrayToMesh(Y,Y.byteLength,W);else if(z===q.POINT_CLOUD)W=new q.PointCloud,F=K.DecodeArrayToPointCloud(Y,Y.byteLength,W);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!F.ok()||W.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+F.error_msg());let U={index:null,attributes:[]};for(let E in H){let w=self[G[E]],L,X;if(Z.useUniqueIDs)X=H[E],L=K.GetAttributeByUniqueId(W,X);else{if(X=K.GetAttributeId(W,q[H[E]]),X===-1)continue;L=K.GetAttribute(W,X)}let V=J(q,K,W,E,w,L);if(E==="color")V.vertexColorSpace=Z.vertexColorSpace;U.attributes.push(V)}if(z===q.TRIANGULAR_MESH)U.index=C(q,K,W);return q.destroy(W),U}function C(q,K,Y){let H=Y.num_faces()*3,G=H*4,W=q._malloc(G);K.GetTrianglesUInt32Array(Y,G,W);let F=new Uint32Array(q.HEAPF32.buffer,W,H).slice();return q._free(W),{array:F,itemSize:1}}function J(q,K,Y,Z,H,G){let W=G.num_components(),z=Y.num_points()*W,U=z*H.BYTES_PER_ELEMENT,E=I(q,H),w=q._malloc(U);K.GetAttributeDataArrayForAllPoints(Y,G,E,U,w);let L=new H(q.HEAPF32.buffer,w,z).slice();return q._free(w),{name:Z,array:L,itemSize:W}}function I(q,K){switch(K){case Float32Array:return q.DT_FLOAT32;case Int8Array:return q.DT_INT8;case Int16Array:return q.DT_INT16;case Int32Array:return q.DT_INT32;case Uint8Array:return q.DT_UINT8;case Uint16Array:return q.DT_UINT16;case Uint32Array:return q.DT_UINT32}}}function fH(A,Q){if(Q===FE)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),A;if(Q===CQ||Q===gJ){let B=A.getIndex();if(B===null){let q=[],K=A.getAttribute("position");if(K!==void 0){for(let Y=0;Y<K.count;Y++)q.push(Y);A.setIndex(q),B=A.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),A}let C=B.count-2,J=[];if(Q===CQ)for(let q=1;q<=C;q++)J.push(B.getX(0)),J.push(B.getX(q)),J.push(B.getX(q+1));else for(let q=0;q<C;q++)if(q%2===0)J.push(B.getX(q)),J.push(B.getX(q+1)),J.push(B.getX(q+2));else J.push(B.getX(q+2)),J.push(B.getX(q+1)),J.push(B.getX(q));if(J.length/3!==C)console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let I=A.clone();return I.setIndex(J),I.clearGroups(),I}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",Q),A}class uH extends m2{constructor(A){super(A);this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(Q){return new vw(Q)}),this.register(function(Q){return new iw(Q)}),this.register(function(Q){return new nw(Q)}),this.register(function(Q){return new ow(Q)}),this.register(function(Q){return new uw(Q)}),this.register(function(Q){return new pw(Q)}),this.register(function(Q){return new mw(Q)}),this.register(function(Q){return new dw(Q)}),this.register(function(Q){return new gw(Q)}),this.register(function(Q){return new cw(Q)}),this.register(function(Q){return new bw(Q)}),this.register(function(Q){return new sw(Q)}),this.register(function(Q){return new lw(Q)}),this.register(function(Q){return new hw(Q)}),this.register(function(Q){return new aw(Q)}),this.register(function(Q){return new rw(Q)})}load(A,Q,B,C){let J=this,I;if(this.resourcePath!=="")I=this.resourcePath;else if(this.path!==""){let Y=H5.extractUrlBase(A);I=H5.resolveURL(Y,this.path)}else I=H5.extractUrlBase(A);this.manager.itemStart(A);let q=function(Y){if(C)C(Y);else console.error(Y);J.manager.itemError(A),J.manager.itemEnd(A)},K=new AA(this.manager);K.setPath(this.path),K.setResponseType("arraybuffer"),K.setRequestHeader(this.requestHeader),K.setWithCredentials(this.withCredentials),K.load(A,function(Y){try{J.parse(Y,I,function(Z){Q(Z),J.manager.itemEnd(A)},q)}catch(Z){q(Z)}},B,q)}setDRACOLoader(A){return this.dracoLoader=A,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(A){return this.ktx2Loader=A,this}setMeshoptDecoder(A){return this.meshoptDecoder=A,this}register(A){if(this.pluginCallbacks.indexOf(A)===-1)this.pluginCallbacks.push(A);return this}unregister(A){if(this.pluginCallbacks.indexOf(A)!==-1)this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(A),1);return this}parse(A,Q,B,C){let J,I={},q={},K=new TextDecoder;if(typeof A==="string")J=JSON.parse(A);else if(A instanceof ArrayBuffer)if(K.decode(new Uint8Array(A,0,4))===tw){try{I[F1.KHR_BINARY_GLTF]=new ew(A)}catch(H){if(C)C(H);return}J=JSON.parse(I[F1.KHR_BINARY_GLTF].content)}else J=JSON.parse(K.decode(A));else J=A;if(J.asset===void 0||J.asset.version[0]<2){if(C)C(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let Y=new JN(J,{path:Q||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});Y.fileLoader.setRequestHeader(this.requestHeader);for(let Z=0;Z<this.pluginCallbacks.length;Z++){let H=this.pluginCallbacks[Z](Y);if(!H.name)console.error("THREE.GLTFLoader: Invalid plugin found: missing name");q[H.name]=H,I[H.name]=!0}if(J.extensionsUsed)for(let Z=0;Z<J.extensionsUsed.length;++Z){let H=J.extensionsUsed[Z],G=J.extensionsRequired||[];switch(H){case F1.KHR_MATERIALS_UNLIT:I[H]=new xw;break;case F1.KHR_DRACO_MESH_COMPRESSION:I[H]=new AN(J,this.dracoLoader);break;case F1.KHR_TEXTURE_TRANSFORM:I[H]=new QN;break;case F1.KHR_MESH_QUANTIZATION:I[H]=new BN;break;default:if(G.indexOf(H)>=0&&q[H]===void 0)console.warn('THREE.GLTFLoader: Unknown extension "'+H+'".')}}Y.setExtensions(I),Y.setPlugins(q),Y.parse(B,C)}parseAsync(A,Q){let B=this;return new Promise(function(C,J){B.parse(A,Q,C,J)})}}function Ag(){let A={};return{get:function(Q){return A[Q]},add:function(Q,B){A[Q]=B},remove:function(Q){delete A[Q]},removeAll:function(){A={}}}}var F1={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class hw{constructor(A){this.parser=A,this.name=F1.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let A=this.parser,Q=this.parser.json.nodes||[];for(let B=0,C=Q.length;B<C;B++){let J=Q[B];if(J.extensions&&J.extensions[this.name]&&J.extensions[this.name].light!==void 0)A._addNodeRef(this.cache,J.extensions[this.name].light)}}_loadLight(A){let Q=this.parser,B="light:"+A,C=Q.cache.get(B);if(C)return C;let J=Q.json,K=((J.extensions&&J.extensions[this.name]||{}).lights||[])[A],Y,Z=new p0(16777215);if(K.color!==void 0)Z.setRGB(K.color[0],K.color[1],K.color[2],f1);let H=K.range!==void 0?K.range:0;switch(K.type){case"directional":Y=new GQ(Z),Y.target.position.set(0,0,-1),Y.add(Y.target);break;case"point":Y=new XQ(Z),Y.distance=H;break;case"spot":Y=new XH(Z),Y.distance=H,K.spot=K.spot||{},K.spot.innerConeAngle=K.spot.innerConeAngle!==void 0?K.spot.innerConeAngle:0,K.spot.outerConeAngle=K.spot.outerConeAngle!==void 0?K.spot.outerConeAngle:Math.PI/4,Y.angle=K.spot.outerConeAngle,Y.penumbra=1-K.spot.innerConeAngle/K.spot.outerConeAngle,Y.target.position.set(0,0,-1),Y.add(Y.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+K.type)}if(Y.position.set(0,0,0),Y.decay=2,X6(Y,K),K.intensity!==void 0)Y.intensity=K.intensity;return Y.name=Q.createUniqueName(K.name||"light_"+A),C=Promise.resolve(Y),Q.cache.add(B,C),C}getDependency(A,Q){if(A!=="light")return;return this._loadLight(Q)}createNodeAttachment(A){let Q=this,B=this.parser,J=B.json.nodes[A],q=(J.extensions&&J.extensions[this.name]||{}).light;if(q===void 0)return null;return this._loadLight(q).then(function(K){return B._getNodeRef(Q.cache,q,K)})}}class xw{constructor(){this.name=F1.KHR_MATERIALS_UNLIT}getMaterialType(){return t1}extendParams(A,Q,B){let C=[];A.color=new p0(1,1,1),A.opacity=1;let J=Q.pbrMetallicRoughness;if(J){if(Array.isArray(J.baseColorFactor)){let I=J.baseColorFactor;A.color.setRGB(I[0],I[1],I[2],f1),A.opacity=I[3]}if(J.baseColorTexture!==void 0)C.push(B.assignTexture(A,"map",J.baseColorTexture,g1))}return Promise.all(C)}}class gw{constructor(A){this.parser=A,this.name=F1.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(A,Q){let C=this.parser.json.materials[A];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();let J=C.extensions[this.name].emissiveStrength;if(J!==void 0)Q.emissiveIntensity=J;return Promise.resolve()}}class vw{constructor(A){this.parser=A,this.name=F1.KHR_MATERIALS_CLEARCOAT}getMaterialType(A){let B=this.parser.json.materials[A];if(!B.extensions||!B.extensions[this.name])return null;return H4}extendMaterialParams(A,Q){let B=this.parser,C=B.json.materials[A];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();let J=[],I=C.extensions[this.name];if(I.clearcoatFactor!==void 0)Q.clearcoat=I.clearcoatFactor;if(I.clearcoatTexture!==void 0)J.push(B.assignTexture(Q,"clearcoatMap",I.clearcoatTexture));if(I.clearcoatRoughnessFactor!==void 0)Q.clearcoatRoughness=I.clearcoatRoughnessFactor;if(I.clearcoatRoughnessTexture!==void 0)J.push(B.assignTexture(Q,"clearcoatRoughnessMap",I.clearcoatRoughnessTexture));if(I.clearcoatNormalTexture!==void 0){if(J.push(B.assignTexture(Q,"clearcoatNormalMap",I.clearcoatNormalTexture)),I.clearcoatNormalTexture.scale!==void 0){let q=I.clearcoatNormalTexture.scale;Q.clearcoatNormalScale=new M0(q,q)}}return Promise.all(J)}}class bw{constructor(A){this.parser=A,this.name=F1.KHR_MATERIALS_IRIDESCENCE}getMaterialType(A){let B=this.parser.json.materials[A];if(!B.extensions||!B.extensions[this.name])return null;return H4}extendMaterialParams(A,Q){let B=this.parser,C=B.json.materials[A];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();let J=[],I=C.extensions[this.name];if(I.iridescenceFactor!==void 0)Q.iridescence=I.iridescenceFactor;if(I.iridescenceTexture!==void 0)J.push(B.assignTexture(Q,"iridescenceMap",I.iridescenceTexture));if(I.iridescenceIor!==void 0)Q.iridescenceIOR=I.iridescenceIor;if(Q.iridescenceThicknessRange===void 0)Q.iridescenceThicknessRange=[100,400];if(I.iridescenceThicknessMinimum!==void 0)Q.iridescenceThicknessRange[0]=I.iridescenceThicknessMinimum;if(I.iridescenceThicknessMaximum!==void 0)Q.iridescenceThicknessRange[1]=I.iridescenceThicknessMaximum;if(I.iridescenceThicknessTexture!==void 0)J.push(B.assignTexture(Q,"iridescenceThicknessMap",I.iridescenceThicknessTexture));return Promise.all(J)}}class uw{constructor(A){this.parser=A,this.name=F1.KHR_MATERIALS_SHEEN}getMaterialType(A){let B=this.parser.json.materials[A];if(!B.extensions||!B.extensions[this.name])return null;return H4}extendMaterialParams(A,Q){let B=this.parser,C=B.json.materials[A];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();let J=[];Q.sheenColor=new p0(0,0,0),Q.sheenRoughness=0,Q.sheen=1;let I=C.extensions[this.name];if(I.sheenColorFactor!==void 0){let q=I.sheenColorFactor;Q.sheenColor.setRGB(q[0],q[1],q[2],f1)}if(I.sheenRoughnessFactor!==void 0)Q.sheenRoughness=I.sheenRoughnessFactor;if(I.sheenColorTexture!==void 0)J.push(B.assignTexture(Q,"sheenColorMap",I.sheenColorTexture,g1));if(I.sheenRoughnessTexture!==void 0)J.push(B.assignTexture(Q,"sheenRoughnessMap",I.sheenRoughnessTexture));return Promise.all(J)}}class pw{constructor(A){this.parser=A,this.name=F1.KHR_MATERIALS_TRANSMISSION}getMaterialType(A){let B=this.parser.json.materials[A];if(!B.extensions||!B.extensions[this.name])return null;return H4}extendMaterialParams(A,Q){let B=this.parser,C=B.json.materials[A];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();let J=[],I=C.extensions[this.name];if(I.transmissionFactor!==void 0)Q.transmission=I.transmissionFactor;if(I.transmissionTexture!==void 0)J.push(B.assignTexture(Q,"transmissionMap",I.transmissionTexture));return Promise.all(J)}}class mw{constructor(A){this.parser=A,this.name=F1.KHR_MATERIALS_VOLUME}getMaterialType(A){let B=this.parser.json.materials[A];if(!B.extensions||!B.extensions[this.name])return null;return H4}extendMaterialParams(A,Q){let B=this.parser,C=B.json.materials[A];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();let J=[],I=C.extensions[this.name];if(Q.thickness=I.thicknessFactor!==void 0?I.thicknessFactor:0,I.thicknessTexture!==void 0)J.push(B.assignTexture(Q,"thicknessMap",I.thicknessTexture));Q.attenuationDistance=I.attenuationDistance||1/0;let q=I.attenuationColor||[1,1,1];return Q.attenuationColor=new p0().setRGB(q[0],q[1],q[2],f1),Promise.all(J)}}class dw{constructor(A){this.parser=A,this.name=F1.KHR_MATERIALS_IOR}getMaterialType(A){let B=this.parser.json.materials[A];if(!B.extensions||!B.extensions[this.name])return null;return H4}extendMaterialParams(A,Q){let C=this.parser.json.materials[A];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();let J=C.extensions[this.name];return Q.ior=J.ior!==void 0?J.ior:1.5,Promise.resolve()}}class cw{constructor(A){this.parser=A,this.name=F1.KHR_MATERIALS_SPECULAR}getMaterialType(A){let B=this.parser.json.materials[A];if(!B.extensions||!B.extensions[this.name])return null;return H4}extendMaterialParams(A,Q){let B=this.parser,C=B.json.materials[A];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();let J=[],I=C.extensions[this.name];if(Q.specularIntensity=I.specularFactor!==void 0?I.specularFactor:1,I.specularTexture!==void 0)J.push(B.assignTexture(Q,"specularIntensityMap",I.specularTexture));let q=I.specularColorFactor||[1,1,1];if(Q.specularColor=new p0().setRGB(q[0],q[1],q[2],f1),I.specularColorTexture!==void 0)J.push(B.assignTexture(Q,"specularColorMap",I.specularColorTexture,g1));return Promise.all(J)}}class lw{constructor(A){this.parser=A,this.name=F1.EXT_MATERIALS_BUMP}getMaterialType(A){let B=this.parser.json.materials[A];if(!B.extensions||!B.extensions[this.name])return null;return H4}extendMaterialParams(A,Q){let B=this.parser,C=B.json.materials[A];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();let J=[],I=C.extensions[this.name];if(Q.bumpScale=I.bumpFactor!==void 0?I.bumpFactor:1,I.bumpTexture!==void 0)J.push(B.assignTexture(Q,"bumpMap",I.bumpTexture));return Promise.all(J)}}class sw{constructor(A){this.parser=A,this.name=F1.KHR_MATERIALS_ANISOTROPY}getMaterialType(A){let B=this.parser.json.materials[A];if(!B.extensions||!B.extensions[this.name])return null;return H4}extendMaterialParams(A,Q){let B=this.parser,C=B.json.materials[A];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();let J=[],I=C.extensions[this.name];if(I.anisotropyStrength!==void 0)Q.anisotropy=I.anisotropyStrength;if(I.anisotropyRotation!==void 0)Q.anisotropyRotation=I.anisotropyRotation;if(I.anisotropyTexture!==void 0)J.push(B.assignTexture(Q,"anisotropyMap",I.anisotropyTexture));return Promise.all(J)}}class iw{constructor(A){this.parser=A,this.name=F1.KHR_TEXTURE_BASISU}loadTexture(A){let Q=this.parser,B=Q.json,C=B.textures[A];if(!C.extensions||!C.extensions[this.name])return null;let J=C.extensions[this.name],I=Q.options.ktx2Loader;if(!I)if(B.extensionsRequired&&B.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");else return null;return Q.loadTextureImage(A,J.source,I)}}class nw{constructor(A){this.parser=A,this.name=F1.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(A){let Q=this.name,B=this.parser,C=B.json,J=C.textures[A];if(!J.extensions||!J.extensions[Q])return null;let I=J.extensions[Q],q=C.images[I.source],K=B.textureLoader;if(q.uri){let Y=B.options.manager.getHandler(q.uri);if(Y!==null)K=Y}return this.detectSupport().then(function(Y){if(Y)return B.loadTextureImage(A,I.source,K);if(C.extensionsRequired&&C.extensionsRequired.indexOf(Q)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return B.loadTexture(A)})}detectSupport(){if(!this.isSupported)this.isSupported=new Promise(function(A){let Q=new Image;Q.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",Q.onload=Q.onerror=function(){A(Q.height===1)}});return this.isSupported}}class ow{constructor(A){this.parser=A,this.name=F1.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(A){let Q=this.name,B=this.parser,C=B.json,J=C.textures[A];if(!J.extensions||!J.extensions[Q])return null;let I=J.extensions[Q],q=C.images[I.source],K=B.textureLoader;if(q.uri){let Y=B.options.manager.getHandler(q.uri);if(Y!==null)K=Y}return this.detectSupport().then(function(Y){if(Y)return B.loadTextureImage(A,I.source,K);if(C.extensionsRequired&&C.extensionsRequired.indexOf(Q)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return B.loadTexture(A)})}detectSupport(){if(!this.isSupported)this.isSupported=new Promise(function(A){let Q=new Image;Q.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",Q.onload=Q.onerror=function(){A(Q.height===1)}});return this.isSupported}}class aw{constructor(A){this.name=F1.EXT_MESHOPT_COMPRESSION,this.parser=A}loadBufferView(A){let Q=this.parser.json,B=Q.bufferViews[A];if(B.extensions&&B.extensions[this.name]){let C=B.extensions[this.name],J=this.parser.getDependency("buffer",C.buffer),I=this.parser.options.meshoptDecoder;if(!I||!I.supported)if(Q.extensionsRequired&&Q.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");else return null;return J.then(function(q){let K=C.byteOffset||0,Y=C.byteLength||0,Z=C.count,H=C.byteStride,G=new Uint8Array(q,K,Y);if(I.decodeGltfBufferAsync)return I.decodeGltfBufferAsync(Z,H,G,C.mode,C.filter).then(function(W){return W.buffer});else return I.ready.then(function(){let W=new ArrayBuffer(Z*H);return I.decodeGltfBuffer(new Uint8Array(W),Z,H,G,C.mode,C.filter),W})})}else return null}}class rw{constructor(A){this.name=F1.EXT_MESH_GPU_INSTANCING,this.parser=A}createNodeMesh(A){let Q=this.parser.json,B=Q.nodes[A];if(!B.extensions||!B.extensions[this.name]||B.mesh===void 0)return null;let C=Q.meshes[B.mesh];for(let Y of C.primitives)if(Y.mode!==pA.TRIANGLES&&Y.mode!==pA.TRIANGLE_STRIP&&Y.mode!==pA.TRIANGLE_FAN&&Y.mode!==void 0)return null;let I=B.extensions[this.name].attributes,q=[],K={};for(let Y in I)q.push(this.parser.getDependency("accessor",I[Y]).then((Z)=>{return K[Y]=Z,K[Y]}));if(q.length<1)return null;return q.push(this.parser.createNodeMesh(A)),Promise.all(q).then((Y)=>{let Z=Y.pop(),H=Z.isGroup?Z.children:[Z],G=Y[0].count,W=[];for(let F of H){let z=new h0,U=new p,E=new n1,w=new p(1,1,1),L=new QH(F.geometry,F.material,G);for(let X=0;X<G;X++){if(K.TRANSLATION)U.fromBufferAttribute(K.TRANSLATION,X);if(K.ROTATION)E.fromBufferAttribute(K.ROTATION,X);if(K.SCALE)w.fromBufferAttribute(K.SCALE,X);L.setMatrixAt(X,z.compose(U,E,w))}for(let X in K)if(X==="_COLOR_0"){let V=K[X];L.instanceColor=new y7(V.array,V.itemSize,V.normalized)}else if(X!=="TRANSLATION"&&X!=="ROTATION"&&X!=="SCALE")F.geometry.setAttribute(X,K[X]);L1.prototype.copy.call(L,F),this.parser.assignFinalMaterial(L),W.push(L)}if(Z.isGroup)return Z.clear(),Z.add(...W),Z;return W[0]})}}var tw="glTF",NQ=12,jw={JSON:1313821514,BIN:5130562};class ew{constructor(A){this.name=F1.KHR_BINARY_GLTF,this.content=null,this.body=null;let Q=new DataView(A,0,NQ),B=new TextDecoder;if(this.header={magic:B.decode(new Uint8Array(A.slice(0,4))),version:Q.getUint32(4,!0),length:Q.getUint32(8,!0)},this.header.magic!==tw)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");else if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");let C=this.header.length-NQ,J=new DataView(A,NQ),I=0;while(I<C){let q=J.getUint32(I,!0);I+=4;let K=J.getUint32(I,!0);if(I+=4,K===jw.JSON){let Y=new Uint8Array(A,NQ+I,q);this.content=B.decode(Y)}else if(K===jw.BIN){let Y=NQ+I;this.body=A.slice(Y,Y+q)}I+=q}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class AN{constructor(A,Q){if(!Q)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=F1.KHR_DRACO_MESH_COMPRESSION,this.json=A,this.dracoLoader=Q,this.dracoLoader.preload()}decodePrimitive(A,Q){let B=this.json,C=this.dracoLoader,J=A.extensions[this.name].bufferView,I=A.extensions[this.name].attributes,q={},K={},Y={};for(let Z in I){let H=vH[Z]||Z.toLowerCase();q[H]=I[Z]}for(let Z in A.attributes){let H=vH[Z]||Z.toLowerCase();if(I[Z]!==void 0){let G=B.accessors[A.attributes[Z]],W=o7[G.componentType];Y[H]=W.name,K[H]=G.normalized===!0}}return Q.getDependency("bufferView",J).then(function(Z){return new Promise(function(H,G){C.decodeDracoFile(Z,function(W){for(let F in W.attributes){let z=W.attributes[F],U=K[F];if(U!==void 0)z.normalized=U}H(W)},q,Y,f1,G)})})}}class QN{constructor(){this.name=F1.KHR_TEXTURE_TRANSFORM}extendTexture(A,Q){if((Q.texCoord===void 0||Q.texCoord===A.channel)&&Q.offset===void 0&&Q.rotation===void 0&&Q.scale===void 0)return A;if(A=A.clone(),Q.texCoord!==void 0)A.channel=Q.texCoord;if(Q.offset!==void 0)A.offset.fromArray(Q.offset);if(Q.rotation!==void 0)A.rotation=Q.rotation;if(Q.scale!==void 0)A.repeat.fromArray(Q.scale);return A.needsUpdate=!0,A}}class BN{constructor(){this.name=F1.KHR_MESH_QUANTIZATION}}class pH extends q5{constructor(A,Q,B,C){super(A,Q,B,C)}copySampleValue_(A){let Q=this.resultBuffer,B=this.sampleValues,C=this.valueSize,J=A*C*3+C;for(let I=0;I!==C;I++)Q[I]=B[J+I];return Q}interpolate_(A,Q,B,C){let J=this.resultBuffer,I=this.sampleValues,q=this.valueSize,K=q*2,Y=q*3,Z=C-Q,H=(B-Q)/Z,G=H*H,W=G*H,F=A*Y,z=F-Y,U=-2*W+3*G,E=W-G,w=1-U,L=E-G+H;for(let X=0;X!==q;X++){let V=I[z+X+q],D=I[z+X+K]*Z,N=I[F+X+q],R=I[F+X]*Z;J[X]=w*V+L*D+U*N+E*R}return J}}var Qg=new n1;class CN extends pH{interpolate_(A,Q,B,C){let J=super.interpolate_(A,Q,B,C);return Qg.fromArray(J).normalize().toArray(J),J}}var pA={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},o7={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Sw={9728:h4,9729:c1,9984:B5,9985:J5,9986:C5,9987:x4},yw={33071:S2,33648:Q5,10497:uA},hH={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},vH={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},H6={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Bg={CUBICSPLINE:void 0,LINEAR:BQ,STEP:xJ},xH={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Cg(A){if(A.DefaultMaterial===void 0)A.DefaultMaterial=new K6({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:h7});return A.DefaultMaterial}function U5(A,Q,B){for(let C in B.extensions)if(A[C]===void 0)Q.userData.gltfExtensions=Q.userData.gltfExtensions||{},Q.userData.gltfExtensions[C]=B.extensions[C]}function X6(A,Q){if(Q.extras!==void 0)if(typeof Q.extras==="object")Object.assign(A.userData,Q.extras);else console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+Q.extras)}function Jg(A,Q,B){let C=!1,J=!1,I=!1;for(let Z=0,H=Q.length;Z<H;Z++){let G=Q[Z];if(G.POSITION!==void 0)C=!0;if(G.NORMAL!==void 0)J=!0;if(G.COLOR_0!==void 0)I=!0;if(C&&J&&I)break}if(!C&&!J&&!I)return Promise.resolve(A);let q=[],K=[],Y=[];for(let Z=0,H=Q.length;Z<H;Z++){let G=Q[Z];if(C){let W=G.POSITION!==void 0?B.getDependency("accessor",G.POSITION):A.attributes.position;q.push(W)}if(J){let W=G.NORMAL!==void 0?B.getDependency("accessor",G.NORMAL):A.attributes.normal;K.push(W)}if(I){let W=G.COLOR_0!==void 0?B.getDependency("accessor",G.COLOR_0):A.attributes.color;Y.push(W)}}return Promise.all([Promise.all(q),Promise.all(K),Promise.all(Y)]).then(function(Z){let H=Z[0],G=Z[1],W=Z[2];if(C)A.morphAttributes.position=H;if(J)A.morphAttributes.normal=G;if(I)A.morphAttributes.color=W;return A.morphTargetsRelative=!0,A})}function Ig(A,Q){if(A.updateMorphTargets(),Q.weights!==void 0)for(let B=0,C=Q.weights.length;B<C;B++)A.morphTargetInfluences[B]=Q.weights[B];if(Q.extras&&Array.isArray(Q.extras.targetNames)){let B=Q.extras.targetNames;if(A.morphTargetInfluences.length===B.length){A.morphTargetDictionary={};for(let C=0,J=B.length;C<J;C++)A.morphTargetDictionary[B[C]]=C}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function qg(A){let Q,B=A.extensions&&A.extensions[F1.KHR_DRACO_MESH_COMPRESSION];if(B)Q="draco:"+B.bufferView+":"+B.indices+":"+gH(B.attributes);else Q=A.indices+":"+gH(A.attributes)+":"+A.mode;if(A.targets!==void 0)for(let C=0,J=A.targets.length;C<J;C++)Q+=":"+gH(A.targets[C]);return Q}function gH(A){let Q="",B=Object.keys(A).sort();for(let C=0,J=B.length;C<J;C++)Q+=B[C]+":"+A[B[C]]+";";return Q}function bH(A){switch(A){case Int8Array:return 0.007874015748031496;case Uint8Array:return 0.00392156862745098;case Int16Array:return 0.00003051850947599719;case Uint16Array:return 0.000015259021896696422;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Kg(A){if(A.search(/\.jpe?g($|\?)/i)>0||A.search(/^data\:image\/jpeg/)===0)return"image/jpeg";if(A.search(/\.webp($|\?)/i)>0||A.search(/^data\:image\/webp/)===0)return"image/webp";return"image/png"}var Yg=new h0;class JN{constructor(A={},Q={}){this.json=A,this.extensions={},this.plugins={},this.options=Q,this.cache=new Ag,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let B=!1,C=!1,J=-1;if(typeof navigator!=="undefined")B=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,C=navigator.userAgent.indexOf("Firefox")>-1,J=C?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;if(typeof createImageBitmap==="undefined"||B||C&&J<98)this.textureLoader=new Z5(this.options.manager);else this.textureLoader=new WH(this.options.manager);if(this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new AA(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials")this.fileLoader.setWithCredentials(!0)}setExtensions(A){this.extensions=A}setPlugins(A){this.plugins=A}parse(A,Q){let B=this,C=this.json,J=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(I){return I._markDefs&&I._markDefs()}),Promise.all(this._invokeAll(function(I){return I.beforeRoot&&I.beforeRoot()})).then(function(){return Promise.all([B.getDependencies("scene"),B.getDependencies("animation"),B.getDependencies("camera")])}).then(function(I){let q={scene:I[0][C.scene||0],scenes:I[0],animations:I[1],cameras:I[2],asset:C.asset,parser:B,userData:{}};return U5(J,q,C),X6(q,C),Promise.all(B._invokeAll(function(K){return K.afterRoot&&K.afterRoot(q)})).then(function(){A(q)})}).catch(Q)}_markDefs(){let A=this.json.nodes||[],Q=this.json.skins||[],B=this.json.meshes||[];for(let C=0,J=Q.length;C<J;C++){let I=Q[C].joints;for(let q=0,K=I.length;q<K;q++)A[I[q]].isBone=!0}for(let C=0,J=A.length;C<J;C++){let I=A[C];if(I.mesh!==void 0){if(this._addNodeRef(this.meshCache,I.mesh),I.skin!==void 0)B[I.mesh].isSkinnedMesh=!0}if(I.camera!==void 0)this._addNodeRef(this.cameraCache,I.camera)}}_addNodeRef(A,Q){if(Q===void 0)return;if(A.refs[Q]===void 0)A.refs[Q]=A.uses[Q]=0;A.refs[Q]++}_getNodeRef(A,Q,B){if(A.refs[Q]<=1)return B;let C=B.clone(),J=(I,q)=>{let K=this.associations.get(I);if(K!=null)this.associations.set(q,K);for(let[Y,Z]of I.children.entries())J(Z,q.children[Y])};return J(B,C),C.name+="_instance_"+A.uses[Q]++,C}_invokeOne(A){let Q=Object.values(this.plugins);Q.push(this);for(let B=0;B<Q.length;B++){let C=A(Q[B]);if(C)return C}return null}_invokeAll(A){let Q=Object.values(this.plugins);Q.unshift(this);let B=[];for(let C=0;C<Q.length;C++){let J=A(Q[C]);if(J)B.push(J)}return B}getDependency(A,Q){let B=A+":"+Q,C=this.cache.get(B);if(!C){switch(A){case"scene":C=this.loadScene(Q);break;case"node":C=this._invokeOne(function(J){return J.loadNode&&J.loadNode(Q)});break;case"mesh":C=this._invokeOne(function(J){return J.loadMesh&&J.loadMesh(Q)});break;case"accessor":C=this.loadAccessor(Q);break;case"bufferView":C=this._invokeOne(function(J){return J.loadBufferView&&J.loadBufferView(Q)});break;case"buffer":C=this.loadBuffer(Q);break;case"material":C=this._invokeOne(function(J){return J.loadMaterial&&J.loadMaterial(Q)});break;case"texture":C=this._invokeOne(function(J){return J.loadTexture&&J.loadTexture(Q)});break;case"skin":C=this.loadSkin(Q);break;case"animation":C=this._invokeOne(function(J){return J.loadAnimation&&J.loadAnimation(Q)});break;case"camera":C=this.loadCamera(Q);break;default:if(C=this._invokeOne(function(J){return J!=this&&J.getDependency&&J.getDependency(A,Q)}),!C)throw new Error("Unknown type: "+A);break}this.cache.add(B,C)}return C}getDependencies(A){let Q=this.cache.get(A);if(!Q){let B=this,C=this.json[A+(A==="mesh"?"es":"s")]||[];Q=Promise.all(C.map(function(J,I){return B.getDependency(A,I)})),this.cache.add(A,Q)}return Q}loadBuffer(A){let Q=this.json.buffers[A],B=this.fileLoader;if(Q.type&&Q.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+Q.type+" buffer type is not supported.");if(Q.uri===void 0&&A===0)return Promise.resolve(this.extensions[F1.KHR_BINARY_GLTF].body);let C=this.options;return new Promise(function(J,I){B.load(H5.resolveURL(Q.uri,C.path),J,void 0,function(){I(new Error('THREE.GLTFLoader: Failed to load buffer "'+Q.uri+'".'))})})}loadBufferView(A){let Q=this.json.bufferViews[A];return this.getDependency("buffer",Q.buffer).then(function(B){let C=Q.byteLength||0,J=Q.byteOffset||0;return B.slice(J,J+C)})}loadAccessor(A){let Q=this,B=this.json,C=this.json.accessors[A];if(C.bufferView===void 0&&C.sparse===void 0){let I=hH[C.type],q=o7[C.componentType],K=C.normalized===!0,Y=new q(C.count*I);return Promise.resolve(new T1(Y,I,K))}let J=[];if(C.bufferView!==void 0)J.push(this.getDependency("bufferView",C.bufferView));else J.push(null);if(C.sparse!==void 0)J.push(this.getDependency("bufferView",C.sparse.indices.bufferView)),J.push(this.getDependency("bufferView",C.sparse.values.bufferView));return Promise.all(J).then(function(I){let q=I[0],K=hH[C.type],Y=o7[C.componentType],Z=Y.BYTES_PER_ELEMENT,H=Z*K,G=C.byteOffset||0,W=C.bufferView!==void 0?B.bufferViews[C.bufferView].byteStride:void 0,F=C.normalized===!0,z,U;if(W&&W!==H){let E=Math.floor(G/W),w="InterleavedBuffer:"+C.bufferView+":"+C.componentType+":"+E+":"+C.count,L=Q.cache.get(w);if(!L)z=new Y(q,E*W,C.count*W/Z),L=new dJ(z,W/Z),Q.cache.add(w,L);U=new YQ(L,K,G%W/Z,F)}else{if(q===null)z=new Y(C.count*K);else z=new Y(q,G,C.count*K);U=new T1(z,K,F)}if(C.sparse!==void 0){let E=hH.SCALAR,w=o7[C.sparse.indices.componentType],L=C.sparse.indices.byteOffset||0,X=C.sparse.values.byteOffset||0,V=new w(I[1],L,C.sparse.count*E),D=new Y(I[2],X,C.sparse.count*K);if(q!==null)U=new T1(U.array.slice(),U.itemSize,U.normalized);for(let N=0,R=V.length;N<R;N++){let k=V[N];if(U.setX(k,D[N*K]),K>=2)U.setY(k,D[N*K+1]);if(K>=3)U.setZ(k,D[N*K+2]);if(K>=4)U.setW(k,D[N*K+3]);if(K>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return U})}loadTexture(A){let Q=this.json,B=this.options,J=Q.textures[A].source,I=Q.images[J],q=this.textureLoader;if(I.uri){let K=B.manager.getHandler(I.uri);if(K!==null)q=K}return this.loadTextureImage(A,J,q)}loadTextureImage(A,Q,B){let C=this,J=this.json,I=J.textures[A],q=J.images[Q],K=(q.uri||q.bufferView)+":"+I.sampler;if(this.textureCache[K])return this.textureCache[K];let Y=this.loadImageSource(Q,B).then(function(Z){if(Z.flipY=!1,Z.name=I.name||q.name||"",Z.name===""&&typeof q.uri==="string"&&q.uri.startsWith("data:image/")===!1)Z.name=q.uri;let G=(J.samplers||{})[I.sampler]||{};return Z.magFilter=Sw[G.magFilter]||c1,Z.minFilter=Sw[G.minFilter]||x4,Z.wrapS=yw[G.wrapS]||uA,Z.wrapT=yw[G.wrapT]||uA,C.associations.set(Z,{textures:A}),Z}).catch(function(){return null});return this.textureCache[K]=Y,Y}loadImageSource(A,Q){let B=this,C=this.json,J=this.options;if(this.sourceCache[A]!==void 0)return this.sourceCache[A].then((H)=>H.clone());let I=C.images[A],q=self.URL||self.webkitURL,K=I.uri||"",Y=!1;if(I.bufferView!==void 0)K=B.getDependency("bufferView",I.bufferView).then(function(H){Y=!0;let G=new Blob([H],{type:I.mimeType});return K=q.createObjectURL(G),K});else if(I.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+A+" is missing URI and bufferView");let Z=Promise.resolve(K).then(function(H){return new Promise(function(G,W){let F=G;if(Q.isImageBitmapLoader===!0)F=function(z){let U=new E1(z);U.needsUpdate=!0,G(U)};Q.load(H5.resolveURL(H,J.path),F,void 0,W)})}).then(function(H){if(Y===!0)q.revokeObjectURL(K);return H.userData.mimeType=I.mimeType||Kg(I.uri),H}).catch(function(H){throw console.error("THREE.GLTFLoader: Couldn\'t load texture",K),H});return this.sourceCache[A]=Z,Z}assignTexture(A,Q,B,C){let J=this;return this.getDependency("texture",B.index).then(function(I){if(!I)return null;if(B.texCoord!==void 0&&B.texCoord>0)I=I.clone(),I.channel=B.texCoord;if(J.extensions[F1.KHR_TEXTURE_TRANSFORM]){let q=B.extensions!==void 0?B.extensions[F1.KHR_TEXTURE_TRANSFORM]:void 0;if(q){let K=J.associations.get(I);I=J.extensions[F1.KHR_TEXTURE_TRANSFORM].extendTexture(I,q),J.associations.set(I,K)}}if(C!==void 0)I.colorSpace=C;return A[Q]=I,I})}assignFinalMaterial(A){let{geometry:Q,material:B}=A,C=Q.attributes.tangent===void 0,J=Q.attributes.color!==void 0,I=Q.attributes.normal===void 0;if(A.isPoints){let q="PointsMaterial:"+B.uuid,K=this.cache.get(q);if(!K)K=new iJ,UA.prototype.copy.call(K,B),K.color.copy(B.color),K.map=B.map,K.sizeAttenuation=!1,this.cache.add(q,K);B=K}else if(A.isLine){let q="LineBasicMaterial:"+B.uuid,K=this.cache.get(q);if(!K)K=new sJ,UA.prototype.copy.call(K,B),K.color.copy(B.color),K.map=B.map,this.cache.add(q,K);B=K}if(C||J||I){let q="ClonedMaterial:"+B.uuid+":";if(C)q+="derivative-tangents:";if(J)q+="vertex-colors:";if(I)q+="flat-shading:";let K=this.cache.get(q);if(!K){if(K=B.clone(),J)K.vertexColors=!0;if(I)K.flatShading=!0;if(C){if(K.normalScale)K.normalScale.y*=-1;if(K.clearcoatNormalScale)K.clearcoatNormalScale.y*=-1}this.cache.add(q,K),this.associations.set(K,this.associations.get(B))}B=K}A.material=B}getMaterialType(){return K6}loadMaterial(A){let Q=this,B=this.json,C=this.extensions,J=B.materials[A],I,q={},K=J.extensions||{},Y=[];if(K[F1.KHR_MATERIALS_UNLIT]){let H=C[F1.KHR_MATERIALS_UNLIT];I=H.getMaterialType(),Y.push(H.extendParams(q,J,Q))}else{let H=J.pbrMetallicRoughness||{};if(q.color=new p0(1,1,1),q.opacity=1,Array.isArray(H.baseColorFactor)){let G=H.baseColorFactor;q.color.setRGB(G[0],G[1],G[2],f1),q.opacity=G[3]}if(H.baseColorTexture!==void 0)Y.push(Q.assignTexture(q,"map",H.baseColorTexture,g1));if(q.metalness=H.metallicFactor!==void 0?H.metallicFactor:1,q.roughness=H.roughnessFactor!==void 0?H.roughnessFactor:1,H.metallicRoughnessTexture!==void 0)Y.push(Q.assignTexture(q,"metalnessMap",H.metallicRoughnessTexture)),Y.push(Q.assignTexture(q,"roughnessMap",H.metallicRoughnessTexture));I=this._invokeOne(function(G){return G.getMaterialType&&G.getMaterialType(A)}),Y.push(Promise.all(this._invokeAll(function(G){return G.extendMaterialParams&&G.extendMaterialParams(A,q)})))}if(J.doubleSided===!0)q.side=bA;let Z=J.alphaMode||xH.OPAQUE;if(Z===xH.BLEND)q.transparent=!0,q.depthWrite=!1;else if(q.transparent=!1,Z===xH.MASK)q.alphaTest=J.alphaCutoff!==void 0?J.alphaCutoff:0.5;if(J.normalTexture!==void 0&&I!==t1){if(Y.push(Q.assignTexture(q,"normalMap",J.normalTexture)),q.normalScale=new M0(1,1),J.normalTexture.scale!==void 0){let H=J.normalTexture.scale;q.normalScale.set(H,H)}}if(J.occlusionTexture!==void 0&&I!==t1){if(Y.push(Q.assignTexture(q,"aoMap",J.occlusionTexture)),J.occlusionTexture.strength!==void 0)q.aoMapIntensity=J.occlusionTexture.strength}if(J.emissiveFactor!==void 0&&I!==t1){let H=J.emissiveFactor;q.emissive=new p0().setRGB(H[0],H[1],H[2],f1)}if(J.emissiveTexture!==void 0&&I!==t1)Y.push(Q.assignTexture(q,"emissiveMap",J.emissiveTexture,g1));return Promise.all(Y).then(function(){let H=new I(q);if(J.name)H.name=J.name;if(X6(H,J),Q.associations.set(H,{materials:A}),J.extensions)U5(C,H,J);return H})}createUniqueName(A){let Q=W1.sanitizeNodeName(A||"");if(Q in this.nodeNamesUsed)return Q+"_"+ ++this.nodeNamesUsed[Q];else return this.nodeNamesUsed[Q]=0,Q}loadGeometries(A){let Q=this,B=this.extensions,C=this.primitiveCache;function J(q){return B[F1.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(q,Q).then(function(K){return fw(K,q,Q)})}let I=[];for(let q=0,K=A.length;q<K;q++){let Y=A[q],Z=qg(Y),H=C[Z];if(H)I.push(H.promise);else{let G;if(Y.extensions&&Y.extensions[F1.KHR_DRACO_MESH_COMPRESSION])G=J(Y);else G=fw(new k2,Y,Q);C[Z]={primitive:Y,promise:G},I.push(G)}}return Promise.all(I)}loadMesh(A){let Q=this,B=this.json,C=this.extensions,J=B.meshes[A],I=J.primitives,q=[];for(let K=0,Y=I.length;K<Y;K++){let Z=I[K].material===void 0?Cg(this.cache):this.getDependency("material",I[K].material);q.push(Z)}return q.push(Q.loadGeometries(I)),Promise.all(q).then(function(K){let Y=K.slice(0,K.length-1),Z=K[K.length-1],H=[];for(let W=0,F=Z.length;W<F;W++){let z=Z[W],U=I[W],E,w=Y[W];if(U.mode===pA.TRIANGLES||U.mode===pA.TRIANGLE_STRIP||U.mode===pA.TRIANGLE_FAN||U.mode===void 0){if(E=J.isSkinnedMesh===!0?new AH(z,w):new A1(z,w),E.isSkinnedMesh===!0)E.normalizeSkinWeights();if(U.mode===pA.TRIANGLE_STRIP)E.geometry=fH(E.geometry,gJ);else if(U.mode===pA.TRIANGLE_FAN)E.geometry=fH(E.geometry,CQ)}else if(U.mode===pA.LINES)E=new BH(z,w);else if(U.mode===pA.LINE_STRIP)E=new ZQ(z,w);else if(U.mode===pA.LINE_LOOP)E=new CH(z,w);else if(U.mode===pA.POINTS)E=new JH(z,w);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+U.mode);if(Object.keys(E.geometry.morphAttributes).length>0)Ig(E,J);if(E.name=Q.createUniqueName(J.name||"mesh_"+A),X6(E,J),U.extensions)U5(C,E,U);Q.assignFinalMaterial(E),H.push(E)}for(let W=0,F=H.length;W<F;W++)Q.associations.set(H[W],{meshes:A,primitives:W});if(H.length===1){if(J.extensions)U5(C,H[0],J);return H[0]}let G=new vA;if(J.extensions)U5(C,G,J);Q.associations.set(G,{meshes:A});for(let W=0,F=H.length;W<F;W++)G.add(H[W]);return G})}loadCamera(A){let Q,B=this.json.cameras[A],C=B[B.type];if(!C){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}if(B.type==="perspective")Q=new b1(J6.radToDeg(C.yfov),C.aspectRatio||1,C.znear||1,C.zfar||2000000);else if(B.type==="orthographic")Q=new Z4(-C.xmag,C.xmag,C.ymag,-C.ymag,C.znear,C.zfar);if(B.name)Q.name=this.createUniqueName(B.name);return X6(Q,B),Promise.resolve(Q)}loadSkin(A){let Q=this.json.skins[A],B=[];for(let C=0,J=Q.joints.length;C<J;C++)B.push(this._loadNodeShallow(Q.joints[C]));if(Q.inverseBindMatrices!==void 0)B.push(this.getDependency("accessor",Q.inverseBindMatrices));else B.push(null);return Promise.all(B).then(function(C){let J=C.pop(),I=C,q=[],K=[];for(let Y=0,Z=I.length;Y<Z;Y++){let H=I[Y];if(H){q.push(H);let G=new h0;if(J!==null)G.fromArray(J.array,Y*16);K.push(G)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',Q.joints[Y])}return new lJ(q,K)})}loadAnimation(A){let Q=this.json,B=this,C=Q.animations[A],J=C.name?C.name:"animation_"+A,I=[],q=[],K=[],Y=[],Z=[];for(let H=0,G=C.channels.length;H<G;H++){let W=C.channels[H],F=C.samplers[W.sampler],z=W.target,U=z.node,E=C.parameters!==void 0?C.parameters[F.input]:F.input,w=C.parameters!==void 0?C.parameters[F.output]:F.output;if(z.node===void 0)continue;I.push(this.getDependency("node",U)),q.push(this.getDependency("accessor",E)),K.push(this.getDependency("accessor",w)),Y.push(F),Z.push(z)}return Promise.all([Promise.all(I),Promise.all(q),Promise.all(K),Promise.all(Y),Promise.all(Z)]).then(function(H){let G=H[0],W=H[1],F=H[2],z=H[3],U=H[4],E=[];for(let w=0,L=G.length;w<L;w++){let X=G[w],V=W[w],D=F[w],N=z[w],R=U[w];if(X===void 0)continue;if(X.updateMatrix)X.updateMatrix();let k=B._createAnimationTracks(X,V,D,N,R);if(k)for(let P=0;P<k.length;P++)E.push(k[P])}return new f7(J,void 0,E)})}createNodeMesh(A){let Q=this.json,B=this,C=Q.nodes[A];if(C.mesh===void 0)return null;return B.getDependency("mesh",C.mesh).then(function(J){let I=B._getNodeRef(B.meshCache,C.mesh,J);if(C.weights!==void 0)I.traverse(function(q){if(!q.isMesh)return;for(let K=0,Y=C.weights.length;K<Y;K++)q.morphTargetInfluences[K]=C.weights[K]});return I})}loadNode(A){let Q=this.json,B=this,C=Q.nodes[A],J=B._loadNodeShallow(A),I=[],q=C.children||[];for(let Y=0,Z=q.length;Y<Z;Y++)I.push(B.getDependency("node",q[Y]));let K=C.skin===void 0?Promise.resolve(null):B.getDependency("skin",C.skin);return Promise.all([J,Promise.all(I),K]).then(function(Y){let Z=Y[0],H=Y[1],G=Y[2];if(G!==null)Z.traverse(function(W){if(!W.isSkinnedMesh)return;W.bind(G,Yg)});for(let W=0,F=H.length;W<F;W++)Z.add(H[W]);return Z})}_loadNodeShallow(A){let Q=this.json,B=this.extensions,C=this;if(this.nodeCache[A]!==void 0)return this.nodeCache[A];let J=Q.nodes[A],I=J.name?C.createUniqueName(J.name):"",q=[],K=C._invokeOne(function(Y){return Y.createNodeMesh&&Y.createNodeMesh(A)});if(K)q.push(K);if(J.camera!==void 0)q.push(C.getDependency("camera",J.camera).then(function(Y){return C._getNodeRef(C.cameraCache,J.camera,Y)}));return C._invokeAll(function(Y){return Y.createNodeAttachment&&Y.createNodeAttachment(A)}).forEach(function(Y){q.push(Y)}),this.nodeCache[A]=Promise.all(q).then(function(Y){let Z;if(J.isBone===!0)Z=new cJ;else if(Y.length>1)Z=new vA;else if(Y.length===1)Z=Y[0];else Z=new L1;if(Z!==Y[0])for(let H=0,G=Y.length;H<G;H++)Z.add(Y[H]);if(J.name)Z.userData.name=J.name,Z.name=I;if(X6(Z,J),J.extensions)U5(B,Z,J);if(J.matrix!==void 0){let H=new h0;H.fromArray(J.matrix),Z.applyMatrix4(H)}else{if(J.translation!==void 0)Z.position.fromArray(J.translation);if(J.rotation!==void 0)Z.quaternion.fromArray(J.rotation);if(J.scale!==void 0)Z.scale.fromArray(J.scale)}if(!C.associations.has(Z))C.associations.set(Z,{});return C.associations.get(Z).nodes=A,Z}),this.nodeCache[A]}loadScene(A){let Q=this.extensions,B=this.json.scenes[A],C=this,J=new vA;if(B.name)J.name=C.createUniqueName(B.name);if(X6(J,B),B.extensions)U5(Q,J,B);let I=B.nodes||[],q=[];for(let K=0,Y=I.length;K<Y;K++)q.push(C.getDependency("node",I[K]));return Promise.all(q).then(function(K){for(let Z=0,H=K.length;Z<H;Z++)J.add(K[Z]);let Y=(Z)=>{let H=new Map;for(let[G,W]of C.associations)if(G instanceof UA||G instanceof E1)H.set(G,W);return Z.traverse((G)=>{let W=C.associations.get(G);if(W!=null)H.set(G,W)}),H};return C.associations=Y(J),J})}_createAnimationTracks(A,Q,B,C,J){let I=[],q=A.name?A.name:A.uuid,K=[];if(H6[J.path]===H6.weights)A.traverse(function(G){if(G.morphTargetInfluences)K.push(G.name?G.name:G.uuid)});else K.push(q);let Y;switch(H6[J.path]){case H6.weights:Y=C6;break;case H6.rotation:Y=b4;break;case H6.position:case H6.scale:Y=D3;break;default:switch(B.itemSize){case 1:Y=C6;break;case 2:case 3:default:Y=D3;break}break}let Z=C.interpolation!==void 0?Bg[C.interpolation]:BQ,H=this._getArrayFromAccessor(B);for(let G=0,W=K.length;G<W;G++){let F=new Y(K[G]+"."+H6[J.path],Q.array,H,Z);if(C.interpolation==="CUBICSPLINE")this._createCubicSplineTrackInterpolant(F);I.push(F)}return I}_getArrayFromAccessor(A){let Q=A.array;if(A.normalized){let B=bH(Q.constructor),C=new Float32Array(Q.length);for(let J=0,I=Q.length;J<I;J++)C[J]=Q[J]*B;Q=C}return Q}_createCubicSplineTrackInterpolant(A){A.createInterpolant=function Q(B){return new(this instanceof b4?CN:pH)(this.times,this.values,this.getValueSize()/3,B)},A.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Zg(A,Q,B){let C=Q.attributes,J=new G2;if(C.POSITION!==void 0){let K=B.json.accessors[C.POSITION],Y=K.min,Z=K.max;if(Y!==void 0&&Z!==void 0){if(J.set(new p(Y[0],Y[1],Y[2]),new p(Z[0],Z[1],Z[2])),K.normalized){let H=bH(o7[K.componentType]);J.min.multiplyScalar(H),J.max.multiplyScalar(H)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;let I=Q.targets;if(I!==void 0){let K=new p,Y=new p;for(let Z=0,H=I.length;Z<H;Z++){let G=I[Z];if(G.POSITION!==void 0){let W=B.json.accessors[G.POSITION],F=W.min,z=W.max;if(F!==void 0&&z!==void 0){if(Y.setX(Math.max(Math.abs(F[0]),Math.abs(z[0]))),Y.setY(Math.max(Math.abs(F[1]),Math.abs(z[1]))),Y.setZ(Math.max(Math.abs(F[2]),Math.abs(z[2]))),W.normalized){let U=bH(o7[W.componentType]);Y.multiplyScalar(U)}K.max(Y)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}J.expandByVector(K)}A.boundingBox=J;let q=new p2;J.getCenter(q.center),q.radius=J.min.distanceTo(J.max)/2,A.boundingSphere=q}function fw(A,Q,B){let C=Q.attributes,J=[];function I(q,K){return B.getDependency("accessor",q).then(function(Y){A.setAttribute(K,Y)})}for(let q in C){let K=vH[q]||q.toLowerCase();if(K in A.attributes)continue;J.push(I(C[q],K))}if(Q.indices!==void 0&&!A.index){let q=B.getDependency("accessor",Q.indices).then(function(K){A.setIndex(K)});J.push(q)}if(O1.workingColorSpace!==f1&&"COLOR_0"in C)console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${O1.workingColorSpace}" not supported.`);return X6(A,Q),Zg(A,Q,B),Promise.all(J).then(function(){return Q.targets!==void 0?Jg(A,Q.targets,B):A})}class mH{constructor(A=4){this.pool=A,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(A){if(!this.workers[A]){let Q=this.workerCreator();Q.addEventListener("message",this._onMessage.bind(this,A)),this.workers[A]=Q}}_getIdleWorker(){for(let A=0;A<this.pool;A++)if(!(this.workerStatus&1<<A))return A;return-1}_onMessage(A,Q){let B=this.workersResolve[A];if(B&&B(Q),this.queue.length){let{resolve:C,msg:J,transfer:I}=this.queue.shift();this.workersResolve[A]=C,this.workers[A].postMessage(J,I)}else this.workerStatus^=1<<A}setWorkerCreator(A){this.workerCreator=A}setWorkerLimit(A){this.pool=A}postMessage(A,Q){return new Promise((B)=>{let C=this._getIdleWorker();if(C!==-1)this._initWorker(C),this.workerStatus|=1<<C,this.workersResolve[C]=B,this.workers[C].postMessage(A,Q);else this.queue.push({resolve:B,msg:A,transfer:Q})})}dispose(){this.workers.forEach((A)=>A.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}var qN=0;var dH=2;var KN=1;var cH=2;var YN=0,ZN=1;var HN=10;var XN=0;var lH=9;var sH=15,iH=16;var nH=22;var oH=37;var aH=43;var rH=76;var tH=83;var eH=97;var AX=100;var QX=103;var BX=109;var CX=165,JX=166;class GN{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class a7{constructor(A,Q,B,C){this._dataView=new DataView(A.buffer,A.byteOffset+Q,B),this._littleEndian=C,this._offset=0}_nextUint8(){let A=this._dataView.getUint8(this._offset);return this._offset+=1,A}_nextUint16(){let A=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,A}_nextUint32(){let A=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,A}_nextUint64(){let A=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,A}_nextInt32(){let A=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,A}_skip(A){return this._offset+=A,this}_scan(A,Q=0){let B=this._offset,C=0;for(;this._dataView.getUint8(this._offset)!==Q&&C<A;)C++,this._offset++;return C<A&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+B,C)}}var D30=new Uint8Array([0]),QA=[171,75,84,88,32,50,48,187,13,10,26,10];function IN(A){return typeof TextDecoder!="undefined"?new TextDecoder().decode(A):Buffer.from(A).toString("utf8")}function WN(A){let Q=new Uint8Array(A.buffer,A.byteOffset,QA.length);if(Q[0]!==QA[0]||Q[1]!==QA[1]||Q[2]!==QA[2]||Q[3]!==QA[3]||Q[4]!==QA[4]||Q[5]!==QA[5]||Q[6]!==QA[6]||Q[7]!==QA[7]||Q[8]!==QA[8]||Q[9]!==QA[9]||Q[10]!==QA[10]||Q[11]!==QA[11])throw new Error("Missing KTX 2.0 identifier.");let B=new GN,C=17*Uint32Array.BYTES_PER_ELEMENT,J=new a7(A,QA.length,C,!0);B.vkFormat=J._nextUint32(),B.typeSize=J._nextUint32(),B.pixelWidth=J._nextUint32(),B.pixelHeight=J._nextUint32(),B.pixelDepth=J._nextUint32(),B.layerCount=J._nextUint32(),B.faceCount=J._nextUint32();let I=J._nextUint32();B.supercompressionScheme=J._nextUint32();let q=J._nextUint32(),K=J._nextUint32(),Y=J._nextUint32(),Z=J._nextUint32(),H=J._nextUint64(),G=J._nextUint64(),W=new a7(A,QA.length+C,3*I*8,!0);for(let u=0;u<I;u++)B.levels.push({levelData:new Uint8Array(A.buffer,A.byteOffset+W._nextUint64(),W._nextUint64()),uncompressedByteLength:W._nextUint64()});let F=new a7(A,q,K,!0),z={vendorId:F._skip(4)._nextUint16(),descriptorType:F._nextUint16(),versionNumber:F._nextUint16(),descriptorBlockSize:F._nextUint16(),colorModel:F._nextUint8(),colorPrimaries:F._nextUint8(),transferFunction:F._nextUint8(),flags:F._nextUint8(),texelBlockDimension:[F._nextUint8(),F._nextUint8(),F._nextUint8(),F._nextUint8()],bytesPlane:[F._nextUint8(),F._nextUint8(),F._nextUint8(),F._nextUint8(),F._nextUint8(),F._nextUint8(),F._nextUint8(),F._nextUint8()],samples:[]},U=(z.descriptorBlockSize/4-6)/4;for(let u=0;u<U;u++){let T={bitOffset:F._nextUint16(),bitLength:F._nextUint8(),channelType:F._nextUint8(),samplePosition:[F._nextUint8(),F._nextUint8(),F._nextUint8(),F._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&T.channelType?(T.sampleLower=F._nextInt32(),T.sampleUpper=F._nextInt32()):(T.sampleLower=F._nextUint32(),T.sampleUpper=F._nextUint32()),z.samples[u]=T}B.dataFormatDescriptor.length=0,B.dataFormatDescriptor.push(z);let E=new a7(A,Y,Z,!0);for(;E._offset<Z;){let u=E._nextUint32(),T=E._scan(u),d=IN(T),g=E._scan(u-T.byteLength);B.keyValue[d]=d.match(/^ktx/i)?IN(g):g,E._offset%4&&E._skip(4-E._offset%4)}if(G<=0)return B;let w=new a7(A,H,G,!0),L=w._nextUint16(),X=w._nextUint16(),V=w._nextUint32(),D=w._nextUint32(),N=w._nextUint32(),R=w._nextUint32(),k=[];for(let u=0;u<I;u++)k.push({imageFlags:w._nextUint32(),rgbSliceByteOffset:w._nextUint32(),rgbSliceByteLength:w._nextUint32(),alphaSliceByteOffset:w._nextUint32(),alphaSliceByteLength:w._nextUint32()});let P=H+w._offset,$=P+V,_=$+D,h=_+N,S=new Uint8Array(A.buffer,A.byteOffset+P,V),O=new Uint8Array(A.buffer,A.byteOffset+$,D),M=new Uint8Array(A.buffer,A.byteOffset+_,N),y=new Uint8Array(A.buffer,A.byteOffset+h,R);return B.globalData={endpointCount:L,selectorCount:X,imageDescs:k,endpointsData:S,selectorsData:O,tablesData:M,extendedData:y},B}var IX,N3,KX,qX={env:{emscripten_notify_memory_growth:function(A){KX=new Uint8Array(N3.exports.memory.buffer)}}};class YX{init(){return IX||(IX=typeof fetch!="undefined"?fetch("data:application/wasm;base64,"+FN).then((A)=>A.arrayBuffer()).then((A)=>WebAssembly.instantiate(A,qX)).then(this._init):WebAssembly.instantiate(Buffer.from(FN,"base64"),qX).then(this._init),IX)}_init(A){N3=A.instance,qX.env.emscripten_notify_memory_growth(0)}decode(A,Q=0){if(!N3)throw new Error("ZSTDDecoder: Await .init() before decoding.");let B=A.byteLength,C=N3.exports.malloc(B);KX.set(A,C),Q=Q||Number(N3.exports.ZSTD_findDecompressedSize(C,B));let J=N3.exports.malloc(Q),I=N3.exports.ZSTD_decompress(J,Q,C,B),q=KX.slice(J,J+I);return N3.exports.free(C),N3.exports.free(J),q}}var FN="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ";var ZX=new WeakMap,HX=0,XX;class W4 extends m2{constructor(A){super(A);if(this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new mH,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER!=="undefined")console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(A){return this.transcoderPath=A,this}setWorkerLimit(A){return this.workerPool.setWorkerLimit(A),this}async detectSupportAsync(A){return this.workerConfig={astcSupported:await A.hasFeatureAsync("texture-compression-astc"),etc1Supported:await A.hasFeatureAsync("texture-compression-etc1"),etc2Supported:await A.hasFeatureAsync("texture-compression-etc2"),dxtSupported:await A.hasFeatureAsync("texture-compression-bc"),bptcSupported:await A.hasFeatureAsync("texture-compression-bptc"),pvrtcSupported:await A.hasFeatureAsync("texture-compression-pvrtc")},this}detectSupport(A){if(A.isWebGPURenderer===!0)this.workerConfig={astcSupported:A.hasFeature("texture-compression-astc"),etc1Supported:A.hasFeature("texture-compression-etc1"),etc2Supported:A.hasFeature("texture-compression-etc2"),dxtSupported:A.hasFeature("texture-compression-bc"),bptcSupported:A.hasFeature("texture-compression-bptc"),pvrtcSupported:A.hasFeature("texture-compression-pvrtc")};else if(this.workerConfig={astcSupported:A.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:A.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:A.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:A.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:A.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:A.extensions.has("WEBGL_compressed_texture_pvrtc")||A.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},A.capabilities.isWebGL2)this.workerConfig.etc1Supported=!1;return this}init(){if(!this.transcoderPending){let A=new AA(this.manager);A.setPath(this.transcoderPath),A.setWithCredentials(this.withCredentials);let Q=A.loadAsync("basis_transcoder.js"),B=new AA(this.manager);B.setPath(this.transcoderPath),B.setResponseType("arraybuffer"),B.setWithCredentials(this.withCredentials);let C=B.loadAsync("basis_transcoder.wasm");if(this.transcoderPending=Promise.all([Q,C]).then(([J,I])=>{let q=W4.BasisWorker.toString(),K=["/* constants */","let _EngineFormat = "+JSON.stringify(W4.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(W4.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(W4.BasisFormat),"/* basis_transcoder.js */",J,"/* worker */",q.substring(q.indexOf("{")+1,q.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([K])),this.transcoderBinary=I,this.workerPool.setWorkerCreator(()=>{let Y=new Worker(this.workerSourceURL),Z=this.transcoderBinary.slice(0);return Y.postMessage({type:"init",config:this.workerConfig,transcoderBinary:Z},[Z]),Y})}),HX>0)console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances.");HX++}return this.transcoderPending}load(A,Q,B,C){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");let J=new AA(this.manager);J.setResponseType("arraybuffer"),J.setWithCredentials(this.withCredentials),J.load(A,(I)=>{if(ZX.has(I))return ZX.get(I).promise.then(Q).catch(C);this._createTexture(I).then((q)=>Q?Q(q):null).catch(C)},B,C)}_createTextureFrom(A,Q){let{faces:B,width:C,height:J,format:I,type:q,error:K,dfdFlags:Y}=A;if(q==="error")return Promise.reject(K);let Z;if(Q.faceCount===6)Z=new KH(B,I,y2);else{let H=B[0].mipmaps;Z=Q.layerCount>1?new qH(H,C,J,Q.layerCount,I,y2):new v4(H,C,J,I,y2)}return Z.minFilter=B[0].mipmaps.length===1?c1:x4,Z.magFilter=c1,Z.generateMipmaps=!1,Z.needsUpdate=!0,Z.colorSpace=VN(Q),Z.premultiplyAlpha=!!(Y&KN),Z}async _createTexture(A,Q={}){let B=WN(new Uint8Array(A));if(B.vkFormat!==XN)return Xg(B);let C=Q,J=this.init().then(()=>{return this.workerPool.postMessage({type:"transcode",buffer:A,taskConfig:C},[A])}).then((I)=>this._createTextureFrom(I.data,B));return ZX.set(A,{promise:J}),J}dispose(){if(this.workerPool.dispose(),this.workerSourceURL)URL.revokeObjectURL(this.workerSourceURL);return HX--,this}}W4.BasisFormat={ETC1S:0,UASTC_4x4:1};W4.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16};W4.EngineFormat={RGBAFormat:X2,RGBA_ASTC_4x4_Format:XE,RGBA_BPTC_Format:GE,RGBA_ETC2_EAC_Format:HE,RGBA_PVRTC_4BPPV1_Format:KE,RGBA_S3TC_DXT5_Format:IE,RGB_ETC1_Format:YE,RGB_ETC2_Format:ZE,RGB_PVRTC_4BPPV1_Format:qE,RGB_S3TC_DXT1_Format:JE};W4.BasisWorker=function(){let A,Q,B,C=_EngineFormat,J=_TranscoderFormat,I=_BasisFormat;self.addEventListener("message",function(z){let U=z.data;switch(U.type){case"init":A=U.config,q(U.transcoderBinary);break;case"transcode":Q.then(()=>{try{let{faces:E,buffers:w,width:L,height:X,hasAlpha:V,format:D,dfdFlags:N}=K(U.buffer);self.postMessage({type:"transcode",id:U.id,faces:E,width:L,height:X,hasAlpha:V,format:D,dfdFlags:N},w)}catch(E){console.error(E),self.postMessage({type:"error",id:U.id,error:E.message})}});break}});function q(z){Q=new Promise((U)=>{B={wasmBinary:z,onRuntimeInitialized:U},BASIS(B)}).then(()=>{if(B.initializeBasis(),B.KTX2File===void 0)console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function K(z){let U=new B.KTX2File(new Uint8Array(z));function E(){U.close(),U.delete()}if(!U.isValid())throw E(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");let w=U.isUASTC()?I.UASTC_4x4:I.ETC1S,L=U.getWidth(),X=U.getHeight(),V=U.getLayers()||1,D=U.getLevels(),N=U.getFaces(),R=U.getHasAlpha(),k=U.getDFDFlags(),{transcoderFormat:P,engineFormat:$}=G(w,L,X,R);if(!L||!X||!D)throw E(),new Error("THREE.KTX2Loader:	Invalid texture");if(!U.startTranscoding())throw E(),new Error("THREE.KTX2Loader: .startTranscoding failed");let _=[],h=[];for(let S=0;S<N;S++){let O=[];for(let M=0;M<D;M++){let y=[],u,T;for(let g=0;g<V;g++){let l=U.getImageLevelInfo(M,g,S);if(S===0&&M===0&&g===0&&(l.origWidth%4!==0||l.origHeight%4!==0))console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions.");if(D>1)u=l.origWidth,T=l.origHeight;else u=l.width,T=l.height;let t=new Uint8Array(U.getImageTranscodedSizeInBytes(M,g,0,P));if(!U.transcodeImage(t,M,g,S,P,0,-1,-1))throw E(),new Error("THREE.KTX2Loader: .transcodeImage failed.");y.push(t)}let d=F(y);O.push({data:d,width:u,height:T}),h.push(d.buffer)}_.push({mipmaps:O,width:L,height:X,format:$})}return E(),{faces:_,buffers:h,width:L,height:X,hasAlpha:R,format:$,dfdFlags:k}}let Y=[{if:"astcSupported",basisFormat:[I.UASTC_4x4],transcoderFormat:[J.ASTC_4x4,J.ASTC_4x4],engineFormat:[C.RGBA_ASTC_4x4_Format,C.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[I.ETC1S,I.UASTC_4x4],transcoderFormat:[J.BC7_M5,J.BC7_M5],engineFormat:[C.RGBA_BPTC_Format,C.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[I.ETC1S,I.UASTC_4x4],transcoderFormat:[J.BC1,J.BC3],engineFormat:[C.RGB_S3TC_DXT1_Format,C.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[I.ETC1S,I.UASTC_4x4],transcoderFormat:[J.ETC1,J.ETC2],engineFormat:[C.RGB_ETC2_Format,C.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[I.ETC1S,I.UASTC_4x4],transcoderFormat:[J.ETC1],engineFormat:[C.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[I.ETC1S,I.UASTC_4x4],transcoderFormat:[J.PVRTC1_4_RGB,J.PVRTC1_4_RGBA],engineFormat:[C.RGB_PVRTC_4BPPV1_Format,C.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],Z=Y.sort(function(z,U){return z.priorityETC1S-U.priorityETC1S}),H=Y.sort(function(z,U){return z.priorityUASTC-U.priorityUASTC});function G(z,U,E,w){let L,X,V=z===I.ETC1S?Z:H;for(let D=0;D<V.length;D++){let N=V[D];if(!A[N.if])continue;if(!N.basisFormat.includes(z))continue;if(w&&N.transcoderFormat.length<2)continue;if(N.needsPowerOfTwo&&!(W(U)&&W(E)))continue;return L=N.transcoderFormat[w?1:0],X=N.engineFormat[w?1:0],{transcoderFormat:L,engineFormat:X}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),L=J.RGBA32,X=C.RGBAFormat,{transcoderFormat:L,engineFormat:X}}function W(z){if(z<=2)return!0;return(z&z-1)===0&&z!==0}function F(z){if(z.length===1)return z[0];let U=0;for(let L=0;L<z.length;L++){let X=z[L];U+=X.byteLength}let E=new Uint8Array(U),w=0;for(let L=0;L<z.length;L++){let X=z[L];E.set(X,w),w+=X.byteLength}return E}};var Hg=new Set([X2,u7,b7]),GX={[BX]:X2,[eH]:X2,[oH]:X2,[aH]:X2,[QX]:u7,[tH]:u7,[iH]:u7,[nH]:u7,[AX]:b7,[rH]:b7,[sH]:b7,[lH]:b7,[JX]:lZ,[CX]:lZ},WX={[BX]:LA,[eH]:M2,[oH]:y2,[aH]:y2,[QX]:LA,[tH]:M2,[iH]:y2,[nH]:y2,[AX]:LA,[rH]:M2,[sH]:y2,[lH]:y2,[JX]:y2,[CX]:y2};async function Xg(A){let{vkFormat:Q}=A;if(GX[Q]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let B;if(A.supercompressionScheme===dH){if(!XX)XX=new Promise(async(I)=>{let q=new YX;await q.init(),I(q)});B=await XX}let C=[];for(let I=0;I<A.levels.length;I++){let q=Math.max(1,A.pixelWidth>>I),K=Math.max(1,A.pixelHeight>>I),Y=A.pixelDepth?Math.max(1,A.pixelDepth>>I):0,Z=A.levels[I],H;if(A.supercompressionScheme===qN)H=Z.levelData;else if(A.supercompressionScheme===dH)H=B.decode(Z.levelData,Z.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");let G;if(WX[Q]===LA)G=new Float32Array(H.buffer,H.byteOffset,H.byteLength/Float32Array.BYTES_PER_ELEMENT);else if(WX[Q]===M2)G=new Uint16Array(H.buffer,H.byteOffset,H.byteLength/Uint16Array.BYTES_PER_ELEMENT);else G=H;C.push({data:G,width:q,height:K,depth:Y})}let J;if(Hg.has(GX[Q]))J=A.pixelDepth===0?new q6(C[0].data,A.pixelWidth,A.pixelHeight):new vJ(C[0].data,A.pixelWidth,A.pixelHeight,A.pixelDepth);else{if(A.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");J=new v4(C,A.pixelWidth,A.pixelHeight)}return J.mipmaps=C,J.type=WX[Q],J.format=GX[Q],J.colorSpace=VN(A),J.needsUpdate=!0,Promise.resolve(J)}function VN(A){let Q=A.dataFormatDescriptor[0];if(Q.colorPrimaries===ZN)return Q.transferFunction===cH?g1:f1;else if(Q.colorPrimaries===HN)return Q.transferFunction===cH?VE:UE;else if(Q.colorPrimaries===YN)return I5;else return console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${Q.colorPrimaries}"`),I5}var UN,zN,F4=Symbol("retainerCount"),$3=Symbol("recentlyUsed"),HI=Symbol("evict"),$Q=Symbol("evictionThreshold"),FX=Symbol("cache");class VX{constructor(A,Q=5){this[UN]=new Map,this[zN]=[],this[FX]=A,this[$Q]=Q}set evictionThreshold(A){this[$Q]=A,this[HI]()}get evictionThreshold(){return this[$Q]}get cache(){return this[FX]}retainerCount(A){return this[F4].get(A)||0}reset(){this[F4].clear(),this[$3]=[]}retain(A){if(!this[F4].has(A))this[F4].set(A,0);this[F4].set(A,this[F4].get(A)+1);let Q=this[$3].indexOf(A);if(Q!==-1)this[$3].splice(Q,1);this[$3].unshift(A),this[HI]()}release(A){if(this[F4].has(A))this[F4].set(A,Math.max(this[F4].get(A)-1,0));this[HI]()}[(UN=F4,zN=$3,HI)](){if(this[$3].length<this[$Q])return;for(let A=this[$3].length-1;A>=this[$Q];--A){let Q=this[$3][A];if(this[F4].get(Q)===0)this[FX].delete(Q),this[$3].splice(A,1)}}}var Gg=(A)=>{let Q=[],B=new Set;for(let C of A){let J=C,I=0;while(B.has(J))J=C+"."+ ++I;B.add(J),Q.push(J)}return Q},Wg=(A)=>{let Q=new Map;for(let B of A.mappings)for(let C of B.variants)Q.set(C,{material:null,gltfMaterialIndex:B.material});return Q};class XI{constructor(A){this.parser=A,this.name="KHR_materials_variants"}afterRoot(A){let Q=this.parser,B=Q.json;if(B.extensions===void 0||B.extensions[this.name]===void 0)return null;let J=B.extensions[this.name].variants||[],I=Gg(J.map((q)=>q.name));for(let q of A.scenes)q.traverse((K)=>{let Y=K;if(!Y.material)return;let Z=Q.associations.get(Y);if(Z==null||Z.meshes==null||Z.primitives==null)return;let F=B.meshes[Z.meshes].primitives[Z.primitives].extensions;if(!F||!F[this.name])return;Y.userData.variantMaterials=Wg(F[this.name])});return A.userData.variants=I,Promise.resolve()}}var RN,DN;E1.DEFAULT_ANISOTROPY=4;var Fg=(A,Q,B=()=>{})=>{let C=(J)=>{let I=J.loaded/J.total;B(Math.max(0,Math.min(1,isFinite(I)?I:1)))};return new Promise((J,I)=>{Q.load(A,J,C,I)})},Vg=(A)=>{return new Promise((Q,B)=>{let C=document.createElement("script");document.body.appendChild(C),C.onload=Q,C.onerror=B,C.async=!0,C.src=A})},R3=new Map,UX=new Map,EN,wN=new yH,NN,zX=new W4,DX,EX,G6=Symbol("loader"),L3=Symbol("evictionPolicy"),$N=Symbol("GLTFInstance");class Q2 extends O2{constructor(A){super();this[DN]=new uH().register((Q)=>new XI(Q)),this[$N]=A,this[G6].setDRACOLoader(wN),this[G6].setKTX2Loader(zX)}static setDRACODecoderLocation(A){EN=A,wN.setDecoderPath(A)}static getDRACODecoderLocation(){return EN}static setKTX2TranscoderLocation(A){NN=A,zX.setTranscoderPath(A)}static getKTX2TranscoderLocation(){return NN}static setMeshoptDecoderLocation(A){if(DX!==A)DX=A,EX=Vg(A).then(()=>MeshoptDecoder.ready).then(()=>MeshoptDecoder)}static getMeshoptDecoderLocation(){return DX}static initializeKTX2Loader(A){zX.detectSupport(A)}static get cache(){return R3}static clearCache(){R3.forEach((A,Q)=>{this.delete(Q)}),this[L3].reset()}static has(A){return R3.has(A)}static async delete(A){if(!this.has(A))return;let Q=R3.get(A);UX.delete(A),R3.delete(A),(await Q).dispose()}static hasFinishedLoading(A){return!!UX.get(A)}get[(RN=L3,DN=G6,L3)](){return this.constructor[L3]}async preload(A,Q,B=()=>{}){if(this[G6].setWithCredentials(Q2.withCredentials),this.dispatchEvent({type:"preload",element:Q,src:A}),!R3.has(A)){if(EX!=null)this[G6].setMeshoptDecoder(await EX);let C=Fg(A,this[G6],(q)=>{B(q*0.8)}),J=this[$N],I=C.then((q)=>{return J.prepare(q)}).then((q)=>{return B(0.9),new J(q)}).catch((q)=>{return console.error(q),new J});R3.set(A,I)}if(await R3.get(A),UX.set(A,!0),B)B(1)}async load(A,Q,B=()=>{}){await this.preload(A,Q,B);let J=await(await R3.get(A)).clone();return this[L3].retain(A),J.dispose=()=>{this[L3].release(A)},J}}Q2[RN]=new VX(Q2);class wX extends L1{constructor(A=document.createElement("div")){super();this.isCSS2DObject=!0,this.element=A,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new M0(0.5,0.5),this.addEventListener("removed",function(){this.traverse(function(Q){if(Q.element instanceof Element&&Q.element.parentNode!==null)Q.element.parentNode.removeChild(Q.element)})})}copy(A,Q){return super.copy(A,Q),this.element=A.element.cloneNode(!0),this.center=A.center,this}}var r7=new p,LN=new h0,MN=new h0,ON=new p,kN=new p;class NX{constructor(A={}){let Q=this,B,C,J,I,q={objects:new WeakMap},K=A.element!==void 0?A.element:document.createElement("div");K.style.overflow="hidden",this.domElement=K,this.getSize=function(){return{width:B,height:C}},this.render=function(W,F){if(W.matrixWorldAutoUpdate===!0)W.updateMatrixWorld();if(F.parent===null&&F.matrixWorldAutoUpdate===!0)F.updateMatrixWorld();LN.copy(F.matrixWorldInverse),MN.multiplyMatrices(F.projectionMatrix,LN),Y(W,W,F),G(W)},this.setSize=function(W,F){B=W,C=F,J=B/2,I=C/2,K.style.width=W+"px",K.style.height=F+"px"};function Y(W,F,z){if(W.isCSS2DObject){r7.setFromMatrixPosition(W.matrixWorld),r7.applyMatrix4(MN);let U=W.visible===!0&&(r7.z>=-1&&r7.z<=1)&&W.layers.test(z.layers)===!0;if(W.element.style.display=U===!0?"":"none",U===!0){W.onBeforeRender(Q,F,z);let w=W.element;if(w.style.transform="translate("+-100*W.center.x+"%,"+-100*W.center.y+"%)translate("+(r7.x*J+J)+"px,"+(-r7.y*I+I)+"px)",w.parentNode!==K)K.appendChild(w);W.onAfterRender(Q,F,z)}let E={distanceToCameraSquared:Z(z,W)};q.objects.set(W,E)}for(let U=0,E=W.children.length;U<E;U++)Y(W.children[U],F,z)}function Z(W,F){return ON.setFromMatrixPosition(W.matrixWorld),kN.setFromMatrixPosition(F.matrixWorld),ON.distanceToSquared(kN)}function H(W){let F=[];return W.traverse(function(z){if(z.isCSS2DObject)F.push(z)}),F}function G(W){let F=H(W).sort(function(U,E){if(U.renderOrder!==E.renderOrder)return E.renderOrder-U.renderOrder;let w=q.objects.get(U).distanceToCameraSquared,L=q.objects.get(E).distanceToCameraSquared;return w-L}),z=F.length;for(let U=0,E=F.length;U<E;U++)F[U].element.style.zIndex=z-U}}}function RQ(A,Q,B){let C=B,J=new p;return A.updateWorldMatrix(!0,!0),A.traverseVisible((I)=>{let{geometry:q}=I;if(q!==void 0){let{position:K}=q.attributes;if(K!==void 0)for(let Y=0,Z=K.count;Y<Z;Y++){if(I.isMesh)I.getVertexPosition(Y,J);else J.fromBufferAttribute(K,Y);if(!I.isSkinnedMesh)J.applyMatrix4(I.matrixWorld);C=Q(C,J)}}}),C}var LQ,$X,t7,GI;function e7(A,Q=1/0,B=null){if(!$X)$X=new P2(2,2,1,1);if(!t7)t7=new C2({uniforms:{blitTexture:new tJ(A)},vertexShader:`
			varying vec2 vUv;
			void main(){
				vUv = uv;
				gl_Position = vec4(position.xy * 1.0,0.,.999999);
			}`,fragmentShader:`
			uniform sampler2D blitTexture; 
			varying vec2 vUv;

			void main(){ 
				gl_FragColor = vec4(vUv.xy, 0, 1);
				
				#ifdef IS_SRGB
				gl_FragColor = LinearTosRGB( texture2D( blitTexture, vUv) );
				#else
				gl_FragColor = texture2D( blitTexture, vUv);
				#endif
			}`});if(t7.uniforms.blitTexture.value=A,t7.defines.IS_SRGB=A.colorSpace==g1,t7.needsUpdate=!0,!GI)GI=new A1($X,t7),GI.frustrumCulled=!1;let C=new b1,J=new W2;if(J.add(GI),B===null)B=LQ=new g4({antialias:!1});let I=Math.min(A.image.width,Q),q=Math.min(A.image.height,Q);B.setSize(I,q),B.clear(),B.render(J,C);let K=document.createElement("canvas"),Y=K.getContext("2d");K.width=I,K.height=q,Y.drawImage(B.domElement,0,0,I,q);let Z=new d7(K);if(Z.minFilter=A.minFilter,Z.magFilter=A.magFilter,Z.wrapS=A.wrapS,Z.wrapT=A.wrapT,Z.name=A.name,LQ)LQ.forceContextLoss(),LQ.dispose(),LQ=null;return Z}var PN={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class OQ{constructor(){this.pluginCallbacks=[],this.register(function(A){return new xN(A)}),this.register(function(A){return new gN(A)}),this.register(function(A){return new uN(A)}),this.register(function(A){return new pN(A)}),this.register(function(A){return new mN(A)}),this.register(function(A){return new dN(A)}),this.register(function(A){return new vN(A)}),this.register(function(A){return new bN(A)}),this.register(function(A){return new cN(A)}),this.register(function(A){return new lN(A)}),this.register(function(A){return new sN(A)}),this.register(function(A){return new iN(A)}),this.register(function(A){return new nN(A)})}register(A){if(this.pluginCallbacks.indexOf(A)===-1)this.pluginCallbacks.push(A);return this}unregister(A){if(this.pluginCallbacks.indexOf(A)!==-1)this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(A),1);return this}parse(A,Q,B,C){let J=new hN,I=[];for(let q=0,K=this.pluginCallbacks.length;q<K;q++)I.push(this.pluginCallbacks[q](J));J.setPlugins(I),J.write(A,Q,C).catch(B)}parseAsync(A,Q){let B=this;return new Promise(function(C,J){B.parse(A,C,J,Q)})}}var V1={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},RX="KHR_mesh_quantization",MA={};MA[h4]=V1.NEAREST;MA[B5]=V1.NEAREST_MIPMAP_NEAREST;MA[C5]=V1.NEAREST_MIPMAP_LINEAR;MA[c1]=V1.LINEAR;MA[J5]=V1.LINEAR_MIPMAP_NEAREST;MA[x4]=V1.LINEAR_MIPMAP_LINEAR;MA[S2]=V1.CLAMP_TO_EDGE;MA[uA]=V1.REPEAT;MA[Q5]=V1.MIRRORED_REPEAT;var _N={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},Ug=new p0,TN=12,zg=1179937895,Dg=2,jN=8,Eg=1313821514,wg=5130562;function MQ(A,Q){return A.length===Q.length&&A.every(function(B,C){return B===Q[C]})}function Ng(A){return new TextEncoder().encode(A).buffer}function $g(A){return MQ(A.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function Rg(A,Q,B){let C={min:new Array(A.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(A.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let J=Q;J<Q+B;J++)for(let I=0;I<A.itemSize;I++){let q;if(A.itemSize>4)q=A.array[J*A.itemSize+I];else{if(I===0)q=A.getX(J);else if(I===1)q=A.getY(J);else if(I===2)q=A.getZ(J);else if(I===3)q=A.getW(J);if(A.normalized===!0)q=J6.normalize(q,A.array)}C.min[I]=Math.min(C.min[I],q),C.max[I]=Math.max(C.max[I],q)}return C}function fN(A){return Math.ceil(A/4)*4}function LX(A,Q=0){let B=fN(A.byteLength);if(B!==A.byteLength){let C=new Uint8Array(B);if(C.set(new Uint8Array(A)),Q!==0)for(let J=A.byteLength;J<B;J++)C[J]=Q;return C.buffer}return A}function SN(){if(typeof document==="undefined"&&typeof OffscreenCanvas!=="undefined")return new OffscreenCanvas(1,1);return document.createElement("canvas")}function yN(A,Q){if(A.toBlob!==void 0)return new Promise((C)=>A.toBlob(C,Q));let B;if(Q==="image/jpeg")B=0.92;else if(Q==="image/webp")B=0.8;return A.convertToBlob({type:Q,quality:B})}class hN{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(A){this.plugins=A}async write(A,Q,B={}){if(this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},B),this.options.animations.length>0)this.options.trs=!0;this.processInput(A),await Promise.all(this.pending);let C=this,J=C.buffers,I=C.json;B=C.options;let{extensionsUsed:q,extensionsRequired:K}=C,Y=new Blob(J,{type:"application/octet-stream"}),Z=Object.keys(q),H=Object.keys(K);if(Z.length>0)I.extensionsUsed=Z;if(H.length>0)I.extensionsRequired=H;if(I.buffers&&I.buffers.length>0)I.buffers[0].byteLength=Y.size;if(B.binary===!0){let G=new FileReader;G.readAsArrayBuffer(Y),G.onloadend=function(){let W=LX(G.result),F=new DataView(new ArrayBuffer(jN));F.setUint32(0,W.byteLength,!0),F.setUint32(4,wg,!0);let z=LX(Ng(JSON.stringify(I)),32),U=new DataView(new ArrayBuffer(jN));U.setUint32(0,z.byteLength,!0),U.setUint32(4,Eg,!0);let E=new ArrayBuffer(TN),w=new DataView(E);w.setUint32(0,zg,!0),w.setUint32(4,Dg,!0);let L=TN+U.byteLength+z.byteLength+F.byteLength+W.byteLength;w.setUint32(8,L,!0);let X=new Blob([E,U,z,F,W],{type:"application/octet-stream"}),V=new FileReader;V.readAsArrayBuffer(X),V.onloadend=function(){Q(V.result)}}}else if(I.buffers&&I.buffers.length>0){let G=new FileReader;G.readAsDataURL(Y),G.onloadend=function(){let W=G.result;I.buffers[0].uri=W,Q(I)}}else Q(I)}serializeUserData(A,Q){if(Object.keys(A.userData).length===0)return;let B=this.options,C=this.extensionsUsed;try{let J=JSON.parse(JSON.stringify(A.userData));if(B.includeCustomExtensions&&J.gltfExtensions){if(Q.extensions===void 0)Q.extensions={};for(let I in J.gltfExtensions)Q.extensions[I]=J.gltfExtensions[I],C[I]=!0;delete J.gltfExtensions}if(Object.keys(J).length>0)Q.extras=J}catch(J){console.warn("THREE.GLTFExporter: userData of \'"+A.name+"\' won\'t be serialized because of JSON.stringify error - "+J.message)}}getUID(A,Q=!1){if(this.uids.has(A)===!1){let C=new Map;C.set(!0,this.uid++),C.set(!1,this.uid++),this.uids.set(A,C)}return this.uids.get(A).get(Q)}isNormalizedNormalAttribute(A){if(this.cache.attributesNormalized.has(A))return!1;let B=new p;for(let C=0,J=A.count;C<J;C++)if(Math.abs(B.fromBufferAttribute(A,C).length()-1)>0.0005)return!1;return!0}createNormalizedNormalAttribute(A){let Q=this.cache;if(Q.attributesNormalized.has(A))return Q.attributesNormalized.get(A);let B=A.clone(),C=new p;for(let J=0,I=B.count;J<I;J++){if(C.fromBufferAttribute(B,J),C.x===0&&C.y===0&&C.z===0)C.setX(1);else C.normalize();B.setXYZ(J,C.x,C.y,C.z)}return Q.attributesNormalized.set(A,B),B}applyTextureTransform(A,Q){let B=!1,C={};if(Q.offset.x!==0||Q.offset.y!==0)C.offset=Q.offset.toArray(),B=!0;if(Q.rotation!==0)C.rotation=Q.rotation,B=!0;if(Q.repeat.x!==1||Q.repeat.y!==1)C.scale=Q.repeat.toArray(),B=!0;if(B)A.extensions=A.extensions||{},A.extensions.KHR_texture_transform=C,this.extensionsUsed.KHR_texture_transform=!0}buildMetalRoughTexture(A,Q){if(A===Q)return A;function B(W){if(W.colorSpace===g1)return function F(z){return z<0.04045?z*0.0773993808:Math.pow(z*0.9478672986+0.0521327014,2.4)};return function F(z){return z}}if(console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),A instanceof v4)A=e7(A);if(Q instanceof v4)Q=e7(Q);let C=A?A.image:null,J=Q?Q.image:null,I=Math.max(C?C.width:0,J?J.width:0),q=Math.max(C?C.height:0,J?J.height:0),K=SN();K.width=I,K.height=q;let Y=K.getContext("2d");Y.fillStyle="#00ffff",Y.fillRect(0,0,I,q);let Z=Y.getImageData(0,0,I,q);if(C){Y.drawImage(C,0,0,I,q);let W=B(A),F=Y.getImageData(0,0,I,q).data;for(let z=2;z<F.length;z+=4)Z.data[z]=W(F[z]/256)*256}if(J){Y.drawImage(J,0,0,I,q);let W=B(Q),F=Y.getImageData(0,0,I,q).data;for(let z=1;z<F.length;z+=4)Z.data[z]=W(F[z]/256)*256}Y.putImageData(Z,0,0);let G=(A||Q).clone();if(G.source=new JQ(K),G.colorSpace=I5,G.channel=(A||Q).channel,A&&Q&&A.channel!==Q.channel)console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match.");return G}processBuffer(A){let Q=this.json,B=this.buffers;if(!Q.buffers)Q.buffers=[{byteLength:0}];return B.push(A),0}processBufferView(A,Q,B,C,J){let I=this.json;if(!I.bufferViews)I.bufferViews=[];let q;switch(Q){case V1.BYTE:case V1.UNSIGNED_BYTE:q=1;break;case V1.SHORT:case V1.UNSIGNED_SHORT:q=2;break;default:q=4}let K=fN(C*A.itemSize*q),Y=new DataView(new ArrayBuffer(K)),Z=0;for(let W=B;W<B+C;W++)for(let F=0;F<A.itemSize;F++){let z;if(A.itemSize>4)z=A.array[W*A.itemSize+F];else{if(F===0)z=A.getX(W);else if(F===1)z=A.getY(W);else if(F===2)z=A.getZ(W);else if(F===3)z=A.getW(W);if(A.normalized===!0)z=J6.normalize(z,A.array)}if(Q===V1.FLOAT)Y.setFloat32(Z,z,!0);else if(Q===V1.INT)Y.setInt32(Z,z,!0);else if(Q===V1.UNSIGNED_INT)Y.setUint32(Z,z,!0);else if(Q===V1.SHORT)Y.setInt16(Z,z,!0);else if(Q===V1.UNSIGNED_SHORT)Y.setUint16(Z,z,!0);else if(Q===V1.BYTE)Y.setInt8(Z,z);else if(Q===V1.UNSIGNED_BYTE)Y.setUint8(Z,z);Z+=q}let H={buffer:this.processBuffer(Y.buffer),byteOffset:this.byteOffset,byteLength:K};if(J!==void 0)H.target=J;if(J===V1.ARRAY_BUFFER)H.byteStride=A.itemSize*q;return this.byteOffset+=K,I.bufferViews.push(H),{id:I.bufferViews.length-1,byteLength:0}}processBufferViewImage(A){let Q=this,B=Q.json;if(!B.bufferViews)B.bufferViews=[];return new Promise(function(C){let J=new FileReader;J.readAsArrayBuffer(A),J.onloadend=function(){let I=LX(J.result),q={buffer:Q.processBuffer(I),byteOffset:Q.byteOffset,byteLength:I.byteLength};Q.byteOffset+=I.byteLength,C(B.bufferViews.push(q)-1)}})}processAccessor(A,Q,B,C){let J=this.json,I={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"},q;if(A.array.constructor===Float32Array)q=V1.FLOAT;else if(A.array.constructor===Int32Array)q=V1.INT;else if(A.array.constructor===Uint32Array)q=V1.UNSIGNED_INT;else if(A.array.constructor===Int16Array)q=V1.SHORT;else if(A.array.constructor===Uint16Array)q=V1.UNSIGNED_SHORT;else if(A.array.constructor===Int8Array)q=V1.BYTE;else if(A.array.constructor===Uint8Array)q=V1.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+A.array.constructor.name);if(B===void 0)B=0;if(C===void 0||C===1/0)C=A.count;if(C===0)return null;let K=Rg(A,B,C),Y;if(Q!==void 0)Y=A===Q.index?V1.ELEMENT_ARRAY_BUFFER:V1.ARRAY_BUFFER;let Z=this.processBufferView(A,q,B,C,Y),H={bufferView:Z.id,byteOffset:Z.byteOffset,componentType:q,count:C,max:K.max,min:K.min,type:I[A.itemSize]};if(A.normalized===!0)H.normalized=!0;if(!J.accessors)J.accessors=[];return J.accessors.push(H)-1}processImage(A,Q,B,C="image/png"){if(A!==null){let J=this,I=J.cache,q=J.json,K=J.options,Y=J.pending;if(!I.images.has(A))I.images.set(A,{});let Z=I.images.get(A),H=C+":flipY/"+B.toString();if(Z[H]!==void 0)return Z[H];if(!q.images)q.images=[];let G={mimeType:C},W=SN();W.width=Math.min(A.width,K.maxTextureSize),W.height=Math.min(A.height,K.maxTextureSize);let F=W.getContext("2d");if(B===!0)F.translate(0,W.height),F.scale(1,-1);if(A.data!==void 0){if(Q!==X2)console.error("GLTFExporter: Only RGBAFormat is supported.",Q);if(A.width>K.maxTextureSize||A.height>K.maxTextureSize)console.warn("GLTFExporter: Image size is bigger than maxTextureSize",A);let U=new Uint8ClampedArray(A.height*A.width*4);for(let E=0;E<U.length;E+=4)U[E+0]=A.data[E+0],U[E+1]=A.data[E+1],U[E+2]=A.data[E+2],U[E+3]=A.data[E+3];F.putImageData(new ImageData(U,A.width,A.height),0,0)}else if(typeof HTMLImageElement!=="undefined"&&A instanceof HTMLImageElement||typeof HTMLCanvasElement!=="undefined"&&A instanceof HTMLCanvasElement||typeof ImageBitmap!=="undefined"&&A instanceof ImageBitmap)F.drawImage(A,0,0,W.width,W.height);else throw new Error("THREE.GLTFExporter: Invalid image type. Use HTMLImageElement, HTMLCanvasElement or ImageBitmap.");if(K.binary===!0)Y.push(yN(W,C).then((U)=>J.processBufferViewImage(U)).then((U)=>{G.bufferView=U}));else if(W.toDataURL!==void 0)G.uri=W.toDataURL(C);else Y.push(yN(W,C).then((U)=>new FileReader().readAsDataURL(U)).then((U)=>{G.uri=U}));let z=q.images.push(G)-1;return Z[H]=z,z}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(A){let Q=this.json;if(!Q.samplers)Q.samplers=[];let B={magFilter:MA[A.magFilter],minFilter:MA[A.minFilter],wrapS:MA[A.wrapS],wrapT:MA[A.wrapT]};return Q.samplers.push(B)-1}processTexture(A){let B=this.options,C=this.cache,J=this.json;if(C.textures.has(A))return C.textures.get(A);if(!J.textures)J.textures=[];if(A instanceof v4)A=e7(A,B.maxTextureSize);let I=A.userData.mimeType;if(I==="image/webp")I="image/png";let q={sampler:this.processSampler(A),source:this.processImage(A.image,A.format,A.flipY,I)};if(A.name)q.name=A.name;this._invokeAll(function(Y){Y.writeTexture&&Y.writeTexture(A,q)});let K=J.textures.push(q)-1;return C.textures.set(A,K),K}processMaterial(A){let Q=this.cache,B=this.json;if(Q.materials.has(A))return Q.materials.get(A);if(A.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;if(!B.materials)B.materials=[];let C={pbrMetallicRoughness:{}};if(A.isMeshStandardMaterial!==!0&&A.isMeshBasicMaterial!==!0)console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");let J=A.color.toArray().concat([A.opacity]);if(!MQ(J,[1,1,1,1]))C.pbrMetallicRoughness.baseColorFactor=J;if(A.isMeshStandardMaterial)C.pbrMetallicRoughness.metallicFactor=A.metalness,C.pbrMetallicRoughness.roughnessFactor=A.roughness;else C.pbrMetallicRoughness.metallicFactor=0.5,C.pbrMetallicRoughness.roughnessFactor=0.5;if(A.metalnessMap||A.roughnessMap){let q=this.buildMetalRoughTexture(A.metalnessMap,A.roughnessMap),K={index:this.processTexture(q),channel:q.channel};this.applyTextureTransform(K,q),C.pbrMetallicRoughness.metallicRoughnessTexture=K}if(A.map){let q={index:this.processTexture(A.map),texCoord:A.map.channel};this.applyTextureTransform(q,A.map),C.pbrMetallicRoughness.baseColorTexture=q}if(A.emissive){let q=A.emissive;if(Math.max(q.r,q.g,q.b)>0)C.emissiveFactor=A.emissive.toArray();if(A.emissiveMap){let Y={index:this.processTexture(A.emissiveMap),texCoord:A.emissiveMap.channel};this.applyTextureTransform(Y,A.emissiveMap),C.emissiveTexture=Y}}if(A.normalMap){let q={index:this.processTexture(A.normalMap),texCoord:A.normalMap.channel};if(A.normalScale&&A.normalScale.x!==1)q.scale=A.normalScale.x;this.applyTextureTransform(q,A.normalMap),C.normalTexture=q}if(A.aoMap){let q={index:this.processTexture(A.aoMap),texCoord:A.aoMap.channel};if(A.aoMapIntensity!==1)q.strength=A.aoMapIntensity;this.applyTextureTransform(q,A.aoMap),C.occlusionTexture=q}if(A.transparent)C.alphaMode="BLEND";else if(A.alphaTest>0)C.alphaMode="MASK",C.alphaCutoff=A.alphaTest;if(A.side===bA)C.doubleSided=!0;if(A.name!=="")C.name=A.name;this.serializeUserData(A,C),this._invokeAll(function(q){q.writeMaterial&&q.writeMaterial(A,C)});let I=B.materials.push(C)-1;return Q.materials.set(A,I),I}processMesh(A){let Q=this.cache,B=this.json,C=[A.geometry.uuid];if(Array.isArray(A.material))for(let X=0,V=A.material.length;X<V;X++)C.push(A.material[X].uuid);else C.push(A.material.uuid);let J=C.join(":");if(Q.meshes.has(J))return Q.meshes.get(J);let I=A.geometry,q;if(A.isLineSegments)q=V1.LINES;else if(A.isLineLoop)q=V1.LINE_LOOP;else if(A.isLine)q=V1.LINE_STRIP;else if(A.isPoints)q=V1.POINTS;else q=A.material.wireframe?V1.LINES:V1.TRIANGLES;let K={},Y={},Z=[],H=[],G={uv:"TEXCOORD_0",uv1:"TEXCOORD_1",uv2:"TEXCOORD_2",uv3:"TEXCOORD_3",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},W=I.getAttribute("normal");if(W!==void 0&&!this.isNormalizedNormalAttribute(W))console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),I.setAttribute("normal",this.createNormalizedNormalAttribute(W));let F=null;for(let X in I.attributes){if(X.slice(0,5)==="morph")continue;let V=I.attributes[X];if(X=G[X]||X.toUpperCase(),!/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(X))X="_"+X;if(Q.attributes.has(this.getUID(V))){Y[X]=Q.attributes.get(this.getUID(V));continue}F=null;let N=V.array;if(X==="JOINTS_0"&&!(N instanceof Uint16Array)&&!(N instanceof Uint8Array))console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),F=new T1(new Uint16Array(N),V.itemSize,V.normalized);let R=this.processAccessor(F||V,I);if(R!==null){if(!X.startsWith("_"))this.detectMeshQuantization(X,V);Y[X]=R,Q.attributes.set(this.getUID(V),R)}}if(W!==void 0)I.setAttribute("normal",W);if(Object.keys(Y).length===0)return null;if(A.morphTargetInfluences!==void 0&&A.morphTargetInfluences.length>0){let X=[],V=[],D={};if(A.morphTargetDictionary!==void 0)for(let N in A.morphTargetDictionary)D[A.morphTargetDictionary[N]]=N;for(let N=0;N<A.morphTargetInfluences.length;++N){let R={},k=!1;for(let P in I.morphAttributes){if(P!=="position"&&P!=="normal"){if(!k)console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),k=!0;continue}let $=I.morphAttributes[P][N],_=P.toUpperCase(),h=I.attributes[P];if(Q.attributes.has(this.getUID($,!0))){R[_]=Q.attributes.get(this.getUID($,!0));continue}let S=$.clone();if(!I.morphTargetsRelative)for(let O=0,M=$.count;O<M;O++)for(let y=0;y<$.itemSize;y++){if(y===0)S.setX(O,$.getX(O)-h.getX(O));if(y===1)S.setY(O,$.getY(O)-h.getY(O));if(y===2)S.setZ(O,$.getZ(O)-h.getZ(O));if(y===3)S.setW(O,$.getW(O)-h.getW(O))}R[_]=this.processAccessor(S,I),Q.attributes.set(this.getUID(h,!0),R[_])}if(H.push(R),X.push(A.morphTargetInfluences[N]),A.morphTargetDictionary!==void 0)V.push(D[N])}if(K.weights=X,V.length>0)K.extras={},K.extras.targetNames=V}let z=Array.isArray(A.material);if(z&&I.groups.length===0)return null;let U=!1;if(z&&I.index===null){let X=[];for(let V=0,D=I.attributes.position.count;V<D;V++)X[V]=V;I.setIndex(X),U=!0}let E=z?A.material:[A.material],w=z?I.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let X=0,V=w.length;X<V;X++){let D={mode:q,attributes:Y};if(this.serializeUserData(I,D),H.length>0)D.targets=H;if(I.index!==null){let R=this.getUID(I.index);if(w[X].start!==void 0||w[X].count!==void 0)R+=":"+w[X].start+":"+w[X].count;if(Q.attributes.has(R))D.indices=Q.attributes.get(R);else D.indices=this.processAccessor(I.index,I,w[X].start,w[X].count),Q.attributes.set(R,D.indices);if(D.indices===null)delete D.indices}let N=this.processMaterial(E[w[X].materialIndex]);if(N!==null)D.material=N;Z.push(D)}if(U===!0)I.setIndex(null);if(K.primitives=Z,!B.meshes)B.meshes=[];this._invokeAll(function(X){X.writeMesh&&X.writeMesh(A,K)});let L=B.meshes.push(K)-1;return Q.meshes.set(J,L),L}detectMeshQuantization(A,Q){if(this.extensionsUsed[RX])return;let B=void 0;switch(Q.array.constructor){case Int8Array:B="byte";break;case Uint8Array:B="unsigned byte";break;case Int16Array:B="short";break;case Uint16Array:B="unsigned short";break;default:return}if(Q.normalized)B+=" normalized";let C=A.split("_",1)[0];if(PN[C]&&PN[C].includes(B))this.extensionsUsed[RX]=!0,this.extensionsRequired[RX]=!0}processCamera(A){let Q=this.json;if(!Q.cameras)Q.cameras=[];let B=A.isOrthographicCamera,C={type:B?"orthographic":"perspective"};if(B)C.orthographic={xmag:A.right*2,ymag:A.top*2,zfar:A.far<=0?0.001:A.far,znear:A.near<0?0:A.near};else C.perspective={aspectRatio:A.aspect,yfov:J6.degToRad(A.fov),zfar:A.far<=0?0.001:A.far,znear:A.near<0?0:A.near};if(A.name!=="")C.name=A.type;return Q.cameras.push(C)-1}processAnimation(A,Q){let B=this.json,C=this.nodeMap;if(!B.animations)B.animations=[];A=OQ.Utils.mergeMorphTargetTracks(A.clone(),Q);let J=A.tracks,I=[],q=[];for(let K=0;K<J.length;++K){let Y=J[K],Z=W1.parseTrackName(Y.name),H=W1.findNode(Q,Z.nodeName),G=_N[Z.propertyName];if(Z.objectName==="bones")if(H.isSkinnedMesh===!0)H=H.skeleton.getBoneByName(Z.objectIndex);else H=void 0;if(!H||!G)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',Y.name),null;let W=1,F=Y.values.length/Y.times.length;if(G===_N.morphTargetInfluences)F/=H.morphTargetInfluences.length;let z;if(Y.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0)z="CUBICSPLINE",F/=3;else if(Y.getInterpolation()===xJ)z="STEP";else z="LINEAR";q.push({input:this.processAccessor(new T1(Y.times,W)),output:this.processAccessor(new T1(Y.values,F)),interpolation:z}),I.push({sampler:q.length-1,target:{node:C.get(H),path:G}})}return B.animations.push({name:A.name||"clip_"+B.animations.length,samplers:q,channels:I}),B.animations.length-1}processSkin(A){let Q=this.json,B=this.nodeMap,C=Q.nodes[B.get(A)],J=A.skeleton;if(J===void 0)return null;let I=A.skeleton.bones[0];if(I===void 0)return null;let q=[],K=new Float32Array(J.bones.length*16),Y=new h0;for(let H=0;H<J.bones.length;++H)q.push(B.get(J.bones[H])),Y.copy(J.boneInverses[H]),Y.multiply(A.bindMatrix).toArray(K,H*16);if(Q.skins===void 0)Q.skins=[];return Q.skins.push({inverseBindMatrices:this.processAccessor(new T1(K,16)),joints:q,skeleton:B.get(I)}),C.skin=Q.skins.length-1}processNode(A){let Q=this.json,B=this.options,C=this.nodeMap;if(!Q.nodes)Q.nodes=[];let J={};if(B.trs){let q=A.quaternion.toArray(),K=A.position.toArray(),Y=A.scale.toArray();if(!MQ(q,[0,0,0,1]))J.rotation=q;if(!MQ(K,[0,0,0]))J.translation=K;if(!MQ(Y,[1,1,1]))J.scale=Y}else{if(A.matrixAutoUpdate)A.updateMatrix();if($g(A.matrix)===!1)J.matrix=A.matrix.elements}if(A.name!=="")J.name=String(A.name);if(this.serializeUserData(A,J),A.isMesh||A.isLine||A.isPoints){let q=this.processMesh(A);if(q!==null)J.mesh=q}else if(A.isCamera)J.camera=this.processCamera(A);if(A.isSkinnedMesh)this.skins.push(A);if(A.children.length>0){let q=[];for(let K=0,Y=A.children.length;K<Y;K++){let Z=A.children[K];if(Z.visible||B.onlyVisible===!1){let H=this.processNode(Z);if(H!==null)q.push(H)}}if(q.length>0)J.children=q}this._invokeAll(function(q){q.writeNode&&q.writeNode(A,J)});let I=Q.nodes.push(J)-1;return C.set(A,I),I}processScene(A){let Q=this.json,B=this.options;if(!Q.scenes)Q.scenes=[],Q.scene=0;let C={};if(A.name!=="")C.name=A.name;Q.scenes.push(C);let J=[];for(let I=0,q=A.children.length;I<q;I++){let K=A.children[I];if(K.visible||B.onlyVisible===!1){let Y=this.processNode(K);if(Y!==null)J.push(Y)}}if(J.length>0)C.nodes=J;this.serializeUserData(A,C)}processObjects(A){let Q=new W2;Q.name="AuxScene";for(let B=0;B<A.length;B++)Q.children.push(A[B]);this.processScene(Q)}processInput(A){let Q=this.options;A=A instanceof Array?A:[A],this._invokeAll(function(C){C.beforeParse&&C.beforeParse(A)});let B=[];for(let C=0;C<A.length;C++)if(A[C]instanceof W2)this.processScene(A[C]);else B.push(A[C]);if(B.length>0)this.processObjects(B);for(let C=0;C<this.skins.length;++C)this.processSkin(this.skins[C]);for(let C=0;C<Q.animations.length;++C)this.processAnimation(Q.animations[C],A[0]);this._invokeAll(function(C){C.afterParse&&C.afterParse(A)})}_invokeAll(A){for(let Q=0,B=this.plugins.length;Q<B;Q++)A(this.plugins[Q])}}class xN{constructor(A){this.writer=A,this.name="KHR_lights_punctual"}writeNode(A,Q){if(!A.isLight)return;if(!A.isDirectionalLight&&!A.isPointLight&&!A.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",A);return}let B=this.writer,C=B.json,J=B.extensionsUsed,I={};if(A.name)I.name=A.name;if(I.color=A.color.toArray(),I.intensity=A.intensity,A.isDirectionalLight)I.type="directional";else if(A.isPointLight){if(I.type="point",A.distance>0)I.range=A.distance}else if(A.isSpotLight){if(I.type="spot",A.distance>0)I.range=A.distance;I.spot={},I.spot.innerConeAngle=(1-A.penumbra)*A.angle,I.spot.outerConeAngle=A.angle}if(A.decay!==void 0&&A.decay!==2)console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2.");if(A.target&&(A.target.parent!==A||A.target.position.x!==0||A.target.position.y!==0||A.target.position.z!==-1))console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1.");if(!J[this.name])C.extensions=C.extensions||{},C.extensions[this.name]={lights:[]},J[this.name]=!0;let q=C.extensions[this.name].lights;q.push(I),Q.extensions=Q.extensions||{},Q.extensions[this.name]={light:q.length-1}}}class gN{constructor(A){this.writer=A,this.name="KHR_materials_unlit"}writeMaterial(A,Q){if(!A.isMeshBasicMaterial)return;let C=this.writer.extensionsUsed;Q.extensions=Q.extensions||{},Q.extensions[this.name]={},C[this.name]=!0,Q.pbrMetallicRoughness.metallicFactor=0,Q.pbrMetallicRoughness.roughnessFactor=0.9}}class vN{constructor(A){this.writer=A,this.name="KHR_materials_clearcoat"}writeMaterial(A,Q){if(!A.isMeshPhysicalMaterial||A.clearcoat===0)return;let B=this.writer,C=B.extensionsUsed,J={};if(J.clearcoatFactor=A.clearcoat,A.clearcoatMap){let I={index:B.processTexture(A.clearcoatMap),texCoord:A.clearcoatMap.channel};B.applyTextureTransform(I,A.clearcoatMap),J.clearcoatTexture=I}if(J.clearcoatRoughnessFactor=A.clearcoatRoughness,A.clearcoatRoughnessMap){let I={index:B.processTexture(A.clearcoatRoughnessMap),texCoord:A.clearcoatRoughnessMap.channel};B.applyTextureTransform(I,A.clearcoatRoughnessMap),J.clearcoatRoughnessTexture=I}if(A.clearcoatNormalMap){let I={index:B.processTexture(A.clearcoatNormalMap),texCoord:A.clearcoatNormalMap.channel};B.applyTextureTransform(I,A.clearcoatNormalMap),J.clearcoatNormalTexture=I}Q.extensions=Q.extensions||{},Q.extensions[this.name]=J,C[this.name]=!0}}class bN{constructor(A){this.writer=A,this.name="KHR_materials_iridescence"}writeMaterial(A,Q){if(!A.isMeshPhysicalMaterial||A.iridescence===0)return;let B=this.writer,C=B.extensionsUsed,J={};if(J.iridescenceFactor=A.iridescence,A.iridescenceMap){let I={index:B.processTexture(A.iridescenceMap),texCoord:A.iridescenceMap.channel};B.applyTextureTransform(I,A.iridescenceMap),J.iridescenceTexture=I}if(J.iridescenceIor=A.iridescenceIOR,J.iridescenceThicknessMinimum=A.iridescenceThicknessRange[0],J.iridescenceThicknessMaximum=A.iridescenceThicknessRange[1],A.iridescenceThicknessMap){let I={index:B.processTexture(A.iridescenceThicknessMap),texCoord:A.iridescenceThicknessMap.channel};B.applyTextureTransform(I,A.iridescenceThicknessMap),J.iridescenceThicknessTexture=I}Q.extensions=Q.extensions||{},Q.extensions[this.name]=J,C[this.name]=!0}}class uN{constructor(A){this.writer=A,this.name="KHR_materials_transmission"}writeMaterial(A,Q){if(!A.isMeshPhysicalMaterial||A.transmission===0)return;let B=this.writer,C=B.extensionsUsed,J={};if(J.transmissionFactor=A.transmission,A.transmissionMap){let I={index:B.processTexture(A.transmissionMap),texCoord:A.transmissionMap.channel};B.applyTextureTransform(I,A.transmissionMap),J.transmissionTexture=I}Q.extensions=Q.extensions||{},Q.extensions[this.name]=J,C[this.name]=!0}}class pN{constructor(A){this.writer=A,this.name="KHR_materials_volume"}writeMaterial(A,Q){if(!A.isMeshPhysicalMaterial||A.transmission===0)return;let B=this.writer,C=B.extensionsUsed,J={};if(J.thicknessFactor=A.thickness,A.thicknessMap){let I={index:B.processTexture(A.thicknessMap),texCoord:A.thicknessMap.channel};B.applyTextureTransform(I,A.thicknessMap),J.thicknessTexture=I}J.attenuationDistance=A.attenuationDistance,J.attenuationColor=A.attenuationColor.toArray(),Q.extensions=Q.extensions||{},Q.extensions[this.name]=J,C[this.name]=!0}}class mN{constructor(A){this.writer=A,this.name="KHR_materials_ior"}writeMaterial(A,Q){if(!A.isMeshPhysicalMaterial||A.ior===1.5)return;let C=this.writer.extensionsUsed,J={};J.ior=A.ior,Q.extensions=Q.extensions||{},Q.extensions[this.name]=J,C[this.name]=!0}}class dN{constructor(A){this.writer=A,this.name="KHR_materials_specular"}writeMaterial(A,Q){if(!A.isMeshPhysicalMaterial||A.specularIntensity===1&&A.specularColor.equals(Ug)&&!A.specularIntensityMap&&!A.specularColorMap)return;let B=this.writer,C=B.extensionsUsed,J={};if(A.specularIntensityMap){let I={index:B.processTexture(A.specularIntensityMap),texCoord:A.specularIntensityMap.channel};B.applyTextureTransform(I,A.specularIntensityMap),J.specularTexture=I}if(A.specularColorMap){let I={index:B.processTexture(A.specularColorMap),texCoord:A.specularColorMap.channel};B.applyTextureTransform(I,A.specularColorMap),J.specularColorTexture=I}J.specularFactor=A.specularIntensity,J.specularColorFactor=A.specularColor.toArray(),Q.extensions=Q.extensions||{},Q.extensions[this.name]=J,C[this.name]=!0}}class cN{constructor(A){this.writer=A,this.name="KHR_materials_sheen"}writeMaterial(A,Q){if(!A.isMeshPhysicalMaterial||A.sheen==0)return;let B=this.writer,C=B.extensionsUsed,J={};if(A.sheenRoughnessMap){let I={index:B.processTexture(A.sheenRoughnessMap),texCoord:A.sheenRoughnessMap.channel};B.applyTextureTransform(I,A.sheenRoughnessMap),J.sheenRoughnessTexture=I}if(A.sheenColorMap){let I={index:B.processTexture(A.sheenColorMap),texCoord:A.sheenColorMap.channel};B.applyTextureTransform(I,A.sheenColorMap),J.sheenColorTexture=I}J.sheenRoughnessFactor=A.sheenRoughness,J.sheenColorFactor=A.sheenColor.toArray(),Q.extensions=Q.extensions||{},Q.extensions[this.name]=J,C[this.name]=!0}}class lN{constructor(A){this.writer=A,this.name="KHR_materials_anisotropy"}writeMaterial(A,Q){if(!A.isMeshPhysicalMaterial||A.anisotropy==0)return;let B=this.writer,C=B.extensionsUsed,J={};if(A.anisotropyMap){let I={index:B.processTexture(A.anisotropyMap)};B.applyTextureTransform(I,A.anisotropyMap),J.anisotropyTexture=I}J.anisotropyStrength=A.anisotropy,J.anisotropyRotation=A.anisotropyRotation,Q.extensions=Q.extensions||{},Q.extensions[this.name]=J,C[this.name]=!0}}class sN{constructor(A){this.writer=A,this.name="KHR_materials_emissive_strength"}writeMaterial(A,Q){if(!A.isMeshStandardMaterial||A.emissiveIntensity===1)return;let C=this.writer.extensionsUsed,J={};J.emissiveStrength=A.emissiveIntensity,Q.extensions=Q.extensions||{},Q.extensions[this.name]=J,C[this.name]=!0}}class iN{constructor(A){this.writer=A,this.name="EXT_materials_bump"}writeMaterial(A,Q){if(!A.isMeshStandardMaterial||A.bumpScale===1&&!A.bumpMap)return;let B=this.writer,C=B.extensionsUsed,J={};if(A.bumpMap){let I={index:B.processTexture(A.bumpMap),texCoord:A.bumpMap.channel};B.applyTextureTransform(I,A.bumpMap),J.bumpTexture=I}J.bumpFactor=A.bumpScale,Q.extensions=Q.extensions||{},Q.extensions[this.name]=J,C[this.name]=!0}}class nN{constructor(A){this.writer=A,this.name="EXT_mesh_gpu_instancing"}writeNode(A,Q){if(!A.isInstancedMesh)return;let B=this.writer,C=A,J=new Float32Array(C.count*3),I=new Float32Array(C.count*4),q=new Float32Array(C.count*3),K=new h0,Y=new p,Z=new n1,H=new p;for(let W=0;W<C.count;W++)C.getMatrixAt(W,K),K.decompose(Y,Z,H),Y.toArray(J,W*3),Z.toArray(I,W*4),H.toArray(q,W*3);let G={TRANSLATION:B.processAccessor(new T1(J,3)),ROTATION:B.processAccessor(new T1(I,4)),SCALE:B.processAccessor(new T1(q,3))};if(C.instanceColor)G._COLOR_0=B.processAccessor(C.instanceColor);Q.extensions=Q.extensions||{},Q.extensions[this.name]={attributes:G},B.extensionsUsed[this.name]=!0,B.extensionsRequired[this.name]=!0}}OQ.Utils={insertKeyframe:function(A,Q){let C=A.getValueSize(),J=new A.TimeBufferType(A.times.length+1),I=new A.ValueBufferType(A.values.length+C),q=A.createInterpolant(new A.ValueBufferType(C)),K;if(A.times.length===0){J[0]=Q;for(let Y=0;Y<C;Y++)I[Y]=0;K=0}else if(Q<A.times[0]){if(Math.abs(A.times[0]-Q)<0.001)return 0;J[0]=Q,J.set(A.times,1),I.set(q.evaluate(Q),0),I.set(A.values,C),K=0}else if(Q>A.times[A.times.length-1]){if(Math.abs(A.times[A.times.length-1]-Q)<0.001)return A.times.length-1;J[J.length-1]=Q,J.set(A.times,0),I.set(A.values,0),I.set(q.evaluate(Q),A.values.length),K=J.length-1}else for(let Y=0;Y<A.times.length;Y++){if(Math.abs(A.times[Y]-Q)<0.001)return Y;if(A.times[Y]<Q&&A.times[Y+1]>Q){J.set(A.times.slice(0,Y+1),0),J[Y+1]=Q,J.set(A.times.slice(Y+1),Y+2),I.set(A.values.slice(0,(Y+1)*C),0),I.set(q.evaluate(Q),(Y+1)*C),I.set(A.values.slice((Y+1)*C),(Y+2)*C),K=Y+1;break}}return A.times=J,A.values=I,K},mergeMorphTargetTracks:function(A,Q){let B=[],C={},J=A.tracks;for(let I=0;I<J.length;++I){let q=J[I],K=W1.parseTrackName(q.name),Y=W1.findNode(Q,K.nodeName);if(K.propertyName!=="morphTargetInfluences"||K.propertyIndex===void 0){B.push(q);continue}if(q.createInterpolant!==q.InterpolantFactoryMethodDiscrete&&q.createInterpolant!==q.InterpolantFactoryMethodLinear){if(q.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),q=q.clone(),q.setInterpolation(BQ)}let Z=Y.morphTargetInfluences.length,H=Y.morphTargetDictionary[K.propertyIndex];if(H===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+K.propertyIndex);let G;if(C[Y.uuid]===void 0){G=q.clone();let F=new G.ValueBufferType(Z*G.times.length);for(let z=0;z<G.times.length;z++)F[z*Z+H]=G.values[z];G.name=(K.nodeName||"")+".morphTargetInfluences",G.values=F,C[Y.uuid]=G,B.push(G);continue}let W=q.createInterpolant(new q.ValueBufferType(1));G=C[Y.uuid];for(let F=0;F<G.times.length;F++)G.values[F*Z+H]=W.evaluate(G.times[F]);for(let F=0;F<q.times.length;F++){let z=this.insertKeyframe(G,q.times[F]);G.values[z*Z+H]=q.values[F]}}return A.tracks=B,A}};var oN=(A)=>{return A.material!==void 0&&A.userData&&A.userData.variantMaterials&&!!Array.from(A.userData.variantMaterials.values()).filter((Q)=>WI(Q.material))},WI=(A)=>{return A&&A.isMaterial&&!Array.isArray(A)};class FI{constructor(A){this.writer=A,this.name="KHR_materials_variants",this.variantNames=[]}beforeParse(A){let Q=new Set;for(let B of A)B.traverse((C)=>{if(!oN(C))return;let J=C.userData.variantMaterials,I=C.userData.variantData;for(let[q,K]of I){let Y=J.get(K.index);if(Y&&WI(Y.material))Q.add(q)}});Q.forEach((B)=>this.variantNames.push(B))}writeMesh(A,Q){if(!oN(A))return;let B=A.userData,C=B.variantMaterials,J=B.variantData,I=new Map,q=new Map,K=Array.from(J.values()).sort((H,G)=>{return H.index-G.index});for(let[H,G]of K.entries())q.set(G.index,H);for(let H of J.values()){let G=C.get(H.index);if(!G||!WI(G.material))continue;let W=this.writer.processMaterial(G.material);if(!I.has(W))I.set(W,{material:W,variants:[]});I.get(W).variants.push(q.get(H.index))}let Y=Array.from(I.values()).map((H)=>{return H.variants.sort((G,W)=>G-W)&&H}).sort((H,G)=>H.material-G.material);if(Y.length===0)return;let Z=WI(B.originalMaterial)?this.writer.processMaterial(B.originalMaterial):-1;for(let H of Q.primitives){if(Z>=0)H.material=Z;H.extensions=H.extensions||{},H.extensions[this.name]={mappings:Y}}}afterParse(){if(this.variantNames.length===0)return;let A=this.writer.json;A.extensions=A.extensions||{};let Q=this.variantNames.map((B)=>{return{name:B}});A.extensions[this.name]={variants:Q},this.writer.extensionsUsed[this.name]=!0}}class aN{constructor(A,Q,B,C,J){this.xrLight=A,this.renderer=Q,this.lightProbe=B,this.xrWebGLBinding=null,this.estimationStartCallback=J,this.frameCallback=this.onXRFrame.bind(this);let I=Q.xr.getSession();if(C&&"XRWebGLBinding"in window){let q=new p7(16);A.environment=q.texture;let K=Q.getContext();switch(I.preferredReflectionFormat){case"srgba8":K.getExtension("EXT_sRGB");break;case"rgba16f":K.getExtension("OES_texture_half_float");break}this.xrWebGLBinding=new XRWebGLBinding(I,K),this.lightProbe.addEventListener("reflectionchange",()=>{this.updateReflection()})}I.requestAnimationFrame(this.frameCallback)}updateReflection(){let A=this.renderer.properties.get(this.xrLight.environment);if(A){let Q=this.xrWebGLBinding.getReflectionCubeMap(this.lightProbe);if(Q)A.__webglTexture=Q,this.xrLight.environment.needsPMREMUpdate=!0}}onXRFrame(A,Q){if(!this.xrLight)return;Q.session.requestAnimationFrame(this.frameCallback);let C=Q.getLightEstimate(this.lightProbe);if(C){this.xrLight.lightProbe.sh.fromArray(C.sphericalHarmonicsCoefficients),this.xrLight.lightProbe.intensity=1;let J=Math.max(1,Math.max(C.primaryLightIntensity.x,Math.max(C.primaryLightIntensity.y,C.primaryLightIntensity.z)));if(this.xrLight.directionalLight.color.setRGB(C.primaryLightIntensity.x/J,C.primaryLightIntensity.y/J,C.primaryLightIntensity.z/J),this.xrLight.directionalLight.intensity=J,this.xrLight.directionalLight.position.copy(C.primaryLightDirection),this.estimationStartCallback)this.estimationStartCallback(),this.estimationStartCallback=null}}dispose(){this.xrLight=null,this.renderer=null,this.lightProbe=null,this.xrWebGLBinding=null}}class MX extends vA{constructor(A,Q=!0){super();this.lightProbe=new GH,this.lightProbe.intensity=0,this.add(this.lightProbe),this.directionalLight=new GQ,this.directionalLight.intensity=0,this.add(this.directionalLight),this.environment=null;let B=null,C=!1;A.xr.addEventListener("sessionstart",()=>{let J=A.xr.getSession();if("requestLightProbe"in J)J.requestLightProbe({reflectionFormat:J.preferredReflectionFormat}).then((I)=>{B=new aN(this,A,I,Q,()=>{C=!0,this.dispatchEvent({type:"estimationstart"})})})}),A.xr.addEventListener("sessionend",()=>{if(B)B.dispose(),B=null;if(C)this.dispatchEvent({type:"estimationend"})}),this.dispose=()=>{if(B)B.dispose(),B=null;this.remove(this.lightProbe),this.lightProbe=null,this.remove(this.directionalLight),this.directionalLight=null,this.environment=null}}}var VI=1e4;var rN=50;class T2{constructor(A=50){this.velocity=0,this.naturalFrequency=0,this.setDecayTime(A)}setDecayTime(A){this.naturalFrequency=1/Math.max(0.001,A)}update(A,Q,B,C){let J=0.0002*this.naturalFrequency;if(A==null||C===0)return Q;if(A===Q&&this.velocity===0)return Q;if(B<0)return A;let I=A-Q,q=this.velocity+this.naturalFrequency*I,K=I+B*q,Y=Math.exp(-this.naturalFrequency*B),Z=(q-this.naturalFrequency*K)*Y,H=-this.naturalFrequency*(Z+q*Y);if(Math.abs(Z)<J*Math.abs(C)&&H*I>=0)return this.velocity=0,Q;else return this.velocity=Z,Q+K*Y}}var A8=0.2,tN=0.03,Lg=0.75,A$=12,Mg=Math.PI/(2*A$),eN=new M0,UI=(A,Q,B)=>{let C=Q>0?B>0?0:-Math.PI/2:B>0?Math.PI/2:Math.PI;for(let J=0;J<=A$;++J)A.push(Q+(A8-tN)*Math.cos(C),B+(A8-tN)*Math.sin(C),0,Q+A8*Math.cos(C),B+A8*Math.sin(C),0),C+=Mg};class zI extends A1{constructor(A,Q){let B=new k2,C=[],J=[],{size:I,boundingBox:q}=A,K=I.x/2,Y=(Q==="back"?I.y:I.z)/2;UI(J,K,Y),UI(J,-K,Y),UI(J,-K,-Y),UI(J,K,-Y);let Z=J.length/3;for(let W=0;W<Z-2;W+=2)C.push(W,W+1,W+3,W,W+3,W+2);let H=Z-2;C.push(H,H+1,1,H,1,0),B.setAttribute("position",new b2(J,3)),B.setIndex(C);super(B);this.side=Q;let G=this.material;switch(G.side=bA,G.transparent=!0,G.opacity=0,this.goalOpacity=0,this.opacityDamper=new T2,this.hitPlane=new A1(new P2(2*(K+A8),2*(Y+A8))),this.hitPlane.visible=!1,this.hitPlane.material.side=bA,this.add(this.hitPlane),q.getCenter(this.position),Q){case"bottom":this.rotateX(-Math.PI/2),this.shadowHeight=q.min.y,this.position.y=this.shadowHeight;break;case"back":this.shadowHeight=q.min.z,this.position.z=this.shadowHeight}A.target.add(this),this.offsetHeight=0}getHit(A,Q,B){eN.set(Q,-B),this.hitPlane.visible=!0;let C=A.positionAndNormalFromPoint(eN,this.hitPlane);return this.hitPlane.visible=!1,C==null?null:C.position}getExpandedHit(A,Q,B){this.hitPlane.scale.set(1000,1000,1000),this.hitPlane.updateMatrixWorld();let C=this.getHit(A,Q,B);return this.hitPlane.scale.set(1,1,1),C}set offsetHeight(A){if(A-=0.001,this.side==="back")this.position.z=this.shadowHeight+A;else this.position.y=this.shadowHeight+A}get offsetHeight(){if(this.side==="back")return this.position.z-this.shadowHeight;else return this.position.y-this.shadowHeight}set show(A){this.goalOpacity=A?Lg:0}updateOpacity(A){let Q=this.material;Q.opacity=this.opacityDamper.update(Q.opacity,this.goalOpacity,A,1),this.visible=Q.opacity>0}dispose(){var A;let{geometry:Q,material:B}=this.hitPlane;Q.dispose(),B.dispose(),this.geometry.dispose(),this.material.dispose(),(A=this.parent)===null||A===void 0||A.remove(this)}}var F2=(A,Q)=>({type:"number",number:A,unit:Q}),zA=(()=>{let A={},Q=1000;return(B)=>{let C=B;if(C in A)return A[C];let J=[],I=0;while(B){if(++I>1000){B="";break}let q=C$(B),K=q.nodes[0];if(K==null||K.terms.length===0)break;J.push(K),B=q.remainingInput}return A[C]=J}})(),C$=(()=>{let A=/^(\-\-|[a-z\u0240-\uffff])/i,Q=/^([\*\+\/]|[\-]\s)/i,B=/^[\),]/,C="(",J="#";return(I)=>{let q=[];while(I.length)if(I=I.trim(),B.test(I))break;else if(I[0]==="("){let{nodes:K,remainingInput:Y}=Q$(I);I=Y,q.push({type:"function",name:{type:"ident",value:"calc"},arguments:K})}else if(A.test(I)){let K=Og(I),Y=K.nodes[0];if(I=K.remainingInput,I[0]==="("){let{nodes:Z,remainingInput:H}=Q$(I);q.push({type:"function",name:Y,arguments:Z}),I=H}else q.push(Y)}else if(Q.test(I))q.push({type:"operator",value:I[0]}),I=I.slice(1);else{let{nodes:K,remainingInput:Y}=I[0]==="#"?Pg(I):kg(I);if(K.length===0)break;q.push(K[0]),I=Y}return{nodes:[{type:"expression",terms:q}],remainingInput:I}}})(),Og=(()=>{let A=/[^a-z0-9_\-\u0240-\uffff]/i;return(Q)=>{let B=Q.match(A),C=B==null?Q:Q.substr(0,B.index),J=B==null?"":Q.substr(B.index);return{nodes:[{type:"ident",value:C}],remainingInput:J}}})(),kg=(()=>{let A=/[\+\-]?(\d+[\.]\d+|\d+|[\.]\d+)([eE][\+\-]?\d+)?/,Q=/^[a-z%]+/i,B=/^(m|mm|cm|rad|deg|[%])$/;return(C)=>{let J=C.match(A),I=J==null?"0":J[0];C=I==null?C:C.slice(I.length);let q=C.match(Q),K=q!=null&&q[0]!==""?q[0]:null,Y=q==null?C:C.slice(K.length);if(K!=null&&!B.test(K))K=null;return{nodes:[{type:"number",number:parseFloat(I)||0,unit:K}],remainingInput:Y}}})(),Pg=(()=>{let A=/^[a-f0-9]*/i;return(Q)=>{Q=Q.slice(1).trim();let B=Q.match(A);return{nodes:B==null?[]:[{type:"hex",value:B[0]}],remainingInput:B==null?Q:Q.slice(B[0].length)}}})(),Q$=(A)=>{let Q=[];A=A.slice(1).trim();while(A.length){let B=C$(A);if(Q.push(B.nodes[0]),A=B.remainingInput.trim(),A[0]===",")A=A.slice(1).trim();else if(A[0]===")"){A=A.slice(1);break}}return{nodes:Q,remainingInput:A}},B$=Symbol("visitedTypes");class OX{constructor(A){this[B$]=A}walk(A,Q){let B=A.slice();while(B.length){let C=B.shift();if(this[B$].indexOf(C.type)>-1)Q(C);switch(C.type){case"expression":B.unshift(...C.terms);break;case"function":B.unshift(C.name,...C.arguments);break}}}}var m4=Object.freeze({type:"number",number:0,unit:null});var Q8=(A,Q=0)=>{let{number:B,unit:C}=A;if(!isFinite(B))B=Q,C="rad";else if(A.unit==="rad"||A.unit==null)return A;return{type:"number",number:(C==="deg"&&B!=null?B:0)*Math.PI/180,unit:"rad"}};var J$=(A,Q=0)=>{let{number:B,unit:C}=A;if(!isFinite(B))B=Q,C="m";else if(A.unit==="m")return A;let J;switch(C){default:J=1;break;case"cm":J=0.01;break;case"mm":J=0.001;break}return{type:"number",number:J*B,unit:"m"}},DA=(()=>{let A=(B)=>B,Q={rad:A,deg:Q8,m:A,mm:J$,cm:J$};return(B,C=m4)=>{if(!isFinite(B.number))B.number=C.number,B.unit=C.unit;let{unit:J}=B;if(J==null)return B;let I=Q[J];if(I==null)return C;return I(B)}})();var H$,I$,q$,C8=Symbol("evaluate"),EI=Symbol("lastValue");class l1{constructor(){this[H$]=null}static evaluatableFor(A,Q=m4){if(A instanceof l1)return A;if(A.type==="number"){if(A.unit==="%")return new X$(A,Q);return A}switch(A.name.value){case"calc":return new W$(A,Q);case"env":return new G$(A)}return m4}static evaluate(A){if(A instanceof l1)return A.evaluate();return A}static isConstant(A){if(A instanceof l1)return A.isConstant;return!0}static applyIntrinsics(A,Q){let{basis:B,keywords:C}=Q,{auto:J}=C;return B.map((I,q)=>{let K=J[q]==null?I:J[q],Y=A[q]?A[q]:K;if(Y.type==="ident"){let Z=Y.value;if(Z in C)Y=C[Z][q]}if(Y==null||Y.type==="ident")Y=K;if(Y.unit==="%")return F2(Y.number/100*I.number,I.unit);if(Y=DA(Y,I),Y.unit!==I.unit)return I;return Y})}get isConstant(){return!1}evaluate(){if(!this.isConstant||this[EI]==null)this[EI]=this[C8]();return this[EI]}}H$=EI;var K$=Symbol("percentage"),kX=Symbol("basis");class X$ extends l1{constructor(A,Q){super();this[K$]=A,this[kX]=Q}get isConstant(){return!0}[C8](){return F2(this[K$].number/100*this[kX].number,this[kX].unit)}}var DI=Symbol("identNode");class G$ extends l1{constructor(A){super();this[I$]=null;let Q=A.arguments.length?A.arguments[0].terms[0]:null;if(Q!=null&&Q.type==="ident")this[DI]=Q}get isConstant(){return!1}[(I$=DI,C8)](){if(this[DI]!=null)switch(this[DI].value){case"window-scroll-y":let A=window.pageYOffset,Q=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight);return{type:"number",number:A/(Q-window.innerHeight)||0,unit:null}}return m4}}var _g=/[\*\/]/,B8=Symbol("evaluator");class W$ extends l1{constructor(A,Q=m4){super();if(this[q$]=null,A.arguments.length!==1)return;let B=A.arguments[0].terms.slice(),C=[];while(B.length){let J=B.shift();if(C.length>0){let I=C[C.length-1];if(I.type==="operator"&&_g.test(I.value)){let q=C.pop(),K=C.pop();if(K==null)return;C.push(new jX(q,l1.evaluatableFor(K,Q),l1.evaluatableFor(J,Q)));continue}}C.push(J.type==="operator"?J:l1.evaluatableFor(J,Q))}while(C.length>2){let[J,I,q]=C.splice(0,3);if(I.type!=="operator")return;C.unshift(new jX(I,l1.evaluatableFor(J,Q),l1.evaluatableFor(q,Q)))}if(C.length===1)this[B8]=C[0]}get isConstant(){return this[B8]==null||l1.isConstant(this[B8])}[(q$=B8,C8)](){return this[B8]!=null?l1.evaluate(this[B8]):m4}}var Y$=Symbol("operator"),PX=Symbol("left"),_X=Symbol("right");class jX extends l1{constructor(A,Q,B){super();this[Y$]=A,this[PX]=Q,this[_X]=B}get isConstant(){return l1.isConstant(this[PX])&&l1.isConstant(this[_X])}[C8](){let A=DA(l1.evaluate(this[PX])),Q=DA(l1.evaluate(this[_X])),{number:B,unit:C}=A,{number:J,unit:I}=Q;if(I!=null&&C!=null&&I!=C)return m4;let q=C||I,K;switch(this[Y$].value){case"+":K=B+J;break;case"-":K=B-J;break;case"/":K=B/J;break;case"*":K=B*J;break;default:return m4}return{type:"number",number:K,unit:q}}}var TX=Symbol("evaluatables"),Z$=Symbol("intrinsics");class kQ extends l1{constructor(A,Q){super();this[Z$]=Q;let B=A[0],C=B!=null?B.terms:[];this[TX]=Q.basis.map((J,I)=>{let q=C[I];if(q==null)return{type:"ident",value:"auto"};if(q.type==="ident")return q;return l1.evaluatableFor(q,J)})}get isConstant(){for(let A of this[TX])if(!l1.isConstant(A))return!1;return!0}[C8](){let A=this[TX].map((Q)=>l1.evaluate(Q));return l1.applyIntrinsics(A,this[Z$]).map((Q)=>Q.number)}}var E$,w$,N$,$$,J8=Symbol("instances"),F$=Symbol("activateListener"),V$=Symbol("deactivateListener"),SX=Symbol("notifyInstances"),U$=Symbol("notify"),z$=Symbol("callback");class d4{constructor(A){this[z$]=A}static[SX](){for(let A of d4[J8])A[U$]()}static[(E$=J8,F$)](){window.addEventListener("scroll",this[SX],{passive:!0})}static[V$](){window.removeEventListener("scroll",this[SX])}observe(){if(d4[J8].size===0)d4[F$]();d4[J8].add(this)}disconnect(){if(d4[J8].delete(this),d4[J8].size===0)d4[V$]()}[U$](){this[z$]()}}d4[E$]=new Set;var D$=Symbol("computeStyleCallback"),R$=Symbol("astWalker"),PQ=Symbol("dependencies"),L$=Symbol("onScroll");class yX{constructor(A){this[w$]={},this[N$]=new OX(["function"]),this[$$]=()=>{this[D$]({relatedState:"window-scroll"})},this[D$]=A}observeEffectsFor(A){let Q={},B=this[PQ];this[R$].walk(A,(C)=>{let{name:J}=C,q=C.arguments[0].terms[0];if(J.value!=="env"||q==null||q.type!=="ident")return;switch(q.value){case"window-scroll-y":if(Q["window-scroll"]==null){let K="window-scroll"in B?B["window-scroll"]:new d4(this[L$]);K.observe(),delete B["window-scroll"],Q["window-scroll"]=K}break}});for(let C in B)B[C].disconnect();this[PQ]=Q}dispose(){for(let A in this[PQ])this[PQ][A].disconnect()}}w$=PQ,N$=R$,$$=L$;var c4=(A)=>{let Q=A.observeEffects||!1,B=A.intrinsics instanceof Function?A.intrinsics:()=>A.intrinsics;return(C,J)=>{let{updated:I,connectedCallback:q,disconnectedCallback:K}=C,Y=Symbol(`${J}StyleEffector`),Z=Symbol(`${J}StyleEvaluator`),H=Symbol(`${J}UpdateEvaluator`),G=Symbol(`${J}EvaluateAndSync`);Object.defineProperties(C,{[Y]:{value:null,writable:!0},[Z]:{value:null,writable:!0},[H]:{value:function(){let W=zA(this[J]);if(this[Z]=new kQ(W,B(this)),this[Y]==null&&Q)this[Y]=new yX(()=>this[G]());if(this[Y]!=null)this[Y].observeEffectsFor(W)}},[G]:{value:function(){if(this[Z]==null)return;let W=this[Z].evaluate();this[A.updateHandler](W)}},updated:{value:function(W){if(W.has(J))this[H](),this[G]();I.call(this,W)}},connectedCallback:{value:function(){q.call(this),this.requestUpdate(J,this[J])}},disconnectedCallback:{value:function(){if(K.call(this),this[Y]!=null)this[Y].dispose(),this[Y]=null}}})}};var M$=(A)=>A<0.5?2*A*A:-1+(4-2*A)*A,Tg=(A,Q,B=M$)=>(C)=>A+(Q-A)*B(C),jg=(A,Q)=>{let B=(J)=>(I)=>J+=I,C=Q.map(B(0));return(J)=>{J=d2(J,0,1),J*=C[C.length-1];let I=C.findIndex((Y)=>Y>=J),q=I<1?0:C[I-1],K=C[I];return A[I]((J-q)/(K-q))}},z5=(A)=>{let Q=[],B=[],C=A.initialValue;for(let J=0;J<A.keyframes.length;++J){let I=A.keyframes[J],{value:q,frames:K}=I,Y=I.ease||M$,Z=Tg(C,q,Y);Q.push(Z),B.push(K),C=q}return jg(Q,B)};var V2=function(A,Q,B,C){var J=arguments.length,I=J<3?Q:C===null?C=Object.getOwnPropertyDescriptor(Q,B):C,q;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")I=Reflect.decorate(A,Q,B,C);else for(var K=A.length-1;K>=0;K--)if(q=A[K])I=(J<3?q(I):J>3?q(Q,B,I):q(Q,B))||I;return J>3&&I&&Object.defineProperty(Q,B,I),I},Sg=5000,yg=z5({initialValue:0,keyframes:[{frames:5,value:-1},{frames:1,value:-1},{frames:8,value:1},{frames:1,value:1},{frames:5,value:0},{frames:18,value:0}]}),fg=z5({initialValue:0,keyframes:[{frames:1,value:1},{frames:5,value:1},{frames:1,value:0},{frames:6,value:0}]}),hg=30,xg=12,x$="0deg 75deg 105%",gg="auto auto auto",vg="auto",bg=2.2,ug=["front","right","back","left"],pg=["upper-","","lower-"],mg=3000,dg=". Use mouse, touch or arrow keys to move.",wI={AUTO:"auto",NONE:"none"},fX={BASIC:"basic",WIGGLE:"wiggle"},cg={PAN_Y:"pan-y",PAN_X:"pan-x",NONE:"none"},O$=()=>{return{basis:[Q8(F2(hg,"deg"))],keywords:{auto:[null]}}},lg=()=>{return{basis:[Q8(F2(xg,"deg"))],keywords:{auto:[null]}}},g$=(()=>{let A=zA(x$)[0].terms,Q=DA(A[0]),B=DA(A[1]);return(C)=>{let J=C[W0].idealCameraDistance();return{basis:[Q,B,F2(J,"m")],keywords:{auto:[null,null,F2(105,"%")]}}}})(),sg=(A)=>{let Q=bg*A[W0].boundingSphere.radius;return{basis:[F2(-1/0,"rad"),F2(Math.PI/8,"rad"),F2(Q,"m")],keywords:{auto:[null,null,null]}}},ig=(A)=>{let Q=g$(A),C=new kQ([],Q).evaluate()[2];return{basis:[F2(1/0,"rad"),F2(Math.PI-Math.PI/8,"rad"),F2(C,"m")],keywords:{auto:[null,null,null]}}},ng=(A)=>{let Q=A[W0].boundingBox.getCenter(new p);return{basis:[F2(Q.x,"m"),F2(Q.y,"m"),F2(Q.z,"m")],keywords:{auto:[null,null,null]}}},v$=Math.PI/2,og=Math.PI/3,ag=v$/2,rg=2*Math.PI,S1=Symbol("controls"),yQ=Symbol("panElement"),hX=Symbol("promptElement"),NI=Symbol("promptAnimatedContainer"),xX=Symbol("fingerAnimatedContainers"),$I=Symbol("deferInteractionPrompt"),k$=Symbol("updateAria"),P$=Symbol("updateCameraForRadius"),I8=Symbol("cancelPrompts"),gX=Symbol("onChange"),_Q=Symbol("onPointerChange"),D5=Symbol("waitingToPromptUser"),RI=Symbol("userHasInteracted"),q8=Symbol("promptElementVisibleTime"),TQ=Symbol("lastPromptOffset"),LI=Symbol("cancellationSource"),vX=Symbol("lastSpherical"),jQ=Symbol("jumpCamera"),bX=Symbol("initialized"),SQ=Symbol("maintainThetaPhi"),_$=Symbol("syncCameraOrbit"),T$=Symbol("syncFieldOfView"),j$=Symbol("syncCameraTarget"),S$=Symbol("syncMinCameraOrbit"),y$=Symbol("syncMaxCameraOrbit"),f$=Symbol("syncMinFieldOfView"),h$=Symbol("syncMaxFieldOfView"),b$=(A)=>{var Q,B,C,J,I,q,K,Y,Z,H,G,W,F,z,U,E,w;class L extends A{constructor(){super(...arguments);this.cameraControls=!1,this.cameraOrbit=x$,this.cameraTarget=gg,this.fieldOfView=vg,this.minCameraOrbit="auto",this.maxCameraOrbit="auto",this.minFieldOfView="auto",this.maxFieldOfView="auto",this.interactionPromptThreshold=mg,this.interactionPrompt=wI.AUTO,this.interactionPromptStyle=fX.WIGGLE,this.orbitSensitivity=1,this.zoomSensitivity=1,this.panSensitivity=1,this.touchAction=cg.NONE,this.disableZoom=!1,this.disablePan=!1,this.disableTap=!1,this.interpolationDecay=rN,this[Q]=this.shadowRoot.querySelector(".interaction-prompt"),this[B]=this.shadowRoot.querySelector("#prompt"),this[C]=[this.shadowRoot.querySelector("#finger0"),this.shadowRoot.querySelector("#finger1")],this[J]=this.shadowRoot.querySelector(".pan-target"),this[I]=0,this[q]=1/0,this[K]=!1,this[Y]=!1,this[Z]=u1.AUTOMATIC,this[H]=new uX(this[W0].camera,this[mA],this[W0]),this[G]=new u4,this[W]=!1,this[F]=!1,this[z]=!1,this[U]=()=>{let X=this[S1].changeSource;if(this[LI]=X,X===u1.USER_INTERACTION)this[RI]=!0,this[$I]()},this[E]=()=>{this[k$](),this[e1]();let X=this[S1].changeSource;this.dispatchEvent(new CustomEvent("camera-change",{detail:{source:X}}))},this[w]=(X)=>{this[fQ].classList.toggle("pointer-tumbling",X.type==="pointer-change-start")}}get inputSensitivity(){return this[S1].inputSensitivity}set inputSensitivity(X){this[S1].inputSensitivity=X}getCameraOrbit(){let{theta:X,phi:V,radius:D}=this[vX];return{theta:X,phi:V,radius:D,toString(){return`${this.theta}rad ${this.phi}rad ${this.radius}m`}}}getCameraTarget(){return z4(this[G1].isPresenting?this[G1].arRenderer.target:this[W0].getTarget())}getFieldOfView(){return this[S1].getFieldOfView()}getMinimumFieldOfView(){return this[S1].options.minimumFieldOfView}getMaximumFieldOfView(){return this[S1].options.maximumFieldOfView}getIdealAspect(){return this[W0].idealAspect}jumpCameraToGoal(){this[jQ]=!0,this.requestUpdate(jQ,!1)}resetInteractionPrompt(){this[TQ]=0,this[q8]=1/0,this[RI]=!1,this[D5]=this.interactionPrompt===wI.AUTO&&this.cameraControls}zoom(X){let V=new WheelEvent("wheel",{deltaY:-30*X});this[mA].dispatchEvent(V)}connectedCallback(){super.connectedCallback(),this[S1].addEventListener("user-interaction",this[I8]),this[S1].addEventListener("pointer-change-start",this[_Q]),this[S1].addEventListener("pointer-change-end",this[_Q])}disconnectedCallback(){super.disconnectedCallback(),this[S1].removeEventListener("user-interaction",this[I8]),this[S1].removeEventListener("pointer-change-start",this[_Q]),this[S1].removeEventListener("pointer-change-end",this[_Q])}updated(X){super.updated(X);let V=this[S1],D=this[W0];if(X.has("cameraControls")){if(this.cameraControls){if(V.enableInteraction(),this.interactionPrompt===wI.AUTO)this[D5]=!0}else V.disableInteraction(),this[$I]();this[mA].setAttribute("aria-label",this[K8])}if(X.has("disableZoom"))V.disableZoom=this.disableZoom;if(X.has("disablePan"))V.enablePan=!this.disablePan;if(X.has("disableTap"))V.enableTap=!this.disableTap;if(X.has("interactionPrompt")||X.has("cameraControls")||X.has("src"))if(this.interactionPrompt===wI.AUTO&&this.cameraControls&&!this[RI])this[D5]=!0;else this[$I]();if(X.has("interactionPromptStyle"))this[NI].style.opacity=this.interactionPromptStyle==fX.BASIC?"1":"0";if(X.has("touchAction")){let N=this.touchAction;V.applyOptions({touchAction:N}),V.updateTouchActionStyle()}if(X.has("orbitSensitivity"))V.orbitSensitivity=this.orbitSensitivity;if(X.has("zoomSensitivity"))V.zoomSensitivity=this.zoomSensitivity;if(X.has("panSensitivity"))V.panSensitivity=this.panSensitivity;if(X.has("interpolationDecay"))V.setDamperDecayTime(this.interpolationDecay),D.setTargetDamperDecayTime(this.interpolationDecay);if(this[jQ]===!0)Promise.resolve().then(()=>{V.jumpToGoal(),D.jumpToGoal(),this[gX](),this[jQ]=!1})}async updateFraming(){let X=this[W0],V=X.adjustedFoV(X.framedFoVDeg);await X.updateFraming();let D=X.adjustedFoV(X.framedFoVDeg),N=this[S1].getFieldOfView()/V;this[S1].setFieldOfView(D*N),this[SQ]=!0,this.requestUpdate("maxFieldOfView"),this.requestUpdate("fieldOfView"),this.requestUpdate("minCameraOrbit"),this.requestUpdate("maxCameraOrbit"),this.requestUpdate("cameraOrbit"),await this.updateComplete}interact(X,V,D){let N=this[mA],R=this[xX];if(R[0].style.opacity==="1"){console.warn("interact() failed because an existing interaction is running.");return}let k=new Array;k.push({x:z5(V.x),y:z5(V.y)});let P=[{x:k[0].x(0),y:k[0].y(0)}];if(D!=null)k.push({x:z5(D.x),y:z5(D.y)}),P.push({x:k[1].x(0),y:k[1].y(0)});let $=performance.now(),{width:_,height:h}=this[W0],S=this.getBoundingClientRect(),O=(u)=>{for(let[T,d]of P.entries()){let{style:g}=R[T];if(g.transform=`translateX(${_*d.x}px) translateY(${h*d.y}px)`,u==="pointerdown")g.opacity="1";else if(u==="pointerup")g.opacity="0";let l={pointerId:T-5678,pointerType:"touch",target:N,clientX:_*d.x+S.x,clientY:h*d.y+S.y,altKey:!0};N.dispatchEvent(new PointerEvent(u,l))}},M=()=>{let u=this[LI];if(u!==u1.AUTOMATIC||!N.isConnected){for(let d of this[xX])d.style.opacity="0";O("pointercancel"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:u}})),document.removeEventListener("visibilitychange",y);return}let T=Math.min(1,(performance.now()-$)/X);for(let[d,g]of P.entries())g.x=k[d].x(T),g.y=k[d].y(T);if(O("pointermove"),T<1)requestAnimationFrame(M);else O("pointerup"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:u1.AUTOMATIC}})),document.removeEventListener("visibilitychange",y)},y=()=>{let u=0;if(document.visibilityState==="hidden")u=performance.now()-$;else $=performance.now()-u};document.addEventListener("visibilitychange",y),O("pointerdown"),this[LI]=u1.AUTOMATIC,requestAnimationFrame(M)}[(Q=hX,B=NI,C=xX,J=yQ,I=TQ,q=q8,K=RI,Y=D5,Z=LI,H=S1,G=vX,W=jQ,F=bX,z=SQ,T$)](X){let V=this[S1],D=this[W0];D.framedFoVDeg=X[0]*180/Math.PI,V.changeSource=u1.NONE,V.setFieldOfView(D.adjustedFoV(D.framedFoVDeg)),this[I8]()}[_$](X){let V=this[S1];if(this[SQ]){let{theta:D,phi:N}=this.getCameraOrbit();X[0]=D,X[1]=N,this[SQ]=!1}V.changeSource=u1.NONE,V.setOrbit(X[0],X[1],X[2]),this[I8]()}[S$](X){this[S1].applyOptions({minimumAzimuthalAngle:X[0],minimumPolarAngle:X[1],minimumRadius:X[2]}),this.jumpCameraToGoal()}[y$](X){this[S1].applyOptions({maximumAzimuthalAngle:X[0],maximumPolarAngle:X[1],maximumRadius:X[2]}),this[P$](X[2]),this.jumpCameraToGoal()}[f$](X){this[S1].applyOptions({minimumFieldOfView:X[0]*180/Math.PI}),this.jumpCameraToGoal()}[h$](X){let V=this[W0].adjustedFoV(X[0]*180/Math.PI);this[S1].applyOptions({maximumFieldOfView:V}),this.jumpCameraToGoal()}[j$](X){let[V,D,N]=X;if(!this[G1].arRenderer.isPresenting)this[W0].setTarget(V,D,N);this[S1].changeSource=u1.NONE,this[G1].arRenderer.updateTarget(),this[I8]()}[BA](X,V){if(super[BA](X,V),this[G1].isPresenting||!this[U4]())return;let D=this[S1],N=this[W0],R=performance.now();if(this[D5]){if(this.loaded&&R>this[Y8]+this.interactionPromptThreshold)this[D5]=!1,this[q8]=R,this[hX].classList.add("visible")}if(isFinite(this[q8])&&this.interactionPromptStyle===fX.WIGGLE){let $=(R-this[q8])/Sg%1,_=yg($),h=fg($);if(this[NI].style.opacity=`${h}`,_!==this[TQ]){let S=_*N.width*0.05,O=(_-this[TQ])*Math.PI/16;this[NI].style.transform=`translateX(${S}px)`,D.changeSource=u1.AUTOMATIC,D.adjustOrbit(O,0,0),this[TQ]=_}}let k=D.update(X,V),P=N.updateTarget(V);if(k||P)this[gX]()}[$I](){this[D5]=!1,this[hX].classList.remove("visible"),this[q8]=1/0}[P$](X){let V=Math.max(this[W0].farRadius(),X),D=0,N=Math.abs(2*V);this[S1].updateNearFar(0,N)}[k$](){let{theta:X,phi:V}=this[S1].getCameraSpherical(this[vX]),D=(4+Math.floor((X%rg+ag)/v$))%4,N=Math.floor(V/og),R=ug[D],k=pg[N];this[MI](`View from stage ${k}${R}`)}get[K8](){return super[K8].replace(/\.$/,"")+(this.cameraControls?dg:"")}async[E5](X){let V=this[S1],D=this[W0],N=D.adjustedFoV(D.framedFoVDeg);super[E5](X);let R=D.adjustedFoV(D.framedFoVDeg)/N,k=V.getFieldOfView()*(isFinite(R)?R:1);V.updateAspect(this[W0].aspect),this.requestUpdate("maxFieldOfView",this.maxFieldOfView),await this.updateComplete,this[S1].setFieldOfView(k),this.jumpCameraToGoal()}[V4](){if(super[V4](),this[bX])this[SQ]=!0;else this[bX]=!0;this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.requestUpdate("minCameraOrbit",this.minCameraOrbit),this.requestUpdate("maxCameraOrbit",this.maxCameraOrbit),this.requestUpdate("cameraOrbit",this.cameraOrbit),this.requestUpdate("cameraTarget",this.cameraTarget),this.jumpCameraToGoal()}}return U=I8,E=gX,w=_Q,V2([f0({type:Boolean,attribute:"camera-controls"})],L.prototype,"cameraControls",void 0),V2([c4({intrinsics:g$,observeEffects:!0,updateHandler:_$}),f0({type:String,attribute:"camera-orbit",hasChanged:()=>!0})],L.prototype,"cameraOrbit",void 0),V2([c4({intrinsics:ng,observeEffects:!0,updateHandler:j$}),f0({type:String,attribute:"camera-target",hasChanged:()=>!0})],L.prototype,"cameraTarget",void 0),V2([c4({intrinsics:O$,observeEffects:!0,updateHandler:T$}),f0({type:String,attribute:"field-of-view",hasChanged:()=>!0})],L.prototype,"fieldOfView",void 0),V2([c4({intrinsics:sg,updateHandler:S$}),f0({type:String,attribute:"min-camera-orbit",hasChanged:()=>!0})],L.prototype,"minCameraOrbit",void 0),V2([c4({intrinsics:ig,updateHandler:y$}),f0({type:String,attribute:"max-camera-orbit",hasChanged:()=>!0})],L.prototype,"maxCameraOrbit",void 0),V2([c4({intrinsics:lg,updateHandler:f$}),f0({type:String,attribute:"min-field-of-view",hasChanged:()=>!0})],L.prototype,"minFieldOfView",void 0),V2([c4({intrinsics:O$,updateHandler:h$}),f0({type:String,attribute:"max-field-of-view",hasChanged:()=>!0})],L.prototype,"maxFieldOfView",void 0),V2([f0({type:Number,attribute:"interaction-prompt-threshold"})],L.prototype,"interactionPromptThreshold",void 0),V2([f0({type:String,attribute:"interaction-prompt"})],L.prototype,"interactionPrompt",void 0),V2([f0({type:String,attribute:"interaction-prompt-style"})],L.prototype,"interactionPromptStyle",void 0),V2([f0({type:Number,attribute:"orbit-sensitivity"})],L.prototype,"orbitSensitivity",void 0),V2([f0({type:Number,attribute:"zoom-sensitivity"})],L.prototype,"zoomSensitivity",void 0),V2([f0({type:Number,attribute:"pan-sensitivity"})],L.prototype,"panSensitivity",void 0),V2([f0({type:String,attribute:"touch-action"})],L.prototype,"touchAction",void 0),V2([f0({type:Boolean,attribute:"disable-zoom"})],L.prototype,"disableZoom",void 0),V2([f0({type:Boolean,attribute:"disable-pan"})],L.prototype,"disablePan",void 0),V2([f0({type:Boolean,attribute:"disable-tap"})],L.prototype,"disableTap",void 0),V2([f0({type:Number,attribute:"interpolation-decay"})],L.prototype,"interpolationDecay",void 0),L};var tg=0.018,u$=2,eg=300,Av=new M0,p$=new p,m$=Object.freeze({minimumRadius:0,maximumRadius:1/0,minimumPolarAngle:Math.PI/8,maximumPolarAngle:Math.PI-Math.PI/8,minimumAzimuthalAngle:-1/0,maximumAzimuthalAngle:1/0,minimumFieldOfView:10,maximumFieldOfView:45,touchAction:"none"}),OI=Math.PI/8,kI=0.04,PI=10;var u1={USER_INTERACTION:"user-interaction",NONE:"none",AUTOMATIC:"automatic"};class uX extends O2{constructor(A,Q,B){super();this.camera=A,this.element=Q,this.scene=B,this.orbitSensitivity=1,this.zoomSensitivity=1,this.panSensitivity=1,this.inputSensitivity=1,this.changeSource=u1.NONE,this._interactionEnabled=!1,this._disableZoom=!1,this.isUserPointing=!1,this.enablePan=!0,this.enableTap=!0,this.panProjection=new n0,this.panPerPixel=0,this.spherical=new u4,this.goalSpherical=new u4,this.thetaDamper=new T2,this.phiDamper=new T2,this.radiusDamper=new T2,this.logFov=Math.log(m$.maximumFieldOfView),this.goalLogFov=this.logFov,this.fovDamper=new T2,this.touchMode=null,this.pointers=[],this.startTime=0,this.startPointerPosition={clientX:0,clientY:0},this.lastSeparation=0,this.touchDecided=!1,this.onContext=(C)=>{if(this.enablePan)C.preventDefault();else for(let J of this.pointers)this.onPointerUp(new PointerEvent("pointercancel",Object.assign(Object.assign({},this.startPointerPosition),{pointerId:J.id})))},this.touchModeZoom=(C,J)=>{if(!this._disableZoom){let I=this.twoTouchDistance(this.pointers[0],this.pointers[1]),q=kI*this.zoomSensitivity*(this.lastSeparation-I)*50/this.scene.height;this.lastSeparation=I,this.userAdjustOrbit(0,0,q)}if(this.panPerPixel>0)this.movePan(C,J)},this.disableScroll=(C)=>{C.preventDefault()},this.touchModeRotate=(C,J)=>{let{touchAction:I}=this._options;if(!this.touchDecided&&I!=="none"){this.touchDecided=!0;let q=Math.abs(C),K=Math.abs(J);if(this.changeSource===u1.USER_INTERACTION&&(I==="pan-y"&&K>q||I==="pan-x"&&q>K)){this.touchMode=null;return}else this.element.addEventListener("touchmove",this.disableScroll,{passive:!1})}this.handleSinglePointerMove(C,J)},this.onPointerDown=(C)=>{if(this.pointers.length>2)return;let{element:J}=this;if(this.pointers.length===0)J.addEventListener("pointermove",this.onPointerMove),J.addEventListener("pointerup",this.onPointerUp),this.touchMode=null,this.touchDecided=!1,this.startPointerPosition.clientX=C.clientX,this.startPointerPosition.clientY=C.clientY,this.startTime=performance.now();try{J.setPointerCapture(C.pointerId)}catch(I){}if(this.pointers.push({clientX:C.clientX,clientY:C.clientY,id:C.pointerId}),this.isUserPointing=!1,C.pointerType==="touch")this.changeSource=C.altKey?u1.AUTOMATIC:u1.USER_INTERACTION,this.onTouchChange(C);else this.changeSource=u1.USER_INTERACTION,this.onMouseDown(C);if(this.changeSource===u1.USER_INTERACTION)this.dispatchEvent({type:"user-interaction"})},this.onPointerMove=(C)=>{let J=this.pointers.find((Y)=>Y.id===C.pointerId);if(J==null)return;if(C.pointerType==="mouse"&&C.buttons===0){this.onPointerUp(C);return}let I=this.pointers.length,q=(C.clientX-J.clientX)/I,K=(C.clientY-J.clientY)/I;if(q===0&&K===0)return;if(J.clientX=C.clientX,J.clientY=C.clientY,C.pointerType==="touch"){if(this.changeSource=C.altKey?u1.AUTOMATIC:u1.USER_INTERACTION,this.touchMode!==null)this.touchMode(q,K)}else if(this.changeSource=u1.USER_INTERACTION,this.panPerPixel>0)this.movePan(q,K);else this.handleSinglePointerMove(q,K)},this.onPointerUp=(C)=>{let{element:J}=this,I=this.pointers.findIndex((q)=>q.id===C.pointerId);if(I!==-1)this.pointers.splice(I,1);if(this.panPerPixel>0&&!C.altKey)this.resetRadius();if(this.pointers.length===0){if(J.removeEventListener("pointermove",this.onPointerMove),J.removeEventListener("pointerup",this.onPointerUp),J.removeEventListener("touchmove",this.disableScroll),this.enablePan&&this.enableTap)this.recenter(C)}else if(this.touchMode!==null)this.onTouchChange(C);if(this.scene.element[yQ].style.opacity=0,J.style.cursor="grab",this.panPerPixel=0,this.isUserPointing)this.dispatchEvent({type:"pointer-change-end"})},this.onWheel=(C)=>{this.changeSource=u1.USER_INTERACTION;let J=C.deltaY*(C.deltaMode==1?18:1)*kI*this.zoomSensitivity/30;this.userAdjustOrbit(0,0,J),C.preventDefault(),this.dispatchEvent({type:"user-interaction"})},this.onKeyDown=(C)=>{let{changeSource:J}=this;if(this.changeSource=u1.USER_INTERACTION,C.shiftKey&&this.enablePan?this.panKeyCodeHandler(C):this.orbitZoomKeyCodeHandler(C))C.preventDefault(),this.dispatchEvent({type:"user-interaction"});else this.changeSource=J},this._options=Object.assign({},m$),this.setOrbit(0,Math.PI/2,1),this.setFieldOfView(100),this.jumpToGoal()}get interactionEnabled(){return this._interactionEnabled}enableInteraction(){if(this._interactionEnabled===!1){let{element:A}=this;if(A.addEventListener("pointerdown",this.onPointerDown),A.addEventListener("pointercancel",this.onPointerUp),!this._disableZoom)A.addEventListener("wheel",this.onWheel);A.addEventListener("keydown",this.onKeyDown),A.addEventListener("touchmove",()=>{},{passive:!1}),A.addEventListener("contextmenu",this.onContext),this.element.style.cursor="grab",this._interactionEnabled=!0,this.updateTouchActionStyle()}}disableInteraction(){if(this._interactionEnabled===!0){let{element:A}=this;A.removeEventListener("pointerdown",this.onPointerDown),A.removeEventListener("pointermove",this.onPointerMove),A.removeEventListener("pointerup",this.onPointerUp),A.removeEventListener("pointercancel",this.onPointerUp),A.removeEventListener("wheel",this.onWheel),A.removeEventListener("keydown",this.onKeyDown),A.removeEventListener("contextmenu",this.onContext),A.style.cursor="",this.touchMode=null,this._interactionEnabled=!1,this.updateTouchActionStyle()}}get options(){return this._options}set disableZoom(A){if(this._disableZoom!=A){if(this._disableZoom=A,A===!0)this.element.removeEventListener("wheel",this.onWheel);else this.element.addEventListener("wheel",this.onWheel);this.updateTouchActionStyle()}}getCameraSpherical(A=new u4){return A.copy(this.spherical)}getFieldOfView(){return this.camera.fov}applyOptions(A){Object.assign(this._options,A),this.setOrbit(),this.setFieldOfView(Math.exp(this.goalLogFov))}updateNearFar(A,Q){this.camera.far=Q===0?2:Q,this.camera.near=Math.max(A,this.camera.far/1000),this.camera.updateProjectionMatrix()}updateAspect(A){this.camera.aspect=A,this.camera.updateProjectionMatrix()}setOrbit(A=this.goalSpherical.theta,Q=this.goalSpherical.phi,B=this.goalSpherical.radius){let{minimumAzimuthalAngle:C,maximumAzimuthalAngle:J,minimumPolarAngle:I,maximumPolarAngle:q,minimumRadius:K,maximumRadius:Y}=this._options,{theta:Z,phi:H,radius:G}=this.goalSpherical,W=d2(A,C,J);if(!isFinite(C)&&!isFinite(J))this.spherical.theta=this.wrapAngle(this.spherical.theta-W)+W;let F=d2(Q,I,q),z=d2(B,K,Y);if(W===Z&&F===H&&z===G)return!1;if(!isFinite(W)||!isFinite(F)||!isFinite(z))return!1;return this.goalSpherical.theta=W,this.goalSpherical.phi=F,this.goalSpherical.radius=z,this.goalSpherical.makeSafe(),!0}setRadius(A){this.goalSpherical.radius=A,this.setOrbit()}setFieldOfView(A){let{minimumFieldOfView:Q,maximumFieldOfView:B}=this._options;A=d2(A,Q,B),this.goalLogFov=Math.log(A)}setDamperDecayTime(A){this.thetaDamper.setDecayTime(A),this.phiDamper.setDecayTime(A),this.radiusDamper.setDecayTime(A),this.fovDamper.setDecayTime(A)}adjustOrbit(A,Q,B){let{theta:C,phi:J,radius:I}=this.goalSpherical,{minimumRadius:q,maximumRadius:K,minimumFieldOfView:Y,maximumFieldOfView:Z}=this._options,H=this.spherical.theta-C,G=Math.PI-0.001,W=C-d2(A,-G-H,G-H),F=J-Q,z=B===0?0:((B>0?K:q)-I)/(Math.log(B>0?Z:Y)-this.goalLogFov),U=I+B*(isFinite(z)?z:(K-q)*2);if(this.setOrbit(W,F,U),B!==0){let E=this.goalLogFov+B;this.setFieldOfView(Math.exp(E))}}jumpToGoal(){this.update(0,VI)}update(A,Q){if(this.isStationary())return!1;let{maximumPolarAngle:B,maximumRadius:C}=this._options,J=this.spherical.theta-this.goalSpherical.theta;if(Math.abs(J)>Math.PI&&!isFinite(this._options.minimumAzimuthalAngle)&&!isFinite(this._options.maximumAzimuthalAngle))this.spherical.theta-=Math.sign(J)*2*Math.PI;return this.spherical.theta=this.thetaDamper.update(this.spherical.theta,this.goalSpherical.theta,Q,Math.PI),this.spherical.phi=this.phiDamper.update(this.spherical.phi,this.goalSpherical.phi,Q,B),this.spherical.radius=this.radiusDamper.update(this.spherical.radius,this.goalSpherical.radius,Q,C),this.logFov=this.fovDamper.update(this.logFov,this.goalLogFov,Q,1),this.moveCamera(),!0}updateTouchActionStyle(){let{style:A}=this.element;if(this._interactionEnabled){let{touchAction:Q}=this._options;if(this._disableZoom&&Q!=="none")A.touchAction="manipulation";else A.touchAction=Q}else A.touchAction=""}isStationary(){return this.goalSpherical.theta===this.spherical.theta&&this.goalSpherical.phi===this.spherical.phi&&this.goalSpherical.radius===this.spherical.radius&&this.goalLogFov===this.logFov}moveCamera(){if(this.spherical.makeSafe(),this.camera.position.setFromSpherical(this.spherical),this.camera.setRotationFromEuler(new VA(this.spherical.phi-Math.PI/2,this.spherical.theta,0,"YXZ")),this.camera.fov!==Math.exp(this.logFov))this.camera.fov=Math.exp(this.logFov),this.camera.updateProjectionMatrix()}userAdjustOrbit(A,Q,B){this.adjustOrbit(A*this.orbitSensitivity*this.inputSensitivity,Q*this.orbitSensitivity*this.inputSensitivity,B*this.inputSensitivity)}wrapAngle(A){let Q=(A+Math.PI)/(2*Math.PI);return(Q-Math.floor(Q))*2*Math.PI-Math.PI}pixelLengthToSphericalAngle(A){return 2*Math.PI*A/this.scene.height}twoTouchDistance(A,Q){let{clientX:B,clientY:C}=A,{clientX:J,clientY:I}=Q,q=J-B,K=I-C;return Math.sqrt(q*q+K*K)}handleSinglePointerMove(A,Q){let B=this.pixelLengthToSphericalAngle(A),C=this.pixelLengthToSphericalAngle(Q);if(this.isUserPointing===!1)this.isUserPointing=!0,this.dispatchEvent({type:"pointer-change-start"});this.userAdjustOrbit(B,C,0)}initializePan(){let{theta:A,phi:Q}=this.spherical,B=A-this.scene.yaw;this.panPerPixel=tg*this.panSensitivity/this.scene.height,this.panProjection.set(-Math.cos(B),-Math.cos(Q)*Math.sin(B),0,0,Math.sin(Q),0,Math.sin(B),-Math.cos(Q)*Math.cos(B),0)}movePan(A,Q){let{scene:B}=this,C=p$.set(A,Q,0).multiplyScalar(this.inputSensitivity),J=this.spherical.radius*Math.exp(this.logFov)*this.panPerPixel;C.multiplyScalar(J);let I=B.getTarget();I.add(C.applyMatrix3(this.panProjection)),B.boundingSphere.clampPoint(I,I),B.setTarget(I.x,I.y,I.z)}recenter(A){if(performance.now()>this.startTime+eg||Math.abs(A.clientX-this.startPointerPosition.clientX)>u$||Math.abs(A.clientY-this.startPointerPosition.clientY)>u$)return;let{scene:Q}=this,B=Q.positionAndNormalFromPoint(Q.getNDC(A.clientX,A.clientY));if(B==null){let{cameraTarget:C}=Q.element;Q.element.cameraTarget="",Q.element.cameraTarget=C,this.userAdjustOrbit(0,0,1)}else Q.target.worldToLocal(B.position),Q.setTarget(B.position.x,B.position.y,B.position.z)}resetRadius(){let{scene:A}=this,Q=A.positionAndNormalFromPoint(Av.set(0,0));if(Q==null)return;A.target.worldToLocal(Q.position);let B=A.getTarget(),{theta:C,phi:J}=this.spherical,I=C-A.yaw,q=p$.set(Math.sin(J)*Math.sin(I),Math.cos(J),Math.sin(J)*Math.cos(I)),K=q.dot(Q.position.sub(B));B.add(q.multiplyScalar(K)),A.setTarget(B.x,B.y,B.z),this.setOrbit(void 0,void 0,this.goalSpherical.radius-K)}onTouchChange(A){if(this.pointers.length===1)this.touchMode=this.touchModeRotate;else{if(this._disableZoom){this.touchMode=null,this.element.removeEventListener("touchmove",this.disableScroll);return}if(this.touchMode=this.touchDecided&&this.touchMode===null?null:this.touchModeZoom,this.touchDecided=!0,this.element.addEventListener("touchmove",this.disableScroll,{passive:!1}),this.lastSeparation=this.twoTouchDistance(this.pointers[0],this.pointers[1]),this.enablePan&&this.touchMode!=null){if(this.initializePan(),!A.altKey)this.scene.element[yQ].style.opacity=1}}}onMouseDown(A){if(this.panPerPixel=0,this.enablePan&&(A.button===2||A.ctrlKey||A.metaKey||A.shiftKey))this.initializePan(),this.scene.element[yQ].style.opacity=1;this.element.style.cursor="grabbing"}orbitZoomKeyCodeHandler(A){let Q=!0;switch(A.key){case"PageUp":this.userAdjustOrbit(0,0,kI*this.zoomSensitivity);break;case"PageDown":this.userAdjustOrbit(0,0,-1*kI*this.zoomSensitivity);break;case"ArrowUp":this.userAdjustOrbit(0,-OI,0);break;case"ArrowDown":this.userAdjustOrbit(0,OI,0);break;case"ArrowLeft":this.userAdjustOrbit(-OI,0,0);break;case"ArrowRight":this.userAdjustOrbit(OI,0,0);break;default:Q=!1;break}return Q}panKeyCodeHandler(A){this.initializePan();let Q=!0;switch(A.key){case"ArrowUp":this.movePan(0,-1*PI);break;case"ArrowDown":this.movePan(0,PI);break;case"ArrowLeft":this.movePan(-1*PI,0);break;case"ArrowRight":this.movePan(PI,0);break;default:Q=!1;break}return Q}}var Qv=30,Bv=0.8,d$=1.5,Cv=20,c$=1.3,Jv=1/c$,Iv=0.25,qv=10,M3={NOT_PRESENTING:"not-presenting",SESSION_STARTED:"session-started",OBJECT_PLACED:"object-placed",FAILED:"failed"},TI={TRACKING:"tracking",NOT_TRACKING:"not-tracking"},_I=new p,Kv=new h0,Yv=new p,Zv=new b1(45,1,0.1,100);class pX extends O2{constructor(A){super();this.renderer=A,this.currentSession=null,this.placeOnWall=!1,this.placementBox=null,this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.initialHitSource=null,this.transientHitTestSource=null,this.inputSource=null,this._presentedScene=null,this.resolveCleanup=null,this.exitWebXRButtonContainer=null,this.overlay=null,this.xrLight=null,this.tracking=!0,this.frames=0,this.initialized=!1,this.oldTarget=new p,this.placementComplete=!1,this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.lastDragPosition=new p,this.firstRatio=0,this.lastAngle=0,this.goalPosition=new p,this.goalYaw=0,this.goalScale=1,this.xDamper=new T2,this.yDamper=new T2,this.zDamper=new T2,this.yawDamper=new T2,this.scaleDamper=new T2,this.onExitWebXRButtonContainerClick=()=>this.stopPresenting(),this.onUpdateScene=()=>{if(this.placementBox!=null&&this.isPresenting)this.placementBox.dispose(),this.placementBox=new zI(this.presentedScene,this.placeOnWall?"back":"bottom")},this.onSelectStart=(Q)=>{let B=this.transientHitTestSource;if(B==null)return;let C=this.frame.getHitTestResultsForTransientInput(B),J=this.presentedScene,I=this.placementBox;if(C.length===1){this.inputSource=Q.inputSource;let{axes:q}=this.inputSource.gamepad,K=I.getHit(this.presentedScene,q[0],q[1]);if(I.show=!0,K!=null)this.isTranslating=!0,this.lastDragPosition.copy(K);else if(this.placeOnWall===!1)this.isRotating=!0,this.lastAngle=q[0]*d$}else if(C.length===2){I.show=!0,this.isTwoFingering=!0;let{separation:q}=this.fingerPolar(C);this.firstRatio=q/J.scale.x}},this.onSelectEnd=()=>{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.inputSource=null,this.goalPosition.y+=this.placementBox.offsetHeight*this.presentedScene.scale.x,this.placementBox.show=!1},this.threeRenderer=A.threeRenderer,this.threeRenderer.xr.enabled=!0}async resolveARSession(){_H();let A=await navigator.xr.requestSession("immersive-ar",{requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay","light-estimation"],domOverlay:this.overlay?{root:this.overlay}:void 0});return this.threeRenderer.xr.setReferenceSpaceType("local"),await this.threeRenderer.xr.setSession(A),this.threeRenderer.xr.cameraAutoUpdate=!1,A}get presentedScene(){return this._presentedScene}async supportsPresentation(){try{return _H(),await navigator.xr.isSessionSupported("immersive-ar")}catch(A){return console.warn("Request to present in WebXR denied:"),console.warn(A),console.warn("Falling back to next ar-mode"),!1}}async present(A,Q=!1){if(this.isPresenting)console.warn("Cannot present while a model is already presenting");let B=new Promise((Y,Z)=>{requestAnimationFrame(()=>Y())});if(A.setHotspotsVisibility(!1),A.queueRender(),await B,this._presentedScene=A,this.overlay=A.element.shadowRoot.querySelector("div.default"),Q===!0)this.xrLight=new MX(this.threeRenderer),this.xrLight.addEventListener("estimationstart",()=>{if(!this.isPresenting||this.xrLight==null)return;let Y=this.presentedScene;Y.add(this.xrLight),Y.environment=this.xrLight.environment});let C=await this.resolveARSession();C.addEventListener("end",()=>{this.postSessionCleanup()},{once:!0});let J=A.element.shadowRoot.querySelector(".slot.exit-webxr-ar-button");J.classList.add("enabled"),J.addEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=J;let I=await C.requestReferenceSpace("viewer");this.tracking=!0,this.frames=0,this.initialized=!1,this.turntableRotation=A.yaw,this.goalYaw=A.yaw,this.goalScale=1,A.setBackground(null),this.oldShadowIntensity=A.shadowIntensity,A.setShadowIntensity(0.01),this.oldTarget.copy(A.getTarget()),A.element.addEventListener("load",this.onUpdateScene);let q=Cv*Math.PI/180,K=this.placeOnWall===!0?void 0:new XRRay(new DOMPoint(0,0,0),{x:0,y:-Math.sin(q),z:-Math.cos(q)});C.requestHitTestSource({space:I,offsetRay:K}).then((Y)=>{this.initialHitSource=Y}),this.currentSession=C,this.placementBox=new zI(A,this.placeOnWall?"back":"bottom"),this.placementComplete=!1,this.lastTick=performance.now(),this.dispatchEvent({type:"status",status:M3.SESSION_STARTED})}async stopPresenting(){if(!this.isPresenting)return;let A=new Promise((Q)=>{this.resolveCleanup=Q});try{await this.currentSession.end(),await A}catch(Q){console.warn("Error while trying to end WebXR AR session"),console.warn(Q),this.postSessionCleanup()}}get isPresenting(){return this.presentedScene!=null}get target(){return this.oldTarget}updateTarget(){let A=this.presentedScene;if(A!=null){let Q=A.getTarget();if(this.oldTarget.copy(Q),this.placeOnWall)Q.z=A.boundingBox.min.z;else Q.y=A.boundingBox.min.y;A.setTarget(Q.x,Q.y,Q.z)}}postSessionCleanup(){let A=this.currentSession;if(A!=null)A.removeEventListener("selectstart",this.onSelectStart),A.removeEventListener("selectend",this.onSelectEnd),this.currentSession=null;let Q=this.presentedScene;if(this._presentedScene=null,Q!=null){let{element:I}=Q;if(this.xrLight!=null)Q.remove(this.xrLight),this.xrLight.dispose(),this.xrLight=null;Q.position.set(0,0,0),Q.scale.set(1,1,1),Q.setShadowOffset(0);let q=this.turntableRotation;if(q!=null)Q.yaw=q;let K=this.oldShadowIntensity;if(K!=null)Q.setShadowIntensity(K);Q.setEnvironmentAndSkybox(I[s7],I[i7]);let Y=this.oldTarget;Q.setTarget(Y.x,Y.y,Y.z),Q.xrCamera=null,Q.element.removeEventListener("load",this.onUpdateScene),Q.orientHotspots(0),I.requestUpdate("cameraTarget"),I.requestUpdate("maxCameraOrbit"),I[E5](I.getBoundingClientRect()),requestAnimationFrame(()=>{Q.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:u1.NONE}}))})}this.renderer.height=0;let B=this.exitWebXRButtonContainer;if(B!=null)B.classList.remove("enabled"),B.removeEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=null;let C=this.transientHitTestSource;if(C!=null)C.cancel(),this.transientHitTestSource=null;let J=this.initialHitSource;if(J!=null)J.cancel(),this.initialHitSource=null;if(this.placementBox!=null)this.placementBox.dispose(),this.placementBox=null;if(this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.inputSource=null,this.overlay=null,this.resolveCleanup!=null)this.resolveCleanup();this.dispatchEvent({type:"status",status:M3.NOT_PRESENTING})}updateView(A){let Q=this.presentedScene,B=this.threeRenderer.xr;B.updateCamera(Zv),Q.xrCamera=B.getCamera();let{elements:C}=Q.getCamera().matrixWorld;if(Q.orientHotspots(Math.atan2(C[1],C[5])),!this.initialized)this.placeInitially(),this.initialized=!0;if(A.requestViewportScale&&A.recommendedViewportScale){let I=A.recommendedViewportScale;A.requestViewportScale(Math.max(I,Iv))}let J=B.getBaseLayer();if(J!=null){let I=J instanceof XRWebGLLayer?J.getViewport(A):B.getBinding().getViewSubImage(J,A).viewport;this.threeRenderer.setViewport(I.x,I.y,I.width,I.height)}}placeInitially(){let A=this.presentedScene,{position:Q,element:B}=A,C=A.getCamera(),{width:J,height:I}=this.overlay.getBoundingClientRect();A.setSize(J,I),C.projectionMatrixInverse.copy(C.projectionMatrix).invert();let{theta:q,radius:K}=B.getCameraOrbit(),Y=C.getWorldDirection(_I);A.yaw=Math.atan2(-Y.x,-Y.z)-q,this.goalYaw=A.yaw,Q.copy(C.position).add(Y.multiplyScalar(K)),this.updateTarget();let Z=A.getTarget();Q.add(Z).sub(this.oldTarget),this.goalPosition.copy(Q),A.setHotspotsVisibility(!0);let{session:H}=this.frame;H.addEventListener("selectstart",this.onSelectStart),H.addEventListener("selectend",this.onSelectEnd),H.requestHitTestSourceForTransientInput({profile:"generic-touchscreen"}).then((G)=>{this.transientHitTestSource=G})}getTouchLocation(){let{axes:A}=this.inputSource.gamepad,Q=this.placementBox.getExpandedHit(this.presentedScene,A[0],A[1]);if(Q!=null){if(_I.copy(Q).sub(this.presentedScene.getCamera().position),_I.length()>qv)return null}return Q}getHitPoint(A){let Q=this.threeRenderer.xr.getReferenceSpace(),B=A.getPose(Q);if(B==null)return null;let C=Kv.fromArray(B.transform.matrix);if(this.placeOnWall===!0)this.goalYaw=Math.atan2(C.elements[4],C.elements[6]);return C.elements[5]>0.75!==this.placeOnWall?Yv.setFromMatrixPosition(C):null}moveToFloor(A){let Q=this.initialHitSource;if(Q==null)return;let B=A.getHitTestResults(Q);if(B.length==0)return;let C=B[0],J=this.getHitPoint(C);if(J==null)return;if(this.placementBox.show=!0,!this.isTranslating)if(this.placeOnWall)this.goalPosition.copy(J);else this.goalPosition.y=J.y;Q.cancel(),this.initialHitSource=null,this.dispatchEvent({type:"status",status:M3.OBJECT_PLACED})}fingerPolar(A){let Q=A[0].inputSource.gamepad.axes,B=A[1].inputSource.gamepad.axes,C=B[0]-Q[0],J=B[1]-Q[1],I=Math.atan2(J,C),q=this.lastAngle-I;if(q>Math.PI)q-=2*Math.PI;else if(q<-Math.PI)q+=2*Math.PI;return this.lastAngle=I,{separation:Math.sqrt(C*C+J*J),deltaYaw:q}}processInput(A){let Q=this.transientHitTestSource;if(Q==null)return;if(!this.isTranslating&&!this.isTwoFingering&&!this.isRotating)return;let B=A.getHitTestResultsForTransientInput(Q),C=this.presentedScene,J=C.scale.x;if(this.isTwoFingering){if(B.length<2)this.isTwoFingering=!1;else{let{separation:I,deltaYaw:q}=this.fingerPolar(B);if(this.placeOnWall===!1)this.goalYaw+=q;if(C.canScale){let K=I/this.firstRatio;this.goalScale=K<c$&&K>Jv?1:K}}return}else if(B.length===2){this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!0;let{separation:I}=this.fingerPolar(B);this.firstRatio=I/J;return}if(this.isRotating){let I=this.inputSource.gamepad.axes[0]*d$;this.goalYaw+=I-this.lastAngle,this.lastAngle=I}else if(this.isTranslating)B.forEach((I)=>{if(I.inputSource!==this.inputSource)return;let q=null;if(I.results.length>0)q=this.getHitPoint(I.results[0]);if(q==null)q=this.getTouchLocation();if(q==null)return;if(this.goalPosition.sub(this.lastDragPosition),this.placeOnWall===!1){let K=q.y-this.lastDragPosition.y;if(K<0){this.placementBox.offsetHeight=K/J,this.presentedScene.setShadowOffset(K);let Y=_I.copy(C.getCamera().position),Z=-K/(Y.y-q.y);Y.multiplyScalar(Z),q.multiplyScalar(1-Z).add(Y)}}this.goalPosition.add(q),this.lastDragPosition.copy(q)})}moveScene(A){let Q=this.presentedScene,{position:B,yaw:C}=Q,J=Q.boundingSphere.radius,I=this.goalPosition,q=Q.scale.x,K=this.placementBox,Y=u1.NONE;if(!I.equals(B)||this.goalScale!==q){Y=u1.USER_INTERACTION;let{x:Z,y:H,z:G}=B;Z=this.xDamper.update(Z,I.x,A,J),H=this.yDamper.update(H,I.y,A,J),G=this.zDamper.update(G,I.z,A,J),B.set(Z,H,G);let W=this.scaleDamper.update(q,this.goalScale,A,1);if(Q.scale.set(W,W,W),!this.isTranslating){let F=I.y-H;if(this.placementComplete&&this.placeOnWall===!1)K.offsetHeight=F/W,Q.setShadowOffset(F);else if(F===0)this.placementComplete=!0,K.show=!1,Q.setShadowIntensity(Bv)}}K.updateOpacity(A),Q.updateTarget(A),Q.yaw=this.yawDamper.update(C,this.goalYaw,A,Math.PI),Q.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:Y}}))}onWebXRFrame(A,Q){this.frame=Q,++this.frames;let B=this.threeRenderer.xr.getReferenceSpace(),C=Q.getViewerPose(B);if(C==null&&this.tracking===!0&&this.frames>Qv)this.tracking=!1,this.dispatchEvent({type:"tracking",status:TI.NOT_TRACKING});let J=this.presentedScene;if(C==null||J==null||!J.element.loaded){this.threeRenderer.clear();return}if(this.tracking===!1)this.tracking=!0,this.dispatchEvent({type:"tracking",status:TI.TRACKING});let I=!0;for(let q of C.views){if(this.updateView(q),I){this.moveToFloor(Q),this.processInput(Q);let K=A-this.lastTick;this.moveScene(K),this.renderer.preRender(J,A,K),this.lastTick=A,J.renderShadow(this.threeRenderer)}this.threeRenderer.render(J,J.getCamera()),I=!1}}}function l$(A){let Q=new Map,B=new Map,C=A.clone();return s$(A,C,function(J,I){Q.set(I,J),B.set(J,I)}),C.traverse(function(J){if(!J.isSkinnedMesh)return;let I=J,q=Q.get(J),K=q.skeleton.bones;I.skeleton=q.skeleton.clone(),I.bindMatrix.copy(q.bindMatrix),I.skeleton.bones=K.map(function(Y){return B.get(Y)}),I.bind(I.skeleton,I.bindMatrix)}),C}function s$(A,Q,B){B(A,Q);for(let C=0;C<A.children.length;C++)s$(A.children[C],Q.children[C],B)}var i$=Symbol("prepared"),hQ=Symbol("prepare"),D4=Symbol("preparedGLTF"),xQ=Symbol("clone");class mX{constructor(A){this[D4]=A}static prepare(A){if(A.scene==null)throw new Error("Model does not have a scene");if(A[i$])return A;let Q=this[hQ](A);return Q[i$]=!0,Q}static[hQ](A){let{scene:Q}=A,B=[Q];return Object.assign(Object.assign({},A),{scene:Q,scenes:B})}get parser(){return this[D4].parser}get animations(){return this[D4].animations}get scene(){return this[D4].scene}get scenes(){return this[D4].scenes}get cameras(){return this[D4].cameras}get asset(){return this[D4].asset}get userData(){return this[D4].userData}clone(){let A=this.constructor,Q=this[xQ]();return new A(Q)}dispose(){this.scenes.forEach((A)=>{A.traverse((Q)=>{let B=Q;if(!B.material)return;(Array.isArray(B.material)?B.material:[B.material]).forEach((J)=>{for(let I in J){let q=J[I];if(q instanceof E1){let K=q.source.data;if(K.close!=null)K.close();q.dispose()}}J.dispose()}),B.geometry.dispose()})})}[xQ](){let A=this[D4],Q=l$(this.scene);Xv(Q,this.scene);let B=[Q],C=A.userData?Object.assign({},A.userData):{};return Object.assign(Object.assign({},A),{scene:Q,scenes:B,userData:C})}}var Xv=(A,Q)=>{n$(A,Q,(B,C)=>{if(C.userData.variantMaterials!==void 0)B.userData.variantMaterials=new Map(C.userData.variantMaterials);if(C.userData.variantData!==void 0)B.userData.variantData=C.userData.variantData;if(C.userData.originalMaterial!==void 0)B.userData.originalMaterial=C.userData.originalMaterial})},n$=(A,Q,B)=>{B(A,Q);for(let C=0;C<A.children.length;C++)n$(A.children[C],Q.children[C],B)};var o$=Symbol("threeGLTF"),a$=Symbol("gltf"),r$=Symbol("gltfElementMap"),t$=Symbol("threeObjectMap"),e$=Symbol("parallelTraverseThreeScene"),AR=Symbol("correlateOriginalThreeGLTF"),QR=Symbol("correlateCloneThreeGLTF");class Z8{constructor(A,Q,B,C){this[o$]=A,this[a$]=Q,this[r$]=C,this[t$]=B}static from(A,Q){if(Q!=null)return this[QR](A,Q);else return this[AR](A)}static[AR](A){let Q=A.parser.json,B=A.parser.associations,C=new Map,J={name:"Default"},I={type:"materials",index:-1};for(let q of B.keys())if(q instanceof UA&&B.get(q)==null){if(I.index<0){if(Q.materials==null)Q.materials=[];I.index=Q.materials.length,Q.materials.push(J)}q.name=J.name,B.set(q,{materials:I.index})}for(let[q,K]of B){if(K)q.userData=q.userData||{},q.userData.associations=K;for(let Y in K)if(Y!=null&&Y!=="primitives"){let Z=Y,G=(Q[Z]||[])[K[Z]];if(G==null)continue;let W=C.get(G);if(W==null)W=new Set,C.set(G,W);W.add(q)}}return new Z8(A,Q,B,C)}static[QR](A,Q){let{threeGLTF:B,gltf:C}=Q,J=JSON.parse(JSON.stringify(C)),I=new Map,q=new Map;for(let K=0;K<B.scenes.length;K++)this[e$](B.scenes[K],A.scenes[K],(Y,Z)=>{let H=Q.threeObjectMap.get(Y);if(H==null)return;for(let G in H)if(G!=null&&G!=="primitives"){let W=G,F=H[W],z=J[W][F],U=I.get(Z)||{};U[W]=F,I.set(Z,U);let E=q.get(z)||new Set;E.add(Z),q.set(z,E)}});return new Z8(A,J,I,q)}static[e$](A,Q,B){let C=(J,I)=>{if(B(J,I),J.isObject3D){let q=J,K=I;if(q.material)if(Array.isArray(q.material))for(let Y=0;Y<q.material.length;++Y)B(q.material[Y],K.material[Y]);else B(q.material,K.material);for(let Y=0;Y<J.children.length;++Y)C(J.children[Y],I.children[Y])}};C(A,Q)}get threeGLTF(){return this[o$]}get gltf(){return this[a$]}get gltfElementMap(){return this[r$]}get threeObjectMap(){return this[t$]}}var gQ=Symbol("correlatedSceneGraph");class dX extends mX{static[hQ](A){let Q=super[hQ](A);if(Q[gQ]==null)Q[gQ]=Z8.from(Q);let{scene:B}=Q,C=new p2(void 0,1/0);return B.traverse((J)=>{if(J.renderOrder=1000,J.frustumCulled=!1,!J.name)J.name=J.uuid;let I=J;if(I.material){let{geometry:q}=I;if(I.castShadow=!0,I.isSkinnedMesh)q.boundingSphere=C,q.boundingBox=null;let K=I.material;if(K.isMeshBasicMaterial===!0)K.toneMapped=!1;if(K.shadowSide=h7,K.aoMap){let{gltf:Y,threeObjectMap:Z}=Q[gQ],H=Z.get(K);if(Y.materials!=null&&H!=null&&H.materials!=null){let G=Y.materials[H.materials];if(G.occlusionTexture&&G.occlusionTexture.texCoord===0&&q.attributes.uv!=null)q.setAttribute("uv2",q.attributes.uv)}}}}),Q}get correlatedSceneGraph(){return this[D4][gQ]}[xQ](){let A=super[xQ](),Q=new Map;return A.scene.traverse((B)=>{let C=B;if(C.material){let I=C.material;if(I!=null){if(Q.has(I.uuid)){C.material=Q.get(I.uuid);return}C.material=I.clone(),Q.set(I.uuid,C.material)}}let J=B;if(J.target!==void 0)J.add(J.target)}),A[gQ]=Z8.from(A,this.correlatedSceneGraph),A}}var BR=(A,Q,B)=>{let C;switch(A){case y2:C=new Uint8ClampedArray(Q*B*4);break;case M2:C=new Uint16Array(Q*B*4);break;case CE:C=new Uint32Array(Q*B*4);break;case AE:C=new Int8Array(Q*B*4);break;case QE:C=new Int16Array(Q*B*4);break;case BE:C=new Int32Array(Q*B*4);break;case LA:C=new Float32Array(Q*B*4);break;default:throw new Error("Unsupported data type")}return C},jI,Gv=(A,Q,B,C)=>{if(jI!==void 0)return jI;let J=new u2(1,1,C);Q.setRenderTarget(J);let I=new A1(new P2,new t1({color:16777215}));Q.render(I,B),Q.setRenderTarget(null);let q=BR(A,J.width,J.height);return Q.readRenderTargetPixels(J,0,0,J.width,J.height,q),J.dispose(),I.geometry.dispose(),I.material.dispose(),jI=q[0]!==0,jI};class SI{constructor(A){var Q,B,C,J,I,q,K,Y,Z,H,G,W,F,z,U,E;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(L){throw this._renderer.setRenderTarget(null),L}this._renderer.setRenderTarget(null)},this._width=A.width,this._height=A.height,this._type=A.type,this._colorSpace=A.colorSpace;let w={format:X2,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((Q=A.renderTargetOptions)===null||Q===void 0?void 0:Q.anisotropy)!==void 0?(B=A.renderTargetOptions)===null||B===void 0?void 0:B.anisotropy:1,generateMipmaps:((C=A.renderTargetOptions)===null||C===void 0?void 0:C.generateMipmaps)!==void 0?(J=A.renderTargetOptions)===null||J===void 0?void 0:J.generateMipmaps:!1,magFilter:((I=A.renderTargetOptions)===null||I===void 0?void 0:I.magFilter)!==void 0?(q=A.renderTargetOptions)===null||q===void 0?void 0:q.magFilter:c1,minFilter:((K=A.renderTargetOptions)===null||K===void 0?void 0:K.minFilter)!==void 0?(Y=A.renderTargetOptions)===null||Y===void 0?void 0:Y.minFilter:c1,samples:((Z=A.renderTargetOptions)===null||Z===void 0?void 0:Z.samples)!==void 0?(H=A.renderTargetOptions)===null||H===void 0?void 0:H.samples:void 0,wrapS:((G=A.renderTargetOptions)===null||G===void 0?void 0:G.wrapS)!==void 0?(W=A.renderTargetOptions)===null||W===void 0?void 0:W.wrapS:S2,wrapT:((F=A.renderTargetOptions)===null||F===void 0?void 0:F.wrapT)!==void 0?(z=A.renderTargetOptions)===null||z===void 0?void 0:z.wrapT:S2};if(this._material=A.material,A.renderer)this._renderer=A.renderer;else this._renderer=SI.instantiateRenderer(),this._rendererIsDisposable=!0;if(this._scene=new W2,this._camera=new Z4,this._camera.position.set(0,0,10),this._camera.left=-0.5,this._camera.right=0.5,this._camera.top=0.5,this._camera.bottom=-0.5,this._camera.updateProjectionMatrix(),!Gv(this._type,this._renderer,this._camera,w)){let L;switch(this._type){case M2:L=this._renderer.extensions.has("EXT_color_buffer_float")?LA:void 0;break}if(L!==void 0)console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${LA}`),this._type=L;else this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown")}this._quad=new A1(new P2,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new u2(this.width,this.height,w),this._renderTarget.texture.mapping=((U=A.renderTargetOptions)===null||U===void 0?void 0:U.mapping)!==void 0?(E=A.renderTargetOptions)===null||E===void 0?void 0:E.mapping:v7}static instantiateRenderer(){let A=new g4;return A.setSize(128,128),A}toArray(){if(!this._supportsReadPixels)throw new Error("Can\'t read pixels in this browser");let A=BR(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,A),A}toDataTexture(A){let Q=new q6(this.toArray(),this.width,this.height,X2,this._type,(A===null||A===void 0?void 0:A.mapping)||v7,(A===null||A===void 0?void 0:A.wrapS)||S2,(A===null||A===void 0?void 0:A.wrapT)||S2,(A===null||A===void 0?void 0:A.magFilter)||c1,(A===null||A===void 0?void 0:A.minFilter)||c1,(A===null||A===void 0?void 0:A.anisotropy)||1,f1);return Q.generateMipmaps=(A===null||A===void 0?void 0:A.generateMipmaps)!==void 0?A===null||A===void 0?void 0:A.generateMipmaps:!1,Q}disposeOnDemandRenderer(){if(this._renderer.setRenderTarget(null),this._rendererIsDisposable)this._renderer.dispose(),this._renderer.forceContextLoss()}dispose(A){if(this.disposeOnDemandRenderer(),A)this.renderTarget.dispose();if(this.material instanceof C2)Object.values(this.material.uniforms).forEach((Q)=>{if(Q.value instanceof E1)Q.value.dispose()});Object.values(this.material).forEach((Q)=>{if(Q instanceof E1)Q.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(A){this._width=A,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(A){this._height=A,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(A){this._renderTarget=A,this._width=A.width,this._height=A.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}var Wv=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,Fv=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class JR extends C2{constructor({gamma:A,offsetHdr:Q,offsetSdr:B,gainMapMin:C,gainMapMax:J,maxDisplayBoost:I,hdrCapacityMin:q,hdrCapacityMax:K,sdr:Y,gainMap:Z}){super({name:"GainMapDecoderMaterial",vertexShader:Wv,fragmentShader:Fv,uniforms:{sdr:{value:Y},gainMap:{value:Z},gamma:{value:new p(1/A[0],1/A[1],1/A[2])},offsetHdr:{value:new p().fromArray(Q)},offsetSdr:{value:new p().fromArray(B)},gainMapMin:{value:new p().fromArray(C)},gainMapMax:{value:new p().fromArray(J)},weightFactor:{value:(Math.log2(I)-q)/(K-q)}},blending:SJ,depthTest:!1,depthWrite:!1});this._maxDisplayBoost=I,this._hdrCapacityMin=q,this._hdrCapacityMax=K,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(A){this.uniforms.sdr.value=A}get gainMap(){return this.uniforms.gainMap.value}set gainMap(A){this.uniforms.gainMap.value=A}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(A){this.uniforms.offsetHdr.value.fromArray(A)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(A){this.uniforms.offsetSdr.value.fromArray(A)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(A){this.uniforms.gainMapMin.value.fromArray(A)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(A){this.uniforms.gainMapMax.value.fromArray(A)}get gamma(){let A=this.uniforms.gamma.value;return[1/A.x,1/A.y,1/A.z]}set gamma(A){let Q=this.uniforms.gamma.value;Q.x=1/A[0],Q.y=1/A[1],Q.z=1/A[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(A){this._hdrCapacityMin=A,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(A){this._hdrCapacityMax=A,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(A){this._maxDisplayBoost=Math.max(1,Math.min(65504,A)),this.calculateWeight()}calculateWeight(){let A=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,A))}}class cX extends Error{}class lX extends Error{}var vQ=(A,Q,B)=>{let C=new RegExp(`${Q}="([^"]*)"`,"i").exec(A);if(C)return C[1];let J=new RegExp(`<${Q}[^>]*>([\\s\\S]*?)</${Q}>`,"i").exec(A);if(J){let I=J[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);if(I&&I.length===3)return I.map((q)=>q.replace(/<\/?rdf:li>/g,""));return J[1].trim()}if(B!==void 0)return B;throw new Error(`Can't find ${Q} in gainmap metadata`)},Vv=(A)=>{let Q;if(typeof TextDecoder!=="undefined")Q=new TextDecoder().decode(A);else Q=A.toString();let B=Q.indexOf("<x:xmpmeta");while(B!==-1){let C=Q.indexOf("x:xmpmeta>",B),J=Q.slice(B,C+10);try{let I=vQ(J,"hdrgm:GainMapMin","0"),q=vQ(J,"hdrgm:GainMapMax"),K=vQ(J,"hdrgm:Gamma","1"),Y=vQ(J,"hdrgm:OffsetSDR","0.015625"),Z=vQ(J,"hdrgm:OffsetHDR","0.015625"),H=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(J),G=H?H[1]:"0",W=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(J);if(!W)throw new Error("Incomplete gainmap metadata");let F=W[1];return{gainMapMin:Array.isArray(I)?I.map((z)=>parseFloat(z)):[parseFloat(I),parseFloat(I),parseFloat(I)],gainMapMax:Array.isArray(q)?q.map((z)=>parseFloat(z)):[parseFloat(q),parseFloat(q),parseFloat(q)],gamma:Array.isArray(K)?K.map((z)=>parseFloat(z)):[parseFloat(K),parseFloat(K),parseFloat(K)],offsetSdr:Array.isArray(Y)?Y.map((z)=>parseFloat(z)):[parseFloat(Y),parseFloat(Y),parseFloat(Y)],offsetHdr:Array.isArray(Z)?Z.map((z)=>parseFloat(z)):[parseFloat(Z),parseFloat(Z),parseFloat(Z)],hdrCapacityMin:parseFloat(G),hdrCapacityMax:parseFloat(F)}}catch(I){}B=Q.indexOf("<x:xmpmeta",C)}};class IR{constructor(A){this.options={debug:A&&A.debug!==void 0?A.debug:!1,extractFII:A&&A.extractFII!==void 0?A.extractFII:!0,extractNonFII:A&&A.extractNonFII!==void 0?A.extractNonFII:!0}}extract(A){return new Promise((Q,B)=>{let C=this.options.debug,J=new DataView(A.buffer);if(J.getUint16(0)!==65496){B(new Error("Not a valid jpeg"));return}let I=J.byteLength,q=2,K=0,Y;while(q<I){if(++K>250){B(new Error(`Found no marker after ${K} loops \uD83D\uDE35`));return}if(J.getUint8(q)!==255){B(new Error(`Not a valid marker at offset 0x${q.toString(16)}, found: 0x${J.getUint8(q).toString(16)}`));return}if(Y=J.getUint8(q+1),C)console.log(`Marker: ${Y.toString(16)}`);if(Y===226){if(C)console.log("Found APP2 marker (0xffe2)");let Z=q+4;if(J.getUint32(Z)===1297106432){let H=Z+4,G;if(J.getUint16(H)===18761)G=!1;else if(J.getUint16(H)===19789)G=!0;else{B(new Error("No valid endianness marker found in TIFF header"));return}if(J.getUint16(H+2,!G)!==42){B(new Error("Not valid TIFF data! (no 0x002A marker)"));return}let W=J.getUint32(H+4,!G);if(W<8){B(new Error("Not valid TIFF data! (First offset less than 8)"));return}let F=H+W,z=J.getUint16(F,!G),U=F+2,E=0;for(let V=U;V<U+12*z;V+=12)if(J.getUint16(V,!G)===45057)E=J.getUint32(V+8,!G);let w=4,L=F+2+z*12+w,X=[];for(let V=L;V<L+E*16;V+=16){let D={MPType:J.getUint32(V,!G),size:J.getUint32(V+4,!G),dataOffset:J.getUint32(V+8,!G),dependantImages:J.getUint32(V+12,!G),start:-1,end:-1,isFII:!1};if(!D.dataOffset)D.start=0,D.isFII=!0;else D.start=H+D.dataOffset,D.isFII=!1;D.end=D.start+D.size,X.push(D)}if(this.options.extractNonFII&&X.length){let V=new Blob([J]),D=[];for(let N of X){if(N.isFII&&!this.options.extractFII)continue;let R=V.slice(N.start,N.end+1,"image/jpeg");D.push(R)}Q(D)}}}q+=2+J.getUint16(q+2)}})}}var Uv=async(A)=>{let Q=Vv(A);if(!Q)throw new lX("Gain map XMP metadata not found");let C=await new IR({extractFII:!0,extractNonFII:!0}).extract(A);if(C.length!==2)throw new cX("Gain map recovery image not found");return{sdr:new Uint8Array(await C[0].arrayBuffer()),gainMap:new Uint8Array(await C[1].arrayBuffer()),metadata:Q}},CR=(A)=>{return new Promise((Q,B)=>{let C=document.createElement("img");C.onload=()=>{Q(C)},C.onerror=(J)=>{B(J)},C.src=URL.createObjectURL(A)})};class qR extends m2{constructor(A,Q){super(Q);if(A)this._renderer=A;this._internalLoadingManager=new oJ}setRenderer(A){return this._renderer=A,this}setRenderTargetOptions(A){return this._renderTargetOptions=A,this}prepareQuadRenderer(){if(!this._renderer)console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");let A=new JR({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new E1,sdr:new E1});return new SI({width:16,height:16,type:M2,colorSpace:f1,material:A,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(A,Q,B,C){let J=C?new Blob([C],{type:"image/jpeg"}):void 0,I=new Blob([B],{type:"image/jpeg"}),q,K,Y=!1;if(typeof createImageBitmap==="undefined"){let G=await Promise.all([J?CR(J):Promise.resolve(void 0),CR(I)]);K=G[0],q=G[1],Y=!0}else{let G=await Promise.all([J?createImageBitmap(J,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(I,{imageOrientation:"flipY"})]);K=G[0],q=G[1]}let Z=new E1(K||new ImageData(2,2),v7,S2,S2,c1,cZ,X2,y2,1,f1);Z.flipY=Y,Z.needsUpdate=!0;let H=new E1(q,v7,S2,S2,c1,cZ,X2,y2,1,g1);H.flipY=Y,H.needsUpdate=!0,A.width=q.width,A.height=q.height,A.material.gainMap=Z,A.material.sdr=H,A.material.gainMapMin=Q.gainMapMin,A.material.gainMapMax=Q.gainMapMax,A.material.offsetHdr=Q.offsetHdr,A.material.offsetSdr=Q.offsetSdr,A.material.gamma=Q.gamma,A.material.hdrCapacityMin=Q.hdrCapacityMin,A.material.hdrCapacityMax=Q.hdrCapacityMax,A.material.maxDisplayBoost=Math.pow(2,Q.hdrCapacityMax),A.material.needsUpdate=!0,A.render()}}class sX extends qR{load(A,Q,B,C){let J=this.prepareQuadRenderer(),I=new AA(this._internalLoadingManager);return I.setResponseType("arraybuffer"),I.setRequestHeader(this.requestHeader),I.setPath(this.path),I.setWithCredentials(this.withCredentials),this.manager.itemStart(A),I.load(A,async(q)=>{if(typeof q==="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");let K=new Uint8Array(q),Y,Z,H;try{let G=await Uv(K);Y=G.sdr,Z=G.gainMap,H=G.metadata}catch(G){if(G instanceof lX||G instanceof cX)console.warn(`Failure to reconstruct an HDR image from ${A}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),H={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},Y=K;else throw G}try{await this.render(J,H,Y,Z)}catch(G){if(this.manager.itemError(A),typeof C==="function")C(G);J.disposeOnDemandRenderer();return}if(typeof Q==="function")Q(J);this.manager.itemEnd(A),J.disposeOnDemandRenderer()},B,(q)=>{if(this.manager.itemError(A),typeof C==="function")C(q)}),J}}class iX extends HH{constructor(A){super(A);this.type=M2}parse(A){let I=function(R,k){switch(R){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(k||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(k||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(k||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(k||""))}},H=function(R,k,P){k=!k?1024:k;let _=R.pos,h=-1,S=0,O="",M=String.fromCharCode.apply(null,new Uint16Array(R.subarray(_,_+128)));while(0>(h=M.indexOf("\n"))&&S<k&&_<R.byteLength)O+=M,S+=M.length,_+=128,M+=String.fromCharCode.apply(null,new Uint16Array(R.subarray(_,_+128)));if(-1<h){if(P!==!1)R.pos+=S+h+1;return O+M.slice(0,h)}return!1},G=function(R){let k=/^#\?(\S+)/,P=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,$=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,_=/^\s*FORMAT=(\S+)\s*$/,h=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,S={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0},O,M;if(R.pos>=R.byteLength||!(O=H(R)))I(1,"no header found");if(!(M=O.match(k)))I(3,"bad initial token");S.valid|=1,S.programtype=M[1],S.string+=O+"\n";while(!0){if(O=H(R),O===!1)break;if(S.string+=O+"\n",O.charAt(0)==="#"){S.comments+=O+"\n";continue}if(M=O.match(P))S.gamma=parseFloat(M[1]);if(M=O.match($))S.exposure=parseFloat(M[1]);if(M=O.match(_))S.valid|=2,S.format=M[1];if(M=O.match(h))S.valid|=4,S.height=parseInt(M[1],10),S.width=parseInt(M[2],10);if(S.valid&2&&S.valid&4)break}if(!(S.valid&2))I(3,"missing format specifier");if(!(S.valid&4))I(3,"missing image size specifier");return S},W=function(R,k,P){let $=k;if($<8||$>32767||(R[0]!==2||R[1]!==2||R[2]&128))return new Uint8Array(R);if($!==(R[2]<<8|R[3]))I(3,"wrong scanline width");let _=new Uint8Array(4*k*P);if(!_.length)I(4,"unable to allocate buffer space");let h=0,S=0,O=4*$,M=new Uint8Array(4),y=new Uint8Array(O),u=P;while(u>0&&S<R.byteLength){if(S+4>R.byteLength)I(1);if(M[0]=R[S++],M[1]=R[S++],M[2]=R[S++],M[3]=R[S++],M[0]!=2||M[1]!=2||(M[2]<<8|M[3])!=$)I(3,"bad rgbe scanline format");let T=0,d;while(T<O&&S<R.byteLength){d=R[S++];let l=d>128;if(l)d-=128;if(d===0||T+d>O)I(3,"bad scanline data");if(l){let t=R[S++];for(let i=0;i<d;i++)y[T++]=t}else y.set(R.subarray(S,S+d),T),T+=d,S+=d}let g=$;for(let l=0;l<g;l++){let t=0;_[h]=y[l+t],t+=$,_[h+1]=y[l+t],t+=$,_[h+2]=y[l+t],t+=$,_[h+3]=y[l+t],h+=4}u--}return _},F=function(R,k,P,$){let _=R[k+3],h=Math.pow(2,_-128)/255;P[$+0]=R[k+0]*h,P[$+1]=R[k+1]*h,P[$+2]=R[k+2]*h,P[$+3]=1},z=function(R,k,P,$){let _=R[k+3],h=Math.pow(2,_-128)/255;P[$+0]=IQ.toHalfFloat(Math.min(R[k+0]*h,65504)),P[$+1]=IQ.toHalfFloat(Math.min(R[k+1]*h,65504)),P[$+2]=IQ.toHalfFloat(Math.min(R[k+2]*h,65504)),P[$+3]=IQ.toHalfFloat(1)},U=new Uint8Array(A);U.pos=0;let E=G(U),w=E.width,L=E.height,X=W(U.subarray(U.pos),w,L),V,D,N;switch(this.type){case LA:N=X.length/4;let R=new Float32Array(N*4);for(let P=0;P<N;P++)F(X,P*4,R,P*4);V=R,D=LA;break;case M2:N=X.length/4;let k=new Uint16Array(N*4);for(let P=0;P<N;P++)z(X,P*4,k,P*4);V=k,D=M2;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:w,height:L,data:V,header:E.string,gamma:E.gamma,exposure:E.exposure,type:D}}setDataType(A){return this.type=A,this}load(A,Q,B,C){function J(I,q){switch(I.type){case LA:case M2:I.colorSpace=f1,I.minFilter=c1,I.magFilter=c1,I.generateMipmaps=!1,I.flipY=!0;break}if(Q)Q(I,q)}return super.load(A,J,B,C)}}var zv={topLight:{intensity:500,position:[0.418,16.199,0.3]},room:{position:[-0.757,13.219,0.717],scale:[31.713,28.305,28.591]},boxes:[{position:[-10.906,2.009,1.846],rotation:-0.195,scale:[2.328,7.905,4.651]},{position:[-5.607,-0.754,-0.758],rotation:0.994,scale:[1.97,1.534,3.955]},{position:[6.167,0.857,7.803],rotation:0.561,scale:[3.927,6.285,3.687]},{position:[-2.017,0.018,6.124],rotation:0.333,scale:[2.002,4.566,2.064]},{position:[2.291,-0.756,-2.621],rotation:-0.286,scale:[1.546,1.552,1.496]},{position:[-2.193,-0.369,-5.547],rotation:0.516,scale:[3.875,3.487,2.986]}],lights:[{intensity:50,position:[-16.116,14.37,8.208],scale:[0.1,2.428,2.739]},{intensity:50,position:[-16.109,18.021,-8.207],scale:[0.1,2.425,2.751]},{intensity:17,position:[14.904,12.198,-1.832],scale:[0.15,4.265,6.331]},{intensity:43,position:[-0.462,8.89,14.52],scale:[4.38,5.441,0.088]},{intensity:20,position:[3.235,11.486,-12.541],scale:[2.5,2,0.1]},{intensity:100,position:[0,20,0],scale:[1,0.1,1]}]},Dv={topLight:{intensity:400,position:[0.5,14,0.5]},room:{position:[0,13.2,0],scale:[31.5,28.5,31.5]},boxes:[{position:[-10.906,-1,1.846],rotation:-0.195,scale:[2.328,7.905,4.651]},{position:[-5.607,-0.754,-0.758],rotation:0.994,scale:[1.97,1.534,3.955]},{position:[6.167,-0.16,7.803],rotation:0.561,scale:[3.927,6.285,3.687]},{position:[-2.017,0.018,6.124],rotation:0.333,scale:[2.002,4.566,2.064]},{position:[2.291,-0.756,-2.621],rotation:-0.286,scale:[1.546,1.552,1.496]},{position:[-2.193,-0.369,-5.547],rotation:0.516,scale:[3.875,3.487,2.986]}],lights:[{intensity:80,position:[-14,10,8],scale:[0.1,2.5,2.5]},{intensity:80,position:[-14,14,-4],scale:[0.1,2.5,2.5]},{intensity:23,position:[14,12,0],scale:[0.1,5,5]},{intensity:16,position:[0,9,14],scale:[5,5,0.1]},{intensity:80,position:[7,8,-14],scale:[2.5,2.5,0.1]},{intensity:80,position:[-7,16,-14],scale:[2.5,2.5,0.1]},{intensity:1,position:[0,20,0],scale:[0.1,0.1,0.1]}]};class bQ extends W2{constructor(A){super();this.position.y=-3.5;let Q=new E3;Q.deleteAttribute("uv");let B=new K6({metalness:0,side:x7}),C=new K6({metalness:0}),J=A=="legacy"?zv:Dv,I=new XQ(16777215,J.topLight.intensity,28,2);I.position.set(...J.topLight.position),this.add(I);let q=new A1(Q,B);q.position.set(...J.room.position),q.scale.set(...J.room.scale),this.add(q);for(let K of J.boxes){let Y=new A1(Q,C);Y.position.set(...K.position),Y.rotation.set(0,K.rotation,0),Y.scale.set(...K.scale),this.add(Y)}for(let K of J.lights){let Y=new A1(Q,this.createAreaLightMaterial(K.intensity));Y.position.set(...K.position),Y.scale.set(...K.scale),this.add(Y)}}createAreaLightMaterial(A){let Q=new t1;return Q.color.setScalar(A),Q}}var Ev=0.04,H8=20,wv=/\.hdr(\.js)?$/;class uQ{constructor(A){this.threeRenderer=A,this.lottieLoaderUrl="",this.withCredentials=!1,this._ldrLoader=null,this._imageLoader=null,this._hdrLoader=null,this._lottieLoader=null,this.generatedEnvironmentMap=null,this.generatedEnvironmentMapAlt=null,this.skyboxCache=new Map,this.blurMaterial=null,this.blurScene=null}get ldrLoader(){if(this._ldrLoader==null)this._ldrLoader=new Z5;return this._ldrLoader.setWithCredentials(this.withCredentials),this._ldrLoader}get imageLoader(){if(this._imageLoader==null)this._imageLoader=new sX(this.threeRenderer);return this._imageLoader.setWithCredentials(this.withCredentials),this._imageLoader}get hdrLoader(){if(this._hdrLoader==null)this._hdrLoader=new iX,this._hdrLoader.setDataType(M2);return this._hdrLoader.setWithCredentials(this.withCredentials),this._hdrLoader}async getLottieLoader(){if(this._lottieLoader==null){let{LottieLoader:A}=await import(this.lottieLoaderUrl);this._lottieLoader=new A}return this._lottieLoader.setWithCredentials(this.withCredentials),this._lottieLoader}async loadImage(A){let Q=await new Promise((B,C)=>this.ldrLoader.load(A,B,()=>{},C));return Q.name=A,Q.flipY=!1,Q}async loadLottie(A,Q){let B=await this.getLottieLoader();B.setQuality(Q);let C=await new Promise((J,I)=>B.load(A,J,()=>{},I));return C.name=A,C}async loadEquirect(A,Q=()=>{}){try{let B=wv.test(A),C=B?this.hdrLoader:this.imageLoader,J=await new Promise((I,q)=>C.load(A,(K)=>{let{renderTarget:Y}=K;if(Y!=null){let{texture:Z}=Y;K.dispose(!1),I(Z)}else I(K)},(K)=>{Q(K.loaded/K.total*0.9)},q));if(Q(1),J.name=A,J.mapping=eD,!B)J.colorSpace=g1;return J}finally{if(Q)Q(1)}}async generateEnvironmentMapAndSkybox(A=null,Q=null,B=()=>{}){let C=Q!=="legacy";if(Q==="legacy"||Q==="neutral")Q=null;Q=YI(Q);let J=Promise.resolve(null),I;if(A)J=this.loadEquirectFromUrl(A,B);if(Q)I=this.loadEquirectFromUrl(Q,B);else if(A)I=this.loadEquirectFromUrl(A,B);else I=C?this.loadGeneratedEnvironmentMapAlt():this.loadGeneratedEnvironmentMap();let[q,K]=await Promise.all([I,J]);if(q==null)throw new Error("Failed to load environment map.");return{environmentMap:q,skybox:K}}async loadEquirectFromUrl(A,Q){if(!this.skyboxCache.has(A)){let B=this.loadEquirect(A,Q);this.skyboxCache.set(A,B)}return this.skyboxCache.get(A)}async GenerateEnvironmentMap(A,Q){await Lw();let B=this.threeRenderer,C=new p7(256,{generateMipmaps:!1,type:M2,format:X2,colorSpace:f1,depthBuffer:!0}),J=new qQ(0.1,100,C),I=J.renderTarget.texture;I.name=Q;let{outputColorSpace:q,toneMapping:K}=B;return B.toneMapping=rD,B.outputColorSpace=f1,J.update(B,A),this.blurCubemap(C,Ev),B.toneMapping=K,B.outputColorSpace=q,I}async loadGeneratedEnvironmentMap(){if(this.generatedEnvironmentMap==null)this.generatedEnvironmentMap=this.GenerateEnvironmentMap(new bQ("legacy"),"legacy");return this.generatedEnvironmentMap}async loadGeneratedEnvironmentMapAlt(){if(this.generatedEnvironmentMapAlt==null)this.generatedEnvironmentMapAlt=this.GenerateEnvironmentMap(new bQ("neutral"),"neutral");return this.generatedEnvironmentMapAlt}blurCubemap(A,Q){if(this.blurMaterial==null){this.blurMaterial=this.getBlurShader(H8);let C=new E3,J=new A1(C,this.blurMaterial);this.blurScene=new W2,this.blurScene.add(J)}let B=A.clone();this.halfblur(A,B,Q,"latitudinal"),this.halfblur(B,A,Q,"longitudinal")}halfblur(A,Q,B,C){let I=A.width,q=isFinite(B)?Math.PI/(2*I):2*Math.PI/(2*H8-1),K=B/q,Y=isFinite(B)?1+Math.floor(3*K):H8;if(Y>H8)console.warn(`sigmaRadians, ${B}, is too large and will clip, as it requested ${Y} samples when the maximum is set to ${H8}`);let Z=[],H=0;for(let F=0;F<H8;++F){let z=F/K,U=Math.exp(-z*z/2);if(Z.push(U),F==0)H+=U;else if(F<Y)H+=2*U}for(let F=0;F<Z.length;F++)Z[F]=Z[F]/H;let G=this.blurMaterial.uniforms;G.envMap.value=A.texture,G.samples.value=Y,G.weights.value=Z,G.latitudinal.value=C==="latitudinal",G.dTheta.value=q,new qQ(0.1,100,Q).update(this.threeRenderer,this.blurScene)}getBlurShader(A){let Q=new Float32Array(A),B=new p(0,1,0);return new C2({name:"SphericalGaussianBlur",defines:{n:A},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:Q},latitudinal:{value:!1},dTheta:{value:0},poleAxis:{value:B}},vertexShader:`
      
      varying vec3 vOutputDirection;
  
      void main() {
  
        vOutputDirection = vec3( position );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
  
      }
    `,fragmentShader:`
        varying vec3 vOutputDirection;
  
        uniform samplerCube envMap;
        uniform int samples;
        uniform float weights[ n ];
        uniform bool latitudinal;
        uniform float dTheta;
        uniform vec3 poleAxis;
  
        vec3 getSample( float theta, vec3 axis ) {
  
          float cosTheta = cos( theta );
          // Rodrigues' axis-angle rotation
          vec3 sampleDirection = vOutputDirection * cosTheta
            + cross( axis, vOutputDirection ) * sin( theta )
            + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );
  
          return vec3( textureCube( envMap, sampleDirection ) );
  
        }
  
        void main() {
  
          vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );
  
          if ( all( equal( axis, vec3( 0.0 ) ) ) ) {
  
            axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );
  
          }
  
          axis = normalize( axis );
  
          gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
          gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );
  
          for ( int i = 1; i < n; i++ ) {
  
            if ( i >= samples ) {
  
              break;
  
            }
  
            float theta = dTheta * float( i );
            gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
            gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );
  
          }
        }
      `,blending:SJ,depthTest:!1,depthWrite:!1,side:x7})}async dispose(){for(let[,A]of this.skyboxCache)(await A).dispose();if(this.generatedEnvironmentMap!=null)(await this.generatedEnvironmentMap).dispose(),this.generatedEnvironmentMap=null;if(this.generatedEnvironmentMapAlt!=null)(await this.generatedEnvironmentMapAlt).dispose(),this.generatedEnvironmentMapAlt=null;if(this.blurMaterial!=null)this.blurMaterial.dispose()}}var Nv=0.2,nX=40,oX=60,KR=5,X8=[1,0.79,0.62,0.5,0.4,0.31,0.25],$v=3,YR="high-performance",Rv=1.3;class CA extends O2{constructor(A){super();this.loader=new Q2(dX),this.width=0,this.height=0,this.dpr=1,this.scenes=new Set,this.multipleScenesVisible=!1,this.lastTick=performance.now(),this.renderedLastFrame=!1,this.scaleStep=0,this.lastStep=$v,this.avgFrameDuration=(oX+nX)/2,this.onWebGLContextLost=(Q)=>{this.dispatchEvent({type:"contextlost",sourceEvent:Q})},this.onWebGLContextRestored=()=>{var Q;(Q=this.textureUtils)===null||Q===void 0||Q.dispose(),this.textureUtils=new uQ(this.threeRenderer);for(let B of this.scenes)B.element[n7]()},this.dpr=wQ(),this.canvas3D=document.createElement("canvas"),this.canvas3D.id="webgl-canvas",this.canvas3D.classList.add("show"),r0.tonemapping_pars_fragment=r0.tonemapping_pars_fragment.replace("vec3 CustomToneMapping( vec3 color ) { return color; }",`
      float startCompression = 0.8 - 0.04;
      float desaturation = 0.15;
      vec3 CustomToneMapping( vec3 color ) {
        color *= toneMappingExposure;

        float x = min(color.r, min(color.g, color.b));
        float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
        color -= offset;

        float peak = max(color.r, max(color.g, color.b));
        if (peak < startCompression) return color;

        float d = 1. - startCompression;
        float newPeak = 1. - d * d / (peak + d - startCompression);
        color *= newPeak / peak;

        float g = 1. - 1. / (desaturation * (peak - newPeak) + 1.);
        return mix(color, vec3(1, 1, 1), g);
      }`);try{this.threeRenderer=new g4({canvas:this.canvas3D,alpha:!0,antialias:!0,powerPreference:A.powerPreference,preserveDrawingBuffer:!0}),this.threeRenderer.autoClear=!0,this.threeRenderer.setPixelRatio(1),this.threeRenderer.debug={checkShaderErrors:!!A.debug,onShaderError:null},this.threeRenderer.toneMapping=g7}catch(Q){console.warn(Q)}this.arRenderer=new pX(this),this.textureUtils=this.canRender?new uQ(this.threeRenderer):null,Q2.initializeKTX2Loader(this.threeRenderer),this.canvas3D.addEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.addEventListener("webglcontextrestored",this.onWebGLContextRestored),this.updateRendererSize()}static get singleton(){return this._singleton}static resetSingleton(){let A=this._singleton.dispose();for(let Q of A)Q.disconnectedCallback();this._singleton=new CA({powerPreference:(self.ModelViewerElement||{}).powerPreference||YR,debug:jH()});for(let Q of A)Q.connectedCallback()}get canRender(){return this.threeRenderer!=null}get scaleFactor(){return X8[this.scaleStep]}set minScale(A){let Q=1;while(Q<X8.length){if(X8[Q]<A)break;++Q}this.lastStep=Q-1}registerScene(A){this.scenes.add(A),A.forceRescale();let Q=new M0;if(this.threeRenderer.getSize(Q),A.canvas.width=Q.x,A.canvas.height=Q.y,this.canRender&&this.scenes.size>0)this.threeRenderer.setAnimationLoop((B,C)=>this.render(B,C))}unregisterScene(A){if(this.scenes.delete(A),this.canvas3D.parentElement===A.canvas.parentElement)A.canvas.parentElement.removeChild(this.canvas3D);if(this.canRender&&this.scenes.size===0)this.threeRenderer.setAnimationLoop(null)}displayCanvas(A){return this.multipleScenesVisible?A.element[yI]:this.canvas3D}countVisibleScenes(){let{canvas3D:A}=this,Q=0,B=null;for(let J of this.scenes){let{element:I}=J;if(I.modelIsVisible&&J.externalRenderer==null)++Q;if(A.parentElement===J.canvas.parentElement)B=J}let C=Q>1;if(B!=null){let J=C&&!this.multipleScenesVisible,I=!B.element.modelIsVisible;if(J||I){let{width:q,height:K}=this.sceneSize(B);this.copyPixels(B,q,K),A.parentElement.removeChild(A)}}this.multipleScenesVisible=C}updateRendererSize(){var A;let Q=wQ();if(Q!==this.dpr)for(let J of this.scenes){let{element:I}=J;I[w5](I.getBoundingClientRect())}let B=0,C=0;for(let J of this.scenes)B=Math.max(B,J.width),C=Math.max(C,J.height);if(B===this.width&&C===this.height&&Q===this.dpr)return;if(this.width=B,this.height=C,this.dpr=Q,B=Math.ceil(B*Q),C=Math.ceil(C*Q),this.canRender)this.threeRenderer.setSize(B,C,!1);for(let J of this.scenes){let{canvas:I}=J;I.width=B,I.height=C,J.forceRescale(),(A=J.effectRenderer)===null||A===void 0||A.setSize(B,C)}}updateRendererScale(A){let Q=this.scaleStep;if(this.avgFrameDuration+=d2(Nv*(A-this.avgFrameDuration),-KR,KR),this.avgFrameDuration>oX)++this.scaleStep;else if(this.avgFrameDuration<nX&&this.scaleStep>0)--this.scaleStep;if(this.scaleStep=Math.min(this.scaleStep,this.lastStep),Q!==this.scaleStep)this.avgFrameDuration=(oX+nX)/2}shouldRender(A){if(!A.shouldRender())if(A.scaleStep!=0)A.scaleStep=0,this.rescaleCanvas(A);else return!1;else if(A.scaleStep!=this.scaleStep)A.scaleStep=this.scaleStep,this.rescaleCanvas(A);return!0}rescaleCanvas(A){let Q=X8[A.scaleStep],B=Math.ceil(this.width/Q),C=Math.ceil(this.height/Q),{style:J}=A.canvas;J.width=`${B}px`,J.height=`${C}px`,this.canvas3D.style.width=`${B}px`,this.canvas3D.style.height=`${C}px`;let I=this.dpr*Q,q=Q<1?"GPU throttling":this.dpr!==window.devicePixelRatio?"No meta viewport tag":"";A.element.dispatchEvent(new CustomEvent("render-scale",{detail:{reportedDpr:window.devicePixelRatio,renderedDpr:I,minimumDpr:this.dpr*X8[this.lastStep],pixelWidth:Math.ceil(A.width*I),pixelHeight:Math.ceil(A.height*I),reason:q}}))}sceneSize(A){let{dpr:Q}=this,B=X8[A.scaleStep],C=Math.min(Math.ceil(A.width*B*Q),this.canvas3D.width),J=Math.min(Math.ceil(A.height*B*Q),this.canvas3D.height);return{width:C,height:J}}copyPixels(A,Q,B){let C=A.context;if(C==null){console.log("could not acquire 2d context");return}C.clearRect(0,0,Q,B),C.drawImage(this.canvas3D,0,0,Q,B,0,0,Q,B),A.canvas.classList.add("show")}orderedScenes(){let A=[];for(let Q of[!1,!0])for(let B of this.scenes)if(B.element.modelIsVisible===Q)A.push(B);return A}get isPresenting(){return this.arRenderer.isPresenting}preRender(A,Q,B){let{element:C,exposure:J,toneMapping:I}=A;C[BA](Q,B);let q=typeof J==="number"&&!Number.isNaN(J),K=C.environmentImage,Y=C.skyboxImage,Z=I===yJ&&(K==="neutral"||K==="legacy"||!K&&!Y);this.threeRenderer.toneMappingExposure=(q?J:1)*(Z?Rv:1)}render(A,Q){if(Q!=null){this.arRenderer.onWebXRFrame(A,Q);return}let B=A-this.lastTick;if(this.lastTick=A,!this.canRender||this.isPresenting)return;if(this.countVisibleScenes(),this.updateRendererSize(),this.renderedLastFrame)this.updateRendererScale(B),this.renderedLastFrame=!1;let{canvas3D:C}=this;for(let J of this.orderedScenes()){let{element:I}=J;if(!I.loaded||!I.modelIsVisible&&J.renderCount>0)continue;if(this.preRender(J,A,B),!this.shouldRender(J))continue;if(J.externalRenderer!=null){let Y=J.getCamera();Y.updateMatrix();let{matrix:Z,projectionMatrix:H}=Y,G=Z.elements.slice(),W=J.getTarget();G[12]+=W.x,G[13]+=W.y,G[14]+=W.z,J.externalRenderer.render({viewMatrix:G,projectionMatrix:H.elements});continue}if(!I.modelIsVisible&&!this.multipleScenesVisible){for(let Y of this.scenes)if(Y.element.modelIsVisible)Y.queueRender()}let{width:q,height:K}=this.sceneSize(J);if(J.renderShadow(this.threeRenderer),this.threeRenderer.setRenderTarget(null),this.threeRenderer.setViewport(0,Math.ceil(this.height*this.dpr)-K,q,K),J.effectRenderer!=null)J.effectRenderer.render(B);else this.threeRenderer.autoClear=!0,this.threeRenderer.toneMapping=J.toneMapping,this.threeRenderer.render(J,J.camera);if(this.multipleScenesVisible||!J.element.modelIsVisible&&J.renderCount===0)this.copyPixels(J,q,K);else if(C.parentElement!==J.canvas.parentElement)J.canvas.parentElement.appendChild(C),J.canvas.classList.remove("show");J.hasRendered(),++J.renderCount,this.renderedLastFrame=!0}}dispose(){if(this.textureUtils!=null)this.textureUtils.dispose();if(this.threeRenderer!=null)this.threeRenderer.dispose();this.textureUtils=null,this.threeRenderer=null;let A=[];for(let Q of this.scenes)A.push(Q.element);return this.canvas3D.removeEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.removeEventListener("webglcontextrestored",this.onWebGLContextRestored),A}}CA._singleton=new CA({powerPreference:(self.ModelViewerElement||{}).powerPreference||YR,debug:jH()});var s0=Symbol("correlatedObjects"),w1=Symbol("onUpdate");class E4{constructor(A,Q=null){this[w1]=A,this[s0]=Q}}var ZR=new t1,Lv=new P2(2,2),Mv=0,c2=Symbol("threeTexture"),HR=Symbol("threeTextures"),L50=Symbol("applyTexture");class aX extends E4{get[c2](){var A;return(A=this[s0])===null||A===void 0?void 0:A.values().next().value}get[HR](){return this[s0]}constructor(A,Q){super(A,new Set(Q?[Q]:[]));if(!this[c2].image.src)this[c2].image.src=Q.name?Q.name:"adhoc_image"+Mv++;if(!this[c2].image.name)this[c2].image.name=Q&&Q.image&&Q.image.src?Q.image.src.split("/").pop():"adhoc_image"}get name(){return this[c2].image.name||""}get uri(){return this[c2].image.src}get bufferView(){return this[c2].image.bufferView}get element(){let A=this[c2];if(A&&(A.isCanvasTexture||A.isVideoTexture))return A.image;return}get animation(){let A=this[c2];if(A&&A.isCanvasTexture&&A.animation)return A.animation;return}get type(){return this.uri!=null?"external":"embedded"}set name(A){for(let Q of this[HR])Q.image.name=A}update(){let A=this[c2];if(A&&A.isCanvasTexture&&!A.animation)this[c2].needsUpdate=!0,this[w1]()}async createThumbnail(A,Q){let B=new W2;ZR.map=this[c2];let C=new A1(Lv,ZR);B.add(C);let J=new Z4(-1,1,1,-1,0,1),{threeRenderer:I}=CA.singleton,q=new u2(A,Q);I.setRenderTarget(q),I.render(B,J),I.setRenderTarget(null);let K=new Uint8Array(A*Q*4);I.readRenderTargetPixels(q,0,0,A,Q,K),O3.width=A,O3.height=Q;let Y=O3.getContext("2d"),Z=Y.createImageData(A,Q);return Z.data.set(K),Y.putImageData(Z,0,0),new Promise(async(H,G)=>{O3.toBlob((W)=>{if(!W)return G("Failed to capture thumbnail.");H(URL.createObjectURL(W))},"image/png")})}}var U2;(function(A){A[A.Nearest=9728]="Nearest",A[A.Linear=9729]="Linear",A[A.NearestMipmapNearest=9984]="NearestMipmapNearest",A[A.LinearMipmapNearest=9985]="LinearMipmapNearest",A[A.NearestMipmapLinear=9986]="NearestMipmapLinear",A[A.LinearMipmapLinear=9987]="LinearMipmapLinear"})(U2||(U2={}));var k3;(function(A){A[A.ClampToEdge=33071]="ClampToEdge",A[A.MirroredRepeat=33648]="MirroredRepeat",A[A.Repeat=10497]="Repeat"})(k3||(k3={}));var XR=new Map([[k3.Repeat,uA],[k3.ClampToEdge,S2],[k3.MirroredRepeat,Q5]]),rX=new Map([[uA,k3.Repeat],[S2,k3.ClampToEdge],[Q5,k3.MirroredRepeat]]),Ov=new Map([[U2.Nearest,h4],[U2.Linear,c1],[U2.NearestMipmapNearest,B5],[U2.LinearMipmapNearest,J5],[U2.NearestMipmapLinear,C5],[U2.LinearMipmapLinear,x4]]),WR=new Map([[h4,U2.Nearest],[c1,U2.Linear],[B5,U2.NearestMipmapNearest],[J5,U2.LinearMipmapNearest],[C5,U2.NearestMipmapLinear],[x4,U2.LinearMipmapLinear]]),kv=new Map([[U2.Nearest,h4],[U2.Linear,c1]]),FR=new Map([[h4,U2.Nearest],[c1,U2.Linear]]),Pv=(()=>{return(A)=>WR.has(A)})(),_v=(()=>{return(A)=>FR.has(A)})(),Tv=(()=>{return(A)=>rX.has(A)})(),jv=(A,Q)=>{switch(A){case"minFilter":return Pv(Q);case"magFilter":return _v(Q);case"wrapS":case"wrapT":return Tv(Q);case"rotation":case"repeat":case"offset":return!0;default:throw new Error(`Cannot configure property "${A}" on Sampler`)}},P3=Symbol("threeTexture"),GR=Symbol("threeTextures"),W6=Symbol("setProperty");class tX extends E4{get[P3](){var A;return(A=this[s0])===null||A===void 0?void 0:A.values().next().value}get[GR](){return this[s0]}constructor(A,Q){super(A,new Set(Q?[Q]:[]))}get name(){return this[P3].name||""}get minFilter(){return WR.get(this[P3].minFilter)}get magFilter(){return FR.get(this[P3].magFilter)}get wrapS(){return rX.get(this[P3].wrapS)}get wrapT(){return rX.get(this[P3].wrapT)}get rotation(){return this[P3].rotation}get scale(){return pQ(this[P3].repeat)}get offset(){return pQ(this[P3].offset)}setMinFilter(A){this[W6]("minFilter",Ov.get(A))}setMagFilter(A){this[W6]("magFilter",kv.get(A))}setWrapS(A){this[W6]("wrapS",XR.get(A))}setWrapT(A){this[W6]("wrapT",XR.get(A))}setRotation(A){if(A==null)A=0;this[W6]("rotation",A)}setScale(A){if(A==null)A={u:1,v:1};this[W6]("repeat",new M0(A.u,A.v))}setOffset(A){if(A==null)A={u:0,v:0};this[W6]("offset",new M0(A.u,A.v))}[W6](A,Q){if(jv(A,Q))for(let B of this[GR])B[A]=Q,B.needsUpdate=!0;this[w1]()}}var VR=Symbol("image"),UR=Symbol("sampler"),zR=Symbol("threeTexture");class mQ extends E4{constructor(A,Q){super(A,new Set(Q?[Q]:[]));this[UR]=new tX(A,Q),this[VR]=new aX(A,Q)}get[zR](){var A;return(A=this[s0])===null||A===void 0?void 0:A.values().next().value}get name(){return this[zR].name||""}set name(A){for(let Q of this[s0])Q.name=A}get sampler(){return this[UR]}get source(){return this[VR]}}var ER,wR,NR,N5=Symbol("texture"),$5=Symbol("transform"),eX=Symbol("materials"),DR=Symbol("usage"),G8=Symbol("onUpdate"),dQ=Symbol("activeVideo"),d0;(function(A){A[A.Base=0]="Base",A[A.MetallicRoughness=1]="MetallicRoughness",A[A.Normal=2]="Normal",A[A.Occlusion=3]="Occlusion",A[A.Emissive=4]="Emissive",A[A.Clearcoat=5]="Clearcoat",A[A.ClearcoatRoughness=6]="ClearcoatRoughness",A[A.ClearcoatNormal=7]="ClearcoatNormal",A[A.SheenColor=8]="SheenColor",A[A.SheenRoughness=9]="SheenRoughness",A[A.Transmission=10]="Transmission",A[A.Thickness=11]="Thickness",A[A.Specular=12]="Specular",A[A.SpecularColor=13]="SpecularColor",A[A.Iridescence=14]="Iridescence",A[A.IridescenceThickness=15]="IridescenceThickness",A[A.Anisotropy=16]="Anisotropy"})(d0||(d0={}));class _3{constructor(A,Q,B,C){if(this[ER]=null,this[wR]={rotation:0,scale:new M0(1,1),offset:new M0(0,0)},this[NR]=!1,B)this[$5].rotation=B.rotation,this[$5].scale.copy(B.repeat),this[$5].offset.copy(B.offset),this[N5]=new mQ(A,B);this[G8]=A,this[eX]=C,this[DR]=Q}get texture(){return this[N5]}setTexture(A){var Q,B;let C=A!=null?A.source[c2]:null,J=(Q=this[N5])===null||Q===void 0?void 0:Q.source[c2];if(J!=null&&J.isVideoTexture)this[dQ]=!1;else if((B=this[N5])===null||B===void 0?void 0:B.source.animation)this[N5].source.animation.removeEventListener("enterFrame",this[G8]);if(this[N5]=A,C!=null&&C.isVideoTexture){let q=C.image;if(this[dQ]=!0,q.requestVideoFrameCallback!=null){let K=()=>{if(!this[dQ])return;this[G8](),q.requestVideoFrameCallback(K)};q.requestVideoFrameCallback(K)}else{let K=()=>{if(!this[dQ])return;this[G8](),requestAnimationFrame(K)};requestAnimationFrame(K)}}else if((A===null||A===void 0?void 0:A.source.animation)!=null)A.source.animation.addEventListener("enterFrame",this[G8]);let I=g1;if(this[eX])for(let q of this[eX]){switch(this[DR]){case d0.Base:q.map=C;break;case d0.MetallicRoughness:I=f1,q.metalnessMap=C,q.roughnessMap=C;break;case d0.Normal:I=f1,q.normalMap=C;break;case d0.Occlusion:I=f1,q.aoMap=C;break;case d0.Emissive:q.emissiveMap=C;break;case d0.Clearcoat:q.clearcoatMap=C;break;case d0.ClearcoatRoughness:q.clearcoatRoughnessMap=C;break;case d0.ClearcoatNormal:q.clearcoatNormalMap=C;break;case d0.SheenColor:q.sheenColorMap=C;break;case d0.SheenRoughness:q.sheenRoughnessMap=C;break;case d0.Transmission:q.transmissionMap=C;break;case d0.Thickness:q.thicknessMap=C;break;case d0.Specular:q.specularIntensityMap=C;break;case d0.SpecularColor:q.specularColorMap=C;break;case d0.Iridescence:q.iridescenceMap=C;break;case d0.IridescenceThickness:q.iridescenceThicknessMap=C;break;case d0.Anisotropy:q.anisotropyMap=C;break;default:}q.needsUpdate=!0}if(C)C.colorSpace=I,C.rotation=this[$5].rotation,C.repeat=this[$5].scale,C.offset=this[$5].offset;this[G8]()}}ER=N5,wR=$5,NR=dQ;var cQ=Symbol("threeMaterial"),fI=Symbol("threeMaterials"),$R=Symbol("baseColorTexture"),RR=Symbol("metallicRoughnessTexture");class AG extends E4{constructor(A,Q){super(A,Q);let{map:B,metalnessMap:C}=Q.values().next().value;this[$R]=new _3(A,d0.Base,B,Q),this[RR]=new _3(A,d0.MetallicRoughness,C,Q)}get[fI](){return this[s0]}get[cQ](){var A;return(A=this[s0])===null||A===void 0?void 0:A.values().next().value}get baseColorFactor(){let A=[0,0,0,this[cQ].opacity];return this[cQ].color.toArray(A),A}get metallicFactor(){return this[cQ].metalness}get roughnessFactor(){return this[cQ].roughness}get baseColorTexture(){return this[$R]}get metallicRoughnessTexture(){return this[RR]}setBaseColorFactor(A){let Q=new p0;if(A instanceof Array)Q.fromArray(A);else Q.set(A);for(let B of this[fI])if(B.color.set(Q),A instanceof Array)B.opacity=A[3];else A=[0,0,0,B.opacity],Q.toArray(A);this[w1]()}setMetallicFactor(A){for(let Q of this[fI])Q.metalness=A;this[w1]()}setRoughnessFactor(A){for(let Q of this[fI])Q.roughness=A;this[w1]()}}var LR,MR,OR=Symbol("pbrMetallicRoughness"),kR=Symbol("normalTexture"),PR=Symbol("occlusionTexture"),_R=Symbol("emissiveTexture"),p1=Symbol("backingThreeMaterial"),TR=Symbol("applyAlphaCutoff"),QG=Symbol("getAlphaMode"),W8=Symbol("lazyLoadGLTFInfo"),BG=Symbol("initialize"),hI=Symbol("getLoadedMaterial"),_0=Symbol("ensureMaterialIsLoaded"),jR=Symbol("gltfIndex"),F8=Symbol("setActive"),sQ=Symbol("variantIndices"),CG=Symbol("isActive"),lQ=Symbol("variantSet"),SR=Symbol("modelVariants"),JG=Symbol("name"),EA=Symbol("pbrTextures");class iQ extends E4{constructor(A,Q,B,C,J,I,q=void 0){super(A,J);if(this[LR]=new Set,this[MR]=new Map,this[jR]=Q,this[CG]=B,this[SR]=C,this[JG]=I,q==null)this[BG]();else this[W8]=q}get[(LR=lQ,MR=EA,p1)](){return this[s0].values().next().value}[BG](){let A=this[w1],Q=this[s0];this[OR]=new AG(A,Q);let{normalMap:B,aoMap:C,emissiveMap:J}=Q.values().next().value;this[kR]=new _3(A,d0.Normal,B,Q),this[PR]=new _3(A,d0.Occlusion,C,Q),this[_R]=new _3(A,d0.Emissive,J,Q);let I=(q)=>{this[EA].set(q,new _3(A,q,null,Q))};I(d0.Clearcoat),I(d0.ClearcoatRoughness),I(d0.ClearcoatNormal),I(d0.SheenColor),I(d0.SheenRoughness),I(d0.Transmission),I(d0.Thickness),I(d0.Specular),I(d0.SpecularColor),I(d0.Iridescence),I(d0.IridescenceThickness),I(d0.Anisotropy)}async[hI](){if(this[W8]!=null){let{set:A,material:Q}=await this[W8].doLazyLoad();return this[s0]=A,this[BG](),this[W8]=void 0,this.ensureLoaded=async()=>{},Q}return this[s0].values().next().value}colorFromRgb(A){let Q=new p0;if(A instanceof Array)Q.fromArray(A);else Q.set(A);return Q}[_0](){if(this[W8]==null)return;throw new Error(`Material "${this.name}" has not been loaded, call 'await
    myMaterial.ensureLoaded()' before using an unloaded material.`)}async ensureLoaded(){await this[hI]()}get isLoaded(){return this[W8]==null}get isActive(){return this[CG]}[F8](A){this[CG]=A}get name(){return this[JG]||""}set name(A){if(this[JG]=A,this[s0]!=null)for(let Q of this[s0])Q.name=A}get pbrMetallicRoughness(){return this[_0](),this[OR]}get normalTexture(){return this[_0](),this[kR]}get occlusionTexture(){return this[_0](),this[PR]}get emissiveTexture(){return this[_0](),this[_R]}get emissiveFactor(){return this[_0](),this[p1].emissive.toArray()}get index(){return this[jR]}[sQ](){return this[lQ]}hasVariant(A){let Q=this[SR].get(A);return Q!=null&&this[lQ].has(Q.index)}setEmissiveFactor(A){this[_0]();let Q=this.colorFromRgb(A);for(let B of this[s0])B.emissive.set(Q);this[w1]()}[QG](){if(this[p1].transparent)return"BLEND";else if(this[p1].alphaTest>0)return"MASK";return"OPAQUE"}[TR](){this[_0]();for(let A of this[s0]){if(this[QG]()==="MASK"){if(A.alphaTest==null)A.alphaTest=0.5}else A.alphaTest=void 0;A.needsUpdate=!0}}setAlphaCutoff(A){this[_0]();for(let Q of this[s0])Q.alphaTest=A,Q.needsUpdate=!0;this[TR](),this[w1]()}getAlphaCutoff(){return this[_0](),this[p1].alphaTest}setDoubleSided(A){this[_0]();for(let Q of this[s0])Q.side=A?bA:h7,Q.needsUpdate=!0;this[w1]()}getDoubleSided(){return this[_0](),this[p1].side==bA}setAlphaMode(A){this[_0]();let Q=(B,C)=>{B.transparent=C,B.depthWrite=!C};for(let B of this[s0]){if(Q(B,A==="BLEND"),A==="MASK")B.alphaTest=0.5;else B.alphaTest=void 0;B.needsUpdate=!0}this[w1]()}getAlphaMode(){return this[_0](),this[QG]()}get emissiveStrength(){return this[_0](),this[p1].emissiveIntensity}setEmissiveStrength(A){this[_0]();for(let Q of this[s0])Q.emissiveIntensity=A;this[w1]()}get clearcoatFactor(){return this[_0](),this[p1].clearcoat}get clearcoatRoughnessFactor(){return this[_0](),this[p1].clearcoatRoughness}get clearcoatTexture(){return this[_0](),this[EA].get(d0.Clearcoat)}get clearcoatRoughnessTexture(){return this[_0](),this[EA].get(d0.ClearcoatRoughness)}get clearcoatNormalTexture(){return this[_0](),this[EA].get(d0.ClearcoatNormal)}get clearcoatNormalScale(){return this[_0](),this[p1].clearcoatNormalScale.x}setClearcoatFactor(A){this[_0]();for(let Q of this[s0])Q.clearcoat=A;this[w1]()}setClearcoatRoughnessFactor(A){this[_0]();for(let Q of this[s0])Q.clearcoatRoughness=A;this[w1]()}setClearcoatNormalScale(A){this[_0]();for(let Q of this[s0])Q.clearcoatNormalScale=new M0(A,A);this[w1]()}get ior(){return this[_0](),this[p1].ior}setIor(A){this[_0]();for(let Q of this[s0])Q.ior=A;this[w1]()}get sheenColorFactor(){return this[_0](),this[p1].sheenColor.toArray()}get sheenColorTexture(){return this[_0](),this[EA].get(d0.SheenColor)}get sheenRoughnessFactor(){return this[_0](),this[p1].sheenRoughness}get sheenRoughnessTexture(){return this[_0](),this[EA].get(d0.SheenRoughness)}setSheenColorFactor(A){this[_0]();let Q=this.colorFromRgb(A);for(let B of this[s0])B.sheenColor.set(Q),B.sheen=1;this[w1]()}setSheenRoughnessFactor(A){this[_0]();for(let Q of this[s0])Q.sheenRoughness=A,Q.sheen=1;this[w1]()}get transmissionFactor(){return this[_0](),this[p1].transmission}get transmissionTexture(){return this[_0](),this[EA].get(d0.Transmission)}setTransmissionFactor(A){this[_0]();for(let Q of this[s0])Q.transmission=A;this[w1]()}get thicknessFactor(){return this[_0](),this[p1].thickness}get thicknessTexture(){return this[_0](),this[EA].get(d0.Thickness)}get attenuationDistance(){return this[_0](),this[p1].attenuationDistance}get attenuationColor(){return this[_0](),this[p1].attenuationColor.toArray()}setThicknessFactor(A){this[_0]();for(let Q of this[s0])Q.thickness=A;this[w1]()}setAttenuationDistance(A){this[_0]();for(let Q of this[s0])Q.attenuationDistance=A;this[w1]()}setAttenuationColor(A){this[_0]();let Q=this.colorFromRgb(A);for(let B of this[s0])B.attenuationColor.set(Q);this[w1]()}get specularFactor(){return this[_0](),this[p1].specularIntensity}get specularTexture(){return this[_0](),this[EA].get(d0.Specular)}get specularColorFactor(){return this[_0](),this[p1].specularColor.toArray()}get specularColorTexture(){return this[_0](),this[EA].get(d0.SheenColor)}setSpecularFactor(A){this[_0]();for(let Q of this[s0])Q.specularIntensity=A;this[w1]()}setSpecularColorFactor(A){this[_0]();let Q=this.colorFromRgb(A);for(let B of this[s0])B.specularColor.set(Q);this[w1]()}get iridescenceFactor(){return this[_0](),this[p1].iridescence}get iridescenceTexture(){return this[_0](),this[EA].get(d0.Iridescence)}get iridescenceIor(){return this[_0](),this[p1].iridescenceIOR}get iridescenceThicknessMinimum(){return this[_0](),this[p1].iridescenceThicknessRange[0]}get iridescenceThicknessMaximum(){return this[_0](),this[p1].iridescenceThicknessRange[1]}get iridescenceThicknessTexture(){return this[_0](),this[EA].get(d0.IridescenceThickness)}setIridescenceFactor(A){this[_0]();for(let Q of this[s0])Q.iridescence=A;this[w1]()}setIridescenceIor(A){this[_0]();for(let Q of this[s0])Q.iridescenceIOR=A;this[w1]()}setIridescenceThicknessMinimum(A){this[_0]();for(let Q of this[s0])Q.iridescenceThicknessRange[0]=A;this[w1]()}setIridescenceThicknessMaximum(A){this[_0]();for(let Q of this[s0])Q.iridescenceThicknessRange[1]=A;this[w1]()}get anisotropyStrength(){return this[_0](),this[p1].anisotropy}get anisotropyRotation(){return this[_0](),this[p1].anisotropyRotation}get anisotropyTexture(){return this[_0](),this[EA].get(d0.Anisotropy)}setAnisotropyStrength(A){this[_0]();for(let Q of this[s0])Q.anisotropy=A;this[w1]()}setAnisotropyRotation(A){this[_0]();for(let Q of this[s0])Q.anisotropyRotation=A;this[w1]()}}class xI{constructor(A){this.name="",this.children=new Array,this.name=A}}class nQ extends xI{constructor(A,Q,B,C){super(A.name);this.materials=new Map,this.variantToMaterialMap=new Map,this.initialMaterialIdx=0,this.activeMaterialIdx=0,this.mesh=A;let{gltf:J,threeGLTF:I,threeObjectMap:q}=C;this.parser=I.parser,this.modelVariants=B,this.mesh.userData.variantData=B;let K=q.get(A.material);if(K.materials!=null)this.initialMaterialIdx=this.activeMaterialIdx=K.materials;else console.error(`Primitive (${A.name}) missing initial material reference.`);let Y=A.userData.associations||{};if(Y.meshes==null){console.error("Mesh is missing primitive index association");return}let G=((J.meshes||[])[Y.meshes].primitives||[])[Y.primitives];if(G==null){console.error("Mesh primitive definition is missing.");return}if(G.material!=null)this.materials.set(G.material,Q[G.material]);else{let W=Q.findIndex((F)=>{return F.name==="Default"});if(W>=0)this.materials.set(W,Q[W]);else console.warn("gltfPrimitive has no material!")}if(G.extensions&&G.extensions.KHR_materials_variants){let W=G.extensions.KHR_materials_variants,z=I.parser.json.extensions.KHR_materials_variants.variants;for(let U of W.mappings){let E=Q[U.material];this.materials.set(U.material,E);for(let w of U.variants){let{name:L}=z[w];if(this.variantToMaterialMap.set(w,E),E[sQ]().add(w),!B.has(L))B.set(L,{name:L,index:w})}}}}async setActiveMaterial(A){let Q=this.materials.get(A);if(Q!=null&&A!==this.activeMaterialIdx){this.mesh.material=await Q[hI]();let{normalScale:B}=this.mesh.material;if(B!=null&&B.y*B.x<0!=(this.mesh.geometry.attributes.tangent==null))this.parser.assignFinalMaterial(this.mesh);this.activeMaterialIdx=A}return this.mesh.material}getActiveMaterial(){return this.materials.get(this.activeMaterialIdx)}getMaterial(A){return this.materials.get(A)}async enableVariant(A){if(A==null)return this.setActiveMaterial(this.initialMaterialIdx);if(this.variantToMaterialMap!=null&&this.modelVariants.has(A)){let Q=this.modelVariants.get(A);return this.enableVariantHelper(Q.index)}return null}async enableVariantHelper(A){if(this.variantToMaterialMap!=null&&A!=null){let Q=this.variantToMaterialMap.get(A);if(Q!=null)return this.setActiveMaterial(Q.index)}return null}async instantiateVariants(){if(this.variantToMaterialMap==null)return;for(let A of this.variantToMaterialMap.keys()){let Q=this.mesh.userData.variantMaterials.get(A);if(Q.material!=null)continue;let B=await this.enableVariantHelper(A);if(B!=null)Q.material=B}}get variantInfo(){return this.variantToMaterialMap}addVariant(A,Q){if(!this.ensureVariantIsUnused(Q))return!1;if(!this.modelVariants.has(Q))this.modelVariants.set(Q,{name:Q,index:this.modelVariants.size});let C=this.modelVariants.get(Q).index;return A[sQ]().add(C),this.variantToMaterialMap.set(C,A),this.materials.set(A.index,A),this.updateVariantUserData(C,A),!0}deleteVariant(A){if(this.variantInfo.has(A)){this.variantInfo.delete(A);let Q=this.mesh.userData.variantMaterials;if(Q!=null)Q.delete(A)}}updateVariantUserData(A,Q){Q[sQ]().add(A),this.mesh.userData.variantData=this.modelVariants,this.mesh.userData.variantMaterials=this.mesh.userData.variantMaterials||new Map,this.mesh.userData.variantMaterials.set(A,{material:Q[s0].values().next().value,gltfMaterialIndex:Q.index})}ensureVariantIsUnused(A){let Q=this.modelVariants.get(A);if(Q!=null&&this.variantInfo.has(Q.index))return console.warn(`Primitive cannot add variant '${A}' for this material, it already exists.`),!1;return!0}}var yR,fR,hR,xR,gR,vR,R5=Symbol("materials"),gI=Symbol("hierarchy"),bR=Symbol("roots"),T3=Symbol("primitives"),B70=Symbol("loadVariant"),qG=Symbol("prepareVariantsForExport"),KG=Symbol("switchVariant"),YG=Symbol("materialFromPoint"),vI=Symbol("nodeFromPoint"),ZG=Symbol("nodeFromIndex"),l2=Symbol("variantData"),bI=Symbol("availableVariants"),IG=Symbol("modelOnUpdate"),uR=Symbol("cloneMaterial");class pR{constructor(A,Q,B,C){this.gltf=A,this.gltfElementMap=Q,this.mapKey=B,this.doLazyLoad=C}}class HG{constructor(A,Q=()=>{}){this[yR]=new Array,this[fR]=new Array,this[hR]=new Array,this[xR]=new Array,this[gR]=()=>{},this[vR]=new Map,this[IG]=Q;let{gltf:B,threeGLTF:C,gltfElementMap:J}=A;for(let[K,Y]of B.materials.entries()){let Z=J.get(Y);if(Z!=null)this[R5].push(new iQ(Q,K,!0,this[l2],Z,Y.name));else{let G=(B.materials||[])[K],W=K,F=async()=>{let z=await C.parser.getDependency("material",W),U=new Set;return J.set(G,U),U.add(z),{set:U,material:z}};this[R5].push(new iQ(Q,K,!1,this[l2],Z,Y.name,new pR(B,J,G,F)))}}let I=new Map,q=new Array;for(let K of C.scene.children)q.push(K);while(q.length>0){let K=q.pop(),Y=null;if(K instanceof A1)Y=new nQ(K,this.materials,this[l2],A),this[T3].push(Y);else Y=new xI(K.name);let Z=I.get(K);if(Z!=null)Z.children.push(Y);else this[bR].push(Y);this[gI].push(Y);for(let H of K.children)q.push(H),I.set(K,Y)}}get materials(){return this[R5]}[(yR=R5,fR=gI,hR=bR,xR=T3,gR=IG,vR=l2,bI)](){let A=Array.from(this[l2].values());return A.sort((Q,B)=>{return Q.index-B.index}),A.map((Q)=>{return Q.name})}getMaterialByName(A){let Q=this[R5].filter((B)=>{return B.name===A});if(Q.length>0)return Q[0];return null}[ZG](A,Q){let B=this[gI].find((C)=>{if(C instanceof nQ){let{meshes:J,primitives:I}=C.mesh.userData.associations;if(J==A&&I==Q)return!0}return!1});return B==null?null:B}[vI](A){return this[gI].find((Q)=>{if(Q instanceof nQ){if(Q.mesh===A.object)return!0}return!1})}[YG](A){return this[vI](A).getActiveMaterial()}async[KG](A){for(let Q of this[T3])await Q.enableVariant(A);for(let Q of this.materials)Q[F8](!1);for(let Q of this[T3])this.materials[Q.getActiveMaterial().index][F8](!0)}async[qG](){let A=new Array;for(let Q of this[T3])A.push(Q.instantiateVariants());await Promise.all(A)}[uR](A,Q){let B=this.materials[A];if(!B.isLoaded)console.error(`Cloning an unloaded material,
           call 'material.ensureLoaded() before cloning the material.`);let C=B[s0],J=new Set;for(let[q,K]of C.entries()){let Y=K.clone();Y.name=Q+(C.size>1?"_inst"+q:""),J.add(Y)}let I=new iQ(this[IG],this[R5].length,!1,this[l2],J,Q);return this[R5].push(I),I}createMaterialInstanceForVariant(A,Q,B,C=!0){let J=null;for(let I of this[T3]){let q=this[l2].get(B);if(q!=null&&I.variantInfo.has(q.index))continue;if(I.getMaterial(A)==null)continue;if(!this.hasVariant(B))this.createVariant(B);if(J==null)J=this[uR](A,Q);I.addVariant(J,B)}if(C&&J!=null){J[F8](!0),this.materials[A][F8](!1);for(let I of this[T3])I.enableVariant(B)}return J}createVariant(A){if(!this[l2].has(A))this[l2].set(A,{name:A,index:this[l2].size});else console.warn(`Variant '${A}'' already exists`)}hasVariant(A){return this[l2].has(A)}setMaterialToVariant(A,Q){if(this[bI]().find((B)=>B===Q)==null){console.warn(`Can't add material to '${Q}', the variant does not exist.'`);return}if(A<0||A>=this.materials.length){console.error("setMaterialToVariant(): materialIndex is out of bounds.");return}for(let B of this[T3]){let C=B.getMaterial(A);if(C!=null)B.addVariant(C,Q)}}updateVariantName(A,Q){let B=this[l2].get(A);if(B==null)return;B.name=Q,this[l2].set(Q,B),this[l2].delete(A)}deleteVariant(A){let Q=this[l2].get(A);if(Q==null)return;for(let B of this.materials)if(B.hasVariant(A))B[lQ].delete(Q.index);for(let B of this[T3])B.deleteVariant(Q.index);this[l2].delete(A)}}var XG=function(A,Q,B,C){var J=arguments.length,I=J<3?Q:C===null?C=Object.getOwnPropertyDescriptor(Q,B):C,q;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")I=Reflect.decorate(A,Q,B,C);else for(var K=A.length-1;K>=0;K--)if(q=A[K])I=(J<3?q(I):J>3?q(Q,B,I):q(Q,B))||I;return J>3&&I&&Object.defineProperty(Q,B,I),I},aQ=Symbol("currentGLTF"),rQ=Symbol("originalGltfJson"),F6=Symbol("model"),GG=Symbol("getOnUpdateMethod"),oQ=Symbol("buildTexture"),mR=(A)=>{var Q,B,C;class J extends A{constructor(){super(...arguments);this[Q]=void 0,this[B]=null,this[C]=null,this.variantName=null,this.orientation="0 0 0",this.scale="1 1 1"}get model(){return this[F6]}get availableVariants(){return this.model?this.model[bI]():[]}get originalGltfJson(){return this[rQ]}[(Q=F6,B=aQ,C=rQ,GG)](){return()=>{this[e1]()}}[oQ](I){return I.colorSpace=g1,I.wrapS=uA,I.wrapT=uA,new mQ(this[GG](),I)}async createTexture(I,q="image/png"){let{textureUtils:K}=this[G1],Y=await K.loadImage(I);return Y.userData.mimeType=q,this[oQ](Y)}async createLottieTexture(I,q=1){let{textureUtils:K}=this[G1],Y=await K.loadLottie(I,q);return this[oQ](Y)}createVideoTexture(I){let q=document.createElement("video");q.crossOrigin=this.withCredentials?"use-credentials":"anonymous",q.src=I,q.muted=!0,q.playsInline=!0,q.loop=!0,q.play();let K=new IH(q);return this[oQ](K)}createCanvasTexture(){let I=document.createElement("canvas"),q=new d7(I);return this[oQ](q)}async updated(I){if(super.updated(I),I.has("variantName")){let q=this[G4].beginActivity("variant-update");q(0.1);let K=this[F6],{variantName:Y}=this;if(K!=null)await K[KG](Y),this[e1](),this.dispatchEvent(new CustomEvent("variant-applied"));q(1)}if(I.has("orientation")||I.has("scale")){if(!this.loaded)return;let q=this[W0];q.applyTransform(),q.updateBoundingBox(),q.updateShadow(),this[G1].arRenderer.onUpdateScene(),this[e1]()}}[V4](){super[V4]();let{currentGLTF:I}=this[W0];if(I!=null){let{correlatedSceneGraph:q}=I;if(q!=null&&I!==this[aQ])this[F6]=new HG(q,this[GG]()),this[rQ]=JSON.parse(JSON.stringify(q.gltf));if("variants"in I.userData)this.requestUpdate("variantName")}this[aQ]=I}async exportScene(I){let q=this[W0];return new Promise(async(K,Y)=>{let Z={binary:!0,onlyVisible:!0,maxTextureSize:1/0,includeCustomExtensions:!1,forceIndices:!1};Object.assign(Z,I),Z.animations=q.animations,Z.truncateDrawRange=!0;let H=q.shadow,G=!1;if(H!=null)G=H.visible,H.visible=!1;if(await this[F6][qG](),new OQ().register((F)=>new FI(F)).parse(q.model,(F)=>{return K(new Blob([Z.binary?F:JSON.stringify(F)],{type:Z.binary?"application/octet-stream":"application/json"}))},()=>{return Y("glTF export failed")},Z),H!=null)H.visible=G})}materialFromPoint(I,q){let K=this[F6];if(K==null)return null;let Y=this[W0],Z=Y.getNDC(I,q),H=Y.hitFromPoint(Z);if(H==null||H.face==null)return null;return K[YG](H)}}return XG([f0({type:String,attribute:"variant-name"})],J.prototype,"variantName",void 0),XG([f0({type:String,attribute:"orientation"})],J.prototype,"orientation",void 0),XG([f0({type:String,attribute:"scale"})],J.prototype,"scale",void 0),J};class WG extends A1{constructor(){super(void 0,new t1({depthWrite:!1}));this.height=0,this.radius=0,this.resolution=0,this.userData.noHit=!0}get map(){return this.material.map}set map(A){this.material.map=A}isUsable(){return this.height>0&&this.radius>0&&this.geometry!=null&&this.map!=null}updateGeometry(A=this.height,Q=this.radius,B=128){if(A!=this.height||Q!=this.radius||B!=this.resolution){if(this.height=A,this.radius=Q,this.resolution=B,A>0&&Q>0)this.geometry.dispose(),this.geometry=Sv(A,Q,B)}}}function Sv(A,Q,B){let C=new nJ(Q,2*B,B);C.scale(1,1,-1);let J=C.getAttribute("position"),I=new p;for(let q=0;q<J.count;++q)if(I.fromBufferAttribute(J,q),I.y<0){let K=-A*3/2,Y=I.y<K?-A/I.y:1-I.y*I.y/(3*K*K);I.multiplyScalar(Y),I.toArray(J.array,3*q)}return J.needsUpdate=!0,C}var uI=new p,FG=new p,VG=new p,pI=new n0,dR=new FA,cR=new n1;class tQ extends wX{constructor(A){super(document.createElement("div"));this.normal=new p(0,1,0),this.initialized=!1,this.referenceCount=1,this.pivot=document.createElement("div"),this.slot=document.createElement("slot"),this.element.classList.add("annotation-wrapper"),this.slot.name=A.name,this.element.appendChild(this.pivot),this.pivot.appendChild(this.slot),this.updatePosition(A.position),this.updateNormal(A.normal),this.surface=A.surface}get facingCamera(){return!this.element.classList.contains("hide")}show(){if(!this.facingCamera||!this.initialized)this.updateVisibility(!0)}hide(){if(this.facingCamera||!this.initialized)this.updateVisibility(!1)}increment(){this.referenceCount++}decrement(){if(this.referenceCount>0)--this.referenceCount;return this.referenceCount===0}updatePosition(A){if(A==null)return;let Q=zA(A)[0].terms;for(let B=0;B<3;++B)this.position.setComponent(B,DA(Q[B]).number);this.updateMatrixWorld()}updateNormal(A){if(A==null)return;let Q=zA(A)[0].terms;for(let B=0;B<3;++B)this.normal.setComponent(B,Q[B].number)}updateSurface(A){if(!A&&this.initialized)return;let{mesh:Q,tri:B,bary:C}=this;if(Q==null||B==null||C==null)return;Q.getVertexPosition(B.x,uI),Q.getVertexPosition(B.y,FG),Q.getVertexPosition(B.z,VG),uI.toArray(pI.elements,0),FG.toArray(pI.elements,3),VG.toArray(pI.elements,6),this.position.copy(C).applyMatrix3(pI);let J=this.parent;J.worldToLocal(Q.localToWorld(this.position)),dR.set(uI,FG,VG),dR.getNormal(this.normal).transformDirection(Q.matrixWorld);let I=J.parent;cR.setFromAxisAngle(uI.set(0,1,0),-I.yaw),this.normal.applyQuaternion(cR)}orient(A){this.pivot.style.transform=`rotate(${A}rad)`}updateVisibility(A){this.element.classList.toggle("hide",!A),this.slot.assignedNodes().forEach((Q)=>{if(Q.nodeType!==Node.ELEMENT_NODE)return;let B=Q,C=B.dataset.visibilityAttribute;if(C!=null){let J=`data-${C}`;B.toggleAttribute(J,A)}B.dispatchEvent(new CustomEvent("hotspot-visibility",{detail:{visible:A}}))}),this.initialized=!0}}var lR={name:"HorizontalBlurShader",uniforms:{tDiffuse:{value:null},h:{value:0.001953125}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float h;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

			gl_FragColor = sum;

		}`};var sR={name:"VerticalBlurShader",uniforms:{tDiffuse:{value:null},v:{value:0.001953125}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float v;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

			gl_FragColor = sum;

		}`};var N70=Math.PI/180,$70=180/Math.PI;function UG(A,Q,B){return(1-B)*A+B*Q}var iR=9,yv=6,zG=2,fv=0.3;class DG extends L1{constructor(A,Q,B){super();this.camera=new Z4,this.renderTarget=null,this.renderTargetBlur=null,this.depthMaterial=new mJ,this.horizontalBlurMaterial=new C2(lR),this.verticalBlurMaterial=new C2(sR),this.intensity=0,this.softness=1,this.boundingBox=new G2,this.size=new p,this.maxDimension=0,this.isAnimated=!1,this.needsUpdate=!1;let{camera:C}=this;C.rotation.x=Math.PI/2,C.left=-0.5,C.right=0.5,C.bottom=-0.5,C.top=0.5,this.add(C);let J=new P2,I=new t1({opacity:1,transparent:!0,side:x7});this.floor=new A1(J,I),this.floor.userData.noHit=!0,C.add(this.floor),this.blurPlane=new A1(J),this.blurPlane.visible=!1,C.add(this.blurPlane),A.target.add(this),this.depthMaterial.onBeforeCompile=function(q){q.fragmentShader=q.fragmentShader.replace("gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );","gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * opacity );")},this.horizontalBlurMaterial.depthTest=!1,this.verticalBlurMaterial.depthTest=!1,this.setScene(A,Q,B)}setScene(A,Q,B){let{boundingBox:C,size:J,rotation:I,position:q}=this;if(this.isAnimated=A.animationNames.length>0,this.boundingBox.copy(A.boundingBox),this.size.copy(A.size),this.maxDimension=Math.max(J.x,J.y,J.z)*(this.isAnimated?zG:1),this.boundingBox.getCenter(q),B==="back"){let{min:K,max:Y}=C;[K.y,K.z]=[K.z,K.y],[Y.y,Y.z]=[Y.z,Y.y],[J.y,J.z]=[J.z,J.y],I.x=Math.PI/2,I.y=Math.PI}else I.x=0,I.y=0;if(this.isAnimated){let K=C.min.y,Y=C.max.y;J.y=this.maxDimension,C.expandByVector(J.subScalar(this.maxDimension).multiplyScalar(-0.5)),C.min.y=K,C.max.y=Y,J.set(this.maxDimension,Y-K,this.maxDimension)}if(B==="bottom")q.y=C.min.y;else q.z=C.min.y;this.setSoftness(Q)}setSoftness(A){this.softness=A;let{size:Q,camera:B}=this,C=this.isAnimated?zG:1,J=C*Math.pow(2,iR-A*(iR-yv));this.setMapSize(J);let I=Q.y/2,q=Q.y*C;B.near=0,B.far=UG(q,I,A),this.depthMaterial.opacity=1/A,B.updateProjectionMatrix(),this.setIntensity(this.intensity),this.setOffset(0)}setMapSize(A){let{size:Q}=this;if(this.isAnimated)A*=zG;let B=Math.floor(Q.x>Q.z?A:A*Q.x/Q.z),C=Math.floor(Q.x>Q.z?A*Q.z/Q.x:A),J=10,I=J+B,q=J+C;if(this.renderTarget!=null&&(this.renderTarget.width!==I||this.renderTarget.height!==q))this.renderTarget.dispose(),this.renderTarget=null,this.renderTargetBlur.dispose(),this.renderTargetBlur=null;if(this.renderTarget==null){let K={format:X2};this.renderTarget=new u2(I,q,K),this.renderTargetBlur=new u2(I,q,K),this.floor.material.map=this.renderTarget.texture}this.camera.scale.set(Q.x*(1+J/B),Q.z*(1+J/C),1),this.needsUpdate=!0}setIntensity(A){if(this.intensity=A,A>0)this.visible=!0,this.floor.visible=!0,this.floor.material.opacity=A*UG(fv,1,this.softness*this.softness);else this.visible=!1,this.floor.visible=!1}getIntensity(){return this.intensity}setOffset(A){this.floor.position.z=-A+this.gap()}gap(){return 0.001*this.maxDimension}render(A,Q){Q.overrideMaterial=this.depthMaterial;let B=A.getClearAlpha();A.setClearAlpha(0),this.floor.visible=!1;let C=A.xr.enabled;A.xr.enabled=!1;let J=A.getRenderTarget();A.setRenderTarget(this.renderTarget),A.render(Q,this.camera),Q.overrideMaterial=null,this.floor.visible=!0,this.blurShadow(A),A.xr.enabled=C,A.setRenderTarget(J),A.setClearAlpha(B)}blurShadow(A){let{camera:Q,horizontalBlurMaterial:B,verticalBlurMaterial:C,renderTarget:J,renderTargetBlur:I,blurPlane:q}=this;q.visible=!0,q.material=B,B.uniforms.h.value=1/this.renderTarget.width,B.uniforms.tDiffuse.value=this.renderTarget.texture,A.setRenderTarget(I),A.render(q,Q),q.material=C,C.uniforms.v.value=1/this.renderTarget.height,C.uniforms.tDiffuse.value=this.renderTargetBlur.texture,A.setRenderTarget(J),A.render(q,Q),q.visible=!1}dispose(){if(this.renderTarget!=null)this.renderTarget.dispose();if(this.renderTargetBlur!=null)this.renderTargetBlur.dispose();this.depthMaterial.dispose(),this.horizontalBlurMaterial.dispose(),this.verticalBlurMaterial.dispose(),this.floor.material.dispose(),this.floor.geometry.dispose(),this.blurPlane.geometry.dispose(),this.removeFromParent()}}var nR=10,EG=100;var wG=new p,oR=new p,aR=new p,NG=new UH,hv=new p,eQ=new M0;class $G extends W2{constructor({canvas:A,element:Q,width:B,height:C}){super();this.annotationRenderer=new NX,this.effectRenderer=null,this.schemaElement=document.createElement("script"),this.width=1,this.height=1,this.aspect=1,this.scaleStep=0,this.renderCount=0,this.externalRenderer=null,this.camera=new b1(45,1,0.1,100),this.xrCamera=null,this.url=null,this.target=new L1,this.animationNames=[],this.boundingBox=new G2,this.boundingSphere=new p2,this.size=new p,this.idealAspect=0,this.framedFoVDeg=0,this.shadow=null,this.shadowIntensity=0,this.shadowSoftness=1,this.bakedShadows=new Set,this.exposure=1,this.toneMapping=g7,this.canScale=!0,this.isDirty=!1,this.goalTarget=new p,this.targetDamperX=new T2,this.targetDamperY=new T2,this.targetDamperZ=new T2,this._currentGLTF=null,this._model=null,this.cancelPendingSourceChange=null,this.animationsByName=new Map,this.currentAnimationAction=null,this.groundedSkybox=new WG,this.name="ModelScene",this.element=Q,this.canvas=A,this.camera=new b1(45,1,0.1,100),this.camera.name="MainCamera",this.add(this.target),this.setSize(B,C),this.target.name="Target",this.mixer=new rJ(this.target);let{domElement:J}=this.annotationRenderer,{style:I}=J;I.display="none",I.pointerEvents="none",I.position="absolute",I.top="0",this.element.shadowRoot.querySelector(".default").appendChild(J),this.schemaElement.setAttribute("type","application/ld+json")}get context(){return this.canvas.getContext("2d")}getCamera(){return this.xrCamera!=null?this.xrCamera:this.camera}queueRender(){this.isDirty=!0}shouldRender(){return this.isDirty}hasRendered(){this.isDirty=!1}forceRescale(){this.scaleStep=-1,this.queueRender()}async setObject(A){this.reset(),this._model=A,this.target.add(A),await this.setupScene()}async setSource(A,Q=()=>{}){if(!A||A===this.url){Q(1);return}if(this.reset(),this.url=A,this.externalRenderer!=null){let q=await this.externalRenderer.load(Q);this.boundingSphere.radius=q.framedRadius,this.idealAspect=q.fieldOfViewAspect;return}if(this.cancelPendingSourceChange!=null)this.cancelPendingSourceChange(),this.cancelPendingSourceChange=null;let B;try{B=await new Promise(async(q,K)=>{this.cancelPendingSourceChange=()=>K();try{let Y=await this.element[G1].loader.load(A,this.element,Q);q(Y)}catch(Y){K(Y)}})}catch(q){if(q==null)return;throw q}if(this.cancelPendingSourceChange=null,this.reset(),this.url=A,this._currentGLTF=B,B!=null)this._model=B.scene,this.target.add(B.scene);let{animations:C}=B,J=new Map,I=[];for(let q of C)J.set(q.name,q),I.push(q.name);this.animations=C,this.animationsByName=J,this.animationNames=I,await this.setupScene()}async setupScene(){this.applyTransform(),this.updateBoundingBox(),await this.updateFraming(),this.updateShadow(),this.setShadowIntensity(this.shadowIntensity),this.setGroundedSkybox()}reset(){if(this.url=null,this.renderCount=0,this.queueRender(),this.shadow!=null)this.shadow.setIntensity(0);this.bakedShadows.clear();let{_model:A}=this;if(A!=null)A.removeFromParent(),this._model=null;let Q=this._currentGLTF;if(Q!=null)Q.dispose(),this._currentGLTF=null;if(this.currentAnimationAction!=null)this.currentAnimationAction.stop(),this.currentAnimationAction=null;this.mixer.stopAllAction(),this.mixer.uncacheRoot(this)}dispose(){if(this.reset(),this.shadow!=null)this.shadow.dispose(),this.shadow=null;this.element[aQ]=null,this.element[rQ]=null,this.element[F6]=null}get currentGLTF(){return this._currentGLTF}setSize(A,Q){if(this.width===A&&this.height===Q)return;if(this.width=Math.max(A,1),this.height=Math.max(Q,1),this.annotationRenderer.setSize(A,Q),this.aspect=this.width/this.height,this.externalRenderer!=null){let B=wQ();this.externalRenderer.resize(A*B,Q*B)}this.queueRender()}markBakedShadow(A){A.userData.noHit=!0,this.bakedShadows.add(A)}unmarkBakedShadow(A){A.userData.noHit=!1,A.visible=!0,this.bakedShadows.delete(A),this.boundingBox.expandByObject(A)}findBakedShadows(A){let Q=new G2;A.traverse((B)=>{let C=B;if(!C.material)return;if(!C.material.transparent)return;Q.setFromObject(C);let I=Q.getSize(hv),q=Math.min(I.x,I.y,I.z);if(Math.max(I.x,I.y,I.z)<EG*q)return;this.markBakedShadow(C)})}checkBakedShadows(){let{min:A,max:Q}=this.boundingBox,B=new G2;this.boundingBox.getSize(this.size);for(let C of this.bakedShadows){if(B.setFromObject(C),B.min.y<A.y+this.size.y/EG&&B.min.x<=A.x&&B.max.x>=Q.x&&B.min.z<=A.z&&B.max.z>=Q.z)continue;if(B.min.z<A.z+this.size.z/EG&&B.min.x<=A.x&&B.max.x>=Q.x&&B.min.y<=A.y&&B.max.y>=Q.y)continue;this.unmarkBakedShadow(C)}}applyTransform(){let{model:A}=this;if(A==null)return;let Q=zA(this.element.orientation)[0].terms,B=DA(Q[0]).number,C=DA(Q[1]).number,J=DA(Q[2]).number;A.quaternion.setFromEuler(new VA(C,J,B,"YXZ"));let I=zA(this.element.scale)[0].terms;A.scale.set(I[0].number,I[1].number,I[2].number)}updateBoundingBox(){let{model:A}=this;if(A==null)return;this.target.remove(A),this.findBakedShadows(A);let Q=(B,C)=>{return B.expandByPoint(C)};if(this.setBakedShadowVisibility(!1),this.boundingBox=RQ(A,Q,new G2),this.boundingBox.isEmpty())this.setBakedShadowVisibility(!0),this.bakedShadows.forEach((B)=>this.unmarkBakedShadow(B)),this.boundingBox=RQ(A,Q,new G2);this.checkBakedShadows(),this.setBakedShadowVisibility(),this.boundingBox.getSize(this.size),this.target.add(A)}async updateFraming(){let{model:A}=this;if(A==null)return;this.target.remove(A),this.setBakedShadowVisibility(!1);let{center:Q}=this.boundingSphere;this.element.requestUpdate("cameraTarget"),await this.element.updateComplete,Q.copy(this.getTarget());let B=(J,I)=>{return Math.max(J,Q.distanceToSquared(I))};this.boundingSphere.radius=Math.sqrt(RQ(A,B,0));let C=(J,I)=>{I.sub(Q);let q=Math.sqrt(I.x*I.x+I.z*I.z);return Math.max(J,q/(this.idealCameraDistance()-Math.abs(I.y)))};this.idealAspect=RQ(A,C,0)/Math.tan(this.framedFoVDeg/2*Math.PI/180),this.setBakedShadowVisibility(),this.target.add(A)}setBakedShadowVisibility(A=this.shadowIntensity<=0){for(let Q of this.bakedShadows)Q.visible=A}idealCameraDistance(){let A=this.framedFoVDeg/2*Math.PI/180;return this.boundingSphere.radius/Math.sin(A)}adjustedFoV(A){let Q=Math.tan(A/2*Math.PI/180)*Math.max(1,this.idealAspect/this.aspect);return 2*Math.atan(Q)*180/Math.PI}getNDC(A,Q){if(this.xrCamera!=null)eQ.set(A/window.screen.width,Q/window.screen.height);else{let B=this.element.getBoundingClientRect();eQ.set((A-B.x)/this.width,(Q-B.y)/this.height)}return eQ.multiplyScalar(2).subScalar(1),eQ.y*=-1,eQ}getSize(){return{width:this.width,height:this.height}}setEnvironmentAndSkybox(A,Q){if(this.element[G1].arRenderer.presentedScene===this)return;this.environment=A,this.setBackground(Q),this.queueRender()}setBackground(A){if(this.groundedSkybox.map=A,this.groundedSkybox.isUsable())this.target.add(this.groundedSkybox),this.background=null;else this.target.remove(this.groundedSkybox),this.background=A}farRadius(){return this.boundingSphere.radius*(this.groundedSkybox.parent!=null?nR:1)}setGroundedSkybox(){let A=zA(this.element.skyboxHeight)[0].terms[0],Q=DA(A).number,B=nR*this.boundingSphere.radius;this.groundedSkybox.updateGeometry(Q,B),this.groundedSkybox.position.y=Q-(this.shadow?2*this.shadow.gap():0),this.setBackground(this.groundedSkybox.map)}setTarget(A,Q,B){this.goalTarget.set(-A,-Q,-B)}setTargetDamperDecayTime(A){this.targetDamperX.setDecayTime(A),this.targetDamperY.setDecayTime(A),this.targetDamperZ.setDecayTime(A)}getTarget(){return this.goalTarget.clone().multiplyScalar(-1)}jumpToGoal(){this.updateTarget(VI)}updateTarget(A){let Q=this.goalTarget,B=this.target.position;if(!Q.equals(B)){let C=this.boundingSphere.radius/10,{x:J,y:I,z:q}=B;return J=this.targetDamperX.update(J,Q.x,A,C),I=this.targetDamperY.update(I,Q.y,A,C),q=this.targetDamperZ.update(q,Q.z,A,C),this.target.position.set(J,I,q),this.target.updateMatrixWorld(),this.queueRender(),!0}else return!1}pointTowards(A,Q){let{x:B,z:C}=this.position;this.yaw=Math.atan2(A-B,Q-C)}get model(){return this._model}set yaw(A){this.rotation.y=A,this.queueRender()}get yaw(){return this.rotation.y}set animationTime(A){this.mixer.setTime(A),this.queueShadowRender()}get animationTime(){if(this.currentAnimationAction!=null){let A=Math.max(this.currentAnimationAction._loopCount,0);if(this.currentAnimationAction.loop===hJ&&(A&1)===1)return this.duration-this.currentAnimationAction.time;else return this.currentAnimationAction.time}return 0}set animationTimeScale(A){this.mixer.timeScale=A}get animationTimeScale(){return this.mixer.timeScale}get duration(){if(this.currentAnimationAction!=null&&this.currentAnimationAction.getClip())return this.currentAnimationAction.getClip().duration;return 0}get hasActiveAnimation(){return this.currentAnimationAction!=null}playAnimation(A=null,Q=0,B=fJ,C=1/0){if(this._currentGLTF==null)return;let{animations:J}=this;if(J==null||J.length===0)return;let I=null;if(A!=null){if(I=this.animationsByName.get(A),I==null){let q=parseInt(A);if(!isNaN(q)&&q>=0&&q<J.length)I=J[q]}}if(I==null)I=J[0];try{let{currentAnimationAction:q}=this,K=this.mixer.clipAction(I,this);if(this.currentAnimationAction=K,this.element.paused)this.mixer.stopAllAction();else if(K.paused=!1,q!=null&&K!==q)K.crossFadeFrom(q,Q,!1);else if(this.animationTimeScale>0&&this.animationTime==this.duration)this.animationTime=0;K.setLoop(B,C),K.enabled=!0,K.clampWhenFinished=!0,K.play()}catch(q){console.error(q)}}stopAnimation(){this.currentAnimationAction=null,this.mixer.stopAllAction()}updateAnimation(A){this.mixer.update(A),this.queueShadowRender()}subscribeMixerEvent(A,Q){this.mixer.addEventListener(A,Q)}updateShadow(){let A=this.shadow;if(A!=null){let Q=this.element.arPlacement==="wall"?"back":"bottom";A.setScene(this,this.shadowSoftness,Q),A.needsUpdate=!0}}renderShadow(A){let Q=this.shadow;if(Q!=null&&Q.needsUpdate==!0)Q.render(A,this),Q.needsUpdate=!1}queueShadowRender(){if(this.shadow!=null)this.shadow.needsUpdate=!0}setShadowIntensity(A){if(this.shadowIntensity=A,this._currentGLTF==null)return;if(this.setBakedShadowVisibility(),A<=0&&this.shadow==null)return;if(this.shadow==null){let Q=this.element.arPlacement==="wall"?"back":"bottom";this.shadow=new DG(this,this.shadowSoftness,Q)}this.shadow.setIntensity(A)}setShadowSoftness(A){this.shadowSoftness=A;let Q=this.shadow;if(Q!=null)Q.setSoftness(A)}setShadowOffset(A){let Q=this.shadow;if(Q!=null)Q.setOffset(A)}hitFromPoint(A,Q=this){return NG.setFromCamera(A,this.getCamera()),NG.intersectObject(Q,!0).find((C)=>C.object.visible&&!C.object.userData.noHit)}positionAndNormalFromPoint(A,Q=this){var B;let C=this.hitFromPoint(A,Q);if(C==null)return null;let J=C.point,I=C.face!=null?C.face.normal.clone().applyNormalMatrix(new n0().getNormalMatrix(C.object.matrixWorld)):NG.ray.direction.clone().multiplyScalar(-1),q=(B=C.uv)!==null&&B!==void 0?B:null;return{position:J,normal:I,uv:q}}surfaceFromPoint(A,Q=this){let B=this.element.model;if(B==null)return null;let C=this.hitFromPoint(A,Q);if(C==null||C.face==null)return null;let J=B[vI](C),{meshes:I,primitives:q}=J.mesh.userData.associations,K=new p,Y=new p,Z=new p,{a:H,b:G,c:W}=C.face,F=C.object;F.getVertexPosition(H,K),F.getVertexPosition(G,Y),F.getVertexPosition(W,Z);let z=new FA(K,Y,Z),U=new p;return z.getBarycoord(F.worldToLocal(C.point),U),`${I} ${q} ${H} ${G} ${W} ${U.x.toFixed(3)} ${U.y.toFixed(3)} ${U.z.toFixed(3)}`}addHotspot(A){this.target.add(A),this.annotationRenderer.domElement.appendChild(A.element)}removeHotspot(A){this.target.remove(A)}forHotspots(A){let{children:Q}=this.target;for(let B=0,C=Q.length;B<C;B++){let J=Q[B];if(J instanceof tQ)A(J)}}initializeSurface(A){if(A.surface!=null&&A.mesh==null){let Q=zA(A.surface)[0].terms;if(Q.length!=8){console.warn(A.surface+" does not have exactly 8 numbers.");return}let B=this.element.model[ZG](Q[0].number,Q[1].number),C=new p(Q[2].number,Q[3].number,Q[4].number);if(B==null){console.warn(A.surface+" does not match a node/primitive in this glTF! Skipping this hotspot.");return}let J=B.mesh.geometry.attributes.position.count;if(C.x>=J||C.y>=J||C.z>=J){console.warn(A.surface+" vertex indices out of range in this glTF! Skipping this hotspot.");return}let I=new p(Q[5].number,Q[6].number,Q[7].number);A.mesh=B.mesh,A.tri=C,A.bary=I}}updateSurfaceHotspots(){let A=!this.element.paused;this.forHotspots((Q)=>{this.initializeSurface(Q),Q.updateSurface(A)})}updateHotspotsVisibility(A){this.forHotspots((Q)=>{if(wG.copy(A),oR.setFromMatrixPosition(Q.matrixWorld),wG.sub(oR),aR.copy(Q.normal).transformDirection(this.target.matrixWorld),wG.dot(aR)<0)Q.hide();else Q.show()})}orientHotspots(A){this.forHotspots((Q)=>{Q.orient(A)})}setHotspotsVisibility(A){this.forHotspots((Q)=>{Q.visible=A})}updateSchema(A){var Q;let{schemaElement:B,element:C}=this,{alt:J,poster:I,iosSrc:q}=C;if(A!=null){let K=[{"@type":"MediaObject",contentUrl:A,encodingFormat:((Q=A.split(".").pop())===null||Q===void 0?void 0:Q.toLowerCase())==="gltf"?"model/gltf+json":"model/gltf-binary"}];if(q)K.push({"@type":"MediaObject",contentUrl:q,encodingFormat:"model/vnd.usdz+zip"});let Y={"@context":"http://schema.org/","@type":"3DModel",image:I!==null&&I!==void 0?I:void 0,name:J!==null&&J!==void 0?J:void 0,encoding:K};B.textContent=JSON.stringify(Y),document.head.appendChild(B)}else if(B.parentElement!=null)B.parentElement.removeChild(B)}}class RG extends EventTarget{constructor(){super(...arguments);this.ongoingActivities=new Set,this.totalProgress=0}get ongoingActivityCount(){return this.ongoingActivities.size}beginActivity(A){let Q={progress:0,completed:!1};if(this.ongoingActivities.add(Q),this.ongoingActivityCount===1)this.announceTotalProgress(Q,0,A);return(B)=>{let C;if(C=Math.max(d2(B,0,1),Q.progress),C!==Q.progress)this.announceTotalProgress(Q,C,A);return Q.progress}}announceTotalProgress(A,Q,B){let C=0,J=0;if(Q==1)A.completed=!0;for(let K of this.ongoingActivities){let{progress:Y}=K;if(C+=1-Y,K.completed)J++}let I=A.progress;A.progress=Q,this.totalProgress+=(Q-I)*(1-this.totalProgress)/C;let q=J===this.ongoingActivityCount?1:this.totalProgress;if(this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:q,reason:B}})),J===this.ongoingActivityCount)this.totalProgress=0,this.ongoingActivities.clear()}}var lI=function(A,Q,B,C){var J=arguments.length,I=J<3?Q:C===null?C=Object.getOwnPropertyDescriptor(Q,B):C,q;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")I=Reflect.decorate(A,Q,B,C);else for(var K=A.length-1;K>=0;K--)if(q=A[K])I=(J<3?q(I):J>3?q(Q,B,I):q(Q,B))||I;return J>3&&I&&Object.defineProperty(Q,B,I),I},rR,tR,eR,AL,QL,BL,CL,JL,IL,qL,KL,YL,ZL,xv=10,gv=50,vv=0,bv=300,uv=150,O3=document.createElement("canvas"),LG=Symbol("fallbackResizeHandler"),HL=Symbol("defaultAriaLabel"),mI=Symbol("resizeObserver"),V8=Symbol("clearModelTimeout"),MG=Symbol("onContextLost"),U8=Symbol("loaded"),OG=Symbol("status"),kG=Symbol("onFocus"),PG=Symbol("onBlur"),w5=Symbol("updateSize"),dI=Symbol("intersectionObserver"),V6=Symbol("isElementInViewport"),QB=Symbol("announceModelVisibility"),K8=Symbol("ariaLabel"),cI=Symbol("altDefaulted"),AB=Symbol("statusElement"),MI=Symbol("updateStatus"),Y8=Symbol("loadedTime"),U6=Symbol("updateSource"),XL=Symbol("markLoaded"),fQ=Symbol("container"),mA=Symbol("input"),yI=Symbol("canvas"),W0=Symbol("scene"),e1=Symbol("needsRender"),BA=Symbol("tick"),V4=Symbol("onModelLoad"),E5=Symbol("onResize"),G1=Symbol("renderer"),G4=Symbol("progressTracker"),GL=Symbol("getLoaded"),U4=Symbol("getModelIsVisible"),w3=Symbol("shouldAttemptPreload"),z4=(A)=>{return{x:A.x,y:A.y,z:A.z,toString(){return`${this.x}m ${this.y}m ${this.z}m`}}},pQ=(A)=>{return{u:A.x,v:A.y,toString(){return`${this.u} ${this.v}`}}};class z6 extends p4{constructor(){super();this.alt=null,this.src=null,this.withCredentials=!1,this.generateSchema=!1,this[rR]=!1,this[tR]=!1,this[eR]=0,this[AL]="",this[QL]=null,this[BL]=TH(()=>{let C=this.getBoundingClientRect();this[w5](C)},gv),this[CL]=TH((C)=>{let J=this.modelIsVisible;if(J!==C)this.dispatchEvent(new CustomEvent("model-visibility",{detail:{visible:J}}))},vv),this[JL]=null,this[IL]=null,this[qL]=new RG,this[KL]=()=>{this[AB].textContent=this[OG]},this[YL]=()=>{this[AB].textContent=""},this[ZL]=(C)=>{this.dispatchEvent(new CustomEvent("error",{detail:{type:"webglcontextlost",sourceError:C.sourceEvent}}))},this.attachShadow({mode:"open"});let A=this.shadowRoot;Tw(A),this[fQ]=A.querySelector(".container"),this[mA]=A.querySelector(".userInput"),this[yI]=A.querySelector("canvas"),this[AB]=A.querySelector("#status"),this[HL]=this[mA].getAttribute("aria-label");let Q,B;if(this.isConnected){let C=this.getBoundingClientRect();Q=C.width,B=C.height}else Q=bv,B=uv;if(this[W0]=new $G({canvas:this[yI],element:this,width:Q,height:B}),Promise.resolve().then(()=>{this[w5](this.getBoundingClientRect())}),II)this[mI]=new ResizeObserver((C)=>{if(this[G1].isPresenting)return;for(let J of C)if(J.target===this)this[w5](J.contentRect)});if(qI)this[dI]=new IntersectionObserver((C)=>{for(let J of C)if(J.target===this){let I=this.modelIsVisible;if(this[V6]=J.isIntersecting,this[QB](I),this[V6]&&!this.loaded)this[U6]()}},{root:null,rootMargin:"0px",threshold:0.00001});else this[V6]=!0}static get is(){return"model-viewer"}static set modelCacheSize(A){Q2[L3].evictionThreshold=A}static get modelCacheSize(){return Q2[L3].evictionThreshold}static set minimumRenderScale(A){if(A>1)console.warn("<model-viewer> minimumRenderScale has been clamped to a maximum value of 1.");if(A<=0)console.warn("<model-viewer> minimumRenderScale has been clamped to a minimum value of 0.25.");CA.singleton.minScale=A}static get minimumRenderScale(){return CA.singleton.minScale}get loaded(){return this[GL]()}get[(rR=V6,tR=U8,eR=Y8,AL=OG,QL=V8,BL=LG,CL=QB,JL=mI,IL=dI,qL=G4,G1)](){return CA.singleton}get modelIsVisible(){return this[U4]()}connectedCallback(){if(super.connectedCallback&&super.connectedCallback(),II)this[mI].observe(this);else self.addEventListener("resize",this[LG]);if(qI)this[dI].observe(this);this.addEventListener("focus",this[kG]),this.addEventListener("blur",this[PG]);let A=this[G1];if(A.addEventListener("contextlost",this[MG]),A.registerScene(this[W0]),this[V8]!=null)self.clearTimeout(this[V8]),this[V8]=null,this.requestUpdate("src",null)}disconnectedCallback(){if(super.disconnectedCallback&&super.disconnectedCallback(),II)this[mI].unobserve(this);else self.removeEventListener("resize",this[LG]);if(qI)this[dI].unobserve(this);this.removeEventListener("focus",this[kG]),this.removeEventListener("blur",this[PG]);let A=this[G1];A.removeEventListener("contextlost",this[MG]),A.unregisterScene(this[W0]),this[V8]=self.setTimeout(()=>{this[W0].dispose(),this[V8]=null},xv)}updated(A){if(super.updated(A),A.has("src")){if(this.src==null)this[U8]=!1,this[Y8]=0,this[W0].reset();else if(this.src!==this[W0].url)this[U8]=!1,this[Y8]=0,this[U6]()}if(A.has("alt"))this[mA].setAttribute("aria-label",this[K8]);if(A.has("withCredentials"))Q2.withCredentials=this.withCredentials,this[G1].textureUtils.withCredentials=this.withCredentials;if(A.has("generateSchema"))if(this.generateSchema)this[W0].updateSchema(this.src);else this[W0].updateSchema(null)}toDataURL(A,Q){return this[G1].displayCanvas(this[W0]).toDataURL(A,Q)}async toBlob(A){let Q=A?A.mimeType:void 0,B=A?A.qualityArgument:void 0,C=A?A.idealAspect:void 0,{width:J,height:I,idealAspect:q,aspect:K}=this[W0],{dpr:Y,scaleFactor:Z}=this[G1],H=J*Z*Y,G=I*Z*Y,W=0,F=0;if(C===!0)if(q>K){let z=G;G=Math.round(H/q),F=(z-G)/2}else{let z=H;H=Math.round(G*q),W=(z-H)/2}O3.width=H,O3.height=G;try{return new Promise(async(z,U)=>{O3.getContext("2d").drawImage(this[G1].displayCanvas(this[W0]),W,F,H,G,0,0,H,G),O3.toBlob((E)=>{if(!E)return U(new Error("Unable to retrieve canvas blob"));z(E)},Q,B)})}finally{this[w5]({width:J,height:I})}}registerEffectComposer(A){A.setRenderer(this[G1].threeRenderer),A.setMainCamera(this[W0].getCamera()),A.setMainScene(this[W0]),this[W0].effectRenderer=A}unregisterEffectComposer(){this[W0].effectRenderer=null}registerRenderer(A){this[W0].externalRenderer=A}unregisterRenderer(){this[W0].externalRenderer=null}get[K8](){return this[cI]}get[cI](){return this.alt==null||this.alt==="null"?this[HL]:this.alt}[GL](){return this[U8]}[U4](){return this.loaded&&this[V6]}[w3](){return!!this.src&&this[V6]}[w5]({width:A,height:Q}){if(A===0||Q===0)return;this[fQ].style.width=`${A}px`,this[fQ].style.height=`${Q}px`,this[E5]({width:A,height:Q})}[BA](A,Q){var B;(B=this[W0].effectRenderer)===null||B===void 0||B.beforeRender(A,Q)}[XL](){if(this[U8])return;this[U8]=!0,this[Y8]=performance.now()}[e1](){this[W0].queueRender()}[V4](){}[MI](A){this[OG]=A;let Q=this.getRootNode();if(Q!=null&&Q.activeElement===this&&this[AB].textContent!=A)this[AB].textContent=A}[(KL=kG,YL=PG,E5)](A){this[W0].setSize(A.width,A.height)}async[(ZL=MG,U6)](){let A=this[W0];if(this.loaded||!this[w3]()||this.src===A.url)return;if(this.generateSchema)A.updateSchema(this.src);this[MI]("Loading"),A.stopAnimation();let Q=this[G4].beginActivity("model-load"),B=this.src;try{let C=A.setSource(B,(I)=>Q(d2(I,0,1)*0.95)),J=this[n7]();await Promise.all([C,J]),this[XL](),this[V4](),this.updateComplete.then(()=>{this.dispatchEvent(new CustomEvent("before-render"))}),await new Promise((I)=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.dispatchEvent(new CustomEvent("load",{detail:{url:B}})),I()})})})}catch(C){this.dispatchEvent(new CustomEvent("error",{detail:{type:"loadfailure",sourceError:C}}))}finally{Q(1)}}}lI([f0({type:String})],z6.prototype,"alt",void 0);lI([f0({type:String})],z6.prototype,"src",void 0);lI([f0({type:Boolean,attribute:"with-credentials"})],z6.prototype,"withCredentials",void 0);lI([f0({type:Boolean,attribute:"generate-schema"})],z6.prototype,"generateSchema",void 0);var _G=function(A,Q,B,C){var J=arguments.length,I=J<3?Q:C===null?C=Object.getOwnPropertyDescriptor(Q,B):C,q;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")I=Reflect.decorate(A,Q,B,C);else for(var K=A.length-1;K>=0;K--)if(q=A[K])I=(J<3?q(I):J>3?q(Q,B,I):q(Q,B))||I;return J>3&&I&&Object.defineProperty(Q,B,I),I},WL=1000,sI=Symbol("changeAnimation"),j3=Symbol("paused"),pv={repetitions:1/0,pingpong:!1},FL=(A)=>{var Q;class B extends A{constructor(...C){super(C);this.autoplay=!1,this.animationName=void 0,this.animationCrossfadeDuration=300,this[Q]=!0,this[W0].subscribeMixerEvent("loop",(J)=>{let I=J.action._loopCount;this.dispatchEvent(new CustomEvent("loop",{detail:{count:I}}))}),this[W0].subscribeMixerEvent("finished",()=>{this[j3]=!0,this.dispatchEvent(new CustomEvent("finished"))})}get availableAnimations(){if(this.loaded)return this[W0].animationNames;return[]}get duration(){return this[W0].duration}get paused(){return this[j3]}get currentTime(){return this[W0].animationTime}set currentTime(C){this[W0].animationTime=C,this[e1]()}get timeScale(){return this[W0].animationTimeScale}set timeScale(C){this[W0].animationTimeScale=C}pause(){if(this[j3])return;this[j3]=!0,this.dispatchEvent(new CustomEvent("pause"))}play(C){if(this.availableAnimations.length>0)this[j3]=!1,this[sI](C),this.dispatchEvent(new CustomEvent("play"))}[(Q=j3,V4)](){if(super[V4](),this[j3]=!0,this.animationName!=null)this[sI]();if(this.autoplay)this.play()}[BA](C,J){if(super[BA](C,J),this[j3]||!this[U4]()&&!this[G1].isPresenting)return;this[W0].updateAnimation(J/WL),this[e1]()}updated(C){if(super.updated(C),C.has("autoplay")&&this.autoplay)this.play();if(C.has("animationName"))this[sI]()}[sI](C=pv){var J;let I=(J=C.repetitions)!==null&&J!==void 0?J:1/0,q=C.pingpong?hJ:I===1?WE:fJ;if(this[W0].playAnimation(this.animationName,this.animationCrossfadeDuration/WL,q,I),this[j3])this[W0].updateAnimation(0),this[e1]()}}return _G([f0({type:Boolean})],B.prototype,"autoplay",void 0),_G([f0({type:String,attribute:"animation-name"})],B.prototype,"animationName",void 0),_G([f0({type:Number,attribute:"animation-crossfade-duration"})],B.prototype,"animationCrossfadeDuration",void 0),B};var L5=Symbol("hotspotMap"),TG=Symbol("mutationCallback"),BB=Symbol("observer"),jG=Symbol("addHotspot"),VL=Symbol("removeHotspot"),SG=new h0,UL=(A)=>{var Q,B,C;class J extends A{constructor(){super(...arguments);this[Q]=new Map,this[B]=(I)=>{I.forEach((q)=>{if(!(q instanceof MutationRecord)||q.type==="childList")q.addedNodes.forEach((K)=>{this[jG](K)}),q.removedNodes.forEach((K)=>{this[VL](K)}),this[e1]()})},this[C]=new MutationObserver(this[TG])}connectedCallback(){super.connectedCallback();for(let q=0;q<this.children.length;++q)this[jG](this.children[q]);let{ShadyDOM:I}=self;if(I==null)this[BB].observe(this,{childList:!0});else this[BB]=I.observeChildren(this,this[TG])}disconnectedCallback(){super.disconnectedCallback();let{ShadyDOM:I}=self;if(I==null)this[BB].disconnect();else I.unobserveChildren(this[BB])}[(Q=L5,B=TG,C=BB,BA)](I,q){super[BA](I,q);let K=this[W0],{annotationRenderer:Y}=K,Z=K.getCamera();if(K.shouldRender())K.updateSurfaceHotspots(),K.updateHotspotsVisibility(Z.position),Y.domElement.style.display="",Y.render(K,Z)}updateHotspot(I){let q=this[L5].get(I.name);if(q==null)return;q.updatePosition(I.position),q.updateNormal(I.normal),q.surface=I.surface,this[e1]()}queryHotspot(I){let q=this[L5].get(I);if(q==null)return null;let K=z4(q.position),Y=z4(q.normal),Z=q.facingCamera,H=this[W0],G=H.getCamera(),W=new p;W.setFromMatrixPosition(q.matrixWorld),W.project(G);let F=H.width/2,z=H.height/2;W.x=W.x*F+F,W.y=-(W.y*z)+z;let U=z4(new p(W.x,W.y,W.z));if(!Number.isFinite(U.x)||!Number.isFinite(U.y))return null;return{position:K,normal:Y,canvasPosition:U,facingCamera:Z}}positionAndNormalFromPoint(I,q){let K=this[W0],Y=K.getNDC(I,q),Z=K.positionAndNormalFromPoint(Y);if(Z==null)return null;SG.copy(K.target.matrixWorld).invert();let H=z4(Z.position.applyMatrix4(SG)),G=z4(Z.normal.transformDirection(SG)),W=null;if(Z.uv!=null)W=pQ(Z.uv);return{position:H,normal:G,uv:W}}surfaceFromPoint(I,q){let K=this[W0],Y=K.getNDC(I,q);return K.surfaceFromPoint(Y)}[jG](I){if(!(I instanceof HTMLElement&&I.slot.indexOf("hotspot")===0))return;let q=this[L5].get(I.slot);if(q!=null)q.increment();else q=new tQ({name:I.slot,position:I.dataset.position,normal:I.dataset.normal,surface:I.dataset.surface}),this[L5].set(I.slot,q),this[W0].addHotspot(q);this[W0].queueRender()}[VL](I){if(!(I instanceof HTMLElement))return;let q=this[L5].get(I.slot);if(!q)return;if(q.decrement())this[W0].removeHotspot(q),this[L5].delete(I.slot);this[W0].queueRender()}}return J};/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var zL=function(A){return URL.createObjectURL(new Blob([A],{type:"text/javascript"}))},mv=function(A){return new Worker(A)};try{URL.revokeObjectURL(zL(""))}catch(A){zL=function(Q){return"data:application/javascript;charset=UTF-8,"+encodeURI(Q)},mv=function(Q){return new Worker(Q,{type:"module"})}}var IA=Uint8Array,JA=Uint16Array,z8=Uint32Array,vG=new IA([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),bG=new IA([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),DL=new IA([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),LL=function(A,Q){var B=new JA(31);for(var C=0;C<31;++C)B[C]=Q+=1<<A[C-1];var J=new z8(B[30]);for(var C=1;C<30;++C)for(var I=B[C];I<B[C+1];++I)J[I]=I-B[C]<<5|C;return[B,J]},ML=LL(vG,2),dv=ML[0],fG=ML[1];dv[28]=258,fG[258]=28;var OL=LL(bG,0),H80=OL[0],EL=OL[1],hG=new JA(32768);for(k1=0;k1<32768;++k1)S3=(k1&43690)>>>1|(k1&21845)<<1,S3=(S3&52428)>>>2|(S3&13107)<<2,S3=(S3&61680)>>>4|(S3&3855)<<4,hG[k1]=((S3&65280)>>>8|(S3&255)<<8)>>>1;var S3,k1,IB=function(A,Q,B){var C=A.length,J=0,I=new JA(Q);for(;J<C;++J)++I[A[J]-1];var q=new JA(Q);for(J=0;J<Q;++J)q[J]=q[J-1]+I[J-1]<<1;var K;if(B){K=new JA(1<<Q);var Y=15-Q;for(J=0;J<C;++J)if(A[J]){var Z=J<<4|A[J],H=Q-A[J],G=q[A[J]-1]++<<H;for(var W=G|(1<<H)-1;G<=W;++G)K[hG[G]>>>Y]=Z}}else{K=new JA(C);for(J=0;J<C;++J)if(A[J])K[J]=hG[q[A[J]-1]++]>>>15-A[J]}return K},M5=new IA(288);for(k1=0;k1<144;++k1)M5[k1]=8;var k1;for(k1=144;k1<256;++k1)M5[k1]=9;var k1;for(k1=256;k1<280;++k1)M5[k1]=7;var k1;for(k1=280;k1<288;++k1)M5[k1]=8;var k1,nI=new IA(32);for(k1=0;k1<32;++k1)nI[k1]=5;var k1,cv=IB(M5,9,0);var lv=IB(nI,5,0);var kL=function(A){return(A/8|0)+(A&7&&1)},PL=function(A,Q,B){if(Q==null||Q<0)Q=0;if(B==null||B>A.length)B=A.length;var C=new(A instanceof JA?JA:A instanceof z8?z8:IA)(B-Q);return C.set(A.subarray(Q,B)),C};var y3=function(A,Q,B){B<<=Q&7;var C=Q/8|0;A[C]|=B,A[C+1]|=B>>>8},CB=function(A,Q,B){B<<=Q&7;var C=Q/8|0;A[C]|=B,A[C+1]|=B>>>8,A[C+2]|=B>>>16},yG=function(A,Q){var B=[];for(var C=0;C<A.length;++C)if(A[C])B.push({s:C,f:A[C]});var J=B.length,I=B.slice();if(!J)return[uG,0];if(J==1){var q=new IA(B[0].s+1);return q[B[0].s]=1,[q,1]}B.sort(function(D,N){return D.f-N.f}),B.push({s:-1,f:25001});var K=B[0],Y=B[1],Z=0,H=1,G=2;B[0]={s:-1,f:K.f+Y.f,l:K,r:Y};while(H!=J-1)K=B[B[Z].f<B[G].f?Z++:G++],Y=B[Z!=H&&B[Z].f<B[G].f?Z++:G++],B[H++]={s:-1,f:K.f+Y.f,l:K,r:Y};var W=I[0].s;for(var C=1;C<J;++C)if(I[C].s>W)W=I[C].s;var F=new JA(W+1),z=xG(B[H-1],F,0);if(z>Q){var C=0,U=0,E=z-Q,w=1<<E;I.sort(function(N,R){return F[R.s]-F[N.s]||N.f-R.f});for(;C<J;++C){var L=I[C].s;if(F[L]>Q)U+=w-(1<<z-F[L]),F[L]=Q;else break}U>>>=E;while(U>0){var X=I[C].s;if(F[X]<Q)U-=1<<Q-F[X]++-1;else++C}for(;C>=0&&U;--C){var V=I[C].s;if(F[V]==Q)--F[V],++U}z=Q}return[new IA(F),z]},xG=function(A,Q,B){return A.s==-1?Math.max(xG(A.l,Q,B+1),xG(A.r,Q,B+1)):Q[A.s]=B},wL=function(A){var Q=A.length;while(Q&&!A[--Q]);var B=new JA(++Q),C=0,J=A[0],I=1,q=function(Y){B[C++]=Y};for(var K=1;K<=Q;++K)if(A[K]==J&&K!=Q)++I;else{if(!J&&I>2){for(;I>138;I-=138)q(32754);if(I>2)q(I>10?I-11<<5|28690:I-3<<5|12305),I=0}else if(I>3){q(J),--I;for(;I>6;I-=6)q(8304);if(I>2)q(I-3<<5|8208),I=0}while(I--)q(J);I=1,J=A[K]}return[B.subarray(0,C),Q]},JB=function(A,Q){var B=0;for(var C=0;C<Q.length;++C)B+=A[C]*Q[C];return B},iI=function(A,Q,B){var C=B.length,J=kL(Q+2);A[J]=C&255,A[J+1]=C>>>8,A[J+2]=A[J]^255,A[J+3]=A[J+1]^255;for(var I=0;I<C;++I)A[J+I+4]=B[I];return(J+4+C)*8},NL=function(A,Q,B,C,J,I,q,K,Y,Z,H){y3(Q,H++,B),++J[256];var G=yG(J,15),W=G[0],F=G[1],z=yG(I,15),U=z[0],E=z[1],w=wL(W),L=w[0],X=w[1],V=wL(U),D=V[0],N=V[1],R=new JA(19);for(var k=0;k<L.length;++k)R[L[k]&31]++;for(var k=0;k<D.length;++k)R[D[k]&31]++;var P=yG(R,7),$=P[0],_=P[1],h=19;for(;h>4&&!$[DL[h-1]];--h);var S=Z+5<<3,O=JB(J,M5)+JB(I,nI)+q,M=JB(J,W)+JB(I,U)+q+14+3*h+JB(R,$)+(2*R[16]+3*R[17]+7*R[18]);if(S<=O&&S<=M)return iI(Q,H,A.subarray(Y,Y+Z));var y,u,T,d;if(y3(Q,H,1+(M<O)),H+=2,M<O){y=IB(W,F,0),u=W,T=IB(U,E,0),d=U;var g=IB($,_,0);y3(Q,H,X-257),y3(Q,H+5,N-1),y3(Q,H+10,h-4),H+=14;for(var k=0;k<h;++k)y3(Q,H+3*k,$[DL[k]]);H+=3*h;var l=[L,D];for(var t=0;t<2;++t){var i=l[t];for(var k=0;k<i.length;++k){var n=i[k]&31;if(y3(Q,H,g[n]),H+=$[n],n>15)y3(Q,H,i[k]>>>5&127),H+=i[k]>>>12}}}else y=cv,u=M5,T=lv,d=nI;for(var k=0;k<K;++k)if(C[k]>255){var n=C[k]>>>18&31;if(CB(Q,H,y[n+257]),H+=u[n+257],n>7)y3(Q,H,C[k]>>>23&31),H+=vG[n];var J0=C[k]&31;if(CB(Q,H,T[J0]),H+=d[J0],J0>3)CB(Q,H,C[k]>>>5&8191),H+=bG[J0]}else CB(Q,H,y[C[k]]),H+=u[C[k]];return CB(Q,H,y[256]),H+u[256]},sv=new z8([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),uG=new IA(0),iv=function(A,Q,B,C,J,I){var q=A.length,K=new IA(C+q+5*(1+Math.ceil(q/7000))+J),Y=K.subarray(C,K.length-J),Z=0;if(!Q||q<8)for(var H=0;H<=q;H+=65535){var G=H+65535;if(G<q)Z=iI(Y,Z,A.subarray(H,G));else Y[H]=I,Z=iI(Y,Z,A.subarray(H,q))}else{var W=sv[Q-1],F=W>>>13,z=W&8191,U=(1<<B)-1,E=new JA(32768),w=new JA(U+1),L=Math.ceil(B/3),X=2*L,V=function(G0){return(A[G0]^A[G0+1]<<L^A[G0+2]<<X)&U},D=new z8(25000),N=new JA(288),R=new JA(32),k=0,P=0,H=0,$=0,_=0,h=0;for(;H<q;++H){var S=V(H),O=H&32767,M=w[S];if(E[O]=M,w[S]=O,_<=H){var y=q-H;if((k>7000||$>24576)&&y>423){Z=NL(A,Y,0,D,N,R,P,$,h,H-h,Z),$=k=P=0,h=H;for(var u=0;u<286;++u)N[u]=0;for(var u=0;u<30;++u)R[u]=0}var T=2,d=0,g=z,l=O-M&32767;if(y>2&&S==V(H-l)){var t=Math.min(F,y)-1,i=Math.min(32767,H),n=Math.min(258,y);while(l<=i&&--g&&O!=M){if(A[H+T]==A[H+T-l]){var J0=0;for(;J0<n&&A[H+J0]==A[H+J0-l];++J0);if(J0>T){if(T=J0,d=l,J0>t)break;var e=Math.min(l,J0-2),H0=0;for(var u=0;u<e;++u){var X0=H-l+u+32768&32767,L0=E[X0],T0=X0-L0+32768&32767;if(T0>H0)H0=T0,M=X0}}}O=M,M=E[O],l+=O-M+32768&32767}}if(d){D[$++]=268435456|fG[T]<<18|EL[d];var s=fG[T]&31,P1=EL[d]&31;P+=vG[s]+bG[P1],++N[257+s],++R[P1],_=H+T,++k}else D[$++]=A[H],++N[A[H]]}}if(Z=NL(A,Y,I,D,N,R,P,$,h,H-h,Z),!I&&Z&7)Z=iI(Y,Z+1,uG)}return PL(K,0,C+kL(Z)+J)},nv=function(){var A=new z8(256);for(var Q=0;Q<256;++Q){var B=Q,C=9;while(--C)B=(B&1&&3988292384)^B>>>1;A[Q]=B}return A}(),ov=function(){var A=-1;return{p:function(Q){var B=A;for(var C=0;C<Q.length;++C)B=nv[B&255^Q[C]]^B>>>8;A=B},d:function(){return~A}}};var av=function(A,Q,B,C,J){return iv(A,Q.level==null?6:Q.level,Q.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(A.length)))*1.5):12+Q.mem,B,C,!J)},_L=function(A,Q){var B={};for(var C in A)B[C]=A[C];for(var C in Q)B[C]=Q[C];return B};var f2=function(A,Q,B){for(;B;++Q)A[Q]=B,B>>>=8};function rv(A,Q){return av(A,Q||{},0,0)}var TL=function(A,Q,B,C){for(var J in A){var I=A[J],q=Q+J;if(I instanceof IA)B[q]=[I,C];else if(Array.isArray(I))B[q]=[I[0],_L(C,I[1])];else TL(I,q+"/",B,C)}},$L=typeof TextEncoder!="undefined"&&new TextEncoder,tv=typeof TextDecoder!="undefined"&&new TextDecoder,ev=0;try{tv.decode(uG,{stream:!0}),ev=1}catch(A){}function qB(A,Q){if(Q){var B=new IA(A.length);for(var C=0;C<A.length;++C)B[C]=A.charCodeAt(C);return B}if($L)return $L.encode(A);var J=A.length,I=new IA(A.length+(A.length>>1)),q=0,K=function(H){I[q++]=H};for(var C=0;C<J;++C){if(q+5>I.length){var Y=new IA(q+8+(J-C<<1));Y.set(I),I=Y}var Z=A.charCodeAt(C);if(Z<128||Q)K(Z);else if(Z<2048)K(192|Z>>6),K(128|Z&63);else if(Z>55295&&Z<57344)Z=65536+(Z&1047552)|A.charCodeAt(++C)&1023,K(240|Z>>18),K(128|Z>>12&63),K(128|Z>>6&63),K(128|Z&63);else K(224|Z>>12),K(128|Z>>6&63),K(128|Z&63)}return PL(I,0,q)}var gG=function(A){var Q=0;if(A)for(var B in A){var C=A[B].length;if(C>65535)throw"extra field too long";Q+=C+4}return Q},RL=function(A,Q,B,C,J,I,q,K){var Y=C.length,Z=B.extra,H=K&&K.length,G=gG(Z);if(f2(A,Q,q!=null?33639248:67324752),Q+=4,q!=null)A[Q++]=20,A[Q++]=B.os;A[Q]=20,Q+=2,A[Q++]=B.flag<<1|(I==null&&8),A[Q++]=J&&8,A[Q++]=B.compression&255,A[Q++]=B.compression>>8;var W=new Date(B.mtime==null?Date.now():B.mtime),F=W.getFullYear()-1980;if(F<0||F>119)throw"date not in range 1980-2099";if(f2(A,Q,F<<25|W.getMonth()+1<<21|W.getDate()<<16|W.getHours()<<11|W.getMinutes()<<5|W.getSeconds()>>>1),Q+=4,I!=null)f2(A,Q,B.crc),f2(A,Q+4,I),f2(A,Q+8,B.size);if(f2(A,Q+12,Y),f2(A,Q+14,G),Q+=16,q!=null)f2(A,Q,H),f2(A,Q+6,B.attrs),f2(A,Q+10,q),Q+=14;if(A.set(C,Q),Q+=Y,G)for(var z in Z){var U=Z[z],E=U.length;f2(A,Q,+z),f2(A,Q+2,E),A.set(U,Q+4),Q+=4+E}if(H)A.set(K,Q),Q+=H;return Q},Ab=function(A,Q,B,C,J){f2(A,Q,101010256),f2(A,Q+8,B),f2(A,Q+10,B),f2(A,Q+12,C),f2(A,Q+16,J)};function jL(A,Q){if(!Q)Q={};var B={},C=[];TL(A,"",B,Q);var J=0,I=0;for(var q in B){var K=B[q],Y=K[0],Z=K[1],H=Z.level==0?0:8,G=qB(q),W=G.length,F=Z.comment,z=F&&qB(F),U=z&&z.length,E=gG(Z.extra);if(W>65535)throw"filename too long";var w=H?rv(Y,Z):Y,L=w.length,X=ov();X.p(Y),C.push(_L(Z,{size:Y.length,crc:X.d(),c:w,f:G,m:z,u:W!=q.length||z&&F.length!=U,o:J,compression:H})),J+=30+W+E+L,I+=76+2*(W+E)+(U||0)+L}var V=new IA(I+22),D=J,N=I-J;for(var R=0;R<C.length;++R){var G=C[R];RL(V,G.o,G,G.f,G.u,G.c.length);var k=30+G.f.length+gG(G.extra);V.set(G.c,G.o+k),RL(V,J,G,G.f,G.u,G.c.length,G.o,G.m),J+=16+k+(G.m?G.m.length:0)}return Ab(V,J,C.length,N,D),V}class pG{async parse(A,Q={}){Q=Object.assign({ar:{anchoring:{type:"plane"},planeAnchoring:{alignment:"horizontal"}},quickLookCompatible:!1,maxTextureSize:1024},Q);let B={},C="model.usda";B[C]=null;let J=hL();J+=Bb(Q);let I={},q={};A.traverseVisible((Y)=>{if(Y.isMesh){let{geometry:Z,material:H}=Y;if(H.isMeshStandardMaterial){let G="geometries/Geometry_"+Z.id+".usda";if(!(G in B)){let W=qb(Z);B[G]=Jb(W)}if(!(H.uuid in I))I[H.uuid]=H;J+=Ib(Y,Z,H)}else console.warn("THREE.USDZExporter: Unsupported material type (USDZ only supports MeshStandardMaterial)",Y)}else if(Y.isCamera)J+=Vb(Y)}),J+=Cb(),J+=Gb(I,q,Q.quickLookCompatible),B[C]=qB(J),J=null;for(let Y in q){let Z=q[Y];if(Z.isCompressedTexture===!0)Z=e7(Z);let H=Qb(Z.image,Z.flipY,Q.maxTextureSize),G=await new Promise((W)=>H.toBlob(W,"image/png",1));B[`textures/Texture_${Y}.png`]=new Uint8Array(await G.arrayBuffer())}let K=0;for(let Y in B){let Z=B[Y],H=34+Y.length;K+=H;let G=K&63;if(G!==4){let W=64-G,F=new Uint8Array(W);B[Y]=[Z,{extra:{12345:F}}]}K=Z.length}return jL(B,{level:0})}}function Qb(A,Q,B){if(typeof HTMLImageElement!=="undefined"&&A instanceof HTMLImageElement||typeof HTMLCanvasElement!=="undefined"&&A instanceof HTMLCanvasElement||typeof OffscreenCanvas!=="undefined"&&A instanceof OffscreenCanvas||typeof ImageBitmap!=="undefined"&&A instanceof ImageBitmap){let C=B/Math.max(A.width,A.height),J=document.createElement("canvas");J.width=A.width*Math.min(1,C),J.height=A.height*Math.min(1,C);let I=J.getContext("2d");if(Q===!0)I.translate(0,J.height),I.scale(1,-1);return I.drawImage(A,0,0,J.width,J.height),J}else throw new Error("THREE.USDZExporter: No valid image data found. Unable to process texture.")}var s2=7;function hL(){return`#usda 1.0
(
	customLayerData = {
		string creator = "Three.js USDZExporter"
	}
	defaultPrim = "Root"
	metersPerUnit = 1
	upAxis = "Y"
)

`}function Bb(A){return`def Xform "Root"
{
	def Scope "Scenes" (
		kind = "sceneLibrary"
	)
	{
		def Xform "Scene" (
			customData = {
				bool preliminary_collidesWithEnvironment = 0
				string sceneName = "Scene"
			}
			sceneName = "Scene"
		)
		{
		token preliminary:anchoring:type = "${A.ar.anchoring.type}"
		token preliminary:planeAnchoring:alignment = "${A.ar.planeAnchoring.alignment}"

`}function Cb(){return`
		}
	}
}

`}function Jb(A){let Q=hL();return Q+=A,qB(Q)}function Ib(A,Q,B){let C="Object_"+A.id,J=xL(A.matrixWorld);if(A.matrixWorld.determinant()<0)console.warn("THREE.USDZExporter: USDZ does not support negative scales",A);return`def Xform "${C}" (
	prepend references = @./geometries/Geometry_${Q.id}.usda@</Geometry>
	prepend apiSchemas = ["MaterialBindingAPI"]
)
{
	matrix4d xformOp:transform = ${J}
	uniform token[] xformOpOrder = ["xformOp:transform"]

	rel material:binding = </Materials/Material_${B.id}>
}

`}function xL(A){let Q=A.elements;return`( ${oI(Q,0)}, ${oI(Q,4)}, ${oI(Q,8)}, ${oI(Q,12)} )`}function oI(A,Q){return`(${A[Q+0]}, ${A[Q+1]}, ${A[Q+2]}, ${A[Q+3]})`}function qb(A){return`
def "Geometry"
{
${Kb(A)}
}
`}function Kb(A){let B=A.attributes,C=B.position.count;return`
	def Mesh "Geometry"
	{
		int[] faceVertexCounts = [${Yb(A)}]
		int[] faceVertexIndices = [${Zb(A)}]
		normal3f[] normals = [${SL(B.normal,C)}] (
			interpolation = "vertex"
		)
		point3f[] points = [${SL(B.position,C)}]
${Xb(B)}
		uniform token subdivisionScheme = "none"
	}
`}function Yb(A){let Q=A.index!==null?A.index.count:A.attributes.position.count;return Array(Q/3).fill(3).join(", ")}function Zb(A){let Q=A.index,B=[];if(Q!==null)for(let C=0;C<Q.count;C++)B.push(Q.getX(C));else{let C=A.attributes.position.count;for(let J=0;J<C;J++)B.push(J)}return B.join(", ")}function SL(A,Q){if(A===void 0)return console.warn("USDZExporter: Normals missing."),Array(Q).fill("(0, 0, 0)").join(", ");let B=[];for(let C=0;C<A.count;C++){let J=A.getX(C),I=A.getY(C),q=A.getZ(C);B.push(`(${J.toPrecision(s2)}, ${I.toPrecision(s2)}, ${q.toPrecision(s2)})`)}return B.join(", ")}function Hb(A){let Q=[];for(let B=0;B<A.count;B++){let C=A.getX(B),J=A.getY(B);Q.push(`(${C.toPrecision(s2)}, ${1-J.toPrecision(s2)})`)}return Q.join(", ")}function Xb(A){let Q="";for(let B=0;B<4;B++){let C=B>0?B:"",J=A["uv"+C];if(J!==void 0)Q+=`
		texCoord2f[] primvars:st${C} = [${Hb(J)}] (
			interpolation = "vertex"
		)`}return Q}function Gb(A,Q,B=!1){let C=[];for(let J in A){let I=A[J];C.push(Wb(I,Q,B))}return`def "Materials"
{
${C.join("")}
}

`}function Wb(A,Q,B=!1){let J=[],I=[];function q(K,Y,Z){let H=K.source.id+"_"+K.flipY;Q[H]=K;let G=K.channel>0?"st"+K.channel:"st",W={1000:"repeat",1001:"clamp",1002:"mirror"},F=K.repeat.clone(),z=K.offset.clone(),U=K.rotation,E=Math.sin(U),w=Math.cos(U);if(z.y=1-z.y-F.y,B)z.x=z.x/F.x,z.y=z.y/F.y,z.x+=E/F.x,z.y+=w-1;else z.x+=E*F.x,z.y+=(1-w)*F.y;return`
		def Shader "PrimvarReader_${Y}"
		{
			uniform token info:id = "UsdPrimvarReader_float2"
			float2 inputs:fallback = (0.0, 0.0)
			token inputs:varname = "${G}"
			float2 outputs:result
		}

		def Shader "Transform2d_${Y}"
		{
			uniform token info:id = "UsdTransform2d"
			token inputs:in.connect = </Materials/Material_${A.id}/PrimvarReader_${Y}.outputs:result>
			float inputs:rotation = ${(U*(180/Math.PI)).toFixed(s2)}
			float2 inputs:scale = ${fL(F)}
			float2 inputs:translation = ${fL(z)}
			float2 outputs:result
		}

		def Shader "Texture_${K.id}_${Y}"
		{
			uniform token info:id = "UsdUVTexture"
			asset inputs:file = @textures/Texture_${H}.png@
			float2 inputs:st.connect = </Materials/Material_${A.id}/Transform2d_${Y}.outputs:result>
			${Z!==void 0?"float4 inputs:scale = "+Fb(Z):""}
			token inputs:sourceColorSpace = "${K.colorSpace===I5?"raw":"sRGB"}"
			token inputs:wrapS = "${W[K.wrapS]}"
			token inputs:wrapT = "${W[K.wrapT]}"
			float outputs:r
			float outputs:g
			float outputs:b
			float3 outputs:rgb
			${A.transparent||A.alphaTest>0?"float outputs:a":""}
		}`}if(A.side===bA)console.warn("THREE.USDZExporter: USDZ does not support double sided materials",A);if(A.map!==null){if(J.push(`			color3f inputs:diffuseColor.connect = </Materials/Material_${A.id}/Texture_${A.map.id}_diffuse.outputs:rgb>`),A.transparent)J.push(`			float inputs:opacity.connect = </Materials/Material_${A.id}/Texture_${A.map.id}_diffuse.outputs:a>`);else if(A.alphaTest>0)J.push(`			float inputs:opacity.connect = </Materials/Material_${A.id}/Texture_${A.map.id}_diffuse.outputs:a>`),J.push(`			float inputs:opacityThreshold = ${A.alphaTest}`);I.push(q(A.map,"diffuse",A.color))}else J.push(`			color3f inputs:diffuseColor = ${yL(A.color)}`);if(A.emissiveMap!==null)J.push(`			color3f inputs:emissiveColor.connect = </Materials/Material_${A.id}/Texture_${A.emissiveMap.id}_emissive.outputs:rgb>`),I.push(q(A.emissiveMap,"emissive"));else if(A.emissive.getHex()>0)J.push(`			color3f inputs:emissiveColor = ${yL(A.emissive)}`);if(A.normalMap!==null)J.push(`			normal3f inputs:normal.connect = </Materials/Material_${A.id}/Texture_${A.normalMap.id}_normal.outputs:rgb>`),I.push(q(A.normalMap,"normal"));if(A.aoMap!==null)J.push(`			float inputs:occlusion.connect = </Materials/Material_${A.id}/Texture_${A.aoMap.id}_occlusion.outputs:r>`),I.push(q(A.aoMap,"occlusion"));if(A.roughnessMap!==null&&A.roughness===1)J.push(`			float inputs:roughness.connect = </Materials/Material_${A.id}/Texture_${A.roughnessMap.id}_roughness.outputs:g>`),I.push(q(A.roughnessMap,"roughness"));else J.push(`			float inputs:roughness = ${A.roughness}`);if(A.metalnessMap!==null&&A.metalness===1)J.push(`			float inputs:metallic.connect = </Materials/Material_${A.id}/Texture_${A.metalnessMap.id}_metallic.outputs:b>`),I.push(q(A.metalnessMap,"metallic"));else J.push(`			float inputs:metallic = ${A.metalness}`);if(A.alphaMap!==null)J.push(`			float inputs:opacity.connect = </Materials/Material_${A.id}/Texture_${A.alphaMap.id}_opacity.outputs:r>`),J.push("			float inputs:opacityThreshold = 0.0001"),I.push(q(A.alphaMap,"opacity"));else J.push(`			float inputs:opacity = ${A.opacity}`);if(A.isMeshPhysicalMaterial)J.push(`			float inputs:clearcoat = ${A.clearcoat}`),J.push(`			float inputs:clearcoatRoughness = ${A.clearcoatRoughness}`),J.push(`			float inputs:ior = ${A.ior}`);return`
	def Material "Material_${A.id}"
	{
		def Shader "PreviewSurface"
		{
			uniform token info:id = "UsdPreviewSurface"
${J.join("\n")}
			int inputs:useSpecularWorkflow = 0
			token outputs:surface
		}

		token outputs:surface.connect = </Materials/Material_${A.id}/PreviewSurface.outputs:surface>

${I.join("\n")}

	}
`}function yL(A){return`(${A.r}, ${A.g}, ${A.b})`}function Fb(A){return`(${A.r}, ${A.g}, ${A.b}, 1.0)`}function fL(A){return`(${A.x}, ${A.y})`}function Vb(A){let Q=A.name?A.name:"Camera_"+A.id,B=xL(A.matrixWorld);if(A.matrixWorld.determinant()<0)console.warn("THREE.USDZExporter: USDZ does not support negative scales",A);if(A.isOrthographicCamera)return`def Camera "${Q}"
		{
			matrix4d xformOp:transform = ${B}
			uniform token[] xformOpOrder = ["xformOp:transform"]

			float2 clippingRange = (${A.near.toPrecision(s2)}, ${A.far.toPrecision(s2)})
			float horizontalAperture = ${((Math.abs(A.left)+Math.abs(A.right))*10).toPrecision(s2)}
			float verticalAperture = ${((Math.abs(A.top)+Math.abs(A.bottom))*10).toPrecision(s2)}
			token projection = "orthographic"
		}
	
	`;else return`def Camera "${Q}"
		{
			matrix4d xformOp:transform = ${B}
			uniform token[] xformOpOrder = ["xformOp:transform"]

			float2 clippingRange = (${A.near.toPrecision(s2)}, ${A.far.toPrecision(s2)})
			float focalLength = ${A.getFocalLength().toPrecision(s2)}
			float focusDistance = ${A.focus.toPrecision(s2)}
			float horizontalAperture = ${A.getFilmWidth().toPrecision(s2)}
			token projection = "perspective"
			float verticalAperture = ${A.getFilmHeight().toPrecision(s2)}
		}
	
	`}var gL=(A)=>(Q)=>{try{let B=zA(Q),C=(B.length?B[0].terms:[]).filter((J)=>J&&J.type==="ident").map((J)=>J.value).filter((J)=>A.indexOf(J)>-1);return new Set(C)}catch(B){}return new Set};var D8=function(A,Q,B,C){var J=arguments.length,I=J<3?Q:C===null?C=Object.getOwnPropertyDescriptor(Q,B):C,q;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")I=Reflect.decorate(A,Q,B,C);else for(var K=A.length-1;K>=0;K--)if(q=A[K])I=(J<3?q(I):J>3?q(Q,B,I):q(Q,B))||I;return J>3&&I&&Object.defineProperty(Q,B,I),I},vL=!1,bL=!1,uL="#model-viewer-no-ar-fallback",Ub=gL(["quick-look","scene-viewer","webxr","none"]),zb="webxr scene-viewer quick-look",dA={QUICK_LOOK:"quick-look",SCENE_VIEWER:"scene-viewer",WEBXR:"webxr",NONE:"none"},f3=Symbol("arButtonContainer"),pL=Symbol("enterARWithWebXR"),mL=Symbol("openSceneViewer"),dL=Symbol("openIOSARQuickLook"),Db=Symbol("canActivateAR"),aI=Symbol("arMode"),mG=Symbol("arModes"),E8=Symbol("arAnchor"),rI=Symbol("preload"),tI=Symbol("onARButtonContainerClick"),dG=Symbol("onARStatus"),cG=Symbol("onARTracking"),lG=Symbol("onARTap"),KB=Symbol("selectARMode"),sG=Symbol("triggerLoad"),cL=(A)=>{var Q,B,C,J,I,q,K,Y,Z,H;class G extends A{constructor(){super(...arguments);this.ar=!1,this.arScale="auto",this.arPlacement="floor",this.arModes=zb,this.iosSrc=null,this.xrEnvironment=!1,this[Q]=!1,this[B]=this.shadowRoot.querySelector(".ar-button"),this[C]=document.createElement("a"),this[J]=new Set,this[I]=dA.NONE,this[q]=!1,this[K]=(W)=>{W.preventDefault(),this.activateAR()},this[Y]=({status:W})=>{if(W===M3.NOT_PRESENTING||this[G1].arRenderer.presentedScene===this[W0]){if(this.setAttribute("ar-status",W),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:W}})),W===M3.NOT_PRESENTING)this.removeAttribute("ar-tracking");else if(W===M3.SESSION_STARTED)this.setAttribute("ar-tracking",TI.TRACKING)}},this[Z]=({status:W})=>{this.setAttribute("ar-tracking",W),this.dispatchEvent(new CustomEvent("ar-tracking",{detail:{status:W}}))},this[H]=(W)=>{if(W.data=="_apple_ar_quicklook_button_tapped")this.dispatchEvent(new CustomEvent("quick-look-button-tapped"))}}get canActivateAR(){return this[aI]!==dA.NONE}connectedCallback(){super.connectedCallback(),this[G1].arRenderer.addEventListener("status",this[dG]),this.setAttribute("ar-status",M3.NOT_PRESENTING),this[G1].arRenderer.addEventListener("tracking",this[cG]),this[E8].addEventListener("message",this[lG])}disconnectedCallback(){super.disconnectedCallback(),this[G1].arRenderer.removeEventListener("status",this[dG]),this[G1].arRenderer.removeEventListener("tracking",this[cG]),this[E8].removeEventListener("message",this[lG])}update(W){if(super.update(W),W.has("arScale"))this[W0].canScale=this.arScale!=="fixed";if(W.has("arPlacement"))this[W0].updateShadow(),this[e1]();if(W.has("arModes"))this[mG]=Ub(this.arModes);if(W.has("ar")||W.has("arModes")||W.has("src")||W.has("iosSrc"))this[KB]()}async activateAR(){switch(this[aI]){case dA.QUICK_LOOK:await this[dL]();break;case dA.WEBXR:await this[pL]();break;case dA.SCENE_VIEWER:this[mL]();break;default:console.warn("No AR Mode can be activated. This is probably due to missing configuration or device capabilities");break}}async[(Q=Db,B=f3,C=E8,J=mG,I=aI,q=rI,K=tI,Y=dG,Z=cG,H=lG,KB)](){let W=dA.NONE;if(this.ar){if(this.src!=null)for(let F of this[mG]){if(F==="webxr"&&KI&&!vL&&await this[G1].arRenderer.supportsPresentation()){W=dA.WEBXR;break}if(F==="scene-viewer"&&$w&&!bL){W=dA.SCENE_VIEWER;break}if(F==="quick-look"&&PH){W=dA.QUICK_LOOK;break}}if(W===dA.NONE&&this.iosSrc!=null&&PH)W=dA.QUICK_LOOK}if(W!==dA.NONE)this[f3].classList.add("enabled"),this[f3].addEventListener("click",this[tI]);else if(this[f3].classList.contains("enabled")){this[f3].removeEventListener("click",this[tI]),this[f3].classList.remove("enabled");let F=M3.FAILED;this.setAttribute("ar-status",F),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:F}}))}this[aI]=W}async[pL](){console.log("Attempting to present in AR with WebXR..."),await this[sG]();try{this[f3].removeEventListener("click",this[tI]);let{arRenderer:W}=this[G1];W.placeOnWall=this.arPlacement==="wall",await W.present(this[W0],this.xrEnvironment)}catch(W){console.warn("Error while trying to present in AR with WebXR"),console.error(W),await this[G1].arRenderer.stopPresenting(),vL=!0,console.warn("Falling back to next ar-mode"),await this[KB](),this.activateAR()}finally{this[KB]()}}async[sG](){if(!this.loaded)this[rI]=!0,this[U6](),await Mw(this,"load"),this[rI]=!1}[w3](){return super[w3]()||this[rI]}[mL](){let W=self.location.toString(),F=new URL(W),z=new URL(this.src,W);if(z.hash)z.hash="";let U=new URLSearchParams(z.search);if(F.hash=uL,U.set("mode","ar_preferred"),!U.has("disable_occlusion"))U.set("disable_occlusion","true");if(this.arScale==="fixed")U.set("resizable","false");if(this.arPlacement==="wall")U.set("enable_vertical_placement","true");if(U.has("sound")){let L=new URL(U.get("sound"),W);U.set("sound",L.toString())}if(U.has("link")){let L=new URL(U.get("link"),W);U.set("link",L.toString())}let E=`intent://arvr.google.com/scene-viewer/1.0?${U.toString()+"&file="+encodeURIComponent(z.toString())}#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(F.toString())};end;`,w=()=>{if(self.location.hash===uL)bL=!0,self.history.back(),console.warn("Error while trying to present in AR with Scene Viewer"),console.warn("Falling back to next ar-mode"),this[KB]()};self.addEventListener("hashchange",w,{once:!0}),this[E8].setAttribute("href",E),console.log("Attempting to present in AR with Scene Viewer..."),this[E8].click()}async[dL](){let W=!this.iosSrc;this[f3].classList.remove("enabled");let F=W?await this.prepareUSDZ():this.iosSrc,z=new URL(F,self.location.toString());if(W){let w=self.location.toString(),L=new URL(w),X=new URL(this.src,L);if(X.hash)z.hash=X.hash}if(this.arScale==="fixed"){if(z.hash)z.hash+="&";z.hash+="allowsContentScaling=0"}let U=this[E8];U.setAttribute("rel","ar");let E=document.createElement("img");if(U.appendChild(E),U.setAttribute("href",z.toString()),W)U.setAttribute("download","model.usdz");if(U.style.display="none",!U.isConnected)this.shadowRoot.appendChild(U);if(console.log("Attempting to present in AR with Quick Look..."),U.click(),U.removeChild(E),W)URL.revokeObjectURL(F);this[f3].classList.add("enabled")}async prepareUSDZ(){let W=this[G4].beginActivity("usdz-conversion");await this[sG]();let{model:F,shadow:z}=this[W0];if(F==null)return"";let U=!1;if(z!=null)U=z.visible,z.visible=!1;W(0.2);let w=await new pG().parse(F),L=new Blob([w],{type:"model/vnd.usdz+zip"}),X=URL.createObjectURL(L);if(W(1),z!=null)z.visible=U;return X}}return D8([f0({type:Boolean,attribute:"ar"})],G.prototype,"ar",void 0),D8([f0({type:String,attribute:"ar-scale"})],G.prototype,"arScale",void 0),D8([f0({type:String,attribute:"ar-placement"})],G.prototype,"arPlacement",void 0),D8([f0({type:String,attribute:"ar-modes"})],G.prototype,"arModes",void 0),D8([f0({type:String,attribute:"ios-src"})],G.prototype,"iosSrc",void 0),D8([f0({type:Boolean,attribute:"xr-environment"})],G.prototype,"xrEnvironment",void 0),G};var iG=function(A,Q,B,C){var J=arguments.length,I=J<3?Q:C===null?C=Object.getOwnPropertyDescriptor(Q,B):C,q;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")I=Reflect.decorate(A,Q,B,C);else for(var K=A.length-1;K>=0;K--)if(q=A[K])I=(J<3?q(I):J>3?q(Q,B,I):q(Q,B))||I;return J>3&&I&&Object.defineProperty(Q,B,I),I},Eb=100,wb="https://www.gstatic.com/draco/versioned/decoders/1.5.6/",Nb="https://www.gstatic.com/basis-universal/versioned/2021-04-15-ba1c3e4/",$b="https://cdn.jsdelivr.net/npm/three@0.149.0/examples/jsm/loaders/LottieLoader.js",nG={AUTO:"auto",MANUAL:"manual"},lL={AUTO:"auto",LAZY:"lazy",EAGER:"eager"},w8=Symbol("defaultProgressBarElement"),oG=Symbol("posterContainerElement"),N8=Symbol("defaultPosterElement"),YB=Symbol("shouldDismissPoster"),aG=Symbol("hidePoster"),eI=Symbol("modelIsRevealed"),rG=Symbol("updateProgressBar"),Rb=Symbol("ariaLabelCallToAction"),tG=Symbol("onProgress"),sL=(A)=>{var Q,B,C,J,I,q,K,Y;class Z extends A{constructor(...H){super(...H);this.poster=null,this.reveal=nG.AUTO,this.loading=lL.AUTO,this[Q]=!1,this[B]=!1,this[C]=this.shadowRoot.querySelector(".slot.poster"),this[J]=this.shadowRoot.querySelector("#default-poster"),this[I]=this.shadowRoot.querySelector("#default-progress-bar > .bar"),this[q]=this[N8].getAttribute("aria-label"),this[K]=Rw((U)=>{let E=this[w8].parentNode;requestAnimationFrame(()=>{if(this[w8].style.transform=`scaleX(${U})`,U===0)E.removeChild(this[w8]),E.appendChild(this[w8]);this[w8].classList.toggle("hide",U===1)})},Eb),this[Y]=(U)=>{let E=U.detail.totalProgress;if(E===1){if(this[rG].flush(),this.loaded&&(this[YB]||this.reveal===nG.AUTO))this[aG]()}this[rG](E),this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:E}}))};let G=self.ModelViewerElement||{},W=G.dracoDecoderLocation||wb;Q2.setDRACODecoderLocation(W);let F=G.ktx2TranscoderLocation||Nb;if(Q2.setKTX2TranscoderLocation(F),G.meshoptDecoderLocation)Q2.setMeshoptDecoderLocation(G.meshoptDecoderLocation);let z=G.lottieLoaderLocation||$b;CA.singleton.textureUtils.lottieLoaderUrl=z}static set dracoDecoderLocation(H){Q2.setDRACODecoderLocation(H)}static get dracoDecoderLocation(){return Q2.getDRACODecoderLocation()}static set ktx2TranscoderLocation(H){Q2.setKTX2TranscoderLocation(H)}static get ktx2TranscoderLocation(){return Q2.getKTX2TranscoderLocation()}static set meshoptDecoderLocation(H){Q2.setMeshoptDecoderLocation(H)}static get meshoptDecoderLocation(){return Q2.getMeshoptDecoderLocation()}static set lottieLoaderLocation(H){CA.singleton.textureUtils.lottieLoaderUrl=H}static get lottieLoaderLocation(){return CA.singleton.textureUtils.lottieLoaderUrl}static mapURLs(H){CA.singleton.loader[G6].manager.setURLModifier(H)}dismissPoster(){if(this.loaded)this[aG]();else this[YB]=!0,this[U6]()}showPoster(){let H=this[oG];if(H.classList.contains("show"))return;H.classList.add("show"),this[mA].classList.remove("show");let G=this[N8];G.removeAttribute("tabindex"),G.removeAttribute("aria-hidden");let W=this.modelIsVisible;this[eI]=!1,this[QB](W)}getDimensions(){return z4(this[W0].size)}getBoundingBoxCenter(){return z4(this[W0].boundingBox.getCenter(new p))}connectedCallback(){if(super.connectedCallback(),!this.loaded)this.showPoster();this[G4].addEventListener("progress",this[tG])}disconnectedCallback(){super.disconnectedCallback(),this[G4].removeEventListener("progress",this[tG])}async updated(H){if(super.updated(H),H.has("poster")&&this.poster!=null)this[N8].style.backgroundImage=`url(${this.poster})`;if(H.has("alt"))this[N8].setAttribute("aria-label",this[cI]);if(H.has("reveal")||H.has("loading"))this[U6]()}[(Q=eI,B=YB,C=oG,J=N8,I=w8,q=Rb,K=rG,Y=tG,w3)](){return!!this.src&&(this[YB]||this.loading===lL.EAGER||this.reveal===nG.AUTO&&this[V6])}[aG](){this[YB]=!1;let H=this[oG];if(!H.classList.contains("show"))return;H.classList.remove("show"),this[mA].classList.add("show");let G=this.modelIsVisible;this[eI]=!0,this[QB](G);let W=this.getRootNode();if(W&&W.activeElement===this)this[mA].focus();let F=this[N8];F.setAttribute("aria-hidden","true"),F.tabIndex=-1,this.dispatchEvent(new CustomEvent("poster-dismissed"))}[U4](){return super[U4]()&&this[eI]}}return iG([f0({type:String})],Z.prototype,"poster",void 0),iG([f0({type:String})],Z.prototype,"reveal",void 0),iG([f0({type:String})],Z.prototype,"loading",void 0),Z};var eG=function(A,Q,B,C){var J=arguments.length,I=J<3?Q:C===null?C=Object.getOwnPropertyDescriptor(Q,B):C,q;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")I=Reflect.decorate(A,Q,B,C);else for(var K=A.length-1;K>=0;K--)if(q=A[K])I=(J<3?q(I):J>3?q(Q,B,I):q(Q,B))||I;return J>3&&I&&Object.defineProperty(Q,B,I),I},Lb=Math.PI/32,Mb=3000,Ob={basis:[Q8(F2(Lb,"rad"))],keywords:{auto:[null]}},$8=Symbol("autoRotateStartTime"),AW=Symbol("radiansPerSecond"),iL=Symbol("syncRotationRate"),QW=Symbol("onCameraChange"),nL=(A)=>{var Q,B,C;class J extends A{constructor(){super(...arguments);this.autoRotate=!1,this.autoRotateDelay=Mb,this.rotationPerSecond="auto",this[Q]=performance.now(),this[B]=0,this[C]=(I)=>{if(!this.autoRotate)return;if(I.detail.source==="user-interaction")this[$8]=performance.now()}}connectedCallback(){super.connectedCallback(),this.addEventListener("camera-change",this[QW]),this[$8]=performance.now()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("camera-change",this[QW]),this[$8]=performance.now()}updated(I){if(super.updated(I),I.has("autoRotate"))this[$8]=performance.now()}[(Q=$8,B=AW,iL)](I){this[AW]=I[0]}[BA](I,q){if(super[BA](I,q),!this.autoRotate||!this[U4]()||this[G1].isPresenting)return;let K=Math.min(q,I-this[$8]-this.autoRotateDelay);if(K>0)this[W0].yaw=this.turntableRotation+this[AW]*K*0.001}get turntableRotation(){return this[W0].yaw}resetTurntableRotation(I=0){this[W0].yaw=I}}return C=QW,eG([f0({type:Boolean,attribute:"auto-rotate"})],J.prototype,"autoRotate",void 0),eG([f0({type:Number,attribute:"auto-rotate-delay"})],J.prototype,"autoRotateDelay",void 0),eG([c4({intrinsics:Ob,updateHandler:iL}),f0({type:String,attribute:"rotation-per-second"})],J.prototype,"rotationPerSecond",void 0),J};var kb=UL(mR(nL(Ow(b$(cL(sL(FL(z6))))))));customElements.define("model-viewer",kb);class ZB extends M1{closeButton=v`<svg
    xmlns="http://www.w3.org/2000/svg"
    height="24"
    viewBox="0 -960 960 960"
    width="24"
  >
    <path
      d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"
    ></path>
  </svg>`;static styles=U0`
    :host,
    .wrapper,
    model-viewer {
      --progress-bar-color: var(--primary-colour);
      width: 100%;
      height: 100%;
      display: block;
      position: relative;
      overflow: hidden;
      background-color: var(--model-viewer-background-colour);
      min-width: var(--model-viewer-min-width);
      min-height: var(--model-viewer-min-height);
    }

    /* Loader and center styling using Flexbox */
    .loader {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center; /* Center horizontally */
      align-items: center; /* Center vertically */
      z-index: 999; /* Ensure it is above other elements */
    }

    /* Spinner Loader */
    .spinner {
      width: 50px;
      aspect-ratio: 1;
      border-radius: 50%;
      border: 8px solid var(--primary-colour);
      animation:
        l20-1 0.8s infinite linear alternate,
        l20-2 1.6s infinite linear;
    }

    @keyframes l20-1 {
      0% {
        clip-path: polygon(
          50% 50%,
          0 0,
          50% 0%,
          50% 0%,
          50% 0%,
          50% 0%,
          50% 0%
        );
      }
      12.5% {
        clip-path: polygon(
          50% 50%,
          0 0,
          50% 0%,
          100% 0%,
          100% 0%,
          100% 0%,
          100% 0%
        );
      }
      25% {
        clip-path: polygon(
          50% 50%,
          0 0,
          50% 0%,
          100% 0%,
          100% 100%,
          100% 100%,
          100% 100%
        );
      }
      50% {
        clip-path: polygon(
          50% 50%,
          0 0,
          50% 0%,
          100% 0%,
          100% 100%,
          50% 100%,
          0% 100%
        );
      }
      62.5% {
        clip-path: polygon(
          50% 50%,
          100% 0,
          100% 0%,
          100% 0%,
          100% 100%,
          50% 100%,
          0% 100%
        );
      }
      75% {
        clip-path: polygon(
          50% 50%,
          100% 100%,
          100% 100%,
          100% 100%,
          100% 100%,
          50% 100%,
          0% 100%
        );
      }
      100% {
        clip-path: polygon(
          50% 50%,
          50% 100%,
          50% 100%,
          50% 100%,
          50% 100%,
          50% 100%,
          0% 100%
        );
      }
    }
    @keyframes l20-2 {
      0% {
        transform: scaleY(1) rotate(0deg);
      }
      49.99% {
        transform: scaleY(1) rotate(135deg);
      }
      50% {
        transform: scaleY(-1) rotate(0deg);
      }
      100% {
        transform: scaleY(-1) rotate(-135deg);
      }
    }

    /* Bars Loader */
    .bars {
      width: 45px;
      aspect-ratio: 1;
      --c: no-repeat linear-gradient(var(--primary-colour) 0 0);
      background:
        var(--c) 0% 50%,
        var(--c) 50% 50%,
        var(--c) 100% 50%;
      background-size: 20% 100%;
      animation: l1 1s infinite linear;
    }

    @keyframes l1 {
      0% {
        background-size:
          20% 100%,
          20% 100%,
          20% 100%;
      }
      33% {
        background-size:
          20% 10%,
          20% 100%,
          20% 100%;
      }
      50% {
        background-size:
          20% 100%,
          20% 10%,
          20% 100%;
      }
      66% {
        background-size:
          20% 100%,
          20% 100%,
          20% 10%;
      }
      100% {
        background-size:
          20% 100%,
          20% 100%,
          20% 100%;
      }
    }

    /* Top Bar Loader (Positioned at the Top) */
    .top-bar-loader {
      top: 0;
      left: 0;
      width: 0;
      height: 4px;
      background-color: var(--primary-colour);
    }

    .eky-container {
      container-type: inline-size;
      display: flex;
    }
    .hotspot {
      --min-hotspot-opacity: 1;
    }
    .hotspot button {
      border: 0;
      background-color: var(--hotspot-colour);
      color: var(--secondary-colour);
      padding: 12px 24px;
      border-radius: 15px;
      cursor: pointer;
      box-shadow: 0 3px 10px rgb(0 0 0 / 0.2);
      max-width: 200px;
      opacity: 0;
      font-size: 95%;
      transition-property: all;
      transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      transition-duration: 300ms;
      display: block;
      position: absolute;
      width: max-content;
      top: -10px;
      right: -43px;
    }
    .hotspot .hotspot-dot {
      position: relative;
      width: 30px;
      height: 30px;
      opacity: 1;
    }
    .hotspot .hotspot-dot-circle {
      display: block;
      position: absolute;
      top: 6px;
      left: 6px;
      background-color: var(--hotspot-colour);
      color: var(--secondary-colour);
      width: 17px;
      height: 17px;
      border-radius: 50%;
    }
    .hotspot .hotspot-dot-ring {
      border: 2px solid var(--hotspot-colour);
      border-radius: 50%;
      height: 25px;
      width: 25px;
      position: absolute;
      opacity: 0;
      animation: pulsate 3s ease-out;
      animation-iteration-count: infinite;
    }
    .hotspot .hotspot-dot-ring-delay {
      animation-delay: 0.3s;
    }
    @keyframes pulsate {
      0% {
        transform: scale(0.1, 0.1);
        opacity: 0;
      }
      25% {
        opacity: 1;
      }
      50% {
        transform: scale(1.2, 1.2);
        opacity: 0;
      }
    }
    .hotspot.hotspot-expanded button {
      opacity: 1;
      z-index: 2;
    }
    .hotspot.hotspot-expanded div {
      opacity: 0;
    }
    .sidebar {
      width: 0px;
      max-width: 100%;
      top: 0;
      bottom: 0;
      z-index: 99;
      transition: all 0.5s ease;
      display: flex;
      align-items: center;
      background-color: var(--sidebar-background);
      color: var(--secondary-colour);
      border-radius: 12px;
      overflow: hidden;
    }
    @container (min-width: 768px) {
      .sidebar {
      }
    }
    .sidebar-left {
      left: 0;
      transform: translateX(-100%);
    }
    .sidebar-right {
      right: 0;
      transform: translateX(100%);
    }
    .sidebar-opened {
      transform: translateX(0);
      box-shadow: 0 3px 10px rgb(0 0 0 / 0.2);
      width: 634px;
    }
    .sidebar-close-button {
      width: 30px;
      height: 30px;
      position: absolute;
      border: 0;
      display: none;
      align-items: center;
      justify-content: center;
      top: 10px;
      right: 10px;
      cursor: pointer;
      background-color: var(--secondary-colour);
      border-radius: 15px;
    }
    .sidebar-close-button svg {
      fill: var(--hotspot-colour);
    }
    .sidebar-content {
      padding: 0 24px;
      overflow-y: scroll;
      max-height: 100%;
      width: 100%;
      scrollbar-width: none;
      -ms-overflow-style: none;
      min-width: 337px;
    }
    .sidebar-content::-webkit-scrollbar {
      display: none;
    }
    .sidebar-content::-ms-overflow-style {
      display: none;
    }
    .sidebar-content img,
    .sidebar-content video {
      max-width: 100%;
      height: 100%;
      display: block;
      margin: 0 auto;
    }
    .sidebar-content > h6 {
      margin-top: 0.5rem;
      margin-bottom: 0.5rem;
      line-height: 1.2;
      font-weight: normal;
    }
    .sidebar-opened > .sidebar-close-button {
      display: flex;
    }
    .sidebar-opened > .sidebar-content > .scroll-icon {
      display: flex;
    }
    .sidebar-content > h2 {
      max-width: 333px;
    }
    .qr-button,
    .pause-button,
    .fullscreen-button,
    .play-button,
    .exit-button {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background-color: #fff;
      display: flex;
      align-items: center;
      border: 0;
      box-shadow: 0 3px 10px rgb(0 0 0 / 0.2);
      z-index: 20;
      padding: 0;
      margin: 0;
      cursor: pointer;
    }
    .exit-button {
      width: 45px;
      height: 45px;
    }
    .play-button {
      transform: scale(1.55);
    }
    .button-container {
      position: absolute;
      z-index: 1;
      display: flex;
      gap: 0.7rem;
    }
    .button-container-top-right {
      top: 8px;
      right: 8px;
    }
    .button-container-top-left {
      top: 8px;
      left: 8px;
    }
    .button-container-bottom-left {
      bottom: 8px;
      left: 8px;
    }
    .button-container-bottom-right {
      bottom: 8px;
      right: 8px;
    }
    .fill-primary {
      fill: var(--primary-colour);
    }
    .paused-overlay,
    .qr-ui-container {
      position: absolute;
      background-color: rgba(0, 0, 0, 0.66);
      backdrop-filter: blur(4.5px);
      transition-property: opacity;
      transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      transition-duration: 600ms;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      width: 100%;
      display: flex;
      top: 0;
      bottom: 0;
      z-index: 1;
      color: white;
      font-family: "IntelOneLight", sans-serif;
      padding: 5px;
      text-align: center;
      line-height: 1.2;
    }
    .interaction-overlay {
      position: absolute;
      flex-direction: column;
      width: 100%;
      display: flex;
      top: 0;
      bottom: 0;
      z-index: 2;
    }
    .qr-container {
      max-width: 250px;
      width: 100%;
    }
    .qr-container > img {
      border-radius: 0.5rem;
    }
    .qr-ui-container > p,
    .qr-ui-container > h1 {
      max-width: 500px;
    }
    .scroll-icon {
      position: absolute;
      width: 110px;
      top: 86%;
      left: 37%;
      cursor: pointer;
      display: none;
    }
    .scroll-icon > svg {
      fill: var(--secondary-colour);
    }

    model-viewer {
      display: flex;
      transition:
        visibility 0s linear 0.5s,
        opacity 0.5s linear;
    }

    @keyframes scaleDown {
      from {
        width: 100%;
        opacity: 1;
      }
      to {
        width: 10px;
        opacity: 0.2;
        display: none;
      }
    }

    @keyframes scaleUp {
      from {
        opacity: 0.5;
        min-width: 0px;
      }
      to {
        opacity: 1;
        width: 100%;
      }
    }

    @container (max-width: 400px) {
      .qr-ui-container > h1 {
        font-size: x-large;
      }
      .qr-ui-container > p {
        font-size: 11px;
      }
    }

    @container (max-width: 866px) {
      .sidebar-opened {
        width: 808px;
      }
    }
    @container (max-width: 693px) {
      .sidebar-opened {
        width: 100%;
      }
      .hidden-mobile {
        min-width: 0px;
        animation: scaleDown 0.5s forwards;
      }
      .hidden-mobile > .hotspot {
        display: none;
      }
      .mobile-not-hidden {
        animation: scaleUp 1.5s forwards;
      }
    }
  `;currentSidebarOpened=null;hasScrolled={};cycleIndex=0;cycleTimeout=null;userInteracted=!1;stopHotspotCycle=!1;constructor(A,Q,B,C,J,I,q,K,Y){super(A,Q,B,C,J,I,q,K,Y,!0,"3d-player");this.showLeftSidebar=!1;this.showRightSidebar=!1;this.showModal=!1;this._modalPlacement=null;this.isFullscreen=!1;this.isPaused=!1;this.showQRUI=!1;this.hasInteracted=!1;this.userScrolledToBottom=!1;this.isTestingSidebarBackgroundColour=!0;this.environment="dev";this._hasLeftSidebar=!1;this._hasRightSidebar=!1;this._hasModal=!1;this._hasHotspots=!1;this.hotspotHex="#ffffff";if(!window.ModelViewerElement)window.ModelViewerElement={};if(window.ModelViewerElement.dracoDecoderLocation="https://s3-nexus.pointandplace.com/draco-decoder/",this.EKResolvedData["datarequirement-model-hotspots"]){this._hasHotspots=!0;let Z=this.EKResolvedData["datarequirement-model-hotspots"].hotspots;if(Z&&Z.length>0){for(let H of Z)if(H.hotspotAction&&H.hotspotAction.length>0){if(H.hotspotAction[0].blockType==="ModelViewerHotspotsDataRequirementsActionModal")this._hasModal=!0;else if(H.hotspotAction[0].blockType==="ModelViewerHotspotsDataRequirementsActionSidebar"){if(H.hotspotAction[0].sidebarDirection==="left")this._hasLeftSidebar=!0;else if(H.hotspotAction[0].sidebarDirection==="right")this._hasRightSidebar=!0}}}}this.primaryColour=this.EKProps.primaryColour||this.EKControlObject._config.deploymentColours.primaryColour,this.secondaryColour=this.EKProps.secondaryColour||this.EKControlObject._config.deploymentColours.secondaryColour,this.hotspotColour=this.EKProps.hotspotColour||this.EKControlObject._config.deploymentColours.textColourOther}connectedCallback(){super.connectedCallback(),document.addEventListener("fullscreenchange",()=>{this.isFullscreen=!!document.fullscreenElement});let A=document.createElement("canvas").getContext("2d");A.fillStyle=this.EKProps.hotspotColour,this.hotspotHex=A.fillStyle;let Q=this.EKResolvedData["datarequirement-model-hotspots"]?.hotspots;if(Q&&this.EKProps.showHotspots)Q.forEach((B)=>{this.logEventLegacy("delivery",`${this.elementIsDirectlyOnPage()?"embed":"button"}-hotspot-${B.label?.toLowerCase().replace(/ /g,"_")}`,"3d-hotspot"),this.triggerWOTWCommonInteraction("placed",`hotspot-${B.label?.toLowerCase().replace(/ /g,"_")}`)})}addIntelFont(){return v`<style class="intel-ul-embed-text-styles">
      @font-face {
        font-family: "IntelOneRegular";
        src: url("https://cdn.pointandplace.com/fonts/intelone-display/intelone-display-regular.ttf");
      }
      @font-face {
        font-family: "IntelOneLight";
        src: url("https://cdn.pointandplace.com/fonts/intelone-display/intelone-display-light.ttf");
      }
      @font-face {
        font-family: "IntelOneBold";
        src: url("https://cdn.pointandplace.com/fonts/intelone-display/intelone-display-bold.woff");
      }
      * {
        font-family: "IntelOneRegular", sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      .text-light {
        font-family: "IntelOneLight", sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      h1,
      h2,
      h3,
      h4,
      h5,
      h6,
      .hotspot button {
        font-family: "IntelOneBold", sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
    </style>`}renderFullscreenButton(A){let Q=v`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="100%"
      height="100%"
      fill="none"
    >
      <circle cx="30" cy="30" r="30" fill="#fff"></circle>
      <path
        class="fill-primary"
        d="M16 44v-9.85h1.55v8.3h8.3V44H16Zm0-18.15V16h9.85v1.55h-8.3v8.3H16ZM34.15 44v-1.55h8.3v-8.3H44V44h-9.85Zm8.3-18.15v-8.3h-8.3V16H44v9.85h-1.55Z"
      ></path>
    </svg>`,B=v`<svg
      xmlns="http://www.w3.org/2000/svg"
      width="60"
      height="60"
      fill="none"
    >
      <circle cx="30" cy="30" r="30" fill="#fff"></circle>
      <path
        class="fill-primary"
        d="M24.3 44v-8.3H16v-1.55h9.85V44H24.3Zm9.85 0v-9.85H44v1.55h-8.3V44h-1.55ZM16 25.85V24.3h8.3V16h1.55v9.85H16Zm18.15 0V16h1.55v8.3H44v1.55h-9.85Z"
      ></path>
    </svg>`;return v`${document.fullscreenEnabled&&A?v`<button
          class="fullscreen-button"
          @click="${()=>this.toggleFullscreen()}"
        >
          ${this.isFullscreen?B:Q}
        </button>`:null}`}renderPlayButton(A){let Q=v`
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="60"
        height="60"
        fill="none"
      >
        <circle cx="30" cy="30" r="30" class="fill-primary" />
        <path
          fill="#fff"
          d="M27 48h6V24h-6v24Zm12 0h6V24h-6v24Z"
          style="transform: translate(-6px,
          -6px);"
        />
      </svg>
    `;return v`${A&&this.isPaused===!1?v`<button
          class="pause-button"
          @click="${()=>this.togglePlayPauseOverlay()}"
        >
          ${Q}
        </button>`:null}`}renderQRButton(A){let Q=v`
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="60"
        height="60"
        fill="none"
      >
        <circle cx="30" cy="30" r="30" fill="#fff" />
        <path
          class="fill-primary"
          d="m28.695 43.095-9.225-5.4a2.72 2.72 0 0 1-.855-.9c-.21-.36-.315-.78-.315-1.26v-10.8c0-.42.105-.817.315-1.192.21-.375.495-.698.855-.968l9.27-5.4c.42-.24.848-.36 1.283-.36.434 0 .847.12 1.237.36l9.27 5.4c.36.27.645.593.855.968.21.375.315.772.315 1.192v10.8c0 .48-.105.9-.315 1.26-.21.36-.51.66-.9.9l-9.315 5.4c-.39.24-.803.36-1.238.36-.434 0-.847-.12-1.237-.36Zm.63-1.305V30.495l-9.63-5.49V35.49c0 .18.045.352.135.517.09.166.225.308.405.428l9.09 5.355Zm1.35 0 9.09-5.355c.18-.12.315-.263.405-.428.09-.164.135-.337.135-.517V25.005l-9.63 5.49V41.79ZM12 18.975V16.14c0-1.14.405-2.115 1.215-2.925C14.025 12.405 15 12 16.14 12h2.835v1.395H16.14c-.78 0-1.433.263-1.958.787-.524.525-.787 1.178-.787 1.958v2.835H12ZM16.14 48c-1.14 0-2.115-.405-2.925-1.215C12.405 45.975 12 45 12 43.86v-2.835h1.395v2.835c0 .78.263 1.432.787 1.958.525.525 1.178.787 1.958.787h2.835V48H16.14Zm24.885-.405V46.2h2.835c.78 0 1.432-.263 1.958-.788.525-.524.787-1.177.787-1.957v-2.88H48v2.88c0 1.14-.405 2.115-1.215 2.925-.81.81-1.785 1.215-2.925 1.215h-2.835Zm5.58-28.62V16.14c0-.78-.262-1.433-.787-1.958-.526-.524-1.178-.787-1.958-.787h-2.835V12h2.835c1.14 0 2.115.405 2.925 1.215C47.595 14.025 48 15 48 16.14v2.835h-1.395ZM30 29.28l9.63-5.535-9.09-5.265c-.18-.09-.36-.135-.54-.135-.18 0-.36.045-.54.135l-9.09 5.265L30 29.28Z"
        />
      </svg>
    `;return v`${A?v`<button class="qr-button" @click="${()=>this.toggleQROverlay()}">
          ${Q}
        </button>`:null}`}renderPausedOverlay(){let A=v`
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="60"
        height="60"
        fill="none"
      >
        <circle cx="30" cy="30" r="30" fill="#fff" />
        <path
          d="M29 49L48 36.5L29 24V49Z"
          style="transform: translate(-6px,
      -6px);"
          class="fill-primary"
        />
      </svg>
    `;return v`<div class="paused-overlay">
      <button
        class="play-button"
        @click="${()=>this.togglePlayPauseOverlay()}"
      >
        ${A}
      </button>
    </div>`}renderQRUI(){let A=this.localisations(),Q=v`
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="40"
        height="40"
        fill="none"
        viewBox="0 0 53 60"
      >
        <circle cx="30" cy="30" r="30" fill="#fff" />
        <path
          class="fill-primary"
          d="M19.1 42.9 18 41.8l11.35-11.35L18 19.1l1.1-1.1 11.35 11.35L41.8 18l1.1 1.1-11.35 11.35L42.9 41.8l-1.1 1.1-11.35-11.35L19.1 42.9Z"
        />
      </svg>
    `;return v`
      <div class="qr-ui-container">
        <h1>${A.QRPopupTitle}</h1>
        <div class="qr-container">
          <img
            src="${this.EKResolvedData["datarequirement-arqrcode"]}"
            alt="QR Code"
          />
        </div>
        <p>${A.QRPopupBottomText}</p>
        <button class="exit-button" @click="${()=>this.toggleQROverlay()}">
          ${Q}
        </button>
      </div>
    `}renderInteractionOverlay(){return v`
      <div
        @click="${(A)=>this.setUserHasInteractedTrue(A)}"
        class="interaction-overlay"
      ></div>
    `}toggleFullscreen(){if(this.isFullscreen)document.exitFullscreen().catch(console.error),this.logEventLegacy("click","fullscreen-disabled"),this.triggerWOTWCommonInteraction("click","fullscreen-disabled");else this.wrapper.requestFullscreen().catch(console.error),this.logEventLegacy("click","fullscreen-enabled"),this.triggerWOTWCommonInteraction("click","fullscreen-enabled")}toggleQROverlay(){if(I3(void 0,!0))return this.logEventLegacy("click","ar-btn-clicked"),this.triggerWOTWCommonInteraction("click","ar-btn-clicked"),new c6(this.EKIdentities?.arid||this.EKID,this.EKEnvironment,"ar-models").launchAR(this);if(this.showQRUI=!this.showQRUI,this.closeSidebars(),this.showQRUI)this.logEventLegacy("click","qr-ui-opened"),this.triggerWOTWCommonInteraction("click","qr-ui-opened");else this.logEventLegacy("click","qr-ui-closed"),this.triggerWOTWCommonInteraction("click","qr-ui-closed")}togglePlayPauseOverlay(){if(this.isPaused=!this.isPaused,this.closeSidebars(),this.isPaused)this.logEventLegacy("click","pause-btn-clicked"),this.triggerWOTWCommonInteraction("click","pause-btn-clicked");else this.logEventLegacy("click","play-btn-clicked"),this.triggerWOTWCommonInteraction("click","play-btn-clicked")}closeSidebars(){this.showLeftSidebar=!1,this.showRightSidebar=!1,this.stopHotspotCycle=!1,this.startHotspotCycle()}setUserHasInteractedTrue(A){this.hasInteracted=!0,this.logEventLegacy("click",`model|${A.clientX},${A.clientY}|${this.elementIsDirectlyOnPage()?"embed":"button"}`),this.logEventLegacy("click",this.elementIsDirectlyOnPage()?"embed":"button","3dfw"),this.triggerWOTWCommonInteraction("click",`model|${A.clientX},${A.clientY}`)}getContent(A){if(A.length>0&&A[0].blockType==="ModelViewerHotspotsDataRequirementsContentRichText")return A[0].contentHtml;else if(A.length>0&&A[0].blockType==="ModelViewerHotspotsDataRequirementsContentElement"){if(A[0].content&&A[0].content.length>0)return this.EKControlObject._getWebComponent(A[0].content[0])}return null}startHotspotCycle(){if(this.cycleTimeout)clearTimeout(this.cycleTimeout);this.cycleIndex=0,this.userInteracted=!1,this.cycleThroughHotspots()}cycleThroughHotspots(){if(this.userInteracted||this.stopHotspotCycle)return;if(this.removeHotspotExpandClass(),this.hotspotsArray&&this.hotspotsArray[this.cycleIndex])this.hotspotsArray[this.cycleIndex].classList.add("hotspot-expanded");this.cycleIndex=(this.cycleIndex+1)%this.hotspotsArray.length,this.cycleTimeout=window.setTimeout(()=>{this.cycleThroughHotspots()},3000)}removeHotspotExpandClass(){if(this.hotspotsArray)this.hotspotsArray.forEach((A)=>A.classList.remove("hotspot-expanded"))}clearHotspotCycleAndRemoveClass(){if(this.removeHotspotExpandClass(),this.cycleTimeout)clearTimeout(this.cycleTimeout)}renderHotspots(A,Q){if(!Q)return null;if(A.hotspots&&A.hotspots.length===0)return null;return A.hotspots.map((B,C)=>{let J=null,I=(q)=>{q.stopPropagation()};if(!B.label)return null;if(B.hotspotAction&&B.hotspotAction.length>0){let q=B.hotspotAction[0];if(q.blockType==="ModelViewerHotspotsDataRequirementsActionLink")I=(K)=>{K.stopPropagation(),window?.open(q.link,"_blank")?.focus()};else if(q.blockType==="ModelViewerHotspotsDataRequirementsActionModal"){if(J=this.getContent(q.contentBlock),J!==null)I=(K)=>{K.stopPropagation(),this.showLeftSidebar=!1,this.showRightSidebar=!1,this.showModal=!0,this.content=J,this.stopHotspotCycle=!1,this.startHotspotCycle()}}else if(q.blockType==="ModelViewerHotspotsDataRequirementsActionSidebar"){if(J=this.getContent(q.contentBlock),J!==null)I=(K)=>{K.stopPropagation(),this.clearHotspotCycleAndRemoveClass(),this.stopHotspotCycle=!0,this.currentSidebarOpened=B.label?.toLowerCase().replace(/ /g,"_")||null,this.logEventLegacy("open",`${this.elementIsDirectlyOnPage()?"embed":"button"}-popup-${this.currentSidebarOpened}`,"3d-hotspot"),this.triggerWOTWCommonInteraction("open",`hotspot-${this.currentSidebarOpened}`),this.showLeftSidebar=q.sidebarDirection==="left",this.showRightSidebar=q.sidebarDirection==="right",this.showModal=!1,this.content=J,this.shadowRoot?.querySelector(".sidebar-content")?.scrollTo(0,0),setTimeout(()=>{let Y=this.shadowRoot?.querySelector(".sidebar-opened > .sidebar-content"),Z=this.shadowRoot?.querySelector(".sidebar-opened > .sidebar-content > video");if(this.shadowRoot?.querySelectorAll(".sidebar-opened > .sidebar-content > video")?.forEach((G,W)=>{if(!G.getAttribute("play-event-added"))G.addEventListener("play",()=>{this.logEventLegacy("play",`${this.elementIsDirectlyOnPage()?"embed":"button"}-${this.currentSidebarOpened}-video-${W}`,"3d-hotspot"),this.triggerWOTWCommonInteraction("play",`hotspot-${this.currentSidebarOpened}-video-${W}`)}),G.setAttribute("play-event-added","true")}),this.userScrolledToBottom=Y?.scrollHeight===Y?.clientHeight?!0:!1,Z){let G=Z.play();if(G!==void 0)G.then(()=>{}).catch(()=>{})}},100)}}}return v`
        <div
          class="hotspot"
          @mouseover="${(q)=>{this.removeHotspotExpandClass(),q.currentTarget.classList.add("hotspot-expanded"),this.cycleIndex=0,this.userInteracted=!0}}"
          @mouseout="${(q)=>{q.currentTarget.classList.remove("hotspot-expanded"),this.userInteracted=!1,this.startHotspotCycle()}}"
          slot="hotspot-${C}"
          data-position="${B.positionX} ${B.positionY} ${B.positionZ}"
          data-normal="${B.positionX} ${B.positionY} ${B.positionZ}"
        >
          <button
            @click="${(q)=>{I(q),this.logEventLegacy("click",`${this.elementIsDirectlyOnPage()?"embed":"button"}-hotspot-${B.label?.toLowerCase().replace(/ /g,"_")}`,"3d-hotspot"),this.triggerWOTWCommonInteraction("click",`hotspot-${B.label?.toLowerCase().replace(/ /g,"_")}`)}}"
            @mouseenter="${(q)=>{this.logEventLegacy("hover",`${this.elementIsDirectlyOnPage()?"embed":"button"}-hotspot-${B.label?.toLowerCase().replace(/ /g,"_")}`,"3d-hotspot"),this.triggerWOTWCommonInteraction("hover",`hotspot-${B.label?.toLowerCase().replace(/ /g,"_")}`)}}"
          >
            ${B.label}
          </button>
          <div class="hotspot-dot">
            <div class="hotspot-dot-circle"></div>
            <div class="hotspot-dot-ring"></div>
            <div class="hotspot-dot-ring hotspot-dot-ring-delay"></div>
          </div>
        </div>
      `})}getModelURL(){let A=this.EKResolvedData["datarequirement-model"].files,Q=null;if(A.length>0){for(let B of A)if(B.type==="glb")return B.location}return null}_onModalClosed(){this.showModal=!1}localisations(){return this.getLocalisations("ModelViewerLocalisation")}isComponentValidToRender(){let A=this.localisations();if(A===null||!A)return!1;else if(!A.QRPopupBottomText||!A.QRPopupTitle)return!1;return!0}scrollIcon(){let A=()=>{let Q=this.shadowRoot?.querySelector(".sidebar-opened > .sidebar-content");if(Q)Q.scrollTo({left:0,top:Q.scrollHeight,behavior:"smooth"})};return v`
      <div
        class="scroll-icon"
        @click="${()=>{A()}}"
      >
        <svg
          class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-dhaba5"
          focusable="false"
          aria-hidden="true"
          viewBox="0 -960 960 960"
          data-testid="KeyboardArrowDownIcon"
          height="100px"
          width="100px"
        >
          <path d="M480-380 276-584l20-20 184 184 184-184 20 20-204 204Z" />
        </svg>
      </div>
    `}checkIfUserIsAtTheBottomOfTheContent(){let A=this.shadowRoot?.querySelector(".sidebar-opened > .sidebar-content");if(A)this.userScrolledToBottom=A.scrollHeight-A.scrollTop<=A.clientHeight+50;else this.userScrolledToBottom=!1}modelViewerDismissPoster(){if(this.modelViewerElement)this.modelViewerElement.dismissPoster(),this.hideLoadingIndicator()}hideLoadingIndicator(){if(this.loaderElement)this.loaderElement.style.display="none"}firstUpdated(A){if(super.firstUpdated(A),this.modelViewerElement)this.modelViewerElement.addEventListener("load",()=>{window.dispatchEvent(new CustomEvent("ek-modelviewer-loaded",{detail:{id:this.EKID}})),this.hideLoadingIndicator()}),this.modelViewerElement.addEventListener("error",(Q)=>{window.dispatchEvent(new CustomEvent("ek-modelviewer-failed",{detail:{id:this.EKID,error:Q.detail.type||"unknown"}}))});if(this._hasHotspots)setTimeout(()=>{this.startHotspotCycle()},3000)}renderLoadingIndicator(){return v`
      <div class="loader">
        <div class="spinner"></div>
      </div>
    `}render(){if(!this.isComponentValidToRender())return this.nullifyComponent("Missing localisations"),null;let A=this.getModelURL();if(A===null)return v`<div>...</div>`;let Q=null;if(this.content)if(typeof this.content==="string")Q=K2(this.content);else Q=this.content;let B=null;if(this._hasModal&&this._modalPlacement)B=v`<ek-modal
        .placementStrategy="${this._modalPlacement}"
        .EKAPIComponentParent="${this}"
        .visible="${this.showModal}"
        .anchorElement="${this}"
        @ek-modal-close-button="${this._onModalClosed}"
        @ek-modal-close-backdrop="${this._onModalClosed}"
      >
        ${this.showModal===!0?Q:null}
      </ek-modal>`;return v`
      ${this.getHostStyleOverride()} ${this.getCustomCSSStyles()}
      ${B} ${this.addIntelFont()}
      ${this.EKProps.customSidebarStyling?v`<style>
            ${this.EKProps.customSidebarStyling}
          </style>`:null}
      <style>
        :host {
          --primary-colour: ${this.primaryColour};
          --secondary-colour: ${this.secondaryColour};
          --hotspot-colour: ${this.hotspotColour};
          --sidebar-background: ${this.isTestingSidebarBackgroundColour?this.hotspotHex:`${this.hotspotHex}cc`};
          --model-viewer-min-width: ${this.EKProps.BETAOptions.minWidth};
          --model-viewer-min-height: ${this.EKProps.BETAOptions.minHeight};
          --model-viewer-background-colour: ${this.EKProps.backgroundColour||"white"};
        }
      </style>
      <div
        class="wrapper eky-container"
        @click="${()=>this.hasInteracted=!0}"
      >
        ${this.hasInteracted===!1&&this.EKProps.enableHiddenInteractionOverlay===!0?this.renderInteractionOverlay():null}
        ${this.isPaused===!0?this.renderPausedOverlay():null}
        ${this.showQRUI===!0?this.renderQRUI():null}
        <div
          class="button-container button-container-${this.EKProps.buttonPosition}"
        >
          ${this.showQRUI===!1?this.renderPlayButton(this.EKProps.showPlayButton):null}
          ${this.showQRUI===!1?this.renderQRButton(this.EKProps.showQRButton):null}
          ${this.showQRUI===!1?this.renderFullscreenButton(this.EKProps.showFullscreenButton):null}
        </div>
        ${this._hasLeftSidebar===!0?v`<div
              class="sidebar sidebar-left ${this.showLeftSidebar?"sidebar-opened":""}"
            >
              <button
                class="sidebar-close-button"
                @click="${()=>{this.showLeftSidebar=!1,this.stopHotspotCycle=!1,this.startHotspotCycle(),this.logEventLegacy("close",`${this.elementIsDirectlyOnPage()?"embed":"button"}-popup-${this.currentSidebarOpened}`,"3d-hotspot"),this.triggerWOTWCommonInteraction("close",`hotspot-${this.currentSidebarOpened}`)}}"
              >
                ${this.closeButton}
              </button>
              <div
                class="sidebar-content"
                id="sidebar-content-left"
                @scroll="${()=>{if(this.checkIfUserIsAtTheBottomOfTheContent(),this.currentSidebarOpened&&!this.hasScrolled[this.currentSidebarOpened])this.hasScrolled[this.currentSidebarOpened]=!0,this.logEventLegacy("scroll",`${this.elementIsDirectlyOnPage()?"embed":"button"}-popup-${this.currentSidebarOpened}`,"3d-hotspot"),this.triggerWOTWCommonInteraction("scroll",`hotspot-${this.currentSidebarOpened}`)}}"
              >
                ${this.showLeftSidebar===!0?Q:null}
                ${this.userScrolledToBottom===!1?this.scrollIcon():null}
              </div>
            </div>`:null}
        ${this._showModelViewer?v`
              <model-viewer
                reveal="${this.EKProps.BETAOptions.modelViewerDismissPoster?"manual":"auto"}"
                class="${this.showRightSidebar||this.showLeftSidebar?"hidden-mobile":"mobile-not-hidden"}"
                touch-action="none"
                shadow-intensity="1"
                src="${A}"
                camera-controls=${this.EKProps.cameraControls?"true":R1}
                auto-rotate=${this.EKProps.autoRotate?"true":R1}
                disable-pan=${this.EKProps.pannable?R1:"true"}
                disable-zoom=${this.EKProps.zoomable?R1:"true"}
                interaction-prompt="${this.EKProps.interactionPrompt==="none"?"none":"auto"}"
                interaction-prompt-style="${this.EKProps.interactionPrompt}"
                dir="ltr"
                @load="${()=>{this.logEventLegacy("delivery","model","3d-player"),this.triggerWOTWCommonInteraction("placed","model")}}"
                @click="${()=>{if(this.EKProps.shouldCloseSidebarsOnClickAway&&this.showLeftSidebar)this.showLeftSidebar=!1,this.stopHotspotCycle=!1,this.startHotspotCycle(),this.logEventLegacy("close",`${this.elementIsDirectlyOnPage()?"embed":"button"}-popup-${this.currentSidebarOpened}`,"3d-hotspot"),this.triggerWOTWCommonInteraction("close",`hotspot-${this.currentSidebarOpened}`);if(this.EKProps.shouldCloseSidebarsOnClickAway&&this.showRightSidebar)this.showRightSidebar=!1}}"
                @mousedown="${(C)=>{if(this.logEventLegacy("click",`model|${C.clientX},${C.clientY}|${this.elementIsDirectlyOnPage()?"embed":"button"}`),this.breadcrumbs.length>0)this.logEventLegacy("click",this.elementIsDirectlyOnPage()?"embed":"button","3dfw");this.triggerWOTWCommonInteraction("click",`model|${C.clientX},${C.clientY}`)}}"
              >
                <div slot="progress-bar">${this.renderLoadingIndicator()}</div>
                ${this.EKResolvedData["datarequirement-model-hotspots"]?this.renderHotspots(this.EKResolvedData["datarequirement-model-hotspots"],this.EKProps.showHotspots):null}
              </model-viewer>
            `:""}
        ${this._hasRightSidebar===!0?v`<div
              class="sidebar sidebar-right ${this.showRightSidebar?"sidebar-opened":""}"
            >
              <button
                class="sidebar-close-button"
                @click="${()=>{this.showRightSidebar=!1,this.logEventLegacy("close",`${this.elementIsDirectlyOnPage()?"embed":"button"}-popup-${this.currentSidebarOpened}`,"3d-hotspot"),this.triggerWOTWCommonInteraction("close",`hotspot-${this.currentSidebarOpened}`)}}"
              >
                ${this.closeButton}
              </button>
              <div
                class="sidebar-content"
                @scroll="${()=>{if(this.checkIfUserIsAtTheBottomOfTheContent(),this.currentSidebarOpened&&!this.hasScrolled[this.currentSidebarOpened])this.hasScrolled[this.currentSidebarOpened]=!0,this.logEventLegacy("scroll",`${this.elementIsDirectlyOnPage()?"embed":"button"}-popup-${this.currentSidebarOpened}`,"3d-hotspot"),this.triggerWOTWCommonInteraction("scroll",`hotspot-${this.currentSidebarOpened}`)}}"
              >
                ${this.showRightSidebar===!0?Q:null}
                ${this.userScrolledToBottom===!1?this.scrollIcon():null}
              </div>
            </div>`:null}
      </div>
    `}}f([K0()],ZB.prototype,"showLeftSidebar",void 0),f([K0()],ZB.prototype,"showRightSidebar",void 0),f([K0()],ZB.prototype,"showModal",void 0),f([K0()],ZB.prototype,"content",void 0),f([K0()],ZB.prototype,"_modalPlacement",void 0),f([K0()],ZB.prototype,"isFullscreen",void 0),f([K0()],ZB.prototype,"isPaused",void 0),f([K0()],ZB.prototype,"showQRUI",void 0),f([K0()],ZB.prototype,"hasInteracted",void 0),f([K0()],ZB.prototype,"userScrolledToBottom",void 0),f([K0()],ZB.prototype,"isTestingSidebarBackgroundColour",void 0),f([K0()],ZB.prototype,"environment",void 0),f([X1(".wrapper")],ZB.prototype,"wrapper",void 0),f([X1(".loader")],ZB.prototype,"loaderElement",void 0),f([X1("model-viewer")],ZB.prototype,"modelViewerElement",void 0),f([ZC(".hotspot")],ZB.prototype,"hotspotsArray",void 0),f([a({attribute:!1})],ZB.prototype,"EKProps",void 0),f([a({attribute:!1})],ZB.prototype,"EKResolvedData",void 0),f([K0()],ZB.prototype,"_hasLeftSidebar",void 0),f([K0()],ZB.prototype,"_hasRightSidebar",void 0),f([K0()],ZB.prototype,"_hasModal",void 0),f([K0()],ZB.prototype,"_hasHotspots",void 0),f([K0()],ZB.prototype,"hotspotHex",void 0),f([K0()],ZB.prototype,"primaryColour",void 0),f([K0()],ZB.prototype,"secondaryColour",void 0),f([K0()],ZB.prototype,"hotspotColour",void 0),ZB=f([z0("ek-model-viewer")],ZB);var cA=Object.freeze({Linear:Object.freeze({None:function(A){return A},In:function(A){return A},Out:function(A){return A},InOut:function(A){return A}}),Quadratic:Object.freeze({In:function(A){return A*A},Out:function(A){return A*(2-A)},InOut:function(A){if((A*=2)<1)return 0.5*A*A;return-0.5*(--A*(A-2)-1)}}),Cubic:Object.freeze({In:function(A){return A*A*A},Out:function(A){return--A*A*A+1},InOut:function(A){if((A*=2)<1)return 0.5*A*A*A;return 0.5*((A-=2)*A*A+2)}}),Quartic:Object.freeze({In:function(A){return A*A*A*A},Out:function(A){return 1- --A*A*A*A},InOut:function(A){if((A*=2)<1)return 0.5*A*A*A*A;return-0.5*((A-=2)*A*A*A-2)}}),Quintic:Object.freeze({In:function(A){return A*A*A*A*A},Out:function(A){return--A*A*A*A*A+1},InOut:function(A){if((A*=2)<1)return 0.5*A*A*A*A*A;return 0.5*((A-=2)*A*A*A*A+2)}}),Sinusoidal:Object.freeze({In:function(A){return 1-Math.sin((1-A)*Math.PI/2)},Out:function(A){return Math.sin(A*Math.PI/2)},InOut:function(A){return 0.5*(1-Math.sin(Math.PI*(0.5-A)))}}),Exponential:Object.freeze({In:function(A){return A===0?0:Math.pow(1024,A-1)},Out:function(A){return A===1?1:1-Math.pow(2,-10*A)},InOut:function(A){if(A===0)return 0;if(A===1)return 1;if((A*=2)<1)return 0.5*Math.pow(1024,A-1);return 0.5*(-Math.pow(2,-10*(A-1))+2)}}),Circular:Object.freeze({In:function(A){return 1-Math.sqrt(1-A*A)},Out:function(A){return Math.sqrt(1- --A*A)},InOut:function(A){if((A*=2)<1)return-0.5*(Math.sqrt(1-A*A)-1);return 0.5*(Math.sqrt(1-(A-=2)*A)+1)}}),Elastic:Object.freeze({In:function(A){if(A===0)return 0;if(A===1)return 1;return-Math.pow(2,10*(A-1))*Math.sin((A-1.1)*5*Math.PI)},Out:function(A){if(A===0)return 0;if(A===1)return 1;return Math.pow(2,-10*A)*Math.sin((A-0.1)*5*Math.PI)+1},InOut:function(A){if(A===0)return 0;if(A===1)return 1;if(A*=2,A<1)return-0.5*Math.pow(2,10*(A-1))*Math.sin((A-1.1)*5*Math.PI);return 0.5*Math.pow(2,-10*(A-1))*Math.sin((A-1.1)*5*Math.PI)+1}}),Back:Object.freeze({In:function(A){var Q=1.70158;return A===1?1:A*A*((Q+1)*A-Q)},Out:function(A){var Q=1.70158;return A===0?0:--A*A*((Q+1)*A+Q)+1},InOut:function(A){var Q=2.5949095;if((A*=2)<1)return 0.5*(A*A*((Q+1)*A-Q));return 0.5*((A-=2)*A*((Q+1)*A+Q)+2)}}),Bounce:Object.freeze({In:function(A){return 1-cA.Bounce.Out(1-A)},Out:function(A){if(A<0.36363636363636365)return 7.5625*A*A;else if(A<0.7272727272727273)return 7.5625*(A-=0.5454545454545454)*A+0.75;else if(A<0.9090909090909091)return 7.5625*(A-=0.8181818181818182)*A+0.9375;else return 7.5625*(A-=0.9545454545454546)*A+0.984375},InOut:function(A){if(A<0.5)return cA.Bounce.In(A*2)*0.5;return cA.Bounce.Out(A*2-1)*0.5+0.5}}),generatePow:function(A){if(A===void 0)A=4;return A=A<Number.EPSILON?Number.EPSILON:A,A=A>1e4?1e4:A,{In:function(Q){return Math.pow(Q,A)},Out:function(Q){return 1-Math.pow(1-Q,A)},InOut:function(Q){if(Q<0.5)return Math.pow(Q*2,A)/2;return(1-Math.pow(2-Q*2,A))/2+0.5}}}}),HB=function(){return performance.now()},Pb=function(){function A(){this._tweens={},this._tweensAddedDuringUpdate={}}return A.prototype.getAll=function(){var Q=this;return Object.keys(this._tweens).map(function(B){return Q._tweens[B]})},A.prototype.removeAll=function(){this._tweens={}},A.prototype.add=function(Q){this._tweens[Q.getId()]=Q,this._tweensAddedDuringUpdate[Q.getId()]=Q},A.prototype.remove=function(Q){delete this._tweens[Q.getId()],delete this._tweensAddedDuringUpdate[Q.getId()]},A.prototype.update=function(Q,B){if(Q===void 0)Q=HB();if(B===void 0)B=!1;var C=Object.keys(this._tweens);if(C.length===0)return!1;while(C.length>0){this._tweensAddedDuringUpdate={};for(var J=0;J<C.length;J++){var I=this._tweens[C[J]],q=!B;if(I&&I.update(Q,q)===!1&&!B)delete this._tweens[C[J]]}C=Object.keys(this._tweensAddedDuringUpdate)}return!0},A}(),R8={Linear:function(A,Q){var B=A.length-1,C=B*Q,J=Math.floor(C),I=R8.Utils.Linear;if(Q<0)return I(A[0],A[1],C);if(Q>1)return I(A[B],A[B-1],B-C);return I(A[J],A[J+1>B?B:J+1],C-J)},Bezier:function(A,Q){var B=0,C=A.length-1,J=Math.pow,I=R8.Utils.Bernstein;for(var q=0;q<=C;q++)B+=J(1-Q,C-q)*J(Q,q)*A[q]*I(C,q);return B},CatmullRom:function(A,Q){var B=A.length-1,C=B*Q,J=Math.floor(C),I=R8.Utils.CatmullRom;if(A[0]===A[B]){if(Q<0)J=Math.floor(C=B*(1+Q));return I(A[(J-1+B)%B],A[J],A[(J+1)%B],A[(J+2)%B],C-J)}else{if(Q<0)return A[0]-(I(A[0],A[0],A[1],A[1],-C)-A[0]);if(Q>1)return A[B]-(I(A[B],A[B],A[B-1],A[B-1],C-B)-A[B]);return I(A[J?J-1:0],A[J],A[B<J+1?B:J+1],A[B<J+2?B:J+2],C-J)}},Utils:{Linear:function(A,Q,B){return(Q-A)*B+A},Bernstein:function(A,Q){var B=R8.Utils.Factorial;return B(A)/B(Q)/B(A-Q)},Factorial:function(){var A=[1];return function(Q){var B=1;if(A[Q])return A[Q];for(var C=Q;C>1;C--)B*=C;return A[Q]=B,B}}(),CatmullRom:function(A,Q,B,C,J){var I=(B-A)*0.5,q=(C-Q)*0.5,K=J*J,Y=J*K;return(2*Q-2*B+I+q)*Y+(-3*Q+3*B-2*I-q)*K+I*J+Q}}},oL=function(){function A(){}return A.nextId=function(){return A._nextId++},A._nextId=0,A}(),BW=new Pb,O5=function(){function A(Q,B){if(B===void 0)B=BW;this._object=Q,this._group=B,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1000,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=cA.Linear.None,this._interpolationFunction=R8.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=oL.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return A.prototype.getId=function(){return this._id},A.prototype.isPlaying=function(){return this._isPlaying},A.prototype.isPaused=function(){return this._isPaused},A.prototype.getDuration=function(){return this._duration},A.prototype.to=function(Q,B){if(B===void 0)B=1000;if(this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=Q,this._propertiesAreSetUp=!1,this._duration=B<0?0:B,this},A.prototype.duration=function(Q){if(Q===void 0)Q=1000;return this._duration=Q<0?0:Q,this},A.prototype.dynamic=function(Q){if(Q===void 0)Q=!1;return this._isDynamic=Q,this},A.prototype.start=function(Q,B){if(Q===void 0)Q=HB();if(B===void 0)B=!1;if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var C in this._valuesStartRepeat)this._swapEndStartRepeatValues(C),this._valuesStart[C]=this._valuesStartRepeat[C]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=Q,this._startTime+=this._delayTime,!this._propertiesAreSetUp||B){if(this._propertiesAreSetUp=!0,!this._isDynamic){var J={};for(var I in this._valuesEnd)J[I]=this._valuesEnd[I];this._valuesEnd=J}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,B)}return this},A.prototype.startFromCurrentValues=function(Q){return this.start(Q,!0)},A.prototype._setupProperties=function(Q,B,C,J,I){for(var q in C){var K=Q[q],Y=Array.isArray(K),Z=Y?"array":typeof K,H=!Y&&Array.isArray(C[q]);if(Z==="undefined"||Z==="function")continue;if(H){var G=C[q];if(G.length===0)continue;var W=[K];for(var F=0,z=G.length;F<z;F+=1){var U=this._handleRelativeValue(K,G[F]);if(isNaN(U)){H=!1,console.warn("Found invalid interpolation list. Skipping.");break}W.push(U)}if(H)C[q]=W}if((Z==="object"||Y)&&K&&!H){B[q]=Y?[]:{};var E=K;for(var w in E)B[q][w]=E[w];J[q]=Y?[]:{};var G=C[q];if(!this._isDynamic){var L={};for(var w in G)L[w]=G[w];C[q]=G=L}this._setupProperties(E,B[q],G,J[q],I)}else{if(typeof B[q]==="undefined"||I)B[q]=K;if(!Y)B[q]*=1;if(H)J[q]=C[q].slice().reverse();else J[q]=B[q]||0}}},A.prototype.stop=function(){if(!this._isChainStopped)this._isChainStopped=!0,this.stopChainedTweens();if(!this._isPlaying)return this;if(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback)this._onStopCallback(this._object);return this},A.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},A.prototype.pause=function(Q){if(Q===void 0)Q=HB();if(this._isPaused||!this._isPlaying)return this;return this._isPaused=!0,this._pauseStart=Q,this._group&&this._group.remove(this),this},A.prototype.resume=function(Q){if(Q===void 0)Q=HB();if(!this._isPaused||!this._isPlaying)return this;return this._isPaused=!1,this._startTime+=Q-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this},A.prototype.stopChainedTweens=function(){for(var Q=0,B=this._chainedTweens.length;Q<B;Q++)this._chainedTweens[Q].stop();return this},A.prototype.group=function(Q){if(Q===void 0)Q=BW;return this._group=Q,this},A.prototype.delay=function(Q){if(Q===void 0)Q=0;return this._delayTime=Q,this},A.prototype.repeat=function(Q){if(Q===void 0)Q=0;return this._initialRepeat=Q,this._repeat=Q,this},A.prototype.repeatDelay=function(Q){return this._repeatDelayTime=Q,this},A.prototype.yoyo=function(Q){if(Q===void 0)Q=!1;return this._yoyo=Q,this},A.prototype.easing=function(Q){if(Q===void 0)Q=cA.Linear.None;return this._easingFunction=Q,this},A.prototype.interpolation=function(Q){if(Q===void 0)Q=R8.Linear;return this._interpolationFunction=Q,this},A.prototype.chain=function(){var Q=[];for(var B=0;B<arguments.length;B++)Q[B]=arguments[B];return this._chainedTweens=Q,this},A.prototype.onStart=function(Q){return this._onStartCallback=Q,this},A.prototype.onEveryStart=function(Q){return this._onEveryStartCallback=Q,this},A.prototype.onUpdate=function(Q){return this._onUpdateCallback=Q,this},A.prototype.onRepeat=function(Q){return this._onRepeatCallback=Q,this},A.prototype.onComplete=function(Q){return this._onCompleteCallback=Q,this},A.prototype.onStop=function(Q){return this._onStopCallback=Q,this},A.prototype.update=function(Q,B){var C=this,J;if(Q===void 0)Q=HB();if(B===void 0)B=!0;if(this._isPaused)return!0;var I,q=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(Q>q)return!1;if(B)this.start(Q,!0)}if(this._goToEnd=!1,Q<this._startTime)return!0;if(this._onStartCallbackFired===!1){if(this._onStartCallback)this._onStartCallback(this._object);this._onStartCallbackFired=!0}if(this._onEveryStartCallbackFired===!1){if(this._onEveryStartCallback)this._onEveryStartCallback(this._object);this._onEveryStartCallbackFired=!0}var K=Q-this._startTime,Y=this._duration+((J=this._repeatDelayTime)!==null&&J!==void 0?J:this._delayTime),Z=this._duration+this._repeat*Y,H=function(){if(C._duration===0)return 1;if(K>Z)return 1;var E=Math.trunc(K/Y),w=K-E*Y,L=Math.min(w/C._duration,1);if(L===0&&K===C._duration)return 1;return L},G=H(),W=this._easingFunction(G);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,W),this._onUpdateCallback)this._onUpdateCallback(this._object,G);if(this._duration===0||K>=this._duration)if(this._repeat>0){var F=Math.min(Math.trunc((K-this._duration)/Y)+1,this._repeat);if(isFinite(this._repeat))this._repeat-=F;for(I in this._valuesStartRepeat){if(!this._yoyo&&typeof this._valuesEnd[I]==="string")this._valuesStartRepeat[I]=this._valuesStartRepeat[I]+parseFloat(this._valuesEnd[I]);if(this._yoyo)this._swapEndStartRepeatValues(I);this._valuesStart[I]=this._valuesStartRepeat[I]}if(this._yoyo)this._reversed=!this._reversed;if(this._startTime+=Y*F,this._onRepeatCallback)this._onRepeatCallback(this._object);return this._onEveryStartCallbackFired=!1,!0}else{if(this._onCompleteCallback)this._onCompleteCallback(this._object);for(var z=0,U=this._chainedTweens.length;z<U;z++)this._chainedTweens[z].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},A.prototype._updateProperties=function(Q,B,C,J){for(var I in C){if(B[I]===void 0)continue;var q=B[I]||0,K=C[I],Y=Array.isArray(Q[I]),Z=Array.isArray(K),H=!Y&&Z;if(H)Q[I]=this._interpolationFunction(K,J);else if(typeof K==="object"&&K)this._updateProperties(Q[I],q,K,J);else if(K=this._handleRelativeValue(q,K),typeof K==="number")Q[I]=q+(K-q)*J}},A.prototype._handleRelativeValue=function(Q,B){if(typeof B!=="string")return B;if(B.charAt(0)==="+"||B.charAt(0)==="-")return Q+parseFloat(B);return parseFloat(B)},A.prototype._swapEndStartRepeatValues=function(Q){var B=this._valuesStartRepeat[Q],C=this._valuesEnd[Q];if(typeof C==="string")this._valuesStartRepeat[Q]=this._valuesStartRepeat[Q]+parseFloat(C);else this._valuesStartRepeat[Q]=this._valuesEnd[Q];this._valuesEnd[Q]=B},A}();var Y90=oL.nextId,l4=BW,Z90=l4.getAll.bind(l4),H90=l4.removeAll.bind(l4),X90=l4.add.bind(l4),G90=l4.remove.bind(l4),aL=l4.update.bind(l4);var rL={type:"change"},CW={type:"start"},tL={type:"end"},Aq=new I6,eL=new y4,Tb=Math.cos(70*J6.DEG2RAD);class JW extends O2{constructor(A,Q){super();this.object=A,this.domElement=Q,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new p,this.cursor=new p,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=0.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:e6.ROTATE,MIDDLE:e6.DOLLY,RIGHT:e6.PAN},this.touches={ONE:A5.ROTATE,TWO:A5.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return q.phi},this.getAzimuthalAngle=function(){return q.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(b){b.addEventListener("keydown",i0),this._domElementKeyEvents=b},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",i0),this._domElementKeyEvents=null},this.saveState=function(){B.target0.copy(B.target),B.position0.copy(B.object.position),B.zoom0=B.object.zoom},this.reset=function(){B.target.copy(B.target0),B.object.position.copy(B.position0),B.object.zoom=B.zoom0,B.object.updateProjectionMatrix(),B.dispatchEvent(rL),B.update(),J=C.NONE},this.update=function(){let b=new p,q0=new n1().setFromUnitVectors(A.up,new p(0,1,0)),P0=q0.clone().invert(),m0=new p,c=new n1,D0=new p,r=2*Math.PI;return function E0(R0=null){let I1=B.object.position;if(b.copy(I1).sub(B.target),b.applyQuaternion(q0),q.setFromVector3(b),B.autoRotate&&J===C.NONE)_(P(R0));if(B.enableDamping)q.theta+=K.theta*B.dampingFactor,q.phi+=K.phi*B.dampingFactor;else q.theta+=K.theta,q.phi+=K.phi;let{minAzimuthAngle:D1,maxAzimuthAngle:y1}=B;if(isFinite(D1)&&isFinite(y1)){if(D1<-Math.PI)D1+=r;else if(D1>Math.PI)D1-=r;if(y1<-Math.PI)y1+=r;else if(y1>Math.PI)y1-=r;if(D1<=y1)q.theta=Math.max(D1,Math.min(y1,q.theta));else q.theta=q.theta>(D1+y1)/2?Math.max(D1,q.theta):Math.min(y1,q.theta)}if(q.phi=Math.max(B.minPolarAngle,Math.min(B.maxPolarAngle,q.phi)),q.makeSafe(),B.enableDamping===!0)B.target.addScaledVector(Z,B.dampingFactor);else B.target.add(Z);B.target.sub(B.cursor),B.target.clampLength(B.minTargetRadius,B.maxTargetRadius),B.target.add(B.cursor);let z2=!1;if(B.zoomToCursor&&D||B.object.isOrthographicCamera)q.radius=d(q.radius);else{let Q1=q.radius;q.radius=d(q.radius*Y),z2=Q1!=q.radius}if(b.setFromSpherical(q),b.applyQuaternion(P0),I1.copy(B.target).add(b),B.object.lookAt(B.target),B.enableDamping===!0)K.theta*=1-B.dampingFactor,K.phi*=1-B.dampingFactor,Z.multiplyScalar(1-B.dampingFactor);else K.set(0,0,0),Z.set(0,0,0);if(B.zoomToCursor&&D){let Q1=null;if(B.object.isPerspectiveCamera){let h2=b.length();Q1=d(h2*Y);let i2=h2-Q1;B.object.position.addScaledVector(X,i2),B.object.updateMatrixWorld(),z2=!!i2}else if(B.object.isOrthographicCamera){let h2=new p(V.x,V.y,0);h2.unproject(B.object);let i2=B.object.zoom;B.object.zoom=Math.max(B.minZoom,Math.min(B.maxZoom,B.object.zoom/Y)),B.object.updateProjectionMatrix(),z2=i2!==B.object.zoom;let FB=new p(V.x,V.y,0);FB.unproject(B.object),B.object.position.sub(FB).add(h2),B.object.updateMatrixWorld(),Q1=b.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),B.zoomToCursor=!1;if(Q1!==null)if(this.screenSpacePanning)B.target.set(0,0,-1).transformDirection(B.object.matrix).multiplyScalar(Q1).add(B.object.position);else if(Aq.origin.copy(B.object.position),Aq.direction.set(0,0,-1).transformDirection(B.object.matrix),Math.abs(B.object.up.dot(Aq.direction))<Tb)A.lookAt(B.target);else eL.setFromNormalAndCoplanarPoint(B.object.up,B.target),Aq.intersectPlane(eL,B.target)}else if(B.object.isOrthographicCamera){let Q1=B.object.zoom;if(B.object.zoom=Math.max(B.minZoom,Math.min(B.maxZoom,B.object.zoom/Y)),Q1!==B.object.zoom)B.object.updateProjectionMatrix(),z2=!0}if(Y=1,D=!1,z2||m0.distanceToSquared(B.object.position)>I||8*(1-c.dot(B.object.quaternion))>I||D0.distanceToSquared(B.target)>I)return B.dispatchEvent(rL),m0.copy(B.object.position),c.copy(B.object.quaternion),D0.copy(B.target),!0;return!1}}(),this.dispose=function(){if(B.domElement.removeEventListener("contextmenu",$0),B.domElement.removeEventListener("pointerdown",t0),B.domElement.removeEventListener("pointercancel",$1),B.domElement.removeEventListener("wheel",C0),B.domElement.removeEventListener("pointermove",h1),B.domElement.removeEventListener("pointerup",$1),B.domElement.getRootNode().removeEventListener("keydown",F0,{capture:!0}),B._domElementKeyEvents!==null)B._domElementKeyEvents.removeEventListener("keydown",i0),B._domElementKeyEvents=null};let B=this,C={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},J=C.NONE,I=0.000001,q=new u4,K=new u4,Y=1,Z=new p,H=new M0,G=new M0,W=new M0,F=new M0,z=new M0,U=new M0,E=new M0,w=new M0,L=new M0,X=new p,V=new M0,D=!1,N=[],R={},k=!1;function P(b){if(b!==null)return 2*Math.PI/60*B.autoRotateSpeed*b;else return 2*Math.PI/60/60*B.autoRotateSpeed}function $(b){let q0=Math.abs(b*0.01);return Math.pow(0.95,B.zoomSpeed*q0)}function _(b){K.theta-=b}function h(b){K.phi-=b}let S=function(){let b=new p;return function q0(P0,m0){b.setFromMatrixColumn(m0,0),b.multiplyScalar(-P0),Z.add(b)}}(),O=function(){let b=new p;return function q0(P0,m0){if(B.screenSpacePanning===!0)b.setFromMatrixColumn(m0,1);else b.setFromMatrixColumn(m0,0),b.crossVectors(B.object.up,b);b.multiplyScalar(P0),Z.add(b)}}(),M=function(){let b=new p;return function q0(P0,m0){let c=B.domElement;if(B.object.isPerspectiveCamera){let D0=B.object.position;b.copy(D0).sub(B.target);let r=b.length();r*=Math.tan(B.object.fov/2*Math.PI/180),S(2*P0*r/c.clientHeight,B.object.matrix),O(2*m0*r/c.clientHeight,B.object.matrix)}else if(B.object.isOrthographicCamera)S(P0*(B.object.right-B.object.left)/B.object.zoom/c.clientWidth,B.object.matrix),O(m0*(B.object.top-B.object.bottom)/B.object.zoom/c.clientHeight,B.object.matrix);else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),B.enablePan=!1}}();function y(b){if(B.object.isPerspectiveCamera||B.object.isOrthographicCamera)Y/=b;else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),B.enableZoom=!1}function u(b){if(B.object.isPerspectiveCamera||B.object.isOrthographicCamera)Y*=b;else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),B.enableZoom=!1}function T(b,q0){if(!B.zoomToCursor)return;D=!0;let P0=B.domElement.getBoundingClientRect(),m0=b-P0.left,c=q0-P0.top,D0=P0.width,r=P0.height;V.x=m0/D0*2-1,V.y=-(c/r)*2+1,X.set(V.x,V.y,1).unproject(B.object).sub(B.object.position).normalize()}function d(b){return Math.max(B.minDistance,Math.min(B.maxDistance,b))}function g(b){H.set(b.clientX,b.clientY)}function l(b){T(b.clientX,b.clientX),E.set(b.clientX,b.clientY)}function t(b){F.set(b.clientX,b.clientY)}function i(b){G.set(b.clientX,b.clientY),W.subVectors(G,H).multiplyScalar(B.rotateSpeed);let q0=B.domElement;_(2*Math.PI*W.x/q0.clientHeight),h(2*Math.PI*W.y/q0.clientHeight),H.copy(G),B.update()}function n(b){if(w.set(b.clientX,b.clientY),L.subVectors(w,E),L.y>0)y($(L.y));else if(L.y<0)u($(L.y));E.copy(w),B.update()}function J0(b){z.set(b.clientX,b.clientY),U.subVectors(z,F).multiplyScalar(B.panSpeed),M(U.x,U.y),F.copy(z),B.update()}function e(b){if(T(b.clientX,b.clientY),b.deltaY<0)u($(b.deltaY));else if(b.deltaY>0)y($(b.deltaY));B.update()}function H0(b){let q0=!1;switch(b.code){case B.keys.UP:if(b.ctrlKey||b.metaKey||b.shiftKey)h(2*Math.PI*B.rotateSpeed/B.domElement.clientHeight);else M(0,B.keyPanSpeed);q0=!0;break;case B.keys.BOTTOM:if(b.ctrlKey||b.metaKey||b.shiftKey)h(-2*Math.PI*B.rotateSpeed/B.domElement.clientHeight);else M(0,-B.keyPanSpeed);q0=!0;break;case B.keys.LEFT:if(b.ctrlKey||b.metaKey||b.shiftKey)_(2*Math.PI*B.rotateSpeed/B.domElement.clientHeight);else M(B.keyPanSpeed,0);q0=!0;break;case B.keys.RIGHT:if(b.ctrlKey||b.metaKey||b.shiftKey)_(-2*Math.PI*B.rotateSpeed/B.domElement.clientHeight);else M(-B.keyPanSpeed,0);q0=!0;break}if(q0)b.preventDefault(),B.update()}function X0(b){if(N.length===1)H.set(b.pageX,b.pageY);else{let q0=v0(b),P0=0.5*(b.pageX+q0.x),m0=0.5*(b.pageY+q0.y);H.set(P0,m0)}}function L0(b){if(N.length===1)F.set(b.pageX,b.pageY);else{let q0=v0(b),P0=0.5*(b.pageX+q0.x),m0=0.5*(b.pageY+q0.y);F.set(P0,m0)}}function T0(b){let q0=v0(b),P0=b.pageX-q0.x,m0=b.pageY-q0.y,c=Math.sqrt(P0*P0+m0*m0);E.set(0,c)}function s(b){if(B.enableZoom)T0(b);if(B.enablePan)L0(b)}function P1(b){if(B.enableZoom)T0(b);if(B.enableRotate)X0(b)}function Z0(b){if(N.length==1)G.set(b.pageX,b.pageY);else{let P0=v0(b),m0=0.5*(b.pageX+P0.x),c=0.5*(b.pageY+P0.y);G.set(m0,c)}W.subVectors(G,H).multiplyScalar(B.rotateSpeed);let q0=B.domElement;_(2*Math.PI*W.x/q0.clientHeight),h(2*Math.PI*W.y/q0.clientHeight),H.copy(G)}function G0(b){if(N.length===1)z.set(b.pageX,b.pageY);else{let q0=v0(b),P0=0.5*(b.pageX+q0.x),m0=0.5*(b.pageY+q0.y);z.set(P0,m0)}U.subVectors(z,F).multiplyScalar(B.panSpeed),M(U.x,U.y),F.copy(z)}function x0(b){let q0=v0(b),P0=b.pageX-q0.x,m0=b.pageY-q0.y,c=Math.sqrt(P0*P0+m0*m0);w.set(0,c),L.set(0,Math.pow(w.y/E.y,B.zoomSpeed)),y(L.y),E.copy(w);let D0=(b.pageX+q0.x)*0.5,r=(b.pageY+q0.y)*0.5;T(D0,r)}function J1(b){if(B.enableZoom)x0(b);if(B.enablePan)G0(b)}function S0(b){if(B.enableZoom)x0(b);if(B.enableRotate)Z0(b)}function t0(b){if(B.enabled===!1)return;if(N.length===0)B.domElement.setPointerCapture(b.pointerId),B.domElement.addEventListener("pointermove",h1),B.domElement.addEventListener("pointerup",$1);if(o1(b))return;if(z1(b),b.pointerType==="touch")g0(b);else m(b)}function h1(b){if(B.enabled===!1)return;if(b.pointerType==="touch")w0(b);else j(b)}function $1(b){switch(V0(b),N.length){case 0:B.domElement.releasePointerCapture(b.pointerId),B.domElement.removeEventListener("pointermove",h1),B.domElement.removeEventListener("pointerup",$1),B.dispatchEvent(tL),J=C.NONE;break;case 1:let q0=N[0],P0=R[q0];g0({pointerId:q0,pageX:P0.x,pageY:P0.y});break}}function m(b){let q0;switch(b.button){case 0:q0=B.mouseButtons.LEFT;break;case 1:q0=B.mouseButtons.MIDDLE;break;case 2:q0=B.mouseButtons.RIGHT;break;default:q0=-1}switch(q0){case e6.DOLLY:if(B.enableZoom===!1)return;l(b),J=C.DOLLY;break;case e6.ROTATE:if(b.ctrlKey||b.metaKey||b.shiftKey){if(B.enablePan===!1)return;t(b),J=C.PAN}else{if(B.enableRotate===!1)return;g(b),J=C.ROTATE}break;case e6.PAN:if(b.ctrlKey||b.metaKey||b.shiftKey){if(B.enableRotate===!1)return;g(b),J=C.ROTATE}else{if(B.enablePan===!1)return;t(b),J=C.PAN}break;default:J=C.NONE}if(J!==C.NONE)B.dispatchEvent(CW)}function j(b){switch(J){case C.ROTATE:if(B.enableRotate===!1)return;i(b);break;case C.DOLLY:if(B.enableZoom===!1)return;n(b);break;case C.PAN:if(B.enablePan===!1)return;J0(b);break}}function C0(b){if(B.enabled===!1||B.enableZoom===!1||J!==C.NONE)return;b.preventDefault(),B.dispatchEvent(CW),e(I0(b)),B.dispatchEvent(tL)}function I0(b){let q0=b.deltaMode,P0={clientX:b.clientX,clientY:b.clientY,deltaY:b.deltaY};switch(q0){case 1:P0.deltaY*=16;break;case 2:P0.deltaY*=100;break}if(b.ctrlKey&&!k)P0.deltaY*=10;return P0}function F0(b){if(b.key==="Control")k=!0,B.domElement.getRootNode().addEventListener("keyup",Y0,{passive:!0,capture:!0})}function Y0(b){if(b.key==="Control")k=!1,B.domElement.getRootNode().removeEventListener("keyup",Y0,{passive:!0,capture:!0})}function i0(b){if(B.enabled===!1||B.enablePan===!1)return;H0(b)}function g0(b){switch(c0(b),N.length){case 1:switch(B.touches.ONE){case A5.ROTATE:if(B.enableRotate===!1)return;X0(b),J=C.TOUCH_ROTATE;break;case A5.PAN:if(B.enablePan===!1)return;L0(b),J=C.TOUCH_PAN;break;default:J=C.NONE}break;case 2:switch(B.touches.TWO){case A5.DOLLY_PAN:if(B.enableZoom===!1&&B.enablePan===!1)return;s(b),J=C.TOUCH_DOLLY_PAN;break;case A5.DOLLY_ROTATE:if(B.enableZoom===!1&&B.enableRotate===!1)return;P1(b),J=C.TOUCH_DOLLY_ROTATE;break;default:J=C.NONE}break;default:J=C.NONE}if(J!==C.NONE)B.dispatchEvent(CW)}function w0(b){switch(c0(b),J){case C.TOUCH_ROTATE:if(B.enableRotate===!1)return;Z0(b),B.update();break;case C.TOUCH_PAN:if(B.enablePan===!1)return;G0(b),B.update();break;case C.TOUCH_DOLLY_PAN:if(B.enableZoom===!1&&B.enablePan===!1)return;J1(b),B.update();break;case C.TOUCH_DOLLY_ROTATE:if(B.enableZoom===!1&&B.enableRotate===!1)return;S0(b),B.update();break;default:J=C.NONE}}function $0(b){if(B.enabled===!1)return;b.preventDefault()}function z1(b){N.push(b.pointerId)}function V0(b){delete R[b.pointerId];for(let q0=0;q0<N.length;q0++)if(N[q0]==b.pointerId){N.splice(q0,1);return}}function o1(b){for(let q0=0;q0<N.length;q0++)if(N[q0]==b.pointerId)return!0;return!1}function c0(b){let q0=R[b.pointerId];if(q0===void 0)q0=new M0,R[b.pointerId]=q0;q0.set(b.pageX,b.pageY)}function v0(b){let q0=b.pointerId===N[0]?N[1]:N[0];return R[q0]}B.domElement.addEventListener("contextmenu",$0),B.domElement.addEventListener("pointerdown",t0),B.domElement.addEventListener("pointercancel",$1),B.domElement.addEventListener("wheel",C0,{passive:!1}),B.domElement.getRootNode().addEventListener("keydown",F0,{passive:!0,capture:!0}),this.update()}}var AM=new p,jb=new n1,QM=new p;class XB extends L1{constructor(A=document.createElement("div")){super();this.isCSS3DObject=!0,this.element=A,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(Q){if(Q.element instanceof Element&&Q.element.parentNode!==null)Q.element.parentNode.removeChild(Q.element)})})}copy(A,Q){return super.copy(A,Q),this.element=A.element.cloneNode(!0),this}}var s4=new h0,Sb=new h0;class IW{constructor(A={}){let Q=this,B,C,J,I,q={camera:{style:""},objects:new WeakMap},K=A.element!==void 0?A.element:document.createElement("div");K.style.overflow="hidden",this.domElement=K;let Y=document.createElement("div");Y.style.transformOrigin="0 0",Y.style.pointerEvents="none",K.appendChild(Y);let Z=document.createElement("div");Z.style.transformStyle="preserve-3d",Y.appendChild(Z),this.getSize=function(){return{width:B,height:C}},this.render=function(z,U){let E=U.projectionMatrix.elements[5]*I;if(U.view&&U.view.enabled)Y.style.transform=`translate( ${-U.view.offsetX*(B/U.view.width)}px, ${-U.view.offsetY*(C/U.view.height)}px )`,Y.style.transform+=`scale( ${U.view.fullWidth/U.view.width}, ${U.view.fullHeight/U.view.height} )`;else Y.style.transform="";if(z.matrixWorldAutoUpdate===!0)z.updateMatrixWorld();if(U.parent===null&&U.matrixWorldAutoUpdate===!0)U.updateMatrixWorld();let w,L;if(U.isOrthographicCamera)w=-(U.right+U.left)/2,L=(U.top+U.bottom)/2;let X=U.view&&U.view.enabled?U.view.height/U.view.fullHeight:1,V=U.isOrthographicCamera?`scale( ${X} )scale(`+E+")translate("+H(w)+"px,"+H(L)+"px)"+G(U.matrixWorldInverse):`scale( ${X} )translateZ(`+E+"px)"+G(U.matrixWorldInverse),N=(U.isPerspectiveCamera?"perspective("+E+"px) ":"")+V+"translate("+J+"px,"+I+"px)";if(q.camera.style!==N)Z.style.transform=N,q.camera.style=N;F(z,z,U,V)},this.setSize=function(z,U){B=z,C=U,J=B/2,I=C/2,K.style.width=z+"px",K.style.height=U+"px",Y.style.width=z+"px",Y.style.height=U+"px",Z.style.width=z+"px",Z.style.height=U+"px"};function H(z){return Math.abs(z)<0.0000000001?0:z}function G(z){let U=z.elements;return"matrix3d("+H(U[0])+","+H(-U[1])+","+H(U[2])+","+H(U[3])+","+H(U[4])+","+H(-U[5])+","+H(U[6])+","+H(U[7])+","+H(U[8])+","+H(-U[9])+","+H(U[10])+","+H(U[11])+","+H(U[12])+","+H(-U[13])+","+H(U[14])+","+H(U[15])+")"}function W(z){let U=z.elements;return"translate(-50%,-50%)"+("matrix3d("+H(U[0])+","+H(U[1])+","+H(U[2])+","+H(U[3])+","+H(-U[4])+","+H(-U[5])+","+H(-U[6])+","+H(-U[7])+","+H(U[8])+","+H(U[9])+","+H(U[10])+","+H(U[11])+","+H(U[12])+","+H(U[13])+","+H(U[14])+","+H(U[15])+")")}function F(z,U,E,w){if(z.isCSS3DObject){let L=z.visible===!0&&z.layers.test(E.layers)===!0;if(z.element.style.display=L===!0?"":"none",L===!0){z.onBeforeRender(Q,U,E);let X;if(z.isCSS3DSprite){if(s4.copy(E.matrixWorldInverse),s4.transpose(),z.rotation2D!==0)s4.multiply(Sb.makeRotationZ(z.rotation2D));z.matrixWorld.decompose(AM,jb,QM),s4.setPosition(AM),s4.scale(QM),s4.elements[3]=0,s4.elements[7]=0,s4.elements[11]=0,s4.elements[15]=1,X=W(s4)}else X=W(z.matrixWorld);let V=z.element,D=q.objects.get(z);if(D===void 0||D.style!==X){V.style.transform=X;let N={style:X};q.objects.set(z,N)}if(V.parentNode!==Z)Z.appendChild(V);z.onAfterRender(Q,U,E)}}for(let L=0,X=z.children.length;L<X;L++)F(z.children[L],U,E,w)}}}var U1={professional:{label:"Professional",legacyRoomId:0,initialFov:45,loadingImage:"https://pc-rooms.pointandplace.com/assets/professional-menu.jpg",backgroundImages:["https://pc-rooms.pointandplace.com/files/assets/84310623/1/Right.jpg?t=8dcad65d267cbbbd31daa2f7d667fa0c","https://pc-rooms.pointandplace.com/files/assets/84310625/1/Left.jpg?t=023f9b5bd2bf5470d142db9c71cf2d8d","https://pc-rooms.pointandplace.com/files/assets/84310624/1/Top.jpg?t=3e0b98215e92f7e22cc9d6496c4698a5","https://pc-rooms.pointandplace.com/files/assets/84310626/1/Bottom.jpg?t=43b67dbbfc2782fd12899f77a7a15e19","https://pc-rooms.pointandplace.com/files/assets/84310627/1/Back.jpg?t=5604402f4ff5f2f7972468e6a8626c4b","https://pc-rooms.pointandplace.com/files/assets/84310622/1/Front.jpg?t=07e0fb4dbadb7532f47bc5a56d99fa3d"],hotspots:{monitor:{legacyAreaId:0,position:{x:0,y:33,z:-1000}},laptop:{legacyAreaId:1,position:{x:487,y:-64,z:-1000}},mouse:{legacyAreaId:2,position:{x:273,y:-177,z:-1000}},keyboard:{legacyAreaId:3,position:{x:0,y:-175,z:-1000}},headphones:{legacyAreaId:4,position:{x:-740,y:-242,z:-1000}},accessory:{legacyAreaId:5,position:{x:-585,y:-125,z:-1000}}},decors:{shelf:{hotspot:{x:1,y:1,z:1},position:{x:0,y:0,z:-250},images:["https://pc-rooms.pointandplace.com/files/assets/87387696/1/area0decor0.png?t=c0eed7a7e0cc13c5e512cdba5755af8f","https://pc-rooms.pointandplace.com/files/assets/87387701/1/Area0decor1.png?t=22789adb6a608aab1e67fce90e5d5fb1"]},corner:{hotspot:{x:1,y:1,z:1},position:{x:250,y:0,z:0},images:["https://pc-rooms.pointandplace.com/files/assets/87387700/1/Area1decor0.png?t=ce7a6b8f141632e85effc35097801bf9","https://pc-rooms.pointandplace.com/files/assets/87387697/1/Area1decor1.png?t=63d5b59918569c260e3e8336aba80921"]},backwall:{hotspot:{x:1,y:1,z:1},position:{x:0,y:0,z:250},images:["https://pc-rooms.pointandplace.com/files/assets/87387695/1/Area2decor0.png?t=f90f1fb20e367a8a766156e0ab4021e2","https://pc-rooms.pointandplace.com/files/assets/87387699/1/Area2decor1.png?t=bbdfe992b1a73ad206d5466cd0e9f0c5","https://pc-rooms.pointandplace.com/files/assets/87387698/1/Area2decor2.png?t=d5ae52f6d7e4dc2dc6a11838d2d17eab"]}}},gaming:{label:"Gaming",legacyRoomId:1,initialFov:45,loadingImage:"https://pc-rooms.pointandplace.com/assets/gaming-menu.jpg",backgroundImages:["https://pc-rooms.pointandplace.com/files/assets/86366038/1/Right.jpg?t=ee4bc66b1ba5a671ea2990806ef01ded","https://pc-rooms.pointandplace.com/files/assets/112144554/1/Left.png?t=b8f60c93127a534ee9dab2e7d327fccf","https://pc-rooms.pointandplace.com/files/assets/86366037/1/Top.jpg?t=3b69fca67143fba22b4494359914c306","https://pc-rooms.pointandplace.com/files/assets/86366033/1/Bottom.jpg?t=f4a2d7d59423eee9f6d9fcd41327afdc","https://pc-rooms.pointandplace.com/files/assets/86366036/1/Front.jpg?t=d09dc6e51b2c37a33b204690a7cc9bbc","https://pc-rooms.pointandplace.com/files/assets/86366035/1/Back.jpg?t=1062a2f217537f351561913939f1374c"],hotspots:{monitor:{legacyAreaId:0,position:{x:0,y:33,z:-1000}},laptop:{legacyAreaId:1,position:{x:487,y:-64,z:-1000}},mouse:{legacyAreaId:2,position:{x:273,y:-177,z:-1000}},keyboard:{legacyAreaId:3,position:{x:0,y:-175,z:-1000}},headphones:{legacyAreaId:4,position:{x:-740,y:-242,z:-1000}},accessory:{legacyAreaId:5,position:{x:-505,y:-125,z:-1000}}},decors:{posters:{hotspot:{x:1,y:1,z:1},position:{x:250,y:0,z:0},images:["https://pc-rooms.pointandplace.com/files/assets/109815377/1/Area1Decor0.png?t=141786bff59382971e7e5dc155a5ffc2","https://pc-rooms.pointandplace.com/files/assets/109815378/1/Area1Decor1.png?t=96a8e9ae27bdf2dc825d1157f53c2d36"]},clock:{hotspot:{x:1,y:1,z:1},position:{x:0,y:0,z:250},images:["https://pc-rooms.pointandplace.com/files/assets/109692605/1/Area2Decor0.png?t=e1ea18da5b4af48a22589fdb66813979","https://pc-rooms.pointandplace.com/files/assets/109692611/1/Area2Decor1.png?t=ab89ee701520f3e74eed17187060013c","https://pc-rooms.pointandplace.com/files/assets/109692608/1/Area2Decor2.png?t=e30b9efec0c03f6f188607742e221bb6","https://pc-rooms.pointandplace.com/files/assets/109692606/1/Area2Decor3.png?t=d379eb2a27c51dc90bc3dbbb83fe1e52"]},statue:{hotspot:{x:1,y:1,z:1},position:{x:-250,y:0,z:0},images:["https://pc-rooms.pointandplace.com/files/assets/109692607/1/Area0Decor0.png?t=71304db438d4aaeaa5635d27e8730bd6","https://pc-rooms.pointandplace.com/files/assets/109692610/1/Area0Decor1.png?t=01d404cbea8bf4b71aebd17af0ed7c56","https://pc-rooms.pointandplace.com/files/assets/109692609/1/Area0Decor2.png?t=995d0a3727e66b5c08029a6f35484da2"]}}},student:{label:"Student",legacyRoomId:2,initialFov:45,initialCameraDirection:{x:0,y:-150,z:-1000},loadingImage:"https://pc-rooms.pointandplace.com/assets/student-menu.jpg",backgroundImages:["https://pc-rooms.pointandplace.com/files/assets/141359215/1/Right.jpg?t=d36a0ad9fc0eb6f735e99043e0ed9397","https://pc-rooms.pointandplace.com/files/assets/141359211/1/Left.jpg?t=332736d5234864fd6068c3235ace1eaa","https://pc-rooms.pointandplace.com/files/assets/141359216/1/Top.jpg?t=6659c8ef9b5a9539f67b3549aa305ad7","https://pc-rooms.pointandplace.com/files/assets/141359213/1/Bottom.jpg?t=138ca9ab5857c8defc9427f540d69200","https://pc-rooms.pointandplace.com/files/assets/141359214/1/front.jpg?t=ae46883d0b5c23a5e4e97c838f0ad905","https://pc-rooms.pointandplace.com/files/assets/141359212/1/Back.jpg?t=b693f01ac87f19999d831424233c41a1"],hotspots:{monitor:{legacyAreaId:0,position:{x:0,y:-80,z:-1000}},laptop:{legacyAreaId:1,position:{x:-500,y:-300,z:-1000}},mouse:{legacyAreaId:2,position:{x:230,y:-355,z:-1000}},keyboard:{legacyAreaId:3,position:{x:0,y:-370,z:-1000}},headphones:{legacyAreaId:4,position:{x:530,y:-150,z:-1000}}},decors:{door:{hotspot:{x:1,y:1,z:1},position:{x:250,y:0,z:0},images:["https://pc-rooms.pointandplace.com/files/assets/140810848/1/Area0Decor0.png?t=ed5e3e17ec66bea49c55091915903d22","https://pc-rooms.pointandplace.com/files/assets/140810847/1/Area0Decor1.png?t=f4a82be7d2b52a6bbe19a47df825796c"]},backWall:{hotspot:{x:1,y:1,z:1},position:{x:0,y:0,z:250},images:["https://pc-rooms.pointandplace.com/files/assets/140810849/1/Area1Decor0.png?t=e0ac5eabcd4e5acf21ecabb85b920301","https://pc-rooms.pointandplace.com/files/assets/140810850/1/Area1Decor1.png?t=cb350a1318233d5245d28e26414f10cb"]},aboveDesk:{hotspot:{x:1,y:1,z:1},position:{x:0,y:0,z:-250},images:["https://pc-rooms.pointandplace.com/files/assets/140810852/1/Area2Decor0.png?t=b3bfff8fc4788d56a8f64396f3f2e412","https://pc-rooms.pointandplace.com/files/assets/140810851/1/Area2Decor1.png?t=a5abf5bdc1d564fc8dbd4403122054c7"]}}},remote:{label:"Remote",legacyRoomId:3,initialFov:45,initialCameraDirection:{x:0,y:-300,z:-1000},loadingImage:"https://pc-rooms.pointandplace.com/assets/remote-menu.jpg",backgroundImages:["https://pc-rooms.pointandplace.com/files/assets/141356898/1/Right.jpg?t=577be8f6144eb127c3f746241bdf012f","https://pc-rooms.pointandplace.com/files/assets/141356896/1/Left.jpg?t=8489c60feb0787f5d46c65e0947cc2c8","https://pc-rooms.pointandplace.com/files/assets/141356895/1/Top.jpg?t=ecd045b4ca1a3dd4fedfe82e20b63a5d","https://pc-rooms.pointandplace.com/files/assets/141356899/1/Bottom.jpg?t=b379b880cdb9981f0b26defd8a11b5c6","https://pc-rooms.pointandplace.com/files/assets/141356897/1/Front.jpg?t=d95989144733fa34b9b84a6590776b81","https://pc-rooms.pointandplace.com/files/assets/141356900/1/Back.jpg?t=56b8f186b42ce9df6621b87d0a79b760"],hotspots:{laptop:{legacyAreaId:0,position:{x:-80,y:-350,z:-1000}},headphones:{legacyAreaId:2,position:{x:-450,y:-485,z:-1000}},mouse:{legacyAreaId:3,position:{x:330,y:-550,z:-1000}},accessory:{legacyAreaId:1,position:{x:650,y:-255,z:-1000}}},decors:{logo:{hotspot:{x:1,y:1,z:1},position:{x:-250,y:0,z:0},images:["https://pc-rooms.pointandplace.com/files/assets/140768138/1/Area0Decor0.png?t=34aabd1646855c4230acddfd8d5c9340","https://pc-rooms.pointandplace.com/files/assets/140768139/1/Area0Decor1.png?t=19bc1343694cb83b78f06cbd65f5d558"]},counter:{hotspot:{x:1,y:1,z:1},position:{x:250,y:0,z:0},images:["https://pc-rooms.pointandplace.com/files/assets/140768185/1/Area1Decor0.png?t=e6feb761331f23c7c5a581e6a629f2ee","https://pc-rooms.pointandplace.com/files/assets/140768186/1/Area1Decor1.png?t=12d85bff54344f5430abd45aedb3672a"]}}},creative:{label:"Creative",legacyRoomId:4,initialFov:45,initialCameraDirection:{x:0,y:-150,z:-1000},loadingImage:"https://pc-rooms.pointandplace.com/assets/creative-menu.jpg",backgroundImages:["https://pc-rooms.pointandplace.com/files/assets/141358782/1/Right.jpg?t=c29f5547bb40db42a33076f7127f4a7c","https://pc-rooms.pointandplace.com/files/assets/141358779/1/Left.jpg?t=b052c391b976dc53efd9f9c2302e8395","https://pc-rooms.pointandplace.com/files/assets/141358780/1/Top.jpg?t=dce9a6fa147fddcd20669c9bb17b8153","https://pc-rooms.pointandplace.com/files/assets/141358781/1/Bottom.jpg?t=85719ce6c8a478118b6b6e3fc97a7e01","https://pc-rooms.pointandplace.com/files/assets/141358784/1/Front.jpg?t=0475a5fd8607cfae78e80a090b4e1c37","https://pc-rooms.pointandplace.com/files/assets/141358783/1/Back.jpg?t=bfd5e49dd653ef0aba7c72ea6c1e61d7"],hotspots:{monitor:{legacyAreaId:0,position:{x:-5,y:-33,z:-1000}},laptop:{legacyAreaId:1,position:{x:-60,y:-440,z:-1000}},mouse:{legacyAreaId:2,position:{x:250,y:-450,z:-1000}},storage:{legacyAreaId:3,position:{x:-600,y:-265,z:-1000}},headphones:{legacyAreaId:4,position:{x:-425,y:-400,z:-1000}}},decors:{backwall:{hotspot:{x:1,y:1,z:1},position:{x:0,y:0,z:250},images:["https://pc-rooms.pointandplace.com/files/assets/140887797/1/Area0Decor0.png?t=58f3ca86535ae861b85ca97d7a8869d2","https://pc-rooms.pointandplace.com/files/assets/140887800/1/Area0Decor1.png?t=a2993fc7bd95ffbe45d802f709ddf64b"]},rightwall:{hotspot:{x:1,y:1,z:1},position:{x:250,y:0,z:0},images:["https://pc-rooms.pointandplace.com/files/assets/140887796/1/Area1Decor0.png?t=24b314aa384af1eaec68900175e6fdff","https://pc-rooms.pointandplace.com/files/assets/140887795/1/Area1Decor1.png?t=68745f06cbe3ad392c2e461245cdc40f"]},leftwall:{hotspot:{x:1,y:1,z:1},position:{x:-250,y:0,z:0},images:["https://pc-rooms.pointandplace.com/files/assets/140887799/1/Area2Decor0.png?t=8229bb343f7a4348eaf0214fce20e9e7","https://pc-rooms.pointandplace.com/files/assets/140887798/1/Area2Decor1.png?t=f733722613195a54b595d7e770f880e3"]}}}};class GB extends M1{hasLookedAtActualAvailableRooms=!1;handleTouchStart(A){this.touchStartX=A.touches[0].clientX}handleTouchMove(A){this.touchEndX=A.touches[0].clientX}handleTouchEnd(){if(!this.touchStartX||!this.touchEndX)return;let A=this.touchStartX-this.touchEndX,Q=50;if(Math.abs(A)>Q)if(A>0)this.mobileRoomMenuPosition=Math.min(this.mobileRoomMenuPosition+1,this.actualAvailableRooms.length-1);else this.mobileRoomMenuPosition=Math.max(this.mobileRoomMenuPosition-1,0);this.touchStartX=null,this.touchEndX=null}deploymentConfig=null;hasFirstClick=!1;currentProductInfoIdx=null;minCameraFov=27;maxCameraFov=63;glScene=void 0;glRenderer=void 0;cssScene=void 0;cssRenderer=void 0;camera=void 0;controls=void 0;startHoldingStateTimer=null;holdingStateCycleTimer=null;holdingMessages=[];cameraDirectionTween=void 0;textureCache={};static styles=[r1,U0`
      .z-1 {
        z-index: 1;
      }
      .z-2 {
        z-index: 2;
      }
      .z-3 {
        z-index: 3;
      }
      .z-4 {
        z-index: 4;
      }
      #eky-container > div:nth-child(1) > div > div {
        position: absolute;
        z-index: 1;
      }
    `];constructor(A,Q,B,C,J,I,q,K,Y){super(A,Q,B,C,J,I,q,K,Y,!0,"pc-rooms");this.availableRooms=[];this.currentRoom=null;this.isFullscreen=!1;this.fov=45;this.showMenu=!1;this.loadingSubComponents=!1;this.selectedHotspot=null;this.showProductOptions=null;this.currentProductOptions=[];this.textureMeshes={};this.decorMeshes={};this.loadingRoom=!1;this.showLoadingScreen=!1;this.inHoldingState=!1;this.showProductInfo=null;this.mobileRoomMenuPosition=0;this.inCart=[];this.hasUpdatedAvailableRooms=!1;this.actualAvailableRooms=[];this.rtl=!1;this.touchStartX=null;this.touchEndX=null}async preloadAssets(){let A=new Image;A.src=U1[this.currentRoom].loadingImage;let Q=this.EKControlObject._config?.deployment,B=this.EKControlObject._config?.language,C=await fetch(`https://pc-rooms.pointandplace.com/v3/configs/${Q}-${B?B.split("_")[0]:"en"}.json`);if(this.deploymentConfig=await C.json(),!this.hasUpdatedAvailableRooms&&this.EKControlObject._config?.deployment!=="aef4d3e1-04fd-436d-8fa1-a14a35f369db"){let H=[];this.deploymentConfig.map((W)=>{W.room.areas.map((F)=>{F.area.assets.map((z)=>{if(z.arid===this.EKResolvedData["datarequirement-pcrooms"].arid){if(!H.includes(W.room.id))H.push(parseInt(W.room.id))}})})});let G=[];if(this.EKResolvedData["datarequirement-pcrooms"].arid)H.map((W)=>{G.push(this.availableRooms[W])});else G=this.availableRooms;this.availableRooms=G,this.actualAvailableRooms=G,this.hasLookedAtActualAvailableRooms=!0,this.currentRoom=this.availableRooms[0],this.hasUpdatedAvailableRooms=!0}if(this.EKControlObject._config?.deployment==="aef4d3e1-04fd-436d-8fa1-a14a35f369db")this.actualAvailableRooms=this.availableRooms;this.actualAvailableRooms=[...new Set(this.actualAvailableRooms)];let J=U1[this.currentRoom];if(!J)throw new Error("Invalid room provided");let I=this.deploymentConfig.find((H)=>parseInt(H.room.id)===J.legacyRoomId),q=["https://pc-rooms.pointandplace.com/assets/creative-menu.jpg","https://pc-rooms.pointandplace.com/assets/gaming-menu.jpg","https://pc-rooms.pointandplace.com/assets/icons/cart-remove.svg","https://pc-rooms.pointandplace.com/assets/icons/cart.svg","https://pc-rooms.pointandplace.com/assets/icons/chevron-blue.svg","https://pc-rooms.pointandplace.com/assets/icons/chevron-down.svg","https://pc-rooms.pointandplace.com/assets/icons/chevron-up.svg","https://pc-rooms.pointandplace.com/assets/icons/close-white.svg","https://pc-rooms.pointandplace.com/assets/icons/close.svg","https://pc-rooms.pointandplace.com/assets/icons/cube.svg","https://pc-rooms.pointandplace.com/assets/icons/enter-fullscreen.svg","https://pc-rooms.pointandplace.com/assets/icons/exit-fullscreen.svg","https://pc-rooms.pointandplace.com/assets/icons/info.svg","https://pc-rooms.pointandplace.com/assets/icons/zoom-in.svg","https://pc-rooms.pointandplace.com/assets/icons/zoom-out.svg","https://pc-rooms.pointandplace.com/assets/professional-menu.jpg","https://pc-rooms.pointandplace.com/assets/remote-menu.jpg","https://pc-rooms.pointandplace.com/assets/student-menu.jpg"],K=[...J.backgroundImages];Object.entries(J.decors).map(([H,G])=>{K.push(...G.images)}),Object.entries(J.hotspots).map(([H,G])=>{let W=I?.room.areas.find((F)=>parseInt(F.area.id)===G.legacyAreaId);K.push(...W?.area.assets.map((F)=>`https://pc-rooms.pointandplace.com/v3/visual-assets/textures/${this.currentRoom==="creative"?"editor":this.currentRoom}/${F.arid}.png`)),q.push(...W?.area.assets.map((F)=>`https://pc-rooms.pointandplace.com/v3/visual-assets/thumbnails/${F.arid}.png`))});let Y=q.map((H)=>{return new Promise((G,W)=>{let F=new Image;F.src=H,F.onload=()=>{G(H)},F.onerror=()=>{console.error(H),W(H)}})}),Z=K.map((H)=>{return new Promise((G,W)=>{new Z5().load(H,(z)=>{z.colorSpace=g1,this.textureCache[encodeURIComponent(H)]=z,G(H)},void 0,()=>{console.error(H),W(H)})})});await Promise.all([...Y,...Z])}setupScenes(){this.glScene=new W2,this.cssScene=new W2;let A=U1[this.currentRoom].backgroundImages,Q=new KQ(A.map((B)=>{let C=this.textureCache[encodeURIComponent(B)];return C.colorSpace=g1,C.image}));Q.colorSpace=g1,Q.needsUpdate=!0,this.glScene.background=Q}setupRenderers(){this.glRenderer=new g4,this.glRenderer.setPixelRatio(window.devicePixelRatio),this.glRenderer.setSize(this.ekyContainer.clientWidth,this.ekyContainer.clientHeight),this.glRenderer.setClearColor(16777215,1),this.ekyContainer.insertBefore(this.glRenderer.domElement,this.ekyContainer.firstChild),this.cssRenderer=new IW,this.cssRenderer.setSize(this.ekyContainer.clientWidth,this.ekyContainer.clientHeight),this.cssRenderer.domElement.style.position="absolute",this.cssRenderer.domElement.style.top="0",this.cssRenderer.domElement.style.pointerEvents="none",this.ekyContainer.insertBefore(this.cssRenderer.domElement,this.ekyContainer.firstChild)}setupCameraAndControls(){this.camera=new b1(U1[this.currentRoom].initialFov,this.ekyContainer.clientWidth/this.ekyContainer.clientHeight,1,1000),this.camera.position.set(0,0,0),this.controls=new JW(this.camera,this.glRenderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=0.1,this.controls.rotateSpeed*=-0.3,this.controls.enablePan=!1,this.controls.enableZoom=!1,this.handleCameraDirectionChange(U1[this.currentRoom].initialCameraDirection??{x:0,y:0,z:-1000},0)}setupDecors(){let A=U1[this.currentRoom];Object.entries(A.decors).map(([Q,B])=>{this.cycleDecor(Q)})}setupTextures(){let A=U1[this.currentRoom],Q=this.deploymentConfig.find((B)=>parseInt(B.room.id)===A.legacyRoomId);Object.entries(A.hotspots).map(([B,C])=>{let I=Q?.room.areas.find((q)=>parseInt(q.area.id)===C.legacyAreaId)?.area.assets;if(I&&I.length){let q=I.find((K)=>K.arid===this.EKResolvedData["datarequirement-pcrooms"].arid);this.changeTexture(B,q?q.arid:I[0].arid,0)}})}setupHotspots(){Object.entries(U1[this.currentRoom].hotspots).forEach(([A,Q])=>{if(A==="laptop"&&this.EKProps.hideLaptopHotspot)return;let B=!0;if(this.deploymentConfig&&this.currentRoom){let Y={creative:{monitor:"0",laptop:"1",mouse:"2",storage:"3",headphones:"4"},professional:{monitor:"0",laptop:"1",mouse:"2",keyboard:"3",headphones:"4",accessory:"5"},gaming:{monitor:"0",laptop:"1",mouse:"2",keyboard:"3",headphones:"4",accessory:"5"},student:{monitor:"0",laptop:"1",mouse:"2",keyboard:"3",headphones:"4"},remote:{laptop:"0",accessory:"1",headphones:"2",mouse:"3"}},Z={professional:"0",gaming:"1",student:"2",remote:"3",creative:"4"};this.deploymentConfig.forEach((H)=>{if(H.room.id===Z[this.currentRoom])H.room.areas.forEach((G)=>{let W=Y[this.currentRoom][A];if(G.area.id===W&&Array.isArray(G.area.assets)&&G.area.assets.length===0)B=!1})})}if(!B)return;let C=Q.position,J=document.createElement("button");J.classList.add("w-8","h-8");let I=document.createElement("div");I.classList.add("w-8","h-8","rounded-full","absolute","top-0","left-0","border-2","border-[#5ac4f8]","animate-hotspot");let q=document.createElement("div");q.classList.add("h-8","w-8","bg-white","rounded-full","absolute","top-0","left-0"),J.appendChild(I),J.appendChild(q);let K=new XB(J);K.position.x=C.x,K.position.y=C.y,K.position.z=C.z,K.lookAt(0,0,0),this.cssScene.add(K),J.addEventListener("click",(Y)=>{this.handleSelectHotspot(K),this.handleShowProductOptions(A)})})}async loadRoom(A,Q=!1){if(A===this.currentRoom)return;this.showMenu=!1,this.unloadRoom(),this.currentRoom=A,this.loadingRoom=!0,await this.preloadAssets(),this.setupScenes(),this.setupRenderers(),this.setupCameraAndControls(),this.setupDecors(),this.setupTextures(),this.setupHotspots();let B=this;(function C(){requestAnimationFrame(C),B.controls.update(),aL(),B.glRenderer.render(B.glScene,B.camera),B.cssRenderer.render(B.cssScene,B.camera)})(),this.logEventLegacy(Q?"auto-click":"click",`start-room-${U1[this.currentRoom].legacyRoomId}-${this.elementIsDirectlyOnPage()?"embed":"button"}`),this.logEventLegacy("delivery",`room-${U1[this.currentRoom].legacyRoomId}-app-start-${this.elementIsDirectlyOnPage()?"embed":"button"}`),this.triggerWOTWCommonInteraction("click",`start-room-${this.currentRoom}-${Q?"auto":""}`),this.loadingRoom=!1,this.startHoldingState()}unloadRoom(){if(this.stopHoldingState(),this.glRenderer&&this.glRenderer.domElement)this.glRenderer.domElement.remove();if(this.cssRenderer&&this.cssRenderer.domElement)this.cssRenderer.domElement.remove();this.selectedHotspot=null,this.showProductOptions=null,this.currentProductOptions=[],this.decorMeshes={},this.textureMeshes={}}enterFullscreen(){if(this.isFullscreen=!0,!document.fullscreenElement)this.ekyContainer.requestFullscreen().catch(console.log)}exitFullscreen(){if(this.isFullscreen=!1,document.fullscreenElement)document.exitFullscreen().catch(console.log)}handleResize(){if(this.camera&&this.glRenderer&&this.cssRenderer)this.camera.aspect=this.ekyContainer.clientWidth/this.ekyContainer.clientHeight,this.camera.updateProjectionMatrix(),this.glRenderer.setSize(this.ekyContainer.clientWidth,this.ekyContainer.clientHeight),this.cssRenderer.setSize(this.ekyContainer.clientWidth,this.ekyContainer.clientHeight)}handleFovChange(A,Q=500,B=cA.Linear.None){if(!this.camera)return;let C=new O5(this.camera).to({fov:A},Q).easing(B).onUpdate(()=>{this.camera.updateProjectionMatrix()}).start()}handleCameraDirectionChange(A,Q=500,B=cA.Linear.None){if(this.cameraDirectionTween)this.cameraDirectionTween.stop();let C=new p().copy(this.camera.position),J=new p(A.x*-1/1000,A.y*-1/1000,A.z*-1/1000);this.controls.enabled=!1,this.cameraDirectionTween=new O5(C).to(J,Q).easing(B).onUpdate(()=>{this.camera.position.copy(C),this.camera.lookAt(this.controls.target)}).onComplete(()=>{this.camera.position.copy(J),this.camera.lookAt(this.controls.target),this.controls.enabled=!0}).start()}changeTexture(A,Q,B=1000){if(this.textureMeshes[A]?.arid===Q)return;if(this.textureMeshes[A]?.mesh){let q=new O5(this.textureMeshes[A].mesh.material).to({opacity:0},1000).easing(cA.Linear.None).start()}let C=this.textureCache[encodeURIComponent(`https://pc-rooms.pointandplace.com/v3/visual-assets/textures/${this.currentRoom==="creative"?"editor":this.currentRoom}/${Q}.png`)],J=new A1(new P2(500,500),new t1({map:C,transparent:!0}));J.material.opacity=0,J.position.z=-249,J.position.y=0.2,this.glScene.add(J),this.textureMeshes={...this.textureMeshes,[A]:{arid:Q,mesh:J}};let I=new O5(J.material).to({opacity:1},B).easing(cA.Linear.None).start()}cycleDecor(A){if(this.decorMeshes[A]?.mesh){let q=new O5(this.decorMeshes[A].mesh.material).to({opacity:0},1000).easing(cA.Linear.None).start()}let Q=U1[this.currentRoom],B=(this.decorMeshes[A]?.idx||0)%Q.decors[A].images.length,C=this.textureCache[encodeURIComponent(Q.decors[A].images[B])],J=new A1(new P2(500,500),new t1({map:C,transparent:!0}));J.material.opacity=0,J.position.x=Q.decors[A].position.x,J.position.y=Q.decors[A].position.y,J.position.z=Q.decors[A].position.z,J.lookAt(0,0,0),this.glScene.add(J),this.decorMeshes={...this.decorMeshes,[A]:{idx:B,mesh:J}};let I=new O5(J.material).to({opacity:1},1000).easing(cA.Linear.None).start()}handleSelectHotspot(A=null){if(this.selectedHotspot)this.selectedHotspot=null,this.showProductOptions=null,this.handleFovChange(U1[this.currentRoom].initialFov);if(A){if(this.selectedHotspot=A,this.handleFovChange(this.minCameraFov),A)this.handleCameraDirectionChange(A.position)}}handleRoomInteraction(){if(!this.hasFirstClick)this.hasFirstClick=!0,this.logEventLegacy("click","embed"),this.triggerWOTWCommonInteraction("click");if(this.stopHoldingState(),this.startHoldingStateTimer)clearTimeout(this.startHoldingStateTimer);if(!this.showProductInfo)this.startHoldingStateTimer=setTimeout(()=>{this.startHoldingState()},15000)}startHoldingState(){let A=this.localisations();if(this.startHoldingStateTimer)clearTimeout(this.startHoldingStateTimer);this.inHoldingState=!0;let Q=document.createElement("div");Q.dir=this.rtl?"rtl":"ltr",Q.innerHTML=A.translation_holdingExitText,Q.classList.add("bg-white/[90%]","rounded-full","text-[#2b66af]","text-3xl","@2xl:text-5xl","px-14","py-6","z-10","pointer-events-none","transition-all","duration-300","text-center");let B=new XB(Q);B.element.style.opacity="0",B.position.x=0,B.position.y=U1[this.currentRoom].initialCameraDirection?.y??0,B.position.z=-1000,B.lookAt(0,0,0),this.cssScene.add(B),this.holdingMessages=[...this.holdingMessages,B],Object.entries(U1[this.currentRoom].hotspots).map(([C,J])=>{let I=document.createElement("div");I.dir=this.rtl?"rtl":"ltr",I.innerHTML=C!=="laptop"?A.translation_holdingChangeProductText:A.translation_holdingChangeProductTextForLaptops,I.classList.add("bg-white/[90%]","rounded-full","text-[#2b66af]","font-medium","tracking-wide","text-2xl","@2xl:text-3xl","px-7","py-3","z-10","pointer-events-none","transition-all","relative","top-20","after:content['']","after:absolute","after:left-1/2","after:top-full","after:h-0","after:w-0","after:border-white/[90%]","after:border-x-transparent","after:border-x-[20px]","after:border-t-[20px]","after:-translate-x-[20px]","duration-300","text-center");let q=new XB(I);q.element.style.opacity="0",q.position.x=J.position.x,q.position.y=J.position.y,q.position.z=J.position.z,q.lookAt(0,0,0),this.cssScene.add(q),this.holdingMessages=[...this.holdingMessages,q]}),this.showMenu=!1,this.handleSelectHotspot(),this.handleFovChange(U1[this.currentRoom].initialFov),this.handleCameraDirectionChange(U1[this.currentRoom].initialCameraDirection??{x:0,y:0,z:1000},100),this.nextHoldingStateMessage(0)}nextHoldingStateMessage(A){if(this.holdingMessages[A].element.style.opacity="1",this.handleCameraDirectionChange(this.holdingMessages[A].position),A===0)setTimeout(()=>{if(this.inHoldingState)this.handleCameraDirectionChange({x:-300,y:U1[this.currentRoom].initialCameraDirection?.y??0,z:-1000},750)},2000),setTimeout(()=>{if(this.inHoldingState)this.handleCameraDirectionChange({x:300,y:U1[this.currentRoom].initialCameraDirection?.y??0,z:-1000},1500)},2750),setTimeout(()=>{if(this.inHoldingState)this.handleCameraDirectionChange({x:0,y:U1[this.currentRoom].initialCameraDirection?.y??0,z:-1000},750)},4250);this.holdingStateCycleTimer=setTimeout(()=>{this.holdingMessages[A].element.style.opacity="0",A=(A+1)%this.holdingMessages.length,this.nextHoldingStateMessage(A)},A===0?7000:3500)}stopHoldingState(){if(!this.inHoldingState)return;this.inHoldingState=!1,this.holdingMessages.forEach((A)=>{A.element.style.opacity="0"}),this.handleCameraDirectionChange({x:0,y:U1[this.currentRoom].initialCameraDirection?.y??0,z:-1000},200),setTimeout(()=>{if(this.holdingMessages.forEach((A)=>{this.cssScene.remove(A)}),this.holdingMessages=[],this.holdingStateCycleTimer)clearInterval(this.holdingStateCycleTimer)},300)}zoomIn(){if(this.fov>this.minCameraFov)this.fov-=3,this.handleFovChange(this.fov,300)}zoomOut(){if(this.fov<this.maxCameraFov)this.fov+=3,this.handleFovChange(this.fov,300)}handleShowProductOptions(A){let Q=U1[this.currentRoom],B=Q.hotspots[A],I=this.deploymentConfig.find((Y)=>parseInt(Y.room.id)===Q.legacyRoomId)?.room.areas.find((Y)=>parseInt(Y.area.id)===B.legacyAreaId)?.area.assets;this.currentProductOptions=I,this.showProductOptions=A;let q=Q.hotspots[this.showProductOptions].legacyAreaId,K=I.map((Y)=>Y.arid).indexOf(this.textureMeshes[this.showProductOptions]?.arid);this.currentProductInfoIdx=K,this.logEventLegacy("click",`room-${Q.legacyRoomId}-hotspot-${q}-location-${K}-product-info-${this.elementIsDirectlyOnPage()?"embed":"button"}`),this.triggerWOTWCommonInteraction("click",`room-${this.currentRoom}-hotspot-${this.showProductOptions}-location-${K}-product-info`)}addToBasket(A){if(A.sku)window.dispatchEvent(new CustomEvent("add-to-cart",{detail:{sku:A.sku}}));if(A.basketUrl)try{let Q=new URL(A.basketUrl);if(Q)Q.searchParams.append("ek-a2c","true"),window.open(Q.toString(),"_blank")}catch(Q){console.error(Q)}}removeFromBasket(A){if(A.sku)window.dispatchEvent(new CustomEvent("remove-from-cart",{detail:{sku:A.sku}}))}viewProduct(A){if(A.sku)window.dispatchEvent(new CustomEvent("view-product",{detail:{sku:A.sku}}));if(A.basketUrl)try{let Q=new URL(A.basketUrl);if(Q)window.open(Q.toString(),"_blank")}catch(Q){console.error(Q)}}handleAddToCartSuccessEvent(A){let Q=A.detail;this.inCart=[...this.inCart,Q.sku]}handleRemoveFromCartSuccessEvent(A){let Q=A.detail;this.inCart=this.inCart.filter((B)=>B!==Q.sku)}async handleChangeProductInfo(A){this.showProductInfo=A,await this.loadSubComponents({sku:A.sku.toString(),url:A.moreInfoUrl})}async loadSubComponents(A){this.loadingSubComponents=!0;let Q=null;if(A.url&&this.EKControlObject._runtimeData.urlMatcherProcessor?.extractionRegex)Q=zB(A.url,this.EKControlObject._runtimeData.urlMatcherProcessor.extractionRegex);let B={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({elements:this.EKProps.interiorElements,identities:[Q?{...A,url:Q}:A]})};try{let C=await fetch(`https://platform-api-nexus.pointandplace.com/page/enrich-multi/${this.EKControlObject._config.deployment}/?locale=${this.EKControlObject._config.language}&ignoreConstraints=true`,B);if(C.status===200){let J=await C.json(),I=0,q=!1;for(let K of J){if(K!==null){let Y=0;for(let Z of K){let H=this.EKControlObject.createElement(Z.data,Number.parseFloat(`${Y}.${I}`));if(H!==null){if(Z.data.blockType==="ModelViewerElement")this.productInfoModelViewer?.replaceChildren(H),q=!0;if(Z.data.blockType==="BadgeElement")this.productInfoBadge?.replaceChildren(H)}Y++}}I++}if(!q)this.productInfoModelViewer?.parentElement?.classList.add("hidden");this.loadingSubComponents=!1}else this.loadingSubComponents=!1,j0("e","PC Rooms could not enrich-multi",C)}catch(C){this.loadingSubComponents=!1,j0("e","pc rooms enrich error",C)}}async connectedCallback(){if(super.connectedCallback(),["ar"].includes(this.EKControlObject._config.language))this.rtl=!0;this.loadIntelOneDisplayFont(),document.addEventListener("fullscreenchange",()=>{if(!document.fullscreenElement)this.exitFullscreen();else this.enterFullscreen()}),this.availableRooms=Object.keys(this.EKProps.availableRooms).map((A)=>this.EKProps.availableRooms[A]?A:null).filter(Boolean),this.addEventListener("add-to-cart-success",this.handleAddToCartSuccessEvent),this.addEventListener("remove-from-cart-success",this.handleRemoveFromCartSuccessEvent)}async firstUpdated(A){super.firstUpdated(A);try{if(this.availableRooms.includes(this.EKProps.defaultRoom))await this.loadRoom(this.EKProps.defaultRoom,!0);else if(this.availableRooms.length>0)await this.loadRoom(this.availableRooms[0],!0)}catch(B){console.error(B),this.nullifyComponent(B);return}new ResizeObserver((B)=>{this.handleResize()}).observe(this.ekyContainer),this.deploymentConfig?.forEach((B)=>{B.room.areas=B.room.areas.filter((C)=>{return C.area.assets.length>0})})}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("add-to-cart-success",this.handleAddToCartSuccessEvent),this.removeEventListener("remove-from-cart-success",this.handleRemoveFromCartSuccessEvent)}renderLoadingScreen(A=!1){let Q=this.localisations();return this.currentRoom?v`
          <div
            @click="${(B)=>B.stopPropagation()}"
            id="loading-screen"
            class="absolute inset-0 flex flex-col items-center justify-center duration-300 ${A?"opacity-1 pointer-events-auto":"opacity-0 pointer-events-none"}"
          >
            <img
              src="${U1[this.currentRoom].loadingImage}"
              class="shrink-0 min-w-full min-h-full object-cover"
            />
            <div
              class="absolute inset-0 flex flex-col items-center justify-center backdrop-blur backdrop-brightness-50"
            >
              <div class="w-20 h-20 @2xl:h-28 @2xl:w-28 absolute top-[14%]">
                <svg
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  x="0px"
                  y="0px"
                  viewBox="0 0 256 256"
                  enable-background="new 0 0 256 256"
                  xml:space="preserve"
                >
                  <g>
                    <path
                      fill="#ffffff"
                      d="M246,118.2
                      c0-24-29.2-44-71.7-52.5
                      C164.3,32.1,146.5,10,125.8,10
                      c-21,0-38.9,22.5-48.8,56.7
                      c-39.9,9-67,28.4-67,51.4
                      c0,17.6,16.1,33.9,44.3,44.6
                      c2,0.8,4.2-0.2,4.9-2.2
                      c0.8-2-0.2-4.2-2.2-4.9
                      c-25-9.6-39.4-23.2-39.4-37.5
                      c0-18.2,23.4-34.4,57.1-42.9
                      C71,91,68.9,108.9,68.9,128
                      c0,66.2,25,118,56.9,118
                      c17.6,0,33.9-16.1,44.6-44.3
                      c0.7-2-0.2-4.2-2.2-4.9
                      c-1.9-0.7-4.2,0.2-4.9,2.2
                      c-9.6,25-23.2,39.4-37.5,39.4
                      c-26.7,0-49.3-50.6-49.3-110.4
                      c0-19.7,2.5-38.4,6.8-54.7
                      c13.8-2.8,28.9-4.5,44.8-4.5
                      c14.1,0,27.6,1.3,40.1,3.5
                      c4,15.1,6.5,32.2,6.9,50.4l-11.6-11.6
                      c-1.5-1.5-3.9-1.5-5.4,0
                      c-1.5,1.5-1.5,3.9,0,5.4l21.6,21.7l21.7-21.7
                      c1.5-1.5,1.5-3.9,0-5.4
                      c-1.5-1.5-3.9-1.5-5.4,0l-13.3,13.3
                      c-0.2-18.2-2.4-35.3-6-50.4
                      c36.3,8.2,61.8,25,61.8,44
                      c0,26-47.7,47.9-105.2,49.2l11.6-11.6
                      c1.5-1.5,1.5-3.9,0-5.4
                      c-1.5-1.5-3.9-1.5-5.4,0L117.8,172l21.6,21.7
                      c0.7,0.7,1.7,1.1,2.7,1.1
                      c1,0,2-0.4,2.7-1.1
                      c1.5-1.5,1.5-3.9,0-5.4L131.6,175
                      C196,174.1,246,149.5,246,118.2z M128,61.2
                      c-15,0-29.3,1.3-42.4,3.7
                      c9-28.4,23.8-47.3,40.1-47.3
                      c16.2,0,30.8,18.6,39.9,46.5
                      C153.9,62.3,141.2,61.2,128,61.2z"
                    />
                  </g>
                </svg>
              </div>
              <div
                class="bg-white/[90%] rounded-full text-[#2b66af] text-center text-2xl @2xl:text-4xl px-6 @2xl:px-12 py-6 z-10 relative max-w-[80%]"
                dir="${this.rtl?"rtl":"ltr"}"
              >
                ${Q.translation_loadingText}
              </div>
            </div>
          </div>
        `:null}renderRoomsMenu(){let A=this.localisations();if(this.actualAvailableRooms.length<2)return null;return v`
      <div>
        ${this.showMenu?v` <div
              @click=${(Q)=>{this.showMenu=!1}}
              class="absolute inset-0 bg-black/50 z-2"
            ></div>`:null}

        <div
          class="absolute z-3 bottom-0 w-full h-full @2xl:h-auto @2xl:left-1/2 @2xl:-translate-x-1/2 transition-all duration-300 @2xl:w-11/12 ${this.showMenu?"translate-y-0 opacity-1":"translate-y-full opacity-0"}"
        >
          <img
            src="https://pc-rooms.pointandplace.com/assets/icons/chevron-down.svg"
            class="hidden @2xl:block w-10 mx-auto cursor-pointer"
            @click=${()=>this.showMenu=!1}
          />
          <div class="@2xl:p-8 bg-white/[90%] @2xl:rounded-t-2xl h-full">
            <div
              class="flex @2xl:gap-4 w-full h-full items-center @2xl:justify-center transition-all available-rooms-buttons-container"
              style="transform:translateX(${this.mobileRoomMenuPosition*-100}%)"
              @touchstart=${(Q)=>this.handleTouchStart(Q)}
              @touchmove=${(Q)=>this.handleTouchMove(Q)}
              @touchend=${()=>this.handleTouchEnd()}
            >
              ${this.actualAvailableRooms.map((Q)=>v`<div
                    class="@2xl:flex-1 min-w-full @2xl:min-w-0 text-center px-[1%] text-black @2xl:max-w-[300px]"
                  >
                    <button
                      @click=${()=>this.loadRoom(Q)}
                      class="text-center w-full @2xl:max-w-48 overflow-hidden [&>*:first-child]:border-4 [&>*:first-child]:rounded-lg [&>*:first-child]:transition-all ${this.currentRoom===Q?"[&>*:first-child]:border-[#2c67af]":"[&>*:first-child]:border-transparent [&>*:first-child]:hover:border-[#5ac4f8]"}"
                    >
                      <img
                        src="https://pc-rooms.pointandplace.com/assets/${Q}-menu.jpg"
                        class="mb-5 max-w-full h-40 @2xl:h-28 mx-auto object-cover"
                      />
                      <div
                        class="text-center font-medium first-letter:uppercase text-2xl @2xl:text-base"
                        dir="${this.rtl?"rtl":"ltr"}"
                      >
                        ${A[`translation_room${Q[0].toUpperCase()+Q.slice(1)}`]}
                      </div>
                    </button>
                  </div>`)}
            </div>
            <button
              class="absolute flex items-center justify-center top-5 right-5 h-11 w-11 rounded-full bg-[#2c67af] @2xl:hidden"
              @click=${()=>this.showMenu=!1}
            >
              <img
                src="https://pc-rooms.pointandplace.com/assets/icons/close-white.svg"
                class="w-1/2 h-12"
              />
            </button>
            <button
              class="absolute left-1 top-1/2 -translate-y-10 transition-all ${this.mobileRoomMenuPosition<1?"opacity-0":"opacity-1"} @2xl:hidden"
              @click=${()=>this.mobileRoomMenuPosition=Math.max(this.mobileRoomMenuPosition-1,0)}
            >
              <img
                src="https://pc-rooms.pointandplace.com/assets/icons/chevron-blue.svg"
                class="w-10 h-10 -rotate-90"
              />
            </button>
            <button
              class="absolute right-1 top-1/2 -translate-y-10 transition-all ${this.mobileRoomMenuPosition>this.actualAvailableRooms.length-2?"opacity-0":"opacity-1"} @2xl:hidden"
              @click=${()=>this.mobileRoomMenuPosition=Math.min(this.mobileRoomMenuPosition+1,this.actualAvailableRooms.length-1)}
            >
              <img
                src="https://pc-rooms.pointandplace.com/assets/icons/chevron-blue.svg"
                class="w-10 h-10 rotate-90"
              />
            </button>
            <div
              class="@2xl:hidden absolute bottom-[14%] left-1/2 -translate-x-1/2 flex justify-center gap-5"
            >
              ${this.actualAvailableRooms.map((Q,B)=>v`<button
                    @click=${()=>this.mobileRoomMenuPosition=B}
                    class="w-4 h-4 rounded-full border border-2 transition-all ${this.mobileRoomMenuPosition===B?"bg-[#2c67af] border-[#2c67af]":"border-black"}"
                  ></button>`)}
            </div>
          </div>
        </div>
      </div>

      <div>
        ${this.actualAvailableRooms.length>1?v`<button
              class="cursor-pointer absolute bottom-0 left-1/2 -translate-x-1/2 transition-all duration-300 ${this.showMenu||this.showProductOptions?"translate-y-full opacity-0":"translate-y-0 opacity-1"}"
              @click=${()=>{this.handleSelectHotspot(),this.showMenu=!0}}
            >
              <img
                src="https://pc-rooms.pointandplace.com/assets/icons/chevron-up.svg"
                class="w-10 mx-auto"
              />
              <div
                class="px-12 py-3.5 rounded-t-2xl font-medium text-lg text-white bg-[rgba(43,97,163)]/[0.85] tracking-wide whitespace-nowrap"
                dir="${this.rtl?"rtl":"ltr"}"
              >
                ${A.translation_menuText}
              </div>
            </button>`:null}
      </div>
    `}renderAddToCartOrExternalLinkSlider(A,Q){if(this.EKProps.replaceAddToCartButtonsWithMoreInfoButtons)return v`
        <button
          class="w-8 h-8 rounded-full shadow bg-gradient-to-b from-[#469dea] to-[#1e4b85] flex items-center justify-center hover:scale-110 transition-transform"
          @click=${()=>{this.viewProduct(A);let B=U1[this.currentRoom].legacyRoomId,C=U1[this.currentRoom].hotspots[this.showProductOptions].legacyAreaId;this.logEventLegacy("view-product",`room-${B}-hotspot-${C}-location-${Q}-a2c-${this.elementIsDirectlyOnPage()?"embed":"button"}`),this.triggerWOTWCommonInteraction("click",`room-${this.currentRoom}-hotspot-${this.showProductOptions}-location-${Q}-a2c`)}}
        >
          <svg
            focusable="false"
            aria-hidden="true"
            viewBox="-5 -5 34 34"
            fill="white"
            width="28"
            height="28"
          >
            <path
              d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"
            ></path>
          </svg>
        </button>
      `;return v`
      <button
        class="w-8 h-8 rounded-full shadow bg-gradient-to-b from-[#469dea] to-[#1e4b85] flex items-center justify-center hover:scale-110 transition-transform"
        @click=${()=>{if(A.sku&&this.inCart.includes(A.sku))this.removeFromBasket(A);else{this.addToBasket(A);let B=U1[this.currentRoom].legacyRoomId,C=U1[this.currentRoom].hotspots[this.showProductOptions].legacyAreaId;this.logEventLegacy("add-to-cart",`room-${B}-hotspot-${C}-location-${Q}-a2c-${this.elementIsDirectlyOnPage()?"embed":"button"}`),this.triggerWOTWCommonInteraction("click",`room-${this.currentRoom}-hotspot-${this.showProductOptions}-location-${Q}-view-product`)}}}
      >
        <img
          src="https://pc-rooms.pointandplace.com/assets/icons/cart${A.sku&&this.inCart.includes(A.sku)?"-remove":""}.svg"
          class="w-8/12 h-8/12"
        />
      </button>
    `}renderAddToCartOrExternalLinkMoreInfo(){let A=this.localisations();if(this.EKProps.replaceAddToCartButtonsWithMoreInfoButtons)return v`
        <button
          @click=${()=>{this.viewProduct(this.showProductInfo);let Q=U1[this.currentRoom].legacyRoomId,B=U1[this.currentRoom].hotspots[this.showProductOptions].legacyAreaId;this.logEventLegacy("view-product",`room-${Q}-hotspot-${B}-location-${this.currentProductInfoIdx}-a2c-${this.elementIsDirectlyOnPage()?"embed":"button"}`),this.triggerWOTWCommonInteraction("click",`room-${this.currentRoom}-hotspot-${this.showProductOptions}-location-${this.currentProductInfoIdx}-view-product`)}}
          class="h-12 rounded-full bg-[#22558f] flex items-center justify-center hover:scale-105 transition-transform"
        >
          <div class="px-1 w-24 text-sm" dir="${this.rtl?"rtl":"ltr"}">
            ${this.showProductInfo?.sku&&A.translation_viewProduct}
          </div>
          <div
            class="w-12 h-12 rounded-full shadow-lg bg-gradient-to-b from-[#469dea] to-[#1e4b85] flex items-center justify-center"
          >
            <svg
              focusable="false"
              aria-hidden="true"
              viewBox="-5 -5 34 34"
              fill="white"
              width="40"
              height="40"
            >
              <path
                d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"
              ></path>
            </svg>
          </div>
        </button>
      `;return v` <button
      @click=${()=>{if(this.showProductInfo.sku&&this.inCart.includes(this.showProductInfo.sku))this.removeFromBasket(this.showProductInfo);else{this.addToBasket(this.showProductInfo);let Q=U1[this.currentRoom].legacyRoomId,B=U1[this.currentRoom].hotspots[this.showProductOptions].legacyAreaId;this.logEventLegacy("add-to-cart",`room-${Q}-hotspot-${B}-location-${this.currentProductInfoIdx}-a2c-${this.elementIsDirectlyOnPage()?"embed":"button"}`),this.triggerWOTWCommonInteraction("click",`room-${this.currentRoom}-hotspot-${this.showProductOptions}-location-${this.currentProductInfoIdx}-a2c`)}}}
      class="h-12 rounded-full bg-[#22558f] flex items-center justify-center hover:scale-105 transition-transform"
    >
      <div class="px-2 w-24 text-sm" dir="${this.rtl?"rtl":"ltr"}">
        ${this.showProductInfo?.sku&&this.inCart.includes(this.showProductInfo.sku)?A.translation_removeFromCart:A.translation_addToCart}
      </div>
      <div
        class="w-12 h-12 rounded-full shadow-lg bg-gradient-to-b from-[#469dea] to-[#1e4b85] flex items-center justify-center"
      >
        <img
          src="https://pc-rooms.pointandplace.com/assets/icons/cart${this.showProductInfo?.sku&&this.inCart.includes(this.showProductInfo.sku)?"-remove":""}.svg"
          class="w-8/12 h-8/12"
        />
      </div>
    </button>`}filterOptionsByHigherGeneration(A){let Q=[],B=A.find((q)=>q.arid===this.EKResolvedData["datarequirement-pcrooms"].arid);if(B)Q.push(B);else return A;let C=(q)=>q.startsWith("i"),J=(q)=>q.toLowerCase().startsWith("ultra"),I=(q)=>{if(q.toLowerCase().startsWith("1st"))return 14;return parseInt(q.split("th")[0])};return A.map((q)=>{if(q.arid===B?.arid)return;if(!B?.badge||!B?.generation)return;if(C(B.badge)&&!J(q.badge)){let K=I(B.generation);if(I(q.generation)>K)Q.push(q)}if(C(B.badge)&&J(q.badge))Q.push(q);if(J(B.badge)&&!C(q.badge))Q.push(q)}),Q}renderProductOptions(){let A=this.currentProductOptions;if(this.showProductOptions==="laptop"&&this.EKResolvedData["datarequirement-pcrooms"].arid&&this.EKProps.showAllLaptops===!1)A=this.filterOptionsByHigherGeneration(A);if(this.showProductOptions==="laptop"&&this.EKResolvedData["datarequirement-pcrooms"].arid&&this.EKProps.showAllLaptops===!0)A.sort((Q,B)=>{return Q.arid===this.EKResolvedData["datarequirement-pcrooms"].arid?-1:B.arid===this.EKResolvedData["datarequirement-pcrooms"].arid?1:0});return v`
      ${this.showProductOptions?v`<div
            class="absolute inset-0"
            @click="${()=>this.handleSelectHotspot()}"
          ></div>`:null}
      ${A.map((Q,B)=>v`<div
            class="max-w-[90%] @2xl:max-w-none z-2 absolute left-5 bg-white/[90%] h-14 rounded-full flex overflow-hidden shadow transition-transform ${this.showProductOptions?"":"-translate-x-20"}"
            style="bottom:${70*B+20}px"
          >
            <button
              class="h-full"
              @click=${()=>{this.changeTexture(this.showProductOptions,Q.arid);let C=U1[this.currentRoom].legacyRoomId,J=U1[this.currentRoom].hotspots[this.showProductOptions].legacyAreaId;this.logEventLegacy("click",`room-${C}-hotspot-${J}-location-${B}-product-info-${this.elementIsDirectlyOnPage()?"embed":"button"}`),this.triggerWOTWCommonInteraction("click",`room-${this.currentRoom}-hotspot-${this.showProductOptions}-location-${B}-product-info`),this.currentProductInfoIdx=B}}
            >
              <img
                src="https://pc-rooms.pointandplace.com/v3/visual-assets/thumbnails/${Q.arid}.png"
                class="h-full w-14 max-w-none"
              />
            </button>
            <div
              class="flex items-center gap-2 transition-all ${this.textureMeshes[this.showProductOptions]?.arid===Q.arid&&this.showProductOptions?"max-w-80 mr-3":"max-w-0 mr-0"}"
            >
              <div class="w-[calc(100%-9rem)] @2xl:w-56 text-black">
                <div
                  class="font-medium truncate leading-tight"
                  dir="${this.rtl?"rtl":"ltr"}"
                >
                  ${Q.name}
                </div>
                ${this.EKProps.removePrices===!1?v`
                      <div
                        class="leading-tight"
                        dir="${this.rtl?"rtl":"ltr"}"
                      >
                        ${Q.price}
                      </div>
                    `:null}
              </div>
              <div class="flex gap-1">
                <button
                  class="w-8 h-8 rounded-full bg-white shadow flex items-center justify-center hover:scale-110 transition-transform"
                  @click="${()=>{this.handleChangeProductInfo(Q);let C=U1[this.currentRoom].legacyRoomId,J=U1[this.currentRoom].hotspots[this.showProductOptions].legacyAreaId;this.logEventLegacy("click",`room-${C}-hotspot-${J}-location-${B}-more-info-${this.elementIsDirectlyOnPage()?"embed":"button"}`),this.triggerWOTWCommonInteraction("click",`room-${this.currentRoom}-hotspot-${this.showProductOptions}-location-${B}-more-info`)}}"
                >
                  <img
                    src="https://pc-rooms.pointandplace.com/assets/icons/info.svg"
                    class="w-9/12 h-9/12 fill-gradient-to-b from-[#469dea] to-[#1e4b85]"
                  />
                </button>
                ${this.renderAddToCartOrExternalLinkSlider(Q,B)}
              </div>
            </div>
          </div>`)}
    `}renderRoomControls(){return v`<div class="top-5 right-5 absolute flex flex-col gap-10 z-2">
      <button
        class="w-12 h-12 bg-white/[90%] rounded-full active:*:scale-100 hover:*:scale-110 *:transition-transform"
        @click=${()=>this.isFullscreen?this.exitFullscreen():this.enterFullscreen()}
      >
        <img
          src="https://pc-rooms.pointandplace.com/assets/icons/${this.isFullscreen?"exit":"enter"}-fullscreen.svg"
          class="w-3/5 h-3/5 mx-auto"
        />
      </button>
      <div class="flex flex-col">
        <button
          @click=${()=>this.zoomIn()}
          class="w-12 h-12 bg-white/[90%] rounded-t-full active:*:scale-100 hover:*:scale-125 *:transition-transform"
        >
          <img
            src="https://pc-rooms.pointandplace.com/assets/icons/zoom-in.svg"
            class="w-3/5 h-3/5 mx-auto"
          />
        </button>
        <button
          @click=${()=>this.zoomOut()}
          class="w-12 h-12 bg-white/[90%] rounded-b-full active:*:scale-100 hover:*:scale-125 *:transition-transform"
        >
          <img
            src="https://pc-rooms.pointandplace.com/assets/icons/zoom-out.svg"
            class="w-3/5 h-3/5 mx-auto"
          />
        </button>
      </div>
    </div> `}renderProductInfo(){let A=this.localisations();return this.showProductInfo?v`<div
          class="absolute inset-0 backdrop-brightness-[.25] backdrop-blur-sm z-3"
        >
          <button
            class="absolute top-5 right-5 w-12 h-12 rounded-full bg-white shadow flex items-center justify-center hover:scale-110 transition-transform"
            @click="${()=>this.showProductInfo=null}"
          >
            <img
              src="https://pc-rooms.pointandplace.com/assets/icons/close.svg"
              class="w-1/2 h-1/2 fill-gradient-to-b from-[#469dea] to-[#1e4b85]"
            />
          </button>
          <div class="w-full text-white overflow-auto max-h-full">
            <div class="w-3/4 py-10 mx-auto">
              <h1
                class="text-xl @2xl:text-3xl mb-6"
                dir="${this.rtl?"rtl":"ltr"}"
              >
                ${this.showProductInfo.name}
              </h1>
              <div class="flex flex-col @2xl:flex-row gap-4">
                <div class="flex-1">
                  <div
                    id="product-info-model-viewer"
                    class="bg-white rounded flex items-center justify-center aspect-square text-black"
                  >
                    ${this.loadingSubComponents?v`<svg
                          class="animate-spin h-12 w-12"
                          xmlns="http://www.w3.org/2000/svg"
                          fill="none"
                          viewBox="0 0 24 24"
                        >
                          <circle
                            class="opacity-25"
                            cx="12"
                            cy="12"
                            r="10"
                            stroke="#2b61a3"
                            stroke-width="4"
                          ></circle>
                          <path
                            class="opacity-75"
                            fill="#2b61a3"
                            d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                          ></path>
                        </svg>`:null}
                  </div>
                </div>
                <div class="flex-1">
                  ${this.EKProps.removePrices===!1?v`
                        <div
                          class="text-2xl mb-4"
                          dir="${this.rtl?"rtl":"ltr"}"
                        >
                          ${this.showProductInfo.price}
                        </div>
                      `:null}
                  <div
                    class="flex gap-3 mb-4 ${this.rtl?"justify-end":"justify-start"}"
                  >
                    ${this.renderAddToCartOrExternalLinkMoreInfo()}
                    <button
                      class="h-12 rounded-full bg-white flex items-center justify-center hover:scale-105 transition-transform"
                      @click="${()=>{let Q=this.renderRoot?.querySelector("ek-model-viewer");if(Q)Q.showQRUI=!0}}"
                    >
                      <div
                        class="px-2 w-24 text-sm text-[#22558f] leading-4"
                        dir="${this.rtl?"rtl":"ltr"}"
                      >
                        ${A.translation_viewInYourSpace}
                      </div>
                      <div
                        class="w-12 h-12 rounded-full shadow flex items-center justify-center"
                      >
                        <img
                          src="https://pc-rooms.pointandplace.com/assets/icons/cube.svg"
                          class="w-8/12 h-8/12"
                        />
                      </div>
                    </button>
                  </div>
                  <div class="mb-4" dir="${this.rtl?"rtl":"ltr"}">
                    ${this.showProductInfo.description}
                  </div>
                  <div id="product-info-badge" class="mb-4"></div>
                  <div class="italic text-sm" dir="${this.rtl?"rtl":"ltr"}">
                    ${A.translation_productInfoDisclaimer}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>`:null}localisations(){return this.getLocalisations("PCRoomsLocalisation")}isComponentValidToRender(){let A=this.localisations();if(A===null||!A)return!1;else if(!A.translation_addToCart||!A.translation_holdingChangeProductText||!A.translation_holdingExitText||!A.translation_loadingText||!A.translation_menuText||!A.translation_productInfoDisclaimer||!A.translation_removeFromCart||!A.translation_roomCreative||!A.translation_roomGaming||!A.translation_roomProfessional||!A.translation_roomRemote||!A.translation_roomStudent||!A.translation_viewInYourSpace)return!1;return!0}render(){if(!this.isComponentValidToRender())return this.nullifyComponent("Missing localisations"),null;return v`
      <style>
        canvas {
          ${this.EKProps.BETAOptions.canvasWidth==="full"?"width: 100% !important;":null}
          ${this.EKProps.BETAOptions.canvasHeight==="full"?"height: 100% !important;":null}
        }
      </style>
      <div
        style="font-size:16px"
        id="eky-container"
        class="@container h-full relative overflow-hidden"
        @click=${()=>this.handleRoomInteraction()}
        dir="ltr"
      >
        ${this.renderRoomControls()} ${this.renderRoomsMenu()}
        ${this.renderProductOptions()}
        ${this.inHoldingState?v`<div class="absolute inset-0"></div>`:null}
        ${this.renderProductInfo()}
        ${this.renderLoadingScreen(this.loadingRoom)}
        <div id="image-cache" class="hidden" />
      </div>
    `}}f([a({attribute:!1})],GB.prototype,"EKProps",void 0),f([X1("#eky-container")],GB.prototype,"ekyContainer",void 0),f([X1("#loading-screen")],GB.prototype,"loadingScreen",void 0),f([X1("#product-info-model-viewer")],GB.prototype,"productInfoModelViewer",void 0),f([X1("#product-info-badge")],GB.prototype,"productInfoBadge",void 0),f([K0()],GB.prototype,"availableRooms",void 0),f([K0()],GB.prototype,"currentRoom",void 0),f([K0()],GB.prototype,"isFullscreen",void 0),f([K0()],GB.prototype,"fov",void 0),f([K0()],GB.prototype,"showMenu",void 0),f([K0()],GB.prototype,"loadingSubComponents",void 0),f([K0()],GB.prototype,"selectedHotspot",void 0),f([K0()],GB.prototype,"showProductOptions",void 0),f([K0()],GB.prototype,"currentProductOptions",void 0),f([K0()],GB.prototype,"textureMeshes",void 0),f([K0()],GB.prototype,"decorMeshes",void 0),f([K0()],GB.prototype,"loadingRoom",void 0),f([K0()],GB.prototype,"showLoadingScreen",void 0),f([K0()],GB.prototype,"inHoldingState",void 0),f([K0()],GB.prototype,"showProductInfo",void 0),f([K0()],GB.prototype,"mobileRoomMenuPosition",void 0),f([K0()],GB.prototype,"inCart",void 0),f([K0()],GB.prototype,"hasUpdatedAvailableRooms",void 0),f([K0()],GB.prototype,"actualAvailableRooms",void 0),f([K0()],GB.prototype,"rtl",void 0),f([K0()],GB.prototype,"touchStartX",void 0),f([K0()],GB.prototype,"touchEndX",void 0),GB=f([z0("ek-pc-rooms")],GB);class WB extends M1{CDN_PREFIX="https://cdn.pointandplace.com/services/intel-ul";static styles=[r1,U0`
      :host {
        display: block;
        font-family: "IntelOneRegular", sans-serif;
        color: white;
        background: #0c0e16;
        padding: 25px !important;
        position: relative;
        overflow: hidden;
        border-radius: 14px;
        box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.5);
        margin: 0 auto;
        overflow-y: auto;
        direction: ltr;
        background-image: url("https://cdn.pointandplace.com/services/intel-ul/videos/ul-background-video-001.gif");
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
      }
      .container {
        margin: 0 auto;
        position: relative;
        z-index: 1;
        max-width: var(--max-width);
        max-height: var(--max-height);
      }
      .header {
        margin-bottom: 20px;
        text-align: left;
      }
      .processor-name {
        line-height: 1.2;
        margin: 0;
        font-weight: bold;
      }
      .subtitle {
        margin: 5px 0;
        color: white;
        letter-spacing: 1px;
      }
      .description {
        margin: 10px 0;
        max-width: 80%;
        opacity: 0.8;
      }
      .game-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 18px;
      }
      .game-item {
        position: relative;
        overflow: hidden;
        border-radius: 1px;
        background-color: #1a1c23;
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      .game-border-wrapper {
        width: 100%;
        box-sizing: border-box;
        border: 2px solid #00a0e9; /* Blue border */
        border-radius: 1px;
        overflow: hidden;
        transition: box-shadow 0.3s ease-in-out;
      }
      .game-item:hover .game-border-wrapper {
        box-shadow: 0 0 10px rgba(0, 160, 233, 0.8); /* Add shadow effect on hover */
      }
      .game-image-container {
        position: relative;
        width: 100%;
        overflow: hidden;
        border-radius: 1px;
      }
      .game-image {
        aspect-ratio: 3/4;
        object-fit: cover;
        display: block;
        transition: transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        transform-origin: bottom center;
      }
      .game-item:hover .game-image {
        transform: scale(1.1);
      }
      .game-info {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        text-align: center;
        opacity: 0;
        transition: opacity 0.5s ease-out;
        pointer-events: none;
        overflow: hidden;
      }
      .game-item:hover .game-info {
        opacity: 1;
      }
      .fps-box-overlay {
        color: white;
        border-radius: 1px;
        margin-bottom: 10px;
        opacity: 0;
        transform: scale(0.8);
        transition:
          opacity 0.3s ease-in,
          transform 0.3s ease-in;
      }
      .game-item:hover .fps-box-overlay {
        opacity: 1;
        transform: scale(1);
      }
      .overlay-text {
        font-weight: normal;
        opacity: 0;
        transform: translateY(20px);
        transition:
          opacity 0.5s ease-out,
          transform 0.5 ease-out;
      }
      .game-item:hover .overlay-text {
        opacity: 1;
        transform: translateY(0);
      }
      .game-title {
        margin-top: 10px;
        color: white;
        text-align: center;
        width: 100%;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .fps-box {
        background-color: transparent;
        border: 2px solid #00a0e9;
        padding: 2px 10px;
        font-size: 9px;
        border-radius: 2px;
        display: block;
        width: calc(100% - 6px); /* Match the width of the image container */
        margin: 8px auto 0;
        text-align: center;
        box-sizing: border-box;
      }
      .intel-evo-logo {
        position: absolute;
        top: 10px;
        right: 5px;
        width: 73px;
      }

      .footer-container {
        background-color: #0c0e16;
        padding: 10px 10px;
        border-radius: 10px;
        margin-top: 13px;
        display: flex;
        flex-direction: column;
      }

      .footer-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .footer-content .left,
      .footer-content .center,
      .footer-content .right {
        text-align: center;
      }

      .footer-content .right {
        text-align: right;
      }

      .brand-logos {
        display: inline-block;
        height: 24px;
        vertical-align: middle;
        transition: transform 0.3s ease-in-out;
      }

      .brand-logos img {
        height: 100%;
        vertical-align: middle;
      }

      .brand-logos img:hover {
        transform: scale(1.1);
      }

      .legal-disclaimer-container {
        text-align: left;
        color: #b0b0b0;
        font-size: 14px;
        line-height: 1.5;
        margin-bottom: 13px;
      }

      .legal-disclaimer {
        cursor: pointer;
        display: flex;
        align-items: center;
      }

      .legal-disclaimer p {
        margin: 0;
      }

      .disclaimer-text {
        display: none;
        color: #999;
      }

      .disclaimer-text.active {
        display: block;
      }
      video {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: 1; /* Place video below the content */
      }
    `];constructor(A,Q,B,C,J,I,q,K,Y){super(A,Q,B,C,J,I,q,K,Y,!0,"intel-ul");this.games=[];this.ulLocalisatons={blockType:"ULLocalisations"}}connectedCallback(){super.connectedCallback(),this.updateSupportedGames(),this.ulLocalisatons=this.localisations()}SUPPORTED_GAMES_V2={jrt3ij:{id:"jrt3ij",name:"Counter-Strike 2",ulKey:"Counter-Strike 2"},"2c3tcs":{id:"2c3tcs",name:"Rocket League",ulKey:"Rocket League"},"5d10si":{id:"5d10si",name:"Baldur's Gate 3",ulKey:"Baldur's Gate 3"},"5fuls8":{id:"5fuls8",name:"World of Warcraft: Dragonflight",ulKey:"World of Warcraft: Dragonflight"},"6k47ho":{id:"6k47ho",name:"Rainbow Six Siege",ulKey:"Rainbow Six Siege"},"53v92w":{id:"53v92w",name:"Apex Legends",ulKey:"Apex Legends (higher cap)"},a9c2x2:{id:"a9c2x2",name:"Dota 2",ulKey:"Dota 2"},ftph39:{id:"ftph39",name:"DOOM Eternal",ulKey:"DOOM Eternal"},l3b6jh:{id:"l3b6jh",name:"Shadow of the Tomb Raider (ray tracing enabled)",ulKey:"Shadow of the Tomb Raider (ray tracing enabled)"},nwv79b:{id:"nwv79b",name:"GTA V",ulKey:"GTA V"},or91zv:{id:"or91zv",name:"Call of Duty: Warzone 2.0",ulKey:"Call of Duty: Warzone 2.0"},qxtdo1:{id:"qxtdo1",name:"Cyberpunk 2077",ulKey:"Cyberpunk 2077"},sdtgo2:{id:"sdtgo2",name:"Diablo IV",ulKey:"Diablo IV"},ss3tgs:{id:"ss3tgs",name:"Minecraft",ulKey:"Minecraft"},ukikjs:{id:"ukikjs",name:"Overwatch 2",ulKey:"Overwatch 2"},c77b64:{id:"c77b64",name:"Escape from Tarkov",ulKey:"Escape from Tarkov"},e70675:{id:"e70675",name:"Playerunknown's BattleGrounds",ulKey:"Playerunknown's Battlegrounds"},c2c9a:{id:"c2c9a",name:"League of Legends",ulKey:"League of Legends"},bc175b:{id:"bc175b",name:"Valorant",ulKey:"Valorant"},ldorp6:{id:"ldorp6",name:"Black Myth: Wukong",ulKey:"Black Myth: Wukong"}};updateSupportedGames(){this.games=Object.values(this.SUPPORTED_GAMES_V2).map((A)=>({...A,fps:this.readFPSStat("ultra1080p",A.id)})).filter((A)=>A.fps!=="N/A").filter((A)=>A.fps!=="0 FPS").slice(0,12)}readFPSStat(A,Q){let B=this._getStatsFromULResponse(Q);if(!B||!(A in B))return"N/A";let C=B[A];return C?`${C} FPS`:"N/A"}_getStatsFromULResponse(A){let Q=this.SUPPORTED_GAMES_V2[A];if(!Q)return null;let B=this.EKResolvedData["datarequirement-ul"].gameTitles?.find((C)=>C.name===Q.ulKey);if(!B||B.medium4k==="0")return null;return B}renderHeader(){let A=this.EKResolvedData["datarequirement-ul"].cpu||"Intel Core i5-11300H Processor";return v`
      <div class="header">
        <h1 class="processor-name text-[26px] max-w-[290px]">${A}</h1>
        <h4 class="subtitle text-[14px]">
          ${this.ulLocalisatons.ul_game_play_benchmark}
        </h4>
        <p class="description text-[13px]">
          ${this.ulLocalisatons.ul_test_results_sub_header}
        </p>
        <img
          class="intel-evo-logo"
          src="${this.getUrlForBadge()}"
          alt="${A}"
        />
      </div>
    `}renderGameGrid(){return v`
      <div class="game-grid">
        ${this.games.map((A)=>this.renderGameItem(A))}
      </div>
    `}getUrlForBadge(){try{if(this.EKResolvedData["datarequirement-ul"].cpu?.toLowerCase().includes("ultra")){let B=this.EKResolvedData["datarequirement-ul"].cpu.match(/(Ultra \d+|ultra \d+)/)||[];if(B[1])return`https://cdn.pointandplace.com/services/badge/intel/cpu/icon/core-${B[1].replace(" ","-").toLocaleLowerCase()}.jpg`}let A=this.EKResolvedData["datarequirement-ul"].cpu.match(/i(\d)-/)||[],Q=this.EKResolvedData["datarequirement-ul"].cpu.match(/-(\d\d)/)||[];if(A[1]&&Q[1]){let B=parseInt(A[1]),C=parseInt(Q[1]);if(C<11)C=11;return`https://cdn.pointandplace.com/services/badge/intel/cpu/icon/core-i${B}-${C}th.jpg`}}catch(A){}return"https://cdn.pointandplace.com/services/badges/icons/intel-core-i7.jpg"}renderGameItem(A){return v`
      <div class="game-item">
        <div class="game-border-wrapper">
          <div class="game-image-container">
            <img
              class="game-image"
              src="${this.CDN_PREFIX}/images/games/dist/v2/${A.id}.jpg"
              alt="${A.name}"
            />
            <div class="game-info">
              <div class="fps-box-overlay text-[14px]">${A.fps}+</div>
              <div class="overlay-text text-[8px]">
                ${this.ulLocalisatons.ul_average_frame_rate}<br />${this.ulLocalisatons.ul_medium_settings}
              </div>
            </div>
          </div>
        </div>
        <h3 class="game-title text-[9px] uppercase">${A.name}</h3>
        <div class="fps-box text-[13px]">${A.fps}</div>
      </div>
    `}toggleDisclaimer(){this.shadowRoot?.querySelector(".disclaimer-text")?.classList.toggle("active"),this.logEventLegacy("click","ul-legal-disclaimer-button","intel-ul"),this.triggerWOTWCommonInteraction("click","ul-legal-disclaimer-button")}renderFooter(){let A=()=>{this.logEventLegacy("click","button","powered-by-eyekandy-badge"),this.triggerWOTWCommonInteraction("click","powered-by-eyekandy-badge"),window.open(`https://eyekandy.com?utm_source=${window.location.href}&utm_medium=intel-ul&utm_campaign=intel-ul&utm_content=powered-by-eyekandy`,"_blank")};return v`
      <div class="footer-container">
        <div class="legal-disclaimer-container">
          <div class="legal-disclaimer" @click="${this.toggleDisclaimer}">
            <p>${this.ulLocalisatons.ul_legal_and_disclaimers}</p>
            ${this.renderDropDownSvgIcon()}
          </div>
          <div class="disclaimer-text">
            <p>${this.ulLocalisatons.ul_disclaimer_text}</p>
          </div>
        </div>
        <div class="footer-content">
          <div class="left">
            <img
              class="brand-logos"
              src="${this.CDN_PREFIX}/images/intel-logo.png"
              alt="Intel Logo"
            />
          </div>
          <div class="center">
            <img
              class="brand-logos"
              src="${this.CDN_PREFIX}/images/3dmark-logo.png"
              alt="3DMark Logo"
            />
          </div>
          <div class="right cursor-pointer" @click="${()=>A()}">
            ${BJ()}
          </div>
        </div>
      </div>
    `}renderDropDownSvgIcon(){return v`<svg
      xmlns="http://www.w3.org/2000/svg"
      xml:space="preserve"
      width="30"
      height="30"
      viewBox="0 0 25 25"
      style="fill:white;"
    >
      <path d="m7 10 5 5 5-5z"></path>
    </svg>`}closeButton(){let A=()=>{let Q=document.querySelector("ek-badge")||document.querySelector("ek-custom-button");if(Q)Q.setHidden(),this.logEventLegacy("click","ul-close-button","intel-ul"),this.triggerWOTWCommonInteraction("click","ul-close-button")};return v`
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="16"
        height="16"
        viewBox="0 0 16 16"
        fill="none"
        class="ul-close-button absolute top-[10px] right-[10px] z-[1] cursor-pointer"
        @click="${()=>{A()}}"
      >
        <circle
          cx="8"
          cy="8"
          r="7.6"
          fill="black"
          stroke="#00C7FD"
          stroke-width="0.8"
        />
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M11.694 11.6939C12.102 11.2859 12.102 10.6243 11.694 10.2163L9.47758 7.99991L11.6938 5.7837C12.1018 5.37567 12.1018 4.71414 11.6938 4.30612C11.2857 3.8981 10.6242 3.8981 10.2162 4.30612L8.00003 6.52233L5.78375 4.30602C5.37574 3.89799 4.71422 3.89799 4.3062 4.30602C3.89819 4.71404 3.89819 5.37557 4.3062 5.78359L6.52248 7.99991L4.30601 10.2164C3.898 10.6244 3.898 11.286 4.30601 11.694C4.71402 12.102 5.37555 12.102 5.78356 11.694L8.00003 9.47748L10.2164 11.6939C10.6244 12.1019 11.2859 12.1019 11.694 11.6939Z"
          fill="#00C7FD"
        />
      </svg>
    `}render(){return v`
      ${this.EKProps.displayCloseIcon===!0?this.closeButton():R1}
      <style>
        :host {
          --max-width: ${this.EKProps.maxWidth};
          --max-height: ${this.EKProps.maxHeight};
        }
      </style>
      <div class="background-accent"></div>
      <div class="container">
        ${this.renderHeader()} ${this.renderGameGrid()} ${this.renderFooter()}
      </div>
    `}isComponentValidToRender(){return!0}safeFromBase64(A){return decodeURIComponent(atob(A).split("").map(function(Q){return"%"+("00"+Q.charCodeAt(0).toString(16)).slice(-2)}).join(""))}static registerPlacementAndSelector(A,Q){if(Q.EKPlacement&&Q.EKSelector)A.EKPlacement=Q.EKPlacement,A.EKSelector=Q.EKSelector}localisations(){return this.getLocalisations("ULLocalisations")}}f([a({attribute:!1})],WB.prototype,"EKResolvedData",void 0),f([a({attribute:!1})],WB.prototype,"EKProps",void 0),f([K0()],WB.prototype,"games",void 0),f([K0()],WB.prototype,"ulLocalisatons",void 0),WB=f([z0("ek-ul")],WB);var Qq=(A,Q,B=!0)=>{j0("l","Drawing components",A);let C=[];for(let J of A.components){let I=null;if(J.element)I=Bq(J.element.data,Q);if(I===null)continue;if(B===!0)I.registerPlacementAndSelector(J.id,I,J.selector,J.placement);C.push({type:J.element.data.blockType,component:I})}return C},qW={PCRoomsElement:GB,CrossmarkElement:Z1,AIPSV1Element:y9,AIPSElement:S9,ModelViewerElement:ZB,BadgeElement:p9,AllInOnePageButtonElement:b9,AllInOneContentDirectElement:g9,AllInOneContentElement:x9,AllInOneFeatureButtonElement:v9,AllInOneV2PageButtonElement:u9,ContainerElement:m9,ULElement:WB,CustomButtonElement:d9,ARModelsElement:f9},Bq=(A,Q,B=[])=>{let C=null,J={},I={};if(A.blockType!=="NullElement"&&A.dataResolution&&A.dataResolution.resolvedData)J=A.dataResolution.resolvedData;if(A.blockType!=="NullElement"&&A.identities)I=A.identities;if(A.blockType!=="NullElement"&&A.blockType in qW&&A.id){j0("l","element:",A.blockType);let q=[...B];if(q.push(A.blockType),A.blockType in qW){let K=qW[A.blockType],Y=!1;if(A.dataResolution)Y=A.dataResolution.displayIfChildrenHaveUnsatisfiedMandatoryRequirements===!0?!0:!1;C=new K(A.id,A.blockType,A.initialProps,yb(A.children??[],Q,q),J,Q,I,B,Y)}else j0("e","Unknown element to render as child 1:",A.blockType,A)}else if(A.blockType==="NullElement")C=null;else j0("e","Unknown element to render as child 2: ",A.blockType,A);return C},yb=(A=[],Q,B)=>{let C=[];for(let J of A){let I=Bq(J,Q,B);if(I!==null)C.push(I)}return C};var D6=(A)=>{let Q=[[document.body]],B=A||[];for(let C of B){let J=[];Q.forEach((I)=>{let q=[];I.forEach((K)=>{let Y=Array.from(K.querySelectorAll(C.string));if(Y.length>0)if(C.type==="index"&&C.index){let Z=C.index.split(",").map((G)=>G.trim()),H=[];if(Z.forEach((G)=>{if(G==="first"&&Y.length>0)H.push(Y[0]);else if(G==="last"&&Y.length>0)H.push(Y[Y.length-1]);else{let W=parseInt(G,10);if(!isNaN(W)&&W<Y.length)H.push(Y[W])}}),H.length>0)q.push(H)}else q.push(Y)}),J=J.concat(q)}),Q=J}return Q.flat()},BM=(A,Q,B=()=>{return null})=>{let C=A,J=[];for(let I of C){let q=I.getAttribute(Q.extractionAttribute);if(q!==null)if(Q.extractionRegex&&Q.extractionRegex.string){let K=zB(q,Q.extractionRegex);if(K!==null)J.push({val:K,id:B()})}else J.push({val:q,id:B()});else J.push({val:null,id:B()})}return J};var CM=(A,Q)=>{if(A)for(let B of A){let C=D6(B.selectorChain);for(let J of C)if(B.domEventName){let I=(q)=>{j0("l","Executing a changeHandler",B);let K=()=>{if(B.action==="refetch")Q.cleanup(),Q.initiateWithNewConfigIdentifiers(!0,!1);else if(B.action==="renderMissingComponents")return Q.renderMissingComponents();else j0("e","Unknown changeHandler action",B.action)};if(B.delay){if(B.action==="refetch")Q.cleanup();setTimeout(K,B.delay)}else K();if(B.runs==="once")J.removeEventListener(B.domEventName,I)};J.addEventListener(B.domEventName,I)}}};var JM=(A,Q)=>{let B=A._config.identifiers,C="";Object.keys(B).forEach((K)=>{C=`${C}&id_${K}=${encodeURIComponent(B[K])}`});let J=DB(window.location.href),I=encodeURIComponent(k5(J));return`https://platform-api-nexus.pointandplace.com/page/${Q}/${A._config.deployment}/?layout=${I}&locale=${A._config.language}${C}`},IM=async(A,Q,B)=>{let C=JM(A,"single");if(Q&&B)C+=`&u=${Q}&s=${B}`;let J=await fetch(C),I=await J.json();return{statusCode:J.status,data:I}},qM=async(A,Q)=>{let B=JM(A,"enrichment"),C={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)},J=await fetch(B,C),I=await J.json();return{statusCode:J.status,data:I}};var KM=(A)=>{let Q={_count:0,getReturnID:()=>{return Q._count=Q._count+1,Q._count}},B=[];if(A)for(let C of A){let J=fb(C,Q);B.push({id:C.id,lookups:J})}return B},fb=(A,Q)=>{let B=D6(A.extractionSelectorChain);return BM(B,A.extractionSelectorChainProcessor,Q.getReturnID)};var Cq=(A,Q)=>{if(A.blockType!=="NullElement"&&"children"in A&&A.children){let B=[];for(let C of A.children){let J=Cq(C,Q);B.push(J)}A.children=B}return{...A,id:`${A.id}:${Q}`}},YM=(A,Q,B)=>{for(let C of Q){let J=A.filter((I)=>{return I.id===C.id});if(J.length===1){let I=J[0],q=D6(C.selectorChain);if(q.length===I.lookups.length)for(let K=0;K<q.length;K++){let Y=I.lookups[K],Z=C.lookups.filter((H)=>{return H.id===Y.id});if(Z.length===1){let H=Z[0];if(H.element){let G=Cq(H.element.data[0],Y.id),W=B.createElement(G);if(W!==null)W.registerPlacementAndSelector(G.id,W,q[K],C.placement);else j0("l","Could not make element in enricher",G)}}}else j0("e","Selector shape missmatch")}else j0("e","API content missmatch")}};var ZM=(A,Q)=>{let B=KM(A);(async()=>{try{let J=await qM(Q,B);if(J.statusCode===200){let I=J.data;YM(B,I,Q)}else j0("e","Did not get a 200 status code for enrichment",J)}catch(J){j0("e","Problem with enrichment network request",J)}})()};var hb=(A)=>{return{key:`${A}_MUTATION_OBSERVER`,callback:`${A}_MUTATION_CALLBACK`,observations:`${A}_MUTATIONS_OBSERVED`}},xb=(A)=>{return(Q,B)=>{for(let C of Q)if(C.type==="childList")window[A]()}},gb=(A,Q,B)=>{let C=document.querySelector(A.selector);if(!C){j0("e","Unable to find element to observe",A.selector);return}let J={attributes:!0,childList:!0,subtree:!0},I=xb(B.callback);if(typeof I!=="function")return;window[B.key]=new MutationObserver(I),window[B.key].observe(C,J),window[B.callback]=()=>{try{window[B.key].disconnect()}catch(q){j0("e","There was an issue with disconnecting the mutation observer",q)}setTimeout(()=>{if(document.querySelector(A.targetElementToExist)){if(A.action==="renderMissingComponents")return Q.renderMissingComponents()}else j0("e","The target element you want to exist does not yet exist",A.targetElementToExist)},A.delay)}},HM=(A,Q)=>{if(!A)return;A.forEach((B)=>{let C=hb(Q._config.deployment);gb(B,Q,C)})};var KW=(A,Q)=>{if(Q[A.EKID]=A,A.EKChildren)for(let B of A.EKChildren)KW(B,Q)},XM=(A)=>{let Q=document.querySelector(A);if(Q)return Q.offsetParent!==null;return!1},GM=(A,Q,B,C)=>{if(C===!0){let J=[];for(let I of A)if(I.identifier==="add-to-cart"){if(I.selectorChain)I.selectorChain.forEach((q)=>{J.push(q.string)})}document.addEventListener("click",(I)=>{let q=I.target;if(((Y)=>{if(!Y)return!1;if(J.some((Z)=>Y.matches(Z)))return!0;return!1})(q)){let Y={};for(let H in Q._registeredElements){let G=Q._registeredElements[H];KW(G,Y)}for(let H in Y)if(Y[H].isWOTWEnabled()){if(Y[H].EKBlockType==="AllInOnePageButtonElement")Y[H].logEventLegacy("add-to-cart","button","all-in-one","meta"),Y[H].logEventLegacy("add-to-cart","button","ar-models");else Y[H].logEventLegacy("add-to-cart",Y[H].elementIsDirectlyOnPage()?"embed":"button");if(Y[H].EKBlockType==="ModelViewerElement"&&Y[H].breadcrumbs.length>0){if(Y[H].logEventLegacy("add-to-cart",Y[H].elementIsDirectlyOnPage()?"embed":"button","3dfw"),Y[H]._hasHotspots)Y[H].logEventLegacy("add-to-cart",Y[H].elementIsDirectlyOnPage()?"embed":"button","3d-hotspot")}}if(Q._wotwInterfaceNexus?.triggerAddToCart({productID:B===null?"unknown":B}),new URL(window.location.href).searchParams.get("ek-a2c")==="true"){if(XM("#colorbox")&&["a2f96ae5-ae8f-4d07-8720-5ef45eeb05be","1fbead6c-96f1-4597-b490-52962dcdb8af"].includes(Q._config.deployment))return;q.click()}}})}else for(let J of A){let I=D6(J.selectorChain);for(let q of I)if(J.domEventName){q.addEventListener(J.domEventName,()=>{if(J.identifier==="add-to-cart"){let Y={};for(let Z in Q._registeredElements){let H=Q._registeredElements[Z];KW(H,Y)}for(let Z in Y)if(Y[Z].isWOTWEnabled()){if(Y[Z].EKBlockType==="AllInOnePageButtonElement")Y[Z].logEventLegacy("add-to-cart","button","all-in-one","meta"),Y[Z].logEventLegacy("add-to-cart","button","ar-models");else Y[Z].logEventLegacy("add-to-cart",Y[Z].elementIsDirectlyOnPage()?"embed":"button");if(Y[Z].EKBlockType==="ModelViewerElement"&&Y[Z].breadcrumbs.length>0){if(Y[Z].logEventLegacy("add-to-cart",Y[Z].elementIsDirectlyOnPage()?"embed":"button","3dfw"),Y[Z]._hasHotspots)Y[Z].logEventLegacy("add-to-cart",Y[Z].elementIsDirectlyOnPage()?"embed":"button","3d-hotspot")}}Q._wotwInterfaceNexus?.triggerAddToCart({productID:B===null?"unknown":B})}});let K=new URL(window.location.href).searchParams.get("ek-a2c")==="true";if(J.identifier==="add-to-cart"&&K){if(XM("#colorbox")&&["a2f96ae5-ae8f-4d07-8720-5ef45eeb05be","1fbead6c-96f1-4597-b490-52962dcdb8af"].includes(Q._config.deployment))return;q.click()}}}};var Jq=async(A,Q,B=!1,C,J)=>{if(A._config.autoInit===!1&&B===!0)return[];A._logEventLegacy({service:"meta",type:"page-view",detail:"",arid:null});try{j0("l","Doing first network request");let I=await IM(A,C,J);if(I.statusCode===200&&I.data&&I.data.success&&I.data.success===!0){if(I.data.commonData.urlMatcher)A._runtimeData.urlMatcher=I.data.commonData.urlMatcher;if(I.data.commonData.urlMatcherProcessor)A._runtimeData.urlMatcherProcessor=I.data.commonData.urlMatcherProcessor;if(I.data.enrichers&&I.data.enrichers.length>0)ZM(I.data.enrichers,A);if(CM(I.data.changeHandlers,A),HM(I.data.mutationObserver,A),I.data.components.forEach((K)=>{A._matchedComponents[K.id]=K}),I.data.deploymentColours)A._config.deploymentColours=I.data.deploymentColours;if(A._wotwInterfaceNexus.triggerEventPageView({match:"true"}),A._config.wotwEnabled===!0&&I.data.wotw&&I.data.wotw.listeners&&I.data.wotw.listeners.length>0)GM(I.data.wotw.listeners,A,I.data.commonData.productID,I.data.listenToAllClickEventsForAddToCart);A._breakpoints=I.data.commonData.breakpoints,SU(A);let q=Qq(I.data,A,Q);return A._wotwInterfaceNexus.processQueue(),window.dispatchEvent(new Event("ek-initiated")),q}else j0("l","Did not get a 200 status code for initial",I),window.dispatchEvent(new CustomEvent("ek-initiate-failed",{detail:{error:I.data.message||"unknown"}})),A._wotwInterfaceNexus.triggerEventPageView({match:"false"}),A._logEventLegacy({service:"coverage",type:"miss",detail:"",arid:null})}catch(I){j0("e","Problem with initial network request",I)}return[]};var WM=(A)=>{let Q=document.getElementById(A),B=document.querySelector('[src*="pointandplace.js"]'),C={},J=null,I=null,q=null,K=null;if(Q){for(let Y of Q.attributes)if(Y.name.startsWith("data-ek-id")){let Z=Y.name.slice("data-ek-id-".length);C[Z]=Y.value}if(J=Q.getAttribute("data-ek-language"),!J||J.length===0)throw new Error("No language");if(I=Q.getAttribute("data-ek-deployment"),!I||I.length===0)throw new Error("No deployment");q=Q.getAttribute("data-ek-auto-init")!=="false"?!0:!1,K=Q.getAttribute("data-ek-wotw-enabled")!=="false"?!0:!1}else if(window.location.hostname==="www.oakfurnitureland.co.uk")q=!0,K=!0;else if(B){if(J=B.getAttribute("data-eky-language"),I=B.getAttribute("data-eky-distributor"),B.getAttribute("data-eky-sku"))C.sku=B.getAttribute("data-eky-sku");if(B.getAttribute("data-eky-mpn"))C.mpn=B.getAttribute("data-eky-mpn");if(B.getAttribute("data-eky-ean"))C.ean=B.getAttribute("data-eky-ean");q=B.getAttribute("data-ek-auto-init")!=="false"&&B.getAttribute("data-eky-auto-init")!=="false"?!0:!1,K=B.getAttribute("data-ek-wotw-enabled")!=="false"&&B.getAttribute("data-eky-wotw-enabled")!=="false"?!0:!1}else throw new Error("No script tag");return{identifiers:C,config:{deployment:I,language:J,autoInit:q,wotwEnabled:K}}};var vb=(A)=>{let Q=localStorage.getItem(A);if(Q===null)Q=n4(),localStorage.setItem(A,Q);return Q},bb=(A)=>{let Q=sessionStorage.getItem(A);if(Q){let{id:J,expiry:I}=JSON.parse(Q);if(new Date(I)>new Date)return J}let B=n4(),C=new Date(new Date().getTime()+3600000);return sessionStorage.setItem(A,JSON.stringify({id:B,expiry:C.toISOString()})),B},FM=()=>{return()=>{return vb("__EK__WOTW__USER__ID__")}},VM=()=>{return()=>{return bb("__EK__WOTW__SESSION__ID__")}};var UM=()=>{let A=WM("_EK_NEXUS_SCRIPT_"),Q={};if(Q.identifiers=A.identifiers,A.config.language!==null)Q.language=BV(A.config.language);if(A.config.deployment!==null)Q.deployment=A.config.deployment;if(A.config.autoInit!==null)Q.autoInit=A.config.autoInit;else Q.autoInit=!0;if(A.config.wotwEnabled!==null)Q.wotwEnabled=A.config.wotwEnabled;else Q.wotwEnabled=!0;return Q.wotwGetUserIDFunction=Q.wotwEnabled?FM():()=>null,Q.wotwGetSessionIDFunction=Q.wotwEnabled?VM():()=>null,Q},zM=(A={})=>{let Q=UM(),B={...Q,...A};if(B.wotwEnabled)OK({dsn:"https://fdf7653b794678230b87686e9922fd89@o4507774754619392.ingest.de.sentry.io/4507803909685328",debug:!1,tracesSampleRate:1,environment:"prod",integrations:function(K){return K.filter(function(Y){return Y.name!=="GlobalHandlers"})}});if(AV.includes(B.deployment||window.location.hostname))throw QV(B),new Error("LOADED_LEGACY");if(B.deployment==="676159f216e68f02cefeba2d")B.wotwGetUserIDFunction=()=>{let Y=localStorage.getItem("__EK__WOTW__USER__ID__");if(Y===null&&typeof OptanonActiveGroups!=="undefined"&&OptanonActiveGroups.includes("C0002"))Y=n4(),localStorage.setItem("__EK__WOTW__USER__ID__",Y);return Y},B.wotwGetSessionIDFunction=()=>{let Y=sessionStorage.getItem("__EK__WOTW__SESSION__ID__");if(Y){let{id:Z,expiry:H}=JSON.parse(Y);if(new Date(H)>new Date)return Z}if(typeof OptanonActiveGroups!=="undefined"&&OptanonActiveGroups.includes("C0002")){let Z=n4(),H=new Date(new Date().getTime()+3600000);return sessionStorage.setItem("__EK__WOTW__SESSION__ID__",JSON.stringify({id:Z,expiry:H.toISOString()})),Z}else return null};if(!B.deployment||!B.language)return j0("l","No language or deployment specified, library not initiated"),null;let C=new IntersectionObserver((K,Y)=>{K.forEach((Z)=>{if(Z.isIntersecting){let H=Z.target;if(typeof H.triggerWOTWVisibility==="function")H.triggerWOTWVisibility()}})},{root:null,rootMargin:"0px",threshold:0.4}),J,I=new Gq("prod",5000);if(Q.deployment==="84de1331-ff00-4fd0-84b8-04482451b824")J=new Wq(B.deployment,B.language,B.wotwGetUserIDFunction,B.wotwGetSessionIDFunction);else J=new Uq(B.deployment,B.language,B.wotwGetUserIDFunction,B.wotwGetSessionIDFunction);if(B.wotwEnabled===!0)J.enable();let q={_runtimeData:{},_registeredElements:{},_matchedComponents:{},_currentBreakpoint:"default",_breakpoints:{default:"(min-width: 0px)",lg:"(min-width: 1024px)",md:"(min-width: 768px)",sm:"(min-width: 640px)",xl:"(min-width: 1280px)",xxl:"(min-width: 1536px)"},_breakpointSubscription:null,_config:{autoInit:B.autoInit,deployment:B.deployment,language:B.language,wotwEnabled:B.wotwEnabled,identifiers:B.identifiers,wotwGetUserIDFunction:B.wotwGetUserIDFunction,wotwGetSessionIDFunction:B.wotwGetSessionIDFunction,deploymentColours:{}},_wotwInterfaceNexus:J,_getWebComponent:(K)=>{return Bq(K,q)},_registerWebComponent:(K,Y)=>{if(q._registeredElements[K])j0("e","Somehow re-registering element",K,Y);q._registeredElements[K]=Y,C.observe(q._registeredElements[K])},_deRegisterWebComponent:(K)=>{if(!q._registeredElements[K])j0("e","Somehow we could not find element",K);else C.unobserve(q._registeredElements[K]),delete q._registeredElements[K]},_logEventLegacy:(K)=>{if(!B.wotwEnabled)return!1;let Y=q._config.wotwGetUserIDFunction();if(Y!==null&&q._config.wotwEnabled===!0){let Z=q._config.wotwGetSessionIDFunction(),H={distributor:q._config.deployment,language:q._config.language,location:window.location.href,ts:new Date().toISOString().replace("T"," ").replace("Z",""),user:Y,referrer:document.referrer,session:Z,...K};I.sendEvent(H)}},cleanup:()=>{QY(q);for(let K in q._registeredElements)q._registeredElements[K].remove()},initiate:async(K=!0,Y=!1)=>{let Z=q._config.wotwGetUserIDFunction(),H=q._config.wotwGetSessionIDFunction();return await Jq(q,K,Y,Z,H)},createElement:(K,Y=null)=>{let Z=K;if(Y!==null)Z=Cq(K,Y);return q._getWebComponent(Z)},getAbTestValue:(K)=>{if(!B.wotwEnabled||B.deployment==="aef4d3e1-04fd-436d-8fa1-a14a35f369db")return"a";let Y=`eky-ab-${K}`,Z=new URLSearchParams(window.location.search);if(Z.get(Y))return Z.get(Y);let G=`; ${document.cookie}`.split(`; ${Y}=`);if(G.length===2)return(G.pop()||"").split(";").shift();let W=Math.random()<0.5?"a":"b";return document.cookie=`${Y}=${W};path=/`,W},refreshConfig:()=>{return{...UM(),...A}},initiateWithNewConfigIdentifiers:async(K=!0,Y=!1)=>{let Z=q.refreshConfig(),H=q;if(!Z.identifiers)return;return H._config.identifiers=Z.identifiers,await Jq(H,K,Y)},updateIdentifiers:async(K={},Y=!0,Z=!1)=>{if(j0("l","EK: Attempting to update identifiers"),!Object.keys(K).length){j0("l","EK: No identifiers provided, aborting");return}if(!window.__EK_LIBRARY__){j0("l","EK: __EK_LIBRARY__ Does not exist in this DOM, aborting");return}window.__EK_LIBRARY__.cleanup();let H=document.querySelector('[src*="pointandplace.js"]');if(!H){j0("l","EK: We were unable to find the script tag, aborting");return}let G={sku:"ekySku",mpn:"ekyMpn",ean:"ekyEan",upc:"ekyUpc",brand:"ekyBrand",image:"ekyImage",product:"ekyProduct"};Object.keys(K).forEach((F)=>{if(G[F])H.dataset[G[F]]=String(K[F])});let W=q;return W._config.identifiers=K,j0("l","EK: Finishded formatting identifiers, now initiating with the new identifiers"),await Jq(W,Y,Z)},renderMissingComponents:async()=>{let K={components:[]},Y=window.__EK_LIBRARY__._matchedComponents,Z=window.__EK_LIBRARY__._registeredElements,H=new Set(Object.keys(Z));for(let G in Y)if(Y.hasOwnProperty(G)){let W=Y[G],F=W.element.data.id;if(!H.has(F))K.components.push(W)}return Qq(K,q,!0),!0}};return q};try{if(window.__EK_LIBRARY__===void 0)try{let A=zM();if(A!==null){window.__EK_LIBRARY__=A,window.dispatchEvent(new Event("ek-ready"));try{A.initiate(!0,!0)}catch(Q){j0("e","Could not initiate library",Q)}}else j0("e","Could not initiate library, invalid config")}catch(A){if(A.message==="LOADED_LEGACY")j0("l","Loaded legacy eyekandy script");else j0("e","Config from script tag problem",A)}else j0("e","Duplicate library init call")}catch(A){j0("e","Fatal global error catch",A)}
}catch(_topLevelEKError){}})();